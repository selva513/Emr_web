<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Jeenah Emr</title>
    <script src="~/Syncfusion/jquery-1.9.1.min.js"></script>
    <script src="~/Chart/Chart.js"></script>
    <script src="~/Chart/Common.js"></script>
    <script src="~/Syncfusion/JavaScript.js"></script>
    <link href="~/Syncfusion/bootstrap4.css" rel="stylesheet" />

    <script src="~/Theme/plugins/summernote/summernote-bs4.min.js"></script>
    <link href="~/Theme/plugins/summernote/summernote-bs4.css" rel="stylesheet" />
    <!-- Font Awesome -->
    <link href="~/Theme/plugins/fontawesome-free/css/all.min.css" rel="stylesheet" />

    

    <!-- overlayScrollbars -->
    <link rel="stylesheet" href="~/Theme/dist/css/adminlte.min.css">

</head>
<body class="sidebar-mini layout-fixed sidebar-collapse" style="height:auto;" onload="StartTimers();" onmousemove="ResetTimers();">
    <div class="wrapper">
        <nav class="main-header navbar navbar-expand navbar-white navbar-light" style="display:none;">
            <!-- Left navbar links -->
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
                </li>
            </ul>
            <!-- Right navbar links -->
            <ul class="navbar-nav ml-auto">
                <!-- Messages Dropdown Menu -->
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-comments"></i>
                        <span class="badge badge-danger navbar-badge">3</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <a href="#" class="dropdown-item">
                            <!-- Message Start -->
                            <div class="media">
                                <img src="../../dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                                <div class="media-body">
                                    <h3 class="dropdown-item-title">
                                        Brad Diesel
                                        <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                                    </h3>
                                    <p class="text-sm">Call me whenever you can...</p>
                                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                </div>
                            </div>
                            <!-- Message End -->
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <!-- Message Start -->
                            <div class="media">
                                <img src="../../dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                <div class="media-body">
                                    <h3 class="dropdown-item-title">
                                        John Pierce
                                        <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                                    </h3>
                                    <p class="text-sm">I got your message bro</p>
                                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                </div>
                            </div>
                            <!-- Message End -->
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <!-- Message Start -->
                            <div class="media">
                                <img src="../../dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                                <div class="media-body">
                                    <h3 class="dropdown-item-title">
                                        Nora Silvester
                                        <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                                    </h3>
                                    <p class="text-sm">The subject goes here</p>
                                    <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                                </div>
                            </div>
                            <!-- Message End -->
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
                    </div>
                </li>
                <!-- Notifications Dropdown Menu -->
                <li class="nav-item dropdown">
                    <a class="nav-link" data-toggle="dropdown" href="#">
                        <i class="far fa-bell"></i>
                        <span class="badge badge-warning navbar-badge">15</span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
                        <span class="dropdown-item dropdown-header">15 Notifications</span>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-envelope mr-2"></i> 4 new messages
                            <span class="float-right text-muted text-sm">3 mins</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-users mr-2"></i> 8 friend requests
                            <span class="float-right text-muted text-sm">12 hours</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item">
                            <i class="fas fa-file mr-2"></i> 3 new reports
                            <span class="float-right text-muted text-sm">2 days</span>
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#">
                        <i class="fas fa-th-large"></i>
                    </a>
                </li>
            </ul>
        </nav>
        <!-- /.navbar -->
        <!-- Main Sidebar Container -->
        <aside class="main-sidebar sidebar-dark-info elevation-4" style="background-color:white">
            <!-- Brand Logo -->
            <a class="brand-link">
                <img src="~/images/KD-Logo.jpg"
                     alt="Mediview Logo"
                     style="opacity: 1.8;width:30%;">
                @*<span class="brand-text font-weight-light">Mediview EMR</span>*@
            </a>
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Sidebar user (optional) -->
                <div class="user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="image">
                        <img src="~/images/User.png" style="width:1.5rem;" class="img-circle elevation-2" alt="User Image">
                    </div>
                    <div class="info">
                        @*<label id="lbluserid" class="d-block" style="color:#c2c7d0"></label>*@
                        <a id="lbluserid" class="d-block" style="font-size:1rem;color:black;"></a>
                    </div>
                </div>
                <!-- Sidebar Menu -->
                <div id="sidebaremrmenu">

                </div>
                <!-- /.sidebar-menu -->
            </div>
            <!-- /.sidebar -->

        </aside>

        <div id="timeout" style="display:none;">
            <h1>
                Session About To Timeout
            </h1>
            <p>
                You will be automatically logged out in 1 minute.
                To remain logged in move your mouse over this window.
            </p>
        </div>

        @RenderBody()

        <footer class="main-footer">
            <div class="float-right d-none d-sm-block" style="font-size:10px;">
                <b>Version</b> 1.0
            </div>
            <strong style="font-size:10px;">
                Copyright &copy; 2020-2021 <a href="https://www.alliedbusiness.co.in/" target="_blank">Allied Business Solutions</a>.All rights
                reserved.
            </strong>
        </footer>
    </div>


    <!-- Bootstrap 4 -->
    <script src="~/Theme/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="~/Theme/dist/js/adminlte.min.js"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="~/Theme/dist/js/demo.js"></script>
    <!-- DataTables -->
    <script src="~/Theme/plugins/datatables/jquery.dataTables.js"></script>
    <script src="~/Theme/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>
    <!-- ChartJS -->
    <script src="~/Theme/plugins/chart.js/Chart.min.js"></script>

    <script src="~/editor/editor.js"></script>
    <link href="~/editor/editor.css" rel="stylesheet" />
    <link href="~/editor/font-awesome.min.css" rel="stylesheet" />

    <link rel="stylesheet" href="~/FullCalendar/Style/jquery.qtip.min.css" />

    <!-- Full Calendar -->
    <link rel="stylesheet" href="~/FullCalendar/Style/fullcalendar.min.css" />
    <link rel="stylesheet" href="~/FullCalendar/Style/fullcalendar.print.css" media="print" />

    <script type="text/javascript">
        // Set timeout variables.
        //var timoutWarning = 10000; // Display warning in 1Mins.
        //var timoutNow = 120000; // Timeout in 2 mins.

        var timoutWarning = 60 * 59 * 1000; // Display warning in 59 Mins.
        var timoutNow = 60 * 60 * 1000; // Timeout in 60 mins.
        var logoutUrl = "/Login/Login"// URL to logout page.

        var warningTimer;
        var timeoutTimer;

        // Start timers.
        function StartTimers() {
            try {
                warningTimer = setTimeout("IdleWarning()", timoutWarning);
                timeoutTimer = setTimeout("IdleTimeout()", timoutNow);
            }
            catch (e) {
                console.log("StartTimers" + e)
            }
        }

        // Reset timers.
        function ResetTimers() {
            try {
                clearTimeout(warningTimer);
                clearTimeout(timeoutTimer);
                StartTimers();
                $("#timeout").dialog('close');
            }
            catch (e) {
                //console.log("ResetTimers" + e);
            }
        }

        // Show idle timeout warning dialog.
        function IdleWarning() {
            try {
                $("#timeout").dialog({
                    title: "Session Time Out",
                    modal: true,
                    width: 500,
                });
            }
            catch (e) {
                console.log("IdleWarning" + e);
            }
        }

        // Logout the user.
        function IdleTimeout() {
            try {
                window.location = logoutUrl;
            }
            catch (e) {
                console.log("IdleTimeout" + e);
            }
        }
    </script>
    <script type="text/javascript">
        var rootUrl = "http://" + document.location.hostname + ":" + window.location.port;
        $(document).ready(function () {
            BindMenus();
        });
        function BindMenus() {
            try {
                $.ajax({
                    url: rootUrl + "/Home/GetAllMenuList",
                    type: 'GET',
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    beforeSend: function () { $("#loading").css("display", "block"); },
                    success: OnSuccessMenus,
                    complete: function () { $("#loading").css("display", "none"); }
                });
            }
            catch (e) {

            }
        }
        function OnSuccessMenus(response) {
            try {
                if (response.MenuHeader.length > 0) {
                    var Userid = response.MenuHeader[0].M_CreatedUser;
                    $("#lbluserid").text(Userid);
                    var html = "";
                    html += "<nav class='mt-2'>";
                    html += "<ul class='nav nav-pills nav-sidebar flex-column' data-widget='treeview' role='menu' data-accordion='false'>";
                    html += "<li class='nav-item' style='margin-top:-8px;'>";
                    html += "<a href='/Home/Index' class='nav-link'>";
                    //html += "<i class='nav-icon fas fa-tachometer-alt'></i>";
                    html += "<img src='/images/Dashbard.ico' style='height:35px; width:35px'/>&nbsp;&nbsp;";
                    //html += "<i class='Dashboard_Icon'></i>";
                    //html += "<img class='Dashboard_Icon'/>";
                    html += "<p style='color: black;'> Dashboard </p>";
                    html += "<hr class='hr'/>";
                    html += "</a>";
                    html += "</li>";

                    for (var PCHeader = 0; PCHeader < response.MenuHeader.length; PCHeader++) {
                        var Mainmenuname = response.MenuHeader[PCHeader].M_Menuname;
                        var Menuclass = response.MenuHeader[PCHeader].M_Class;
                        var Href = response.MenuHeader[PCHeader].M_Href;
                        var ulid = Mainmenuname + "_" + PCHeader;
                        if (Href != null && Href != "") {
                            html += "<li class='nav-item li'>";
                            html += "<a href=" + Href + "  class='nav-link'>";
                            html += "<img src=" + Menuclass + " style='height:35px; width:35px'/>&nbsp;&nbsp;";
                            //html += "<i class='nav-icon fas " + Menuclass + "'></i>";
                            html += "<p style='color: black;'>" + Mainmenuname + "</p>";
                            html += "<hr class='hr'/>";
                            html += "</a >";
                            html += "</li>";
                        }
                        else {
                            html += "<li id=" + ulid + " onclick='return ChangeMenuStyle(this)' class='nav-item has-treeview li'>";
                            html += "<a href='#' class='nav-link'>";
                            //html += "<i class='nav-icon fas " + Menuclass + "'></i>";
                            html += "<img src=" + Menuclass + " style='height:35px; width:35px'/>&nbsp;&nbsp;";
                            html += "<p style='color: black;'>" + Mainmenuname + "<i class='fas fa-angle-left right'></i></p>";
                            html += "<hr class='hr'/>";
                            html += "</a >";
                            html += "<ul class='nav nav-treeview' >";
                            for (var PCDetails = 0; PCDetails < response.MenuHeader[PCHeader].subMenus.length; PCDetails++) {
                                var Submenuname = response.MenuHeader[PCHeader].subMenus[PCDetails].Submenuname;
                                var Submenuurl = response.MenuHeader[PCHeader].subMenus[PCDetails].Submenulink;
                                var SubClass = response.MenuHeader[PCHeader].subMenus[PCDetails].S_Class;
                                html += "<li class='nav-item'>";
                                html += "<a href=" + Submenuurl + " class='nav-link'>";
                                html += "<img src=" + SubClass + " style='width:1.6rem'/>&nbsp;&nbsp;";
                                //html += "<i class='nav-icon far fa-circle text-info'></i>";
                                html += "<p style='color: black;'>" + Submenuname + "</p>";
                                html += "</a>";
                                html += "</li>";
                            }
                            html += "</ul>";
                            html += "</li>";
                            html += "<br />"; //id='liopen' style='display:none;'
                        }
                    }

                    //if (response.PharmacyMenu.length > 0) {
                    //    html += "<li class='nav-header'>EXAMPLES</li>";
                    //    for (var PCHeader = 0; PCHeader < response.MenuHeader.length; PCHeader++) {
                    //        var Mainmenuname = response.MenuHeader[PCHeader].M_Menuname;
                    //        var Menuclass = response.MenuHeader[PCHeader].M_Class;
                    //        var Href = response.MenuHeader[PCHeader].M_Href;
                    //        var ulid = Mainmenuname + "_" + PCHeader;
                    //        if (Href != null && Href != "") {
                    //            html += "<li class='nav-item li'>";
                    //            html += "<a href=" + Href + "  class='nav-link'>";
                    //            html += "<img src=" + Menuclass + " style='height:35px; width:35px'/>&nbsp;&nbsp;";
                    //            //html += "<i class='nav-icon fas " + Menuclass + "'></i>";
                    //            html += "<p style='color: black;'>" + Mainmenuname + "</p>";
                    //            html += "<hr class='hr'/>";
                    //            html += "</a >";
                    //            html += "</li>";
                    //        }
                    //        else {
                    //            html += "<li id=" + ulid + " onclick='return ChangeMenuStyle(this)' class='nav-item has-treeview li'>";
                    //            html += "<a href='#' class='nav-link'>";
                    //            //html += "<i class='nav-icon fas " + Menuclass + "'></i>";
                    //            html += "<img src=" + Menuclass + " style='height:35px; width:35px'/>&nbsp;&nbsp;";
                    //            html += "<p style='color: black;'>" + Mainmenuname + "<i class='fas fa-angle-left right'></i></p>";
                    //            html += "<hr class='hr'/>";
                    //            html += "</a >";
                    //            html += "<ul class='nav nav-treeview' >";
                    //            for (var PCDetails = 0; PCDetails < response.MenuHeader[PCHeader].subMenus.length; PCDetails++) {
                    //                var Submenuname = response.MenuHeader[PCHeader].subMenus[PCDetails].Submenuname;
                    //                var Submenuurl = response.MenuHeader[PCHeader].subMenus[PCDetails].Submenulink;
                    //                var SubClass = response.MenuHeader[PCHeader].subMenus[PCDetails].S_Class;
                    //                html += "<li class='nav-item'>";
                    //                html += "<a href=" + Submenuurl + " class='nav-link'>";
                    //                html += "<img src=" + SubClass + " style='width:1.6rem'/>&nbsp;&nbsp;";
                    //                //html += "<i class='nav-icon far fa-circle text-info'></i>";
                    //                html += "<p style='color: black;'>" + Submenuname + "</p>";
                    //                html += "</a>";
                    //                html += "</li>";
                    //            }
                    //            html += "</ul>";
                    //            html += "</li>";
                    //            html += "<br />"; //id='liopen' style='display:none;'
                    //        }
                    //    }
                    //}
                    
                    html += "</ul>";
                    html += "</nav>";
                    $("#sidebaremrmenu").html(html);
                }
            }
            catch (e) {

            }
        }

        function ChangeMenuStyle(ulid) {
            try {
                //var Normalid = ulid.id;
                var id = "#" + ulid.id;
                var classname = ulid.className;
                if (classname == "nav-item has-treeview li") {
                    $(id).removeClass('nav-item has-treeview li').addClass('nav-item has-treeview menu-open li');
                    //if (Normalid.includes('Setup'))
                    //    document.getElementById('liopen').style.display = 'block';
                }
                else {
                    $(id).removeClass('nav-item has-treeview menu-open li').addClass('nav-item has-treeview li');
                    //if (Normalid.includes('Setup'))
                    //    document.getElementById('liopen').style.display = 'none';
                }

            }
            catch (e) {
            }
        }
        function GotoLogin() {
            try {
                window.location.href = "/Login/Login";
            }
            catch (e) {
            }
        }
    </script>
    <style>
        .Dashboard_Icon {
            background: url(/images/Dashbard.ico);
            height: 30px;
            width: 30px;
        }

        .hr {
            width: 100%;
            margin-top: 5px;
            /*margin-left: 45px;*/
            border-color: lightgray;
        }

        .li {
            margin-top: -26px;
        }
    </style>
    <ejs-scripts></ejs-scripts>
    <link href="~/MultiselectPlugin/bootstrap-multiselect.css" rel="stylesheet" />
    <script src="~/MultiselectPlugin/bootstrap-multiselect.js"></script>
    <link href="~/DatePicker/jquery-ui.css" rel="stylesheet" />
    <script src="~/DatePicker/jquery-ui.js"></script>
    <!-- Include moment-->
    @*<script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>*@
    <script type="text/javascript" src="~/FullCalendar/moment.min.js"></script>

    <!-- qTip -->
    @*<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/qtip2/3.0.3/jquery.qtip.min.js"></script>*@
    <script type="text/javascript" src="~/FullCalendar/jquery.qtip.min.js"></script>

    <!-- Full Calendar -->
    @*<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/fullcalendar/2.9.1/fullcalendar.min.js"></script>*@
    <script type="text/javascript" src="~/FullCalendar/fullcalendar.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>
</html>

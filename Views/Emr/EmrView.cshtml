
@{
    ViewData["Title"] = "EmrView";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Dictionary<string, object> htmlAttribute = new Dictionary<string, object>() { { "class", "sidebar-menu e-custom-style" } };
}
<style type="text/css">
    #loading {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,0.8);
        z-index: 1000;
    }

    #loading1 {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,0.8);
        z-index: 1000;
    }

    #loadingcontent {
        display: table;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
    }

    #loadingspinner {
        display: table-cell;
        vertical-align: middle;
        width: 100%;
        text-align: center;
        font-size: larger;
        padding-top: 80px;
    }

    .ejs-dialog {
        max-height: 450px !important;
        top: 228px !important;
        border: 1px solid #17a2b8;
        border-radius: 0px;
        box-shadow: 0 0 20px #888 !important;
    }

    .ejs-help {
        max-height: 230px !important;
        top: 328px !important;
        border: 1px solid #969a9a;
        border-radius: 4px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .ejs-invdialog {
        max-height: 450px !important;
        top: 228px !important;
        border: 1px solid #17a2b8;
        border-radius: 0px;
        box-shadow: 0 0 20px #888 !important;
    }

    .ejs-Alldialog {
        max-height: 500px !important;
        top: 228px !important;
        border: 1px solid #17a2b8;
        border-radius: 0px;
        align-content: center;
        box-shadow: 0 0 20px #888 !important;
    }

    .ejs-ExamPickdialog {
        max-height: 450px !important;
        top: 228px !important;
        border: 1px solid #17a2b8;
        border-radius: 0px;
        box-shadow: 0 0 20px #888 !important;
    }

    .Backcolor {
        color: black;
        font-size: medium;
        font-weight: 400 !important;
        font-family: Source Sans Pro,sans-serif !important;
    }

    .TableFont {
        font-family: Source Sans Pro,sans-serif !important;
    }

    .PatDetails {
        top: 8px;
        font-size: 16px;
    }

    .EmrBtn {
        background-color: #fdfdfd;
        border-color: #512bd4;
        color: black;
        border-radius: 0px;
    }

    .DivBox {
        padding: 10px;
        border-color: #969a9a !important;
        border: 1px solid;
        border-radius: 4px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        font-family: Source Sans Pro,sans-serif !important;
        font-size: 15px !important;
    }

    .inputEmr {
        border: 1px solid #646767 !important;
        font-size: 15px !important;
        font-family: Source Sans Pro,sans-serif !important;
    }

    .aLink {
        color: #512bd4;
        font-family: Source Sans Pro,sans-serif !important;
        font-size: 17px !important;
    }

    .tableHB {
        border: 1px solid #646767 !important;
    }

    .EmrbtnPrimary {
        background: #007bff !important;
        color: #fff !important;
        border-color: #fff;
        border-radius: 0px;
    }
</style>
<script>
    function getValues(url) {
        var result = null;
        $.ajax({
            url: url,
            type: 'get',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            async: false,
            success: function (data) {
                result = data;
            },
        });
        return result;
    }
    function postValues(url, jdata) {
        var result = null;
        $.ajax({
            url: url,
            type: 'post',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(jdata),
            dataType: "json",
            async: false,
            success: function (data) {
                result = data;
            },
        });
        return result;
    }
</script>
<script>
    var windowObjectReference;
    var rootUrl = "http://" + document.location.hostname + ":" + window.location.port;
    $(document).ready(function () {
        GetRoleConfig();
        PatientDetails();
        Reportbind();
        AllReportbind();
        GetConnectedMediview();
        //GetVerifyDetails();
         var objDate = new Date();
         var Presentyear = objDate.getFullYear();
         $("#txtLMBDate").datepicker({
             // yearRange: '1900:' + Presentyear,
             changeMonth: true,
             changeYear: true,
             dateFormat: "mm/dd/yy"
             //dateFormat: "dd/mm/yy",
             // maxDate: '-1d'
         });
    });

    function GetRoleConfig() {
        try {
             $.ajax({
                    type: "GET",
                    url: rootUrl + "/api/Patient/GetRoleConfig",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    async: true,
                    success: function (response) {
                        var data = response;
                        if (data != "" && data != null) {
                            var DocumentUpload = data[0].DocumentUpload;
                            if (DocumentUpload == false)
                                document.getElementById("imgdocupload").style.pointerEvents = "none";
                            else
                                document.getElementById("imgdocupload").style.pointerEvents = "auto";
                        }
                    },
                    failure: function (response) {
                    },
                    error: function (response) {
                    }
                });
        }
        catch (e) {
        }
    }
    function PatientDetails() {
        try {
            var sendJsonData = {};
            var response = postValues("/Emr/GetPatDetails", sendJsonData);
            if (response.Pat.length > 0) {
                var Patientid = response.Pat[0].PatientID;
                var PatientName = response.Pat[0].FirstName;
                var Visitid = response.Pat[0].VisitID;
                var Gender = response.Pat[0].Gender;
                var Age = response.Pat[0].Age;
                var Doctor = response.Pat[0].RefDoctor;
                var VisitDate = response.Pat[0].VisitDate;
                var Status = response.Pat[0].Status;

                $("#lblpatid").text(Patientid);
                $("#lblpatname").text(PatientName);
                $("#lblvisitid").text(Visitid);
                $("#lblage").text(Age);
                $("#lblgender").text(Gender);
                $("#lblrefdoc").text(Doctor);
                $("#lblVisitDate").text(VisitDate);
                $("#lblStatus").text(Status);
                if (response.Allergy.length > 0) {
                    var html = "<span style='color:red;'>" + response.Allergy + "</span>";
                    $("#lblAllergy").html(html);
                }
                if (Status === "Checked-Out") {
                    $("#VitalsbtnDiv").hide();
                    $("#ComplaitnsbtnDiv").hide();
                    $("#ExaminationbtnDiv").hide();
                    $("#HistorybtnDiv").hide();
                    $("#TreatmentbtnDiv").hide();
                    $("#diagnosisbtnDiv").hide();
                    $("#Investbtndiv").hide();
                }
                else {
                    $("#VitalsbtnDiv").show();
                    $("#ComplaitnsbtnDiv").show();
                    $("#ExaminationbtnDiv").show();
                    $("#HistorybtnDiv").show();
                    $("#TreatmentbtnDiv").show();
                    $("#diagnosisbtnDiv").show();
                    $("#Investbtndiv").show();
                }
                if (Gender === "Female") {
                    $("#FemaleContent").show();
                }
                else {
                    $("#FemaleContent").hide();
                }
                //$.ajax({
                //    type: 'GET',
                //    url: rootUrl + "/api/Patient/GetPatientDetailsById?PatientId=" + Patientid + " ",
                //    contentType: "application/json; charset=utf-8",
                //    dataType: "json",
                //    beforeSend: function () {
                //        $("#loading1").css("display", "block");
                //    },
                //    success: SuccessBind,
                //    error: function (response) {
                //        alert(response);
                //    },
                //    complete: function () {
                //        $("#loading1").css("display", "none");
                //    },
                //});

            }
        }
        catch (e) {

        }
    }
    //var AllergyNewText = "";
    //function SuccessBind(response) {
    //    if (response.PatDetails.length > 0) {
    //        var Id = response.PatDetails[0].PatientID;
    //        var Name = response.PatDetails[0].FirstName;
    //        var Second_Name = response.PatDetails[0].SecondName;
    //        if (Second_Name == null)
    //            Second_Name = "";
    //        var Gender = response.PatDetails[0].Gender;
    //        var MobileNo = response.PatDetails[0].MobileNumber;
    //        var PhoneNo = response.PatDetails[0].PhoneNumber;
    //        if (PhoneNo == 0)
    //            PhoneNo = "";
    //        var Dob = response.PatDetails[0].BirthDate;
    //        if (Dob == null)
    //            Dob = "";
    //        var AgeYear = response.PatDetails[0].AgeYear;
    //        var AgeMonth = response.PatDetails[0].AgeMonth;
    //        var AgeDay = response.PatDetails[0].AgeDay;
    //        var ClinicName = response.PatDetails[0].ClinicName;
    //        var City = response.PatDetails[0].CityName;
    //        if (City == null)
    //            City = "";
    //        var State = response.PatDetails[0].StateName;
    //        if (State == null)
    //            State = "";
    //        var Country = response.PatDetails[0].CountryName;
    //        if (Country == null)
    //            Country = "";
    //        var Address1 = response.PatDetails[0].PatientAddress1;
    //        if (Address1 == null)
    //            Address1 = "";
    //        var Address2 = response.PatDetails[0].PatientAddress2;
    //        if (Address2 == null)
    //            Address2 = "";
    //        var Email = response.PatDetails[0].Email;
    //        if (Email == null)
    //            Email = "";
    //        var RelationType = response.PatDetails[0].RelationType;
    //        if (RelationType == null)
    //            RelationType = "";
    //        var RelationName = response.PatDetails[0].RelationName;
    //        if (RelationName == null)
    //            RelationName = "";
    //        //var Allergy = response.PatDetails[0].Allergy;
    //        //if (Allergy == null)
    //        //    Allergy = "";
    //        if (response.Allergy.length > 0) {
    //            var Allergies = "<span style='color:red;'>" + response.Allergy + "</span>";
    //            AllergyNewText = response.Allergy;
    //        }
    //        else {
    //            Allergies = "";
    //        }
    //        var Age = AgeYear + "Y" + " " + AgeMonth + "M" + " " + AgeDay + "D";

    //        var Patdtl = "";
    //        var Patallergy = "";
    //        $("#tblPatient_Details tbody").empty();
    //        $("#tblAllergy tbody").empty();

    //        Patdtl += "<tr>";
    //        Patdtl += "<td>UHID : " + Id + "</td>";
    //        Patdtl += "<td>Name : " + Name + " " + Second_Name + "</td>";
    //        Patdtl += "<td>Gender : " + Gender + "</td>";
    //        Patdtl += "<td>DOB : " + Dob + "</td>";
    //        Patdtl += "<td>Age : " + AgeYear + " Y</td>";
    //        Patdtl += "<td>Mobile : " + MobileNo + "</td>";
    //        Patdtl += "</tr>";
    //        Patdtl += "<tr>";
    //        Patdtl += "<td>Phone : " + PhoneNo + "</td>";
    //        if (Address1 != "")
    //            Patdtl += "<td>Address1 : " + Address1 + "</td>";
    //        if (Address2 != "")
    //            Patdtl += "<td>Address2 : " + Address2 + "</td>";
    //        Patdtl += "<td>City : " + City + "</td>";
    //        Patdtl += "<td>State : " + State + " </td>";
    //        Patdtl += "<td>Country : " + Country + " </td>";
    //        if (Address1 != "" || Address2 != "") {
    //            Patdtl += "</tr>";
    //            Patdtl += "<tr>";
    //        }
    //        Patdtl += "<td>Email : " + Email + "</td>";
    //        Patdtl += "<td>Relations : " + RelationType + " " + RelationName + "</td>";
    //        Patdtl += "</tr>";

    //        //Patallergy += "<tr>";
    //        //Patallergy += "<td Style='Color:red;'>Allergy : " + Allergy + "</td>";
    //        //Patallergy += "<td>Allergies : " + Allergies + "</td>";
    //        //Patallergy += "</tr>";

    //        $("#tblPatient_Details tbody").append(Patdtl);
    //        //$("#tblAllergy tbody").append(Patallergy);
    //    }
    //    $("#tblDiagnosis1 tbody").empty();
    //    var Check_VisitId = "";
    //    var html = "";
    //    var SeqNo = 0;
    //    var tableid = "subtable_";
    //    if (response.PatDiagnosis.length > 0) {
    //        for (i = 0; i < response.PatDiagnosis.length; i++) {
    //            var DiagnosisName = response.PatDiagnosis[i].DiagnosisName;
    //            if (DiagnosisName == null)
    //                DiagnosisName = "";
    //            var DiagnosisType = response.PatDiagnosis[i].DignosisType;
    //            if (DiagnosisType == null)
    //                DiagnosisType = "";
    //            else DiagnosisType = "(" + DiagnosisType + ")";
    //            //var tmpDate = new Date(response.PatDiagnosis[i].CreateDatetime);
    //            var tmpDate = new Date(response.PatDiagnosis[i].VisitDatetime);
    //            var VisitId = response.PatDiagnosis[i].VisitId;
    //            var date = tmpDate.getDate();
    //            var mth = tmpDate.getMonth();
    //            var yr = tmpDate.getFullYear();
    //            var mth = mth + 1;
    //            var time = tmpDate.toLocaleTimeString();
    //            if (date < 10) {
    //                date = '0' + date;
    //            }
    //            if (mth < 10) {
    //                mth = '0' + mth;
    //            }
    //            var CreatedTime = date + "/" + mth + "/" + yr + " " + time;
    //            if (Check_VisitId != VisitId) {
    //                SeqNo = SeqNo + 1;
    //                tableid = tableid + 1;
    //                if (i != 0) {
    //                    html += "</tbody></table></td></tr>";
    //                    html += "<tr onclick='OnVisitClick(this);'><td>" + SeqNo + "</td><td style='display:none;'>" + VisitId + "</td><td>" + CreatedTime + "</td>";
    //                    html += "<td><table id=" + tableid + "><thead></thead><tbody>";
    //                    if (DiagnosisName != "")
    //                        html += "<tr><td>" + DiagnosisName + "  " + DiagnosisType + "</td></tr>";
    //                    //else
    //                    //     html += "<tr><td> - </td></tr>";
    //                }
    //                else if (i == 0) {
    //                    html += "<tr onclick='OnVisitClick(this);'><td>" + SeqNo + "</td><td style='display:none;'>" + VisitId + "</td><td>" + CreatedTime + "</td>";
    //                    html += "<td><table id=" + tableid + "><thead></thead><tbody>";
    //                     if (DiagnosisName != "")
    //                        html += "<tr><td>" + DiagnosisName + "  " + DiagnosisType + "</td></tr>";
    //                    //else
    //                    //     html += "<tr><td> - </td></tr>";
    //                }
    //                Check_VisitId = VisitId;
    //            }
    //            else {
    //                if (DiagnosisName != "")
    //                    html += "<tr><td>" + DiagnosisName + "  " + DiagnosisType + "</td></tr>";
    //            }
    //        }
    //        $("#tblDiagnosis1 tbody").append(html);
    //    }
    //    $("#tblSymptoms tbody").empty();
    //    if (response.LatestSymptom.length > 0) {
    //        for (j = 0; j < response.LatestSymptom.length; j++) {
    //            var SNo = response.LatestSymptom[j].RowNumber;
    //            var SymptomName = response.LatestSymptom[j].SymptomName;
    //            var Duration = response.LatestSymptom[j].duration;

    //            $("#tblSymptoms tbody").append(
    //                "<tr>" +
    //                "<td>" + SNo + "</td>" +
    //                "<td>" + SymptomName + "</td>" +
    //                "<td>" + Duration + "</td>" +
    //                "</tr>"
    //            );
    //        }
    //    }
    //    $("#tblInvestigation1 tbody").empty();
    //    if (response.LatestInvestigation.length > 0) {
    //        for (k = 0; k < response.LatestInvestigation.length; k++) {
    //            var SNo = response.LatestInvestigation[k].RowNumber;
    //            var Investigation = response.LatestInvestigation[k].InvestigationName;

    //            $("#tblInvestigation1 tbody").append(
    //                "<tr>" +
    //                "<td>" + SNo + "</td>" +
    //                "<td>" + Investigation + "</td>" +
    //                "</tr>"
    //            );
    //        }
    //    }
    //    $("#tblTreatment tbody").empty();
    //    if (response.LatestTreatment.length > 0) {
    //        for (l = 0; l < response.LatestTreatment.length; l++) {
    //            var SNo = response.LatestTreatment[l].RowNumber;
    //            var Drug = response.LatestTreatment[l].DrugName;
    //            if (Drug == null)
    //                Drug = "";
    //            $("#tblTreatment tbody").append(
    //                "<tr>" +
    //                "<td>" + SNo + "</td>" +
    //                "<td>" + Drug + "</td>" +
    //                "</tr>"
    //            );
    //        }
    //    }
    //    $("#tblCoMorbities tbody").empty();
    //    if (response.LatestCoMorbities.length > 0) {
    //        for (m = 0; m < response.LatestCoMorbities.length; m++) {
    //            var SNo = response.LatestCoMorbities[m].RowNumber;
    //            var MedicalHistory = response.LatestCoMorbities[m].MedicalHistory;
    //            var Duration = response.LatestCoMorbities[m].Duration;

    //            $("#tblCoMorbities tbody").append(
    //                "<tr>" +
    //                "<td>" + SNo + "</td>" +
    //                "<td>" + MedicalHistory + "</td>" +
    //                "<td>" + Duration + "</td>" +
    //                "</tr>"
    //            );
    //        }
    //    }

    //    $("#tblMedication tbody").empty();
    //    if (response.LatestMedication.length > 0) {
    //        for (m = 0;m < response.LatestMedication.length; m++) {
    //            var SNo = response.LatestMedication[m].RowNumber;
    //            var Medicine = response.LatestMedication[m].Medicine;
    //            var Duration = response.LatestMedication[m].Duration;
    //            $("#tblMedication tbody").append(
    //                "<tr>" +
    //                "<td>" + SNo + "</td>" +
    //                "<td>" + Medicine + "</td>" +
    //                "<td>" + Duration + "</td>" +
    //                "</tr>"
    //            );
    //        }
    //    }
    //    $("#tblSurgicalhx tbody").empty();
    //    if (response.LatestSurgicalHx.length > 0) {
    //        for (n = 0; n < response.LatestSurgicalHx.length; n++) {
    //            var SNo = response.LatestSurgicalHx[n].RowNumber;
    //            var SurgicalHistory = response.LatestSurgicalHx[n].SurgicalHistory;
    //            var Comments = response.LatestSurgicalHx[n].Comments;
    //            $("#tblSurgicalhx tbody").append(
    //                "<tr>" +
    //                "<td>" + SNo + "</td>" +
    //                "<td>" + SurgicalHistory + "</td>" +
    //                "<td>" + Comments + "</td>" +
    //                "</tr>"
    //            );
    //        }
    //    }

    //    $("#tblGenitalHx tbody").empty();
    //    var GenitalHx = "";

    //    if (response.LatestGenitalHx.length > 0) {
    //        var Gender = $("#lblgender").text();

    //        for (p = 0; p < response.LatestGenitalHx.length; p++) {
    //            var BloodTransfusion = response.LatestGenitalHx[p].BloodTransfusion;
    //            if (BloodTransfusion == null)
    //                BloodTransfusion = "";
    //            var ReactionComments = response.LatestGenitalHx[p].ReactionComments;
    //            if (ReactionComments == null)
    //                ReactionComments = "";
    //            var GenitalReproductiveHistory = response.LatestGenitalHx[p].GenitalReproductiveHistory;
    //            if (GenitalReproductiveHistory == null)
    //                GenitalReproductiveHistory = "";
    //            var Gravida = response.LatestGenitalHx[p].Gravida;
    //            if (Gravida == null)
    //                Gravida = "";
    //            var Para = response.LatestGenitalHx[p].Para;
    //            if (Para == null)
    //                Para = "";
    //            var Abortion = response.LatestGenitalHx[p].Abortion;
    //            if (Abortion == null)
    //                Abortion = "";
    //            var Proterm = response.LatestGenitalHx[p].Proterm;
    //            if (Proterm == null)
    //                Proterm = "";
    //            var FullTerm = response.LatestGenitalHx[p].FullTerm;
    //            if (FullTerm == null)
    //                FullTerm = "";
    //            var LivingChildren = response.LatestGenitalHx[p].LivingChildren;
    //            if (LivingChildren == null)
    //                LivingChildren = "";
    //            var MenstrualHistory = response.LatestGenitalHx[p].MenstrualHistory;
    //            if (MenstrualHistory == null)
    //                MenstrualHistory = "";
    //            var Menopause = response.LatestGenitalHx[p].Menopause;
    //            if (Menopause == null)
    //                Menopause = "";
    //            var MenopauseText = response.LatestGenitalHx[p].MenopauseText;
    //            if (MenopauseText == null)
    //                MenopauseText = "";
    //            var temp_date = new Date(response.LatestGenitalHx[p].Createdatetime);

    //                var date = temp_date.getDate();
    //                var mth = temp_date.getMonth();
    //                var yr = temp_date.getFullYear();
    //                var mth = mth + 1;
    //                var time = temp_date.toLocaleTimeString();
    //                if (date < 10) {
    //                    date = '0' + date;
    //                }
    //                if (mth < 10) {
    //                    mth = '0' + mth;
    //            }
    //            var CreateDateTime = date + "/" + mth + "/" + yr + " " + time;

    //            var temp_LMP = response.LatestGenitalHx[p].LMPDate;
    //            var LMPDate = "";
    //            if (temp_LMP != null) {
    //                var tmpDate = new Date(temp_LMP);
    //                    date = tmpDate.getDate();
    //                    mth = tmpDate.getMonth();
    //                    yr = tmpDate.getFullYear();
    //                    mth = mth + 1;
    //                    time = tmpDate.toLocaleTimeString();
    //                if (date < 10) {
    //                    date = '0' + date;
    //                }
    //                if (mth < 10) {
    //                    mth = '0' + mth;
    //                }
    //                LMPDate = date + "/" + mth + "/" + yr ;
    //            }
    //            else { LMPDate = ""; }


    //            $("#lblGenital").text(GenitalReproductiveHistory);
    //            if (Gender == "Female") {

    //                GenitalHx += "<tr>";
    //                GenitalHx += "<td>";
    //                GenitalHx += "<label>" + CreateDateTime + "</label>";
    //                GenitalHx += "</td>";
    //                GenitalHx += "</tr>";
    //                GenitalHx += "<tr>";
    //                GenitalHx += "<td>";
    //                GenitalHx += "<table>";
    //                GenitalHx += "<tbody>";
    //                GenitalHx += "<tr>";
    //                GenitalHx += "<td>Gravida : " + Gravida + "</td>";
    //                GenitalHx += "<td>Para : " + Para + "</td>";
    //                GenitalHx += "<td>Abortion : " + Abortion + "</td>";
    //                GenitalHx += "<td>Proterm : " + Proterm + "</td>";
    //                GenitalHx += "</tr>";
    //                GenitalHx += "<tr>";
    //                GenitalHx += "<td>FullTerm : " + FullTerm + "</td>";
    //                GenitalHx += "<td>LivingChildren : " + LivingChildren + "</td>";
    //                GenitalHx += "<td>MenstrualHistory : " + MenstrualHistory + "</td>";
    //                GenitalHx += "<td>Menopause : " + Menopause + "</td>";
    //                GenitalHx += "</tr>";
    //                GenitalHx += "<tr>";
    //                GenitalHx += "<td>MenopauseText : " + MenopauseText + "</td>";
    //                GenitalHx += "<td>LMPDate : " + LMPDate + "</td>";
    //                GenitalHx += "</tr>";
    //                GenitalHx += "</tbody>";
    //                GenitalHx += "</table>";
    //                GenitalHx += "</td>";
    //                GenitalHx += "</tr>";
    //            }

    //        }
    //        if (Gender == "Female") {
    //            $("#tblGenitalHx").show();
    //            $("#tblGenitalHx tbody").append(GenitalHx);
    //        }

    //    }
    //    GetVitalsByLastVisit();
    //    VitalsChartByLastVisit();
    //    $("#PatientList").hide();
    //    $("#DetailsView").show();
    //}
    function GetVitalsByLastVisit() {
        var rootUrl = "http://" + document.location.hostname + ":" + window.location.port;

        var arg = $("#lblpatid").text();
        $.ajax({
            url: rootUrl + "/api/Patient/GetVitlasByLastVisit/?PatientId=" + arg + "",
            //url: "/Emr/GetVitlasByLastVisit/?PatientID=" + arg + "",
            type: 'GET',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            beforeSend: function () { $("#loading1").css("display", "block"); },
            success: onVitalsSuccess,
            complete: function () { $("#loading1").css("display", "none"); }
        });
    }
    function onVitalsSuccess(response) {
        $("#tblPatientVitals THEAD").empty();
        $("#tblPatientVitals tbody").empty();
        var dataCol = "<tr><td>Date</td>";
        var dataRowHeight = "<tr><td>Height <Span style='color:Blue;'>(cm)<Span></td>";
        var dataRowWeigth = "<tr><td>Weight <Span style='color:Blue;'>(kg)<Span></td>";
        var dataRowSYSTOLIC = "<tr><td>Systolic</td>";
        var dataRowDIASTOLIC = "<tr><td>Bp <Span style='color:Blue;'>(mmHg)<Span></td>";
        var datarowBMI = "<tr><td>BMI <Span style='color:Blue;'>(kg/m<sup>2</sup>)<Span></td>";
        var dataRowPulse = "<tr><td>Pulse <Span style='color:Blue;'>(bpm)<Span></td>";
        var dataRowTemp = "<tr><td>Temperature <Span style='color:Blue;'>(<sup>0</sup>F)<Span></td>";
        var dataRowRespiration = "<tr><td>Respiration <Span style='color:Blue;'>(bp)<Span></td>";
        var dataRowOxygenSaturation = "<tr><td>Oxygen Saturation <Span style='color:Blue;'>(%)<Span></td>";
        var dataRowBloodsugar = "<tr><td>Blood Sugar <Span style='color:Blue;'>(mg/dL)<Span></td>;"
        var dataRowNotes = "<tr><td>Notes</td>;"
        var PatCount = 0;
        for (PatCount = 0; PatCount < response.length; PatCount++) {

            var ViatlDate = "";
            if (response[PatCount].IsVerfied === false) {
                ViatlDate = response[PatCount].VitalDate + "<br/><Span style='color:red;'>Not verified<Span>";
            }
            else {
                ViatlDate = response[PatCount].VitalDate;
            }
            var Hieght = response[PatCount].Height;
            if (Hieght !== null)
                Hieght = Hieght;
            else
                Hieght = "-";
            var weight = response[PatCount].Weight;
            if (weight !== null)
                weight = weight;
            else
                weight = "-";
            var BMI = response[PatCount].BMI;
            if (BMI !== null)
                BMI = response[PatCount].BMI;
            else
                BMI = "-";
            var PULSE = response[PatCount].Pulse;
            if (PULSE !== null)
                PULSE = response[PatCount].Pulse;
            else
                PULSE = "-";
            var Respiration = response[PatCount].Respiration;
            if (Respiration !== null)
                Respiration = response[PatCount].Respiration;
            else
                Respiration = "-";

            var TEMP = response[PatCount].Temperature;
            if (TEMP !== null)
                TEMP = response[PatCount].Temperature + "";
            else
                TEMP = "-";
            var OxygenSaturation = response[PatCount].OxygenSaturation;
            if (OxygenSaturation !== null)
                OxygenSaturation = response[PatCount].OxygenSaturation;
            else
                OxygenSaturation = "-";
            var EMR_PAT_BP_SYSTOLIC = response[PatCount].BPSystolic;
            if (EMR_PAT_BP_SYSTOLIC !== null)
                EMR_PAT_BP_SYSTOLIC = response[PatCount].BPSystolic;
            else
                EMR_PAT_BP_SYSTOLIC = "-";

            var EMR_PAT_BP_DIASTOLIC = response[PatCount].BPDiastolic;

            if (EMR_PAT_BP_DIASTOLIC !== null)
                EMR_PAT_BP_DIASTOLIC = (EMR_PAT_BP_SYSTOLIC) + " /" + response[PatCount].BPDiastolic;
            else
                EMR_PAT_BP_DIASTOLIC = "-";
            var EMR_PAT_Blood_SUgar = response[PatCount].BloodSugar;
            if (EMR_PAT_Blood_SUgar !== null)
                EMR_PAT_Blood_SUgar = response[PatCount].BloodSugar;
            else
                EMR_PAT_Blood_SUgar = "-";
            var Notes = response[PatCount].Notes;
            if (Notes !== null && Notes != "")
                Notes = response[PatCount].Notes;
            else
                Notes = "-";
            dataCol += "<td>" + ViatlDate + "</td>";
            dataRowHeight += "<td>" + Hieght + "</td>";
            dataRowWeigth += "<td>" + weight + "</td>";
            dataRowSYSTOLIC += "<td>" + EMR_PAT_BP_SYSTOLIC + "</td>";
            dataRowDIASTOLIC += "<td>" + EMR_PAT_BP_DIASTOLIC + "</td>";
            datarowBMI += "<td>" + BMI + "</td>";
            dataRowPulse += "<td>" + PULSE + "</td>";
            dataRowRespiration += "<td>" + Respiration + "</td>";
            dataRowTemp += "<td>" + TEMP + "</td>";
            dataRowOxygenSaturation += "<td>" + OxygenSaturation + "</td>";
            dataRowBloodsugar += "<td>" + EMR_PAT_Blood_SUgar + "</td>";
            dataRowNotes += "<td>" + Notes + "</td>";
        }
        dataCol += "</tr>";
        dataRowHeight += "</tr>";
        dataRowWeigth += "</tr>";
        dataRowSYSTOLIC += "</tr>";
        dataRowDIASTOLIC += "</tr>";
        datarowBMI += "</tr>";
        dataRowPulse += "</tr>";
        dataRowRespiration += "</tr>";
        dataRowOxygenSaturation += "</tr>";
        dataRowBloodsugar += "</tr>";
        dataRowNotes += "</tr>";
        $("#tblPatientVitals THEAD").append(dataCol);
        $("#tblPatientVitals tbody").append(dataRowWeigth);
        $("#tblPatientVitals tbody").append(dataRowHeight);
        //$("#tblPatientVitals tbody").append(dataRowSYSTOLIC);
        $("#tblPatientVitals tbody").append(dataRowDIASTOLIC);
        $("#tblPatientVitals tbody").append(dataRowPulse);
        $("#tblPatientVitals tbody").append(dataRowRespiration);
        $("#tblPatientVitals tbody").append(dataRowTemp);
        $("#tblPatientVitals tbody").append(dataRowOxygenSaturation);
        $("#tblPatientVitals tbody").append(datarowBMI);
        $("#tblPatientVitals tbody").append(dataRowBloodsugar);
        $("#tblPatientVitals tbody").append(dataRowNotes);
        return false;
    }
    function OnVisitClick(SelectedRow) {
        try {
            var myrow = SelectedRow.parentNode.parentNode;
            var VisitId = SelectedRow.cells[1].innerHTML;
            $.ajax({
                type: 'GET',
                url: rootUrl + "/api/Patient/GetEmrViewDataByVisitId?VisitId=" + VisitId + " ",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () {
                    $("#loading1").css("display", "block");
                },
                success: BindPatientEmrDetials,
                error: function (response) {
                    alert(response);
                },
                complete: function () {
                    $("#loading1").css("display", "none");
                },
            });

            VitalsChartByVisit(VisitId);
        }
        catch (e) { }
    }
    function BindPatientEmrDetials(response) {
        $("#tblSymptoms tbody").empty();
        if (response.PatSymptom.length > 0) {
            for (i = 0; i < response.PatSymptom.length; i++) {
                var SNo = response.PatSymptom[i].RowNumber;
                var SymptomName = response.PatSymptom[i].SymptomName;
                var Duration = response.PatSymptom[i].duration;

                $("#tblSymptoms tbody").append(
                    "<tr>" +
                    "<td>" + SNo + "</td>" +
                    "<td>" + SymptomName + "</td>" +
                    "<td>" + Duration + "</td>" +
                    "</tr>"
                );
            }
        }

        $("#tblInvestigation1 tbody").empty();
        if (response.PatInvestigation.length > 0) {
            for (j = 0; j < response.PatInvestigation.length; j++) {
                var SNo = response.PatInvestigation[j].RowNumber;
                var Investigation = response.PatInvestigation[j].InvestigationName;
                $("#tblInvestigation1 tbody").append(
                    "<tr>" +
                    "<td>" + SNo + "</td>" +
                    "<td>" + Investigation + "</td>" +
                    "</tr>"
                );

            }
        }

        $("#tblTreatment tbody").empty();
        if (response.PatTreatment.length > 0) {
            for (k = 0; k < response.PatTreatment.length; k++) {
                var SNo = response.PatTreatment[k].RowNumber;
                var Drug = response.PatTreatment[k].DrugName;

                $("#tblTreatment tbody").append(
                    "<tr>" +
                    "<td>" + SNo + "</td>" +
                    "<td>" + Drug + "</td>" +
                    "</tr>"
                );
            }
        }
        $("#tblCoMorbities tbody").empty();
        if (response.PatCoMorbities.length > 0) {
            for (l = 0; l < response.PatCoMorbities.length; l++) {
                var SNo = response.PatCoMorbities[l].RowNumber;
                var MedicalHistory = response.PatCoMorbities[l].MedicalHistory;
                var Duration = response.PatCoMorbities[l].Duration;
                $("#tblCoMorbities tbody").append(
                    "<tr>" +
                    "<td>" + SNo + "</td>" +
                    "<td>" + MedicalHistory + "</td>" +
                    "<td>" + Duration + "</td>" +
                    "</tr>"
                );
            }
        }
        $("#tblMedication tbody").empty();
        if (response.PatMedication.length > 0) {
            for (m = 0;m < response.PatMedication.length; m++) {
                var SNo = response.PatMedication[m].RowNumber;
                var Medicine = response.PatMedication[m].Medicine;
                var Duration = response.PatMedication[m].Duration;
                $("#tblMedication tbody").append(
                    "<tr>" +
                    "<td>" + SNo + "</td>" +
                    "<td>" + Medicine + "</td>" +
                    "<td>" + Duration + "</td>" +
                    "</tr>"
                );
            }
        }
        $("#tblSurgicalhx tbody").empty();
        if (response.PatSurgicalHistory.length > 0) {
            for (n = 0; n < response.PatSurgicalHistory.length; n++) {
                var SNo = response.PatSurgicalHistory[n].RowNumber;
                var SurgicalHistory = response.PatSurgicalHistory[n].SurgicalHistory;
                var Comments = response.PatSurgicalHistory[n].Comments;
                $("#tblSurgicalhx tbody").append(
                    "<tr>" +
                    "<td>" + SNo + "</td>" +
                    "<td>" + SurgicalHistory + "</td>" +
                    "<td>" + Comments + "</td>" +
                    "</tr>"
                );
            }
        }

        $("#tblPatientVitals THEAD").empty();
        $("#tblPatientVitals tbody").empty();
        var dataCol = "<tr><td>Date</td>";
        var dataRowHeight = "<tr><td>Height <Span style='color:Blue;'>(cm)<Span></td>";
        var dataRowWeigth = "<tr><td>Weight <Span style='color:Blue;'>(kg)<Span></td>";
        var dataRowSYSTOLIC = "<tr><td>Systolic</td>";
        var dataRowDIASTOLIC = "<tr><td>Bp <Span style='color:Blue;'>(mmHg)<Span></td>";
        var datarowBMI = "<tr><td>BMI <Span style='color:Blue;'>(kg/m<sup>2</sup>)<Span></td>";
        var dataRowPulse = "<tr><td>Pulse <Span style='color:Blue;'>(bpm)<Span></td>";
        var dataRowTemp = "<tr><td>Temperature <Span style='color:Blue;'>(<sup>0</sup>F)<Span></td>";
        var dataRowRespiration = "<tr><td>Respiration <Span style='color:Blue;'>(bp)<Span></td>";
        var dataRowOxygenSaturation = "<tr><td>Oxygen Saturation <Span style='color:Blue;'>(%)<Span></td>";
        var dataRowBloodsugar = "<tr><td>Blood Sugar <Span style='color:Blue;'>(mg/dL)<Span></td>;"
        var dataRowNotes = "<tr><td>Notes</td>;"
        var PatCount = 0;
        for (PatCount = 0; PatCount < response.PatVitals.length; PatCount++) {

            var ViatlDate = "";
            if (response.PatVitals[PatCount].IsVerfied === false) {
                ViatlDate = response.PatVitals[PatCount].VitalDate + "<br/><Span style='color:red;'>Not verified<Span>";
            }
            else {
                ViatlDate = response.PatVitals[PatCount].VitalDate;
            }
            var Hieght = response.PatVitals[PatCount].Height;
            if (Hieght !== null)
                Hieght = Hieght;
            else
                Hieght = "-";
            var weight = response.PatVitals[PatCount].Weight;
            if (weight !== null)
                weight = weight;
            else
                weight = "-";
            var BMI = response.PatVitals[PatCount].BMI;
            if (BMI !== null)
                BMI = response.PatVitals[PatCount].BMI;
            else
                BMI = "-";
            var PULSE = response.PatVitals[PatCount].Pulse;
            if (PULSE !== null)
                PULSE = response.PatVitals[PatCount].Pulse;
            else
                PULSE = "-";
            var Respiration = response.PatVitals[PatCount].Respiration;
            if (Respiration !== null)
                Respiration = response.PatVitals[PatCount].Respiration;
            else
                Respiration = "-";

            var TEMP = response.PatVitals[PatCount].Temperature;
            if (TEMP !== null)
                TEMP = response.PatVitals[PatCount].Temperature + "";
            else
                TEMP = "-";
            var OxygenSaturation = response.PatVitals[PatCount].OxygenSaturation;
            if (OxygenSaturation !== null)
                OxygenSaturation = response.PatVitals[PatCount].OxygenSaturation;
            else
                OxygenSaturation = "-";
            var EMR_PAT_BP_SYSTOLIC = response.PatVitals[PatCount].BPSystolic;
            if (EMR_PAT_BP_SYSTOLIC !== null)
                EMR_PAT_BP_SYSTOLIC = response.PatVitals[PatCount].BPSystolic;
            else
                EMR_PAT_BP_SYSTOLIC = "-";

            var EMR_PAT_BP_DIASTOLIC = response.PatVitals[PatCount].BPDiastolic;

            if (EMR_PAT_BP_DIASTOLIC !== null)
                EMR_PAT_BP_DIASTOLIC = (EMR_PAT_BP_SYSTOLIC) + " /" + response.PatVitals[PatCount].BPDiastolic;
            else
                EMR_PAT_BP_DIASTOLIC = "-";
            var EMR_PAT_Blood_SUgar = response.PatVitals[PatCount].BloodSugar;
            if (EMR_PAT_Blood_SUgar !== null)
                EMR_PAT_Blood_SUgar = response.PatVitals[PatCount].BloodSugar;
            else
                EMR_PAT_Blood_SUgar = "-";
            var Notes = response.PatVitals[PatCount].Notes;
            if (Notes !== null && Notes != "")
                Notes = response.PatVitals[PatCount].Notes;
            else
                Notes = "-";
            dataCol += "<td>" + ViatlDate + "</td>";
            dataRowHeight += "<td>" + Hieght + "</td>";
            dataRowWeigth += "<td>" + weight + "</td>";
            dataRowSYSTOLIC += "<td>" + EMR_PAT_BP_SYSTOLIC + "</td>";
            dataRowDIASTOLIC += "<td>" + EMR_PAT_BP_DIASTOLIC + "</td>";
            datarowBMI += "<td>" + BMI + "</td>";
            dataRowPulse += "<td>" + PULSE + "</td>";
            dataRowRespiration += "<td>" + Respiration + "</td>";
            dataRowTemp += "<td>" + TEMP + "</td>";
            dataRowOxygenSaturation += "<td>" + OxygenSaturation + "</td>";
            dataRowBloodsugar += "<td>" + EMR_PAT_Blood_SUgar + "</td>";
            dataRowNotes += "<td>" + Notes + "</td>";
        }
        dataCol += "</tr>";
        dataRowHeight += "</tr>";
        dataRowWeigth += "</tr>";
        dataRowSYSTOLIC += "</tr>";
        dataRowDIASTOLIC += "</tr>";
        datarowBMI += "</tr>";
        dataRowPulse += "</tr>";
        dataRowRespiration += "</tr>";
        dataRowOxygenSaturation += "</tr>";
        dataRowBloodsugar += "</tr>";
        dataRowNotes += "</tr>";
        $("#tblPatientVitals THEAD").append(dataCol);
        $("#tblPatientVitals tbody").append(dataRowWeigth);
        $("#tblPatientVitals tbody").append(dataRowHeight);
        //$("#tblPatientVitals tbody").append(dataRowSYSTOLIC);
        $("#tblPatientVitals tbody").append(dataRowDIASTOLIC);
        $("#tblPatientVitals tbody").append(dataRowPulse);
        $("#tblPatientVitals tbody").append(dataRowRespiration);
        $("#tblPatientVitals tbody").append(dataRowTemp);
        $("#tblPatientVitals tbody").append(dataRowOxygenSaturation);
        $("#tblPatientVitals tbody").append(datarowBMI);
        $("#tblPatientVitals tbody").append(dataRowBloodsugar);
        $("#tblPatientVitals tbody").append(dataRowNotes);
        //return false;

        $("#tblGenitalHx tbody").empty();
        var GenitalHx = "";

        if (response.PatGenitalHx.length > 0) {
            var Gender = $("#lblgender").text();
            for (p = 0; p < response.PatGenitalHx.length; p++) {
                var BloodTransfusion = response.PatGenitalHx[p].BloodTransfusion;
                if (BloodTransfusion == null)
                    BloodTransfusion = "";
                var ReactionComments = response.PatGenitalHx[p].ReactionComments;
                if (ReactionComments == null)
                    ReactionComments = "";
                var GenitalReproductiveHistory = response.PatGenitalHx[p].GenitalReproductiveHistory;
                if (GenitalReproductiveHistory == null)
                    GenitalReproductiveHistory = "";
                var Gravida = response.PatGenitalHx[p].Gravida;
                if (Gravida == null)
                    Gravida = "";
                var Para = response.PatGenitalHx[p].Para;
                if (Para == null)
                    Para = "";
                var Abortion = response.PatGenitalHx[p].Abortion;
                if (Abortion == null)
                    Abortion = "";
                var Proterm = response.PatGenitalHx[p].Proterm;
                if (Proterm == null)
                    Proterm = "";
                var FullTerm = response.PatGenitalHx[p].FullTerm;
                if (FullTerm == null)
                    FullTerm = "";
                var LivingChildren = response.PatGenitalHx[p].LivingChildren;
                if (LivingChildren == null)
                    LivingChildren = "";
                var MenstrualHistory = response.PatGenitalHx[p].MenstrualHistory;
                if (MenstrualHistory == null)
                    MenstrualHistory = "";
                var Menopause = response.PatGenitalHx[p].Menopause;
                if (Menopause == null)
                    Menopause = "";
                var MenopauseText = response.PatGenitalHx[p].MenopauseText;
                if (MenopauseText == null)
                    MenopauseText = "";
                var temp_date = new Date(response.PatGenitalHx[p].Createdatetime);

                    var date = temp_date.getDate();
                    var mth = temp_date.getMonth();
                    var yr = temp_date.getFullYear();
                    var mth = mth + 1;
                    var time = temp_date.toLocaleTimeString();
                    if (date < 10) {
                        date = '0' + date;
                    }
                    if (mth < 10) {
                        mth = '0' + mth;
                }
                var CreateDateTime = date + "/" + mth + "/" + yr + " " + time;

                var temp_LMP = response.PatGenitalHx[p].LMPDate;
                var LMPDate = "";
                if (temp_LMP != null) {
                    var tmpDate = new Date(temp_LMP);
                        date = tmpDate.getDate();
                        mth = tmpDate.getMonth();
                        yr = tmpDate.getFullYear();
                        mth = mth + 1;
                        time = tmpDate.toLocaleTimeString();
                    if (date < 10) {
                        date = '0' + date;
                    }
                    if (mth < 10) {
                        mth = '0' + mth;
                    }
                    LMPDate = date + "/" + mth + "/" + yr ;
                }
                else { LMPDate = ""; }


                $("#lblGenital").text(GenitalReproductiveHistory);
                if (Gender == "Female") {
                    GenitalHx += "<tr>";
                    GenitalHx += "<td>";
                    GenitalHx += "<label>" + CreateDateTime + "</label>";
                    GenitalHx += "</td>";
                    GenitalHx += "</tr>";
                    GenitalHx += "<tr>";
                    GenitalHx += "<td>";
                    GenitalHx += "<table>";
                    GenitalHx += "<tbody>";
                    GenitalHx += "<tr>";
                    GenitalHx += "<td>Gravida : " + Gravida + "</td>";
                    GenitalHx += "<td>Para : " + Para + "</td>";
                    GenitalHx += "<td>Abortion : " + Abortion + "</td>";
                    GenitalHx += "<td>Proterm : " + Proterm + "</td>";
                    GenitalHx += "</tr>";
                    GenitalHx += "<tr>";
                    GenitalHx += "<td>FullTerm : " + FullTerm + "</td>";
                    GenitalHx += "<td>LivingChildren : " + LivingChildren + "</td>";
                    GenitalHx += "<td>MenstrualHistory : " + MenstrualHistory + "</td>";
                    GenitalHx += "<td>Menopause : " + Menopause + "</td>";
                    GenitalHx += "</tr>";
                    GenitalHx += "<tr>";
                    GenitalHx += "<td>MenopauseText : " + MenopauseText + "</td>";
                    GenitalHx += "<td>LMPDate : " + LMPDate + "</td>";
                    GenitalHx += "</tr>";
                    GenitalHx += "</tbody>";
                    GenitalHx += "</table>";
                    GenitalHx += "</td>";
                    GenitalHx += "</tr>";

                }

            }
            if (Gender == "Female") {
                $("#tblGenitalHx").show();
                $("#tblGenitalHx tbody").append(GenitalHx);
            }

        }
    }
    function VitalsChartByLastVisit() {
        var arg = $("#lblpatid").text();
        var c = document.getElementById("MultiLineChart1");
        var ctx = c.getContext("2d");
        var chartOptions = {
            legend: {
                display: true,
                position: 'top',
                labels: {
                    boxWidth: 50,
                    fontColor: 'black'
                }
            }
        };
        var tData = getValues("/Emr/MultiLineChartDataByLastVisit/?PatientID=" + arg + "");
        var myLineChart = new Chart(ctx, {
            type: 'line',
            data: tData
        });
    }
    function VitalsChartByVisit(VisitId) {
        //var arg = $("#lblpatid").text();
        var c = document.getElementById("MultiLineChart1");
        var ctx = c.getContext("2d");
        var chartOptions = {
            legend: {
                display: true,
                position: 'top',
                labels: {
                    boxWidth: 50,
                    fontColor: 'black'
                }
            }
        };
        var tData = getValues("/Emr/MultiLineChartDataByVisitId/?VisitId=" + VisitId + "");
        var myLineChart = new Chart(ctx, {
            type: 'line',
            data: tData
        });
    }
    function GetVerifyDetails() {
        try {
            $.ajax({
                url: rootUrl + "/Emr/GetVerifyDetails",
                type: 'GET',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    if (response == false) {
                        $("#btnVerifiyVitals").prop('disabled', true);
                        $("#btnVerifiyComplaints").prop('disabled', true);
                        $("#btnPatSaveExamintionVerfiy").prop('disabled', true);
                        $("#btnDiagSafy").prop('disabled', true);
                        $("#btnSaveTreatmentVerfiy").prop('disabled', true);
                    }
                    else {
                        $("#btnVerifiyVitals").prop('disabled', false);
                        $("#btnVerifiyComplaints").prop('disabled', false);
                        $("#btnPatSaveExamintionVerfiy").prop('disabled', false);
                        $("#btnDiagSafy").prop('disabled', false);
                        $("#btnSaveTreatmentVerfiy").prop('disabled', false);
                    }
                },
            });
        }
        catch (e) {

        }
    }
    function VisitPrint() {
        try {
            var arg = $("#lblvisitid").text();
            $.ajax({
                url: rootUrl + "/Emr/GetAllReportByVisit/?Visitid=" + arg + "",
                type: 'GET',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () { $("#loading").css("display", "block"); },
                success: OnSuccessVisitPrint,
                complete: function ()
                {
                    $("#loading").css("display", "none");
                    document.getElementById('VisitDialogue').ej2_instances[0].hide();
                }
            });
        }
        catch (e) {

        }
    }
    function OnSuccessVisitPrint(response) {
        var Hospitaldtl = "";
        var Patdtl = "";
        var html = "";
        var Allergyconcat = "";
        if (response.CompHeader.length > 0 || response.Vitals.length > 0 || response.InvestHeader.length > 0 || response.DiagHeader.length > 0 || response.TreatHeader.length > 0 || response.ExamHeader.length > 0) {
            if (document.getElementById('printchbox').checked) {
                if (response.ClinicDtl.length > 0) {
                    Hospitaldtl += "<table style='width:95%;font-size:small;'><tr>";
                    Hospitaldtl += "<td><img src='data:image/jpeg;base64," + response.ClinicDtl[0].CliniclLogo + "' style='width:100%; max-width:100px;height:100px;'></td>";
                    Hospitaldtl += "<td><table style='float:right;'>";
                    Hospitaldtl += "<tr><td style='float:left;'>" + response.PatientDtl[0].RefDoctor + "</td></tr>";
                    Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicName + "</td></tr>";
                    Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicAddress + "" + response.ClinicDtl[0].ClinicAddress1 + "</td></tr>";
                    if (response.ClinicDtl[0].Pin != "" && response.ClinicDtl[0].Pin != null)
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicAddress2 + "," + response.ClinicDtl[0].City + " - " + response.ClinicDtl[0].Pin + "</td></tr>";
                    else
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicAddress2 + "," + response.ClinicDtl[0].City + "</td></tr>";
                    if (response.ClinicDtl[0].ClinicLandlineNo != 0 && response.ClinicDtl[0].ClinicLandlineNo != "" && response.ClinicDtl[0].ClinicLandlineNo != null)
                        Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.ClinicDtl[0].ClinicMobileNo + ",Phone : " + response.ClinicDtl[0].ClinicLandlineNo + "</td></tr>";
                    else
                        Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.ClinicDtl[0].ClinicMobileNo + "</td></tr>";
                    Hospitaldtl += "</table></td>";
                    Hospitaldtl += "</tr></table>";
                    Hospitaldtl += "<table style='width:100%;'><tr><td style='font-weight:bold;border-top:solid 1px black;'></td></tr></table>";
                    html += Hospitaldtl;
                }
                else {
                    Hospitaldtl += "<table style='width:95%;font-size:small;'><tr>";
                    Hospitaldtl += "<td><img src='data:image/jpeg;base64," + response.HospitalDtl[0].HospitalLogo + "' style='width:100%; max-width:100px;height:100px;'></td>";
                    Hospitaldtl += "<td><table style='float:right;'>";
                    Hospitaldtl += "<tr><td style='float:left;'>" + response.PatientDtl[0].RefDoctor + "</td></tr>";
                    Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalName + "</td></tr>";
                    Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalAddress + "" + response.HospitalDtl[0].HospitalAddress1 + "</td></tr>";
                    if (response.HospitalDtl[0].Pin != "" && response.HospitalDtl[0].Pin != null)
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalAddress2 + "," + response.HospitalDtl[0].City + " - " + response.HospitalDtl[0].Pin + "</td></tr>";
                    else
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalAddress2 + "," + response.HospitalDtl[0].City + "</td></tr>";
                    if (response.HospitalDtl[0].HospitalLandlineNo != 0 && response.HospitalDtl[0].HospitalLandlineNo != "" && response.HospitalDtl[0].HospitalLandlineNo != null)
                        Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.HospitalDtl[0].HospitalLandlineNo + ",Phone : " + response.HospitalDtl[0].HospitalLandlineNo + "</td></tr>";
                    else
                        Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.HospitalDtl[0].HospitalMobileNo + "</td></tr>";
                    Hospitaldtl += "</table></td>";
                    Hospitaldtl += "</tr></table>";
                    Hospitaldtl += "<table style='width:100%;'><tr><td style='font-weight:bold;border-top:solid 1px black;'></td></tr></table>";
                    html += Hospitaldtl;
                }
            }
            if (response.PatientDtl.length > 0) {
                Patdtl += "<table style='width:95%;font-size:small;'><tr>";
                Patdtl += "<td>ID : " + response.PatientDtl[0].PatientID + "</td>";
                Patdtl += "<td>Name : " + response.PatientDtl[0].FirstName + "</td>";
                Patdtl += "<td>Gender : " + response.PatientDtl[0].Gender + "</td>";
                Patdtl += "<td>Age : " + response.PatientDtl[0].Age + "</td>";
                Patdtl += "<td>Type : Direct Visit</td>";
                Patdtl += "</tr>";
                Patdtl += "<tr>";
                if (response.Allergy.length > 0) {
                    //for (var k = 0; k < response.Allergy.length; k++) {
                    //    if (k === 0)
                    //        Allergyconcat = response.Allergy[0].Allergy;
                    //    else
                    //        Allergyconcat = Allergyconcat + "," + response.Allergy[0].Allergy;
                    //}
                    Patdtl += "<td>Allergy : " + response.Allergy + "</td>";
                }
                var VisitDate = response.PatientDtl[0].VisitDate;
                VisitDate = VisitDate.substring(0, 10);
                Patdtl += "<td>Blood Group : </td>";
                Patdtl += "<td>Visit Date : " + VisitDate + "</td>";
                Patdtl += "</tr>";
                Patdtl += "</table>";
                Patdtl += "<table style='width:100%;'><tr><td style='font-weight:bold;border-top:solid 1px black;'></td></tr></table>";
                html += Patdtl;
            }
            if (response.CompHeader.length > 0) {
                for (PCHeader = 0; PCHeader < response.CompHeader.length; PCHeader++) {
                    var IsVerified = response.CompHeader[PCHeader].IsVerified;
                    if (IsVerified == true)
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 30px;padding-top: 10px;padding-left: 10px;'><span><b>Presenting Illness</b></span></div>";
                    else
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 30px;padding-top: 10px;padding-left: 10px;'><span><b>Presenting Illness</b> (As Reported by the patient)</span></div>";
                    var DtlSeqid = 0;
                    var PsHedSeqID = response.CompHeader[PCHeader].PshSeqID;
                    html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                    for (PCDetails = 0; PCDetails < response.CompDetails.length; PCDetails++) {
                        var SymptomHeader = response.CompDetails[PCDetails].SymHeaderSeqId;
                        var SymptomID = response.CompDetails[PCDetails].SymptomId;
                        var SymptomName = response.CompDetails[PCDetails].SymptomName;
                        var Duration = response.CompDetails[PCDetails].duration;
                        var Remarks = response.CompDetails[PCDetails].Remarks;
                        if (PsHedSeqID === SymptomHeader) {
                            DtlSeqid = parseInt(DtlSeqid + 1);
                            html += "<tr data-id=\"" + SymptomID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + SymptomName + " since " + Duration + " " + Remarks + "</td>";
                            html += "</tr>";
                        }
                    }
                    html += "</table>";
                    html += "<table style='width:95%;font-size:small;'><tr>";
                    if (response.CompHeader[PCHeader].PainScale==='No Pain')
                        html += "<td>Patient Reports " + response.CompHeader[PCHeader].PainScale + "</td>";
                    else
                        html += "<td>Patient Reports " + response.CompHeader[PCHeader].PainScale + " Pain</td>";
                    html += "</tr>";
                    html += "<tr>";
                    html += "<td>" + response.CompHeader[PCHeader].HistoryNotes + "</td>";
                    html += "</tr>";
                    html += "</table><br/>";
                }
            }
            if (response.Vitals.length > 0) {
                html += "";
                for (PatCount = 0; PatCount < response.Vitals.length; PatCount++) {
                    var IsVerified = response.Vitals[PatCount].IsVerfied;
                    var VitalDate = response.Vitals[PatCount].VitalDate;
                    if (IsVerified == true)
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Vitals  "+VitalDate+"</b></span></div>";
                    else
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Vitals  +" + VitalDate +"</b> (As Reported by the patient)</span></div>";
                    html += "<table style='width:95%;font-size:small;border-collapse: collapse;'><tr>";
                    html += "<td>Height : " + response.Vitals[PatCount].Height + " cms</td>";
                    html += "<td>Weight : " + response.Vitals[PatCount].Weight + " kgs</td>";
                    html += "<td>BMI : " + response.Vitals[PatCount].BMI + " kg/m2</td>";
                    html += "<td>BP : " + response.Vitals[PatCount].BPSystolic + "/" + response.Vitals[PatCount].BPDiastolic + " mm/Hg</td>";
                    html += "<td>Respiration : " + response.Vitals[PatCount].Respiration + " bp</td>";
                    html += "</tr>";
                    html += "<tr>";
                    html += "<td>Temp : " + response.Vitals[PatCount].Temperature + " 0F</td>";
                    html += "<td>Oxygen : " + response.Vitals[PatCount].Pulse + " %</td>";
                    html += "<td>RBS : " + response.Vitals[PatCount].BloodSugar + " mg/dL</td>";
                    html += "</tr>";
                    html += "</table><br/>";
                }
            }
            if (response.PatHistroy.length > 0) {
                for (HistroyCount = 0; HistroyCount < response.PatHistroy.length; HistroyCount++) {
                    html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>History</b></span></div>";
                    html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                    html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:25%;'><span>Hx of Blood Transfusion</span></td>";
                    var BloodTransfusion = response.PatHistroy[HistroyCount].BloodTransfusion;
                    if (BloodTransfusion === true) {
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:75%;'><span>Patient has undergone blood transfusion.</span></td>";
                    }
                    else if (BloodTransfusion === false) {
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:75%;'><span>No blood transfusion.</span></td></tr>";
                    }
                    if (response.PatHistroy[HistroyCount].ReactionComments !== "")
                        html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:25%;'><span style='width:50%;'>Reaction / Comments</span></td><td><span style='width:75%;'>" + response.PatHistroy[HistroyCount].ReactionComments + "</span></td></tr>";

                    if (response.PatHistroy[HistroyCount].GenitalReproductiveHistory !== "") {
                        html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:20%;'>Genital / Reproductive History</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:20%;'> The patient is " + response.PatHistroy[HistroyCount].GenitalReproductiveHistory + "</span></td></tr>";
                    }
                    html += "</table>";

                    if (response.Pathabits.style='font-size:small;width:100%;' > 0) {
                        html += "<div style='font-size:small;width:100;'><span><b>Health Habits</b></span></div>";
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        html += "<thead><tr><td>Habits</td><td>Comments</td></tr></thead><tbody>";
                        for (HabitCount = 0; HabitCount < response.Pathabits.length; HabitCount++) {
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.Pathabits[HabitCount].HabitName + "</td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.Pathabits[HabitCount].Comments + "</td></tr>";
                        }
                        html += "</tbody><table><br/>";
                    }
                    var Gender = $("#lblgender").text();
                    if (Gender === "Female") {
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Gravida</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'>" + response.PatHistroy[HistroyCount].Gravida + "</td>";
                       

                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Para</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'>" + response.PatHistroy[HistroyCount].Para + "</td>";
                       

                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Abortion</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'>" + response.PatHistroy[HistroyCount].Abortion + "</td>";
                       
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span><b></b></span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'></td></tr>";

                        html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Proterm</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>" + response.PatHistroy[HistroyCount].Proterm + "</td>";
                       

                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Full Term</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>" + response.PatHistroy[HistroyCount].FullTerm + "</span></td>";
                       

                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Living Children</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>" + response.PatHistroy[HistroyCount].LivingChildren + "</span></td>";
                       

                        //html += "<div class='row'><div class='col-xs-3 col-sm-3 col-md-3'><div class='form-group'><span style='color: Blue;'>Menstrual History:</span></div></div>";
                        //html += "<div class='col-xs-3 col-sm-3 col-md-3'><div class='form-group'><span>" + response.PatHistroy[HistroyCount].MenstrualHistory + "</span></div></div></div>";

                        
                        //var Menopause = response.PatHistroy[HistroyCount].Menopause;
                        
                        //html += "<div class='col-xs-2 col-sm-2 col-md-2'><div class='form-group'><span>" + response.PatHistroy[HistroyCount].MenopauseText + "</span></div></div>";
                       
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>LMP Date</span></td>";
                        html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:25%;'><span>" + response.PatHistroy[HistroyCount].LmbDateAsString + "(mm/dd/yyyy)</span></td></tr></table>";
                        
                    }
                    if (response.PatMedicalHstd.length > 0) {
                        html += "<br/><div style='font-size:small;width:100;'><span><b></b></span></div>";
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        html += "<thead><tr><td>Comorbidities/ Medical History</td><td>Duration</td><td>Remark</td></tr></thead><tbody>";
                        for (MediHstdCount = 0; MediHstdCount < response.PatMedicalHstd.length; MediHstdCount++) {
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicalHstd[MediHstdCount].MedicalHistory + "</td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicalHstd[MediHstdCount].Duration + "</td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicalHstd[MediHstdCount].Remark + "</td></tr>";
                        }
                        html += "</tbody><table><br/>";
                    }
                    if (response.PatMedicine.length > 0) {
                        html += "<div style='font-size:small;width:100;'><span><b></b></span></div>";
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        html += "<thead><tr><td>Current  Medication</td><td>Duration</td><td>Remark</td></tr></thead><tbody>";
                        for (MediCount = 0; MediCount < response.PatMedicine.length; MediCount++) {
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicine[MediCount].Medicine + "</td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicine[MediCount].Duration + "</td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicine[MediCount].Remark + "</td></tr>";
                        }
                        html += "</tbody><table><br/>";
                    }
                    if (response.PatSurgical.length > 0) {
                        html += "<div style='font-size:small;width:100;'><span><b></b></span></div>";
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        html += "<thead><tr><td>Surgical History</td><td>Comments</td></tr></thead><tbody>";
                        for (SurCount = 0; SurCount < response.PatSurgical.length; SurCount++) {
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatSurgical[SurCount].SurgicalHistory + "</td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatSurgical[SurCount].Comments + "</td></tr>";
                        }
                        html += "</tbody><table><br/>";
                    }
                   
                    html += "<div style='font-size:small;width:100%;'><span>" + response.PatHistroy[HistroyCount].RelevantHistory + "</span></div><br/>";
                }
            }
            if (response.ExamHeader.length > 0) {
                for (ECHeader = 0; ECHeader < response.ExamHeader.length; ECHeader++) {
                    var IsActive = response.ExamHeader[ECHeader].IsActive;
                    if (IsActive) {
                        html += "";
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Examination</b></span></div>";
                        html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                        var ExamHeader = response.ExamHeader[ECHeader].SeqID;

                        var VisitDate = response.ExamHeader[ECHeader].CreatedDatetime;
                        var PsHedSeqID = response.ExamHeader[ECHeader].SeqID;

                        html += "<tr><td style='font-size:small;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'></td>";
                        html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                        html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                        html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                        html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                        html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                        html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                        html += "</tr>";
                        for (ECDetails = 0; ECDetails < response.ExamDtl.length; ECDetails++) {
                            ExamHeader = response.ExamDtl[ECDetails].PatExamSeqID;
                            var ExamName = response.ExamDtl[ECDetails].ExamintionName;
                            var Opt1 = response.ExamDtl[ECDetails].Option1;
                            var Opt2 = response.ExamDtl[ECDetails].Option2;
                            var Opt3 = response.ExamDtl[ECDetails].Option3;
                            var Opt4 = response.ExamDtl[ECDetails].Option4;
                            var Opt5 = response.ExamDtl[ECDetails].Option5;
                            var Opt6 = response.ExamDtl[ECDetails].Option6;
                            var Opt7 = response.ExamDtl[ECDetails].Option7;
                            var Opt8 = response.ExamDtl[ECDetails].Option8;
                            var Opt9 = response.ExamDtl[ECDetails].Option9;
                            var Opt10 = response.ExamDtl[ECDetails].Option10;
                            var Opt11 = response.ExamDtl[ECDetails].Option11;
                            var Opt12 = response.ExamDtl[ECDetails].Option12;
                            var Notes = response.ExamDtl[ECDetails].Notes;
                            if (PsHedSeqID === ExamHeader) {
                                DtlSeqid = parseInt(DtlSeqid + 1);
                                html += "<tr>";
                                html += "";
                                html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + ExamName +"</td>";
                                html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt1 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt2 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt3 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt4 + "</td>";
                                html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt5 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt6 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt7 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt8 + "</td>";
                                html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt9 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt10 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt11 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt12 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>"+Notes+"</td>";
                                html += "</tr>";
                            }
                        }
                        html += "</table><br/>";

                        html += "<table style='width:95%;font-size:small;'>";
                        if (response.ExamHeader[ECHeader].Comments != "" && response.ExamHeader[ECHeader].Comments != null) {
                            html += "<tr>";
                            html += "<td>Comments : " + response.ExamHeader[ECHeader].Comments + "</td>";
                            html += "</tr>";
                        }
                        if (response.ExamHeader[ECHeader].SpecifiComments != "" && response.ExamHeader[ECHeader].SpecifiComments != null) {
                            html += "<tr>";
                            html += "<td>Specific Comments : " + response.ExamHeader[ECHeader].SpecifiComments + "</td>";
                            html += "</tr>";
                        }
                        html += "</table><br/>";
                    }
                }
            }
            if (response.InvestHeader.length > 0) {
                for (INCHeader = 0; INCHeader < response.InvestHeader.length; INCHeader++) {
                    var DtlSeqid = 0;
                    var PsHedSeqID = response.InvestHeader[INCHeader].Seqid;
                    html += "";
                    html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Investigation</b></span></div>";
                    html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                    html += "<tr><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>SNO</td>";
                    html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Invstigation</td>";
                    html += "</tr>";
                    for (INCDetails = 0; INCDetails < response.InvestDtl.length; INCDetails++) {
                        var InvestHeader = response.InvestDtl[INCDetails].PatInvestHeaderSeqid;
                        var InvestigationID = response.InvestDtl[INCDetails].InvestigationSeqid;
                        var InvestigationName = response.InvestDtl[INCDetails].InvestigationName;
                        //var LIS_RESULT = response.InvestDtl[INCDetails].LIS_RESULT;
                        if (PsHedSeqID === InvestHeader) {
                            DtlSeqid = parseInt(DtlSeqid + 1);
                            html += "<tr data-id=\"" + InvestigationID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + InvestigationName + "</td>";
                        }
                    }
                    html += "</table>";
                    if (response.InvestHeader[INCHeader].InvestigationNotes != "" && response.InvestHeader[INCHeader].InvestigationNotes != null) {
                        html += "<table style='width:95%;font-size:small;'><tr>";
                        html += "<td>Notes : " + response.InvestHeader[INCHeader].InvestigationNotes + "</td>";
                        html += "</tr>";
                        html += "</table>";
                    }
                }
               html += "<br/>";
            }
            if (response.DiagHeader.length > 0) {
                DtlSeqid = 0;
                for (DiHeader = 0; DiHeader < response.DiagHeader.length; DiHeader++) {
                    var CheckVerified = response.DiagHeader[DiHeader].IsVerified;
                    var DignosisType = response.DiagHeader[DiHeader].DignosisType;
                    if (CheckVerified) {
                        html += "";
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>" + DignosisType + "</b></span></div>";
                        html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                        var VisitDate = response.DiagHeader[DiHeader].CreateDatetime;
                        var PsHedSeqID = response.DiagHeader[DiHeader].Seqid;
                        html += "<tr><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>SNO</td><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Diagnosis</td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Comments</td></tr>";
                        for (DiDetails = 0; DiDetails < response.DiagDtl.length; DiDetails++) {
                            var DiagHeaderid = response.DiagDtl[DiDetails].HeaderSeqid;
                            var DiagnosisID = response.DiagDtl[DiDetails].DiagnosisId;
                            var DiagnosisName = response.DiagDtl[DiDetails].DiagnosisName;
                            var Remarks = response.DiagDtl[DiDetails].Remarks;
                            if (PsHedSeqID === DiagHeaderid) {
                                DtlSeqid = parseInt(DtlSeqid + 1);
                                html += "<tr data-id=\"" + DiagnosisID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DiagnosisName + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Remarks + "</td></tr>";
                            }
                        }
                        html += "</table>";
                        html += "<table style='width:95%;font-size:small;'>";
                        if (response.DiagHeader[DiHeader].Comments != "" && response.DiagHeader[DiHeader].Comments != null) {
                            html += "<tr>";
                            html += "<td>Comments : " + response.DiagHeader[DiHeader].Comments + "</td>";
                            html += "</tr>";
                        }
                        html += "</table><br/>";
                    }
                }
            }
            if (response.TreatHeader.length > 0) {
                DtlSeqid = 0;
                for (TCHeader = 0; TCHeader < response.TreatHeader.length; TCHeader++) {
                    var Status = response.TreatHeader[TCHeader].IsActive;
                    if (Status) {
                        html += "";
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Treatment Plan</b></span></div>";
                        //html += "<td>";
                        var VisitDate = response.TreatHeader[TCHeader].TreatmentDate;
                        var PsHedSeqID = response.TreatHeader[TCHeader].SeqID;
                        html += "<img width=20px;height=20px; src='../images/Rx.png'/>";
                        for (DCDetails = 0; DCDetails < response.TreatDtl.length; DCDetails++) {
                            if (DCDetails == 0) {
                                html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                                html += "<tr><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>SNO</td><td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Drug Name</td>";
                                html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Frequency</td>";
                                html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Duration</td>";
                                html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Remarks</td>";
                                html += "</tr>";
                            }
                            var TreatmentHeader = response.TreatDtl[DCDetails].PatDrugHdtID;
                            var TreatmentID = response.TreatDtl[DCDetails].DrugCode;
                            var DrugName = response.TreatDtl[DCDetails].DrugName;
                            var DrugCat = response.TreatDtl[DCDetails].DrugCat;
                            var Frequency = response.TreatDtl[DCDetails].Frequency;
                            var Duration = response.TreatDtl[DCDetails].Duration;
                            var Remarks = response.TreatDtl[DCDetails].Remarks;
                            if (PsHedSeqID === TreatmentHeader) {
                                DtlSeqid = parseInt(DtlSeqid + 1);
                                html += "<tr data-id=\"" + TreatmentID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DrugCat + "." + DrugName + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Frequency + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Duration + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Remarks + "</td>";
                                html += "</tr>";
                            }
                        }
                        html += "</table>";
                        html += "<table style='width:95%;font-size:small;'>";
                        if (response.TreatHeader[TCHeader].Notes != "" && response.TreatHeader[TCHeader].Notes != null) {
                            html += "<tr>";
                            html += "<td>Notes : " + response.TreatHeader[TCHeader].Notes + "</td>";
                            //if (response.TreatHeader[TCHeader].GeneralRecommendation != "" && response.TreatHeader[TCHeader].GeneralRecommendation != null) {
                            //    html += "<td style='float:right;'>General Recommendation : " + response.TreatHeader[TCHeader].GeneralRecommendation + "</td>";
                            //}
                            html += "</tr>";
                        }
                        if (response.TreatHeader[TCHeader].GeneralRecommendation != "" && response.TreatHeader[TCHeader].GeneralRecommendation != null) {
                            html += "<tr>";
                            html += "<td>General Recommendation : " + response.TreatHeader[TCHeader].GeneralRecommendation + "</td>";
                            html += "</tr>";
                        }
                        if (response.TreatHeader[TCHeader].ProcedureName != "" && response.TreatHeader[TCHeader].ProcedureName != null) {
                            html += "<tr>";
                            html += "<td>Recommended : " + response.TreatHeader[TCHeader].ProcedureName + "</td>";
                            //if (response.TreatHeader[TCHeader].PrecedureNotes != "" && response.TreatHeader[TCHeader].PrecedureNotes != null) {
                            //    html += "<td style='float:right;'>Procedure Notes : " + response.TreatHeader[TCHeader].PrecedureNotes + "</td>";
                            //}
                            html += "</tr>";
                        }
                        if (response.TreatHeader[TCHeader].PrecedureNotes != "" && response.TreatHeader[TCHeader].PrecedureNotes != null) {
                            html += "<tr>";
                            html += "<td>Additional Notes : " + response.TreatHeader[TCHeader].PrecedureNotes + "</td>";
                            html += "</tr>";
                        }
                        if (response.TreatHeader[TCHeader].Instruction != "" && response.TreatHeader[TCHeader].Instruction != null) {
                            html += "<tr>";
                            html += "<td>Instruction : " + response.TreatHeader[TCHeader].Instruction + "</td>";
                            //if (response.TreatHeader[TCHeader].InstructionNotes != "" && response.TreatHeader[TCHeader].InstructionNotes != null) {
                            //    html += "<td style='float:right;'>Instruction Notes : " + response.TreatHeader[TCHeader].InstructionNotes + "</td>";
                            //}
                            html += "</tr>";
                        }
                        if (response.TreatHeader[TCHeader].InstructionNotes != "" && response.TreatHeader[TCHeader].InstructionNotes != null) {
                            html += "<tr>";
                            html += "<td>Instruction Notes : " + response.TreatHeader[TCHeader].InstructionNotes + "</td>";
                            html += "</tr>";
                        }
                        html += "</table>";
                    }
                }
                //html += "</td>";
            }
            

            html += "<br/>";
            html += "<table style='width:95%;font-size:medium;'>";
            html += "<tfoot>";
            html += "<tr>";
            html += "<td style='float:right;'>" + response.PatientDtl[0].RefDoctor + "</td></tr>";
            if (response.PatientDtl[0].Speciality_Name != "" && response.PatientDtl[0].Speciality_Name != null) {
                html += "<tr>";
                html += "<td style='float:right;'>" + response.PatientDtl[0].Speciality_Name + "</td></tr>";
            }
            if (response.ClinicDtl.length > 0) {
                if (response.ClinicDtl[0].TeleConsultation == true)
                    html += "<tr><td>Disclaimer: It is prescribed based on the basis of inputs of the patient during tele-consultation. Verification of vitals and examination of patient cannot be done and the same has been conveyed to the patient</p></td></tr>";
            }
            html += "</tfoot>";
            html += "</table>";

            sessionStorage.setItem("PrintDetails", html);
            openRequestedPopup();
        }
        else {
            alert('No records found');
        }
    }
    function openRequestedPopup() {
        var url = '@Url.Action("Print", "Home")';
        window.open(url, '_blank');
        sessionStorage.setItem("PrintDetails", "");
    }
    function GetConnectedMediview() {
        try {
            $.ajax({
                url: rootUrl + "/Emr/GetConnectedMediview",
                type: 'GET',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (response) {
                    if (response == false) {
                        $("#btnMediview").hide();
                        $("#btnMediviewReport").hide();
                    }
                    else {
                        $("#btnMediview").show();
                        $("#btnMediviewReport").show();
                    }
                },
            });
        }
        catch (e) {

        }
    }
</script>
<script>
    function AllVisitPrint() {
        try {
            var arg = $("#lblpatid").text();
            $.ajax({
                url: rootUrl + "/Emr/GetAllReport/?Patid=" + arg + "",
                type: 'GET',
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function () { $("#loading").css("display", "block"); },
                success: OnSuccessAllPrint,
                complete: function () { $("#loading").css("display", "none"); }
            });
        }
        catch (e) {

        }
    }
    function OnSuccessAllPrint(response) {
        try {
            $("#tblVisitDetails tbody").empty();
            var html = "";
            var Sno = 0;
            for (var PatCount = 0; PatCount < response.Header.length; PatCount++) {
                var VistSeqID = response.Header[PatCount].VisitID;
                var VisitDate = response.Header[PatCount].VisitDate;
                Sno = parseInt(Sno + 1);
                html += "<tr>" +
                    "<td>" + Sno + "</td>" +
                    "<td>" + VisitDate + "</td>" +
                    "<td><input type='checkbox' checked='checked' id='tblcheck' style='cursor:pointer;'></td>" +
                    "<td style='display:none;'>" + VistSeqID + "</td>" +
                    "</tr>";
            }
            $("#tblVisitDetails tbody").append(html);
            //document.getElementById('Allvisitdialog').ej2_instances[0].show();
            //$('#divVisitDate').modal('show');
        }
        catch (e) {

        }
        return false;
    }
    function GetAllReports() {
        try {
            sessionStorage.setItem("Allreport", "");
            var tbl = document.getElementById("tblVisitDetails");
            var tblrow = tbl.rows.length;
            $("#loading").css("display", "block");
            document.getElementById('Allvisitdialog').ej2_instances[0].hide();
            for (k = 1; k < tblrow; k++) {
                var sval = tbl.rows[k];
                if (sval.cells[2].getElementsByTagName("input")[0].checked == true) {
                    var Visitid = sval.cells[3].innerHTML;
                    var response = postValues("/Emr/GetReportByVisitid", Visitid);
                    if (response != null)
                        OnSuccessAllPopupPrint(response);
                }
            }
            $("#loading").css("display", "none");
            var htmldata = sessionStorage.getItem("Allreport");
            if (htmldata != "") {
                sessionStorage.setItem("PrintDetails", htmldata);
                openRequestedPopup();
            }
            else
                alert('No Records Found');
            document.getElementById('Allvisitdialog').ej2_instances[0].hide();
        }
        catch (e) {

        }
    }
    function OnSuccessAllPopupPrint(response) {
        try {
            var Hospitaldtl = "";
            var Patdtl = "";
            var html = "";
            var Allergyconcat = "";
            var Allreport = sessionStorage.getItem("Allreport");
            if (Allreport != "") {
                html += Allreport;
            }
            if (response.CompHeader.length > 0 || response.Vitals.length > 0 || response.InvestHeader.length > 0 || response.DiagHeader.length > 0 || response.TreatHeader.length > 0 || response.ExamHeader.length > 0) {
                if (document.getElementById('printchbox').checked) {
                    if (response.ClinicDtl.length > 0) {
                        Hospitaldtl += "<table style='width:95%;font-size:small;'><tr>";
                        Hospitaldtl += "<td><img src='data:image/jpeg;base64," + response.ClinicDtl[0].CliniclLogo + "' style='width:100%; max-width:100px;height:100px;'></td>";
                        Hospitaldtl += "<td><table style='float:right;'>";
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.PatientDtl[0].RefDoctor + "</td></tr>";
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicName + "</td></tr>";
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicAddress + "" + response.ClinicDtl[0].ClinicAddress1 + "</td></tr>";
                        if (response.ClinicDtl[0].Pin != "" && response.ClinicDtl[0].Pin != null)
                            Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicAddress2 + "," + response.ClinicDtl[0].City + " - " + response.ClinicDtl[0].Pin + "</td></tr>";
                        else
                            Hospitaldtl += "<tr><td style='float:left;'>" + response.ClinicDtl[0].ClinicAddress2 + "," + response.ClinicDtl[0].City + "</td></tr>";
                        if (response.ClinicDtl[0].ClinicLandlineNo != 0 && response.ClinicDtl[0].ClinicLandlineNo != "" && response.ClinicDtl[0].ClinicLandlineNo != null)
                            Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.ClinicDtl[0].ClinicMobileNo + ",Phone : " + response.ClinicDtl[0].ClinicLandlineNo + "</td></tr>";
                        else
                            Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.ClinicDtl[0].ClinicMobileNo + "</td></tr>";
                        Hospitaldtl += "</table></td>";
                        Hospitaldtl += "</tr></table>";
                        Hospitaldtl += "<table style='width:100%;'><tr><td style='font-weight:bold;border-top:solid 1px black;'></td></tr></table>";
                        html += Hospitaldtl;
                    }
                    else {
                        Hospitaldtl += "<table style='width:95%;font-size:small;'><tr>";
                        Hospitaldtl += "<td><img src='data:image/jpeg;base64," + response.HospitalDtl[0].HospitalLogo + "' style='width:100%; max-width:100px;height:100px;'></td>";
                        Hospitaldtl += "<td><table style='float:right;'>";
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.PatientDtl[0].RefDoctor + "</td></tr>";
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalName + "</td></tr>";
                        Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalAddress + "" + response.HospitalDtl[0].HospitalAddress1 + "</td></tr>";
                        if (response.HospitalDtl[0].Pin != "" && response.HospitalDtl[0].Pin != null)
                            Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalAddress2 + "," + response.HospitalDtl[0].City + " - " + response.HospitalDtl[0].Pin + "</td></tr>";
                        else
                            Hospitaldtl += "<tr><td style='float:left;'>" + response.HospitalDtl[0].HospitalAddress2 + "," + response.HospitalDtl[0].City + "</td></tr>";
                        if (response.HospitalDtl[0].HospitalLandlineNo != 0 && response.HospitalDtl[0].HospitalLandlineNo != "" && response.HospitalDtl[0].HospitalLandlineNo != null)
                            Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.HospitalDtl[0].HospitalLandlineNo + ",Phone : " + response.HospitalDtl[0].HospitalLandlineNo + "</td></tr>";
                        else
                            Hospitaldtl += "<tr><td style='float:left;'>Mobile : " + response.HospitalDtl[0].HospitalMobileNo + "</td></tr>";
                        Hospitaldtl += "</table></td>";
                        Hospitaldtl += "</tr></table>";
                        Hospitaldtl += "<table style='width:100%;'><tr><td style='font-weight:bold;border-top:solid 1px black;'></td></tr></table>";
                        html += Hospitaldtl;
                    }
                }

                if (response.PatientDtl.length > 0) {
                    Patdtl += "<table style='width:95%;font-size:small;'><tr>";
                    Patdtl += "<td>ID : " + response.PatientDtl[0].PatientID + "</td>";
                    Patdtl += "<td>Name : " + response.PatientDtl[0].FirstName + "</td>";
                    Patdtl += "<td>Gender : " + response.PatientDtl[0].Gender + "</td>";
                    Patdtl += "<td>Age : " + response.PatientDtl[0].Age + "</td>";
                    Patdtl += "<td>Type : Direct Visit</td>";
                    Patdtl += "</tr>";
                    Patdtl += "<tr>";
                    if (response.Allergy.length > 0) {
                        //for (var k = 0; k < response.Allergy.length; k++) {
                        //    if (k === 0)
                        //        Allergyconcat = response.Allergy[0].Allergy;
                        //    else
                        //        Allergyconcat = Allergyconcat + "," + response.Allergy[0].Allergy;
                        //}
                        Patdtl += "<td>Allergy : " + response.Allergy + "</td>";
                    }
                    var VisitDate = response.PatientDtl[0].VisitDate;
                    VisitDate = VisitDate.substring(0, 10);
                    Patdtl += "<td>Blood Group : </td>";
                    Patdtl += "<td>Visit Date : " + VisitDate + "</td>";
                    Patdtl += "</tr>";
                    Patdtl += "</table>";
                    Patdtl += "<table style='width:100%;'><tr><td style='font-weight:bold;border-top:solid 1px black;'></td></tr></table>";
                    html += Patdtl;
                }
                if (response.CompHeader.length > 0) {
                    for (PCHeader = 0; PCHeader < response.CompHeader.length; PCHeader++) {
                        var IsVerified = response.CompHeader[PCHeader].IsVerified;
                        if (IsVerified == true)
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 30px;padding-top: 10px;padding-left: 10px;'><span><b>Presenting Illness</b></span></div>";
                        else
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 30px;padding-top: 10px;padding-left: 10px;'><span><b>Presenting Illness</b> (As Reported by the patient)</span></div>";
                        var DtlSeqid = 0;
                        var PsHedSeqID = response.CompHeader[PCHeader].PshSeqID;
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        for (PCDetails = 0; PCDetails < response.CompDetails.length; PCDetails++) {
                            var SymptomHeader = response.CompDetails[PCDetails].SymHeaderSeqId;
                            var SymptomID = response.CompDetails[PCDetails].SymptomId;
                            var SymptomName = response.CompDetails[PCDetails].SymptomName;
                            var Duration = response.CompDetails[PCDetails].duration;
                            var Remarks = response.CompDetails[PCDetails].Remarks;
                            if (PsHedSeqID === SymptomHeader) {
                                DtlSeqid = parseInt(DtlSeqid + 1);
                                html += "<tr data-id=\"" + SymptomID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + SymptomName + " since " + Duration + " " + Remarks + "</td>";
                                html += "</tr>";
                            }
                        }
                        html += "</table>";
                        html += "<table style='width:95%;font-size:small;'><tr>";
                        if (response.CompHeader[PCHeader].PainScale === 'No Pain')
                            html += "<td>Patient Reports " + response.CompHeader[PCHeader].PainScale + "</td>";
                        else
                            html += "<td>Patient Reports " + response.CompHeader[PCHeader].PainScale + " Pain</td>";
                        html += "</tr>";
                        html += "<tr>";
                        html += "<td>" + response.CompHeader[PCHeader].HistoryNotes + "</td>";
                        html += "</tr>";
                        html += "</table><br/>";
                    }
                }
                if (response.Vitals.length > 0) {
                    html += "";
                    for (PatCount = 0; PatCount < response.Vitals.length; PatCount++) {
                        var IsVerified = response.Vitals[PatCount].IsVerfied;
                        var VitalDate = response.Vitals[PatCount].VitalDate;
                        if (IsVerified == true)
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Vitals  " + VitalDate + "</b></span></div>";
                        else
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Vitals  +" + VitalDate + "</b> (As Reported by the patient)</span></div>";
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'><tr>";
                        html += "<td>Height : " + response.Vitals[PatCount].Height + " cms</td>";
                        html += "<td>Weight : " + response.Vitals[PatCount].Weight + " kgs</td>";
                        html += "<td>BMI : " + response.Vitals[PatCount].BMI + " kg/m2</td>";
                        html += "<td>BP : " + response.Vitals[PatCount].BPSystolic + "/" + response.Vitals[PatCount].BPDiastolic + " mm/Hg</td>";
                        html += "<td>Respiration : " + response.Vitals[PatCount].Respiration + " bp</td>";
                        html += "</tr>";
                        html += "<tr>";
                        html += "<td>Temp : " + response.Vitals[PatCount].Temperature + " 0F</td>";
                        html += "<td>Oxygen : " + response.Vitals[PatCount].Pulse + " %</td>";
                        html += "<td>RBS : " + response.Vitals[PatCount].BloodSugar + " mg/dL</td>";
                        html += "</tr>";
                        html += "</table><br/>";
                    }
                }
                if (response.PatHistroy.length > 0) {
                    for (HistroyCount = 0; HistroyCount < response.PatHistroy.length; HistroyCount++) {
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>History</b></span></div>";
                        html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                        html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:25%;'><span>Hx of Blood Transfusion</span></td>";
                        var BloodTransfusion = response.PatHistroy[HistroyCount].BloodTransfusion;
                        if (BloodTransfusion === true) {
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:75%;'><span>Patient has undergone blood transfusion.</span></td>";
                        }
                        else if (BloodTransfusion === false) {
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:75%;'><span>No blood transfusion.</span></td></tr>";
                        }
                        if (response.PatHistroy[HistroyCount].ReactionComments !== "")
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:25%;'><span style='width:50%;'>Reaction / Comments</span></td><td><span style='width:75%;'>" + response.PatHistroy[HistroyCount].ReactionComments + "</span></td></tr>";

                        if (response.PatHistroy[HistroyCount].GenitalReproductiveHistory !== "") {
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:20%;'>Genital / Reproductive History</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:20%;'> The patient is " + response.PatHistroy[HistroyCount].GenitalReproductiveHistory + "</span></td></tr>";
                        }
                        html += "</table>";

                        if (response.Pathabits.style = 'font-size:small;width:100%;' > 0) {
                            html += "<div style='font-size:small;width:100;'><span><b>Health Habits</b></span></div>";
                            html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                            html += "<thead><tr><td>Habits</td><td>Comments</td></tr></thead><tbody>";
                            for (HabitCount = 0; HabitCount < response.Pathabits.length; HabitCount++) {
                                html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.Pathabits[HabitCount].HabitName + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.Pathabits[HabitCount].Comments + "</td></tr>";
                            }
                            html += "</tbody><table><br/>";
                        }
                        var Gender = $("#lblgender").text();
                        if (Gender === "Female") {
                            html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Gravida</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'>" + response.PatHistroy[HistroyCount].Gravida + "</td>";


                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Para</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'>" + response.PatHistroy[HistroyCount].Para + "</td>";


                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Abortion</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'>" + response.PatHistroy[HistroyCount].Abortion + "</td>";

                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span><b></b></span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'></td></tr>";

                            html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Proterm</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>" + response.PatHistroy[HistroyCount].Proterm + "</td>";


                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Full Term</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>" + response.PatHistroy[HistroyCount].FullTerm + "</span></td>";


                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>Living Children</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>" + response.PatHistroy[HistroyCount].LivingChildren + "</span></td>";


                            //html += "<div class='row'><div class='col-xs-3 col-sm-3 col-md-3'><div class='form-group'><span style='color: Blue;'>Menstrual History:</span></div></div>";
                            //html += "<div class='col-xs-3 col-sm-3 col-md-3'><div class='form-group'><span>" + response.PatHistroy[HistroyCount].MenstrualHistory + "</span></div></div></div>";


                            //var Menopause = response.PatHistroy[HistroyCount].Menopause;

                            //html += "<div class='col-xs-2 col-sm-2 col-md-2'><div class='form-group'><span>" + response.PatHistroy[HistroyCount].MenopauseText + "</span></div></div>";

                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:10%;'><span>LMP Date</span></td>";
                            html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;width:25%;'><span>" + response.PatHistroy[HistroyCount].LmbDateAsString + "(mm/dd/yyyy)</span></td></tr></table>";

                        }
                        if (response.PatMedicalHstd.length > 0) {
                            html += "<br/><div style='font-size:small;width:100;'><span><b></b></span></div>";
                            html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                            html += "<thead><tr><td>Comorbidities/ Medical History</td><td>Duration</td><td>Remark</td></tr></thead><tbody>";
                            for (MediHstdCount = 0; MediHstdCount < response.PatMedicalHstd.length; MediHstdCount++) {
                                html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicalHstd[MediHstdCount].MedicalHistory + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicalHstd[MediHstdCount].Duration + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicalHstd[MediHstdCount].Remark + "</td></tr>";
                            }
                            html += "</tbody><table><br/>";
                        }
                        if (response.PatMedicine.length > 0) {
                            html += "<div style='font-size:small;width:100;'><span><b></b></span></div>";
                            html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                            html += "<thead><tr><td>Current  Medication</td><td>Duration</td><td>Remark</td></tr></thead><tbody>";
                            for (MediCount = 0; MediCount < response.PatMedicine.length; MediCount++) {
                                html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicine[MediCount].Medicine + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicine[MediCount].Duration + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatMedicine[MediCount].Remark + "</td></tr>";
                            }
                            html += "</tbody><table><br/>";
                        }
                        if (response.PatSurgical.length > 0) {
                            html += "<div style='font-size:small;width:100;'><span><b></b></span></div>";
                            html += "<table style='width:95%;font-size:small;border-collapse: collapse;'>";
                            html += "<thead><tr><td>Surgical History</td><td>Comments</td></tr></thead><tbody>";
                            for (SurCount = 0; SurCount < response.PatSurgical.length; SurCount++) {
                                html += "<tr><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatSurgical[SurCount].SurgicalHistory + "</td>";
                                html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + response.PatSurgical[SurCount].Comments + "</td></tr>";
                            }
                            html += "</tbody><table><br/>";
                        }

                        html += "<div style='font-size:small;width:100%;'><span>" + response.PatHistroy[HistroyCount].RelevantHistory + "</span></div><br/>";
                    }
                }
                if (response.ExamHeader.length > 0) {
                    for (ECHeader = 0; ECHeader < response.ExamHeader.length; ECHeader++) {
                        var IsActive = response.ExamHeader[ECHeader].IsActive;
                        if (IsActive) {
                            html += "";
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Examination</b></span></div>";
                            html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                            var ExamHeader = response.ExamHeader[ECHeader].SeqID;

                            var VisitDate = response.ExamHeader[ECHeader].CreatedDatetime;
                            var PsHedSeqID = response.ExamHeader[ECHeader].SeqID;

                            html += "<tr><td style='font-size:small;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'></td>";
                            html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                            html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                            html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                            html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                            html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                            html += "<td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td><td style='font-weight:600;border-bottom: 1px solid #b9b9b9;'></td>";
                            html += "</tr>";
                            for (ECDetails = 0; ECDetails < response.ExamDtl.length; ECDetails++) {
                                ExamHeader = response.ExamDtl[ECDetails].PatExamSeqID;
                                var ExamName = response.ExamDtl[ECDetails].ExamintionName;
                                var Opt1 = response.ExamDtl[ECDetails].Option1;
                                var Opt2 = response.ExamDtl[ECDetails].Option2;
                                var Opt3 = response.ExamDtl[ECDetails].Option3;
                                var Opt4 = response.ExamDtl[ECDetails].Option4;
                                var Opt5 = response.ExamDtl[ECDetails].Option5;
                                var Opt6 = response.ExamDtl[ECDetails].Option6;
                                var Opt7 = response.ExamDtl[ECDetails].Option7;
                                var Opt8 = response.ExamDtl[ECDetails].Option8;
                                var Opt9 = response.ExamDtl[ECDetails].Option9;
                                var Opt10 = response.ExamDtl[ECDetails].Option10;
                                var Opt11 = response.ExamDtl[ECDetails].Option11;
                                var Opt12 = response.ExamDtl[ECDetails].Option12;
                                var Notes = response.ExamDtl[ECDetails].Notes;
                                if (PsHedSeqID === ExamHeader) {
                                    DtlSeqid = parseInt(DtlSeqid + 1);
                                    html += "<tr>";
                                    html += "";
                                    html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + ExamName + "</td>";
                                    html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt1 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt2 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt3 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt4 + "</td>";
                                    html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt5 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt6 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt7 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt8 + "</td>";
                                    html += "<td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt9 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt10 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt11 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Opt12 + "</td><td style='font-size:small;border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Notes + "</td>";
                                    html += "</tr>";
                                }
                            }
                            html += "</table><br/>";

                            html += "<table style='width:95%;font-size:small;'>";
                            if (response.ExamHeader[ECHeader].Comments != "" && response.ExamHeader[ECHeader].Comments != null) {
                                html += "<tr>";
                                html += "<td>Comments : " + response.ExamHeader[ECHeader].Comments + "</td>";
                                html += "</tr>";
                            }
                            if (response.ExamHeader[ECHeader].SpecifiComments != "" && response.ExamHeader[ECHeader].SpecifiComments != null) {
                                html += "<tr>";
                                html += "<td>Specific Comments : " + response.ExamHeader[ECHeader].SpecifiComments + "</td>";
                                html += "</tr>";
                            }
                            html += "</table><br/>";
                        }
                    }
                }
                if (response.InvestHeader.length > 0) {
                    for (INCHeader = 0; INCHeader < response.InvestHeader.length; INCHeader++) {
                        var DtlSeqid = 0;
                        var PsHedSeqID = response.InvestHeader[INCHeader].Seqid;
                        html += "";
                        html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Investigation</b></span></div>";
                        html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                        html += "<tr><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>SNO</td>";
                        html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Invstigation</td>";
                        html += "</tr>";
                        for (INCDetails = 0; INCDetails < response.InvestDtl.length; INCDetails++) {
                            var InvestHeader = response.InvestDtl[INCDetails].PatInvestHeaderSeqid;
                            var InvestigationID = response.InvestDtl[INCDetails].InvestigationSeqid;
                            var InvestigationName = response.InvestDtl[INCDetails].InvestigationName;
                            //var LIS_RESULT = response.InvestDtl[INCDetails].LIS_RESULT;
                            if (PsHedSeqID === InvestHeader) {
                                DtlSeqid = parseInt(DtlSeqid + 1);
                                html += "<tr data-id=\"" + InvestigationID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + InvestigationName + "</td>";
                            }
                        }
                        html += "</table>";
                        if (response.InvestHeader[INCHeader].InvestigationNotes != "" && response.InvestHeader[INCHeader].InvestigationNotes != null) {
                            html += "<table style='width:95%;font-size:small;'><tr>";
                            html += "<td>Notes : " + response.InvestHeader[INCHeader].InvestigationNotes + "</td>";
                            html += "</tr>";
                            html += "</table>";
                        }
                    }
                    html += "<br/>";
                }
                if (response.DiagHeader.length > 0) {
                    DtlSeqid = 0;
                    for (DiHeader = 0; DiHeader < response.DiagHeader.length; DiHeader++) {
                        var CheckVerified = response.DiagHeader[DiHeader].IsVerified;
                        var DignosisType = response.DiagHeader[DiHeader].DignosisType;
                        if (CheckVerified) {
                            html += "";
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>" + DignosisType + "</b></span></div>";
                            html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                            var VisitDate = response.DiagHeader[DiHeader].CreateDatetime;
                            var PsHedSeqID = response.DiagHeader[DiHeader].Seqid;
                            html += "<tr><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>SNO</td><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Diagnosis</td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Comments</td></tr>";
                            for (DiDetails = 0; DiDetails < response.DiagDtl.length; DiDetails++) {
                                var DiagHeaderid = response.DiagDtl[DiDetails].HeaderSeqid;
                                var DiagnosisID = response.DiagDtl[DiDetails].DiagnosisId;
                                var DiagnosisName = response.DiagDtl[DiDetails].DiagnosisName;
                                var Remarks = response.DiagDtl[DiDetails].Remarks;
                                if (PsHedSeqID === DiagHeaderid) {
                                    DtlSeqid = parseInt(DtlSeqid + 1);
                                    html += "<tr data-id=\"" + DiagnosisID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DiagnosisName + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Remarks + "</td></tr>";
                                }
                            }
                            html += "</table>";
                            html += "<table style='width:95%;font-size:small;'>";
                            if (response.DiagHeader[DiHeader].Comments != "" && response.DiagHeader[DiHeader].Comments != null) {
                                html += "<tr>";
                                html += "<td>Comments : " + response.DiagHeader[DiHeader].Comments + "</td>";
                                html += "</tr>";
                            }
                            html += "</table><br/>";
                        }
                    }
                }
                if (response.TreatHeader.length > 0) {
                    DtlSeqid = 0;
                    for (TCHeader = 0; TCHeader < response.TreatHeader.length; TCHeader++) {
                        var Status = response.TreatHeader[TCHeader].IsActive;
                        if (Status) {
                            html += "";
                            html += "<div style='font-size:small;width:100%;background-color: #e0e0e0;height: 25px;padding-top: 9px;padding-left: 10px;'><span><b>Treatment Plan</b></span></div>";
                            //html += "<td>";
                            var VisitDate = response.TreatHeader[TCHeader].TreatmentDate;
                            var PsHedSeqID = response.TreatHeader[TCHeader].SeqID;
                            html += "<img width=20px;height=20px; src='../images/Rx.png'/>";
                            for (DCDetails = 0; DCDetails < response.TreatDtl.length; DCDetails++) {
                                if (DCDetails == 0) {
                                    html += "<table style='width:100%;font-size:small;border-collapse: collapse;'>";
                                    html += "<tr><td style='font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>SNO</td><td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Drug Name</td>";
                                    html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Frequency</td>";
                                    html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Duration</td>";
                                    html += "<td style='font-weight:bold;font-weight:bold;border-bottom: 1px solid #b9b9b9;padding: 8px;'>Remarks</td>";
                                    html += "</tr>";
                                }
                                var TreatmentHeader = response.TreatDtl[DCDetails].PatDrugHdtID;
                                var TreatmentID = response.TreatDtl[DCDetails].DrugCode;
                                var DrugName = response.TreatDtl[DCDetails].DrugName;
                                var DrugCat = response.TreatDtl[DCDetails].DrugCat;
                                var Frequency = response.TreatDtl[DCDetails].Frequency;
                                var Duration = response.TreatDtl[DCDetails].Duration;
                                var Remarks = response.TreatDtl[DCDetails].Remarks;
                                if (PsHedSeqID === TreatmentHeader) {
                                    DtlSeqid = parseInt(DtlSeqid + 1);
                                    html += "<tr data-id=\"" + TreatmentID + "\"><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DtlSeqid + "</td><td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + DrugCat + "." + DrugName + "</td>";
                                    html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Frequency + "</td>";
                                    html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Duration + "</td>";
                                    html += "<td style='border-bottom: 1px solid #b9b9b9;padding: 8px;'>" + Remarks + "</td>";
                                    html += "</tr>";
                                }
                            }
                            html += "</table>";
                            html += "<table style='width:95%;font-size:small;'>";
                            if (response.TreatHeader[TCHeader].Notes != "" && response.TreatHeader[TCHeader].Notes != null) {
                                html += "<tr>";
                                html += "<td>Notes : " + response.TreatHeader[TCHeader].Notes + "</td>";
                                //if (response.TreatHeader[TCHeader].GeneralRecommendation != "" && response.TreatHeader[TCHeader].GeneralRecommendation != null) {
                                //    html += "<td style='float:right;'>General Recommendation : " + response.TreatHeader[TCHeader].GeneralRecommendation + "</td>";
                                //}
                                html += "</tr>";
                            }
                            if (response.TreatHeader[TCHeader].GeneralRecommendation != "" && response.TreatHeader[TCHeader].GeneralRecommendation != null) {
                                html += "<tr>";
                                html += "<td>General Recommendation : " + response.TreatHeader[TCHeader].GeneralRecommendation + "</td>";
                                html += "</tr>";
                            }
                            if (response.TreatHeader[TCHeader].ProcedureName != "" && response.TreatHeader[TCHeader].ProcedureName != null) {
                                html += "<tr>";
                                html += "<td>Recommended : " + response.TreatHeader[TCHeader].ProcedureName + "</td>";
                                //if (response.TreatHeader[TCHeader].PrecedureNotes != "" && response.TreatHeader[TCHeader].PrecedureNotes != null) {
                                //    html += "<td style='float:right;'>Procedure Notes : " + response.TreatHeader[TCHeader].PrecedureNotes + "</td>";
                                //}
                                html += "</tr>";
                            }
                            if (response.TreatHeader[TCHeader].PrecedureNotes != "" && response.TreatHeader[TCHeader].PrecedureNotes != null) {
                                html += "<tr>";
                                html += "<td>Additional Notes : " + response.TreatHeader[TCHeader].PrecedureNotes + "</td>";
                                html += "</tr>";
                            }
                            if (response.TreatHeader[TCHeader].Instruction != "" && response.TreatHeader[TCHeader].Instruction != null) {
                                html += "<tr>";
                                html += "<td>Instruction : " + response.TreatHeader[TCHeader].Instruction + "</td>";
                                //if (response.TreatHeader[TCHeader].InstructionNotes != "" && response.TreatHeader[TCHeader].InstructionNotes != null) {
                                //    html += "<td style='float:right;'>Instruction Notes : " + response.TreatHeader[TCHeader].InstructionNotes + "</td>";
                                //}
                                html += "</tr>";
                            }
                            if (response.TreatHeader[TCHeader].InstructionNotes != "" && response.TreatHeader[TCHeader].InstructionNotes != null) {
                                html += "<tr>";
                                html += "<td>Instruction Notes : " + response.TreatHeader[TCHeader].InstructionNotes + "</td>";
                                html += "</tr>";
                            }
                            html += "</table>";
                        }
                    }
                    //html += "</td>";
                }

               

                html += "<br/>";
                html += "<table style='width:95%;font-size:medium;'>";
                html += "<tfoot>";
                html += "<tr>";
                html += "<td style='float:right;'>" + response.PatientDtl[0].RefDoctor + "</td></tr>";
                if (response.PatientDtl[0].Speciality_Name != "" && response.PatientDtl[0].Speciality_Name != null) {
                    html += "<tr>";
                    html += "<td style='float:right;'>" + response.PatientDtl[0].Speciality_Name + "</td></tr>";
                }
                if (response.ClinicDtl.length > 0) {
                    if (response.ClinicDtl[0].TeleConsultation == true)
                        html += "<tr><td>Disclaimer: It is prescribed based on the basis of inputs of the patient during tele-consultation. Verification of vitals and examination of patient cannot be done and the same has been conveyed to the patient</p></td></tr>";
                }
                html += "</tfoot>";
                html += "</table>";

                html += "<div style='page-break-before: always;'></div>";

                sessionStorage.setItem("Allreport", html);
            }
        }
        catch (e) {

        }
    }
    function ClosePopup() {
        try {
            document.getElementById('Allvisitdialog').ej2_instances[0].hide();
        }
        catch (e) {

        }
    }
    function Reportbind() {
        try {
            $.ajax({
                type: "GET",
                url: rootUrl + "/Setting/GetReportConfig",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var html = "";
                    $.each(data, function (key, value) {
                        var Isactive = value.IsActive;
                        var Reportname = value.Report_Name;
                        var seqid = value.ReportSeqID;
                        html += "<tr>";
                        html += "<td>" + seqid + "</td><td>" + Reportname + "</td> ";
                        if (Isactive == true)
                            html += "<td ><input type='checkbox' checked='checked' id='tblcheck' style='cursor:pointer;'></td>";
                        else
                            html += "<td ><input type='checkbox' id='tblcheck' style='cursor:pointer;'></td>";
                        html += "</tr>";
                    });
                    $('#tblReport tbody').html(html);
                },
                failure: function (response) {
                },
                error: function (response) {
                }
            });
        }
        catch (e) {
        }
    }
    function AllReportbind() {
        try {
            $.ajax({
                type: "GET",
                url: rootUrl + "/Setting/GetAllReportConfig",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    var html = "";
                    $.each(data, function (key, value) {
                        var Isactive = value.AllReport_IsActive;
                        var Reportname = value.Report_Name;
                        var seqid = value.ReportSeqID;
                        html += "<tr>";
                        html += "<td>" + seqid + "</td><td>" + Reportname + "</td> ";
                        if (Isactive == true)
                            html += "<td ><input type='checkbox' checked='checked' id='tblcheck' style='cursor:pointer;'></td>";
                        else
                            html += "<td ><input type='checkbox' id='tblcheck' style='cursor:pointer;'></td>";
                        html += "</tr>";
                    });
                    $('#tblAllReport tbody').html(html);
                },
                failure: function (response) {
                },
                error: function (response) {
                }
            });
        }
        catch (e) {
        }
    }
    function GetVisitPOPup() {
        try {
            document.getElementById('VisitDialogue').ej2_instances[0].show();
        }
        catch (e) {

        }
    }
    function VisitConfig() {
        try {
            var tbl = document.getElementById("tblReport");
            var tblrow = tbl.rows.length;
            var ConfigArray = new Array();
            var IsActive = "";
            for (k = 1; k < tblrow; k++) {
                var objDetails = new Object();
                var sval = tbl.rows[k];
                var ReportID = sval.cells[0].innerHTML;
                var ReportName = sval.cells[1].innerHTML;
                if (sval.cells[2].getElementsByTagName("input")[0].checked == true)
                    IsActive = true;
                else
                    IsActive = false;
                objDetails.ReportSeqID = parseInt(ReportID);
                objDetails.Report_Name = ReportName;
                objDetails.IsActive = IsActive;
                ConfigArray.push(objDetails);
            }
            var response = postValues("/Emr/SetVisitConfigDetails", ConfigArray);
            if (response != null) {
                document.getElementById('VisitDialogue').ej2_instances[0].hide();
                VisitPrint();
            }
        }
        catch (e) {

        }
    }
    function Cancelclick() {
        try {
            document.getElementById('VisitDialogue').ej2_instances[0].hide();
        }
        catch (e) {

        }
    }
    function GetAllVisitPOPup() {
        try {
            document.getElementById('VisitAllDialogue').ej2_instances[0].show();
        }
        catch (e) {

        }
    }
    function AllConfig() {
        try {
            var tbl = document.getElementById("tblAllReport");
            var tblrow = tbl.rows.length;
            var ConfigArray = new Array();
            var IsActive = "";
            for (k = 1; k < tblrow; k++) {
                var objDetails = new Object();
                var sval = tbl.rows[k];
                var ReportID = sval.cells[0].innerHTML;
                var ReportName = sval.cells[1].innerHTML;
                if (sval.cells[2].getElementsByTagName("input")[0].checked == true)
                    IsActive = true;
                else
                    IsActive = false;
                objDetails.ReportSeqID = parseInt(ReportID);
                objDetails.Report_Name = ReportName;
                objDetails.AllReport_IsActive = IsActive;
                ConfigArray.push(objDetails);
            }
            var response = postValues("/Emr/SetAllVisitConfigDetails", ConfigArray);
            if (response != null) {
                document.getElementById('VisitAllDialogue').ej2_instances[0].hide();
                document.getElementById('Allvisitdialog').ej2_instances[0].show();
                AllVisitPrint();
            }
        }
        catch (e) {

        }
    }
    function CancelAllclick() {
        try {
            document.getElementById('VisitAllDialogue').ej2_instances[0].hide();
        }
        catch (e) {

        }
    }
    function OpenPatientDocument() {
        var url = '@Url.Action("Upload", "Upload")';
        window.location.href = url;
    }
    function GotoLogin() {
        try {
            window.location.href = "/Login/Login";
        }
        catch (e) {
        }
    }
    function CancelViewclick() {
        try {
            window.location.href = "/Emr/EmrView";
        }
        catch (e) {

        }
    }

    function btnback() {
        $("#sidebar").hide();
    }
</script>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        //create instances for sidebar element
        var defaultSidebar = document.getElementById("default-sidebar").ej2_instances[0];

        document.getElementById('e-leftSticky').onclick = function () {
            defaultSidebar.toggle();
        }

    });
</script>

<style>
    #loading {
        display: none;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(255,255,255,0.8);
        z-index: 1000;
    }

    #loadingcontent {
        display: table;
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
    }

    #loadingspinner {
        display: table-cell;
        vertical-align: middle;
        width: 100%;
        text-align: center;
        font-size: larger;
        padding-top: 80px;
    }

    /* sample-level sticky button styles */
    .e-sidebar #e-leftSticky {
        /*#e-leftSticky {*/
        position: absolute;
        cursor: pointer;
        top: 30%;
        height: 40px;
        left: -100px;
        border-radius: 10px 10px 0px 0px;
        background: linear-gradient(90deg, #17a2b8, #b200ff);
        text-align: center;
        font-size: 18px;
        text-indent: 10px;
        -ms-transform: rotate(270deg);
        -webkit-transform: rotate(270deg);
        transform: rotate(270deg);
        color: white;
    }

    .e-sidebar.e-custom-style.e-close, .e-sidebar.e-custom-style.e-open {
        overflow: initial;
        visibility: inherit;
    }

    .title {
        text-align: center;
        font-size: 20px;
        padding: 15px;
    }

    .center-align {
        text-align: center;
        padding: 20px;
    }

    /* Button styles */
    #close, #close:hover, #close:active, #close:focus { /* csslint allow: adjoining-classes*/
        background: #fafafa;
        color: black;
    }
    /* sidebar element styles */
    #default-sidebar {
        /*background: linear-gradient(90deg, #17a2b8, #b200ff);*/
        background-color: white;
        color: black;
    }
</style>

<div class="row">
    <div class="col-xs-12 col-sm-12 col-md-12">
        <div id="loading">
            <div id="loadingcontent">
                @*<p id="loadingspinner">
                        Please Wait...
                    </p>*@
                <div id="loadingspinner">
                    <img src="~/images/loading.gif" style="width:100px;height:100px;" />
                </div>
            </div>
        </div>
    </div>
</div>


<div class="content-wrapper">
    <section class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-12">
                    <div class="card card-primary">
                        <div class="card-header" style="margin-top:15px;">
                            <h3 class="card-title">Patient View</h3>
                            <img src="~/images/ShutdownWhite.png" style="float:right;cursor:pointer;" onclick="GotoLogin();" />
                        </div>
                        <div class="card-body">
                            <div>
                                <div class="row" style="box-shadow: 0 2px 6px rgba(0,0,0,0.2);">
                                    <div class="col-xs-2 col-sm-2 col-md-2 PatDetails">
                                        <div class="form-group">
                                            <label class="Backcolor">UHID:</label>
                                            <label id="lblpatid" class="Backcolor" title="UHID"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-2 col-sm-2 col-md-2 PatDetails">
                                        <div class="form-group">
                                            <label class="Backcolor">Name:</label>
                                            <label id="lblpatname" class="Backcolor" title="Patient Name"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-2 col-sm-2 col-md-2 PatDetails">
                                        <div class="form-group">
                                            <label class="Backcolor">Age:</label>
                                            <label id="lblage" class="Backcolor"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-1 col-sm-1 col-md-1 PatDetails">
                                        <div class="form-group">
                                            @*<label class="Backcolor">Gender:</label>*@
                                            <label id="lblgender" class="Backcolor"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-2 col-sm-2 col-md-2 PatDetails" style="display:none;">
                                        <div class="form-group" style="display:none;">
                                            <label class="Backcolor">Visit ID:</label>
                                            <label id="lblvisitid" class="Backcolor"></label>
                                        </div>
                                        <div class="form-group">
                                            <label class="Backcolor">Doctor:</label>
                                            <label id="lblrefdoc" class="Backcolor" title="Doctor"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 col-sm-3 col-md-3 PatDetails">
                                        <div class="form-group">
                                            <label class="Backcolor">Allergies:</label>
                                            <label id="lblAllergy" class="Backcolor"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-3 col-sm-3 col-md-3" style="display:none;">
                                        <div class="form-group">
                                            <label class="Backcolor">Date:</label>
                                            <label id="lblVisitDate" class="Backcolor"></label>
                                        </div>
                                    </div>
                                    <div class="col-xs-2 col-sm-2 col-md-2 PatDetails">
                                        <div class="form-group">
                                            <img src="~/images/Scan.png" id="imgdocupload" style="height:42px;cursor:pointer;display:none;" onclick="OpenPatientDocument();" title="Patient Document Upload" />&nbsp;
                                            <img src="~/images/CURRENT REPORT-512.png" style="height:42px;cursor:pointer;" onclick="GetVisitPOPup();" title="Patient Current Report" />&nbsp;
                                            <img src="~/images/ALL REPORT.png" style="height:42px;cursor:pointer;" onclick="GetAllVisitPOPup();" title="Patient All Report" />&nbsp;
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-left:15px;display:none;">
                                    <div class="col-xs-12 col-sm-12 col-md-12">
                                        <div class="col-xs-4 col-sm-4 col-md-4">
                                            <div class="form-group">
                                                <label class="Backcolor">Status:</label>
                                                <label id="lblStatus" class="Backcolor"></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="display:none;">
                                <div class="col-xs-12 col-sm-12 col-md-12">
                                    <div class="col-xs-12 col-sm-12 col-md-12">
                                        <div class="panel panel-default">
                                            <div class="panel-heading">
                                                <div class="panel-title">
                                                    Patient View
                                                    <div style="float:right;">
                                                        <label><i>Print Header</i></label>&nbsp;
                                                        <input type="checkbox" checked="checked" id="printchbox" style="cursor:pointer;" />
                                                    </div>
                                                    <button type="button" id="btnallreport" class="btn btn-info"
                                                            style="background-color:blue;float:right;margin-top:-5px;margin-right:10px;" onclick="GetAllVisitPOPup();">
                                                        All report
                                                    </button>
                                                    <button type="button" id="btnvstreport" class="btn btn-info"
                                                            style="background-color:blue;float:right;margin-top:-5px;margin-right:10px;" onclick="GetVisitPOPup();">
                                                        Current report
                                                    </button>
                                                    <form role="form" method="post" asp-controller="Upload" asp-action="Upload" data-toggle="Upload" onkeydown="return event.key != 'Enter';">
                                                        <button type="submit" id="btnvstreport" class="btn btn-info"
                                                                style="background-color:blue;float:right;margin-top:-27px;margin-right:10px;padding-top: 6px;">
                                                            Patient Document Upload
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <br />
                                <ul class="nav nav-tabs" id="custom-tabs-one-tab" role="tablist">
                                    <li class="nav-item" onclick="VitalsDisable();">
                                        <a class="nav-link active aLink" id="custom-tabs-one-home-tab" data-toggle="pill" href="#tab1Vitals" role="tab" aria-controls="custom-tabs-one-home" aria-selected="true">Vitals</a>
                                    </li>
                                    <li class="nav-item" onclick="GetAllSymptomHeader();">
                                        <a class="nav-link aLink" id="custom-tabs-one-profile-tab" data-toggle="pill" href="#tab2Complaints" role="tab" aria-controls="custom-tabs-one-profile" aria-selected="false">Presenting Illness</a>
                                    </li>
                                    <li class="nav-item" onclick="GetAllPatHistory();">
                                        <a class="nav-link aLink" id="custom-tabs-one-profile-tab" data-toggle="pill" href="#tab3History" role="tab" aria-controls="custom-tabs-one-profile" aria-selected="false">History</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link aLink" id="custom-tabs-one-messages-tab" data-toggle="pill" href="#tabExamination" role="tab" aria-controls="custom-tabs-one-messages" aria-selected="false">Examination</a>
                                    </li>
                                    @*<li class="nav-item" onclick="GetOldDiagnosis();">
                                            <a class="nav-link aLink" id="custom-tabs-one-settings-tab" data-toggle="pill" href="#tab2Diagnosis" role="tab" aria-controls="custom-tabs-one-settings" aria-selected="false">Diagnosis</a>
                                        </li>*@
                                    <li class="nav-item" onclick="GetLastInvestigation();">
                                        <a class="nav-link aLink" id="custom-tabs-one-settings-tab" data-toggle="pill" href="#tab2Investigation" role="tab" aria-controls="custom-tabs-one-settings" aria-selected="false">Investigation</a>
                                    </li>
                                    <li class="nav-item" onclick="GetAllPatTreatment();">
                                        <a class="nav-link aLink" id="custom-tabs-one-settings-tab" data-toggle="pill" href="#tab2TreatmentPlan" role="tab" aria-controls="custom-tabs-one-settings" aria-selected="false">Diagnosis & Treatment</a>
                                    </li>
                                    <li class="nav-item" onclick="ScanImagesbyTagName();">
                                        <a class="nav-link aLink" id="custom-tabs-one-settings-tab" data-toggle="pill" href="#tab2PatientDocument" role="tab" aria-controls="custom-tabs-one-settings" aria-selected="false">Patient Document</a>
                                    </li>
                                </ul>
                                <div class="tab-content">
                                    <div class="tab-pane fade show active" id="tab1Vitals">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/Vitals/Vitals.cshtml")
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tab2Complaints">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/Complaint/Complaint.cshtml")
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tab3History">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/History/History.cshtml")
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tabExamination">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/Examination/Examination.cshtml")
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tab2Diagnosis">
                                        @*<div class="col-xs-12 col-sm-12 col-md-12">
                                                @await Html.PartialAsync("~/Views/Diagnosis/Diagnosis.cshtml")
                                            </div>*@
                                    </div>
                                    <div class="tab-pane fade" id="tab2Investigation">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/Investigation/Investigation.cshtml")
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tab2TreatmentPlan">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/TreatmentPlan/TreatmentPlan.cshtml")
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="tab2PatientDocument">
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            @await Html.PartialAsync("~/Views/PatientDoument/PatientDoument.cshtml")
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <ejs-dialog id="VisitDialogue" showCloseIcon="true" cssClass="ejs-Alldialog" allowDragging="true" height="500" header="Visit Configuration" visible="false" width="800">
                                    <e-content-template>
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            <div class="table-responsive">
                                                <table id="tblReport" class="table table-bordered table-striped dataTable table-reflow">
                                                    <thead>
                                                        <tr style="font-weight:bold;">
                                                            <td>SNO</td>
                                                            <td>Report Name</td>
                                                            <td></td>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-6 col-md-6">
                                                <ejs-button id="btnvisitconfig" content="Get Report" onclick="VisitConfig();" isPrimary="true"></ejs-button>
                                                <ejs-button id="btnCancel" content="Cancel" onclick="Cancelclick();" isPrimary="true"></ejs-button>
                                            </div>
                                        </div>
                                    </e-content-template>
                                </ejs-dialog>
                            </div>
                            <div>
                                <ejs-dialog id="VisitAllDialogue" showCloseIcon="true" cssClass="ejs-Alldialog" allowDragging="true" height="500" header="Configuration" visible="false" width="800">
                                    <e-content-template>
                                        <div class="col-xs-12 col-sm-12 col-md-12">
                                            <div class="table-responsive">
                                                <table id="tblAllReport" class="table table-bordered table-striped dataTable table-reflow">
                                                    <thead>
                                                        <tr style="font-weight:bold;">
                                                            <td>SNO</td>
                                                            <td>Report Name</td>
                                                            <td></td>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-6 col-md-6">
                                                <ejs-button id="btnAllsave" content="Get Report" onclick="AllConfig();" isPrimary="true"></ejs-button>
                                                <ejs-button id="btnAllCancel" content="Cancel" onclick="CancelAllclick();" isPrimary="true"></ejs-button>
                                            </div>
                                        </div>
                                    </e-content-template>
                                </ejs-dialog>
                            </div>
                            <div>
                                <ejs-dialog id="Allvisitdialog" showCloseIcon="true" cssClass="ejs-Alldialog" allowDragging="true" height="300" header="All Visit Report" visible="false" width="800">
                                    <e-content-template>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-12">
                                                <div class="form-group">
                                                    <table id="tblVisitDetails" border="1" class="table table-striped table-bordered table-hover dataTable table-reflow">
                                                        <thead>
                                                            <tr>
                                                                <th style="font-size: small;font-weight: normal" ;>S.No</th>
                                                                <th style="font-size: small;font-weight: normal" ;>Date</th>
                                                                <th><input type="checkbox" checked="checked" id="cmp_all" /></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <button type="button" class="btn btn-default" onclick="return GetAllReports();">Get Report</button>
                                            <button type="button" class="btn btn-default" onclick="return ClosePopup();">Close</button>
                                        </div>
                                    </e-content-template>
                                </ejs-dialog>
                            </div>
                            @*<ejs-sidebar id="default-sidebar" position="Right" type="Slide" width="90%" htmlAttributes="htmlAttribute">
                                    <e-content-template>
                                        <div id="e-leftSticky">
                                            Patient Dashboard
                                        </div>
                                        <div style="overflow:auto; height:100%;">
                                            <div class="row">
                                                <div class="col-xs-12 col-sm-12 col-md-12">
                                                    <div id="loading1">
                                                        <div id="loadingcontent">
                                                            <div id="loadingspinner">
                                                                <img src="~/images/loading.gif" style="width:100px;height:100px;" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div id="DetailsView" class="center-align">
                                                <div class="row">
                                                    <div>
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Details_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Details_Accordion" href="#collapse1">
                                                                                            Patient Details
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapse1" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <div class="row">
                                                                                            <div class="col-xs-10 col-sm-10 col-md-10">
                                                                                                <table class="table table-bordered table-striped" id="tblPatient_Details" style="width:100%; font-family:'Times New Roman', Times, serif; font-size:small;">
                                                                                                    <thead></thead>
                                                                                                    <tbody style="line-height:1;"></tbody>
                                                                                                </table>
                                                                                            </div>
                                                                                            <div class="col-xs-2 col-sm-2 col-md-2">
                                                                                                <table class="table table-striped" id="tblAllergy" style="width:100%; margin-left:-10px; font-family:'Times New Roman', Times, serif; font-size:small;">
                                                                                                    <thead></thead>
                                                                                                    <tbody style="line-height:1;"></tbody>
                                                                                                </table>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Co-Morbidities_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Co-Morbidities_Accordion" href="#collapse6">
                                                                                            Patient Hx
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapse6" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <h6>Co-Morbities</h6>
                                                                                        <table id="tblCoMorbities" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td>Medical History</td>
                                                                                                    <td>Duration</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table><br />
                                                                                        <h6>Medication</h6>
                                                                                        <table id="tblMedication" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td>Medicine</td>
                                                                                                    <td>Duration</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table><br />
                                                                                        <h6>Surgical Hx</h6>
                                                                                        <table id="tblSurgicalhx" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td>Surgical History</td>
                                                                                                    <td>Comments</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table><br />
                                                                                        <h6>Genital / Reproductive Hx</h6>
                                                                                        <label id="lblGenital" style="width:100%;" ></label>
                                                                                        <table id="tblGenitalHx" class="table table-bordered table-striped"  style="width:100%; font-family:'Times New Roman', Times, serif; font-size:small; display:none;">
                                                                                            <thead></thead>
                                                                                            <tbody style="line-height:1;"></tbody>
                                                                                        </table>

                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Diagnosis_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Diagnosis_Accordion" href="#collapse2">
                                                                                            Patient Visit Details
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapse2" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <table id="tblDiagnosis1" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td style="display:none;">Visit Id</td>
                                                                                                    <td>Visited Date & Time</td>
                                                                                                    <td>Diagnosis</td>
                                                                                                    <td style="display:none;">Diagnosis Type</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Symptoms_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Symptoms_Accordion" href="#collapseThree">
                                                                                            Presenting Illness
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapseThree" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <table id="tblSymptoms" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td>Symptom</td>
                                                                                                    <td>Duration</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Chart_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Chart_Accordion" href="#collapsechart">
                                                                                            Vitals Chart
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapsechart" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <canvas id="MultiLineChart1" style="height:250px;" class="col-lg-12"></canvas>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="PatientVitals_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#PatientVitals_Accordion" href="#collapseThree2">
                                                                                            Vitals
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapseThree2" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <div class="table-responsive">
                                                                                            <table id="tblPatientVitals" class="table table-bordered table-striped dataTable table-reflow tableHB">
                                                                                                <thead>
                                                                                                </thead>
                                                                                                <tbody></tbody>
                                                                                            </table>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Investigation_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Investigation_Accordion" href="#collapse4">
                                                                                            Investigation
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapse4" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <table id="tblInvestigation1" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td>Investigation</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6">
                                                                <div class="card">
                                                                    <div class="card-body">
                                                                        <div id="Treatment_Accordion">
                                                                            <div class="card card-gray">
                                                                                <div class="card-header">
                                                                                    <h4 class="card-title">
                                                                                        <a data-toggle="collapse" data-parent="#Treatment_Accordion" href="#collapse5">
                                                                                            Treatment Plan
                                                                                        </a>
                                                                                    </h4>
                                                                                </div>
                                                                                <div id="collapse5" class="panel-collapse collapse show">
                                                                                    <div class="card-body">
                                                                                        <table id="tblTreatment" class="table table-bordered table-striped dataTable table-reflow tableHB" style="width:100%;">
                                                                                            <thead>
                                                                                                <tr>
                                                                                                    <td>S No</td>
                                                                                                    <td>Drug Name</td>
                                                                                                </tr>
                                                                                            </thead>
                                                                                            <tbody></tbody>
                                                                                        </table>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </e-content-template>
                                </ejs-sidebar>*@
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>



/*!
*  filename: ej2.min.js
*  version : 17.2.41
*  Copyright Syncfusion Inc. 2001 - 2019. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var ej = function (e) { "use strict"; function t(e, t) { var i = t; return i.unshift(void 0), new (Function.prototype.bind.apply(e, i)) } function i(e) { var t, i = new Uint16Array(5); (window.msCrypto || window.crypto).getRandomValues(i); var n = "ej2" + function (e) { for (var t = "", i = 0; i < 5; i++)t += (i ? "," : "") + e[i]; return t }(i), r = function (i) { i.source === window && "string" == typeof i.data && i.data.length <= 32 && i.data === n && (e(), t()) }; return window.addEventListener("message", r, !1), window.postMessage(n, "*"), t = function () { window.removeEventListener("message", r), e = r = n = void 0 } } function n(e, t) { for (var i = t, n = e.replace(/\[/g, ".").replace(/\]/g, "").split("."), r = 0; r < n.length && !c(i); r++)i = i[n[r]]; return i } function r(e, t, i) { var n, r, o = e.replace(/\[/g, ".").replace(/\]/g, "").split("."), s = i || {}, a = s, l = o.length; for (n = 0; n < l; n++)r = o[n], n + 1 === l ? a[r] = void 0 === t ? {} : t : d(a[r]) && (a[r] = {}), a = a[r]; return s } function o(e, t) { delete e[t] } function s(e) { return !d(e) && e.constructor === {}.constructor } function a(e, t) { return e[t] } function l(e, t) { if (!d(t)) for (var i = e, n = t, r = 0, o = Object.keys(t); r < o.length; r++) { var a = o[r]; d(i.deepMerge) || -1 === i.deepMerge.indexOf(a) || !s(n[a]) && !Array.isArray(n[a]) ? i[a] = n[a] : h(i[a], i[a], n[a], !0) } } function h(e, t, i, n) { var r = e || {}, o = arguments.length; n && (o -= 1); for (var a = function (e) { if (!l[e]) return "continue"; var t = l[e]; Object.keys(t).forEach(function (e) { var i, o = r[e], a = t[e]; n && (s(a) || Array.isArray(a)) ? s(a) ? (i = o || {}, r[e] = h({}, i, a, n)) : (i = o || [], r[e] = h([], i, a, n)) : r[e] = a }) }, l = arguments, d = 1; d < o; d++)a(d); return r } function d(e) { return void 0 === e || null === e } function c(e) { return void 0 === e } function p(e) { return e + "_" + Qv++ } function u(e, t) { var i; return function () { var n = this, r = arguments; clearTimeout(i), i = setTimeout(function () { return i = null, e.apply(n, r) }, t) } } function g(e) { var t = Object.prototype.toString; return "[object Array]" === t.call(e) && "[object Object]" === t.call(e[0]) } function m(e, t) { var i = e; return i === t || !(i === document || !i) && m(i.parentNode, t) } function f(e) { try { throw new Error(e) } catch (e) { throw e.message + "\n" + e.stack } } function y(e, t) { var i = document.createElement("div"), n = [].slice.call(document.getElementsByTagName("head")[0].querySelectorAll("link, style")), r = ""; d(t) && (t = window.open("", "print", "height=452,width=1024,tabbar=no")), i.appendChild(e.cloneNode(!0)); for (var o = 0, s = n.length; o < s; o++)r += n[o].outerHTML; t.document.write("<!DOCTYPE html> <html><head>" + r + "</head><body>" + i.innerHTML + "<script> (function() { window.ready = true; })(); <\/script></body></html>"), t.document.close(), t.focus(); var a = setInterval(function () { t.ready && (t.print(), t.close(), clearInterval(a)) }, 500); return t } function v(e) { var t = e + ""; return "auto" === t || -1 !== t.indexOf("%") || -1 !== t.indexOf("px") ? t : t + "px" } function w() { return window && Object.keys(window).indexOf("Blazor") >= 0 } function b(e) { return e instanceof Node || !w() || d(e.xPath) ? e : document.evaluate(e.xPath, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue } function C(e, t) { var i = "string" == typeof e ? document.querySelector(e) : e; if (i[Gv]) for (var n = 0, r = i[Gv]; n < r.length; n++) { var o = r[n]; if (o instanceof t) return o } return null } function L() { if ("undefined" != typeof window) { var e = new Uint16Array(5); return (window.msCrypto || window.crypto).getRandomValues(e) } } function M(e, t) { var i = $v.test(e) ? document.createElementNS("http://www.w3.org/2000/svg", e) : document.createElement(e); return void 0 === t ? i : (i.innerHTML = t.innerHTML ? t.innerHTML : "", void 0 !== t.className && (i.className = t.className), void 0 !== t.id && (i.id = t.id), void 0 !== t.styles && i.setAttribute("style", t.styles), void 0 !== t.attrs && P(i, t.attrs), i) } function S(e, t) { for (var i = T(t), n = 0, r = e; n < r.length; n++)for (var o = r[n], s = 0, a = i; s < a.length; s++) { var l = a[s]; o.classList.contains(l) || o.classList.add(l) } return e } function x(e, t) { for (var i = T(t), n = 0, r = e; n < r.length; n++) { var o = r[n]; if ("" !== o.className) for (var s = 0, a = i; s < a.length; s++) { var l = a[s]; o.classList.remove(l) } } return e } function T(e) { var t = []; return "string" == typeof e ? t.push(e) : t = e, t } function D(e) { var t = e; return "" === t.style.visibility && t.offsetWidth > 0 } function A(e, t, i) { for (var n = document.createDocumentFragment(), r = 0, o = e; r < o.length; r++) { var s = o[r]; n.appendChild(s) } return t.insertBefore(n, t.firstElementChild), i && j(t), e } function E(e, t, i) { for (var n = document.createDocumentFragment(), r = 0, o = e; r < o.length; r++) { var s = o[r]; n.appendChild(s) } return t.appendChild(n), i && j(t), e } function j(e) { e.querySelectorAll("script").forEach(function (e) { var t = document.createElement("script"); t.text = e.innerHTML, document.head.appendChild(t), I(t) }) } function I(e) { return e.parentNode.removeChild(e) } function k(e) { var t = e.parentNode; Kv.clearEvents(e), t.removeChild(e) } function P(e, t) { for (var i = e, n = 0, r = Object.keys(t); n < r.length; n++) { var o = r[n]; i.setAttribute(o, t[o]) } return i } function N(e, t) { return void 0 === t && (t = document), t.querySelector(e) } function O(e, t) { void 0 === t && (t = document); return t.querySelectorAll(e) } function R(e, t) { var i = e; if ("function" == typeof i.closest) return i.closest(t); for (; i && 1 === i.nodeType;) { if (F(i, t)) return i; i = i.parentNode } return null } function z(e, t) { void 0 !== t && Object.keys(t).forEach(function (i) { e.style[i] = t[i] }) } function B(e, t, i) { S([e], t), x([e], i) } function F(e, t) { var i = e.matches || e.msMatchesSelector || e.webkitMatchesSelector; return i ? i.call(e, t) : -1 !== [].indexOf.call(document.querySelectorAll(t), e) } function V(e, t) { var i, n, r = "string" == typeof e ? document.getElementById(e) : e; for (n = 0; n < r.ej2_instances.length; n++)if (i = r.ej2_instances[n], "string" == typeof t) { if (t === i.getModuleName()) return i } else if (i instanceof t) return i } function W(e, i, n, r) { return e.properties.hasOwnProperty(i) && e.properties[i] instanceof r || (e.properties[i] = t(r, [e, i, n])), e.properties[i] } function H(e, i, n, r, o, s) { for (var a = [], l = n ? n.length : 0, h = 0; h < l; h++) { var d = r; if (s && (d = r(n[h], e)), o) { var c = t(d, [e, i, {}, !0]); c.setProperties(n[h], !0), a.push(c) } else a.push(t(d, [e, i, n[h], !0])) } return a } function _(e, t) { return function () { return this.properties.hasOwnProperty(t) || (this.properties[t] = e), this.properties[t] } } function Y(e) { return function (t, i) { var n = { set: function (e, t) { return function (i) { if (this.properties[t] !== i) { var n = this.properties.hasOwnProperty(t) ? this.properties[t] : e; this.saveChanges(t, i, n), this.properties[t] = i } } }(e, i), get: _(e, i), enumerable: !0, configurable: !0 }; Object.defineProperty(t, i, n), Z(t, i, "prop", e) } } function U(e, t) { return function (i, n) { var r = { set: function (e, t, i) { return function (n) { W(this, t, e, i).setProperties(n) } }(e, n, t), get: function (e, t, i) { return function () { return W(this, t, e, i) } }(e, n, t), enumerable: !0, configurable: !0 }; Object.defineProperty(i, n, r), Z(i, n, "complexProp", e, t) } } function q(e) { return function (t, i) { var n = { set: function (e, t, i) { return function (n) { var r = i(n, this); W(this, t, e, r).setProperties(n) } }({}, i, e), get: function (e, t, i) { return function () { var n = i({}); return this.properties.hasOwnProperty(t) ? this.properties[t] : W(this, t, e, n) } }({}, i, e), enumerable: !0, configurable: !0 }; Object.defineProperty(t, i, n), Z(t, i, "complexProp", {}, e) } } function G(e, t) { return function (i, n) { var r = { set: function (e, t, i) { return function (n) { var r = H(this, t, e, i, !1), o = H(this, t, n, i, !0); this.saveChanges(t, o, r), this.properties[t] = o } }(e, n, t), get: function (e, t, i) { return function () { if (!this.properties.hasOwnProperty(t)) { var n = H(this, t, e, i, !1); this.properties[t] = n } return this.properties[t] } }(e, n, t), enumerable: !0, configurable: !0 }; Object.defineProperty(i, n, r), Z(i, n, "colProp", e, t) } } function Q(e) { return function (t, i) { var n = { set: function (e, t, i) { return function (n) { var r = this.properties.hasOwnProperty(t) ? this.properties[t] : e, o = H(this, t, n, i, !0, !0); this.saveChanges(t, o, r), this.properties[t] = o } }([], i, e), get: function (e, t, i) { return function () { var n = i({}); if (!this.properties.hasOwnProperty(t)) { var r = H(this, t, e, n, !1); this.properties[t] = r } return this.properties[t] } }([], i, e), enumerable: !0, configurable: !0 }; Object.defineProperty(t, i, n), Z(t, i, "colProp", {}, e) } } function X() { return function (e, t) { var i = { set: function (e) { var i = this.properties[t]; if (i !== e) { var n = $(this, t); !1 === c(i) && n.context.removeEventListener(n.prefix, i), n.context.addEventListener(n.prefix, e), this.properties[t] = e } }, get: _(void 0, t), enumerable: !0, configurable: !0 }; Object.defineProperty(e, t, i), Z(e, t, "event") } } function J(e) { } function Z(e, t, i, n, r) { c(e.propList) && (e.propList = { props: [], complexProps: [], colProps: [], events: [], propNames: [], complexPropNames: [], colPropNames: [], eventNames: [] }), e.propList[i + "s"].push({ propertyName: t, defaultValue: n, type: r }), e.propList[i + "Names"].push(t) } function K(e) { if (c(e.prototype.builderObject)) { e.prototype.builderObject = { properties: {}, propCollections: [], add: function () { this.isPropertyArray = !0, this.propCollections.push(h({}, this.properties, {})) } }; for (var t = /complex/, i = 0, n = Object.keys(e.prototype.propList); i < n.length; i++)for (var r = n[i], o = function (i) { t.test(r) ? e.prototype.builderObject[i.propertyName] = function (e) { var t = {}; l(t, K(i.type)), e(t); var n; return n = t.isPropertyArray ? t.propCollections : h({}, t.properties, {}), this.properties[i.propertyName] = n, t.properties = {}, t.propCollections = [], t.isPropertyArray = !1, this } : e.prototype.builderObject[i.propertyName] = function (e) { return this.properties[i.propertyName] = e, this } }, s = 0, a = e.prototype.propList[r]; s < a.length; s++) { o(a[s]) } } return e.prototype.builderObject } function $(e, t) { if (!1 === e.hasOwnProperty("parentObj")) return { context: e, prefix: t }; var i = n("propName", e); return i && (t = i + "-" + t), $(n("parentObj", e), t) } function ee(e, t, i) { var n = function (e) { return { selector: e && e.selector ? e.selector : null, ignore: e && e.ignore ? e.ignore : null, rippleFlag: e && e.rippleFlag, isCenterRipple: e && e.isCenterRipple, duration: e && e.duration ? e.duration : 350 } }(t); return !1 === n.rippleFlag || void 0 === n.rippleFlag && !yw ? Function : (e.setAttribute("data-ripple", "true"), Kv.add(e, "mousedown", te, { parent: e, rippleOptions: n }), Kv.add(e, "mouseup", ie, { parent: e, rippleOptions: n, done: i }), Kv.add(e, "mouseleave", ne, { parent: e, rippleOptions: n }), uw.isPointer && Kv.add(e, "transitionend", ne, { parent: e, rippleOptions: n }), function () { e.removeAttribute("data-ripple"), Kv.remove(e, "mousedown", te), Kv.remove(e, "mouseup", ie), Kv.remove(e, "mouseleave", ne), Kv.remove(e, "transitionend", ne) }) } function te(e) { var t = e.target, i = this.rippleOptions.selector, n = i ? R(t, i) : t; if (!(!n || this.rippleOptions && R(t, this.rippleOptions.ignore))) { var r = n.getBoundingClientRect(), o = e.pageX - document.body.scrollLeft, s = e.pageY - (!document.body.scrollTop && document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop), a = Math.max(Math.abs(o - r.left), Math.abs(o - r.right)), l = Math.max(Math.abs(s - r.top), Math.abs(s - r.bottom)), h = Math.sqrt(a * a + l * l), d = 2 * h + "px", c = o - r.left - h, p = s - r.top - h; this.rippleOptions && this.rippleOptions.isCenterRipple && (c = 0, p = 0, d = "100%"), n.classList.add("e-ripple"); var u = M("div", { className: "e-ripple-element", styles: "width: " + d + ";height: " + d + ";left: " + c + "px;top: " + p + "px;transition-duration: " + this.rippleOptions.duration.toString() + "ms;" }); n.appendChild(u), window.getComputedStyle(u).getPropertyValue("opacity"), u.style.transform = "scale(1)", n !== this.parent && Kv.add(n, "mouseleave", ne, { parent: this.parent, rippleOptions: this.rippleOptions }) } } function ie(e) { re(e, this) } function ne(e) { re(e, this) } function re(e, t) { var i = t.rippleOptions.duration, n = e.target, r = t.rippleOptions.selector, o = r ? R(n, r) : n; if (o && (!o || -1 !== o.className.indexOf("e-ripple"))) { var s = O(".e-ripple-element", o), a = s[s.length - 1]; a && (a.style.opacity = "0.5"), t.parent !== o && Kv.remove(o, "mouseleave", ne), setTimeout(function () { a && a.parentNode && a.parentNode.removeChild(a), o.getElementsByClassName("e-ripple-element").length || o.classList.remove("e-ripple"), t.done && t.done(e) }, i) } } function oe(e) { Yw = e, Ww.notify("notifyExternalChange", { locale: Yw }) } function se(e, t) { var i = pw.getDependables(_w, e, "", !0)[qw[0]], r = pw.getDependables(_w, e, "")[qw[1]], o = n("defaultNumberingSystem", i), s = n("symbols-numberSystem-" + o, i), a = pw.getSymbolPattern(t || "decimal", o, i, !1); return h(s, pw.getFormatData(a, !0, "", !0), { dateSeparator: pw.getDateSeparator(r) }) } function ae(e) { return pw.getDependables(_w, "", e, !1)[qw[1]] } function le(e, t) { var i = 'var str="' + function (e, t, i) { var n = 0, r = [], o = e.match(/class="([^\"]+|)\s{2}/g), s = ""; o && o.forEach(function (t) { s = t.replace(/\s\s+/g, " "), e = e.replace(t, s) }); return e.replace(vb, "").replace(Ab, "'$1'").replace(jb, function (e, o, s, a) { var l = o.match(xb); if (l) { var h = l[1]; if (Cb.test(o)) o = '";} ' + o.replace(l[1], h.replace(Db, function (e) { return e = e.trim(), he(e, !wb.test(e) && -1 === r.indexOf(e), t, r) })) + '{ \n str = str + "'; else if (bb.test(o)) o = '"; ' + o.replace(l[1], h.replace(Db, function (e) { return e = e.trim(), Ib.test(e) ? function (e, t, i, n) { return !t || Tb.test(e) || -1 !== n.indexOf(e.split(".")[0]) || /^\..*/gm.test(e) ? e : i + "." + e }(e, !wb.test(e) && -1 === r.indexOf(e), t, r) : he(e, !wb.test(e) && -1 === r.indexOf(e), t, r) })) + '{ \n str = str + "'; else if (Mb.test(o)) { var d = l[1].split(" of "); o = '"; ' + o.replace(l[1], function (e) { return r.push(d[0]), r.push(d[0] + "Index"), "var i" + (n += 1) + "=0; i" + n + " < " + he(d[1], !0, t, r) + ".length; i" + n + "++" }) + "{ \n " + d[0] + "= " + he(d[1], !0, t, r) + "[i" + n + "]; \n var " + d[0] + "Index=i" + n + '; \n str = str + "' } else { var c = o.split("("), p = i && i.hasOwnProperty(c[0]) ? "this." : "global"; p = /\./.test(c[0]) ? "" : p; var u = l[1].split(","); 0 === l[1].length || /data/.test(u[0]) || /window./.test(u[0]) || (l[1] = "global" === p ? t + "." + l[1] : l[1]), o = '" + ' + ("global" === p ? "" : p) + o.replace(h, he(l[1].replace(/,( |)data.|,/gi, "," + t + ".").replace(/,( |)data.window/gi, ",window"), "global" !== p, t, r)) + '+"' } } else o = Lb.test(o) ? '"; ' + o.replace(Lb, '} else { \n str = str + "') : o.match(Sb) ? o.replace(Sb, '"; \n } \n str = str + "') : Eb.test(o) ? '"+' + function (e, t, i, n) { return t && !Tb.test(e) && -1 === n.indexOf(e.split(".")[0]) ? i + '["' + e : e }(o, -1 === r.indexOf(o), t, r) + '"]+"' : '"+' + he(o.replace(/\,/gi, "+" + t + "."), -1 === r.indexOf(o), t, r) + '+"'; return o }) }(e, "data", t) + '"; return str;'; return new Function("data", i).bind(t) } function he(e, t, i, n) { return t && !Tb.test(e) && -1 === n.indexOf(e.split(".")[0]) ? i + "." + e : e } function de() { return "-" + Math.random().toString(36).substr(2, 5) } function ce(e, t) { var i = Ob.compile(e, t); return function (e, t, n, r, o, s) { var a = i(e, t, n), l = "BlazorTemplateId"; if (window && window.Blazor && !o) { var h = r + de(); if (Nb[r] || (Nb[r] = []), d(s)) e[l] = h, Nb[r].push(e); else for (var c = 0, p = Object.keys(Nb[r][s]); c < p.length; c++) { var u = p[c]; e[u] && (Nb[r][s][u] = e[u]), u === l && (h = Nb[r][s][u]) } return "rowTemplate" === n ? [M("tr", { id: h, className: "e-blazor-template" })] : [M("div", { id: h, className: "e-blazor-template" })] } if ("string" == typeof a) { if (Pb.test(a)) { return M("svg", { innerHTML: a }).childNodes } return M(kb.test(a) ? "table" : "div", { innerHTML: a }).childNodes } return a } } function pe(e, t, i, n) { if (window && window.Blazor) { window.ejsInterop.updateTemplate(t, Nb[e], e, i), !1 !== n && (Nb[e] = []) } } function ue(e, t, i) { var n = document.getElementById(e); if (n) for (var r = n.getElementsByClassName("blazor-inner-template"), o = 0; o < r.length; o++) { var s = r[o].getAttribute("data-templateId"), a = document.getElementById(s); if (a) for (var l = a.children.length, h = 0; h < l; h++) { if (!d(i)) return void r[i].appendChild(a.children[0]); r[o].appendChild(a.children[0]) } } } function ge(e, t) { var i = M(e); return t && ye(i, t), i } function me(e) { return e.children } function fe(e) { var t = "barcodeMeasureElement"; window[t].style.visibility = "visible"; var i = me(window[t].children[1])[0]; i.textContent = e.string, i.setAttribute("style", "font-size:" + e.stringSize + "px; font-family:" + e.fontStyle + ";font-weight:"); var n = new tC(0, 0); return n.width = i.getBBox().width, n.height = i.getBBox().height, window[t].style.visibility = "hidden", n } function ye(e, t) { for (var i = Object.keys(t), n = 0; n < i.length; n++)e.setAttribute(i[n], t[i[n]]) } function ve(e, t) { var i = document.createElementNS("http://www.w3.org/2000/svg", e); return ye(i, t), i } function we() { var e = "barcodeMeasureElement"; if (window[e]) window[e].usageCount += 1; else { var t = ge("div", { id: "barcodeMeasureElement", class: "barcodeMeasureElement", style: "visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;" }), i = ge("span", { style: "display:inline-block ; line-height: normal" }); t.appendChild(i); var n = document.createElementNS("http://www.w3.org/2000/svg", "svg"); n.setAttribute("xlink", "http://www.w3.org/1999/xlink"), t.appendChild(n); var r = document.createElementNS("http://www.w3.org/2000/svg", "text"); r.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"), n.appendChild(r), window[e] = t, window[e].usageCount = 1, document.body.appendChild(t) } } function be(e, t, i, n) { var r = t; return "SVG" !== i || e.mode ? e.mode && r.parentNode.removeChild(r) : r.innerHTML = "", new rC(n, "SVG" === i) } function Ce(e, t, i, n, r, o) { return { width: e, height: t, x: i, y: n, color: r, strokeColor: o } } function Le(e, t) { !function (e, t) { var i, n; i = 1.5 * e.element.offsetWidth, n = 1.5 * e.element.offsetHeight, iC.getContext(t).clearRect(0, 0, i, n) }(e, t) } function Me(e, t, i, s, a, l) { var h = s; if (s.tagName === t) { var d = n("ej2_instances", s); h = e("input", { attrs: { type: i } }); for (var c = ["change", "cssClass", "label", "labelPosition", "id"], p = 0, u = s.attributes.length; p < u; p++)-1 === c.indexOf(s.attributes[p].nodeName) && h.setAttribute(s.attributes[p].nodeName, s.attributes[p].nodeValue); P(s, { class: a, role: l, "aria-checked": "false" }), s.appendChild(h), r("ej2_instances", d, h), o(s, "ej2_instances") } return h } function Se(e) { for (var t, i = e.childNodes, n = 0; n < i.length; n++)if (3 === (t = i[n]).nodeType) return t; return null } function xe(e, t, i) { "INPUT" === i ? (t.parentNode.insertBefore(e.element, t), I(t), e.element.checked = !1, ["name", "value", "disabled"].forEach(function (t) { e.element.removeAttribute(t) })) : (["role", "aria-checked", "class"].forEach(function (e) { t.removeAttribute(e) }), t.innerHTML = "") } function Te(e, t, i, n, r) { n = Me(e.createElement, t, "checkbox", n, i, r), e.element = n, "checkbox" !== e.element.getAttribute("type") && e.element.setAttribute("type", "checkbox"), e.element.id || (e.element.id = p("e-" + r)) } function De(e, t, i) { void 0 === t && (t = !1), void 0 === i && (i = {}); var n = e("div", { className: "e-checkbox-wrapper e-css" }); if (i.cssClass && S([n], i.cssClass.split(" ")), i.enableRtl && n.classList.add("e-rtl"), t) { var r = e("span", { className: "e-ripple-container" }); ee(r, { isCenterRipple: !0, duration: 400 }), n.appendChild(r) } var o = e("span", { className: "e-frame e-icons" }); if (i.checked && o.classList.add("e-check"), n.appendChild(o), i.label) { var s = e("span", { className: "e-label", innerHTML: i.label }); n.appendChild(s) } return n } function Ae(e, t) { if (t) { var i = document.createEvent("MouseEvents"); i.initEvent(e.type, !1, !0), t.dispatchEvent(i) } } function Ee(e, t) { e.element.getAttribute("ejs-for") && t.appendChild(e.createElement("input", { attrs: { name: e.name || e.element.name, value: "false", type: "hidden" } })) } function je(e, t) { var i = !1, n = { left: 0, top: 0 }, r = e; if (!e || !t) return n; for (d(t.offsetParent) && "fixed" === t.style.position && (i = !0); (t.offsetParent || i) && e && t.offsetParent !== e;)n.left += e.offsetLeft, n.top += e.offsetTop, e = e.offsetParent; for (e = r; (t.offsetParent || i) && e && t.offsetParent !== e;)n.left -= e.scrollLeft, n.top -= e.scrollTop, e = e.parentElement; return n } function Ie(e, t, i, n, r) { if (Wb = i + t === "topright" ? void 0 : r, Wb = r, hM = !!n, !e) return { left: 0, top: 0 }; t || (t = "left"), i || (i = "top"), _b = e.ownerDocument, Hb = e; return function (e, t, i) { switch (Vb = Hb.getBoundingClientRect(), t + e) { case "topcenter": ke(We(), i), Pe(Be(), i); break; case "topright": ke(Ve(), i), Pe(Be(), i); break; case "centercenter": ke(We(), i), Pe(ze(), i); break; case "centerright": ke(Ve(), i), Pe(ze(), i); break; case "centerleft": ke(Fe(), i), Pe(ze(), i); break; case "bottomcenter": ke(We(), i), Pe(Re(), i); break; case "bottomright": ke(Ve(), i), Pe(Re(), i); break; case "bottomleft": ke(Fe(), i), Pe(Re(), i); break; default: case "topleft": ke(Fe(), i), Pe(Be(), i) }return i }(t.toLowerCase(), i.toLowerCase(), { left: 0, top: 0 }) } function ke(e, t) { t.left = e } function Pe(e, t) { t.top = e } function Ne() { return _b.documentElement.scrollTop || _b.body.scrollTop } function Oe() { return _b.documentElement.scrollLeft || _b.body.scrollLeft } function Re() { return hM ? Vb.bottom : Vb.bottom + Ne() } function ze() { return Be() + Vb.height / 2 } function Be() { return hM ? Vb.top : Vb.top + Ne() } function Fe() { return Vb.left + Oe() } function Ve() { return Vb.right + Oe() - (Wb ? Wb.width : 0) } function We() { return Fe() + Vb.width / 2 } function He(e, t, i, n) { if (void 0 === t && (t = null), void 0 === i && (i = { X: !1, Y: !1 }), !i.Y && !i.X) return { left: 0, top: 0 }; var r = e.getBoundingClientRect(); if (Ub = t, Yb = e.ownerDocument, n || (n = Ie(e, "left", "top")), i.X) { var o = Ub ? Je() : at(), s = tt(), a = it(), l = s - n.left, h = n.left + r.width - a; r.width > o ? n.left = l > 0 && h <= 0 ? a - r.width : h > 0 && l <= 0 ? s : l > h ? a - r.width : s : l > 0 ? n.left += l : h > 0 && (n.left -= h) } if (i.Y) { var d = Ub ? Ze() : st(), c = et(), p = nt(), u = c - n.top, g = n.top + r.height - p; r.height > d ? n.top = u > 0 && g <= 0 ? p - r.height : g > 0 && u <= 0 ? c : u > g ? p - r.height : c : u > 0 ? n.top += u : g > 0 && (n.top -= g) } return n } function _e(e, t, i, n) { void 0 === t && (t = null); var r = Ie(e, "left", "top"); i && (r.left = i), n && (r.top = n); var o = []; Ub = t, Yb = e.ownerDocument; var s = e.getBoundingClientRect(), a = r.top, l = r.left, h = r.left + s.width, d = Xe(a, r.top + s.height), c = qe(l, h); return d.topSide && o.push("top"), c.rightSide && o.push("right"), c.leftSide && o.push("left"), d.bottomSide && o.push("bottom"), o } function Ye(e, t, i, n, r, o, s, a, l) { if (void 0 === s && (s = null), void 0 === a && (a = { X: !0, Y: !0 }), t && e && r && o && (a.X || a.Y)) { var h = { TL: null, TR: null, BL: null, BR: null }, d = { TL: null, TR: null, BL: null, BR: null }, c = e.getBoundingClientRect(), p = { posX: r, posY: o, offsetX: i, offsetY: n, position: { left: 0, top: 0 } }; Ub = s, Yb = t.ownerDocument, function (e, t, i, n, r) { i.position = Ie(e, i.posX, i.posY, n, r), t.TL = Ie(e, "left", "top", n, r), t.TR = Ie(e, "right", "top", n, r), t.BR = Ie(e, "left", "bottom", n, r), t.BL = Ie(e, "right", "bottom", n, r) }(t, h, p, l, c), Ue(d, p, c), a.X && Ge(t, d, h, p, c, !0), a.Y && h.TL.top > -1 && Qe(t, d, h, p, c, !0), function (e, t, i) { var n = 0, r = 0; if (null != e.offsetParent && ("absolute" === getComputedStyle(e.offsetParent).position || "relative" === getComputedStyle(e.offsetParent).position)) { var o = Ie(e.offsetParent, "left", "top", !1, i); n = o.left, r = o.top } e.style.top = t.position.top + t.offsetY - r + "px", e.style.left = t.position.left + t.offsetX - n + "px" }(e, p, c) } } function Ue(e, t, i) { e.TL = { top: t.position.top + t.offsetY, left: t.position.left + t.offsetX }, e.TR = { top: e.TL.top, left: e.TL.left + i.width }, e.BL = { top: e.TL.top + i.height, left: e.TL.left }, e.BR = { top: e.TL.top + i.height, left: e.TL.left + i.width } } function qe(e, t) { var i = !1, n = !1; return e - ot() < tt() && (i = !0), t > it() && (n = !0), { leftSide: i, rightSide: n } } function Ge(e, t, i, n, r, o) { var s = qe(t.TL.left, t.TR.left); i.TL.left - ot() <= tt() && (s.leftSide = !1), i.TR.left >= it() && (s.rightSide = !1), (s.leftSide && !s.rightSide || !s.leftSide && s.rightSide) && ("right" === n.posX ? n.posX = "left" : n.posX = "right", n.offsetX = n.offsetX + r.width, n.offsetX = -1 * n.offsetX, n.position = Ie(e, n.posX, n.posY, !1), Ue(t, n, r), o && Ge(e, t, i, n, r, !1)) } function Qe(e, t, i, n, r, o) { var s = Xe(t.TL.top, t.BL.top); i.TL.top - rt() <= et() && (s.topSide = !1), i.BL.top >= nt() && (s.bottomSide = !1), (s.topSide && !s.bottomSide || !s.topSide && s.bottomSide) && ("top" === n.posY ? n.posY = "bottom" : n.posY = "top", n.offsetY = n.offsetY + r.height, n.offsetY = -1 * n.offsetY, n.position = Ie(e, n.posX, n.posY, !1, r), Ue(t, n, r), o && Qe(e, t, i, n, r, !1)) } function Xe(e, t) { var i = !1, n = !1; return e - rt() < et() && (i = !0), t > nt() && (n = !0), { topSide: i, bottomSide: n } } function Je() { return Ub.getBoundingClientRect().width } function Ze() { return Ub.getBoundingClientRect().height } function Ke() { return Ub.getBoundingClientRect().left } function $e() { return Ub.getBoundingClientRect().top } function et() { return Ub ? $e() : 0 } function tt() { return Ub ? Ke() : 0 } function it() { return Ub ? ot() + Ke() + Je() : ot() + at() } function nt() { return Ub ? rt() + $e() + Ze() : rt() + st() } function rt() { return Yb.documentElement.scrollTop || Yb.body.scrollTop } function ot() { return Yb.documentElement.scrollLeft || Yb.body.scrollLeft } function st() { return window.innerHeight } function at() { var e = window.innerWidth; return e - (e - (d(document.documentElement) ? 0 : document.documentElement.offsetWidth)) } function lt(e, t) { for (var i = getComputedStyle(e), n = [], r = /(auto|scroll)/, o = e.parentElement; o && "HTML" !== o.tagName;) { var s = getComputedStyle(o); "absolute" === i.position && "static" === s.position || !r.test(s.overflow + s.overflowY + s.overflowX) || n.push(o), o = o.parentElement } return t || n.push(document), n } function ht(e) { for (var t = e.parentElement, i = []; t && "BODY" !== t.tagName;) { var n = document.defaultView.getComputedStyle(t, null).getPropertyValue("z-index"), r = document.defaultView.getComputedStyle(t, null).getPropertyValue("position"); "auto" !== n && "static" !== r && i.push(n), t = t.parentElement } for (var o = [], s = 0; s < document.body.children.length; s++)if (!e.isEqualNode(document.body.children[s])) { n = document.defaultView.getComputedStyle(document.body.children[s], null).getPropertyValue("z-index"), r = document.defaultView.getComputedStyle(document.body.children[s], null).getPropertyValue("position"); "auto" !== n && "static" !== r && o.push(n) } o.push("999"); var a = []; if (!d(e.parentElement) && "BODY" !== e.parentElement.tagName) { var l = [].slice.call(e.parentElement.children); for (s = 0; s < l.length; s++) { n = document.defaultView.getComputedStyle(l[s], null).getPropertyValue("z-index"), r = document.defaultView.getComputedStyle(l[s], null).getPropertyValue("position"); "auto" !== n && "static" !== r && a.push(n) } } var h = i.concat(o, a), c = Math.max.apply(Math, h) + 1; return c > 2147483647 ? 2147483647 : c } function dt(e) { EM = e.resizeBegin, jM = e.resizing, IM = e.resizeComplete, qb = ct(e.element), Kb = ct(e.boundary); for (var t = e.direction.split(" "), i = 0; i < t.length; i++) { var n = M("div", { className: "e-icons " + xM + " e-" + t[i] }); qb.appendChild(n) } Qb = e.minHeight, Jb = e.minWidth, Zb = e.maxWidth, Xb = e.maxHeight, function () { for (var e = qb.querySelectorAll("." + xM), t = 0; t < e.length; t++) { Gb = e[t], Kv.add(Gb, "mousedown", ut, this); var i = "msie" === uw.info.name ? "pointerdown" : "touchstart"; Kv.add(Gb, i, ft, this) } }() } function ct(e) { var t; return d(e) || (t = "string" == typeof e ? document.querySelector(e) : e), t } function pt(e) { return e.indexOf("mouse") > -1 ? "mouse" : "touch" } function ut(e) { if (e.preventDefault(), qb = e.target.parentElement, mt(), MM = e.pageX, SM = e.pageY, e.target.classList.add(TM), d(EM) || !0 !== EM(e)) { var t = d(Kb) ? document : Kb; Kv.add(t, "mousemove", yt, this), Kv.add(document, "mouseup", gt, this); for (var i = 0; i < DM.length; i++)kM = !qb.classList.contains(DM[i]) } } function gt(e) { var t = "msie" === uw.info.name ? "pointermove" : "touchmove", i = "msie" === uw.info.name ? "pointerup" : "touchend", n = d(Kb) ? document : Kb; Kv.remove(n, "mousemove", yt), Kv.remove(n, t, yt); var r = "msie" === uw.info.name ? "pointerdown" : "touchstart"; Kv.remove(n, r, yt), d(document.body.querySelector("." + TM)) || document.body.querySelector("." + TM).classList.remove(TM), d(IM) || IM(e), Kv.remove(document, "mouseup", gt), Kv.remove(document, i, gt) } function mt() { wM = parseFloat(getComputedStyle(qb, null).getPropertyValue("width").replace("px", "")), bM = parseFloat(getComputedStyle(qb, null).getPropertyValue("height").replace("px", "")), CM = qb.getBoundingClientRect().left, LM = qb.getBoundingClientRect().top } function ft(e) { if (qb = e.target.parentElement, mt(), MM = e.touches[0].pageX, SM = e.touches[0].pageY, d(EM) || !0 !== EM(e)) { var t = "msie" === uw.info.name ? "pointermove" : "touchmove", i = "msie" === uw.info.name ? "pointerup" : "touchend", n = d(Kb) ? document : Kb; Kv.add(n, t, yt, this), Kv.add(document, i, gt) } } function yt(e) { if (e.target.classList.contains(xM) && e.target.classList.contains(TM) ? Gb = e.target : d(document.body.querySelector("." + TM)) || (Gb = document.body.querySelector("." + TM)), !d(Gb)) { for (var t = "", i = 0; i < vM.length; i++)Gb.classList.contains("e-" + vM[i]) && (t = vM[i]); switch (d(jM) || jM(e), t) { case "south": wt(e); break; case "north": bt(e); break; case "west": Ct(e); break; case "east": Lt(e); break; case "south-east": wt(e), Lt(e); break; case "south-west": wt(e), Ct(e); break; case "north-east": bt(e), Lt(e); break; case "north-west": bt(e), Ct(e) } } } function vt(e) { return e.getBoundingClientRect() } function wt(e) { var t, i = document.documentElement.clientHeight, n = !1, r = "mouse" === pt(e.type) ? e.pageY : e.touches[0].pageY, o = vt(qb); d(Kb) || (t = vt(Kb)), d(Kb) ? d(Kb) && (i - r >= 0 || o.top < 0) && (n = !0) : n = !0; var s = bM + (r - SM); s = s > Qb ? s : Qb; var a = 0; d(Kb) || (a = t.top); var l = d(Kb) ? 0 : Kb.offsetHeight - Kb.clientHeight, h = o.top - a - l / 2; if (h = h < 0 ? 0 : h, o.top > 0 && h + s > Xb) { if (n = !1, qb.classList.contains(AM)) return; qb.style.height = Xb - parseInt(h.toString(), 10) + "px" } else { var c = 0; if (n) { o.top < 0 && i + (o.height + o.top) > 0 && s + (c = o.top) <= 30 && (s = o.height - (o.height + o.top) + 30), s + o.top >= Xb && (qb.style.height = o.height + (i - (o.height + o.top)) + "px"); var p = d(Kb) ? c : h; s >= Qb && s + p <= Xb && (qb.style.height = s + "px") } } } function bt(e) { var t, i = !1, n = "mouse" === pt(e.type) ? e.pageY : e.touches[0].pageY, r = vt(qb); d(Kb) || (t = vt(Kb)), !d(Kb) && r.top - t.top > 0 ? i = !0 : d(Kb) && n > 0 && (i = !0); var o = bM - (n - SM); if (vt(qb).bottom + o > Xb && (i = !1, qb.style.height = Xb - vt(qb).bottom + "px"), i && o >= Qb && o <= Xb) { var s = 0; d(Kb) || (s = t.top); var a = LM - s + (n - SM); a = a > 0 ? a : 1, qb.style.height = o + "px", qb.style.top = a + "px" } } function Ct(e) { var t, i = document.documentElement.clientWidth, n = !1; d(Kb) || (t = vt(Kb)); var r = "mouse" === pt(e.type) ? e.pageX : e.touches[0].pageX, o = vt(qb), s = d(Kb) ? 0 : Kb.offsetWidth - Kb.clientWidth, a = d(Kb) ? 0 : t.left, l = d(Kb) ? 0 : t.width; d($b) && (d(Kb) ? $b = i : ($b = o.left - a - s / 2 + o.width, $b += l - s - $b)), !d(Kb) && o.left - t.left + o.width + (t.right - o.right) - s <= Zb ? n = !0 : d(Kb) && r >= 0 && (n = !0); var h = wM - (r - MM); if (kM && (h = h > $b ? $b : h), n && h >= Jb && h <= Zb) { var c = 0; d(Kb) || (c = t.left); var p = CM - c + (r - MM); p = p > 0 ? p : 1, h !== PM && NM && (qb.style.width = h + "px"), kM && (qb.style.left = p + "px", NM = 1 !== p) } PM = h } function Lt(e) { var t, i = document.documentElement.clientWidth, n = !1; d(Kb) || (t = vt(Kb)); var r = "mouse" === pt(e.type) ? e.pageX : e.touches[0].pageX, o = vt(qb); !d(Kb) && (o.left - t.left + o.width < Zb || o.right - t.left > o.width) ? n = !0 : d(Kb) && i - r > 0 && (n = !0); var s = wM + (r - MM), a = 0; if (d(Kb) || (a = t.left), o.left - a + s > Zb) { if (n = !1, qb.classList.contains(AM)) return; qb.style.width = Zb - (o.left - a) + "px" } n && s >= Jb && s <= Zb && (qb.style.width = s + "px") } function Mt() { for (var e = qb.querySelectorAll("." + xM), t = 0; t < e.length; t++)I(e[t]) } function St(e, t) { var i, n = d(t) ? M : t, r = function (e, t) { var i = t("div", {}); i.classList.add(TS); var n = t("div", {}); return n.classList.add(DS), e.appendChild(i), i.appendChild(n), { wrap: i, inner_wrap: n } }(e.target, n); if (d(e.cssClass) || r.wrap.classList.add(e.cssClass), d(e.template) && d(uS)) { var o = d(e.type) ? function (e) { return window.getComputedStyle(e, ":after").getPropertyValue("content").replace(/['"]+/g, "") }(r.wrap) : e.type; i = function (e, t) { var i; switch (t) { case "Material": i = mS; break; case "Fabric": i = fS; break; case "Bootstrap4": i = vS; break; default: i = yS }return e = e ? parseFloat(e + "") : i, "Bootstrap" === t ? e : e / 2 }(d(e.width) ? void 0 : e.width, o), xt(o, r.wrap, i, n), d(e.label) || function (e, t, i) { var n = i("div", {}); n.classList.add(jS), n.textContent = t, e.appendChild(n) }(r.inner_wrap, e.label, n) } else { var s = d(e.template) ? uS : e.template; r.wrap.classList.add(IS), function (e, t, i) { d(i) || e.classList.add(i); e.querySelector(".e-spinner-inner").innerHTML = t }(r.wrap, s, gS) } r.wrap.classList.add(bS), r = null } function xt(e, t, i, n) { var r = t.querySelector("." + DS), o = r.querySelector("svg"); switch (d(o) || r.removeChild(o), e) { case "Material": !function (e, t, i) { var n = Dt(); pS[n] = { timeOut: 0, type: "Material", radius: t }, Et(e, n, i, CS), It(t, e, "Material", CS) }(r, i, n); break; case "Fabric": !function (e, t, i) { var n = Dt(); pS[n] = { timeOut: 0, type: "Fabric", radius: t }, At(e, n, LS, i), Ot(t, e, LS) }(r, i, n); break; case "Bootstrap": !function (e, t, i) { var n = Dt(); pS[n] = { timeOut: 0, type: "Bootstrap", radius: t }, function (e, t, i) { var n = document.createElementNS("http://www.w3.org/2000/svg", "svg"); n.setAttribute("id", t), n.setAttribute("class", MS), n.setAttribute("viewBox", "0 0 64 64"), e.insertBefore(n, e.firstChild); for (var r = 0; r <= 7; r++) { var o = document.createElementNS("http://www.w3.org/2000/svg", "circle"); o.setAttribute("class", AS + "_" + r), o.setAttribute("r", "2"), o.setAttribute("transform", "translate(32,32)"), n.appendChild(o) } }(e, n), function (e, t) { var i = e.querySelector("svg.e-spin-bootstrap"); i.style.width = i.style.height = t + "px"; for (var n = 90, r = 0; r <= 7; r++) { var o = Rt(0, 0, 24, n), s = i.querySelector("." + AS + "_" + r); s.setAttribute("cx", o.x + ""), s.setAttribute("cy", o.y + ""), n = n >= 360 ? 0 : n, n += 45 } }(e, t) }(r, i); break; case "HighContrast": !function (e, t, i) { var n = Dt(); pS[n] = { timeOut: 0, type: "HighContrast", radius: t }, At(e, n, xS, i), Ot(t, e, xS) }(r, i, n); break; case "Bootstrap4": !function (e, t, i) { var n = Dt(); pS[n] = { timeOut: 0, type: "Bootstrap4", radius: t }, Et(e, n, i, SS), It(t, e, "Bootstrap4", SS) }(r, i, n) } } function Tt(e, t) { function i(e) { n.push(e), e === o && 1 !== a || (e <= r && e > 1 && !s ? e = parseFloat((e - .2).toFixed(2)) : 1 === e ? (e = 7, e = parseFloat((e + .2).toFixed(2)), s = !0) : e < 8 && s ? 8 === (e = parseFloat((e + .2).toFixed(2))) && (s = !1) : e <= 8 && !s && (e = parseFloat((e - .2).toFixed(2))), ++a, i(e)) } var n = [], r = e, o = t, s = !1, a = 1; return i(r), n } function Dt() { for (var e = "", t = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", i = 0; i < 5; i++)e += t.charAt(Math.floor(Math.random() * t.length)); return e } function At(e, t, i, n) { var r = document.createElementNS("http://www.w3.org/2000/svg", "svg"); r.setAttribute("id", t), r.setAttribute("class", i); var o = document.createElementNS("http://www.w3.org/2000/svg", "path"); o.setAttribute("class", AS); var s = document.createElementNS("http://www.w3.org/2000/svg", "path"); s.setAttribute("class", ES), e.insertBefore(r, e.firstChild), r.appendChild(o), r.appendChild(s) } function Et(e, t, i, n) { var r = document.createElementNS("http://www.w3.org/2000/svg", "svg"); r.setAttribute("class", n), r.setAttribute("id", t); var o = document.createElementNS("http://www.w3.org/2000/svg", "path"); o.setAttribute("class", AS), e.insertBefore(r, e.firstChild), r.appendChild(o) } function jt(e) { !function (e, t, i, n, r, o, s) { function a(t) { var r = Math.max(0, Math.min((new Date).getTime() - h, n)); !function (e, t) { if (!d(t.querySelector("svg.e-spin-material")) && !d(t.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))) { var i = t.querySelector("svg.e-spin-material"), n = i.querySelector("path.e-path-circle"); n.setAttribute("stroke-dashoffset", Pt(p, u, e, o) + ""), n.setAttribute("transform", "rotate(" + g + " " + p / 2 + " " + p / 2 + ")") } }(i(r, e, c, n), t.container), l === t.globalInfo[t.uniqueID].previousId && r < n ? pS[t.uniqueID].timeOut = setTimeout(a.bind(null, t), 1) : jt(t) } var l = ++s.globalInfo[s.uniqueID].previousId, h = (new Date).getTime(), c = t - e, p = function (e) { return parseFloat(e) }(2 * s.globalInfo[s.uniqueID].radius + ""), u = kt(p), g = -90 * (s.globalInfo[s.uniqueID].count || 0); a(s) }(1, 149, Nt, 1333, e.globalInfo[e.uniqueID].count, 75, e), e.globalInfo[e.uniqueID].count = ++e.globalInfo[e.uniqueID].count % 4 } function It(e, t, i, n) { var r = 2 * e, o = t.querySelector("svg." + n), s = o.querySelector("path.e-path-circle"), a = kt(r), l = r / 2 + "px"; o.setAttribute("viewBox", "0 0 " + r + " " + r), o.style.width = o.style.height = r + "px", o.style.transformOrigin = l + " " + l + " " + l, s.setAttribute("d", function (e, t) { var i = e / 2, n = t / 2; return "M" + i + "," + n + "A" + (i - n) + "," + (i - n) + " 0 1 1 " + n + "," + i }(r, a)), "Material" === i && (s.setAttribute("stroke-width", a + ""), s.setAttribute("stroke-dasharray", (r - a) * Math.PI * .75 + ""), s.setAttribute("stroke-dashoffset", Pt(r, a, 1, 75) + "")) } function kt(e) { return .1 * e } function Pt(e, t, i, n) { return (e - t) * Math.PI * (3 * n / 100 - i / 100) } function Nt(e, t, i, n) { var r = (e /= n) * e, o = r * e; return t + i * (6 * o * r + -15 * r * r + 10 * o) } function Ot(e, t, i) { var n = e, r = e, o = 2 * e, s = t.querySelector("." + i), a = s.querySelector(".e-path-circle"), l = s.querySelector(".e-path-arc"), h = o / 2 + "px"; a.setAttribute("d", function (e, t, i) { return ["M", e, t, "m", -i, 0, "a", i, i, 0, 1, 0, 2 * i, 0, "a", i, i, 0, 1, 0, 2 * -i, 0].join(" ") }(n, r, e)), l.setAttribute("d", function (e, t, i, n, r) { var o = Rt(e, t, i, r), s = Rt(e, t, i, n); return ["M", o.x, o.y, "A", i, i, 0, 0, 0, s.x, s.y].join(" ") }(n, r, e, 315, 45)), s.setAttribute("viewBox", "0 0 " + o + " " + o), s.style.transformOrigin = h + " " + h + " " + h, s.style.width = s.style.height = o + "px" } function Rt(e, t, i, n) { var r = (n - 90) * Math.PI / 180; return { x: e + i * Math.cos(r), y: t + i * Math.sin(r) } } function zt(e) { Bt(e, !1), e = null } function Bt(e, t) { var i = e.classList.contains(TS) ? e : e.querySelector("." + TS), n = i.querySelector("." + DS); if (t ? !i.classList.contains(IS) && !i.classList.contains(bS) : !i.classList.contains(IS) && !i.classList.contains(wS)) { var r = i.querySelector("svg"); if (d(r)) return; var o = r.getAttribute("id"); switch (pS[o].isAnimate = !t, pS[o].type) { case "Material": t ? clearTimeout(pS[o].timeOut) : function (e, t, i) { var n = {}; pS[t].timeOut = 0, n[t] = function (e, t, i, n) { return { radius: t, count: i, previousId: n } }(0, i, 0, 0), jt({ uniqueID: t, container: e, globalInfo: n, timeOutVar: 0 }) }(n, o, pS[o].radius); break; case "Bootstrap": t ? clearTimeout(pS[o].timeOut) : function (e) { for (var t = e.querySelector("svg.e-spin-bootstrap").getAttribute("id"), i = 1; i <= 8; i++)!function (e, t, i, n, r) { function o(t) { pS[r].isAnimate && (++s, e.setAttribute("r", t + ""), s >= n.length && (s = 0), pS[r].timeOut = setTimeout(o.bind(null, n[s]), 18)) } var s = 0; o(t) }(e.getElementsByClassName("e-path-circle_" + (8 === i ? 0 : i))[0], i, 0, Tt(i, i), t) }(n) } } t ? B(i, [bS], [wS]) : B(i, [wS], [bS]), e = null } function Ft(e) { Bt(e, !0), e = null } function Vt() { if (P(this.element, { role: "textbox", autocomplete: "off", autocorrect: "off", autocapitalize: "off", spellcheck: "false", "aria-live": "assertive", "aria-valuenow": "" }), this.mask) { for (var e = this.mask.split("]"), t = 0; t < e.length; t++)if ("\\" === e[t][e[t].length - 1]) { e[t] = e[t] + "]"; for (var i = e[t].split("["), n = 0; n < i.length; n++)"\\" === i[n][i[n].length - 1] && (i[n] = i[n] + "["), Xt.call(this, i[n]) } else { if ((i = e[t].split("[")).length > 1) { var r = !1; for (n = 0; n < i.length; n++)"\\" === i[n] ? (this.customRegExpCollec.push("["), this.hiddenMask += i[n] + "[") : "" === i[n] ? r = !0 : "" !== i[n] && r || n === i.length - 1 ? (this.customRegExpCollec.push("[" + i[n] + "]"), this.hiddenMask += this.promptChar, r = !1) : Xt.call(this, i[n]) } else Xt.call(this, i[0]) } if (this.escapeMaskValue = this.hiddenMask, this.promptMask = this.hiddenMask.replace(/[09?LCAa#&]/g, this.promptChar), !d(this.customCharacters)) for (t = 0; t < this.promptMask.length; t++)d(this.customCharacters[this.promptMask[t]]) || (this.promptMask = this.promptMask.replace(new RegExp(this.promptMask[t], "g"), this.promptChar)); var o = 0; if (this.hiddenMask.match(new RegExp(/\\/))) for (t = 0; t < this.hiddenMask.length; t++) { n = 0; t >= 1 && (n = t), n -= o = this.hiddenMask.length - this.promptMask.length, t > 0 && "\\" !== this.hiddenMask[t - 1] && (">" === this.hiddenMask[t] || "<" === this.hiddenMask[t] || "|" === this.hiddenMask[t]) && (this.promptMask = this.promptMask.substring(0, n) + this.promptMask.substring(t + 1 - o, this.promptMask.length), this.escapeMaskValue = this.escapeMaskValue.substring(0, n) + this.escapeMaskValue.substring(t + 1 - o, this.escapeMaskValue.length)), "\\" === this.hiddenMask[t] && (this.promptMask = this.promptMask.substring(0, n) + this.hiddenMask[t + 1] + this.promptMask.substring(t + 2 - o, this.promptMask.length), this.escapeMaskValue = this.escapeMaskValue.substring(0, n) + this.escapeMaskValue[t + 1] + this.escapeMaskValue.substring(t + 2 - o, this.escapeMaskValue.length)) } else this.promptMask = this.promptMask.replace(/[>|<]/g, ""), this.escapeMaskValue = this.hiddenMask.replace(/[>|<]/g, ""); P(this.element, { "aria-invalid": "false" }) } } function Wt() { mi.call(this, this.promptMask), gi.call(this, this.value) } function Ht() { Kv.add(this.element, "keydown", ii, this), Kv.add(this.element, "keypress", si, this), Kv.add(this.element, "keyup", li, this), Kv.add(this.element, "input", ti, this), Kv.add(this.element, "focus", Jt, this), Kv.add(this.element, "blur", Zt, this), Kv.add(this.element, "paste", Kt, this), Kv.add(this.element, "cut", $t, this), Kv.add(this.element, "drop", ei, this), this.enabled && (Yt.call(this), this.formElement && Kv.add(this.formElement, "reset", qt, this)) } function _t() { Kv.remove(this.element, "keydown", ii), Kv.remove(this.element, "keypress", si), Kv.remove(this.element, "keyup", li), Kv.remove(this.element, "input", ti), Kv.remove(this.element, "focus", Jt), Kv.remove(this.element, "blur", Zt), Kv.remove(this.element, "paste", Kt), Kv.remove(this.element, "cut", $t), this.formElement && Kv.remove(this.formElement, "reset", qt) } function Yt() { this.showClearButton && Kv.add(this.inputObj.clearButton, "mousedown touchstart", Ut, this) } function Ut(e) { e.preventDefault(), this.inputObj.clearButton.classList.contains("e-clear-icon-hide") || (function (e) { var t = this.element.value; mi.call(this, this.promptMask), this.redoCollec.unshift({ value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }), ai.call(this, e, t), this.element.setSelectionRange(0, 0) }.call(this, e), this.value = "") } function qt() { "EJS-MASKEDTEXTBOX" === this.element.tagName ? mi.call(this, this.promptMask) : this.value = this.initInputValue } function Gt(e) { return e.value } function Qt(e, t) { var i = "", n = 0, r = !1, o = d(t) ? d(e) || d(this) ? t : e.value : t; if (o !== this.promptMask) for (var s = 0; s < this.customRegExpCollec.length; s++)r && (r = !1), ">" !== this.customRegExpCollec[n] && "<" !== this.customRegExpCollec[n] && "|" !== this.customRegExpCollec[n] && "\\" !== this.customRegExpCollec[n] || (--s, r = !0), r || o[s] === this.promptChar || d(this.customRegExpCollec[n]) || d(this.regExpCollec[this.customRegExpCollec[n]]) && !(this.customRegExpCollec[n].length > 2 && "[" === this.customRegExpCollec[n][0] && "]" === this.customRegExpCollec[n][this.customRegExpCollec[n].length - 1]) && (d(this.customCharacters) || d(this.customCharacters[this.customRegExpCollec[n]])) || "" === o || (i += o[s]), ++n; return (null === this.mask || "" === this.mask && void 0 !== this.value) && (i = o), i } function Xt(e) { for (var t = 0; t < e.length; t++)this.hiddenMask += e[t], "\\" !== e[t] && this.customRegExpCollec.push(e[t]) } function Jt(e) { var t = this, i = { selectionStart: 0, event: e, value: this.value, maskedValue: this.element.value, container: this.inputObj.container, selectionEnd: this.promptMask.length > 0 ? this.promptMask.length : this.element.value.length }; this.trigger("focus", i, function (e) { if (t.mask) if (t.isFocus = !0, "" === t.element.value ? mi.call(t, t.promptMask) : mi.call(t, t.element.value), uw.isDevice || "11.0" !== uw.info.version) { var i = uw.isDevice && uw.isIos ? 450 : 0; setTimeout(function () { t.element.setSelectionRange(e.selectionStart, e.selectionEnd) }, i) } else t.element.setSelectionRange(e.selectionStart, e.selectionEnd) }) } function Zt(e) { if (this.blurEventArgs = { event: e, value: this.value, maskedValue: this.element.value, container: this.inputObj.container }, this.trigger("blur", this.blurEventArgs), this.mask && (this.isFocus = !1, this.placeholder && this.element.value === this.promptMask && "Always" !== this.floatLabelType)) { mi.call(this, ""); var t = this.element.parentNode.querySelector(".e-float-text"); "Auto" === this.floatLabelType && !d(t) && t.classList.contains(qS) && x([t], qS) } } function Kt(e) { var t = this; if (this.mask && !this.readonly) { var i = this.element.selectionStart, n = this.element.selectionEnd, r = this.element.value; mi.call(this, ""), this._callPasteHandler = !0, setTimeout(function () { var o = t.element.value.replace(/ /g, ""); t.redoCollec.length > 0 && t.redoCollec[0].value === t.element.value && (o = Qt.call(t, t.element)), mi.call(t, r), t.element.selectionStart = i, t.element.selectionEnd = n; var s = 0; t.maskKeyPress = !0; do { di.call(t, o[s], !1, null), ++s } while (s < o.length); if (t.maskKeyPress = !1, t._callPasteHandler = !1, t.element.value === r) { var a = 0; t.maskKeyPress = !0; do { di.call(t, o[a], !1, null), ++a } while (a < o.length); t.maskKeyPress = !1 } else ai.call(t, e, r) }, 1) } } function $t(e) { var t = this; if (this.mask && !this.readonly) { var i = this.element.value, n = this.element.selectionStart, r = this.element.selectionEnd; this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }); var o = this.element.value.substring(0, n) + this.promptMask.substring(n, r) + this.element.value.substring(r); setTimeout(function () { mi.call(t, o), t.element.selectionStart = t.element.selectionEnd = n, t.element.value !== i && ai.call(t, e, null) }, 0) } } function ei(e) { e.preventDefault() } function ti(e) { if (!0 !== uw.isIE || "" !== this.element.value || "Never" !== this.floatLabelType) { if (h(e, { ctrlKey: !1, keyCode: 229 }), this.mask) { if ("" === this.element.value && this.redoCollec.unshift({ value: this.promptMask, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }), 1 === this.element.value.length && (this.element.value = this.element.value + this.promptMask, this.element.setSelectionRange(1, 1)), this._callPasteHandler || oi.call(this, e), this.element.value.length > this.promptMask.length) { var t = this.element.selectionStart, i = this.element.value.length - this.promptMask.length, n = this.element.value.substring(t - i, t); this.maskKeyPress = !1; var r = 0; do { di.call(this, n[r], e.ctrlKey, e), ++r } while (r < n.length); this.element.value !== this.preEleVal && ai.call(this, e, null) } var o = Qt.call(this, this.element); this.prevValue = o, this.value = o, "" === o && (mi.call(this, this.promptMask), this.element.setSelectionRange(0, 0)) } } } function ii(e) { if (this.mask && !this.readonly) { 229 !== e.keyCode && (!e.ctrlKey || 89 !== e.keyCode && 90 !== e.keyCode || e.preventDefault(), oi.call(this, e)); var t = this.element.value; if (e.ctrlKey && (89 === e.keyCode || 90 === e.keyCode)) { var i = void 0; 90 === e.keyCode && this.undoCollec.length > 0 && t !== this.undoCollec[this.undoCollec.length - 1].value ? (i = this.undoCollec[this.undoCollec.length - 1], this.redoCollec.unshift({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }), mi.call(this, i.value), this.element.selectionStart = i.startIndex, this.element.selectionEnd = i.endIndex, this.undoCollec.splice(this.undoCollec.length - 1, 1)) : 89 === e.keyCode && this.redoCollec.length > 0 && t !== this.redoCollec[0].value && (i = this.redoCollec[0], this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }), mi.call(this, i.value), this.element.selectionStart = i.startIndex, this.element.selectionEnd = i.endIndex, this.redoCollec.splice(0, 1)) } } } function ni() { var e, t = this.element.selectionStart, i = this.element.selectionEnd; this.redoCollec.length > 0 ? (e = this.redoCollec[0], mi.call(this, e.value), e.startIndex - t == 1 ? (this.element.selectionStart = e.startIndex, this.element.selectionEnd = e.endIndex) : (this.element.selectionStart = t + 1, this.element.selectionEnd = i + 1)) : (mi.call(this, this.promptMask), this.element.selectionStart = this.element.selectionEnd = t) } function ri(e, t, i) { return "input" === i.type && (e = !1, t = this.element.value, mi.call(this, this.promptMask), gi.call(this, t)), e } function oi(e) { var t, i = !1, n = !1; this.element.value.length < this.promptMask.length && (i = !0, t = this.element.value, i = ri.call(this, i, t, e), ni.call(this)), this.element.value.length >= this.promptMask.length && "input" === e.type && (i = ri.call(this, i, t, e)); var r = this.element.selectionStart, o = this.element.selectionEnd, s = this.element.selectionStart, a = this.element.selectionEnd, l = this.hiddenMask.replace(/[>|\\<]/g, ""), h = l[s - 1]; this.element.parentNode; if (i || 8 === e.keyCode || 46 === e.keyCode) { this.undoCollec.push({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: a }); var c = !1, p = this.element.value; if (s > 0 || (8 === e.keyCode || 46 === e.keyCode) && s < this.element.value.length && this.element.selectionEnd - s !== this.element.value.length) { var u = s; s !== a ? (s = a, 46 === e.keyCode && (c = !0)) : 46 === e.keyCode ? ++u : --u; for (var g = s; 8 === e.keyCode || i || c ? g > u : g < u; 8 === e.keyCode || i || c ? g-- : g++)for (var m = s; 8 === e.keyCode || i || c ? m > 0 : m < this.element.value.length; 8 === e.keyCode || i || c ? m-- : m++) { var f = void 0; (8 === e.keyCode || c) && (r !== o && r !== s || r === o) || i ? (h = l[m - 1], f = s - 1) : (h = l[m], f = s, ++s); var y = this.element.value[f]; if (d(this.regExpCollec[h]) && !d(this.customCharacters) && d(this.customCharacters[h]) && this.hiddenMask[f] !== this.promptChar && "[" !== this.customRegExpCollec[f][0] && "]" !== this.customRegExpCollec[f][this.customRegExpCollec[f].length - 1] || this.promptMask[f] !== this.promptChar && d(this.customCharacters)) this.element.selectionStart = this.element.selectionEnd = f, e.preventDefault(), 46 !== e.keyCode || c || ++this.element.selectionStart; else { var v = this.element.value, w = this.promptChar, b = v.substring(0, f) + w + v.substring(s, v.length); mi.call(this, b), e.preventDefault(), this.element.selectionStart = this.element.selectionEnd = f, n = !0 } if (s = this.element.selectionStart, !n && 8 === e.keyCode || c || !n && 46 !== e.keyCode ? f = s - 1 : (f = s, n = !1), y = this.element.value[f], r !== o && this.element.selectionStart === r || this.promptMask[f] === this.promptChar || y !== this.promptMask[f] && this.promptMask[f] !== this.promptChar && !d(this.customCharacters)) break } } 0 === this.element.selectionStart && this.element.selectionEnd === this.element.value.length && (mi.call(this, this.promptMask), e.preventDefault(), this.element.selectionStart = this.element.selectionEnd = s), this.redoCollec.unshift({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }), this.element.value !== p && ai.call(this, e, t) } } function si(e) { if (this.mask && !this.readonly) { var t = this.element.value; if (!e.ctrlKey || e.ctrlKey && "KeyA" !== e.code && "KeyY" !== e.code && "KeyZ" !== e.code && "KeyX" !== e.code && "KeyC" !== e.code && "KeyV" !== e.code) { this.maskKeyPress = !0; var i = e.key; "Spacebar" === i && (i = String.fromCharCode(e.keyCode)), i ? i && 1 === i.length && (di.call(this, i, e.ctrlKey, e), e.preventDefault()) : (this.isIosInvalid = !0, di.call(this, String.fromCharCode(e.keyCode), e.ctrlKey, e), e.preventDefault(), this.isIosInvalid = !1), 32 === e.keyCode && " " === i && " " === this.promptChar && (this.element.selectionStart = this.element.selectionEnd = this.element.selectionStart - i.length) } this.element.value !== t && ai.call(this, e, t) } } function ai(e, t) { var i = this.isProtectedOnChange; if (!d(this.changeEventArgs) && !this.isInitial) { var n = {}; this.changeEventArgs = { value: this.element.value, maskedValue: this.element.value, isInteraction: !1, isInteracted: !1 }, this.mask && (this.changeEventArgs.value = Qt.call(this, this.element)), d(e) || (this.changeEventArgs.isInteracted = !0, this.changeEventArgs.isInteraction = !0, this.changeEventArgs.event = e), this.isProtectedOnChange = !0, this.value = this.changeEventArgs.value, this.isProtectedOnChange = i, l(n, this.changeEventArgs), this.trigger("change", n) } this.preEleVal = this.element.value, this.prevValue = Qt.call(this, this.element), P(this.element, { "aria-valuenow": this.element.value }) } function li(e) { if (this.mask && !this.readonly) { var t = void 0; if (this.maskKeyPress || 229 !== e.keyCode) ui.call(this); else { var i = void 0; if (1 === this.element.value.length && (this.element.value = this.element.value + this.promptMask, this.element.setSelectionRange(1, 1)), this.element.value.length > this.promptMask.length) { var n = this.element.selectionStart, r = this.element.value.length - this.promptMask.length, o = this.element.value.substring(n - r, n); if (this.undoCollec.length > 0) { t = this.undoCollec[this.undoCollec.length - 1]; var s = this.element.selectionStart; i = t.value; var a = t.value.substring(s - r, s); t = this.redoCollec[0], o = o.trim(); var l = uw.isAndroid && "" === o; l || a === o || t.value.substring(s - r, s) === o ? l && ci.call(this, e, s - 1, this.element.selectionEnd - 1, o, e.ctrlKey, !1) : di.call(this, o, e.ctrlKey, e) } else i = this.promptMask, di.call(this, o, e.ctrlKey, e); this.maskKeyPress = !1, ai.call(this, e, i) } } var h = Qt.call(this, this.element); (0 !== this.element.selectionStart || this.promptMask !== this.element.value || "" !== h || "" === h && this.value !== h) && (this.prevValue = h, this.value = h) } else ai.call(this, e); if (0 === this.element.selectionStart && 0 === this.element.selectionEnd) { var d = this.element; setTimeout(function () { d.setSelectionRange(0, 0) }, 0) } } function hi(e) { this.maskKeyPress || function (e) { if (e.length > 1 && this.promptMask.length + e.length < this.element.value.length) { var t = this.redoCollec[0].value.substring(0, this.redoCollec[0].startIndex) + e + this.redoCollec[0].value.substring(this.redoCollec[0].startIndex, this.redoCollec[0].value.length); mi.call(this, t), this.element.selectionStart = this.element.selectionEnd = this.redoCollec[0].startIndex + e.length } this.element.selectionStart = this.element.selectionStart - e.length, this.element.selectionEnd = this.element.selectionEnd - e.length }.call(this, e) } function di(e, t, i) { if (hi.call(this, e), !d(this) && !d(e)) for (var n, r, o = this.element.selectionStart, s = o, a = (this.element.selectionEnd, !1), l = this.element.value, h = !1, c = !1, p = 0; p < e.length; p++) { var u = e[p]; if (o = this.element.selectionStart, this.element.selectionEnd, this.maskKeyPress || s !== o || (o += p), !this.maskKeyPress || o < this.promptMask.length) { for (var g = o; g < this.promptMask.length; g++) { n = this.escapeMaskValue[o], "\\" === this.hiddenMask[o] && this.hiddenMask[o + 1] === e && (c = !0), (d(this.regExpCollec[n]) && (d(this.customCharacters) || !d(this.customCharacters) && d(this.customCharacters[n])) && this.hiddenMask[o] !== this.promptChar && "[" !== this.customRegExpCollec[o][0] && "]" !== this.customRegExpCollec[o][this.customRegExpCollec[o].length - 1] || this.promptMask[o] !== this.promptChar && d(this.customCharacters) || this.promptChar === n && this.escapeMaskValue === this.mask) && (this.element.selectionStart = this.element.selectionEnd = o + 1, o = this.element.selectionStart, n = this.hiddenMask[o]) } if (d(this.customCharacters) || d(this.customCharacters[n])) !d(this.regExpCollec[n]) && u.match(new RegExp(this.regExpCollec[n])) && this.promptMask[o] === this.promptChar ? a = !0 : this.promptMask[o] === this.promptChar && "[" === this.customRegExpCollec[o][0] && "]" === this.customRegExpCollec[o][this.customRegExpCollec[o].length - 1] && u.match(new RegExp(this.customRegExpCollec[o])) && (a = !0); else { var m = this.customCharacters[n].split(","); for (g = 0; g < m.length; g++)if (u.match(new RegExp("[" + m[g] + "]"))) { a = !0; break } } if ((!this.maskKeyPress || o < this.hiddenMask.length) && a) { if (0 === p) if (this.maskKeyPress) this.undoCollec.push({ value: l, startIndex: o, endIndex: o }); else { var f = this.element.selectionStart, y = this.element.selectionEnd; this.redoCollec.length > 0 ? (r = this.redoCollec[0].value, mi.call(this, r), this.undoCollec.push(this.redoCollec[0])) : (this.undoCollec.push({ value: this.promptMask, startIndex: o, endIndex: o }), r = this.promptMask, mi.call(this, r)), this.element.selectionStart = f, this.element.selectionEnd = y } o = this.element.selectionStart, function (e, t, i, n, r) { this.hiddenMask.length > this.promptMask.length && (i = function (e, t) { var i, n, r = t, o = 0; for (n = 0; n < this.hiddenMask.length; n++)if ("\\" === this.hiddenMask[n] && (i = r.substring(0, n) + "\\" + r.substring(n, r.length)), ">" !== this.hiddenMask[n] && "<" !== this.hiddenMask[n] && "|" !== this.hiddenMask[n] || (this.hiddenMask[n] !== r[n] && (i = r.substring(0, n) + this.hiddenMask[n] + r.substring(n, r.length)), ++o), i) { if (i[n] === this.promptChar && n > this.element.selectionStart || this.element.value.indexOf(this.promptChar) < 0 && this.element.selectionStart + o === n) { o = 0; break } r = i } for (; n >= 0 && i;) { if (0 === n || "\\" !== i[n - 1]) { this.element.value; if (">" === i[n]) { e = e.toUpperCase(); break } if ("<" === i[n]) { e = e.toLowerCase(); break } if ("|" === i[n]) break } --n } return e }.call(this, i, this.element.value)); if (!r) { var o = this.element.value, s = o.substring(0, t) + i + o.substring(t + 1, o.length); mi.call(this, s), this.element.selectionStart = this.element.selectionEnd = t + 1 } }.call(this, i, o, u, r, c), h = !0, p === e.length - 1 && this.redoCollec.unshift({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }), a = !1 } else o = this.element.selectionStart, ci.call(this, i, o, s, e, t, h); p !== e.length - 1 || a || (!uw.isAndroid || uw.isAndroid && o < this.promptMask.length) && this.redoCollec.unshift({ value: this.element.value, startIndex: this.element.selectionStart, endIndex: this.element.selectionEnd }) } else 1 !== e.length || t || d(i) || pi.call(this) } } function ci(e, t, i, n, r, o) { if (!this.maskKeyPress) { var s = this.element.value; t >= this.promptMask.length ? mi.call(this, s.substring(0, t)) : (i === t ? mi.call(this, s.substring(0, t) + s.substring(t + 1, s.length)) : this.promptMask.length === this.element.value.length ? mi.call(this, s.substring(0, t) + s.substring(t, s.length)) : mi.call(this, s.substring(0, i) + s.substring(i + 1, s.length)), this.element.selectionStart = this.element.selectionEnd = o || this.element.value[i] !== this.promptChar ? t : i), this.element.value, pi.call(this) } 1 !== n.length || r || d(e) || pi.call(this) } function pi() { var e = this, t = this.element.parentNode, i = 200; t.classList.contains(_S) || t.classList.contains(YS) ? S([t], HS) : S([this.element], HS), !0 === this.isIosInvalid && (i = 400), P(this.element, { "aria-invalid": "true" }), setTimeout(function () { e.maskKeyPress || ui.call(e) }, i) } function ui() { var e = this.element.parentNode; d(e) || x([e], HS), x([this.element], HS), P(this.element, { "aria-invalid": "false" }) } function gi(e) { if (this.mask && void 0 !== e && (void 0 === this.prevValue || this.prevValue !== e)) { if (this.maskKeyPress = !0, mi.call(this, this.promptMask), "" === e || null === e && "Never" === this.floatLabelType && this.placeholder || (this.element.selectionStart = 0, this.element.selectionEnd = 0), null !== e) for (var t = 0; t < e.length; t++)di.call(this, e[t], !1, null); var i = Qt.call(this, this.element); this.prevValue = i, this.value = i, ai.call(this, null, null), this.maskKeyPress = !1; var n = this.element.parentNode.querySelector(".e-float-text"); this.element.value === this.promptMask && "Auto" === this.floatLabelType && this.placeholder && !d(n) && n.classList.contains(qS) && !this.isFocus && (x([n], qS), S([n], GS), mi.call(this, "")) } (null === this.mask || "" === this.mask && void 0 !== this.value) && mi.call(this, this.value) } function mi(e, t) { !this.isFocus && "Auto" === this.floatLabelType && this.placeholder && d(this.value) && (e = ""); var i = Qt.call(this, t || this.element, e); null === i || "" === i ? (eS.setValue(e, t || this.element, this.floatLabelType, !1), this.showClearButton && this.inputObj.clearButton.classList.add("e-clear-icon-hide")) : eS.setValue(e, t || this.element, this.floatLabelType, this.showClearButton) } function fi(e) { S([e.element], US); var t = { element: e.element, mask: e.mask, promptMask: "", hiddenMask: "", escapeMaskValue: "", promptChar: e.promptChar ? e.promptChar.length > 1 ? e.promptChar = e.promptChar[0] : e.promptChar : "_", value: e.value ? e.value : null, regExpCollec: QS, customRegExpCollec: [], customCharacters: e.customCharacters, undoCollec: [], redoCollec: [], maskKeyPress: !1, prevValue: "" }; return Vt.call(t), t } function yi(e) { var t; return !d(e) && e.element.classList.contains(US) && (t = fi(e)), t } function vi(e, t) { for (var i = h({}, e), n = 0, r = Object.keys(i); n < r.length; n++) { var s = r[n]; t.indexOf(s) < 0 && o(i, s) } return i } function wi(e, t) { var i = {}; if (d(e) || "string" == typeof e || "number" == typeof e || !d(e.isHeader)) return e; for (var r = 0, o = Object.keys(t); r < o.length; r++) { var s = t[o[r]], a = d(s) || "string" != typeof s ? void 0 : n(s, e); d(a) || (i[s] = a) } return i } function bi(e, t, i, n) { var r = []; if (t || (t = e), i && i.length ? i.forEach(function (t) { r.push(e.children[t]) }) : r = [].slice.call(e.children), d(n)) r.forEach(function (e) { t.appendChild(e) }); else { var o = t.children[n]; r.forEach(function (e) { t.insertBefore(e, o) }) } } function Ci(e) { var t; switch (e) { case "Fabric": t = ["#4472c4", "#ed7d31", "#ffc000", "#70ad47", "#5b9bd5", "#c1c1c1", "#6f6fe2", "#e269ae", "#9e480e", "#997300"]; break; case "Bootstrap4": case "Bootstrap": t = ["#a16ee5", "#f7ce69", "#55a5c2", "#7ddf1e", "#ff6ea6", "#7953ac", "#b99b4f", "#407c92", "#5ea716", "#b91c52"]; break; case "HighContrastLight": case "Highcontrast": case "HighContrast": t = ["#79ECE4", "#E98272", "#DFE6B6", "#C6E773", "#BA98FF", "#FA83C3", "#00C27A", "#43ACEF", "#D681EF", "#D8BC6E"]; break; case "MaterialDark": t = ["#00bdae", "#404041", "#357cd2", "#e56590", "#f8b883", "#70ad47", "#dd8abd", "#7f84e8", "#7bb4eb", "#ea7a57"]; break; case "FabricDark": t = ["#4472c4", "#ed7d31", "#ffc000", "#70ad47", "#5b9bd5", "#c1c1c1", "#6f6fe2", "#e269ae", "#9e480e", "#997300"]; break; case "BootstrapDark": t = ["#a16ee5", "#f7ce69", "#55a5c2", "#7ddf1e", "#ff6ea6", "#7953ac", "#b99b4f", "#407c92", "#5ea716", "#b91c52"]; break; default: t = ["#00bdae", "#404041", "#357cd2", "#e56590", "#f8b883", "#70ad47", "#dd8abd", "#7f84e8", "#7bb4eb", "#ea7a57"] }return t } function Li(e) { var t; switch (e) { case "HighContrastLight": case "Highcontrast": case "HighContrast": t = { axisLabel: "#ffffff", axisTitle: "#ffffff", axisLine: "#ffffff", majorGridLine: "#BFBFBF", minorGridLine: "#969696", majorTickLine: "#BFBFBF", minorTickLine: "#969696", chartTitle: "#ffffff", legendLabel: "#ffffff", background: "#000000", areaBorder: "#ffffff", errorBar: "#ffffff", crosshairLine: "#ffffff", crosshairFill: "#ffffff", crosshairLabel: "#000000", tooltipFill: "#ffffff", tooltipBoldLabel: "#000000", tooltipLightLabel: "#000000", tooltipHeaderLine: "#969696", markerShadow: "#BFBFBF", selectionRectFill: "rgba(255, 217, 57, 0.3)", selectionRectStroke: "#ffffff", selectionCircleStroke: "#FFD939" }; break; case "MaterialDark": case "FabricDark": case "BootstrapDark": t = { axisLabel: "#DADADA", axisTitle: "#ffffff", axisLine: " #6F6C6C", majorGridLine: "#414040", minorGridLine: "#514F4F", majorTickLine: "#414040", minorTickLine: " #4A4848", chartTitle: "#ffffff", legendLabel: "#DADADA", background: "MaterialDark" === e ? "#303030" : "FabricDark" === e ? "#201F1F" : "1A1A1A", areaBorder: " #9A9A9A", errorBar: "#ffffff", crosshairLine: "#F4F4F4", crosshairFill: "#F4F4F4", crosshairLabel: "#282727", tooltipFill: "#F4F4F4", tooltipBoldLabel: "#282727", tooltipLightLabel: "#333232", tooltipHeaderLine: "#9A9A9A", markerShadow: null, selectionRectFill: "rgba(56,169,255, 0.1)", selectionRectStroke: "#38A9FF", selectionCircleStroke: "#282727" }; break; case "Bootstrap4": t = { axisLabel: "#212529", axisTitle: "#ffffff", axisLine: "#CED4DA", majorGridLine: "#CED4DA", minorGridLine: "#DEE2E6", majorTickLine: "#ADB5BD", minorTickLine: "#CED4DA", chartTitle: "#212529", legendLabel: "#212529", background: "#FFFFFF", areaBorder: "#DEE2E6", errorBar: "#000000", crosshairLine: "#6C757D", crosshairFill: "#495057", crosshairLabel: "#FFFFFF", tooltipFill: "rgba(0, 0, 0, 0.9)", tooltipBoldLabel: "rgba(255,255,255)", tooltipLightLabel: "rgba(255,255,255, 0.9)", tooltipHeaderLine: "rgba(255,255,255, 0.2)", markerShadow: null, selectionRectFill: "rgba(255,255,255, 0.1)", selectionRectStroke: "rgba(0, 123, 255)", selectionCircleStroke: "#495057" }; break; default: t = { axisLabel: "#686868", axisTitle: "#424242", axisLine: "#b5b5b5", majorGridLine: "#dbdbdb", minorGridLine: "#eaeaea", majorTickLine: "#b5b5b5", minorTickLine: "#d6d6d6", chartTitle: "#424242", legendLabel: "#353535", background: "#FFFFFF", areaBorder: "Gray", errorBar: "#000000", crosshairLine: "#4f4f4f", crosshairFill: "#4f4f4f", crosshairLabel: "#e5e5e5", tooltipFill: "rgba(0, 8, 22, 0.75)", tooltipBoldLabel: "#ffffff", tooltipLightLabel: "#dbdbdb", tooltipHeaderLine: "#ffffff", markerShadow: null, selectionRectFill: "rgba(41, 171, 226, 0.1)", selectionRectStroke: "#29abe2", selectionCircleStroke: "#29abe2" } }return t } function Mi(e) { var t; switch (e) { case "HighContrastLight": t = { backRect: "#333", thumb: "#bfbfbf", circle: "#fff", circleHover: "#685708", arrow: "#333", grip: "#333", arrowHover: "#fff", backRectBorder: "#969696" }; break; case "Bootstrap": t = { backRect: "#f5f5f5", thumb: "#e6e6e6", circle: "#fff", circleHover: "#eee", arrow: "#8c8c8c", grip: "#8c8c8c" }; break; case "Fabric": t = { backRect: "#f8f8f8", thumb: "#eaeaea", circle: "#fff", circleHover: "#eaeaea", arrow: "#a6a6a6", grip: "#a6a6a6" }; break; default: t = { backRect: "#f5f5f5", thumb: "#e0e0e0", circle: "#fff", circleHover: "#eee", arrow: "#9e9e9e", grip: "#9e9e9e" } }return t } function Si(e) { var t; switch (e) { case "Highcontrast": case "HighContrast": t = { tooltipFill: "#ffffff", tooltipBoldLabel: "#000000", tooltipLightLabel: "#000000", tooltipHeaderLine: "#969696" }; break; case "MaterialDark": case "FabricDark": case "BootstrapDark": t = { tooltipFill: "#F4F4F4", tooltipBoldLabel: "#282727", tooltipLightLabel: "#333232", tooltipHeaderLine: "#9A9A9A" }; break; case "Bootstrap4": t = { tooltipFill: "rgba(0, 0, 0, 0.9)", tooltipBoldLabel: "rgba(255, 255, 255)", tooltipLightLabel: "rgba(255, 255, 255, 0.9)", tooltipHeaderLine: "rgba(255, 255, 255, 0.2)" }; break; default: t = { tooltipFill: "rgba(0, 8, 22, 0.75)", tooltipBoldLabel: "#ffffff", tooltipLightLabel: "#dbdbdb", tooltipHeaderLine: "#ffffff" } }return t } function xi(e, t) { var i = e || "", n = document.getElementById("chartmeasuretext"); if (null === n && (n = M("text", { id: "chartmeasuretext" }), document.body.appendChild(n)), "string" == typeof e && (e.indexOf("<") > -1 || e.indexOf(">") > -1)) { for (var r = e.split(" "), o = 0; o < r.length; o++)-1 === r[o].indexOf("<br/>") && (r[o] = r[o].replace(/[<>]/g, "&")); e = r.join(" ") } return n.innerHTML = i.indexOf("<br>") > -1 ? i : e, n.style.position = "fixed", n.style.fontSize = t.size, n.style.fontWeight = t.fontWeight, n.style.fontStyle = t.fontStyle, n.style.fontFamily = t.fontFamily, n.style.visibility = "hidden", n.style.top = "-100", n.style.left = "0", n.style.whiteSpace = "nowrap", n.style.lineHeight = "normal", new $E(n.clientWidth, n.clientHeight) } function Ti(e, t, i, n, r, o, s, a, l, h, d) { var c = "", p = i.x, u = i.y, g = i.x + i.width, m = i.y + i.height; return d = d || 0, o ? (c = (c = c.concat("M " + p + " " + (u + t) + " Q " + p + " " + u + " " + (p + e) + " " + u + "  L " + (g - e) + " " + u + " Q " + g + " " + u + " " + g + " " + (u + t))).concat(" L " + g + " " + (m - t) + " Q " + g + " " + m + " " + (g - e) + " " + m), 0 !== r && (c = (c = c.concat(" L " + (n.x + r / 2) + " " + m)).concat(" L " + (l + d) + " " + (m + r - d)), c += " Q " + l + " " + (m + r) + " " + (l - d) + " " + (m + r - d)), c = n.x - r / 2 > p ? c.concat(" L " + (n.x - r / 2) + " " + m + " L " + (p + e) + " " + m + " Q " + p + " " + m + " " + p + " " + (m - t) + " z") : 0 === r ? c.concat(" L " + (p + e) + " " + m + " Q " + p + " " + m + " " + p + " " + (m - t) + " z") : c.concat(" L " + p + " " + (m + t) + " z")) : s ? (c = (c = c.concat("M " + p + " " + (u + t) + " Q " + p + " " + u + " " + (p + e) + " " + u + " L " + (n.x - r / 2) + " " + u)).concat(" L " + (l - d) + " " + (n.y + d)), c = (c = (c += " Q " + l + " " + n.y + " " + (l + d) + " " + (n.y + d)).concat(" L " + (n.x + r / 2) + " " + u + " L " + (g - e) + " " + u + " Q " + g + " " + u + " " + g + " " + (u + t))).concat(" L " + g + " " + (m - t) + " Q " + g + " " + m + " " + (g - e) + " " + m + " L " + (p + e) + " " + m + " Q " + p + " " + m + " " + p + " " + (m - t) + " z")) : a ? (c = (c = (c = c.concat("M " + p + " " + (u + t) + " Q " + p + " " + u + " " + (p + e) + " " + u)).concat(" L " + (g - e) + " " + u + " Q " + g + " " + u + " " + g + " " + (u + t) + " L " + g + " " + (n.y - r / 2))).concat(" L " + (g + r - d) + " " + (h - d)), c = (c = (c += " Q " + (g + r) + " " + h + " " + (g + r - d) + " " + (h + d)).concat(" L " + g + " " + (n.y + r / 2) + " L " + g + " " + (m - t) + " Q " + g + " " + m + " " + (g - e) + " " + m)).concat(" L " + (p + e) + " " + m + " Q " + p + " " + m + " " + p + " " + (m - t) + " z")) : (c = (c = c.concat("M " + (p + e) + " " + u + " Q " + p + " " + u + " " + p + " " + (u + t) + " L " + p + " " + (n.y - r / 2))).concat(" L " + (p - r + d) + " " + (h - d)), c = (c = (c += " Q " + (p - r) + " " + h + " " + (p - r + d) + " " + (h + d)).concat(" L " + p + " " + (n.y + r / 2) + " L " + p + " " + (m - t) + " Q " + p + " " + m + " " + (p + e) + " " + m)).concat(" L " + (g - e) + " " + m + " Q " + g + " " + m + " " + g + " " + (m - t) + " L " + g + " " + (u + t) + " Q " + g + " " + u + " " + (g - e) + " " + u + " z")), c } function Di(e) { return document.getElementById(e) } function Ai(e) { var t = Di(e); t && k(t) } function Ei(e, t, i, n, r, o) { var s = new JE(""), a = ji(e, i, t, r, n), l = s["draw" + a.functionName](a.renderOption); return l.setAttribute("aria-label", o), l } function ji(e, t, i, n, r) { var o, s = "Path", a = t.width, h = t.height, d = e.x, c = e.y, p = e.x + -a / 2, u = e.y + -h / 2; switch (i) { case "Circle": case "Bubble": s = "Ellipse", l(n, { rx: a / 2, ry: h / 2, cx: d, cy: c }); break; case "Cross": l(n, { d: o = "M " + p + " " + c + " L " + (d + a / 2) + " " + c + " M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "HorizontalLine": l(n, { d: o = "M " + p + " " + c + " L " + (d + a / 2) + " " + c }); break; case "VerticalLine": l(n, { d: o = "M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "Diamond": l(n, { d: o = "M " + p + " " + c + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + c + " L " + d + " " + (c + h / 2) + " L " + p + " " + c + " z" }); break; case "Rectangle": l(n, { d: o = "M " + p + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + p + " " + (c + h / 2) + " L " + p + " " + (c + -h / 2) + " z" }); break; case "Triangle": l(n, { d: o = "M " + p + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + p + " " + (c + h / 2) + " z" }); break; case "InvertedTriangle": l(n, { d: o = "M " + (d + a / 2) + " " + (c - h / 2) + " L " + d + " " + (c + h / 2) + " L " + (d - a / 2) + " " + (c - h / 2) + " L " + (d + a / 2) + " " + (c - h / 2) + " z" }); break; case "Pentagon": for (var g = void 0, m = void 0, f = 0; f <= 5; f++)g = a / 2 * Math.cos(Math.PI / 180 * (72 * f)), m = h / 2 * Math.sin(Math.PI / 180 * (72 * f)), o = 0 === f ? "M " + (d + g) + " " + (c + m) + " " : o.concat("L " + (d + g) + " " + (c + m) + " "); l(n, { d: o = o.concat("Z") }); break; case "Image": s = "Image", l(n, { href: r, height: h, width: a, x: p, y: u }) }return { renderOption: n, functionName: s } } function Ii(e, t, i, n) { var r, o, s = {}, a = new JE(""); return s = { id: e.id, x: e.x, y: e.y, fill: i, "font-size": t.size, "font-style": t.fontStyle, "font-family": t.fontFamily, "font-weight": t.fontWeight, "text-anchor": e.anchor, transform: e.transform, opacity: t.opacity, "dominant-baseline": e.baseLine }, o = "string" == typeof e.text ? e.text : e.text[0], r = a.createText(s, o), n.appendChild(r), r } function ki(e, t, i) { var n = h([], e, null); return n.sort(function (e, n) { for (var r = 0, o = 0, s = 0; s < t.length; s++)r += e[t[s]], o += n[t[s]]; return !i && r < o || i && r > o ? -1 : r === o ? 0 : 1 }), n } function Pi(e) { return -1 !== e.indexOf("<br>") } function Ni(e, t, i, n) { var r, o, s, a = new JE(n.element.id); return o = { "font-size": e.size, "font-style": e.fontStyle, "font-family": e.fontFamily, "font-weight": e.fontWeight, transform: "rotate(" + i + ", 0, 0)", "text-anchor": "middle" }, s = a.createText(o, t), n.delayRedraw || n.redraw || n.element.appendChild(n.svgObject), n.svgObject.appendChild(s), r = s.getBoundingClientRect(), k(s), n.delayRedraw || n.redraw || k(n.svgObject), new $E(r.right - r.left, r.bottom - r.top) } function Oi(e) { if (!e) return null; var t = "string" == typeof e ? Sn(e) : e; t && k(t) } function Ri(e, t) { return Math.log(e) / Math.log(t) } function zi(e, t, i, n, r, o, s) { var a = document.getElementById(r), l = xi(e, { fontFamily: "Segoe UI", size: "12px", fontStyle: "Normal", fontWeight: "Regular" }).width + 5; t = t + l > n ? t - l : t, a ? (a.innerHTML = e, a.style.top = (i + 15).toString() + "px", a.style.left = (t + 15).toString() + "px") : (a = M("div", { innerHTML: e, id: r, styles: "top:" + (i + 15).toString() + "px;left:" + (t + 15).toString() + 'px;background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(112, 112, 112); padding-left : 3px; padding-right : 2px;padding-bottom : 2px; padding-top : 2px; font-size:12px; font-family: "Segoe UI"' }), o.appendChild(a)), s && setTimeout(function () { Oi(r) }, 1500) } function Bi(e, t) { return e < t.max && e > t.min } function Fi(e, t) { return e <= t.max && e >= t.min } function Vi(e, t) { return e = "Logarithmic" === t.valueType ? Ri(e, t.logBase) : e } function Wi(e, t, i, n) { var r = Vi(t.xValue, n.xAxis), o = e ? Vi(e.xValue, n.xAxis) : r, s = i ? Vi(i.xValue, n.xAxis) : r, a = Math.floor(n.xAxis.visibleRange.min), l = Math.ceil(n.xAxis.visibleRange.max); return o >= a && o <= l || r >= a && r <= l || s >= a && s <= l || a >= o && a <= s } function Hi(e) { for (var t = 0, i = 0, n = e; i < n.length; i++) { t += n[i] } return t } function _i(e, t, i, n, r) { var o = 0; if (null !== n) for (var s = t + 1; s < i; s++)-1 === n.indexOf(s) && (o += e[s][r.yName]); else for (s = t + 1; s < i; s++)d(e[s][r.yName]) || (o += e[s][r.yName]); return o } function Yi(e, t) { return e.x += t.left, e.y += t.top, e.width -= t.left + t.right, e.height -= t.top + t.bottom, e } function Ui(e, t) { return e.x += t.x, e.y += t.y, e.width -= t.x + t.width, e.height -= t.y + t.height, e } function qi(e, t, i) { var n = e * Math.PI / 180; return new dI(Math.cos(n) * t + i.x, Math.sin(n) * t + i.y) } function Gi(e, t) { var i = Math.atan2(t.y - e.y, t.x - e.x); return (i = i < 0 ? 6.283 + i : i) * (180 / Math.PI) } function Qi(e, t) { for (var i = [], n = 0; n <= t - 1; n++)i.push(e[n]); return i } function Xi(e, t) { var i = t.visibleRange, n = (e - i.min) / i.delta; return t.isInversed ? 1 - n : n } function Ji(e, t, i, n, r, o) { e = "Logarithmic" === i.valueType ? Ri(e > 1 ? e : 1, i.logBase) : e, t = "Logarithmic" === n.valueType ? Ri(t > 1 ? t : 1, n.logBase) : t, e += "Category" === i.valueType && "BetweenTicks" === i.labelPlacement && "Radar" !== o.type ? .5 : 0; var s = o.chart.radius * Xi(t, n), a = Ki($i(e, i), o.chart.primaryXAxis.startAngle); return { x: o.clipRect.width / 2 + o.clipRect.x + s * a.x, y: o.clipRect.height / 2 + o.clipRect.y + s * a.y } } function Zi(e, t) { void 0 === t && (t = !1); var i = ["NaN", "NaN"]; return e.indexOf("_Point_") > -1 ? i = e.split("_Series_")[1].split("_Point_") : e.indexOf("_shape_") > -1 && (!t || t && -1 === e.indexOf("_legend_")) ? (i = e.split("_shape_"))[0] = "0" : e.indexOf("_text_") > -1 && (!t || t && -1 === e.indexOf("_legend_")) && ((i = e.split("_text_"))[0] = "0"), new YE(parseInt(i[0], 10), parseInt(i[1], 10)) } function Ki(e, t) { t = t < 0 ? t + 360 : t; var i = Math.PI * (1.5 - 2 * e); return i += t * Math.PI / 180, { x: Math.cos(i), y: Math.sin(i) } } function $i(e, t) { var i, n, r = t.visibleRange; return "Category" !== t.valueType ? (i = r.max - ("DateTime" === t.valueType ? t.dateTimeInterval : r.interval) - r.min, n = t.visibleLabels.length - 1, i = 0 === i ? 1 : i) : (i = r.delta, n = t.visibleLabels.length), t.isInversed ? (e - r.min) / i * (1 - 1 / n) : 1 - (e - r.min) / i * (1 - 1 / n) } function en(e, t, i, n, r) { var o = Sn(e), s = "top:" + i.toString() + "px;left:" + n.toString() + "px;color:black !important; background:#FFFFFF !important; position:absolute;border:1px solid #707070;font-size:" + r + ";border-radius:2px; z-index:1"; o ? (o.setAttribute("innerHTML", "&nbsp;" + t + "&nbsp;"), o.setAttribute("styles", s)) : (o = M("div", { id: e, innerHTML: "&nbsp;" + t + "&nbsp;", styles: s }), document.body.appendChild(o)) } function tn(e, t, i, n, r, o) { for (var s, a, l, h, d, c = t.opposedPosition, p = r ? "start" : "auto", u = e.availableSize.width, g = t.scrollbarSettings.enable || t.zoomingScrollBar && t.zoomingScrollBar.svgObject ? t.scrollBarHeight : 0, m = 0; m < 2; m++)s = xi(m ? t.endLabel : t.startLabel, t.labelStyle), r ? (h = m ? new dI(o.x - g, o.y + 3) : new dI(t.rect.x - g, o.y + o.height - 3), a = o.x + (c ? o.width + 5 + g : -(s.width + 5 + 5 + g)), l = o.y + (m ? 0 : o.height - s.height - 5), a += a < 0 || u < a + s.width + 5 ? c ? -s.width / 2 : s.width / 2 : 0, d = Ti(3, 3, new ej(a, l, s.width + 5, s.height + 5), h, 5, !1, !1, !c, h.x, h.y + (m ? -3 : 3))) : (h = new dI(m ? o.x + o.width - 3 : o.x + 3, o.y + o.height + g), a = o.x + (m ? o.width - s.width - 5 : 0), l = c ? o.y - s.height - 10 - g : o.y + o.height + 5 + g, d = Ti(3, 3, new ej(a, l, s.width + 5, s.height + 5), h, 5, c, !c, !1, h.x + (m ? 3 : -3), h.y)), a += 2.5, l = l + s.height / 4 * 3 + 2.5, i.appendChild(e.renderer.drawPath(new rj(e.element.id + "_Zoom_" + n + "_AxisLabel_Shape_" + m, e.themeStyle.crosshairFill, 2, e.themeStyle.crosshairFill, 1, null, d))), $n(e.renderer, new nj(e.element.id + "_Zoom_" + n + "_AxisLabel_" + m, a, l, p, m ? t.endLabel : t.startLabel), { color: e.themeStyle.crosshairLabel, fontFamily: "Segoe UI", fontWeight: "Regular", size: "11px" }, e.themeStyle.crosshairLabel, i); return i } function nn(e, t, i, n, r) { return void 0 === n && (n = 0), void 0 === r && (r = 0), e >= i.x - n && e <= i.x + i.width + n && t >= i.y - r && t <= i.y + i.height + r } function rn(e, t, i) { return (i.isInversed ? 1 - e / t : e / t) * i.visibleRange.delta + i.visibleRange.min } function on(e, t, i) { return (i.isInversed ? e / t : 1 - e / t) * i.visibleRange.delta + i.visibleRange.min } function sn(e) { var t = e.clipRect; e.chart.requireInvertedAxis ? (t.x = e.yAxis.rect.x, t.y = e.xAxis.rect.y, t.width = e.yAxis.rect.width, t.height = e.xAxis.rect.height) : (t.x = e.xAxis.rect.x, t.y = e.yAxis.rect.y, t.width = e.xAxis.rect.width, t.height = e.yAxis.rect.height) } function an(e) { return e.substr(0, 1).toLowerCase() + e.substr(1) } function ln(e, t, i) { var n, r, o, s; return i ? (n = t.rect.x, r = e.rect.y, o = t.rect.width, s = e.rect.height) : (n = e.rect.x, r = t.rect.y, o = e.rect.width, s = t.rect.height), new ej(n, r, o, s) } function hn(e, t) { var i, n, r, o = Number.MAX_VALUE; return t.forEach(function (t, s) { i = [], t.visible && (e.name === t.xAxisName || "primaryXAxis" === e.name && null === t.xAxisName || e.name === t.chart.primaryXAxis.name && !t.xAxisName) && ((i = t.points.map(function (e, t) { return e.xValue })).sort(function (e, t) { return e - t }), 1 === i.length ? (r = "DateTime" === e.valueType && t.xMin === t.xMax ? t.xMin - 2592e6 : t.xMin, 0 !== (n = i[0] - (d(r) ? e.visibleRange.min : r)) && (o = Math.min(o, n))) : i.forEach(function (e, t, i) { t > 0 && e && 0 !== (n = e - i[t - 1]) && (o = Math.min(o, n)) })) }), o === Number.MAX_VALUE && (o = 1), o } function dn(e) { var t; switch (e) { case "Linear": t = cn }return t } function cn(e, t, i, n) { return -i * Math.cos(e / n * (Math.PI / 2)) + i + t } function pn(e, t, i, n, r, o, s) { var a = o.x, l = o.y, h = 0; e.style.visibility = "hidden", new fw({}).animate(e, { duration: i, delay: t, progress: function (t) { t.timeStamp > t.delay && (t.element.style.visibility = "visible", h = (t.timeStamp - t.delay) / t.duration, e.setAttribute("transform", "translate(" + a + " " + l + ") scale(" + h + ") translate(" + -a + " " + -l + ")")) }, end: function (t) { e.style.visibility = "", e.removeAttribute("transform"), "Scatter" !== n.type && "Bubble" !== n.type || s || r !== n.points.length - 1 || n.chart.trigger("animationComplete", { series: n.chart.isBlazor ? {} : n }) } }) } function un(e, t, i, n, r) { var o = function (t) { e.setAttribute("x", t.x + ""), e.setAttribute("y", t.y + ""), e.setAttribute("width", t.width + ""), e.setAttribute("height", t.height + "") }; new fw({}).animate(M("div"), { duration: i, delay: t, name: name, progress: function (e) { o(new ej(cn(e.timeStamp, r.x, n.x - r.x, e.duration), cn(e.timeStamp, r.y, n.y - r.y, e.duration), cn(e.timeStamp, r.width, n.width - r.width, e.duration), cn(e.timeStamp, r.height, n.height - r.height, e.duration))) }, end: function () { o(n) } }) } function gn(e, t, i, n, r) { if (!i || !n && !e) return null; var o = 300; r && (o = r); var s, a, l, h = n || e.getAttribute("d"), d = h.split(/(?=[LMCZAQ])/), c = t.split(/(?=[LMCZAQ])/), p = [], u = []; e.setAttribute("d", h), new fw({}).animate(M("div"), { duration: o, progress: function (t) { s = "", d.map(function (e, i) { if (p = e.split(" "), u = c[i] ? c[i].split(" ") : p, "Z" === p[0] ? s += "Z " : s += p[0] + " " + cn(t.timeStamp, +p[1], +u[1] - +p[1], t.duration) + " " + cn(t.timeStamp, +p[2], +u[2] - +p[2], t.duration) + " ", "C" === p[0] || "Q" === p[0]) for (a = 3, l = "Q" === p[0] ? 4 : 6; a < l;)s += cn(t.timeStamp, +p[a], +u[a] - +p[a], t.duration) + " " + cn(t.timeStamp, +p[++a], +u[a] - +p[a], t.duration) + " ", ++a; "A" === p[0] && (s += "0 0 1 " + cn(t.timeStamp, +p[6], +u[6] - +p[6], t.duration) + " " + cn(t.timeStamp, +p[7], +u[7] - +p[7], t.duration) + " ") }), e.setAttribute("d", s) }, end: function () { e.setAttribute("d", t) } }) } function mn(e, t, i, n) { void 0 === n && (n = "drawClipPath"); var r = Zn(e, t.id, t, i); if (r) { var o = i.createDefs(); return o.appendChild(r), o } return i[n](t) } function fn(e, t, i, n, r) { var o; if (o = { cancel: !1, name: wj, axis: r, text: i, value: t, labelStyle: n }, e.trigger(wj, o), !o.cancel) { var s = -1 !== o.text.indexOf("<br>"), a = r.enableTrim ? s ? Xn(r.maximumLabelWidth, o.text, r.labelStyle) : Qn(r.maximumLabelWidth, o.text, r.labelStyle) : o.text; r.visibleLabels.push(new tI(a, o.value, o.labelStyle, o.text)) } } function yn(e) { return null != e.minimum && null != e.maximum } function vn(e, t) { var i = "Horizontal" === t.orientation ? e.width : e.height; if (d(t.desiredIntervals)) { var n = ("Horizontal" === t.orientation ? .533 : 1) * t.maximumLabels; return n = Math.max(i * (n / 100), 1) } return t.desiredIntervals } function wn(e, t, i, n, r) { new fw({}).animate(e, { duration: i, delay: t, name: n, progress: function (e) { e.element.style.visibility = "visible" }, end: function (e) { r ? k(e.element) : e.element.style.visibility = "visible" } }) } function bn(e, t, i, n, r, o, s, a) { var l = s || new JE(""), h = Cn(e, i, t, r, n); return l["draw" + h.functionName](h.renderOption, a ? new Int32Array([a.x, a.y]) : null) } function Cn(e, t, i, n, r) { var o, s = "Path", a = t.width, h = t.height, d = e.x, c = e.y, p = e.y + -h / 2, u = e.x + -a / 2; switch (i) { case "Bubble": case "Circle": s = "Ellipse", l(n, { rx: a / 2, ry: h / 2, cx: d, cy: c }); break; case "Cross": l(n, { d: o = "M " + u + " " + c + " L " + (d + a / 2) + " " + c + " M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "HorizontalLine": l(n, { d: o = "M " + u + " " + c + " L " + (d + a / 2) + " " + c }); break; case "VerticalLine": l(n, { d: o = "M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "Diamond": l(n, { d: o = "M " + u + " " + c + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + c + " L " + d + " " + (c + h / 2) + " L " + u + " " + c + " z" }); break; case "Rectangle": case "Hilo": case "HiloOpenClose": case "Candle": case "Waterfall": case "BoxAndWhisker": case "StepArea": case "Square": case "Flag": l(n, { d: o = "M " + u + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + u + " " + (c + h / 2) + " L " + u + " " + (c + -h / 2) + " z" }); break; case "Pyramid": case "Triangle": l(n, { d: o = "M " + u + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + u + " " + (c + h / 2) + " z" }); break; case "Funnel": case "InvertedTriangle": l(n, { d: o = "M " + (d + a / 2) + " " + (c - h / 2) + " L " + d + " " + (c + h / 2) + " L " + (d - a / 2) + " " + (c - h / 2) + " L " + (d + a / 2) + " " + (c - h / 2) + " z" }); break; case "Pentagon": for (var g = void 0, m = void 0, f = 0; f <= 5; f++)g = a / 2 * Math.cos(Math.PI / 180 * (72 * f)), m = h / 2 * Math.sin(Math.PI / 180 * (72 * f)), o = 0 === f ? "M " + (d + g) + " " + (c + m) + " " : o.concat("L " + (d + g) + " " + (c + m) + " "); l(n, { d: o = o.concat("Z") }); break; case "Image": s = "Image", l(n, { href: r, height: h, width: a, x: u, y: p }) }return n = Gn(e, new $E(a, h), i, n).renderOption, { renderOption: n, functionName: s } } function Ln(e, t, i) { var n, r; return n = t.x < i.x ? i.x : t.x > i.x + i.width ? i.x + i.width : t.x, r = t.y < i.y ? i.y : t.y > i.y + i.height ? i.y + i.height : t.y, new ej(n > e.x ? e.x : n, r > e.y ? e.y : r, Math.abs(n - e.x), Math.abs(r - e.y)) } function Mn(e, t, i) { return e > i ? i : e < t ? t : e } function Sn(e) { return document.getElementById(e) } function xn(e) { var t = null; try { document.querySelectorAll(e).length && (t = ce(document.querySelector(e).innerHTML.trim())) } catch (i) { t = ce(e) } return t } function Tn(e, t, i, n, r, o) { var s, a; s = xn(i); try { var l = window.Blazor ? {} : { chart: n, series: o, point: r }, h = s ? s(l, null, null, e.id.replace(/[^a-zA-Z0-9]/g, "")) : []; if (h.length) for (var d = (a = Array.prototype.slice.call(h)).length, c = 0; c < d; c++)e.appendChild(a[c]) } catch (t) { return e } return e } function Dn(e) { return "font-size:" + e.size + "; font-style:" + e.fontStyle + "; font-weight:" + e.fontWeight + "; font-family:" + e.fontFamily + ";opacity:" + e.opacity + "; color:" + e.color + ";" } function An(e, t) { void 0 === t && (t = !1); var i; return document.body.appendChild(e), i = e.getBoundingClientRect(), t ? k(e) : Oi(e.id), i } function En(e, t) { for (var i, n = 0, r = e.length; n < r; n++)e[n].id.indexOf(t) > -1 && (i = e[n]); return i } function jn(e, t, i, n, r, o) { e = "Logarithmic" === i.valueType ? Ri(e > 1 ? e : 1, i.logBase) : e, t = "Logarithmic" === n.valueType ? Ri(t > 1 ? t : 1, n.logBase) : t, e = Xi(e, i), t = Xi(t, n); var s = r ? i.rect.height : i.rect.width, a = r ? n.rect.width : n.rect.height; return new dI(r ? t * a : e * s, r ? (1 - e) * s : (1 - t) * a) } function In(e, t, i, n, r, o) { if (void 0 === i && (i = !1), void 0 === n && (n = !1), void 0 === r && (r = "x"), void 0 === o && (o = "y"), !(e && e.hasChildNodes() && t)) return null; kn(!1, t, e, i, n, r, o) } function kn(e, t, i, n, r, o, s, a, l, h, d, c, p) { if (void 0 === r && (r = !1), void 0 === o && (o = "x"), void 0 === s && (s = "y"), void 0 === h && (h = !1), void 0 === d && (d = !1), void 0 === c && (c = null), e) return null; var u = t.querySelector("#" + i.id), g = u || Sn(i.id), m = i, f = p || 300; if (n && r && g) if (a = a || ("DIV" === g.tagName ? new dI(+g.style[o].split("px")[0], +g.style[s].split("px")[0]) : new dI(+g.getAttribute(o), +g.getAttribute(s))), l && "undefined" !== l) gn(i, i.getAttribute("d"), n, l, f); else if (d && c) un(m, 0, f, new ej(+g.getAttribute("x"), +g.getAttribute("y"), +g.getAttribute("width"), +g.getAttribute("height")), c); else { Kn(m, f, a, "DIV" === m.tagName ? new dI(+m.style[o].split("px")[0], +m.style[s].split("px")[0]) : new dI(+m.getAttribute(o), +m.getAttribute(s)), o, s) } else n && r && !g && h && wn(m, 0, 600, "FadeIn"); u ? t.replaceChild(m, g) : t.appendChild(m) } function Pn(e, t, i, n, r) { var o = Math.abs(e - i), s = Math.abs(t - n), a = Math.max(Nn(Math.min(e, i), o, r.x, r.width), r.x), l = Math.max(Nn(Math.min(t, n), s, r.y, r.height), r.y); return new ej(a, l, Math.min(o, r.width), Math.min(s, r.height)) } function Nn(e, t, i, n) { return e < i ? e = i : e + t > n + i && (e = n + i - t), e } function On(e, t, i) { var n = t.yAxis.labelFormat, r = [], o = null !== n.match("{value}"); switch (t.seriesType) { case "XY": r.push(e.text || e.yValue.toString()); break; case "HighLow": r.push(e.text || Math.max(e.high, e.low).toString()), r.push(e.text || Math.min(e.high, e.low).toString()); break; case "HighLowOpenClose": r.push(e.text || Math.max(e.high, e.low).toString()), r.push(e.text || Math.min(e.high, e.low).toString()), r.push(e.text || Math.max(e.open, e.close).toString()), r.push(e.text || Math.min(e.open, e.close).toString()); break; case "BoxPlot": r.push(e.text || e.median.toString()), r.push(e.text || e.maximum.toString()), r.push(e.text || e.minimum.toString()), r.push(e.text || e.upperQuartile.toString()), r.push(e.text || e.lowerQuartile.toString()); for (var s = 0, a = e.outliers; s < a.length; s++) { var l = a[s]; r.push(e.text || l.toString()) } }if (n && !e.text) for (var h = 0; h < r.length; h++)r[h] = o ? n.replace("{value}", t.yAxis.format(parseFloat(r[h]))) : t.yAxis.format(parseFloat(r[h])); return r } function Rn(e) { window.clearInterval(e) } function zn(e, t, i) { var n = new ej(e.x + i.x, e.y + i.y, e.width, e.height); return t.some(function (e) { return n.x < e.x + e.width && n.x + n.width > e.x && n.y < e.y + e.height && n.height + n.y > e.y }) } function Bn(e, t) { return e.x < t.x + t.width && e.x + e.width > t.x && e.y < t.y + t.height && e.height + e.y > t.y } function Fn(e, t) { return e.x <= t.x && e.x + e.width >= t.x + t.width && e.y <= t.y && e.height + e.y >= t.y + t.height } function Vn(e, t, i) { return new ej(e.x - t.width / 2 - i.left, e.y - t.height / 2 - i.top, t.width + i.left + i.right, t.height + i.top + i.bottom) } function Wn(e) { return "#" + Hn(e.r) + Hn(e.g) + Hn(e.b) } function Hn(e) { var t = e.toString(16); return 1 === t.length ? "0" + t : t } function _n(e) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return t ? new pI(parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)) : new pI(255, 255, 255) } function Yn(e) { var t; e = "transparent" === e ? "white" : e, document.body.appendChild(M("text", { id: "chartmeasuretext" })), (t = document.getElementById("chartmeasuretext")).style.color = e, e = window.getComputedStyle(t).color, k(t); var i = /^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e); return Wn(new pI(parseInt(i[3], 10), parseInt(i[4], 10), parseInt(i[5], 10))) } function Un(e, t) { (e = (e = Yn(e)).replace(/[^0-9a-f]/gi, "")).length < 6 && (e = e[0] + e[0] + e[1] + e[1] + e[2] + e[2]), t = t || 0; for (var i, n = "#", r = 0; r < 3; r++)i = parseInt(e.substr(2 * r, 2), 16), n += ("00" + (i = Math.round(Math.min(Math.max(0, i + i * t), 255))).toString(16)).substr(i.toString(16).length); return n } function qn(e) { var t = Math.floor(e.length / 2); return e.length % 2 ? e[t] : (e[t - 1] + e[t]) / 2 } function Gn(e, t, i, n) { var r = t.height, o = t.width, s = e.x, a = e.y; switch (i) { case "MultiColoredLine": case "Line": case "StackingLine": case "StackingLine100": l(n, { d: "M " + (s + -o / 2) + " " + a + " L " + (s + o / 2) + " " + a }); break; case "StepLine": n.fill = "transparent", l(n, { d: "M " + (s + -o / 2 - 2.5) + " " + (a + r / 2) + " L " + (s + -o / 2 + o / 10) + " " + (a + r / 2) + " L " + (s + -o / 2 + o / 10) + " " + a + " L " + (s + -o / 10) + " " + a + " L " + (s + -o / 10) + " " + (a + r / 2) + " L " + (s + o / 5) + " " + (a + r / 2) + " L " + (s + o / 5) + " " + (a + -r / 2) + " L " + (s + o / 2) + " " + (a + -r / 2) + "L " + (s + o / 2) + " " + (a + r / 2) + " L" + (s + o / 2 + 2.5) + " " + (a + r / 2) }); break; case "RightArrow": var h = 2; l(n, { d: "M " + (s + -o / 2) + " " + (a - r / 2) + " L " + (s + o / 2) + " " + a + " L " + (s + -o / 2) + " " + (a + r / 2) + " L " + (s + -o / 2) + " " + (a + r / 2 - h) + " L " + (s + o / 2 - 2 * h) + " " + a + " L" + (s + -o / 2) + " " + (a - r / 2 + h) + " Z" }); break; case "LeftArrow": n.fill = n.stroke, n.stroke = "transparent", l(n, { d: "M " + (s + o / 2) + " " + (a - r / 2) + " L " + (s + -o / 2) + " " + a + " L " + (s + o / 2) + " " + (a + r / 2) + " L " + (s + o / 2) + " " + (a + r / 2 - (h = 2)) + " L " + (s + -o / 2 + 2 * h) + " " + a + " L" + (s + o / 2) + " " + (a - r / 2 + h) + " Z" }); break; case "Column": case "Pareto": case "StackingColumn": case "StackingColumn100": case "RangeColumn": case "Histogram": l(n, { d: "M " + (s - o / 5 * 3) + " " + (a - r / 5) + " L " + (s + -o / 10 * 3) + " " + (a - r / 5) + " L " + (s + -o / 10 * 3) + " " + (a + r / 2) + " L " + (s - o / 5 * 3) + " " + (a + r / 2) + " Z M " + (s + -o / 10 - o / 20) + " " + (a - r / 4 - 5) + " L " + (s + o / 10 + o / 20) + " " + (a - r / 4 - 5) + " L " + (s + o / 10 + o / 20) + " " + (a + r / 2) + " L " + (s + -o / 10 - o / 20) + " " + (a + r / 2) + " Z M " + (s + o / 10 * 3) + " " + a + " L " + (s + o / 5 * 3) + " " + a + " L " + (s + o / 5 * 3) + " " + (a + r / 2) + " L " + (s + o / 10 * 3) + " " + (a + r / 2) + " Z" }); break; case "Bar": case "StackingBar": case "StackingBar100": l(n, { d: "M " + (s + -o / 2 + -2.5) + " " + (a - r / 5 * 3) + " L " + (s + o / 10 * 3) + " " + (a - r / 5 * 3) + " L " + (s + o / 10 * 3) + " " + (a - r / 10 * 3) + " L " + (s - o / 2 - 2.5) + " " + (a - r / 10 * 3) + " Z M " + (s + -o / 2 + -2.5) + " " + (a - r / 5 + .5) + " L " + (s + o / 2 + 2.5) + " " + (a - r / 5 + .5) + " L " + (s + o / 2 + 2.5) + " " + (a + r / 10 + .5) + " L " + (s - o / 2 - 2.5) + " " + (a + r / 10 + .5) + " Z M " + (s - o / 2 - 2.5) + " " + (a + r / 5 + 1) + " L " + (s + -o / 4) + " " + (a + r / 5 + 1) + " L " + (s + -o / 4) + " " + (a + r / 2 + 1) + " L " + (s - o / 2 - 2.5) + " " + (a + r / 2 + 1) + " Z" }); break; case "Spline": n.fill = "transparent", l(n, { d: "M " + (s - o / 2) + " " + (a + r / 5) + " Q " + s + " " + (a - r) + " " + s + " " + (a + r / 5) + " M " + s + " " + (a + r / 5) + " Q " + (s + o / 2) + " " + (a + r / 2) + " " + (s + o / 2) + " " + (a - r / 2) }); break; case "Area": case "MultiColoredArea": case "RangeArea": case "StackingArea": case "StackingArea100": l(n, { d: "M " + (s - o / 2 - 2.5) + " " + (a + r / 2) + " L " + (s + -o / 4 + -1.25) + " " + (a - r / 2) + " L " + s + " " + (a + r / 4) + " L " + (s + o / 4 + 1.25) + " " + (a + -r / 2 + r / 4) + " L " + (s + r / 2 + 2.5) + " " + (a + r / 2) + " Z" }); break; case "SplineArea": l(n, { d: "M " + (s - o / 2) + " " + (a + r / 5) + " Q " + s + " " + (a - r) + " " + s + " " + (a + r / 5) + " Z M " + s + " " + (a + r / 5) + " Q " + (s + o / 2) + " " + (a + r / 2) + " " + (s + o / 2) + " " + (a - r / 2) + "  Z" }); break; case "Pie": case "Doughnut": n.stroke = "transparent"; l(n, { d: function (e, t, i, n, r, o) { var s = qi(270, i, new dI(e, t)), a = qi(270, i, new dI(e + r / 10, t)); return "M " + e + " " + t + " L " + (e + i) + " " + t + " A " + i + " " + i + " 0 1 1 " + s.x + " " + s.y + " Z M " + (e + r / 10) + " " + (t - n / 10) + " L" + (e + i) + " " + (t - n / 10) + " A " + i + " " + i + " 0 0 0 " + a.x + " " + a.y + " Z" }(s, a, Math.min(r, o) / 2, r, o) }) }return { renderOption: n } } function Qn(e, t, i) { var n = t, r = xi(t, i).width; if (r > e) for (var o = t.length - 1; o >= 0; --o)if (n = t.substring(0, o) + "...", (r = xi(n, i).width) <= e) return n; return n } function Xn(e, t, i) { for (var n = [], r = t.split("<br>"), o = 0; o < r.length; o++) { var s = xi(t = r[o], i).width; if (s > e) { for (var a = t.length - 1; a >= 0; --a)if (t = t.substring(0, a) + "...", (s = xi(t, i).width) <= e) { n.push(t); break } } else n.push(t) } return n } function Jn(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function Zn(e, t, i, n) { if (!e) return null; var r = Sn(t); return r && i && n.setElementAttributes(i, "clipPath" === r.tagName ? r.childNodes[0] : r), r } function Kn(e, t, i, n, r, o) { void 0 === r && (r = "x"), void 0 === o && (o = "y"); var s = "DIV" === e.tagName, a = function (t, i) { s ? (e.style[r] = t + "px", e.style[o] = i + "px") : (e.setAttribute(r, t + ""), e.setAttribute(o, i + "")) }; a(i.x, i.y), new fw({}).animate(M("div"), { duration: t, progress: function (e) { a(cn(e.timeStamp, i.x, n.x - i.x, e.duration), cn(e.timeStamp, i.y, n.y - i.y, e.duration)) }, end: function () { a(n.x, n.y) } }) } function $n(e, t, i, n, r, o, s, a, l, h, d) { void 0 === o && (o = !1), void 0 === l && (l = !1); var c, p, u, g, m = {}; if (m = { id: t.id, x: t.x, y: t.y, fill: n || "black", "font-size": i.size, "font-style": i.fontStyle, "font-family": i.fontFamily, "font-weight": i.fontWeight, "text-anchor": t.anchor, labelRotation: t.labelRotation, transform: t.transform, opacity: i.opacity, "dominant-baseline": t.baseLine }, u = "string" == typeof t.text ? t.text : o ? t.text[t.text.length - 1] : t.text[0], c = e.createText(m, u, d ? d.x : 0, d ? d.y : 0), "string" != typeof t.text && t.text.length > 1) for (var f = 1, y = t.text.length; f < y; f++)g = xi(t.text[f], i).height, p = e.createTSpan({ x: t.x, id: t.id, y: t.y + (o ? -f * g : f * g) }, o ? t.text[t.text.length - (f + 1)] : t.text[f]), c.appendChild(p); return kn(e instanceof ZE, r, c, s, a, "x", "y", null, null, l, !1, null, h), c } function er(e) { var t = e.element.clientWidth || e.element.offsetWidth, i = e.element.clientHeight; e.stockChart && (t = e.stockChart.element.clientWidth); var n, r = 450; if ("rangeNavigator" === e.getModuleName()) { var o = e, s = o.tooltip.enable ? 35 : 0, a = o.periodSelectorSettings.periods.length ? o.periodSelectorSettings.height : 0; n = o.margin.top + o.margin.bottom + s; var l = xi("tempString", o.labelStyle).height; r = (e.series.length ? uw.isDevice ? 80 : 120 : (o.enableGrouping ? 55 + l : 40) + n) + a, o.disableRangeSelector && (r = a) } e.availableSize = new $E(Jn(e.width, t) || t || 600, Jn(e.height, i) || i || r) } function tr(e) { e.canvasRender = new ZE(e.element.id), e.renderer = e.enableCanvas ? e.canvasRender : new JE(e.element.id), er(e), e.stockChart && "chart" === e.getModuleName() ? e.svgObject = e.stockChart.chartObject : e.stockChart && "rangeNavigator" === e.getModuleName() ? e.svgObject = e.stockChart.selectorObject : e.enableCanvas ? e.svgObject = e.renderer.createCanvas({ id: e.element.id + "_canvas", width: e.availableSize.width, height: e.availableSize.height }) : e.svgObject = e.renderer.createSvg({ id: e.element.id + "_svg", width: e.availableSize.width, height: e.availableSize.height }) } function ir(e, t, i) { var n = []; switch (t.textOverflow) { case "Wrap": n = rr(e, i, t); break; case "Trim": n.push(Qn(i, e, t)); break; default: n.push(e) }return n } function nr(e, t) { return "Near" === t.textAlignment ? e.x : "Center" === t.textAlignment ? e.x + e.width / 2 : e.x + e.width } function rr(e, t, i) { for (var n, r = e.split(" "), o = "", s = [], a = 0, l = r.length; a < l; a++)n = r[a], xi(o.concat(n), i).width < t ? o = o.concat(("" === o ? "" : " ") + n) : "" !== o ? (s.push(Qn(t, o, i)), o = n) : (s.push(Qn(t, n, i)), n = ""), o && a === l - 1 && s.push(Qn(t, o, i)); return s } function or(e) { for (var t = 0; t < e.annotations.length; t++)ue((e.element.id + "_Annotation_" + t).replace(/[^a-zA-Z0-9]/g, "")) } function sr(e) { return "[object String]" === Object.prototype.toString.call(e) ? "$s" + e : "$o" + e.toString() } function ar(e, t) { if (null === e || void 0 === e) throw new Error("ArgumentException: " + t + " cannot be null or undefined") } function lr(e, t) { for (var i = 0, n = t; i < n.length; i++) { var r = n[i]; if (e === r.index) return r } return t[0] } function hr(e, t) { for (var i = 0, n = t; i < n.length; i++) { var r = n[i]; if (r.index === e) return r } return null } function dr(e, t, i) { var n = (e - t.min) / t.delta; return i ? 1 - n : n } function cr(e, t, i, n) { return (e = dr(e, t, n)) * i } function pr(e, t, i, n) { return (n ? 1 - e / t : e / t) * i.delta + i.min } function ur(e, t, i) { var n = []; return e.map(function (e) { e.xValue >= t && e.xValue <= i && n.push({ x: e.x, y: e.y }) }), n } function gr(e, t) { return e.reduce(function (e, i) { return Math.abs(i - t) < Math.abs(e - t) ? i : e }) } function mr(e, t) { var i = t.navigatorStyleSettings.thumb, n = d(i.width) ? uw.isDevice ? 15 : 20 : i.width, r = d(i.height) ? uw.isDevice ? 15 : 20 : i.height, o = "HighContrast" === e ? "#969696" : "#6F6C6C", s = "HighContrast" === e ? "#4A4848" : "#414040", a = "MaterialDark" === e ? "#303030" : "FabricDark" === e ? "#201F1F" : "1A1A1A", l = { gridLineColor: "#E0E0E0", axisLineColor: "#000000", labelFontColor: "#686868", unselectedRectColor: t.series.length ? "rgba(255, 255, 255, 0.6)" : "#EEEEEE", thumpLineColor: "rgba(189, 189, 189, 1)", thumbBackground: "rgba(250, 250, 250, 1)", gripColor: "#757575", background: "#FFFFFF", thumbHoverColor: "#EEEEEE", selectedRegionColor: t.series.length ? "transparent" : "#FF4081", tooltipBackground: "rgb(0, 8, 22)", tooltipFontColor: "#dbdbdb", thumbWidth: n, thumbHeight: r }; switch (e) { case "Fabric": l.selectedRegionColor = t.series.length ? "transparent" : "#007897"; break; case "Bootstrap": l.selectedRegionColor = t.series.length ? "transparent" : "#428BCA"; break; case "HighContrastLight": l = { gridLineColor: "#bdbdbd", axisLineColor: "#969696", labelFontColor: "#ffffff", unselectedRectColor: t.series.length ? "rgba(255, 255, 255, 0.3)" : "#EEEEEE", thumpLineColor: "#ffffff", thumbBackground: "#262626", gripColor: "#ffffff", background: a, thumbHoverColor: "#BFBFBF", selectedRegionColor: t.series.length ? "transparent" : "#FFD939", tooltipBackground: "#ffffff", tooltipFontColor: "#000000", thumbWidth: n, thumbHeight: r }; break; case "Highcontrast": case "HighContrast": l = { gridLineColor: s, axisLineColor: o, labelFontColor: "#DADADA", unselectedRectColor: t.series.length ? "rgba(43, 43, 43, 0.6)" : "#514F4F", thumpLineColor: "#969696", thumbBackground: "#333232", gripColor: "#DADADA", background: "#000000", thumbHoverColor: "#BFBFBF", selectedRegionColor: t.series.length ? "rgba(22, 22, 22, 0.6)" : "#FFD939", tooltipBackground: "#F4F4F4", tooltipFontColor: "#282727", thumbWidth: n, thumbHeight: r }; break; case "MaterialDark": case "FabricDark": case "BootstrapDark": l = { labelFontColor: "#DADADA", axisLineColor: " #6F6C6C", gridLineColor: "#414040", tooltipBackground: "#F4F4F4", tooltipFontColor: "#333232", unselectedRectColor: t.series.length ? "rgba(43, 43, 43, 0.6)" : "#514F4F", thumpLineColor: "#969696", thumbBackground: "#333232", gripColor: "#DADADA", background: a, thumbHoverColor: "#BFBFBF", selectedRegionColor: t.series.length ? "rgba(22, 22, 22, 0.6)" : "FabricDark" === e ? "#007897" : "BootstrapDark" === e ? "#428BCA" : "#FF4081", thumbWidth: n, thumbHeight: r }; break; case "Bootstrap4": l = { gridLineColor: "#E0E0E0", axisLineColor: "#CED4DA", labelFontColor: "#212529", unselectedRectColor: t.series.length ? "rgba(255, 255, 255, 0.6)" : "#514F4F", thumpLineColor: "rgba(189, 189, 189, 1)", thumbBackground: "#FFFFFF", gripColor: "#495057", background: "rgba(255, 255, 255, 0.6)", thumbHoverColor: "#EEEEEE", selectedRegionColor: t.series.length ? "transparent" : "#FFD939", tooltipBackground: "rgba(0, 0, 0, 0.9)", tooltipFontColor: "rgba(255, 255, 255)", thumbWidth: n, thumbHeight: r }; break; default: l.selectedRegionColor = t.series.length ? "transparent" : "#FF4081" }return l } function fr(e) { e.renderer = new JE(e.element.id), function (e) { var t = e.element.clientWidth, i = e.element.clientHeight; e.availableSize = new y_(Mr(e.width, t) || t || 600, Mr(e.height, i) || i || 450) }(e), e.svgObject = e.renderer.createSvg({ id: e.element.id + "_svg", width: e.availableSize.width, height: e.availableSize.height }) } function yr(e) { return document.getElementById(e) } function vr(e, t, i) { var n = t, r = Sr(t, i).width; if (r > e) for (var o = t.length - 1; o >= 0; --o)if (n = t.substring(0, o) + "...", (r = Sr(n, i).width) <= e || n.length < 4) return n.length < 4 && (n = " "), n; return n } function wr(e) { var t = null; try { document.querySelectorAll(e).length && (t = ce(document.querySelector(e).innerHTML.trim())) } catch (i) { t = ce(e) } return t } function br(e, t, i, n, r) { for (var o = e[0].outerHTML, s = Object.keys(i), a = 0; a < s.length; a++)o = o.replace(new RegExp("{{:" + s[a] + "}}", "g"), i[s[a].toString()]); return M("div", { id: t, innerHTML: o, styles: "position: absolute" }) } function Cr() { for (var e = 1; 1 + .5 * e != 1;)e *= .5; return e } function Lr(e, t, i, n, r) { var o, s; new fw({}).animate(t, { duration: n, delay: i, name: r, progress: function (e) { o = (e.timeStamp - e.delay) / e.duration, s = 0 + 1 * o, e.element.style.opacity = s.toString() }, end: function (t) { t.element.style.opacity = 1..toString(), e.trigger("animationComplete", event) } }) } function Mr(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function Sr(e, t) { var i = document.getElementById("smithchartmeasuretext"); return null === i && (i = M("text", { id: "smithchartmeasuretext" }), document.body.appendChild(i)), i.innerHTML = e, i.style.position = "absolute", i.style.visibility = "hidden", i.style.left = "0", i.style.top = "-100", i.style.whiteSpace = "nowrap", i.style.fontSize = t.size, i.style.fontWeight = t.fontWeight, i.style.fontStyle = t.fontStyle, i.style.fontFamily = t.fontFamily, i.style.lineHeight = "normal", new y_(i.clientWidth, i.clientHeight) } function xr(e) { var t = document.getElementById(e); return t ? k(t) : null } function Tr(e, t, i, n) { return -i * Math.cos(e / n * (Math.PI / 2)) + i + t } function Dr(e, t, i, n) { return -t * Math.sin(e / n * (Math.PI / 2)) + i + t } function Ar(e) { var t; switch (e) { case "Linear": t = Tr; break; case "Reverse": t = Dr }return t } function Er(e, t, i, n) { var r = { id: e.id, x: e.x, y: e.y, fill: i, "font-size": t.size, "font-style": t.fontStyle, "font-family": t.fontFamily, "font-weight": t.fontWeight, "text-anchor": e.anchor, opacity: t.opacity }, o = e.text, s = new JE("").createText(r, o); return n.appendChild(s), s } function jr(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function Ir(e) { e.renderer = new JE(e.element.id), function (e) { var t = e.element.clientWidth, i = e.element.clientHeight; e.availableSize = new SY(jr(e.width, t) || t || 100, jr(e.height, i) || i || (e.isDevice ? Math.min(window.innerWidth, window.innerHeight) : 50)) }(e), e.svgObject = e.renderer.createSvg({ id: e.element.id + "_svg", width: e.availableSize.width, height: e.availableSize.height }) } function kr(e, t) { return t && t.appendChild(e), e } function Pr(e, t, i) { return kr(e.renderer.drawCircle(t), i) } function Nr(e, t, i) { return t.d = function (e, t, i, n, r) { return "M " + e.x + " " + (t + e.y) + " Q " + e.x + " " + e.y + " " + (e.x + t) + " " + e.y + " L " + (e.x + e.width - i) + " " + e.y + " Q " + (e.x + e.width) + " " + e.y + " " + (e.x + e.width) + " " + (e.y + i) + " L " + (e.x + e.width) + " " + (e.y + e.height - r) + " Q " + (e.x + e.width) + " " + (e.y + e.height) + " " + (e.x + e.width - r) + " " + (e.y + e.height) + " L " + (e.x + n) + " " + (e.y + e.height) + " Q " + e.x + " " + (e.y + e.height) + " " + e.x + " " + (e.y + e.height - n) + " L " + e.x + " " + (t + e.y) + " Z" }(t.rect, t.topLeft, t.topRight, t.bottomLeft, t.bottomRight), kr(e.renderer.drawPath(t), i) } function Or(e, t, i) { return kr(e.renderer.drawPath(t), i) } function Rr(e, t) { var i = document.getElementById("sparklinesmeasuretext"); return null === i && (i = M("text", { id: "sparklinesmeasuretext" }), document.body.appendChild(i)), i.innerHTML = e, i.style.fontStyle = t.fontStyle, i.style.fontFamily = t.fontFamily, i.style.visibility = "hidden", i.style.top = "-100", i.style.left = "0", i.style.position = "absolute", i.style.fontSize = t.size, i.style.fontWeight = t.fontWeight, i.style.whiteSpace = "nowrap", i.style.lineHeight = "normal", new SY(i.clientWidth, i.clientHeight) } function zr(e, t, i, n) { var r = { id: e.id, x: e.x, y: e.y, transform: e.transform, opacity: t.opacity, fill: i, "font-family": t.fontFamily, "font-weight": t.fontWeight, "font-size": t.size, "font-style": t.fontStyle, "text-anchor": e.anchor, "dominant-baseline": e.baseLine }, o = new JE("").createText(r, e.text); return o.style["user-select"] = "none", o.style["-moz-user-select"] = "none", o.style["-webkit-touch-callout"] = "none", o.style["-webkit-user-select"] = "none", o.style["-khtml-user-select"] = "none", o.style["-ms-user-select"] = "none", o.style["-o-user-select"] = "none", n.appendChild(o), o } function Br(e) { return document.getElementById(e) } function Fr(e, t, i) { return e >= i.x && e <= i.x + i.width && t >= i.y && t <= i.y + i.height } function Vr(e, t) { var i = document.getElementById("gauge-measuretext"); null === i && (i = M("text", { id: "gauge-measuretext" }), document.body.appendChild(i)); var n = "position: absolute; visibility: hidden;;left: 0; top: -100; white-space: nowrap;" + Hr(t); return i.innerHTML = e, i.setAttribute("style", n), new WY(i.clientWidth, i.clientHeight) } function Wr(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function Hr(e) { return "font-size:" + e.size + "; font-style:" + e.fontStyle + "; font-weight:" + e.fontWeight + "; font-family:" + e.fontFamily + ";opacity:" + e.opacity + "; color:" + e.color + ";" } function _r(e, t, i) { z(e, { stroke: i.color, "stroke-width": i.width, fill: t }) } function Yr(e) { var t; return document.body.appendChild(e), t = e.getBoundingClientRect(), po(e.id), t } function Ur(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function qr(e, t, i, n, r) { var o, s = {}, a = new JE(""), l = r + " font-size:" + t.size + "; font-style:" + t.fontStyle + " ; font-weight:" + t.fontWeight + "; font-family:" + t.fontFamily + ";"; return s = { id: e.id, x: e.x, y: e.y, fill: i, "text-anchor": e.anchor, transform: e.transform, opacity: t.opacity, "dominant-baseline": e.baseLine, style: l }, o = a.createText(s, e.text), n.appendChild(o), o } function Gr(e, t, i, n) { n = n || "Path"; var r = i.renderer["draw" + n](e); return r.setAttribute("transform", e.transform), r.setAttribute("style", e.style), t.appendChild(r), r } function Qr(e, t, i) { for (var n = 0, r = i.length; e < r; e++)n += i[e]; return n } function Xr(e, t, i, n) { return -i * Math.cos(e / n * (Math.PI / 2)) + i + t } function Jr(e, t, i, n, r, o) { var s; return r -= $r(n, r) ? 1e-4 : 0, n -= 90, r -= 90, s = o ? (e - i) * (Zr(n, r) / (t - i)) + n : (s = r - (e - i) * (Zr(n, r) / (t - i))) < 0 ? 360 + s : s, s = Math.round(s) >= 360 ? s - 360 : Math.round(s) < 0 ? 360 + s : s } function Zr(e, t) { var i = t - e; return i < 0 ? i + 360 : i } function Kr(e, t, i, n, r, o) { return r -= $r(n, r) ? 1e-4 : 0, e = e < n ? e + 360 : e, o ? (e - n) / Zr(n, r) * (t - i) + i : t - ((e - n) / Zr(n, r) * (t - i) + i) } function $r(e, t) { var i = t - e; return i = i <= 0 ? i + 360 : i, 0 !== Math.floor(i / 360) } function eo(e, t) { var i = Math.atan2(t.y - e.y, t.x - e.x); return i = Math.round((i < 0 ? 6.283 + i : i) * (180 / Math.PI)) - 270, i += i < 0 ? 360 : 0 } function to(e, t, i) { var n = e * Math.PI / 180; return new HY(Math.cos(n) * t + i.x, Math.sin(n) * t + i.y) } function io(e, t, i, n, r, o) { var s = Zr(t, i -= $r(t, i) ? 1e-4 : 0), a = n - r, l = n - o, h = n - (r + o) / 2; return void 0 !== r && void 0 !== o ? no(to(t, n, e), to(i, n, e), to(t, a, e), to(i, l, e), n, h, h, s < 180 ? 0 : 1) : ao(to(t, n, e), to(i, n, e), n, s < 180 ? 0 : 1) } function no(e, t, i, n, r, o, s, a) { return "M " + e.x + " " + e.y + " A " + r + " " + r + " 0 " + a + " 1 " + t.x + " " + t.y + " L " + n.x + " " + n.y + " A " + s + " " + o + " 0 " + a + " 0 " + i.x + " " + i.y + " Z" } function ro(e, t, i, n, r, o, s, a) { var l = Zr(t, i -= $r(t, i) ? 1e-4 : 0), h = o - s, d = o - a, c = o - (s + a) / 2; return oo(to(t, o, e), to(i, o, e), to(r, o, e), to(r, d, e), to(n, o, e), to(n, h, e), to(t, h, e), to(i, d, e), o, c, c, l < 180 ? 0 : 1) } function oo(e, t, i, n, r, o, s, a, l, h, d, c) { return "M " + e.x + " " + e.y + " A " + l + " " + l + " 0 " + c + " 1 " + t.x + " " + t.y + " C " + i.x + " " + i.y + " " + n.x + " " + n.y + " " + a.x + " " + a.y + " A " + d + " " + h + " 0 " + c + " 0 " + s.x + " " + s.y + " C " + o.x + " " + o.y + " " + r.x + " " + r.y + " " + e.x + " " + e.y + " Z" } function so(e, t, i, n, r) { var o = Zr(t, i -= $r(t, i) ? 1e-4 : 0); return lo(e, to(t, n, e), to(i, n, e), n, to(t, r, e), to(i, r, e), r, o < 180 ? 0 : 1) } function ao(e, t, i, n) { return "M " + e.x + " " + e.y + " A " + i + " " + i + " 0 " + n + " 1 " + t.x + " " + t.y } function lo(e, t, i, n, r, o, s, a) { return "M " + t.x + " " + t.y + " A " + n + " " + n + " 0 " + a + " 1 " + i.x + " " + i.y + " L " + o.x + " " + o.y + " A " + s + " " + s + " 0 " + a + ",0 " + r.x + " " + r.y + " Z" } function ho(e) { return document.getElementById(e) } function co(e) { var t = null; try { document.querySelectorAll(e).length !== document.getElementsByTagName(e).length && (t = ce(document.querySelector(e).innerHTML.trim())) } catch (i) { t = ce(e) } return t } function po(e) { var t = ho(e); t && k(t) } function uo(e, t) { var i; return i = e.replace(t.element.id, "").split("_Axis_")[1], { axisIndex: +i[0], pointerIndex: +i[i.length - 1] } } function go(e, t, i) { var n, r, o = co(e), s = o ? o({}, null, null, t.element.id + "Template") : []; if (o && s.length) { r = t.createElement("div", { id: t.element.id + "_Measure_Element" }), t.element.appendChild(r); for (var a = o({}, null, null, t.element.id + "Template"), l = a.length; l > 0;)r.appendChild(a[0]), l--; i.appendChild(r), n = new WY(i.getBoundingClientRect().width, i.getBoundingClientRect().height), k(r) } return n } function mo(e, t, i) { var n = i.getBoundingClientRect(), r = i.ownerDocument.defaultView.pageXOffset, o = i.ownerDocument.defaultView.pageYOffset, s = i.ownerDocument.documentElement.clientTop, a = i.ownerDocument.documentElement.clientLeft, l = n.left + r - a, h = n.top + o - s; return new HY(e - l, t - h) } function fo(e) { return e && null !== e.match("{value}") ? "" : e } function yo(e, t, i, n, r) { var o = i.width, s = i.height, a = e.x, h = e.y, d = e.x + -o / 2, c = e.y + -s / 2; switch (t) { case "Circle": l(r, { rx: o / 2, ry: s / 2, cx: a, cy: h }); break; case "Diamond": l(r, { d: "M " + d + " " + h + " L " + a + " " + (h + -s / 2) + " L " + (a + o / 2) + " " + h + " L " + a + " " + (h + s / 2) + " L " + d + " " + h + " Z" }); break; case "Rectangle": l(r, { d: "M " + d + " " + (h + -s / 2) + " L " + (a + o / 2) + " " + (h + -s / 2) + " L " + (a + o / 2) + " " + (h + s / 2) + " L " + d + " " + (h + s / 2) + " L " + d + " " + (h + -s / 2) + " Z" }); break; case "Triangle": l(r, { d: "M " + a + " " + h + " L " + (a - s) + " " + (h - o / 2) + "L " + (a - s) + " " + (h + o / 2) + " Z" }); break; case "InvertedTriangle": l(r, { d: "M " + a + " " + h + " L " + (a + s) + " " + (h - o / 2) + "L " + (a + s) + " " + (h + o / 2) + " Z" }); break; case "Image": l(r, { href: n, height: s, width: o, x: d, y: c }) }return r } function vo(e, t, i) { var n = 0, r = 0, o = t.filter(function (t) { return n = Math.min(t.start, t.end), r = Math.max(t.start, t.end), e >= n && r >= e }); return o.length ? o[0].rangeColor : i } function wo(e) { var t, i = [], n = bo(e); if (n.length > 0) for (var r = 0; r < n.length; r++) { var o = n[r], s = ""; switch ((s = o[0]).toLowerCase()) { case "m": for (t = 1; t < o.length; t++)i.push({ command: s, x: o[t], y: o[t + 1] }), t += 1, "m" === s ? s = "l" : "M" === s && (s = "L"); break; case "l": case "t": for (t = 1; t < o.length; t++)i.push({ command: s, x: o[t], y: o[t + 1] }), t += 1; break; case "h": for (t = 1; t < o.length; t++)i.push({ command: s, x: o[t] }); break; case "v": for (t = 1; t < o.length; t++)i.push({ command: s, y: o[t] }); break; case "z": i.push({ command: s }); break; case "c": for (t = 1; t < o.length; t++)i.push({ command: s, x1: o[t], y1: o[t + 1], x2: o[t + 2], y2: o[t + 3], x: o[t + 4], y: o[t + 5] }), t += 5; break; case "s": for (t = 1; t < o.length; t++)i.push({ command: s, x2: o[t], y2: o[t + 1], x: o[t + 2], y: o[t + 3] }), t += 3; break; case "q": for (t = 1; t < o.length; t++)i.push({ command: s, x1: o[t], y1: o[t + 1], x: o[t + 2], y: o[t + 3] }), t += 3; break; case "a": for (t = 1; t < o.length; t++)i.push({ command: s, r1: o[t], r2: o[t + 1], angle: o[t + 2], largeArc: o[t + 3], sweep: o[t + 4], x: o[t + 5], y: o[t + 6] }), t += 6 } } return i } function bo(e) { var t = /([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi, i = [], n = [], r = {}; t.lastIndex = 0; var o = !1; for (r = t.exec(e); r;)"e" === r[1] ? o = !0 : r[1] ? ("zm" === r[1].toLowerCase() ? (i.length && n.push(i), n.push(["Z"]), i = [r[1].substring(1, 2)]) : (i.length && n.push(i), i = [r[1]]), o = !1) : (i.length || (i = []), o || i.push(Number(r[2])), o = !1), r = t.exec(e); return i.length && n.push(i), n } function Co(e, t, i) { var n, r, o = "", s = [{ x: 0 + e, y: 0 }, { x: 0 + i - e, y: 0 }, { x: 0 + i, y: 0 + e }, { x: 0 + i, y: 0 + t - e }, { x: 0 + i - e, y: 0 + t }, { x: 0 + e, y: 0 + t }, { x: 0, y: 0 + t - e }, { x: 0, y: 0 + e }], a = [{ x: 0 + i, y: 0 }, { x: 0 + i, y: 0 + t }, { x: 0, y: 0 + t }, { x: 0, y: 0 }], l = 0; o = "M" + s[0].x + " " + s[0].y; var h; for (h = 0; h < s.length; h += 2)o += "L" + (n = s[h + 1]).x + " " + n.y, r = s[h + 2] || s[0], o += "Q" + a[l].x + " " + a[l].y + " " + r.x + " " + r.y, l++; return o } function Lo(e) { var t, i = ""; i = "M" + e[0].x + " " + e[0].y; var n; for (n = 1; n < e.length; n++)i += "L" + (t = e[n]).x + " " + t.y; return i += "Z" } function Mo(e) { var t, i, n, r, o, s, a, l, h, d, c = []; for (a = 0, l = 0, d = 0, h = e.length; d < h; ++d) { var p = e[d], u = ""; u = p.command, "y1" in p && (r = p.y1), "y2" in p && (s = p.y2), "x1" in p && (n = p.x1), "x2" in p && (o = p.x2), "x" in p && (a = p.x), "y" in p && (l = p.y); var g = c[c.length - 1]; switch (u) { case "M": c.push({ command: "M", x: a, y: l }); break; case "L": c.push({ command: "L", x0: t, y0: i, x: a, y: l }); break; case "H": c.push({ command: "L", x0: t, y0: i, x: a, y: i }); break; case "V": c.push({ command: "L", x0: t, y0: i, x: t, y: l }); break; case "C": c.push({ command: "C", x0: t, y0: i, x1: n, y1: r, x2: o, y2: s, x: a, y: l }); break; case "S": if (g) { var m = void 0, f = { x: 2 * t - (m = "C" === g.command || "S" === g.command ? { x: g.x2, y: g.y2 } : { x: t, y: i }).x, y: 2 * i - m.y }; c.push({ command: "C", x0: t, y0: i, x1: f.x, y1: f.y, x2: o, y2: s, x: a, y: l }) } break; case "Q": c.push({ command: "Q", x0: t, y0: i, x1: n, y1: r, x: a, y: l }); break; case "T": if (g) { m = void 0, f = { x: 2 * t - (m = "Q" === g.command ? { x: g.x1, y: g.y1 } : { x: t, y: i }).x, y: 2 * i - m.y }; c.push({ command: "Q", x0: t, y0: i, x1: f.x, y1: f.y, x: a, y: l }) } break; case "A": var y = p; y.command = "A", c.push(y); break; case "Z": case "z": c.push({ command: "Z" }), a = t, l = i }t = a, i = l } return c } function So(e, t, i, n, r, o, s, a) { var l, h, d, c, p, u, g, m, f; for (p = 0, u = 0, m = 0, g = e.length; m < g; ++m) { var y = e[m], v = y.command; "x" in y && (p = y.x), "y" in y && (u = y.y), "y1" in y && (h = y.y1), "y2" in y && (c = y.y2), "x1" in y && (l = y.x1), "x2" in y && (d = y.x2), n ? (void 0 !== p && (p = To(p, t, r, s)), void 0 !== u && (u = To(u, i, o, a)), void 0 !== l && (l = To(l, t, r, s)), void 0 !== h && (h = To(h, i, o, a)), void 0 !== d && (d = To(d, t, r, s)), void 0 !== c && (c = To(c, i, o, a))) : (void 0 !== p && (p = Number((p + t).toFixed(2))), void 0 !== u && (u = Number((u + i).toFixed(2))), void 0 !== l && (l = Number((l + t).toFixed(2))), void 0 !== h && (h = Number((h + i).toFixed(2))), void 0 !== d && (d = Number((d + t).toFixed(2))), void 0 !== c && (c = Number((c + i).toFixed(2)))); (f = xo(y, v, { x: p, y: u, x1: l, y1: h, x2: d, y2: c, r1: y.r1, r2: y.r2 }, n, t, i)) && (e[m] = f) } return Ao(e) } function xo(e, t, i, n, r, o) { switch (t) { case "M": case "L": e.x = i.x, e.y = i.y; break; case "H": e.x = i.x; break; case "V": e.y = i.y; break; case "C": e.x = i.x, e.y = i.y, e.x1 = i.x1, e.y1 = i.y1, e.x2 = i.x2, e.y2 = i.y2; break; case "S": e.x = i.x, e.y = i.y, e.x2 = i.x2, e.y2 = i.y2; break; case "Q": e.x = i.x, e.y = i.y, e.x1 = i.x1, e.y1 = i.y1; break; case "T": e.x = i.x, e.y = i.y; break; case "A": var s = i.r1, a = i.r2; n && (i.r1 = s *= r, i.r2 = a *= o), e.x = i.x, e.y = i.y, e.r1 = i.r1, e.r2 = i.r2; break; case "z": case "Z": e = { command: "Z" } }return e } function To(e, t, i, n) { return e !== i ? e = n !== i ? e * t - (Number(i) * t - Number(i)) + (n - Number(i)) : Number(e) * t - (Number(i) * t - Number(i)) : n !== i && (e = n), Number(e.toFixed(2)) } function Do(e) { var t, i, n, r, o, s, a, l, h, d; for (a = 0, l = 0, d = 0, h = e.length; d < h; ++d) { var c = e[d], p = c.command; if (/[MLHVCSQTA]/.test(p)) "x" in c && (c.x = a = c.x), "y" in c && (c.y = l = c.y); else { "x1" in c && (c.x1 = n = a + c.x1), "x2" in c && (c.x2 = o = a + c.x2), "y1" in c && (c.y1 = r = l + c.y1), "y2" in c && (c.y2 = s = l + c.y2), "x" in c && (c.x = a += c.x), "y" in c && (c.y = l += c.y); var u = void 0; switch (p) { case "m": case "M": u = { command: "M", x: a, y: l }; break; case "l": case "L": u = { command: "L", x: a, y: l }; break; case "h": case "H": u = { command: "H", x: a }; break; case "v": case "V": u = { command: "V", y: l }; break; case "c": case "C": u = { command: "C", x: a, y: l, x1: n, y1: r, x2: o, y2: s }; break; case "s": case "S": u = { command: "S", x: a, y: l, x2: o, y2: s }; break; case "q": case "Q": u = { command: "Q", x: a, y: l, x1: n, y1: r }; break; case "t": case "T": u = { command: "T", x: a, y: l }; break; case "a": case "A": (u = { command: "A", x: a, y: l }).r1 = c.r1, u.r2 = c.r2, u.angle = c.angle, u.largeArc = c.largeArc, u.sweep = c.sweep; break; case "z": case "Z": u = { command: "Z" }, a = t, l = i, u = e[d] }u && (e[d] = u) } "M" !== p && "m" !== p || (t = a, i = l) } return e } function Ao(e) { var t, i = ""; for (t = 0; t < e.length; t++)i += 0 === t ? Eo(e[t]) : " " + Eo(e[t]); return i } function Eo(e) { var t = ""; switch (e.command) { case "Z": case "z": t = e.command; break; case "M": case "m": case "L": case "l": t = e.command + " " + e.x + " " + e.y; break; case "C": case "c": t = e.command + " " + e.x1 + " " + e.y1 + " " + e.x2 + " " + e.y2 + " " + e.x + " " + e.y; break; case "Q": case "q": t = e.command + " " + e.x1 + " " + e.y1 + " " + e.x + " " + e.y; break; case "A": case "a": var i = e.command, n = e.angle, r = e.largeArc ? "1" : "0", o = e.sweep ? "1" : "0"; t = i + " " + e.r1 + " " + e.r2 + " " + n + " " + r + " " + o + " " + e.x + " " + e.y; break; case "H": case "h": t = e.command + " " + e.x; break; case "V": case "v": t = e.command + " " + e.y; break; case "S": case "s": t = e.command + " " + e.x2 + " " + e.y2 + " " + e.x + " " + e.y; break; case "T": case "t": t = e.command + " " + e.x + " " + e.y }return t } function jo() { return new AU(1, 0, 0, 1, 0, 0, vU.Identity) } function Io(e, t) { var i = function (e, t, i) { switch (e.type) { case vU.Identity: break; case vU.Translation: t += e.offsetX, i += e.offsetY; break; case vU.Scaling: t *= e.m11, i *= e.m22; break; case vU.Translation | vU.Scaling: t *= e.m11, t += e.offsetX, i *= e.m22, i += e.offsetY; break; default: var n = i * e.m21 + e.offsetX, r = t * e.m12 + e.offsetY; t *= e.m11, t += n, i *= e.m22, i += r }return { x: t, y: i } }(e, t.x, t.y); return { x: Math.round(100 * i.x) / 100, y: Math.round(100 * i.y) / 100 } } function ko(e, t) { for (var i = [], n = 0, r = t; n < r.length; n++) { var o = r[n]; i.push(Io(e, o)) } return i } function Po(e, t, i, n) { Ro(e, function (e, t, i) { var n = jo(), r = Math.sin(e), o = Math.cos(e), s = t * (1 - o) + i * r, a = i * (1 - o) - t * r; return n.type = vU.Unknown, zo(n, o, r, -r, o, s, a), n }(.017453292519943295 * (t %= 360), i || 0, n || 0)) } function No(e, t, i, n, r) { void 0 === n && (n = 0), void 0 === r && (r = 0), Ro(e, function (e, t, i, n) { var r = jo(); return r.type = i || n ? vU.Scaling | vU.Translation : vU.Scaling, zo(r, e, 0, 0, t, i - e * i, n - t * n), r }(t, i, n, r)) } function Oo(e, t, i) { return e.type & vU.Identity ? (e.type = vU.Translation, void zo(e, 1, 0, 0, 1, t, i)) : e.type & vU.Unknown ? (e.offsetX += t, void (e.offsetY += i)) : (e.offsetX += t, e.offsetY += i, void (e.type |= vU.Translation)) } function Ro(e, t) { var i = e.type, n = t.type; if (n !== vU.Identity) { if (i === vU.Identity) return Bo(e, t), void (e.type = t.type); if (n === vU.Translation) return e.offsetX += t.offsetX, e.offsetY += t.offsetY, void (i !== vU.Unknown && (e.type |= vU.Translation)); if (i !== vU.Translation) { var r = i << 4 | n; switch (r) { case 34: return e.m11 *= t.m11, void (e.m22 *= t.m22); case 35: return e.m11 *= t.m11, e.m22 *= t.m22, e.offsetX = t.offsetX, e.offsetY = t.offsetY, void (e.type = vU.Translation | vU.Scaling); case 36: break; default: switch (r) { case 50: return e.m11 *= t.m11, e.m22 *= t.m22, e.offsetX *= t.m11, void (e.offsetY *= t.m22); case 51: return e.m11 *= t.m11, e.m22 *= t.m22, e.offsetX = t.m11 * e.offsetX + t.offsetX, void (e.offsetY = t.m22 * e.offsetY + t.offsetY); case 52: break; default: switch (r) { case 66: case 67: case 68: break; default: return } } }var o = jo(); return zo(o, e.m11 * t.m11 + e.m12 * t.m21, e.m11 * t.m12 + e.m12 * t.m22, e.m21 * t.m11 + e.m22 * t.m21, e.m21 * t.m12 + e.m22 * t.m22, e.offsetX * t.m11 + e.offsetY * t.m21 + t.offsetX, e.offsetX * t.m12 + e.offsetY * t.m22 + t.offsetY), o.m21 || o.m12 ? o.type = vU.Unknown : ((o.m11 && 1 !== o.m11 || o.m22 && 1 !== o.m22) && (o.type = vU.Scaling), (o.offsetX || o.offsetY) && (o.type |= vU.Translation), (o.type & (vU.Translation | vU.Scaling)) === vU.Identity && (o.type = vU.Identity), o.type = vU.Scaling | vU.Translation), Bo(e, o), void (e.type = o.type) } var s = e.offsetX, a = e.offsetY; e.offsetX = s * t.m11 + a * t.m21 + t.offsetX, e.offsetY = s * t.m12 + a * t.m22 + t.offsetY, n !== vU.Unknown ? e.type = vU.Translation | vU.Scaling : e.type = vU.Unknown } } function zo(e, t, i, n, r, o, s) { e.m11 = t, e.m12 = i, e.m21 = n, e.m22 = r, e.offsetX = o, e.offsetY = s } function Bo(e, t) { e.m11 = t.m11, e.m12 = t.m12, e.m21 = t.m21, e.m22 = t.m22, e.offsetX = t.offsetX, e.offsetY = t.offsetY, e.type = t.type } function Fo(e) { return mq[e.toString()] } function Vo(e) { return kq[e.toString()] } function Wo(e, t) { return "Custom" === e ? t.pathData : Pq[e] } function Ho(e) { var t; switch (e.shape) { case "Minus": t = "M0,50 L100,50"; break; case "Plus": t = "M0,-50 L0,50 M-50,0 L50,0"; break; case "ArrowUp": t = "M0,100 L50,0 L100,100 Z"; break; case "ArrowDown": t = "M0,0 L50,100 L100,0 Z"; break; case "Path": t = e.pathData }return t } function _o(e) { return Nq[e.toString()] } function Yo(e, t) { var i, n; return n = "Straight" !== e.type && e.sourceWrapper ? e.sourceWrapper.corners.center : function (e) { var t; if (e.sourcePortWrapper) { var i = e.sourcePortWrapper, n = e.sourceWrapper, r = { x: i.offsetX, y: i.offsetY }; Ms(r, Fh(n), n.bounds, !1); t = r } else if (e.sourceID && e.sourceWrapper) if (e.targetWrapper) { var o = e.sourceWrapper.corners.center, s = e.targetWrapper.corners.center; t = ps(e, e.sourceWrapper, o, s, !1) } else t = e.sourcePoint; else t = e.sourcePoint; return t }(e), i = function (e, t, i, n) { var r, o, s = e.sourceWrapper, a = e.targetWrapper, l = e.sourcePortWrapper, h = e.targetPortWrapper, d = [], c = { corners: void 0, point: t, direction: void 0, margin: { left: 5, right: 5, bottom: 5, top: 5 } }, p = { corners: void 0, point: i, direction: void 0, margin: { left: 5, right: 5, bottom: 5, top: 5 } }; void 0 !== s && void 0 !== a && (r = Fh(s), o = Fh(a), c.corners = s.corners, p.corners = a.corners); if (void 0 !== l) { var u = { x: l.offsetX, y: l.offsetY }; c.direction = Ms(u, r, s.bounds, !1) } if (void 0 !== h) { var g = { x: h.offsetX, y: h.offsetY }; p.direction = Ms(g, o, a.bounds, !1) } if (void 0 !== s && void 0 !== a) return void 0 !== c.direction && void 0 !== p.direction || (n ? function (e, t, i) { "LeftToRight" === i ? (e.direction = e.direction ? e.direction : "Right", t.direction = t.direction ? t.direction : "Left") : "RightToLeft" === i ? (e.direction = e.direction ? e.direction : "Left", t.direction = t.direction ? t.direction : "Right") : "TopToBottom" === i ? (e.direction = e.direction ? e.direction : "Bottom", t.direction = t.direction ? t.direction : "Top") : "BottomToTop" === i && (e.direction = e.direction ? e.direction : "Top", t.direction = t.direction ? t.direction : "Bottom") }(c, p, n) : c.corners.top > p.corners.bottom && Math.abs(c.corners.top - p.corners.bottom) > c.margin.top + c.margin.bottom ? (c.direction = c.direction ? c.direction : "Top", p.direction = p.direction ? p.direction : "Bottom") : c.corners.bottom < p.corners.top && Math.abs(c.corners.bottom - p.corners.top) > c.margin.bottom + c.margin.top ? (c.direction = c.direction ? c.direction : "Bottom", p.direction = p.direction ? p.direction : "Top") : c.corners.right < p.corners.left && Math.abs(c.corners.right - p.corners.left) > c.margin.right + c.margin.left || c.corners.right + 13 < p.corners.left || p.corners.right >= c.corners.left - 13 && c.corners.left > p.corners.left ? (c.direction = c.direction ? c.direction : "Right", p.direction = p.direction ? p.direction : "Left") : c.corners.left > p.corners.right && Math.abs(c.corners.left - p.corners.right) > c.margin.left + c.margin.right || p.corners.right + 13 < c.corners.left || c.corners.right >= p.corners.left - 13 && c.corners.left < p.corners.left ? (c.direction = c.direction ? c.direction : "Left", p.direction = p.direction ? p.direction : "Right") : s.id !== a.id && !r.equals(r, o) && o.containsPoint(r.topCenter, c.margin.top) ? (c.direction = c.direction ? c.direction : "Bottom", p.direction = p.direction ? p.direction : "Top") : (c.direction = c.direction ? c.direction : "Top", p.direction = p.direction ? p.direction : "Bottom")), function (e, t, i, n, r) { var o, s = e.sourceWrapper, a = e.targetWrapper, l = e.sourcePortWrapper, h = e.targetPortWrapper, d = [], c = s.corners, p = a.corners, u = (p.center, { corners: c, point: n, direction: t, margin: { left: 5, right: 5, bottom: 5, top: 5 } }), g = { corners: p, point: r, direction: i, margin: { left: 5, right: 5, bottom: 5, top: 5 } }, m = es(s, c, e.sourceWrapper.bounds), f = es(a, p, e.targetWrapper.bounds), y = !1; e.sourceWrapper && e.targetWrapper && (y = function (e, t, i) { for (var n = $o(e, i.sourcePadding), r = $o(t, i.targetPadding), o = 0; o < n.length - 1; o++)for (var s = n[o], a = 0; a < r.length - 1; a++) { var l = r[a]; if (fl(s, l).enabled) return !0 } return !1 }(e.sourceWrapper, e.targetWrapper, e)); if (void 0 !== l) { switch (u.point = { x: l.offsetX, y: l.offsetY }, u.direction) { case "Bottom": case "Top": u.point.y = u.point.y; break; case "Left": case "Right": u.point.x = u.point.x }e.sourcePadding && !y && (h && (g.point = { x: h.offsetX, y: h.offsetY }), u.point = Ko(e, u, g, !1)) } else "Orthogonal" === e.type ? (e.segments && e.segments.length > 0 && e.segments[0].direction && (u.direction = e.segments[0].direction), u.point = ds(m, u.direction), o = ds(m, xs(u.direction)), u.point = ps(e, s, u.point, o, !1)) : u.point = s.corners.center; if (void 0 !== h) { switch (g.point = { x: h.offsetX, y: h.offsetY }, g.direction) { case "Bottom": case "Top": g.point.y = g.point.y; break; case "Left": case "Right": g.point.x = g.point.x }e.targetPadding && !y && (g.point = Ko(e, u, g, !0)) } else "Orthogonal" === e.type ? (g.point = ds(f, g.direction), o = ds(f, xs(g.direction)), g.point = ps(e, a, g.point, o, !0)) : g.point = a.corners.center; if ("Orthogonal" !== e.type) { var v = void 0, w = void 0; if (ns(e), void 0 === e.sourcePortWrapper) { u.point = u.corners.center, e.segments && e.segments.length > 0 && (w = e.segments[0], v = xU.isEmptyPoint(w.point) ? void 0 : w); var b = void 0 !== v ? v.point : g.point; if ("Bezier" === e.type && e.segments.length > 0 && e.segments[0].vector1.angle && e.segments[0].vector1.distance) { var C = Math.max(u.corners.width, u.corners.height); b = xU.transform(u.point, e.segments[0].vector1.angle, C / 2) } u.point = y ? e.sourceWrapper.bounds.center : ps(e, s, u.point, b, !1) } if (void 0 === e.targetPortWrapper) { g.point = g.corners.center, e.segments && e.segments.length > 1 && (w = e.segments[e.segments.length - 2], v = xU.isEmptyPoint(w.point) ? void 0 : w); var L = v ? v.point : u.point; if ("Bezier" === e.type && e.segments.length > 0 && e.segments[e.segments.length - 1].vector2.angle && e.segments[e.segments.length - 1].vector2.distance) { var C = Math.max(u.corners.width, u.corners.height); L = xU.transform(g.point, e.segments[0].vector2.angle, C / 2) } g.point = y ? e.targetWrapper.bounds.center : ps(e, a, L, g.point, !0) } d = ts(e, u, g) } else if ("Orthogonal" === e.type && e.segments && e.segments.length > 0 && null !== e.segments[0].direction) d = function (e, t, i, n, r, o, s) { var a, l, h, d; ns(e); for (var c = 0; c < e.segments.length; c++) { if (l = e.segments[c], n && t.direction === xs(l.direction) && (l.direction = t.direction), c > 0 && e.segments[c - 1].direction === l.direction) c = rs(e, c, t); else if (l.direction) t.point = Uo(t, e.segments[c]); else { var p = e.segments[c - 1]; t.point = p.points[p.points.length - 1] } if (c === e.segments.length - 1) if (ss(e, t), a = void 0 === r ? os(e, t, i) : Xo(e, t, i), Zo(a, e, t), l.points = [], a.length >= 2) for (h = 0; h < a.length; h++)l.points.push(a[h]); else d = c; if (void 0 !== d && (d === e.segments.length - 1 && (e.segments[d - 1].direction = null, e.segments[d - 1].length = null), e.segments.splice(d, 1)), n && 0 === c) { var u = Jo(e, n, o); u && (t.point = u) } } return as(e, []) }(e, u, g, l, h, s); else { if (!e.segments[0]) { var v = new rG(e, "segments", { type: "Orthogonal" }, !0); e.segments.push(v) } e.segments[0].points = d = function (e, t, i, n) { var r, o = !1; (o = function (e, t) { var i = !1; switch (e) { case "Left": switch (t) { case "Right": case "Bottom": i = !0 }break; case "Top": switch (t) { case "Left": case "Right": case "Bottom": i = !0 }break; case "Bottom": switch (t) { case "Right": i = !0 } }return i }(t.direction, i.direction)) && Ls(t, i); "Right" === t.direction && "Left" === i.direction ? r = function (e, t, i, n) { var r, o = e.sourcePortWrapper, s = (e.targetPortWrapper, Math.round(Math.abs(t.point.y - i.point.y))), a = (Math.round(Math.abs(t.point.x - i.point.x)), { x: Math.max(t.point.x, t.corners.right), y: t.point.y }), l = { x: Math.min(i.point.x, i.corners.left), y: i.point.y }, h = 10; if (n) { var d = void 0; d = l, l = a, a = d } t.corners.bottom + h < i.corners.top - h || t.corners.top - h > i.corners.bottom + h || (h = 0); t.margin = { left: h, right: h, top: h, bottom: h }, i.margin = { left: h, right: h, top: h, bottom: h }, r = 0 === s && (t.corners.right < i.corners.left || n && t.corners.right < i.corners.left) ? rq.One : t.point.x + t.margin.right < i.point.x - i.margin.left ? rq.Three : e.sourceWrapper !== e.targetWrapper && (Fh(e.sourceWrapper).containsPoint(l) || Fh(e.targetWrapper).containsPoint(a)) ? rq.Three : t.corners.bottom <= i.corners.top ? rq.Five : t.corners.top >= i.corners.top ? rq.Five : void 0 !== o && o.offsetY <= i.corners.top || void 0 === o && t.corners.right <= i.corners.top ? rq.Five : (void 0 !== o && o.offsetY >= i.corners.bottom || void 0 === o && (t.corners.right, i.corners.bottom), rq.Five); return r }(e, t, i, o) : "Right" === t.direction && "Right" === i.direction ? r = function (e, t, i) { var n, r = e.sourcePortWrapper, o = e.targetPortWrapper, s = t.point.x - i.point.x, a = t.point.y - i.point.y; i.margin = { left: 10, right: 10, top: 10, bottom: 10 }, t.margin = { left: 10, right: 10, top: 10, bottom: 10 }, n = t.corners.right >= i.corners.right ? void 0 !== r && (r.offsetY < i.corners.top || r.offsetY > i.corners.bottom) || void 0 === r && t.corners.middleRight.y < i.corners.top ? rq.Three : void 0 !== r && r.offsetY > i.corners.bottom + i.margin.bottom && t.corners.top > i.corners.bottom || void 0 === r && t.corners.middleRight.y > i.corners.bottom ? rq.Three : void 0 !== r && r.offsetY < i.corners.top && t.corners.bottom > i.corners.top || void 0 === r && t.corners.middleRight.y > i.corners.bottom ? rq.Three : t.corners.right < i.corners.left || i.corners.right < t.corners.left ? rq.Five : 0 === s || 0 === a ? rq.One : rq.Three : void 0 !== o && t.corners.bottom < o.offsetY || void 0 === o && t.corners.bottom < i.corners.middleRight.y ? rq.Three : void 0 !== o && t.corners.top > o.offsetY || void 0 === o && t.corners.top > i.corners.middleRight.y ? rq.Three : void 0 !== o && (void 0 !== r && r.offsetX < i.corners.left && r.offsetX !== o.offsetX && r.offsetY !== o.offsetY && Math.abs(t.corners.right - i.corners.left) <= 20 || void 0 === r && t.corners.right < i.corners.left && t.corners.center.x !== i.corners.center.x && t.corners.center.y !== i.corners.center.y) ? rq.Three : t.corners.right < i.corners.left ? rq.Five : 0 === s || 0 === a ? rq.One : rq.Three; return n }(e, t, i) : "Right" === t.direction && "Top" === i.direction ? r = function (e, t, i, n) { var r, o = e.targetPortWrapper, s = e.sourcePortWrapper, a = { x: Math.max(t.point.x, t.corners.right), y: t.point.y }, l = { x: i.point.x, y: Math.min(i.point.y, i.corners.top) }; if (i.margin = { left: 5, right: 5, top: 5, bottom: 5 }, t.margin = { top: 5, bottom: 5, left: 5, right: 5 }, n) { var h = void 0; h = s, s = o, o = h } r = void 0 !== s && s.offsetY < i.corners.top - i.margin.top || void 0 === s && t.corners.bottom < i.corners.top - i.margin.top ? t.corners.bottom < i.corners.top ? void 0 !== o && t.corners.right + t.margin.right < o.offsetX || void 0 === o && t.corners.right + t.margin.right < i.corners.topCenter.x ? rq.Two : rq.Four : void 0 !== o && t.corners.left > o.offsetX || void 0 === o && t.corners.left > i.corners.topCenter.x ? rq.Four : rq.Two : void 0 !== s && Math.abs(t.corners.right - i.corners.left) <= 25 && Math.abs(s.offsetY - i.corners.top) <= 25 ? rq.Two : void 0 !== o && Math.abs(o.offsetX - t.corners.topCenter.x) >= 25 && t.corners.middleRight.y < o.offsetY ? rq.Two : t.corners.right < i.corners.left ? rq.Four : e.sourceWrapper !== e.targetWrapper && (Fh(e.sourceWrapper).containsPoint(l) || Fh(e.targetWrapper).containsPoint(a)) ? rq.Two : rq.Four; return r }(e, t, i, o) : "Right" === t.direction && "Bottom" === i.direction ? r = function (e, t, i, n) { t.margin = { left: 10, right: 10, top: 10, bottom: 10 }, i.margin = { left: 10, right: 10, top: 10, bottom: 10 }; var r, o = e.sourcePortWrapper, s = e.targetPortWrapper; Math.max(t.point.x, t.corners.right), t.point.y, i.point.x, Math.max(i.point.y, i.corners.bottom); if (n) { var a = void 0; a = o, o = s, s = a } r = void 0 !== o && o.offsetY > i.corners.bottom + i.margin.bottom || void 0 === o && t.corners.middleRight.y > i.corners.bottom + i.margin.bottom ? t.corners.top > i.corners.bottom ? void 0 !== s && t.corners.right + t.margin.right < s.offsetX || void 0 === s && t.corners.right + t.margin.right < i.corners.bottomCenter.x ? rq.Two : rq.Four : void 0 !== s && t.corners.left > s.offsetX || void 0 === s && t.corners.left > i.corners.bottomCenter.x ? rq.Four : rq.Two : void 0 !== o && Math.abs(t.corners.right - i.corners.left) <= 25 && Math.abs(o.offsetY - i.corners.bottom) <= 25 ? rq.Two : (t.corners.right, i.corners.left, rq.Four); return r }(e, t, i, o) : "Bottom" === t.direction && "Top" === i.direction ? r = function (e, t) { var i, n = e.point.x - t.point.x, r = (e.point.y, t.point.y, e.point.x, Math.max(e.point.y, e.corners.bottom), t.point.x, Math.min(t.point.y, t.corners.top), 10); e.corners.right + r < t.corners.left - r || e.corners.left - r > t.corners.right + r || (r = 0); e.margin = { left: r, right: r, top: r, bottom: r }, t.margin = { left: r, right: r, top: r, bottom: r }, i = 0 === n && e.corners.bottom < t.corners.top ? rq.One : e.corners.bottom + e.margin.bottom < t.corners.top - t.margin.top ? rq.Three : e.corners.right + e.margin.right < t.corners.left - t.margin.left ? rq.Five : (e.corners.left, e.margin.left, t.corners.right, t.margin.right, rq.Five); return i }(t, i) : "Bottom" === t.direction && "Bottom" === i.direction ? (t.margin = { left: 10, right: 10, top: 10, bottom: 10 }, i.margin = { left: 10, right: 10, top: 10, bottom: 10 }, r = function (e, t, i) { var n, r = e.sourcePortWrapper, o = e.targetPortWrapper, s = Math.round(Math.abs(t.point.x - i.point.x)), a = Math.round(Math.abs(i.point.y - i.point.y)); n = t.corners.bottom < i.corners.bottom ? void 0 !== r && r.offsetX < i.corners.left - i.margin.left || void 0 === r && t.corners.bottomCenter.x < i.corners.left - i.margin.left ? rq.Three : void 0 !== r && r.offsetX > i.corners.right + i.margin.right || void 0 === r && t.corners.bottomCenter.x > i.corners.right + i.margin.right ? rq.Three : t.corners.bottom < i.corners.top ? rq.Five : 0 === s || 0 === a ? rq.One : rq.Three : void 0 !== o && t.corners.left > o.offsetX || void 0 === o && t.corners.left > i.corners.left ? rq.Three : void 0 !== o && t.corners.right < o.offsetX || void 0 === o && t.corners.right < i.corners.right ? rq.Three : t.corners.top > i.corners.bottom ? rq.Five : 0 === s || 0 === a ? rq.One : rq.Three; return n }(e, t, i)) : "Bottom" === t.direction && "Left" === i.direction ? r = function (e, t, i, n) { var r, o = e.sourcePortWrapper, s = e.targetPortWrapper; t.point.x, Math.max(t.point.y, t.corners.bottom), Math.min(i.point.x, i.corners.left), i.point.y; if (n) { var a = void 0; a = o, o = s, s = a } r = void 0 !== o && o.offsetX < i.corners.left - i.margin.left || void 0 === o && t.corners.bottomCenter.x < i.corners.bottomLeft.x - i.margin.left ? t.corners.right < i.corners.left ? void 0 !== s && t.corners.bottom + t.margin.bottom < s.offsetY || void 0 === s && t.corners.bottom + t.margin.bottom < i.corners.middleLeft.y ? rq.Two : rq.Four : void 0 !== s && t.corners.top > s.offsetY || void 0 === s && t.corners.top > i.corners.middleLeft.y ? rq.Four : rq.Two : void 0 !== s && Math.abs(t.corners.right - i.corners.left) <= 25 && Math.abs(s.offsetY - t.corners.bottom) <= 25 ? rq.Two : rq.Four; return r }(e, t, i, o) : "Left" === t.direction && "Left" === i.direction ? r = function (e, t, i) { var n = e.sourcePortWrapper, r = e.targetPortWrapper; t.margin = { left: 10, right: 10, top: 10, bottom: 10 }, i.margin = { left: 10, right: 10, top: 10, bottom: 10 }; var o, s = Math.round(Math.abs(t.point.x - i.point.x)), a = Math.round(Math.abs(t.point.y - i.point.y)); o = t.corners.left < i.corners.left ? void 0 !== r && t.corners.bottom + t.margin.bottom < r.offsetY || void 0 === r && t.corners.bottom + t.margin.bottom < i.corners.middleLeft.y ? rq.Three : void 0 !== r && t.corners.top - t.margin.top > r.offsetY || void 0 === r && t.corners.top - t.margin.top > i.corners.middleLeft.y ? rq.Three : t.corners.right < i.corners.left || i.corners.right < t.corners.left ? rq.Five : 0 === s || 0 === a ? rq.One : rq.Three : void 0 !== n && n.offsetY < i.corners.top - i.margin.top || void 0 === n && t.corners.middleLeft.y < i.corners.top ? rq.Three : void 0 !== n && n.offsetY > i.corners.bottom + i.margin.bottom || void 0 === n && t.corners.middleLeft.y > i.corners.bottom + i.margin.bottom ? rq.Three : t.corners.left > i.corners.right ? rq.Five : 0 === s || 0 === a ? rq.One : rq.Three; return o }(e, t, i) : "Left" === t.direction && "Top" === i.direction ? r = function (e, t, i, n) { var r, o = e.sourcePortWrapper, s = e.targetPortWrapper, a = { x: Math.min(t.point.x, t.corners.left), y: t.point.y }, l = { x: i.point.x, y: Math.min(i.point.y, i.corners.top) }; if (n) { var h = void 0; h = o, o = s, s = h } r = void 0 !== o && o.offsetY < i.corners.top - i.margin.top || void 0 === o && (t.corners.bottom < i.corners.top - i.margin.top || t.corners.middleLeft.y < i.corners.top - i.margin.top) ? t.corners.bottom < i.corners.top ? void 0 !== s && t.corners.left - t.margin.left > s.offsetX || void 0 === s && t.corners.left - t.margin.left > i.corners.topCenter.x ? rq.Two : rq.Four : void 0 !== s && t.corners.right < s.offsetX || void 0 === s && t.corners.right < i.corners.topCenter.x ? rq.Four : rq.Two : void 0 !== o && Math.abs(t.corners.left - i.corners.right) <= 25 && Math.abs(o.offsetY - i.corners.top) <= 25 ? rq.Two : e.sourceWrapper !== e.targetWrapper && (Fh(e.sourceWrapper).containsPoint(l) || Fh(e.targetWrapper).containsPoint(a)) ? rq.Two : (t.corners.left, i.corners.right, rq.Four); return r }(e, t, i, o) : "Top" === t.direction && "Top" === i.direction && (r = function (e, t, i) { var n = e.sourcePortWrapper, r = e.targetPortWrapper, o = Math.round(Math.abs(t.point.x - i.point.x)), s = Math.round(Math.abs(t.point.y - i.point.y)); t.margin = { left: 10, right: 10, top: 10, bottom: 10 }; var a; i.margin = { left: 10, right: 10, top: 10, bottom: 10 }, a = t.corners.top < i.corners.top ? void 0 !== r && t.corners.left > r.offsetX || void 0 === r && t.corners.left > i.corners.left ? rq.Three : void 0 !== r && t.corners.right < r.offsetX || void 0 === r && t.corners.right < i.corners.right ? rq.Three : t.corners.bottom < i.corners.top ? rq.Five : 0 === o || 0 === s ? rq.One : rq.Three : void 0 !== n && n.offsetX > i.corners.right || void 0 === n && t.corners.left > i.corners.right ? rq.Three : void 0 !== n && n.offsetX < i.corners.left || void 0 === n && t.corners.bottomRight.x < i.corners.left ? rq.Three : t.corners.top > i.corners.bottom ? rq.Five : 0 === o || 0 === s ? rq.One : rq.Three; return a }(e, t, i)); o && Ls(t, i); return function (e, t, i, n, r) { var o, s = e.sourceWrapper, a = e.targetWrapper, l = (e.targetPortWrapper, s.corners), h = a.corners, d = 20; if (!(i.direction === n.direction && t !== rq.Five || i.direction !== xs(n.direction) && t !== rq.Three)) switch (i.direction) { case "Left": l.middleLeft.x > h.middleRight.x && (d = Math.min(d, (l.middleLeft.x - h.middleRight.x) / 2)); break; case "Right": l.middleRight.x < h.middleLeft.x && (d = Math.min(d, (h.middleLeft.x - l.middleRight.x) / 2)); break; case "Top": l.topCenter.y > h.bottomCenter.y && (d = Math.min(d, (l.topCenter.y - h.bottomCenter.y) / 2)); break; case "Bottom": l.bottomCenter.y < h.topCenter.y && (d = Math.min(d, (h.topCenter.y - l.bottomCenter.y) / 2)) }if (d = ys(l, i, d), r && (d = Math.max(d, r)), t === rq.One && (o = [i.point, n.point]), t === rq.Two && (o = vs(i, n)), t === rq.Three && (o = ws(e, i, n, d)), t === rq.Four) { var c = void 0; o = bs(i, n, c, o, d) } return t === rq.Five && (o = function (e, t, i) { void 0 === i && (i = 20); var n, r, o = i, s = e.corners.left - e.margin.left, a = e.corners.right + e.margin.right, l = e.corners.bottom + e.margin.bottom, h = e.corners.top - e.margin.top, d = t.corners.left - t.margin.left, c = t.corners.right + t.margin.right, p = t.corners.bottom + t.margin.bottom, u = t.corners.top - t.margin.top; switch (e.direction) { case "Left": (h > u && h < p || l < p && l > u) && s > d && s <= c && i >= 20 && (o = e.point.x - t.corners.left + o), r = cs(e.point, o, 180); break; case "Top": (s > d && s < c || a < c && a > d) && h > u && h <= p && i >= 20 && (o = e.point.y - t.corners.top + o), r = cs(e.point, o, 270); break; case "Right": (h > u && h < p || l < p && l > u) && a < c && a >= d && i >= 20 && (o = t.corners.right - e.point.x + o), r = cs(e.point, o, 0); break; case "Bottom": (s > d && s < c || a < c && a > d) && l < p && l >= u && i >= 20 && (o = t.corners.bottom - e.point.y + o), r = cs(e.point, o, 90) }if (n = [e.point, r], "Top" === e.direction || "Bottom" === e.direction) { var g = e.direction; e.direction = r.x > t.point.x ? "Left" : "Right", e.point = r, n = bs(e, t, g, n) } else { var g = e.direction; e.direction = r.y > t.point.y ? "Top" : "Bottom", e.point = r, n = bs(e, t, g, n) } return n }(i, n, d)), o }(e, r, t, i, n) }(e, u, g) } return d }(e, c.direction, p.direction, c.point, p.point); ns(e), (e.sourceWrapper || e.targetWrapper) && function (e, t, i) { var n, r = e.sourcePortWrapper, o = e.targetPortWrapper, s = e.sourceWrapper, a = t.point, l = { left: 0, right: 0, top: 0, bottom: 0 }, h = { x: 0, y: 0 }, d = "Top"; s ? (a = i.point, l = t.margin) : (s = e.targetWrapper, l = i.margin); if ("Orthogonal" === e.type) if (e.segments && e.segments.length > 0 && e.sourceWrapper && e.segments[0].direction) t.direction = e.segments[0].direction, h = ds(s.corners, t.direction), n = ds(s.corners, xs(t.direction)), h = ps(e, s, h, n, !1); else { var c = { corners: null, direction: null, point: a, margin: l }, p = { corners: null, direction: null, point: null, margin: null }; ls(s, c, p, e), h = p.point, d = p.direction } else { var u = void 0; e.segments && e.segments.length > 1 && (u = s === e.sourceWrapper ? e.segments[0].point : e.segments[e.segments.length - 2].point), h = ps(e, s, s.bounds.center, e.segments && e.segments.length > 1 ? u : a, s === e.targetWrapper) } s === e.sourceWrapper ? (t.direction = t.direction || d, t.point = h, e.sourcePortWrapper && (t.point = { x: r.offsetX, y: r.offsetY }, e.sourcePadding && (t.point = Ko(e, t, i, !1)))) : (i.direction = i.direction || d, i.point = h, e.targetPortWrapper && (i.point = { x: o.offsetX, y: o.offsetY }, e.targetPadding && (i.point = Ko(e, t, i, !0)))) }(e, c, p); if ("Straight" === e.type || "Bezier" === e.type) d = ts(e, c, p); else if ("Orthogonal" === e.type && e.segments && e.segments.length > 0 && null !== e.segments[0].length && null !== e.segments[0].direction) d = function (e, t, i, n, r, o, s) { var a, l, h, d, c = []; ns(e); var p; if (e.segments.length > 0) { for (var u = 0; u < e.segments.length; u++) { var g = e.segments[u]; if (0 === u && void 0 !== e.sourcePortWrapper && (d = { x: o.offsetX, y: o.offsetY }, h = Ms(d, Fh(n), n.bounds, !1), g.direction === xs(h) && (g.direction = h)), u > 0 && e.segments[u - 1].direction === g.direction) u = rs(e, u, t); else { var m = e.segments[u - 1]; t.point = g.direction ? Uo(t, g) : m.points[m.points.length - 1] } if (u === e.segments.length - 1) if (s || r ? e.targetWrapper && void 0 === e.targetPortWrapper ? (ss(e, t), l = Go(e, t, i)) : l = Xo(e, t, i) : l = qo(e, t, i), Zo(l, e, t), g.points = [], l.length >= 2) for (a = 0; a < l.length; a++)g.points.push(l[a]); else p = u; if (o && 0 === u) { var f = Jo(e, o, n); f && (t.point = f) } } void 0 !== p && (p === e.segments.length - 1 && (e.segments[p - 1].direction = null, e.segments[p - 1].length = null), e.segments.splice(p, 1)), c = as(e, c) } return c }(e, c, p, s, a, l, h); else { var m = void 0; c.direction ? m = ys(s.bounds, c, 20) : c.direction = p.direction ? void 0 !== e.targetPortWrapper ? p.direction : xs(p.direction) : xU.direction(c.point, p.point), e.segments[0].points = d = ws(e, c, p, m) } return d }(e, n, e.targetPoint, t), us(e, i[0], !1), us(e, i[i.length - 1], !0), i } function Uo(e, t) { var i, n, r; return e.direction = t.direction, t.points = [], t.points.push(e.point), r = "Left" === t.direction || "Top" === t.direction ? -t.length : t.length, n = "Left" === t.direction || "Right" === t.direction ? 0 : 90, i = cs(e.point, r, n), t.points.push(i), i } function qo(e, t, i) { var n, r, o; if (t.corners = e.sourceWrapper ? e.sourceWrapper.corners : void 0, e.sourcePortWrapper) { o = Ms({ x: e.sourcePortWrapper.offsetX, y: e.sourcePortWrapper.offsetY }, Fh(e.sourceWrapper), e.sourceWrapper.bounds, !1), !t.corners || "Bottom" !== t.direction && "Top" !== t.direction ? !t.corners || "Left" !== t.direction && "Right" !== t.direction || i.point.y > t.corners.top && i.point.y < t.corners.bottom && (r = t.point.x > i.point.x ? "Left" : "Right") : i.point.x > t.corners.left && i.point.x < t.corners.right && (r = t.point.y > i.point.y ? "Top" : "Bottom") } if (e.sourcePortWrapper && o === xs(r)) { var s; ("Left" === o || "Right" === o) && t.point.y >= t.corners.top && t.point.y <= t.corners.center.y && i.point.y >= t.corners.top && i.point.y <= t.corners.center.y ? (t.direction = "Top", s = t.point.y - t.corners.top + 20) : ("Left" === o || "Right" === o) && t.point.y > t.corners.center.y && t.point.y <= t.corners.bottom && i.point.y > t.corners.center.y && i.point.y <= t.corners.bottom ? (t.direction = "Bottom", s = t.corners.bottom - t.point.y + 20) : ("Top" === o || "Bottom" === o) && t.point.x >= t.corners.left && t.point.x <= t.corners.center.x && i.point.x >= t.corners.left && i.point.x <= t.corners.center.x ? (t.direction = "Left", s = t.point.x - t.corners.left + 20) : ("Top" === o || "Bottom" === o) && t.point.x <= t.corners.right && t.point.x > t.corners.center.x && i.point.x <= t.corners.right && i.point.x < t.corners.center.x && (t.direction = "Right", s = t.corners.right - t.point.x + 20), t.direction && s && (n = ws(e, t, i, s, !0)) } else t.direction = r || is(t.direction, t.point, i.point), n = vs(t, i); return n } function Go(e, t, i) { var n; i.corners = e.targetWrapper.corners, ls(e.targetWrapper, t, i, e); var r = is(i.direction, t.point, i.point); if (t.direction !== i.direction || "Left" !== t.direction && "Right" !== t.direction) t.direction = r, n = vs(t, i); else { t.direction = r, n = ws(e, t, i, e.targetWrapper.width / 2 + 20); t.point = n[1], ls(e.targetWrapper, t, i, e), n = ws(e, t, i) } return n } function Qo(e, t, i) { var n; i.corners = e.targetWrapper.corners; var r, o; "Left" !== t.direction && "Right" !== t.direction ? i.corners.center.y !== t.point.y || i.corners.left <= t.point.x && t.point.x <= i.corners.right ? i.corners.center.y === t.point.y && "Bottom" === e.segments[e.segments.length - 2].direction || i.corners.center.y > t.point.y && t.point.y >= i.corners.top ? (r = "Top", o = t.point.y - i.corners.top + 20) : i.corners.center.y === t.point.y && "Top" === e.segments[e.segments.length - 2].direction || i.corners.center.y < t.point.y && t.point.y <= i.corners.bottom ? (r = "Bottom", o = i.corners.bottom - t.point.y + 20) : void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && t.corners.top <= t.point.y && t.point.y <= t.corners.bottom && (r = t.direction, o = t.point.y > i.point.y ? t.point.y - t.corners.top + 20 : t.corners.bottom - t.point.y + 20) : (r = "Top", o = i.corners.height / 2 + 20) : i.corners.center.x !== t.point.x || i.corners.top < t.point.y && t.point.y <= i.corners.bottom ? i.corners.center.x === t.point.x && "Right" === e.segments[e.segments.length - 2].direction || i.corners.center.x > t.point.x && t.point.x >= i.corners.left ? (r = "Left", o = t.point.x - i.corners.left + 20) : i.corners.center.x === t.point.x && "Left" === e.segments[e.segments.length - 2].direction || i.corners.center.x <= t.point.x && t.point.x <= i.corners.right ? (r = "Right", o = i.corners.right - t.point.x + 20) : void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && t.corners.left <= t.point.x && t.point.x <= t.corners.right && (r = t.direction, o = t.point.x > i.point.x ? t.point.x - t.corners.left + 20 : t.corners.right - t.point.x + 20) : (r = "Left", o = i.corners.width / 2 + 20); var s = "Left" === r || "Top" === r ? -o : o, a = "Left" === r || "Right" === r ? 0 : 90; n = t.point, t.point = cs(t.point, s, a), t.direction = xU.direction(t.point, i.point), void 0 === e.sourcePortWrapper || void 0 === e.targetPortWrapper || t.corners.center.x !== i.corners.center.x && t.corners.center.y !== i.corners.center.y || (t.direction = i.direction); var l = ws(e, t, i); return l.splice(0, 0, n), l } function Xo(e, t, i) { var n; i.corners = e.targetWrapper.corners; var r; if (void 0 !== e.sourcePortWrapper) { r = Ms({ x: e.sourcePortWrapper.offsetX, y: e.sourcePortWrapper.offsetY }, Fh(e.sourceWrapper), e.sourceWrapper.bounds, !1) } var o = function (e, t, i, n) { var r = !1; switch (i.direction) { case "Left": void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && "Right" === n && t.point.x > i.point.x && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom || ("Bottom" === n && t.point.y > i.point.y || "Top" === n && t.point.y < i.point.y) && t.point.x >= t.corners.left && t.point.x <= t.corners.right ? (t.direction = "Right" === n ? t.point.y > i.point.y ? "Top" : "Bottom" : t.point.x < i.point.x ? "Right" : "Left", r = !0) : t.point.x > i.point.x && (t.point.y > i.point.y || t.point.y < i.point.y) && !(i.corners.top > t.point.y && i.corners.bottom < t.point.y) ? t.direction = "Left" : t.point.x < i.point.x && t.point.y > i.point.y || t.point.x > i.point.x && t.point.y <= i.point.y && i.corners.top < t.point.y && i.corners.center.y >= t.point.y ? t.direction = "Top" : t.point.x < i.point.x && t.point.y < i.point.y || t.point.x > i.point.x && t.point.y > i.point.y && i.corners.bottom < t.point.y && i.corners.center.y > t.point.y ? t.direction = "Bottom" : t.point.y === i.point.y && t.point.x < i.point.x && (t.direction = "Right"); break; case "Right": void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && ("Bottom" === n && t.point.y > i.point.y || "Top" === n && t.point.y < i.point.y) && t.point.x > i.point.x && t.point.x >= t.corners.left && t.point.x <= t.corners.right ? (t.direction = t.point.x > i.point.x ? "Left" : "Right", r = !0) : void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && "Left" === n && t.point.x < i.point.x && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom ? (t.direction = t.point.y > i.point.y ? "Top" : "Bottom", r = !0) : t.point.x < i.point.x && i.corners.top <= t.point.y && i.corners.bottom >= t.point.y && t.point.y === i.point.y ? t.direction = "Top" : t.point.y > i.point.y && t.point.x > i.point.x ? t.direction = "Top" : t.point.y < i.point.y && t.point.x > i.point.x ? t.direction = "Bottom" : t.point.x < i.point.x && (t.point.y > i.point.y || t.point.y < i.point.y) ? t.direction = "Right" : t.point.y === i.point.y && t.point.x > i.point.x && (t.direction = "Left"); break; case "Top": void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && "Bottom" === n && t.point.y > i.point.y && t.point.x >= t.corners.left && t.point.x <= t.corners.right || ("Right" === n && t.point.x > i.point.x || "Left" === n && i.point.y > t.point.y && i.point.x > t.point.x) && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom ? (t.direction = "Bottom" === n ? t.point.x > i.point.x ? "Left" : "Right" : t.point.y < i.point.y ? "Bottom" : "Top", r = !0) : t.point.x === i.point.x && t.point.y < i.point.y ? t.direction = "Bottom" : t.point.y > i.point.y && t.point.x > i.corners.left && t.point.x < i.corners.right ? t.direction = "Left" : t.point.y >= i.point.y ? t.direction = "Top" : t.point.y < i.point.y && t.point.x > i.point.x ? t.direction = "Left" : t.point.y < i.point.y && t.point.x < i.point.x && (t.direction = "Right"); break; case "Bottom": void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && (("Right" === n || "Left" === n && i.point.x > t.point.x) && t.point.y > i.point.y && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom || "Top" === n && t.point.y < i.point.y && t.point.x >= t.corners.left && t.point.x <= t.corners.right) ? (t.direction = "Right" === n || "Left" === n ? t.point.y > i.point.y ? "Top" : "Bottom" : t.point.x > i.point.x ? "Left" : "Right", r = !0) : t.point.y < i.point.y && t.point.x > i.corners.left && i.corners.right > t.point.x ? t.point.y < i.point.y && t.point.x > i.corners.left && i.corners.center.x >= t.point.x ? t.direction = "Left" : t.point.y < i.point.y && t.point.x < i.corners.right && i.corners.center.x < t.point.x && (t.direction = "Right") : t.point.y > i.point.y && t.point.x > i.point.x ? t.direction = "Left" : t.point.y > i.point.y && t.point.x < i.point.x ? t.direction = "Right" : t.point.y <= i.point.y && (t.point.x > i.point.x || i.point.x > t.point.x) && (t.direction = "Bottom") }return r }(e, t, i, r); return void 0 !== e.sourcePortWrapper && void 0 !== e.targetPortWrapper && i.direction === xs(r) && (("Left" === i.direction && t.point.x > i.point.x || "Right" === i.direction && t.point.x < i.point.x) && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom || "Bottom" === i.direction && t.point.y < i.point.y && t.point.x >= t.corners.left && t.point.x <= t.corners.right) ? n = Qo(e, t, i) : t.direction === i.direction ? n = ws(e, t, i) : ("Left" === i.direction && t.point.x > i.point.x || "Right" === i.direction && t.point.x < i.point.x) && ("Top" === t.direction || "Bottom" === t.direction) && t.point.y <= i.point.y && i.corners.top <= t.point.y && i.corners.bottom >= t.point.y || "Top" === i.direction && t.point.y > i.point.y || "Bottom" === i.direction && t.point.y < i.point.y && i.corners.left <= t.point.x && i.corners.right >= t.point.x ? n = Qo(e, t, i) : void 0 !== e.sourceWrapper && void 0 !== e.targetWrapper && void 0 !== e.targetPortWrapper && ("Left" === t.direction || "Right" === t.direction) && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom && ("Top" === i.direction || "Bottom" === i.direction) && i.corners.center.x === t.corners.center.x ? (t.direction = "Top" === i.direction ? "Bottom" : "Top", n = ws(e, t, i, "Top" === i.direction ? t.corners.bottom - t.point.y + 20 : t.point.y - t.corners.top + 20)) : void 0 !== e.sourceWrapper && void 0 !== e.targetWrapper && void 0 !== e.targetPortWrapper && ("Top" === t.direction || "Bottom" === t.direction) && t.point.x >= t.corners.left && t.point.x <= t.corners.right && ("Left" === i.direction || "Right" === i.direction) && i.corners.center.y === t.corners.center.y ? (t.direction = "Left" === i.direction ? "Right" : "Left", n = ws(e, t, i, "Left" === i.direction ? t.corners.right - t.point.x + 20 : t.point.x - t.corners.left + 20)) : n = o ? ws(e, t, i, "Left" === t.direction || "Right" === t.direction ? "Left" === t.direction ? t.point.x - t.corners.left + 20 : t.corners.right - t.point.x + 20 : "Top" === t.direction ? t.point.y - t.corners.top + 20 : t.corners.bottom - t.point.y + 20) : vs(t, i), n } function Jo(e, t, i) { var n, r = { x: t.offsetX, y: t.offsetY }, o = Fh(i), s = Ms(r, o, i.bounds, !1), a = e.segments[0]; return a.direction !== s && (!function (e, t, i, n, r, o) { var s, a, l = []; l.push(n); n.y === r.y && ("Left" === t && r.x < n.x || "Right" === t && r.x > n.x) || n.x === r.x && ("Top" === t && r.y < n.y || "Bottom" === t && r.y > n.y) || ("Top" === t || "Bottom" === t ? "Top" === t && r.y < n.y && r.y > n.y - 13 || "Bottom" === t && r.y > n.y && r.y < n.y + 13 ? (a = "Top" === t ? i.top - 13 : i.bottom + 13, l.push({ x: n.x, y: a }), l.push({ x: n.x + (r.x - n.x) / 2, y: a }), l.push({ x: n.x + (r.x - n.x) / 2, y: r.y })) : Math.abs(n.x - r.x) > 13 && ("Top" === t && r.y < n.y || "Bottom" === t && r.y > n.y) ? l.push({ x: n.x, y: r.y }) : (a = "Top" === t ? i.top - 13 : i.bottom + 13, s = r.x < n.x ? i.left - 13 : i.right + 13, l.push({ x: n.x, y: a }), l.push({ x: r.x, y: a })) : "Left" === t && r.x < n.x && r.x > n.x - 13 || "right" === t && r.x > n.x && r.x < n.x + 13 ? (s = "Left" === t ? i.left - 13 : i.right + 13, l.push({ x: s, y: n.y }), l.push({ x: s, y: n.y + (r.y - n.y) / 2 }), l.push({ x: r.x, y: n.y + (r.y - n.y) / 2 })) : Math.abs(n.y - r.y) > 13 && ("Left" === t && r.x < n.x || "Right" === t && r.x > n.x) ? l.push({ x: r.x, y: n.y }) : (s = "Left" === t ? i.left - 13 : i.right + 13, l.push({ x: s, y: n.y }), l.push({ x: s, y: r.y })), o && (l.push(e.points[0]), l.reverse()), e.points = l) }(a, s, o, a.points[0], a.points[a.points.length - 1], !1), n = a.points[a.points.length - 1], a.direction = xU.direction(a.points[a.points.length - 2], a.points[a.points.length - 1])), n } function Zo(e, t, i) { var n, r = t.segments[t.segments.length - 2], o = r.points[r.points.length - 1]; ("Top" !== r.direction && "Bottom" !== r.direction || o.x !== e[1].x) && ("Left" !== r.direction && "Right" !== r.direction || o.y !== e[1].y) || (r.points[r.points.length - 1] = e[1], n = xU.direction(r.points[0], r.points[r.points.length - 1]), void 0 !== t.sourceWrapper && void 0 === t.sourcePortWrapper && n === xs(r.direction) && ("Left" === r.direction || "Right" === r.direction ? r.points[0].x = "Right" === r.direction ? r.points[0].x - t.sourceWrapper.corners.width : r.points[0].x + t.sourceWrapper.corners.width : r.points[0].y = "Bottom" === r.direction ? r.points[0].y - t.sourceWrapper.corners.height : r.points[0].y + t.sourceWrapper.corners.height), r.direction = n, r.length = xU.distancePoints(r.points[0], r.points[r.points.length - 1]), e.splice(0, 1)) } function Ko(e, t, i, n) { var r = e.sourcePortWrapper, o = e.targetPortWrapper, s = n ? e.targetPadding : e.sourcePadding, a = n ? o : r, l = new TU(a.bounds.x - s, a.bounds.y - s, a.actualSize.width + 2 * s, a.actualSize.height + 2 * s), h = [l.topLeft, l.topRight, l.bottomRight, l.bottomLeft]; h[h.length] = h[0]; var d = { x1: t.point.x, y1: t.point.y, x2: i.point.x, y2: i.point.y }, c = n ? i.point : t.point; return gs(d, h, !0, c) || c } function $o(e, t) { var i = [], n = wl(e, e.corners, t); n.push(n[0]); for (var r = 0; r < n.length - 1; r++)i.push(function (e, t) { return { x1: e.x, y1: e.y, x2: t.x, y2: t.y } }(n[r], n[r + 1])); return i } function es(e, t, i) { var n, r = e.rotateAngle + e.parentTransform; if (r) { if (r < 45) return t; if (r <= 135) n = { width: t.width, height: t.height, topLeft: t.bottomLeft, topCenter: t.middleLeft, topRight: t.topLeft, middleLeft: t.bottomCenter, center: i.center, middleRight: t.topCenter, bottomLeft: t.bottomRight, bottomCenter: t.middleRight, bottomRight: t.topRight, left: i.left, right: i.right, top: i.top, bottom: i.bottom }; else if (r <= 225) n = { width: t.width, height: t.height, topLeft: t.bottomLeft, topCenter: t.bottomCenter, topRight: t.bottomRight, middleLeft: t.middleRight, center: i.center, middleRight: t.middleLeft, bottomLeft: t.topLeft, bottomCenter: t.topCenter, bottomRight: t.topRight, left: i.left, right: i.right, top: i.top, bottom: i.bottom }; else { if (!(r <= 315)) return t; n = { width: t.width, height: t.height, topLeft: t.topRight, topCenter: t.middleRight, topRight: t.bottomRight, middleLeft: t.topCenter, center: i.center, middleRight: t.bottomCenter, bottomLeft: t.topLeft, bottomCenter: t.middleLeft, bottomRight: t.bottomLeft, left: i.left, right: i.right, top: i.top, bottom: i.bottom } } return n } return t } function ts(e, t, i) { var n = []; if (e.segments && e.segments.length > 0) { var r = void 0, o = [], s = t.point; for (r = 0; r < e.segments.length; r++) { var a = e.segments[r]; if ((o = []).push(s), r !== e.segments.length - 1 ? (o.push(a.point), s = a.point) : o.push(i.point), e.segments[r].points = o, e.segments.length > 1 && xU.equals(a.points[0], a.points[1]) && e.segments.splice(r, 1), a) for (var l = 0; l < a.points.length; l++)(l > 0 || 0 === r) && n.push(a.points[l]) } } return n } function is(e, t, i) { return "Top" === e || "Bottom" === e ? i.x > t.x ? "Right" : "Left" : i.y > t.y ? "Bottom" : "Top" } function ns(e) { if ("Straight" === e.type || "Bezier" === e.type) { if (0 === e.segments.length || e.segments.length > 0 && !xU.isEmptyPoint(e.segments[e.segments.length - 1].point)) { var t = void 0; t = "Bezier" === e.type ? new nG(e, "segments", { type: "Bezier" }, !0) : new iG(e, "segments", { type: "Straight" }, !0), e.segments.push(t) } } else if (0 === e.segments.length || e.segments[e.segments.length - 1].direction) { t = new rG(e, "segments", { type: "Orthogonal" }, !0); e.segments.push(t) } } function rs(e, t, i) { var n = e.segments[t], r = "Left" === n.direction || "Top" === n.direction ? -n.length : n.length, o = "Left" === n.direction || "Right" === n.direction ? 0 : 90, s = cs(i.point, r, o); return e.segments[t - 1].length += n.length, e.segments[t - 1].points[1] = i.point = s, e.segments.splice(t, 1), --t } function os(e, t, i) { var n, r; if (e.sourcePortWrapper) { r = Ms({ x: e.sourcePortWrapper.offsetX, y: e.sourcePortWrapper.offsetY }, Fh(e.sourceWrapper), e.sourceWrapper.bounds, !1) } ls(e.targetWrapper, t, i, e); var o = is(i.direction, t.point, i.point); if (void 0 === e.sourcePortWrapper || t.direction !== i.direction || ("Top" !== t.direction && "Bottom" !== t.direction || t.corners.center.x !== i.corners.center.x) && ("Left" !== t.direction && "Right" !== t.direction || t.corners.center.y !== i.corners.center.y)) if (i.point.x >= t.corners.left && i.point.x <= t.corners.right && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom) { t.direction = i.point.y > t.point.y ? "Bottom" : "Top"; n = ws(e, t, i, "Top" === t.direction ? t.point.y - t.corners.top + 20 : t.corners.bottom - t.point.y + 20) } else if (e.sourcePortWrapper && r === xs(o)) { var s; ("Left" === r || "Right" === r) && t.point.y >= t.corners.top && t.point.y <= t.corners.bottom ? (t.direction = i.point.y > t.point.y ? "Bottom" : "Top", s = t.corners.height / 2 + 20) : ("Top" === r || "Bottom" === r) && t.point.x >= t.corners.left && t.point.x <= t.corners.right && (t.direction = i.point.x > t.point.x ? "Right" : "Left", s = t.corners.width / 2 + 20), t.direction && s ? n = ws(e, t, i, s, !0) : (t.direction = o, n = vs(t, i)) } else if (!e.sourcePortWrapper || r !== i.direction || "Top" !== r && "Bottom" !== r || t.corners.center.x !== i.corners.center.x) t.direction = o, n = vs(t, i); else { t.direction = i.point.y > t.point.y ? "Bottom" : "Top"; n = ws(e, t, i, "Bottom" === t.direction ? t.corners.bottom - t.point.y + 20 : t.point.y - t.corners.top + 20) } else { t.direction = o, n = ws(e, t, i, "Top" === o || "Bottom" === o ? e.sourceWrapper.height / 2 + 20 : e.sourceWrapper.width / 2 + 20); t.point = n[1], "Left" === o || "Right" === o ? (i.direction = o, i.point = "Left" === o ? i.corners.middleLeft : i.corners.middleRight) : ls(e.targetWrapper, t, i, e), n = ws(e, t, i) } return n } function ss(e, t) { if (void 0 !== e.targetWrapper && void 0 === e.targetPortWrapper && Fh(e.targetWrapper).containsPoint(t.point)) { var i = e.targetWrapper, n = e.segments[e.segments.length - 2], r = n.points[n.points.length - 1], o = xs(n.direction); "Bottom" === o ? r.y < i.corners.bottom && (n.points[n.points.length - 1].y = i.corners.bottom + 20, n.length = xU.distancePoints(n.points[0], n.points[n.points.length - 1])) : "Top" === o ? r.y > i.corners.top && (n.points[n.points.length - 1].y = i.corners.top - 20, n.length = xU.distancePoints(n.points[0], n.points[n.points.length - 1])) : "Left" === o ? r.x > i.corners.left && (n.points[n.points.length - 1].x = i.corners.left - 20, n.length = xU.distancePoints(n.points[0], n.points[n.points.length - 1])) : "Right" === o && r.x < i.corners.right && (n.points[n.points.length - 1].x = i.corners.right + 20, n.length = xU.distancePoints(n.points[0], n.points[n.points.length - 1])), t.point = n.points[n.points.length - 1] } } function as(e, t) { for (var i = 0; i < e.segments.length; i++)for (var n = e.segments[i], r = 0; r < n.points.length; r++)(r > 0 || 0 === i) && t.push(n.points[r]); return t } function ls(e, t, i, n) { var r, o = { x: 0, y: 0 }, s = es(e, e.corners, e.bounds), a = t.margin, l = t.point; if (s.bottomCenter.y + a.bottom < l.y) r = "Bottom", o = s.bottomCenter; else if (s.topCenter.y - a.top > l.y) r = "Top", o = s.topCenter; else if (s.middleLeft.x - a.left > l.x) r = "Left", o = s.middleLeft; else if (s.middleRight.x + a.right < l.x) r = "Right", o = s.middleRight; else { var h = Math.abs(l.y - s.topCenter.y), d = Math.abs(l.x - s.middleRight.x), c = Math.abs(l.y - s.bottomCenter.y), p = Math.abs(l.x - s.middleLeft.x), u = Number.MAX_VALUE; u = h, r = "Top", o = s.topCenter, u > d && (u = d, r = "Right", o = s.middleRight), u > c && (u = c, r = "Bottom", o = s.bottomCenter), u > p && (r = "Left", o = s.middleLeft) } i.point = o, i.direction = r; var g = ds(s, xs(i.direction)); i.point = ps(n, e, i.point, g, e === n.targetWrapper) } function hs(e, t) { var i = { x: t.x, y: e.y }, n = (xU.findLength(e, i), xU.findLength(i, t)), r = xU.findLength(t, e), o = Math.asin(n / r); return o = 180 * o / Math.PI, e.x < t.x ? e.y > t.y && (o = 360 - o) : o = e.y < t.y ? 180 - o : 180 + o, o } function ds(e, t) { var i; switch (t) { case "Left": i = e.middleLeft; break; case "Top": i = e.topCenter; break; case "Right": i = e.middleRight; break; case "Bottom": i = e.bottomCenter }return i } function cs(e, t, i) { return xU.transform(e, i, t) } function ps(e, t, i, n, r) { i = { x: i.x, y: i.y }, n = { x: n.x, y: n.y }; var o, s, a, l = xU.findAngle(n, i), h = r ? e.targetWrapper : e.sourceWrapper, d = r ? e.targetPadding : e.sourcePadding, c = r || "Orthogonal" === e.type ? i : n; xU.transform(i, l, Math.max(h.actualSize.height / 2, h.actualSize.width / 2)); o = h; var p = $h(-h.parentTransform, h.offsetX, h.offsetY, i), u = $h(-h.parentTransform, h.offsetX, h.offsetY, n); if ("Orthogonal" === e.type) { p.x === u.x && (p.y < u.y ? p.y -= 5 : p.y += 5), p.y === u.y && (p.x < u.x ? p.x -= 5 : p.x += 5), i = $h(h.parentTransform, h.offsetX, h.offsetY, p) } else { r ? xU.findAngle(i, n) : xU.findAngle(n, i); if (r) { var g = xU.findAngle(i, n); n = xU.transform({ x: n.x, y: n.y }, g, Math.max(h.actualSize.width, h.actualSize.height)) } else { var m = xU.findAngle(n, i); i = xU.transform({ x: i.x, y: i.y }, m, Math.max(h.actualSize.width, h.actualSize.height)) } } h instanceof yq && h.data ? (a = o.getPoints(), o.data.split("m").length - 1 + (o.data.split("M").length - 1) == 1 && (a[a.length] = a[0])) : ((e.sourcePadding || e.targetPadding) && (s = new TU(h.bounds.x - d, h.bounds.y - d, h.actualSize.width + 2 * d, h.actualSize.height + 2 * d)), (a = s ? [s.topLeft, s.topRight, s.bottomRight, s.bottomLeft] : wl(h, h.corners))[a.length] = a[0]); a.length; return gs({ x1: i.x, y1: i.y, x2: n.x, y2: n.y }, a, !0, c) || i } function us(e, t, i) { return t.x = Math.round(100 * t.x) / 100, t.y = Math.round(100 * t.y) / 100, i ? e.targetPoint = t : e.sourcePoint = t, t } function gs(e, t, i, n) { var r, o = t.length, s = { x1: t[0].x, y1: t[0].y, x2: t[1].x, y2: t[1].y }, a = ms(e, s); if (a && (r = xU.distancePoints(a, n)), isNaN(r) || r > 0) for (var l = 1; l < o - 1; l++) { var h = ms(e, s = { x1: t[l].x, y1: t[l].y, x2: t[l + 1].x, y2: t[l + 1].y }); if (h) { var d = xU.distancePoints(h, n); if ((isNaN(r) || r > d) && (r = d, a = h), r >= 0 && r <= 1) break } } return a } function ms(e, t) { var i, n, r, o, s, a, l, h, d, c, p, u, g, m, f, y = e.x1, v = e.y1, w = e.x2, b = e.y2, C = t.x1, L = t.y1, M = t.x2, S = t.y2; return i = b - v, r = y - w, s = w * v - y * b, p = i * C + r * L + s, u = i * M + r * S + s, 0 !== p && 0 !== u && fs(p, u) ? null : (n = S - L, o = C - M, a = M * L - C * S, d = n * y + o * v + a, c = n * w + o * b + a, 0 !== d && 0 !== c && fs(d, c) ? null : 0 == (g = i * o - n * r) ? null : (m = g < 0 ? -g / 2 : g / 2, m = 0, f = r * a - o * s, l = f < 0 ? (f - m) / g : (f + m) / g, f = n * s - i * a, h = f < 0 ? (f - m) / g : (f + m) / g, { x: l, y: h })) } function fs(e, t) { return e * t >= 0 } function ys(e, t, i) { switch (t.direction) { case "Left": t.point.x > e.left && (i = t.point.x - e.left > i ? t.point.x - e.left + i : i); break; case "Right": t.point.x < e.right && (i = e.right - t.point.x > i ? e.right - t.point.x + i : i); break; case "Top": t.point.y > e.top && (i = t.point.y - e.top > i ? t.point.y - e.top + i : i); break; case "Bottom": t.point.y < e.bottom && (i = e.bottom - t.point.y > i ? e.bottom - t.point.y + i : i) }return i } function vs(e, t) { var i; switch (e.direction) { case "Left": case "Right": var n = { x: t.point.x, y: e.point.y }; i = xU.equals(e.point, n) || xU.equals(t.point, n) ? [e.point, t.point] : [e.point, n, t.point]; break; case "Top": case "Bottom": var r = { x: e.point.x, y: t.point.y }; i = xU.equals(e.point, r) || xU.equals(t.point, r) ? [e.point, t.point] : [e.point, r, t.point] }return i } function ws(e, t, i, n, r) { n || (n = 20); var o, s, a, l = e.sourcePortWrapper, h = i.point.x - t.point.x, d = i.point.y - t.point.y; if (!r && (Math.abs(h) < .001 || Math.abs(d) < .001) && void 0 === i.direction) return [t.point, i.point]; if (void 0 === e.targetWrapper && Math.abs(h) <= 31 && Math.abs(d) <= 31) { if ("Left" === t.direction || "Right" === t.direction ? Math.abs(d) < 12 && (t.direction = t.point.y > i.point.y ? "Top" : "Bottom") : Math.abs(h) < 12 && (t.direction = t.point.x > i.point.x ? "Left" : "Right"), Math.abs(h) > 12 || Math.abs(d) > 12) return vs(t, i); n += 5 } return "Left" === t.direction || "Right" === t.direction ? ("Right" === t.direction ? (void 0 !== i.direction && "Right" === i.direction && (n = Math.max(t.point.x, i.point.x) - t.point.x + n), t.point.x > i.point.x && void 0 === l && (n = -n)) : (void 0 !== i.direction && "Left" === i.direction && (n = t.point.x - Math.min(t.point.x, i.point.x) + n), (t.point.x > i.point.x || void 0 !== l || "Left" === t.direction) && (n = -n)), a = i.point.y - t.point.y, o = cs(t.point, n, 0), 0 !== (a = i.point.y - o.y) && (s = cs(o, i.point.y - o.y, 90))) : "Top" !== t.direction && "Bottom" !== t.direction || ("Bottom" === t.direction ? void 0 !== i.direction && "Bottom" === i.direction && (n = Math.max(t.point.y, i.point.y) - t.point.y + n) : (void 0 !== i.direction && "Top" === i.direction && (n = t.point.y - Math.min(t.point.y, i.point.y) + n), (t.point.y > i.point.y || void 0 !== l || "Top" === t.direction) && (n = -n)), a = i.point.x - t.point.x, o = (t.direction, cs(t.point, n, 90)), 0 !== (a = i.point.x - o.x) && (s = cs(o, i.point.x - o.x, 0))), 0 === a ? [t.point, i.point] : [t.point, o, s, i.point] } function bs(e, t, i, n, r) { void 0 === r && (r = 20); var o; switch (void 0 === i ? (e.margin = { left: 2, right: 2, top: 2, bottom: 2 }, t.margin = { left: 0, right: 5, top: 0, bottom: 5 }) : "Bottom" === e.direction ? t.corners.top > e.corners.bottom && t.corners.top - e.corners.bottom < 20 && (r = (t.corners.top - e.corners.bottom) / 2) : "Top" === e.direction ? t.corners.bottom < e.corners.top && e.corners.top - t.corners.bottom < 20 && (r = (e.corners.top - t.corners.bottom) / 2) : "Right" === e.direction ? t.corners.left > e.corners.right && t.corners.left - e.corners.right < 20 && (r = (t.corners.left - e.corners.right) / 2) : "Left" === e.direction && t.corners.right < e.corners.left && e.corners.left - t.corners.right < 20 && (r = (e.corners.left - t.corners.right) / 2), e.direction) { case "Left": r = function (e, t, i, n) { e.corners.left - e.margin.left > t.corners.left - t.margin.left && e.corners.left - e.margin.left <= t.corners.right + t.margin.right ? ("Bottom" === t.direction && e.point.y < t.point.y ? n += e.corners.left - t.corners.left : "Top" === t.direction && e.point.y > t.point.y && (n += e.corners.left - t.corners.left), n += e.point.x - e.corners.left) : void 0 !== i && "Top" !== i && "Bottom" === t.direction && e.point.y < t.point.y ? n += Math.abs(e.point.x - t.corners.right) : void 0 !== i && "Bottom" !== i && "Top" === t.direction && t.point.y < e.point.y ? n += Math.abs(e.point.x - t.corners.right) : n += e.point.x - e.corners.left; return n }(e, t, i, r), o = cs(e.point, r, 180); break; case "Right": r = function (e, t, i, n) { e.corners.right + e.margin.right < t.corners.right + t.margin.right && e.corners.right + e.margin.right >= t.corners.left - t.margin.left ? ("Bottom" === t.direction && e.point.y < t.point.y ? i += t.corners.right - e.corners.right : "Top" === t.direction && e.point.y > t.point.y && (i += t.corners.right - e.corners.right), i += e.corners.right - e.point.x) : void 0 !== n && "Top" !== n && "Bottom" === t.direction && e.point.y < t.point.y ? i += Math.abs(e.point.x - t.corners.right) : void 0 !== n && "Bottom" !== n && "Top" === t.direction && t.point.y < e.point.y ? i += Math.abs(e.point.x - t.corners.right) : i += e.corners.right - e.point.x; return i }(e, t, r, i), o = cs(e.point, r, 0); break; case "Top": r = function (e, t, i, n) { e.corners.top - e.margin.top > t.corners.top + t.margin.top && e.corners.top - e.margin.top <= t.corners.bottom + t.margin.bottom ? ("Right" === t.direction && e.point.x < t.point.x ? n += e.corners.top - t.corners.top : "Left" === t.direction && e.point.x > t.point.x && (n += e.corners.top - t.corners.top), n += e.point.y - e.corners.top) : void 0 !== i && "Left" !== i && "Right" === t.direction && e.point.x < t.point.x ? n += Math.abs(e.point.y - t.corners.bottom) : void 0 !== i && "Right" !== i && "Left" === t.direction && t.point.x < e.point.x ? n += Math.abs(e.point.y - t.corners.bottom) : n += e.point.y - e.corners.top; return n }(e, t, i, r), o = cs(e.point, r, 270); break; case "Bottom": r = function (e, t, i, n) { e.corners.bottom + e.margin.bottom < t.corners.bottom + t.margin.bottom && e.corners.bottom + e.margin.bottom >= t.corners.top - t.margin.top ? ("Right" === t.direction && e.point.x < t.point.x ? i += t.corners.bottom - e.corners.bottom : "Left" === t.direction && e.point.x > t.point.x && (i += t.corners.bottom - e.corners.bottom), i += e.corners.bottom - e.point.y) : void 0 !== n && "Left" !== n && "Right" === t.direction && e.point.x < t.point.x ? i += Math.abs(e.point.y - t.corners.bottom) : void 0 !== n && "Right" !== n && "Left" === t.direction && t.point.x < e.point.x ? i += Math.abs(e.point.y - t.corners.bottom) : i += e.corners.bottom - e.point.y; return i }(e, t, r, i), o = cs(e.point, r, 90) }return void 0 !== n ? n.push(o) : n = [e.point, o], "Top" === e.direction || "Bottom" === e.direction ? Cs(o, "horizontal", e, t, n) : "Right" !== e.direction && "Left" !== e.direction || Cs(o, "vertical", e, t, n), n } function Cs(e, t, i, n, r) { var o, s, a; "horizontal" === t ? (i.margin = { left: 0, right: 10, top: 0, bottom: 10 }, n.margin = { left: 0, right: 10, top: 0, bottom: 10 }) : "vertical" === t && (i.margin = { left: 10, right: 0, top: 10, bottom: 0 }, n.margin = { left: 10, right: 0, top: 10, bottom: 0 }); var l = 20; if ("horizontal" === t) { switch (n.direction) { case "Left": if (i.corners.right + i.margin.right < n.corners.left - n.margin.left && (n.corners.left - i.corners.right > l || i.corners.top - i.margin.top <= n.point.y && i.corners.bottom + i.margin.bottom >= n.point.y)) { var h = Math.min(Math.abs(n.corners.left - i.corners.right) / 2, 20); l = i.corners.right - e.x + h } else l = "Top" === i.direction && e.y > n.point.y || "Bottom" === i.direction && e.y < n.point.y ? Math.min(n.corners.left, e.x) - e.x - 20 : e.x >= i.corners.left - i.margin.left && e.x <= i.corners.right + i.margin.right ? Math.min(n.corners.left, i.corners.left) - e.x - 20 : n.corners.left - e.x - 20; break; case "Right": if (i.corners.left - i.margin.left > n.corners.right + n.margin.right && (i.corners.left - n.corners.right > l || i.corners.top - i.margin.top <= n.point.y && i.corners.bottom + i.margin.bottom >= n.point.y)) { h = Math.min(Math.abs(i.corners.left - n.corners.right) / 2, 20); l = i.corners.left - e.x - h } else l = "Top" === i.direction && e.y > n.point.y || "Bottom" === i.direction && e.y < n.point.y ? Math.max(n.corners.right, e.x) - e.x + 20 : e.x >= i.corners.left - i.margin.left && e.x <= i.corners.right + i.margin.right ? Math.max(n.corners.right, i.corners.right) - e.x + 20 : n.corners.right - e.x + 20 }s = cs(o = cs(e, l, 0), n.point.y - e.y, 90), a = n.point } else if ("vertical" === t) { switch (n.direction) { case "Top": if (i.corners.bottom + i.margin.bottom < n.corners.top - n.margin.top && (n.corners.top - i.corners.bottom > l || i.corners.left - i.margin.left <= n.point.x && i.corners.right + i.margin.right >= n.point.x)) { h = Math.min(Math.abs(n.corners.top - i.corners.bottom) / 2, 20); l = i.corners.bottom - e.y + h } else l = "Left" === i.direction && e.x > n.point.x || "Right" === i.direction && e.x < n.point.x ? Math.min(n.corners.top, e.y) - e.y - 20 : e.y >= i.corners.top - i.margin.top && e.y <= i.corners.bottom + i.margin.bottom ? Math.min(n.corners.top, i.corners.top) - e.y - 20 : n.corners.top - e.y - 20; break; case "Bottom": if (i.corners.top - i.margin.top > n.corners.bottom + n.margin.bottom && (i.corners.top - n.corners.bottom > l || i.corners.left - i.margin.left <= n.point.x && i.corners.right + i.margin.right >= n.point.x)) { h = Math.min(Math.abs(i.corners.top - n.corners.bottom) / 2, 20); l = i.corners.top - e.y - h } else l = "Left" === i.direction && e.x > n.point.x || "Right" === i.direction && e.x < n.point.x ? Math.max(n.corners.bottom, e.y) - e.y + 20 : e.y >= i.corners.top - i.margin.top && e.y <= i.corners.bottom + i.margin.bottom ? Math.max(n.corners.bottom, i.corners.bottom) - e.y + 20 : n.corners.bottom - e.y + 20 }s = cs(o = cs(e, l, 90), n.point.x - e.x, 0), a = n.point } r.push(o), r.push(s), r.push(a) } function Ls(e, t) { var i = e.direction; e.direction = t.direction, t.direction = i; var n = e.point; e.point = t.point, t.point = n; var r = e.corners; e.corners = t.corners, t.corners = r } function Ms(e, t, i, n) { var r = void 0 === t ? i : t, o = r.topLeft, s = r.topRight, a = r.bottomRight, l = r.bottomLeft, h = r.center, d = hs(h, e), c = hs(h, a), p = hs(h, l), u = hs(h, o), g = hs(h, s); return d > u && d < g ? "Top" : d >= c && d < p ? "Bottom" : d >= p && d <= u ? "Left" : "Right" } function Ss(e) { var t; return t = e.wrapper.children[0].bounds, "None" !== e.sourceDecorator.shape && t.uniteRect(e.wrapper.children[1].bounds), "None" !== e.targetDecorator.shape && t.uniteRect(e.wrapper.children[2].bounds), t } function xs(e) { switch (e) { case "Top": return "Bottom"; case "Bottom": return "Top"; case "Left": return "Right"; case "Right": return "Left" }return "auto" } function Ts(e) { var t = new cS; t = js(e.tooltip, t); var i = new cS(t); return i.beforeCollision = As, i.beforeOpen = Ds, i.cssClass = "e-diagram-tooltip", i.opensOn = "custom", i.appendTo("#" + e.element.id), i.close(), i } function Ds(e) { "" !== this.content && void 0 !== this.content || (e.element.style.display = "none") } function As(e) { e.collidedPosition && e.collidedPosition !== this.position && (e.element.style.display = "none") } function Es(e, t) { var i, n = e.tooltipObject; return i = t ? t.tooltip : e.tooltip, js(i, n), n } function js(e, t) { return e.content ? (t.content = e.content, t.position = e.position, t.showTipPointer = e.showTipPointer, t.width = e.width, t.height = e.height, e.animation ? t.animation = e.animation : t.animation = { close: { effect: "None" } }) : t.close(), t } function Is(e, t, i) { var n = e.center, r = i ? 45 : 180 / (2 + 2 / (e.height / e.width)), o = r, s = 180 - r, a = s + 2 * r, l = 360 - r, h = hs(t, n); return h > o && h < s ? "top" : h > s && h < a ? "right" : h > a && h < l ? "bottom" : "left" } function ks(e) { return !e.distance && !e.angle } function Ps(e, t, i) { var n = 60, r = { x: 0, y: 0 }; switch (i || (i = Math.abs(t.x - e.x) > Math.abs(t.y - e.y) ? e.x < t.x ? "right" : "left" : e.y < t.y ? "bottom" : "top"), i) { case "bottom": case "top": n = Math.min(.45 * Math.abs(e.y - t.y), n), r = { x: e.x, y: e.y + ("bottom" === i ? n : -n) }; break; case "right": case "left": n = Math.min(.45 * Math.abs(e.x - t.x), n), r = { x: e.x + ("right" === i ? n : -n), y: e.y } }return r } function Ns(e, t, i, n, r) { var o = 0, s = 0, a = 0, l = 0, h = Number((r.distance(t, e) + r.distance(i, t) + r.distance(n, i)) / 3); if (0 !== h) for (var d = 0; d <= h; d++) { var c = d / h, p = (1 - c) * (1 - c) * (1 - c) * e.x + 3 * c * (1 - c) * (1 - c) * t.x + 3 * c * c * (1 - c) * i.x + c * c * c * n.x, u = (1 - c) * (1 - c) * (1 - c) * e.y + 3 * c * (1 - c) * (1 - c) * t.y + 3 * c * c * (1 - c) * i.y + c * c * c * n.y; 0 === d ? (o = a = p, s = l = u) : (o = Math.min(p, o), s = Math.min(u, s), a = Math.max(p, a), l = Math.max(u, l)) } return { x: o, y: s, width: a - o, height: l - s, left: o, top: s, right: o + (a - o), bottom: s + (l - s), center: { x: (o + (a - o)) / 2, y: (s + (l - s)) / 2 } } } function Os(e, t, i, n, r, o, s) { var a = { x: 0, y: 0 }, l = o / s, h = (1 - l) * (1 - l) * (1 - l) * t.x + 3 * l * (1 - l) * (1 - l) * i.x + 3 * l * l * (1 - l) * n.x + l * l * l * r.x; a.x = h; var d = (1 - l) * (1 - l) * (1 - l) * t.y + 3 * l * (1 - l) * (1 - l) * i.y + 3 * l * l * (1 - l) * n.y + l * l * l * r.y; return a.y = d, a } function Rs(e, t) { var i = document.getElementById(e.element.id + (t ? "_hRuler" : "_vRuler")), n = Fs(e), r = Vs(e), o = t ? "margin-left:" + n.width + "px;" : "margin-top:" + n.height + "px;"; if (!i) { var s = "height:" + (t ? n.height : r.height + 100) + "px;overflow:hidden;width:" + (t ? r.width + 100 : n.width) + "px;position:absolute;font-size:11px;" + o; i = Dh("div", { id: e.element.id + (t ? "_hRuler" : "_vRuler"), style: s }) } e.element.insertBefore(i, e.element.firstChild); var a = t ? e.rulerSettings.horizontalRuler : e.rulerSettings.verticalRuler, l = new cG(a); l.orientation = t ? "Horizontal" : "Vertical", l.length = (t ? r.width : r.height) + a.segmentWidth, l.appendTo("#" + e.element.id + (t ? "_hRuler" : "_vRuler")), t ? e.hRuler = l : e.vRuler = l; var h = document.getElementById(e.element.id + (t ? "_hRuler" : "_vRuler")); t ? e.hRuler.element = h : e.vRuler.element = h } function zs(e) { var t = -e.scroller.horizontalOffset, i = -e.scroller.verticalOffset; e && e.rulerSettings.showRulers ? (e.hRuler.length = 0, e.vRuler.length = 0, void 0 !== t && e.hRuler.element && Ws(e, e.hRuler, t, !0), void 0 !== i && e.vRuler.element && Ws(e, e.vRuler, i, !1)) : Bs(e) } function Bs(e) { kh(e.element.id + "_hRuler"), kh(e.element.id + "_vRuler"), kh(e.element.id + "_overlapRuler") } function Fs(e) { var t = 0, i = 0; return e.rulerSettings.showRulers && (t = e.rulerSettings.horizontalRuler.thickness, i = e.rulerSettings.verticalRuler.thickness), new LU(i, t) } function Vs(e) { var t = Fs(e), i = e.scroller.viewPortHeight, n = e.scroller.viewPortWidth; return n < e.element.clientWidth - t.width && (n = e.element.clientWidth - t.width), i < e.element.clientHeight - t.height && (i = e.element.clientHeight - t.height), e.hRuler && e.hRuler.length && (n = e.hRuler.length), e.vRuler && e.vRuler.length && (i = e.vRuler.length), new LU(n, i) } function Ws(e, t, i, n) { var r = Fs(e), o = Vs(e), s = n ? e.rulerSettings.horizontalRuler : e.rulerSettings.verticalRuler; !function (e, t, i) { var n = document.getElementById(e.element.id + (i ? "_hRuler" : "_vRuler")), r = i ? e.hRuler : e.vRuler; n && e && t && (n.style.width = (i ? t.width + r.segmentWidth : r.thickness) + "px", n.style.height = (i ? r.thickness : t.height + r.segmentWidth) + "px", (n = document.getElementById(e.element.id + "_overlapRuler")) && (i ? n.style.height = r.thickness + "px" : n.style.width = r.thickness + "px")) }(e, o, n), function (e, t, i) { var n = document.getElementById(e.element.id + (i ? "_hRuler_ruler_space" : "_vRuler_ruler_space")), r = i ? e.hRuler : e.vRuler; n && e && t && (n.style.width = (i ? t.width + 2 * r.segmentWidth : r.thickness) + "px", n.style.height = (i ? r.thickness : t.height + 2 * r.segmentWidth) + "px") }(e, o, n), t.offset = i, t.scale = e.scroller.currentZoom, t.length = o.width + 100, t.arrangeTick = td(s.arrangeTick), t.dataBind(); var a = n ? e.hRuler.element : e.vRuler.element; n ? a.style.marginLeft = r.width - t.hRulerOffset + "px" : a.style.marginTop = r.height - t.vRulerOffset + "px" } function Hs(e) { if (e) { return e instanceof jq || e instanceof Iq ? e.constraints & UU.Select : e instanceof lG ? e.constraints & YU.Select : e.constraints & qU.Select } return 1 } function _s(e) { if (e) { return e instanceof jq || e instanceof Iq ? e.constraints & UU.Drag : e instanceof lG ? e.constraints & YU.Drag : e instanceof mG ? 1 : e.constraints & qU.Drag } return 1 } function Ys(e, t) { return e instanceof lG ? e.constraints & YU.PointerEvents : e.constraints & qU.PointerEvents } function Us(e) { return e.constraints & YU.DragSourceEnd } function qs(e) { return e.constraints & YU.DragTargetEnd } function Gs(e) { return e.constraints & YU.DragSegmentThumb } function Qs(e) { return e instanceof jq || e instanceof Iq ? e.constraints & UU.Rotate : e.constraints & qU.Rotate } function Xs(e) { return e.constraints & qU.Shadow } function Js(e) { return e instanceof mQ && e.constraints & qU.InConnect ? e.constraints & qU.InConnect : 0 } function Zs(e) { return e && e.constraints && !(e.constraints & sq.None) && e.constraints & sq.InConnect ? e.constraints & sq.InConnect : 0 } function Ks(e) { return e instanceof mQ && e.constraints & qU.OutConnect ? e.constraints & qU.OutConnect : 0 } function $s(e) { return e && e.constraints && !(e.constraints & sq.None) && e.constraints & sq.OutConnect ? e.constraints & sq.OutConnect : 0 } function ea(e, t) { var i = 0; return e instanceof jq || e instanceof Iq ? i = e.constraints & UU.Resize : e && ("SouthEast" === t ? i = e.constraints & qU.ResizeSouthEast : "East" === t ? i = e.constraints & qU.ResizeEast : "NorthEast" === t ? i = e.constraints & qU.ResizeNorthEast : "South" === t ? i = e.constraints & qU.ResizeSouth : "North" === t ? i = e.constraints & qU.ResizeNorth : "SouthWest" === t ? i = e.constraints & qU.ResizeSouthWest : "West" === t ? i = e.constraints & qU.ResizeWest : "NorthWest" === t && (i = e.constraints & qU.ResizeNorthWest)), i } function ta(e) { return e instanceof lG ? e.constraints & YU.AllowDrop : e.constraints & qU.AllowDrop } function ia(e) { return e.constraints & XU.Virtualization } function na(e) { return e.tool & JU.SingleSelect } function ra(e) { return e.tool & JU.ZoomPan } function oa(e) { return e.tool & JU.ContinuousDraw } function sa(e) { return e.tool & JU.DrawOnce } function aa(e) { return e.tool & JU.SingleSelect || e.tool & JU.MultipleSelect } function la(e) { return e.constraints & XU.UserInteraction } function ha(e) { return e.constraints & XU.ZoomTextEdit } function da(e) { return function (e) { return e.constraints & XU.ApiUpdate }(e) || e.diagramActions & tq.ToolAction } function ca(e, t) { return e.constraints & sq.Draw } function pa(e, t) { return e.constraints & sq.Drag } function ua(e) { return !(e & iq.DrawSelectorBorder) } function ga(e) { return !!(e & iq.PreventRenderSelector) } function ma(e) { return fG[e.toString()] } function fa(e, t, i, n) { var r, o = !1; if (Ca(e, t, !0)) { e.protectPropertyChange(!0); var s = (r = e.nameTable[t.parentId]).wrapper; if (r && "Canvas" === r.container.type) { if (n || s.bounds.x <= i.x && s.bounds.right >= i.x && s.bounds.y <= i.y && s.bounds.bottom >= i.y) { var a = void 0, l = s.bounds.y, h = s.bounds.x, d = e.nameTable[r.parentId] || r; if ("SwimLane" === d.shape.type) o = xa(r, d, t, e, !0); else { var c = e.nameTable[r.parentId] || r, p = c.shape; a = c.wrapper, s.actualSize.width < s.outerBounds.width && !(s.bounds.x > s.outerBounds.x) && (void 0 !== r.rowIndex ? (c.columns.length - 1, a.updateColumnWidth(r.columnIndex, s.outerBounds.width, !0), "Horizontal" === p.orientation && p.phaseSize && qa(c, e, s, r.columnIndex), Ga(e, c), e.drag(c, h - s.bounds.x, l - s.bounds.y)) : e.scale(r, 1 + (s.outerBounds.width - s.actualSize.width) / s.actualSize.width, 1, s.outerBounds.x < s.bounds.x ? { x: 1, y: .5 } : { x: 0, y: .5 })), s.actualSize.height < s.outerBounds.height && !(s.bounds.y > s.outerBounds.y) && (void 0 !== r.rowIndex ? (a.updateRowHeight(r.rowIndex, s.outerBounds.height, !0), e.drag(c, h - s.bounds.x, l - s.bounds.y)) : e.scale(r, 1, 1 + (s.outerBounds.height - s.actualSize.height) / s.actualSize.height, s.outerBounds.y < s.bounds.y ? { x: .5, y: 1 } : { x: .5, y: 0 })) } } e.select([t]), Wa([], e) } e.protectPropertyChange(!1) } return o } function ya(e, t, i, n) { var r; if (Ca(e, t, !0)) { e.protectPropertyChange(!0); var o = (r = e.nameTable[t.parentId]).wrapper; if (r && "Canvas" === r.container.type && !(n || o.bounds.x <= i.x && o.bounds.right >= i.x && o.bounds.y <= i.y && o.bounds.bottom >= i.y)) { var s = Wh(t); e.clearSelection(), Ma(e, t), t.parentId = ""; var a = { type: "ChildCollectionChanged", category: "Internal", undoObject: s, redoObject: Wh(t) }; e.addHistoryEntry(a), e.commandHandler.isContainer && (e.commandHandler.isContainer = !1, e.endGroupAction()) } } } function va(e, t, i) { for (var n = new TU, r = "SwimLane" === e.shape.type ? e.wrapper.children[0].rows : e.wrapper.rows, o = i ? 1 : 0; o < r.length; o++)n.uniteRect(r[o].cells[t].bounds); return n } function wa(e, t) { for (var i, n = {}, r = 0, o = Object.keys(t); r < o.length; r++) { var s = o[r]; n[s] = t[s] } return jG(t) === mQ && ((i = new mQ(e, "nodes", n, !0)).id = t.id, e.initObject(i)), e.updateDiagramObject(i), i } function ba(e, t) { var i, n, r; if (e.selectedObject.helperObject) r = e.selectedObject.helperObject; else if ((e.selectedItems.nodes.length > 0 || e.selectedItems.connectors.length > 0) && (t instanceof mG && t.nodes.length + t.connectors.length === 1 ? (i = t.nodes.length > 0 ? t.nodes[0] : t.connectors[0], n = e.selectedItems.wrapper.children[0]) : (i = t, n = e.selectedItems.wrapper), e.selectedObject.actualObject = i, Ca(e, i) || e.constraints & XU.LineRouting && 0 === e.selectedItems.connectors.length)) { r = wa(e, { id: "helper", rotateAngle: n.rotateAngle, offsetX: n.offsetX, offsetY: n.offsetY, minWidth: n.minWidth, minHeight: n.minHeight, maxWidth: n.maxWidth, maxHeight: n.maxHeight, width: n.actualSize.width, height: n.actualSize.height, style: { strokeDashArray: "2 2", fill: "transparent", strokeColor: "#7D7D7D", strokeWidth: 2 } }), e.selectedObject.helperObject = r } return r } function Ca(e, t, i) { var n = i ? e.nameTable[t.parentId] : e.nameTable[t.parentId] || t; return !(!n || !n.container) } function La(e, t) { var i = e.nameTable[t.parentId]; "Canvas" === i.container.type && (t.margin.left = t.offsetX - i.wrapper.bounds.x - t.width / 2, t.margin.top = t.offsetY - i.wrapper.bounds.y - t.height / 2), e.nodePropertyChange(t, {}, { width: t.width, height: t.height, offsetX: t.offsetX, offsetY: t.offsetY, margin: { left: t.margin.left, right: t.margin.right, top: t.margin.top, bottom: t.margin.bottom }, rotateAngle: t.rotateAngle }), i.isLane || (i.wrapper.measure(new LU), i.wrapper.arrange(i.wrapper.desiredSize)) } function Ma(e, t) { if (t.parentId && "" !== t.parentId) { var i = e.nameTable[t.parentId]; if (i.isLane && i.parentId) for (var n = e.nameTable[i.parentId], r = i.id.slice(n.id.length), o = r.substring(0, r.length - 1), s = n.shape.lanes, a = void 0, l = 0; l < s.length; l++)if (a = s[l], o === a.id) for (var h = 0; h < a.children.length; h++)a.children[h].id === t.id && (a.children.splice(h, 1), h--); e.deleteChild(t) } } function Sa(e, t, i, n, r) { if (!e.currentSymbol) { e.protectPropertyChange(!0); var o = e.nameTable[t.parentId]; i = e.getObject(i.id) || i; var s = -1 !== e.nodes.indexOf(i) ? i.id : i; if ("Canvas" !== t.container.type || r) { if (o) { var a = o.wrapper.bounds, l = t.wrapper.bounds; if ("Horizontal" === o.shape.orientation) i.margin.left -= l.x - a.x; else { var h = t.parentId + o.shape.lanes[0].id + "_0_header"; i.margin.top -= l.y - a.y - e.nameTable[h].wrapper.bounds.height } } } else { var d = i.wrapper.offsetX - i.wrapper.actualSize.width / 2 - (t.wrapper.offsetX - t.wrapper.actualSize.width / 2), c = i.wrapper.offsetY - i.wrapper.actualSize.height / 2 - (t.wrapper.offsetY - t.wrapper.actualSize.height / 2); i.margin.left = d, i.margin.top = c } var p = e.nameTable[t.id]; if (p.children || (p.children = []), -1 === p.children.indexOf(i.id)) { Ma(e, i), e.getObject(i.id) && e.removeElements(i); var u = Wh(i); if (e.addChild(p, s), i = e.getObject(i.id), p.isLane && p.parentId) for (var g = (o = e.nameTable[p.parentId]).shape.lanes, m = p.id.slice(o.id.length), f = m.substring(0, m.length - 1), y = 0; y < g.length; y++)p.isLane && f === g[y].id && g[y].children.push(i); if (e.updateDiagramObject(i), p.parentId ? n || xa(p, o, i, e) : e.updateDiagramObject(p), !(e.diagramActions & tq.UndoRedo)) { var v = { type: "ChildCollectionChanged", category: "Internal", undoObject: u, redoObject: Wh(i), historyAction: r ? "AddNodeToLane" : void 0 }; e.addHistoryEntry(v) } } e.protectPropertyChange(!1) } } function xa(e, t, i, n, r) { var o, s = Wh(e), a = !1, l = t.shape.padding, h = e.wrapper.bounds, d = e.wrapper.outerBounds, c = i.wrapper.bounds; if (t && "SwimLane" === t.shape.type && (h.right < c.right + l || h.bottom < c.bottom + l)) { var p = t.wrapper.children[0], u = p.bounds.x, g = p.bounds.y, m = void 0; if (h.right < c.right + l && d.x <= h.x && (m = c.right - h.right, o = !1, p.updateColumnWidth(e.columnIndex, h.width + m, !0, l)), h.bottom < c.bottom + l && d.y <= h.y && (m = c.bottom - h.bottom, o = !0, p.updateRowHeight(e.rowIndex, h.height + m, !0, l)), !(n.diagramActions & tq.UndoRedo) && (r && (n.startGroupAction(), a = !0), void 0 !== o)) { var f = { category: "Internal", type: o ? "RowHeightChanged" : "ColumnWidthChanged", undoObject: s, redoObject: Wh(e) }; n.addHistoryEntry(f) } t.width = t.wrapper.width = p.width, t.height = t.wrapper.height = p.height, Oa(t), "Horizontal" === t.shape.orientation && qa(t, n, e.wrapper, e.columnIndex), Ga(n, t), n.drag(t, u - p.bounds.x, g - p.bounds.y), Va(t, n), Fa(t) } return function (e, t, i) { var n = e.nameTable[t.parentId]; if (n && n.isLane) { var r = e.nameTable[n.parentId], o = r.wrapper.children[0]; r.wrapper.bounds.x, r.wrapper.bounds.y; o.updateColumnWidth(n.columnIndex, o.columnDefinitions()[n.columnIndex].width, !0, i), o.updateRowHeight(n.rowIndex, o.rowDefinitions()[n.rowIndex].height, !0, i); var s = n.wrapper, a = void 0; t.margin.left < i && (t.margin.left = i), t.margin.top < i && (t.margin.top = i); for (var l = 0; l < s.children.length; l++) { var h = s.children[l]; if (h instanceof gq) { var d = e.nameTable[h.id]; if (d.isLane) { a = d.wrapper; break } } } a && ("Horizontal" === r.shape.orientation ? t.margin.left < i + a.actualSize.width && (t.margin.left = i + a.actualSize.width) : t.margin.top < i + a.actualSize.height && (t.margin.top = i + a.actualSize.height)), r.wrapper.measure(new LU(r.width, r.height)), r.wrapper.arrange(r.wrapper.desiredSize), t.offsetX = t.wrapper.offsetX, t.offsetY = t.wrapper.offsetY, e.nodePropertyChange(t, {}, { margin: { left: t.margin.left, top: t.margin.top } }), o.measure(new LU(o.width, o.height)), o.arrange(o.desiredSize), r.width = r.wrapper.width = r.wrapper.children[0].actualSize.width, r.height = r.wrapper.height = r.wrapper.children[0].actualSize.height } }(n, i, l), a } function Ta(e, t, i, n, r, o) { var s = vh(n.element.id); n.diagramRenderer.renderStackHighlighter(e, s, n.scroller.transform, t, i, r, o) } function Da(e, t, i, n) { var r = e, o = i.nameTable[r.parentId], s = i.nameTable[r.parentId]; if (t && s && s.container && "Stack" === s.container.type && t.container && "Stack" === t.container.type && s.id !== t.parentId) { var a = s.wrapper.children.indexOf(r.wrapper); a > -1 && (i.nameTable[r.id].parentId = t.id, s.wrapper.children.splice(a, 1)) } if (t && t.parentId && r.parentId && "Drag" === n && "Stack" === s.container.type) { var l = o.wrapper.children.indexOf(t.wrapper), h = o.wrapper.children.indexOf(r.wrapper), d = { targetIndex: l, target: t, sourceIndex: h, source: e }; o.wrapper.children.splice(h, 1), o.wrapper.children.splice(l, 0, r.wrapper); var c = { type: "StackChildPositionChanged", redoObject: { targetIndex: h, target: t, sourceIndex: l, source: e }, undoObject: d, category: "Internal" }; i.commandHandler.addHistoryEntry(c) } } function Aa(e, t, i) { var n = [], r = [], o = 0, s = i.shape, a = "Horizontal" === s.orientation; if (s.header && s.hasHeader && ka(n, s.header.height), function (e, t, i) { var n, r = 0, o = i.shape; if (e.length > 0) for (var s = 0; s < e.length; s++)r += e[s].height; if (t) { if (o.phases.length > 0 && o.phaseSize && (r += o.phaseSize, ka(e, o.phaseSize)), o.lanes.length > 0) for (var s = 0; s < o.lanes.length; s++)n = o.lanes[s].height, r += n, s === o.lanes.length - 1 && r < i.height && (n += i.height - r), ka(e, n) } else if (o.phases.length > 0) for (var a = 0, s = 0; s < o.phases.length; s++) { var l = o.phases[s].offset; a += 0 === s ? l : l -= a, r += n = l, s === o.phases.length - 1 && r < i.height && (n += i.height - r), ka(e, n) } else ka(e, i.height) }(n, a, i), function (e, t, i) { var n, r, o, s, a = 0, l = i.shape; if (l.phases.length > 0 && "Horizontal" === l.orientation) for (s = 0; s < l.phases.length; s++)n = l.phases[s].offset, a += 0 === s ? n : n -= a, r = Pa(n), s === l.phases.length - 1 && a < i.width && (r.width += i.width - a), e.push(r); else if (t) r = Pa(i.width), e.push(r); else for (l.phaseSize && l.phases.length > 0 ? l.lanes.length + 1 : l.lanes.length, l.phaseSize && l.phases.length > 0 && (a += l.phaseSize, r = Pa(l.phaseSize), e.push(r)), o = 0; o < l.lanes.length; o++)a += l.lanes[o].width, r = Pa(l.lanes[o].width), o === l.lanes.length - 1 && a < i.width && (r.width += i.width - a), e.push(r) }(r, a, i), e.setDefinitions(n, r), s.header && s.hasHeader && (!function (e, t, i) { for (var n = 0, r = e.columnDefinitions(), o = i.shape, s = 0; s < r.length; s++)n += r[s].width; var a = { annotations: [{ content: o.header.annotation.content }], style: o.header.style ? o.header.style : void 0, offsetX: i.offsetX, offsetY: i.offsetY, rowIndex: 0, columnIndex: 0, maxWidth: n, container: { type: "Canvas", orientation: "Horizontal" } }, l = Ea(t, e, i, a, !0); e.addObject(l, 0, 0, 1, e.columnDefinitions().length) }(e, t, i), o++), s.phases.length > 0 && s.phaseSize) { for (var l = 0; l < s.phases.length; l++)"" === s.phases[l].id && (s.phases[l].id = Bh()), ja(e, t, i, o, a, l); o++ } if (s.lanes.length > 0) for (l = 0; l < s.lanes.length; l++)"" === s.lanes[l].id && (s.lanes[l].id = Bh()), Ia(e, t, i, o, l, a), o++ } function Ea(e, t, i, n, r, o, s, a) { var l = new mQ(e, "nodes", n, !0); l.parentId = i.id, l.isHeader = !!r, l.isPhase = !!o, l.isLane = !!s; if (a && (l[o ? "PhaseHeaderParent" : "LaneHeaderParent"] = a), l.constraints &= ~(qU.InConnect | qU.OutConnect), l.constraints |= qU.HideThumbs, e.initObject(l), e.nodes.push(l), l.wrapper.children.length > 0) { for (var h = 0; h < l.wrapper.children.length; h++) { var d = l.wrapper.children[h]; d instanceof lq && (d.isCalculateDesiredSize = !1), d instanceof pq && (d.canConsiderBounds = !1, (!r && "Vertical" === i.shape.orientation && o || "Vertical" !== i.shape.orientation && s) && (d.isLaneOrientation = !0, d.refreshTextElement())) } l.wrapper.measure(new LU(void 0, void 0)), l.wrapper.arrange(l.wrapper.desiredSize) } return l.wrapper } function ja(e, t, i, n, r, o) { var s, a = 0, l = 0, h = i.shape; r ? (l = o, a = n, s = e.columnDefinitions()[o].width) : a = h.header && h.hasHeader ? o + 1 : o; var d = { annotations: [{ content: h.phases[o].header.annotation.content, rotateAngle: r ? 0 : 270 }], maxWidth: s, id: i.id + h.phases[o].id + "_header", offsetX: i.offsetX, offsetY: i.offsetY, style: h.phases[o].style, rowIndex: a, columnIndex: l, container: { type: "Canvas", orientation: r ? "Horizontal" : "Vertical" } }; h.phases[o].header.id = d.id; var c = Ea(t, 0, i, d, !1, !0, !1, h.phases[o].id); e.addObject(c, a, l) } function Ia(e, t, i, n, r, o) { for (var s, a, l, h, d = i.shape, c = d.phases.length || 1, p = d.header && d.hasHeader ? 1 : 0, u = 0, g = o ? n : p, m = d.phaseSize && d.phases.length > 0 ? 1 : 0, f = 0; f < c; f++)u = o ? f : r + m, l = e.rows[g].cells[u], (a = Ea(t, 0, i, { id: i.id + d.lanes[r].id + f, rowIndex: g, columnIndex: u, width: l.minWidth, height: l.minHeight, offsetX: i.offsetX, offsetY: i.offsetY, style: d.lanes[r].style, constraints: qU.Default | qU.ReadOnly | qU.AllowDrop, container: { type: "Canvas", orientation: o ? "Horizontal" : "Vertical" } }, !1, !1, !0)).children[0].isCalculateDesiredSize = !1, 0 === f && (s = { id: i.id + d.lanes[r].id + "_" + f + "_header", style: d.lanes[r].header.style, annotations: [{ content: d.lanes[r].header.annotation.content, rotateAngle: o ? 270 : 0 }], offsetX: i.offsetX, offsetY: i.offsetY, rowIndex: g, columnIndex: u, container: { type: "Canvas", orientation: o ? "Horizontal" : "Vertical" } }, d.lanes[r].header.id = s.id, o ? s.width = d.lanes[r].header.width : s.height = d.lanes[r].header.height, h = Ea(t, 0, i, s, !1, !1, !0, d.lanes[r].id), a.children.push(h)), e.addObject(a, g, u), o || g++ , u = o ? f : r + 1 } function ka(e, t) { var i = new xG; i.height = t, e.push(i) } function Pa(e) { var t = new TG; return t.width = e, t } function Na(e, t, i, n) { for (var r, o, s, a, l, h, d, c = [], p = 0, u = t.rowDefinitions().length, g = 0; g < u; g++)for (h = t.rows[g], a = 0; a < h.cells.length; a++)if ((l = h.cells[a].children[0]) && l.children && l.children.length) for (s = 1; s < l.children.length; s++)if (r = l.children[s], (o = e.getObject(r.id)) && (o.inEdges.length > 0 || o.outEdges.length > 0)) for (d = o.inEdges.concat(o.outEdges), p = 0; p < d.length; p++)-1 === c.indexOf(d[p]) && c.push(d[p]); return c } function Oa(e) { var t = e.wrapper; if (t.measure(new LU(e.width, e.height)), t.children[0] instanceof SG) { var i = t.children[0], n = !1; i.width && i.width < i.desiredSize.width && (n = !0, i.width = i.desiredSize.width), i.height && i.height < i.desiredSize.height && (n = !0, i.height = i.desiredSize.height), n && i.measure(new LU(i.width, i.height)) } t.arrange(t.desiredSize) } function Ra(e, t, i) { var n, r, o, s, a, l, h, d, c = t.wrapper.children[0]; for (n = i; n < c.rows.length; n++)for (l = c.rows[n], r = 0; r < l.cells.length; r++)if ((h = l.cells[r]).children && h.children.length > 0) for (o = 0; o < h.children.length; o++)d = h.children[o], (s = e.nameTable[d.id]).isLane && d.children.length > 1 && (a = e.nameTable[d.children[1].id]) && a.isLane && (a.rowIndex = n, a.columnIndex = r), s.rowIndex = n, s.columnIndex = r } function za(e, t) { var i, n, r, o, s, a, l, h, d = t.wrapper.children[0], c = t.shape, p = c.padding, u = c.lanes, g = d.bounds.y, m = c.phaseSize > 0 ? c.phases.length : 0, f = "Horizontal" === c.orientation, y = f ? c.phases.length || 1 : u.length + 1, v = f ? (c.header && c.hasHeader ? 1 : 0) + (c.phases.length > 0 ? 1 : 0) + c.lanes.length : (c.header && c.hasHeader ? 1 : 0) + c.phases.length; if (0 === m && !f && c.lanes.length && (v += 1), f ? (i = (c.header && c.hasHeader ? 1 : 0) + (m > 0 ? 1 : 0), n = 0) : (i = c.header && c.hasHeader ? 1 : 0, n = m > 0 ? 1 : 0), u.length > 0) for (g += c.header && c.hasHeader ? c.header.height : 0, a = 0; a < u.length; a++) { for (l = 0; l < u[a].children.length; l++)if (r = u[a].children[l], r.offsetX = u[a].width, r.offsetY = u[a].height, e.initObject(r), e.nodes.push(r), o = r.wrapper, f) { for (h = n; h < y; h++)if (s = d.rows[i].cells[h], o.margin.left < s.bounds.right - d.bounds.x) { r.parentId = s.children[0].id, h > n ? o.margin.left = o.margin.left - (s.bounds.left - d.bounds.left) : s.children[0].children[1].actualSize.width + p >= o.margin.left && (o.margin.left = s.children[0].children[1].actualSize.width + p), o.margin.left < p && (o.margin.left = p), o.margin.top < p && (o.margin.top = p), Ba(o, r, e); break } } else for (var w = i; w < v; w++)if (s = d.rows[w].cells[n], o.margin.top < s.bounds.bottom - g) { r.parentId = s.children[0].id, w > i ? o.margin.top = o.margin.top - (s.bounds.top - g) : s.children[0].children[1].actualSize.height + p >= o.margin.top && (o.margin.top = s.children[0].children[1].actualSize.height + p), o.margin.left < p && (o.margin.left = p), o.margin.top < p && (o.margin.top = p), Ba(o, r, e); break } f ? i++ : n++ } d.measure(new LU(t.width, t.height)), d.arrange(d.desiredSize), function (e, t) { var i, n, r, o, s, a, l = e.columnDefinitions(), h = e.rowDefinitions(), d = Ua(t); "Vertical" === t.shape.orientation && 0 === d && (d = t.shape.header && t.shape.hasHeader ? 1 : 0); var c = t.shape.padding; for (i = 0; i < l.length; i++)e.updateColumnWidth(i, l[i].width, !0, c); for (i = d; i < h.length; i++)e.updateRowHeight(i, h[i].height, !0, c); for (n = 0; n < h.length; n++)for (a = e.rows[n], i = 0; i < l.length; i++)if ((o = a.cells[i]).children && o.children.length > 0) for (r = 0; r < o.children.length; r++)(s = o.children[r]).maxWidth && (s.maxWidth = o.actualSize.width), s.maxHeight && (s.maxHeight = o.actualSize.height) }(d, t), t.width = t.wrapper.width = d.width, t.height = t.wrapper.height = d.height, Ga(e, t), t.wrapper.measure(new LU(t.width, t.height)), t.wrapper.arrange(d.desiredSize), function (e) { if ("SwimLane" === e.shape.type) for (var t = e.shape.lanes, i = void 0, n = void 0, r = 0; r < t.length; r++) { i = t[r]; for (var o = 0; o < i.children.length; o++)(n = i.children[o]).offsetX = n.wrapper.offsetX, n.offsetY = n.wrapper.offsetY } }(t), Va(t, e), Fa(t) } function Ba(e, t, i) { e.measure(new LU(t.width, t.height)), e.arrange(e.desiredSize); var n = i.getObject(t.parentId); i.addChild(n, t.id) } function Fa(e) { if ("SwimLane" === e.shape.type && !e.shape.isLane && !e.shape.isPhase) { var t = void 0, i = void 0, n = void 0, r = e.shape.lanes, o = Ua(e), s = e.wrapper.children[0].rowDefinitions(); for (i = 0; i < r.length; i++ , o++)t = r[i], "Horizontal" === e.shape.orientation ? (n = s[o].height, t.height !== n && (t.height = n)) : (n = e.wrapper.children[0].columnDefinitions()[o].width, t.width !== n && (t.width = n)) } } function Va(e, t) { var i, n, r, o, s = e.shape, a = s.phases, l = s.header && s.hasHeader ? 1 : 0, h = e.wrapper.children[0], d = h.bounds.y + (s.header && s.hasHeader ? s.header.height : 0); if ("SwimLane" === e.shape.type && (e = t.getObject(e.id) || e, a.length > 0)) if (h = e.wrapper.children[0], "Horizontal" === s.orientation) for (r = s.header && s.hasHeader ? h.rows[1] : h.rows[0], i = 0; i < a.length; i++)n = (o = r.cells[i].children[0]).bounds.right - h.bounds.x, a[i].offset !== n && (a[i].offset = n), t.nameTable[o.id].maxWidth = o.maxWidth; else for (i = 0; i < a.length; i++)n = (o = h.rows[l + i].cells[0].children[0]).bounds.bottom - d, a[i].offset !== n && (a[i].offset = n), t.nameTable[o.id].maxWidth = o.maxWidth } function Wa(e, t) { if (e && e.length > 0) for (var i = void 0, n = 0; n < e.length; n++)i = t.getObject(e[n]), t.connectorPropertyChange(i, {}, { sourceID: i.sourceID, targetID: i.targetID }) } function Ha(e, t, i, n) { var r, o, s, a, l, h, d, c, p = e.getObject(t.parentId), u = p.shape, g = p.wrapper.children[0], m = u.lanes, f = Na(e, g, t.rowIndex); ("Horizontal" === u.orientation && t.rowIndex !== i.rowIndex || "Vertical" === u.orientation && t.columnIndex !== i.columnIndex) && ("Horizontal" === u.orientation ? (a = t.rowIndex, l = i.rowIndex, r = (u.header && u.hasHeader ? 1 : 0) + (u.phases.length && u.phaseSize ? 1 : 0), (d = t.rowIndex - r) < (c = i.rowIndex - r) ? n && i.wrapper.offsetY > n.y && (l += c > 0 ? -1 : 1, c += c > 0 ? -1 : 1) : n && i.wrapper.offsetY < n.y && (l += 1, c += 1), a !== l && g.updateRowIndex(a, l)) : (a = t.columnIndex, l = i.columnIndex, r = u.phases.length && u.phaseSize ? 1 : 0, d = t.columnIndex - r, c = i.columnIndex - r, u.header && u.hasHeader ? 1 : 0, d < c ? n && i.wrapper.offsetX > n.x && (l += c > 0 ? -1 : 1, c += c > 0 ? -1 : 1) : n && i.wrapper.offsetX < n.x && (l += 1, c += 1), a !== l && (0 === u.phaseSize && 0 === l && u.header && u.hasHeader && (g.rows[0].cells[a].children = g.rows[0].cells[0].children, g.rows[0].cells[a].columnSpan = g.rows[0].cells[0].columnSpan, g.rows[0].cells[0].children = []), g.updateColumnIndex(0, a, l))), a !== l && (o = { target: Wh(i), source: Wh(t) }, h = m[d], m.splice(d, 1), m.splice(c, 0, h), s = { type: "LanePositionChanged", redoObject: { target: Wh(o.source), source: Wh(o.target) }, undoObject: o, category: "Internal" }, e.diagramActions & tq.UndoRedo || e.commandHandler.addHistoryEntry(s), Ra(e, p, 0), Wa(f, e), p.wrapper.measure(new LU(p.width, p.height)), p.wrapper.arrange(p.wrapper.desiredSize), e.updateDiagramObject(p))) } function _a(e, t, i, n) { var r = e.getObject(i.id), o = r.shape, s = o.header && o.hasHeader ? 1 : 0, a = o.lanes, l = o.phases, h = n.wrapper.actualSize.width, d = n.wrapper.actualSize.height, c = t.wrapper.actualSize.width, p = t.wrapper.actualSize.height; "SwimLane" === r.shape.type && ("Horizontal" === o.orientation ? t.isPhase ? l[t.columnIndex].offset += h - c : (s = o.phaseSize && o.phases.length > 0 ? s + 1 : s, a[t.rowIndex - s].height += d - p) : t.isPhase ? l[t.rowIndex - s].offset += d - p : (s = o.phaseSize && o.phases.length > 0 ? 1 : 0, a[t.columnIndex - s].width += h - c)) } function Ya(e, t) { var i, n = e.shape, r = n.header && n.hasHeader ? 1 : 0; return "Horizontal" === n.orientation ? (r += n.phases.length > 0 ? 1 : 0, i = t.rowIndex - r) : i = t.columnIndex - (n.phaseSize && n.phases.length > 0 ? 1 : 0), i } function Ua(e) { var t = 0, i = e.shape; return "Horizontal" === i.orientation && (t = i.header && i.hasHeader ? 1 : 0), i.phases.length > 0 && i.phaseSize && (t += 1), t } function qa(e, t, i, n) { var r = e.shape; if (r.phases.length > 0) { var o = t.nameTable[r.phases[n].header.id]; o && o.maxWidth < i.outerBounds.width && (o.maxWidth = i.outerBounds.width, o.wrapper.maxWidth = i.outerBounds.width) } } function Ga(e, t) { if (t.shape.header && t.shape.hasHeader) { var i = t.wrapper.children[0].rows[0].cells[0].children[0].id, n = e.nameTable[i]; n && n.isHeader && n.maxWidth < t.width && (n.maxWidth = t.width, n.wrapper.maxWidth = t.width) } } function Qa(e, t, i, n) { var r = e.nameTable[t.id]; if ("SwimLane" === r.shape.type) { e.protectPropertyChange(!0); var o = r.wrapper.children[0], s = o.bounds, a = r.shape, l = void 0, h = !1, d = void 0, c = void 0, p = void 0, u = void 0, g = void 0, m = void 0, f = void 0, y = void 0, v = void 0, w = void 0, b = void 0; if (u = new yQ(a, "lanes", i, !0), p = a.header && a.hasHeader ? 1 : 0, "Horizontal" === a.orientation && (h = !0, p = a.phases.length > 0 ? p + 1 : p), d = Na(e, o), g = void 0 !== n ? n : a.lanes.length, p += g, h) { var C = new xG; C.height = i.height, o.addRow(p, C, !1), r.height = void 0 !== r.height ? r.height + i.height : r.height, r.wrapper.height = o.height = r.height } else { var L = new TG; L.width = i.width, o.addColumn(g + 1, L, !1), r.width && (r.width += i.width, r.wrapper.width = o.width = r.width), e.diagramActions & tq.UndoRedo || (o.rows[0].cells[0].columnSpan += 1) } e.diagramActions & tq.UndoRedo || (u.id += Bh()), void 0 !== n ? a.lanes.splice(n, 0, u) : a.lanes.push(u), Ia(o, e, r, p, g, h), l = "Horizontal" === a.orientation ? e.nameTable[o.rows[p].cells[0].children[0].id] : a.header && a.hasHeader ? e.nameTable[o.rows[1].cells[p].children[0].id] : e.nameTable[o.rows[0].cells[p].children[0].id], e.diagramActions & tq.UndoRedo || (c = { type: "LaneCollectionChanged", changeType: "Insert", undoObject: Wh(u), redoObject: Wh(l), category: "Internal" }, e.addHistoryEntry(c)); if (Ra(e, r, "Horizontal" === a.orientation ? p : a.header && a.hasHeader ? 1 : 0), Oa(r), Ga(e, r), (m = i.children) && m.length > 0) for (f = 0; f < m.length; f++)if (w = m[f], b = { x: w.wrapper.offsetX, y: w.wrapper.offsetY }, "Horizontal" === a.orientation) for (o.rows[p].cells[y], y = 0; y < o.rows[p].cells.length; y++)Xa(e, o.rows[p].cells[y], b, w); else for (v = 0; v < o.rows.length; v++)Xa(e, o.rows[v].cells[p], b, w); Wa(d, e), e.drag(r, s.x - o.bounds.x, s.y - o.bounds.y), e.protectPropertyChange(!1) } } function Xa(e, t, i, n) { if (t.children && t.children.length > 0) { var r = t.children[0], o = e.nameTable[r.id]; r.bounds.containsPoint(i) && e.addChild(o, n) } } function Ja(e, t, i) { if ("SwimLane" === t.shape.type) { var n = void 0, r = void 0, o = void 0, s = void 0, a = void 0, l = void 0, h = void 0, d = void 0, c = t.wrapper.bounds.x, p = t.wrapper.bounds.y, u = t.shape, g = u.padding, m = u.phases, f = void 0, y = t.wrapper.children[0], v = "Horizontal" === u.orientation; if (n = u.header && u.hasHeader ? 0 : -1, u.phases.length > 0 && (n += 1), h = v ? u.lanes[0].header.width : u.lanes[0].header.height, i.offset > h) { for (d = 0; d < m.length; d++)if (o = m[d], s = d > 0 ? m[d - 1] : o, o.offset > i.offset) { if (f = d > 0 ? i.offset - s.offset : i.offset, v) { var w = y.columnDefinitions()[d]; w.width -= f, (a = e.nameTable[u.phases[d].header.id]).maxWidth = a.wrapper.maxWidth = w.width, y.updateColumnWidth(d, w.width, !1); var b = new TG; b.width = f, l = d, y.addColumn(d, b, !1); break } var C = y.rowDefinitions()[d + n]; C.height -= f, a = e.nameTable[u.phases[d].header.id], y.updateRowHeight(d + n, C.height, !1); var L = new xG; L.height = f, l = d, y.addRow(d + n, L, !1); break } if (e.diagramActions & tq.UndoRedo && void 0 === l) { (j = e.historyManager.currentEntry.next).isLastPhase && function (e, t, i, n, r, o) { var s = t.shape.phases[e - 2], a = i.previousPhase.offset; if (r) { var l = n.columnDefinitions()[e - 1], h = new TG; e > 1 ? (h.width = l.width - (a - s.offset), l.width = a - s.offset) : (h.width = l.width - a, l.width = a), n.updateColumnWidth(e - 1, l.width, !1), n.addColumn(e, h, !1) } else { var l = n.rowDefinitions()[e], d = new xG; e > 1 ? (d.height = i.undoObject.offset - a, l.height = a - s.offset) : (d.height = l.height - a, l.height = a), n.updateRowHeight(e, l.height, !1), n.addRow(1 + e, d, !1) } }(l = m.length, t, j, y, v) } var M = new vQ(t.shape, "phases", i, !0); if (e.diagramActions & tq.UndoRedo || (M.id += Bh()), u.phases.splice(l, 0, M), ja(y, e, t, n, v, l), v) { if (r = e.nameTable[y.rows[n].cells[l].children[0].id], 0 === l && u.header && u.hasHeader) { y.rows[0].cells[0].children = y.rows[0].cells[1].children, y.rows[0].cells[1].children = []; for (var S = y.rows[0], x = 0; x < S.cells.length; x++)S.cells[x].minWidth = void 0, S.cells[x].columnSpan = 0 === x ? y.rows[0].cells.length : 1 } !function (e, t, i, n, r) { var o, s, a, l, h, d = t.shape, c = Ua(t); d.header && d.hasHeader && (i.rows[0].cells[0].columnSpan = i.rows[0].cells.length); for (s = c; s < i.rows.length; s++)h = i.rows[s], a = h.cells[n - 1], l = h.cells[n], o = h.cells[n + 1], Za(e, t, a, l, o, s, n); Ra(e, t, 1) }(e, t, y, l); var T = y.columnDefinitions(); if (y.updateColumnWidth(l, T[l].width, !0, g), r.maxWidth = r.wrapper.maxWidth = T[l].width, T.length > l + 1) { var D = e.nameTable[y.rows[n].cells[l + 1].children[0].id]; y.updateColumnWidth(l + 1, T[l + 1].width, !0, g), D.maxWidth = D.wrapper.maxWidth = T[l + 1].width } t.width = t.wrapper.width = t.wrapper.children[0].width = y.width } else { r = e.nameTable[y.rows[n + l].cells[0].children[0].id]; var A = y.rowDefinitions(), E = A[n + l].height; !function (e, t, i, n, r) { for (var o, s, a, l = i.rows[n], h = i.rows[n + 1], d = i.rows[n - 1], c = 1; c < l.cells.length; c++)s = l.cells[c], a = h ? h.cells[c] : void 0, o = d.cells[c], Za(e, t, o, s, a, n, c); Ra(e, t, 1) }(e, t, y, n + l), y.updateRowHeight(n + l, E, !0, g), A.length > n + l + 1 && (E = A[n + l + 1].height, y.updateRowHeight(n + l + 1, E, !0, g)), t.height = t.wrapper.height = t.wrapper.children[0].height = y.actualSize.height } if (Oa(t), t.width = t.wrapper.actualSize.width, Ga(e, t), e.drag(t, c - t.wrapper.bounds.x, p - t.wrapper.bounds.y), Va(t, e), !(e.diagramActions & tq.UndoRedo)) { var j = { type: "PhaseCollectionChanged", changeType: "Insert", undoObject: Wh(M), redoObject: Wh(r), category: "Internal" }; e.addHistoryEntry(j) } e.updateDiagramObject(t) } } } function Za(e, t, i, n, r, o, s) { var a, l, h, d, c, p, u = t.shape, g = "Horizontal" === u.orientation, m = t.wrapper.children[0], f = n.desiredCellWidth, y = n.desiredCellHeight, v = g ? o : s; if (i ? (a = g ? i.bounds.x + i.bounds.width : i.bounds.x, l = g ? i.bounds.y : i.bounds.y + i.bounds.height) : (a = m.bounds.x, l = r.bounds.y), h = new TU(a, l, f, y), d = { id: t.id + (g ? u.lanes[v - 2] : u.lanes[v - 1]).id + Bh()[0], rowIndex: o, columnIndex: s, width: n.minWidth, height: n.minHeight, style: (g ? u.lanes[v - 2] : u.lanes[v - 1]).style, constraints: qU.Default | qU.AllowDrop, container: { type: "Canvas", orientation: g ? "Horizontal" : "Vertical" } }, c = Ea(e, 0, t, d, !1, !1, !0), c.children[0].isCalculateDesiredSize = !1, m.addObject(c, o, s), r && r.children && r.children.length) for (p = 0; p < r.children.length; p++)g ? e.nameTable[r.children[p].id].columnIndex += 1 : e.nameTable[r.children[p].id].rowIndex += 1; !function (e, t, i, n, r, o, s) { var a, l, h, d = e.nameTable[r.id], c = t || s, p = e.nameTable[d.parentId].shape.padding; if (c.children && c.children[0].children.length > 1) for (var u = 1; u < c.children[0].children.length; u++)a = c.children[0].children[u], h = e.nameTable[a.id], l = o ? { x: a.bounds.x, y: a.bounds.center.y } : { x: a.bounds.center.x, y: a.bounds.top }, n.containsPoint(l) ? (i.children[0].children.push(a), c.children[0].children.splice(u, 1), u-- , e.deleteChild(h), h.isLane || (h.parentId = r.id), d.children || (d.children = []), t || (o ? h.margin.left = h.wrapper.bounds.x - c.children[0].bounds.right : h.margin.top = h.wrapper.bounds.y - c.children[0].bounds.bottom), d.children.push(a.id), h.zIndex = d.zIndex + 1, e.removeElements(h)) : t && (o ? (h.margin.left -= i.desiredCellWidth, p > h.margin.left && (h.margin.left = p)) : (h.margin.top -= i.desiredCellHeight, p > h.margin.top && (h.margin.top = p))) }(e, r, n, h, c, g, i) } function Ka(e, t, i) { if ("SwimLane" === t.shape.type && ("ResizeSouth" === i || "ResizeEast" === i)) { var n = t.shape, r = t.wrapper.children[0], o = void 0, s = void 0; "ResizeSouth" === i ? "Vertical" === n.orientation ? o = r.rows[r.rows.length - 1].cells[0] : (s = r.rows.length - 1, o = r.rows[s].cells[r.rows[s].cells.length - 1]) : (s = n.header && n.hasHeader ? 1 : 0, o = r.rows[s].cells[r.rows[s].cells.length - 1]), e.commandHandler.select(e.nameTable[o.children[0].id]) } } function $a(e, t, i, n, r, o) { var s, a, l, h, d, c, p, u, g = Bh(), m = e.shape, f = m.phases, y = e.offsetX - e.wrapper.actualSize.width / 2, v = e.offsetY - e.wrapper.actualSize.height / 2; if ("Vertical" === m.orientation && (v += m.header && m.hasHeader ? m.header.height : 0), !o) for (r || (e.id += g, m && m.header && m.hasHeader ? m.header.id += g : m.header = void 0), s = 0; f && s < f.length; s++)f[s].id += g; for (u = r ? [i.childTable[n.id]] : m.lanes, s = 0; u && s < u.length; s++)for (l = u[s], o || (l.id += g), a = 0; l.children && a < l.children.length; a++)c = (h = l.children[a]).wrapper.offsetX - h.width / 2, p = h.wrapper.offsetY - h.height / 2, h.zIndex = -1, h.inEdges = h.outEdges = [], (o || i && (1 === i.pasteIndex || 0 === i.pasteIndex)) && ("Vertical" === m.orientation ? h.margin.top = p - v : h.margin.left = c - y), o || (h.id += g); if (!o) { if (r) { d = { shape: { lanes: u, phases: f, phaseSize: m.phaseSize, type: "SwimLane", orientation: m.orientation, header: { annotation: { content: "Title" }, height: 50 } } }, "Horizontal" === m.orientation ? (d.width = e.wrapper.actualSize.width, d.height = n.wrapper.actualSize.height + m.header.height + m.phaseSize, d.offsetX = e.wrapper.offsetX + 10 * i.pasteIndex, d.offsetY = n.wrapper.offsetY + 10 * i.pasteIndex) : (d.width = n.wrapper.actualSize.width, d.height = e.wrapper.actualSize.height, d.offsetX = n.wrapper.offsetX + 10 * i.pasteIndex, d.offsetY = e.wrapper.offsetY + 10 * i.pasteIndex), e = d } if (0 !== i.pasteIndex && (e.offsetX += 10, e.offsetY += 10), e.zIndex = -1, e = t.add(e), !r) for (var w = 0, b = Object.keys(i.childTable); w < b.length; w++) { var C = b[w], L = i.childTable[C]; L.id += g, L.sourceID += g, L.targetID += g, L.zIndex = -1, t.add(L) } "SVG" !== t.mode && t.refreshDiagramLayer(), t.select([e]) } return e } function el(e, t, i, n) { var r, o = t.nodes[0]; if (n || Ca(e, o, !0)) { var s = void 0, a = void 0, l = void 0, h = void 0, d = void 0, c = new lq; i && (d = e.nameTable[i].parentId, s = o = e.nameTable[i]), a = i ? s.wrapper : o.wrapper, (l = e.nameTable[d || o.parentId]) && "Grid" === l.container.type && ((r = new gq).children = [], !n && o.isHeader || ("Horizontal" === l.container.orientation && o.isPhase || "Vertical" === l.container.orientation && (o.rowIndex > 0 && o.columnIndex > 0 || o.isLane) ? (h = va(l, s ? s.columnIndex : o.columnIndex, !(!l.shape.header || !l.shape.hasHeader)), r.offsetX = h.center.x, r.offsetY = h.center.y, c.width = h.width, c.height = h.height) : (r.offsetX = l.offsetX, r.offsetY = a.offsetY, c.width = l.wrapper.actualSize.width, c.height = a.actualSize.height)), r.children.push(c), r.measure(new LU), r.arrange(r.desiredSize)) } return r } function tl(e, t, i, n, r) { r = void 0 !== r ? r : Ya(t, i); for (var o = !1, s = t.shape.lanes[r], a = s.children.length - 1; a >= 0; a--)n ? n.id === s.children[a].id && s.children.splice(a, 1) : (e.removeDependentConnector(s.children[a]), e.diagramActions & tq.UndoRedo || (e.diagramActions = e.diagramActions | tq.UndoRedo, o = !0), e.remove(s.children[a]), s.children.splice(a, 1), o && (e.diagramActions = e.diagramActions & ~tq.UndoRedo)) } function il(e) { return e.children[0] } function nl(e, t) { e.nodes.splice(e.nodes.indexOf(t), 1), e.removeFromAQuad(t), e.removeObjectsFromLayer(t), delete e.nameTable[t.id], e.removeElements(t) } function rl(e, t, i, n) { if ("SwimLane" === i.shape.type) { var r = i.shape, o = void 0; if (1 === r.lanes.length) e.remove(i); else { var s = i.wrapper.bounds.x, a = i.wrapper.bounds.y, l = void 0, h = void 0, d = void 0, c = void 0, p = i.wrapper.children[0]; o = n ? r.lanes.indexOf(n) : Ya(i, t); var u = Wh(r.lanes[o]); if (tl(e, i, t, void 0, o), !(e.diagramActions & tq.UndoRedo)) { var g = { type: "LaneCollectionChanged", changeType: "Remove", undoObject: u, redoObject: Wh(t), category: "Internal" }; e.addHistoryEntry(g) } r.lanes.splice(o, 1); var m = t ? "Horizontal" === r.orientation ? t.rowIndex : t.columnIndex : Ua(i) + o; if ("Horizontal" === r.orientation) { for (l = p.rows[m], h = 0; h < l.cells.length; h++)if ((d = l.cells[h]) && d.children.length > 0) for (c = 0; c < d.children.length; c++)ol(e, d.children[c]); p.removeRow(m) } else { for (i.width = void 0 !== i.width ? i.width - p.rows[0].cells[m].actualSize.width : i.width, h = 0; h < p.rows.length; h++)if ((d = p.rows[h].cells[m]) && d.children.length > 0) for (c = 0; c < d.children.length; c++)ol(e, d.children[c]); p.removeColumn(m) } i.width = i.wrapper.width = p.width, i.height = i.wrapper.height = p.height, Oa(i), Ra(e, i, m), e.drag(i, s - i.wrapper.bounds.x, a - i.wrapper.bounds.y), e.updateDiagramObject(i) } } } function ol(e, t) { var i; if (t instanceof gq) { if (t.children.length > 0) for (i = 0; i < t.children.length; i++)t.children[i] instanceof gq && ol(e, t.children[i]); nl(e, e.getObject(t.id)) } } function sl(e, t, i, n) { e.protectPropertyChange(!0); i.wrapper.bounds.x, i.wrapper.bounds.y; var r, o = !1, s = i.shape, a = i.wrapper.children[0], l = n ? s.phases.indexOf(n) : function (e, t) { var i = t.shape, n = i.header && i.hasHeader ? 1 : 0; return "Horizontal" === i.orientation ? e.columnIndex : e.rowIndex - n }(t, i), h = s.phases.length; if (s.phases.length > 1) { l === h - 1 && (o = !0, r = Wh(s.phases[l - 1])); var d = Wh(s.phases[l]); if (s.phases.splice(l, 1), !(e.diagramActions & tq.UndoRedo)) { var c = { type: "PhaseCollectionChanged", changeType: "Remove", undoObject: d, previousPhase: r, redoObject: Wh(t), category: "Internal", isLastPhase: o }; e.addHistoryEntry(c) } "Horizontal" === s.orientation ? function (e, t, i, n) { var r, o, s, a, l, h; n = void 0 !== n ? n : i.columnIndex; var d, c, p, u, g, m; for (d = 0; d < t.rows.length; d++)if ((r = t.rows[d]).cells.length > 1 && (o = r.cells[n], s = r.cells.length - 1 === n ? r.cells[n - 1] : r.cells[n + 1], l = s.children[0], o.children.length > 0)) if (a = o.children[0], g = e.nameTable[a.id], 0 === s.children.length && o.children.length > 0) s.children = o.children, s.columnSpan = o.columnSpan - 1; else { for (c = 0; c < a.children.length; c++) { if ((u = a.children[c]) instanceof gq) { if ((m = e.nameTable[u.id]).isLane || (m.parentId = l.id), r.cells.length - 1 === n && (m.margin.left = m.wrapper.bounds.x - l.bounds.x, u.margin.left = m.wrapper.bounds.x - l.bounds.x), l.children.push(u), e.nameTable[l.id]) { var f = e.nameTable[l.id]; f.children || (f.children = []), f.children.push(u.id) } a.children.splice(c, 1), c-- , g && g.children && -1 !== g.children.indexOf(m.id) && g.children.splice(g.children.indexOf(m.id), 1) } if (r.cells.length - 1 !== n) for (p = 0; p < l.children.length; p++) { var y = l.children[p]; if (y instanceof gq) { var v = e.nameTable[y.id]; v.margin.left = v.wrapper.bounds.x - a.bounds.x, y.margin.left = v.wrapper.bounds.x - a.bounds.x } } } if (g && g.isPhase) { var w = e.nameTable[l.id]; w && (l.maxWidth = w.wrapper.maxWidth = w.wrapper.maxWidth += g.wrapper.maxWidth) } nl(e, g) } var b = t.columnDefinitions()[n].width; t.removeColumn(n), n < t.columnDefinitions().length ? (h = t.columnDefinitions()[n].width, h += b, t.updateColumnWidth(n, h, !0)) : (h = t.columnDefinitions()[n - 1].width, h += b, t.updateColumnWidth(n - 1, h, !0)) }(e, a, t, l) : function (e, t, i, n, r) { var o, s, a, l, h, d, c, p, u, g, m, f = r.shape, y = void 0 !== n ? f.header ? n + 1 : n : i.rowIndex; o = t.rows[y]; var v = r.wrapper.bounds.y, w = f.phases.length; void 0 !== f.header && f.hasHeader && (v += t.rowDefinitions()[0].height); for (a = n === w ? t.rows[y - 1] : t.rows[y + 1], h = 0; h < o.cells.length; h++)if (s = o.cells[h], p = a.cells[h], u = p.children[0], s.children.length > 0) { var b = s.children[0], C = e.nameTable[b.id]; if (n < w) for (c = 0; c < u.children.length; c++)(g = u.children[c]) instanceof gq && ((m = e.nameTable[g.id]).margin.top = m.wrapper.bounds.y - (0 === n ? v : b.bounds.y), g.margin.top = m.wrapper.bounds.y - (0 === n ? v : b.bounds.y)); for (d = 0; d < b.children.length; d++)(g = b.children[d]) instanceof gq && ((m = e.nameTable[g.id]).parentId = u.id, n === w && (m.margin.top = m.wrapper.bounds.y - (0 === n ? v : u.bounds.y), g.margin.top = m.wrapper.bounds.y - (0 === n ? v : u.bounds.y)), u.children.push(g), b.children.splice(d, 1), d-- , C.children && -1 !== C.children.indexOf(m.id) && C.children.splice(C.children.indexOf(m.id), 1)); nl(e, C) } var L = t.rowDefinitions()[y].height; t.removeRow(y), y < t.rowDefinitions().length ? (l = t.rowDefinitions()[y].height, l += L, t.updateRowHeight(y, l, !0)) : (l = t.rowDefinitions()[y - 1].height, l += L, t.updateRowHeight(y - 1, l, !0)) }(e, a, t, l, i), Ga(e, i), Ra(e, i, 1), Va(i, e), e.protectPropertyChange(!1), e.updateDiagramObject(i) } } function al(e, t) { for (var i = [], n = 0; n < t.length; n++) { var r = t[n]; e.containsRect(r.wrapper.bounds) && i.push(r) } return i } function ll(e, t) { for (var i = 0; i < e.length; i++)if (e[i].id === t) return !0; return !1 } function hl(e) { var t; return e && (e.type ? t = "Connector" : e.shape && !e.type && (t = "Node")), t } function dl(e, t) { t instanceof mQ && (e.shape.header || (t.shape.hasHeader = !1)) } function cl(e, t) { if (t instanceof mQ) switch (e.shape.shape) { case "JoinNode": e.width || (t.width = 20), e.height || (t.height = 90), e.style && e.style.fill || (t.style.fill = "black"); break; case "ForkNode": e.width || (t.width = 90), e.height || (t.height = 20), e.style && e.style.fill || (t.style.fill = "black"); break; case "InitialNode": case "FinalNode": e.style && e.style.fill || (t.style.fill = "black") } else switch (e.shape.flow) { case "Object": e.style && e.style.strokeDashArray || (t.style.strokeDashArray = "8 4"), e.style && e.style.strokeWidth || (t.style.strokeWidth = 2), e.targetDecorator && e.targetDecorator.shape || (t.targetDecorator.shape = "OpenArrow"); break; case "Control": e.style && e.style.strokeWidth || (t.style.strokeWidth = 2), e.targetDecorator && e.targetDecorator.shape || (t.targetDecorator.shape = "OpenArrow"), e.sourceDecorator && e.sourceDecorator.shape || (t.sourceDecorator.shape = "None") } } function pl(e, t, i) { var n; n = xU.findLength(t, e) > xU.findLength(i, e) ? i : t; var r = xU.findAngle(t, i), o = xU.findAngle(n, e), s = xU.findLength(n, e), a = o + 2 * (r - o); return { x: n.x + s * Math.cos(a * Math.PI / 180), y: n.y + s * Math.sin(a * Math.PI / 180) } } function ul(e) { var t = e.parentElement; do { if (jh(t, "e-diagram")) return !0; t = t.parentElement } while (t); return !1 } function gl(e, t, i) { if (e && e.children && e.children.length > 0) for (var n = void 0, r = 0; r < e.children.length; r++)return (n = i[e.children[r]]).shape.type === t || gl(n, t, i); return !1 } function ml(e, t) { var i; i = "Bezier" === e.type ? function (e) { var t = []; if ("Bezier" === e.type) for (var i = 0, n = 0; n < e.segments.length; n++)for (var r = e.segments[n], o = xU.isEmptyPoint(r.point1) ? r.bezierPoint1 : r.point1, s = xU.isEmptyPoint(r.point2) ? r.bezierPoint2 : r.point2, a = Number((e.distance(o, r.points[0]) + e.distance(s, o) + e.distance(r.points[1], s)) / 1.5), l = 0; l < a - 1; l += 10)t[i] = Os(0, r.points[0], xU.isEmptyPoint(r.point1) ? r.bezierPoint1 : r.point1, xU.isEmptyPoint(r.point2) ? r.bezierPoint2 : r.point2, r.points[1], l, a), i++; return t }(e) : e.intermediatePoints; for (var n = 0; n < i.length - 1; n++) { var r = i[n], o = i[n + 1], s = TU.toBounds([r, o]); if (s.Inflate(e.hitPadding), s.containsPoint(t)) { var a = pl(t, r, o), l = fl({ x1: r.x, x2: o.x, y1: r.y, y2: o.y }, { x1: t.x, x2: a.x, y1: t.y, y2: a.y }); if (l.enabled) { var h = xU.findLength(t, l.intersectPt); if (Math.abs(h) < e.hitPadding) return !0 } else { var d = TU.toBounds([t, t]); if (d.Inflate(3), d.containsPoint(r) || d.containsPoint(o)) return !0 } if (xU.equals(t, a)) return !0 } } if (e.annotations.length > 0) { var c = e.wrapper.children; for (n = 3; n < c.length; n++) { if (c[n].bounds.containsPoint(t)) return !0 } } return !1 } function fl(e, t) { var i = { x: 0, y: 0 }, n = e, r = t, o = (r.y2 - r.y1) * (n.x2 - n.x1) - (r.x2 - r.x1) * (n.y2 - n.y1), s = (r.x2 - r.x1) * (n.y1 - r.y1) - (r.y2 - r.y1) * (n.x1 - r.x1), a = (n.x2 - n.x1) * (n.y1 - r.y1) - (n.y2 - n.y1) * (n.x1 - r.x1); if (0 === o) return { enabled: !1, intersectPt: i }; var l = s / o, h = a / o; return l >= 0 && l <= 1 && h >= 0 && h <= 1 ? (i.x = n.x1 + l * (n.x2 - n.x1), i.y = n.y1 + l * (n.y2 - n.y1), { enabled: !0, intersectPt: i }) : { enabled: !1, intersectPt: i } } function yl(e, t, i, n) { var r = fl(vl(e.x, e.y, t.x, t.y), vl(i.x, i.y, n.x, n.y)); return r.enabled ? r.intersectPt : { x: 0, y: 0 } } function vl(e, t, i, n) { return { x1: Number(e) || 0, y1: Number(t) || 0, x2: Number(i) || 0, y2: Number(n) || 0 } } function wl(e, t, i) { var n = []; i = i || 0; var r = { x: t.topLeft.x - i, y: t.topLeft.y }, o = { x: t.topRight.x + i, y: t.topRight.y }, s = { x: t.bottomRight.x, y: t.bottomRight.y - i }, a = { x: t.bottomLeft.x, y: t.bottomLeft.y + i }; return n.push(r), n.push(o), n.push(s), n.push(a), n } function bl(e, t, i) { var n, r = i instanceof mQ ? i.constraints & qU.InheritTooltip : i.constraints & YU.InheritTooltip, o = i instanceof mQ ? i.constraints & qU.Tooltip : i.constraints & YU.Tooltip; n = function (e, t, i, n) { var r = {}, o = (i.scroller.transform.scale, document.getElementById(i.element.id)), s = e.wrapper.bounds, a = o.getBoundingClientRect(); i.scroller.horizontalOffset, i.scroller.verticalOffset; switch (i.tooltipObject.position) { case "BottomCenter": r = Cl(t, s.bottomCenter, i, n, a.width / 2, a.height); break; case "BottomLeft": case "LeftBottom": r = Cl(t, s.bottomLeft, i, n, 0, a.height); break; case "BottomRight": case "RightBottom": r = Cl(t, s.bottomRight, i, n, a.width, a.height); break; case "LeftCenter": r = Cl(t, s.middleLeft, i, n, 0, a.height / 2); break; case "LeftTop": case "TopLeft": r = Cl(t, s.topLeft, i, n, 0, 0); break; case "RightCenter": r = Cl(t, s.middleRight, i, n, a.width, a.height / 2); break; case "RightTop": case "TopRight": r = Cl(t, s.topRight, i, n, a.width, 0); break; case "TopCenter": r = Cl(t, s.topCenter, i, n, a.width / 2, 0) }return r }(i, t, e, "Mouse" === (!r && o ? i.tooltip.relativeMode : e.tooltip.relativeMode)); var s = Fs(e); return { x: n.x + s.width, y: n.y + s.height } } function Cl(e, t, i, n, r, o) { var s = {}, a = i.scroller.transform.scale, l = i.scroller.horizontalOffset, h = i.scroller.verticalOffset; return s.x = (n ? e.x : t.x) * a + l - r, s.y = (n ? e.y : t.y) * a + h - o, s } function Ll(e, t) { var i, n = 0, r = 0; for (n = 0; n < e.length; n++) { var o = Vh(e[n].wrapper); for (r = 0; r < e.length; r++) { var s = Vh(e[r].wrapper); "Top" === t || "Bottom" === t || "BottomToTop" === t || "Middle" === t ? o.center.y > s.center.y && (i = e[n], e[n] = e[r], e[r] = i) : o.center.x > s.center.x && (i = e[n], e[n] = e[r], e[r] = i) } } return e } function Ml(e, t, i) { var n, r, o; r = Sl(e, t, i), n = xU.findAngle(e[r.index], e[r.index + 1]); var s = xl(t); return o = xU.transform(r.point, n + 45, s), r.point = o, r.angle = n, r } function Sl(e, t, i) { for (var n, r, o, s, a, l = 0, h = t.offset, d = [], c = 0; c < e.length - 1; c++)l += xU.distancePoints(e[c], e[c + 1]), d.push(l); o = h * l; for (var p = 0; p < d.length; p++) { if (d[p] >= o) return r = xU.findAngle(e[p], e[p + 1]), n = xU.transform(e[p], r, o - (s || 0)), a = p, { point: n, index: a }; s = d[p] } return { point: n, index: a } } function xl(e) { var t = void 0 === e.content ? 10 : 0, i = 0; switch (e.alignment) { case "Center": i = 0; break; case "Before": i = -(0 + t); break; case "After": i = 0 + t }return i } function Tl(e, t, i) { t %= 360; var n, r; switch (e.alignment) { case "Before": t >= 45 && t <= 135 ? (r = "right", n = .5 === e.offset ? "center" : "top") : t >= 225 && t <= 315 ? (r = "left", n = .5 === e.offset ? "center" : "bottom") : t > 45 && t < 225 ? (n = "top", r = .5 === e.offset ? "center" : "right") : (n = "bottom", r = .5 === e.offset ? "center" : "left"); break; case "After": t >= 45 && t <= 135 ? (r = "left", n = .5 === e.offset ? "center" : "top") : t >= 225 && t <= 315 ? (r = "right", n = .5 === e.offset ? "center" : "bottom") : t > 45 && t < 225 ? (n = "bottom", r = .5 === e.offset ? "center" : "right") : (n = "top", r = .5 === e.offset ? "center" : "left"); break; case "Center": r = "center", n = "center" }if (0 === e.offset || 1 === e.offset) { switch (Dl(i[0], i[1])) { case "left": r = 0 === e.offset ? "right" : "left"; break; case "right": r = 0 === e.offset ? "left" : "right"; break; case "bottom": n = 0 === e.offset ? "top" : "bottom"; break; case "top": n = 0 === e.offset ? "bottom" : "top" } } return { hAlign: r, vAlign: n } } function Dl(e, t) { return Math.abs(t.x - e.x) > Math.abs(t.y - e.y) ? e.x < t.x ? "right" : "left" : e.y < t.y ? "bottom" : "top" } function Al(e, t) { if (e instanceof mQ && e.children) for (var i = 0; i < e.children.length; i++)t.nameTable[e.children[i]].children && Al(e, t), t.removeFromAQuad(t.nameTable[e.children[i]]), t.removeObjectsFromLayer(t.nameTable[e.children[i]]), delete t.nameTable[e.children[i]] } function El(e, t) { if (e && e.children && e.children.length > 0) for (var i = 0; i < e.children.length; i++) { var n = e.children[i]; n instanceof gq && El(n, t) } return -1 === t.indexOf(e.id) && t.push(e.id), t } function jl(e) { var t = function (e) { for (var t, i, n = [], r = 0; r < e.length; r++)if ("SwimLane" === (t = e[r]).shape.type) { i = t.wrapper.children[0].childTable; for (var o = 0, s = Object.keys(i); o < s.length; o++)n = El(i[s[o]], n) } return n }(e.nodes), i = Wh(e, e.getCustomProperty); return i.selectedItems.nodes = [], i.selectedItems.connectors = [], i.selectedItems.wrapper = null, e.serializationSettings.preventDefaults && (i = Il(i, e)), function (e, t) { var i = t.nodes; if (i) for (var n = 0; n < i.length; n++)-1 !== e.indexOf(i[n].id) && (i.splice(n, 1), n--) }(t, i), JSON.stringify(i) } function Il(e, t, i, n) { i = function (e, t) { var i, n = [], r = new DX; if (e.getClassName) switch (e.getClassName()) { case "Diagram": i = new DX; break; case "Node": i = new mQ(r, "", n); break; case "Path": i = new _G(r, "", n); break; case "Native": i = new YG(r, "", n); break; case "Html": i = new UG(r, "", n); break; case "Image": i = new qG(r, "", n); break; case "Text": i = new GG(r, "", n); break; case "BasicShape": i = new QG(r, "", n); break; case "FlowShape": i = new XG(r, "", n); break; case "BpmnShape": i = new oQ(r, "", n); break; case "UmlActivityShape": i = new sQ(r, "", n); break; case "UmlClassifierShape": i = new gQ(r, "", n); break; case "SwimLane": i = new wQ(r, "", n), e.header && (i.header = new fQ(r, "", n), i.header.style.fill = ""); break; case "ShapeAnnotation": i = new jq(r, "", n); break; case "PointPort": i = new xq(r, "", n); break; case "BpmnGateway": i = new JG(r, "", n); break; case "BpmnDataObject": i = new ZG(r, "", n); break; case "BpmnEvent": i = new $G(r, "", n); break; case "BpmnSubEvent": i = new eQ(r, "", n); break; case "BpmnActivity": i = new nQ(r, "", n); break; case "BpmnAnnotation": i = new rQ(r, "", n); break; case "MethodArguments": i = new aQ(r, "", n); break; case "UmlClassAttribute": i = new lQ(r, "", n); break; case "UmlClassMethod": i = new hQ(r, "", n); break; case "UmlClass": i = new dQ(r, "", n); break; case "UmlInterface": i = new cQ(r, "", n); break; case "UmlEnumerationMember": i = new pQ(r, "", n); break; case "UmlEnumeration": i = new uQ(r, "", n); break; case "Lane": i = new yQ(r, "", n); break; case "Phase": i = new vQ(r, "", n); break; case "ChildContainer": i = new bQ; break; case "Connector": i = new lG(r, "", n); break; case "StraightSegment": i = new iG(r, "", n); break; case "BezierSegment": i = new nG(r, "", n); break; case "OrthogonalSegment": i = new rG(r, "", n); break; case "PathAnnotation": i = new Iq(r, "", n); break; case "Stop": i = new OU(r, "", n); break; case "Point": i = t || new xU(r, "", n); break; case "UserHandle": i = new gG(r, "", n); break; case "Command": i = new bG(r, "", n) } else i = t; return i }(t, i); for (var r = [], o = 0, s = r = r.concat(Object.keys(e)); o < s.length; o++) { var a = s[o]; t instanceof mQ && (n = "shape" === a), e[a] instanceof Array ? function (e, t, i, n) { if (0 === e[n].length) delete e[n]; else if (e[n].every(function (e) { return "number" == typeof e })) { var r = void 0, o = !0; for (r = 0; r < e[n].length; r++)o = !(!o || e[n][r] !== t[n][r]); o && delete e[n] } else { var r = void 0; if ("layers" === n && (e[n].splice(0, 1), 0 === e[n].length && delete e[n]), e[n]) for (r = e[n].length - 1; r >= 0; r--)"nodes" !== n && "connectors" !== n || (e[n][r].wrapper = null), "dataManager" !== n && (e[n][r] = Il(e[n][r], i[n][r], void 0 !== t[n] ? t[n][r] : void 0), "[]" !== JSON.stringify(e[n][r]) && "{}" !== JSON.stringify(e[n][r]) && void 0 !== e[n][r] || e[n].splice(r, 1)) } }(e, i, t, a) : e[a] instanceof Object ? "wrapper" !== a && (e[a] = Il(e[a], t[a], i[a], n)) : (i && e[a] === i[a] || void 0 === e[a]) && (n && "type" === a || t instanceof wQ && "orientation" === a || delete e[a]), "[]" !== JSON.stringify(e[a]) && "{}" !== JSON.stringify(e[a]) && void 0 !== e[a] || delete e[a] } return e } function kl(e, t) { t.clear(), t.protectPropertyChange(!0); for (var i = t.dataSourceSettings.doBinding, n = t.setNodeTemplate, r = t.getDescription, o = t.getCustomProperty, s = {}, a = 0, l = t.commandManager.commands; a < l.length; a++) { var h = l[a]; s[h.name] = { execute: h.execute, canExecute: h.canExecute } } var d = t.rulerSettings.horizontalRuler.arrangeTick, c = t.rulerSettings.verticalRuler.arrangeTick, p = t.layout.getLayoutInfo, u = t.layout.getBranch, g = t.getNodeDefaults, m = t.getConnectorDefaults, f = JSON.parse(e); f = Pl(f), t.contextMenuSettings = f.contextMenuSettings || {}, t.constraints = f.constraints || XU.Default, t.tool = f.tool || JU.Default, t.bridgeDirection = f.bridgeDirection || "Top", t.pageSettings = f.pageSettings || {}, t.drawingObject = f.drawingObject || void 0, t.tooltip = f.tooltip || {}, t.addInfo = f.addInfo || void 0, t.getDescription = r, t.scrollSettings = f.scrollSettings || {}, t.commandManager = f.commandManager || {}, t.layers = f.layers || [], t.rulerSettings.horizontalRuler.arrangeTick = d, t.rulerSettings.verticalRuler.arrangeTick = c; for (var y = 0, v = t.commandManager.commands; y < v.length; y++) { var w = v[y]; s[w.name] && (w.execute = s[w.name].execute, w.canExecute = s[w.name].canExecute) } if (t.backgroundColor = f.backgroundColor || "transparent", t.basicElements = f.basicElements || [], t.connectors = f.connectors || [], t.dataSourceSettings = f.dataSourceSettings || {}, t.dataSourceSettings.doBinding = i, t.height = f.height || "100%", t.setNodeTemplate = n, t.getConnectorDefaults = m, t.getNodeDefaults = g, t.getCustomProperty = o, t.mode = f.mode || "SVG", f.nodes.length) for (var b = 0; b < f.nodes.length; b++)f.nodes[b].shape && "SwimLane" === f.nodes[b].shape.type && $a(f.nodes[b], void 0, void 0, void 0, void 0, !0); t.nodes = f.nodes || [], t.rulerSettings = f.rulerSettings || {}, t.snapSettings = f.snapSettings || {}, t.width = f.width || "100%", t.layout = f.layout || {}, t.layout.getLayoutInfo = td(p), t.layout.getBranch = td(u), t.diagramActions = 0, t.isLoading = !0, t.protectPropertyChange(!1); var C; for (b = 0; b < t.views.length; b++)(C = t.views[t.views[b]]).refresh(), C instanceof DX && t.element.classList.add("e-diagram"); return f.selectedItems && (f.selectedItems.nodes = [], f.selectedItems.connectors = []), t.selectedItems = f.selectedItems, f } function Pl(e) { if (e && (void 0 === e.version || e.version < 17.1)) for (var t = 0, i = e.nodes; t < i.length; t++) { var n = i[t]; if (n && n.ports.length > 0) for (var r = 0, o = n.ports; r < o.length; r++) { var s = o[r]; s && s.constraints && s.constraints === sq.None && (s.constraints = sq.Default) } } return e } function Nl(e, t) { var i = t.style, n = t; t.canApplyStyle = !0; for (var r = 0, o = Object.keys(e); r < o.length; r++) { switch (o[r]) { case "fill": i.fill = e.fill, i instanceof VU && (i.fill = "transparent"); break; case "textOverflow": i.textOverflow = e.textOverflow; break; case "opacity": i.opacity = e.opacity; break; case "strokeColor": i.strokeColor = e.strokeColor; break; case "strokeDashArray": i.strokeDashArray = e.strokeDashArray; break; case "strokeWidth": i.strokeWidth = e.strokeWidth; break; case "bold": i.bold = e.bold; break; case "color": i.color = e.color; break; case "textWrapping": i.textWrapping = e.textWrapping; break; case "fontFamily": i.fontFamily = e.fontFamily; break; case "fontSize": i.fontSize = e.fontSize; break; case "italic": i.italic = e.italic; break; case "textAlign": i.textAlign = e.textAlign; break; case "whiteSpace": i.whiteSpace = e.whiteSpace; break; case "textDecoration": i.textDecoration = e.textDecoration; break; case "gradient": !function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; switch (r) { case "type": t.type = e.type; break; case "x1": t.x1 = e.x1; break; case "x2": t.x2 = e.x2; break; case "y1": t.y1 = e.y1; break; case "y2": t.y2 = e.y2; break; case "cx": t.cx = e.cx; break; case "cy": t.cy = e.cy; break; case "fx": t.fx = e.fx; break; case "fy": t.fy = e.fy; break; case "r": t.r = e.r; break; case "stops": t.stops = e.stops } } }(e.gradient, i.gradient) } } t instanceof pq && n.refreshTextElement() } function Ol(e, t, i) { for (var n = t, r = n.hyperlink, o = 0, s = Object.keys(e); o < s.length; o++) { switch (s[o]) { case "color": n.style.color = r.color = e.color; break; case "content": n.content = r.content = e.content || r.link; break; case "link": var a = i.style; n.style.color = e.link ? r.color : a.color, n.style.textDecoration = e.link ? r.textDecoration : i.style.textDecoration, n.content = e.link ? r.content || e.link : i.content, r.link = e.link; break; case "textDecoration": n.style.textDecoration = r.textDecoration = e.textDecoration } } } function Rl(e, t, i) { e.width = t.width, e.height = t.height, e.minHeight = t.minHeight, e.maxHeight = t.maxHeight, e.minWidth = t.minWidth, e.maxWidth = t.maxWidth, e.horizontalAlignment = t.wrapper.children[0].horizontalAlignment, e.verticalAlignment = t.wrapper.children[0].verticalAlignment, e.relativeMode = t.wrapper.children[0].relativeMode, e.visible = t.wrapper.children[0].visible, t.shape instanceof GG && (e.margin = t.shape.margin), e.id = t.wrapper.children[0].id, e.style = t.style; for (var n = 0, r = i.views; n < r.length; n++) { var o = r[n]; kh(t.id + "_groupElement", o), kh(t.id + "_content_groupElement", o), kh(t.id + "_content_html_element", o) } t.wrapper.children.splice(0, 1), t.wrapper.children.splice(0, 0, e) } function zl(e, t, i, n) { var r = new lq; switch (e.shape.type) { case "Path": var o = new yq; o.data = t.shape.data, Rl(r = o, t, n); break; case "Image": var s = new wq; s.source = t.shape.source, s.imageAlign = t.shape.align, s.imageScale = t.shape.scale, Rl(r = s, t, n); break; case "Text": Rl(r = new pq, t, n); break; case "Basic": var a = void 0; a = "Rectangle" === t.shape.shape ? new lq : new yq, "Polygon" === t.shape.shape ? a.data = Lo(t.shape.points) : a.data = Fo(t.shape.shape), Rl(r, t, n), "Rectangle" === t.shape.shape && (a.cornerRadius = t.shape.cornerRadius), r = a; break; case "Flow": var l = new yq; l.data = _o(t.shape.shape), Rl(r = l, t, n); break; case "Native": var h = new Cq(e.id, n.element.id); h.content = t.shape.content, h.scale = t.shape.scale, Rl(r = h, t, n); break; case "HTML": var d = new Uq(e.id, n.element.id); d.content = t.shape.content, Rl(r = d, t, n) }void 0 === e.shape.type || e.shape.type === i.shape.type ? Bl(e, t, n) : (r.width = t.wrapper.children[0].width, r.height = t.wrapper.children[0].height, t.shape instanceof GG && (r.margin = t.shape.margin), r.style = t.style, t.wrapper.children[0] = r) } function Bl(e, t, i) { if (Object.keys(e.shape).length > 0) if ("Path" === t.shape.type && void 0 !== e.shape.data) t.wrapper.children[0].data = e.shape.data; else if ("Text" === t.shape.type && void 0 !== e.shape.content) t.wrapper.children[0].content = e.shape.content; else if ("Image" === t.shape.type && void 0 !== e.shape.source) t.wrapper.children[0].source = e.shape.source; else if ("Native" === t.shape.type) { for (var n = void 0, r = 0; r < i.views.length; r++)n = fh(t.wrapper.children[0].id + "_native_element", i.views[r]), void 0 !== e.shape.content && n && (n.removeChild(n.children[0]), t.wrapper.children[0].content = e.shape.content, n.appendChild(Ph(t.wrapper.children[0], !1))); t.wrapper.children[0].scale = e.shape.scale ? e.shape.scale : t.wrapper.children[0].scale } else if ("HTML" === t.shape.type) { var o = void 0; for (r = 0; r < i.views.length; r++)(o = fh(t.wrapper.children[0].id + "_html_element", i.views[r])) && (o.removeChild(o.children[0]), t.wrapper.children[0].content = e.shape.content, o.appendChild(Ph(t.wrapper.children[0], !0))) } else if ("Flow" === t.shape.type && void 0 !== e.shape.shape) { t.shape.shape = e.shape.shape; var s = _o(t.shape.shape.toString()); t.wrapper.children[0].data = s } else if ("UmlActivity" === t.shape.type && void 0 !== e.shape.shape) Fl(t, e); else if (void 0 !== e.shape.cornerRadius) t.wrapper.children[0].cornerRadius = e.shape.cornerRadius; else if (void 0 !== e.shape.shape) { t.shape.shape = e.shape.shape; var a = Fo(t.shape.shape.toString()); t.wrapper.children[0].data = a } t.wrapper.children[0].canMeasurePath = !0 } function Fl(e, t) { e.shape.shape = t.shape.shape; var i = ma(e.shape.shape.toString()); "InitialNode" === e.shape.shape ? e.wrapper.children[0].style.fill = "black" : "ForkNode" === e.shape.shape || "JoinNode" === e.shape.shape ? e.wrapper.children[0].style.fill = "black" : "FinalNode" === e.shape.shape && (e instanceof mQ && (e.wrapper = Vl(e)), e.wrapper.children[0].data = i) } function Vl(e) { var t = new gq; t.style.fill = "transparent"; var i = "M 25 50 C 11.21 50 0 38.79 0 25 C 0 11.21 11.21 0 25 0 C 38.78 0 50 11.21 50 25 C 50 38.79 38.78 50 25 50", n = new yq; n.data = i, n.id = e.id + "_0_finalNode", n.horizontalAlignment = "Center", n.verticalAlignment = "Center", n.relativeMode = "Object", n.style.strokeColor = e.style.strokeColor, n.style.strokeWidth = e.style.strokeWidth; var r = new yq; return r.data = i, r.id = e.id + "_1_finalNode", r.horizontalAlignment = "Center", r.verticalAlignment = "Center", r.relativeMode = "Object", r.style.fill = e.style.fill, r.style.strokeColor = e.style.strokeColor, r.style.strokeWidth = e.style.strokeWidth, t.children = [n, r], t.children[0].width = e.width, t.children[0].height = e.height, t.children[1].height = e.height / 1.5, t.children[1].width = e.width / 1.5, t.style.strokeWidth = 0, t.style.strokeColor = "transparent", t } function Wl(e, t, i) { var n = ma(i.shape.shape); switch (e.data = n, t = e, i.shape.shape) { case "StructuredNode": if (i.annotations) for (var r = 0; r < i.annotations.length; r++)i.annotations[r].content = "<<" + i.annotations[r].content + ">>"; t = e; break; case "FinalNode": t = Vl(i) }return t } function Hl(e) { kh(e + "_linear"), kh(e + "_radial") } function _l(e, t) { var i = e.indexOf(t); i >= 0 && e.splice(i, 1) } function Yl(e, t) { var i, n, r; if (e.intermediatePoints = t, e.updateSegmentElement(e, t, e.wrapper.children[0]), e.sourcePoint, n = e.sourceDecorator, "Bezier" === e.type) { var o = e.segments[0], s = e.segments[e.segments.length - 1]; i = [xU.isEmptyPoint(s.point2) ? s.bezierPoint2 : s.point2, xU.isEmptyPoint(o.point1) ? o.bezierPoint1 : o.point1] } else i = e.intermediatePoints; t = e.clipDecorators(e, t); var a = e.wrapper.children[0]; a.canMeasurePath = !0, a = e.wrapper.children[1], e.updateDecoratorElement(a, t[0], i[1], n), e.targetPoint, r = e.targetDecorator, a = e.wrapper.children[2], e.updateDecoratorElement(a, t[t.length - 1], i[i.length - 2], r), e.updateShapeElement(e) } function Ul(e, t, i) { var n, r = e.wrapper, o = r.bounds, s = t.offset, a = t.size / i.scale, l = t.margin, h = r.offsetX - r.actualSize.width * r.pivot.x, d = r.offsetY - r.actualSize.height * r.pivot.y; if (n = { x: 0, y: 0 }, e.nodes.length > 0) { switch (t.side) { case "Top": n.x += h + o.width * s, n.y += d - a; break; case "Bottom": n.x += h + s * o.width, n.y += d + r.actualSize.height + a; break; case "Left": n.x += h - a, n.y += d + s * o.height; break; case "Right": n.x += h + r.actualSize.width + a, n.y += d + s * o.height }n.x += (l.left - l.right) / i.scale + a / 2 * ("Center" === t.horizontalAlignment ? 0 : "Right" === t.horizontalAlignment ? -1 : 1), n.y += (l.top - l.bottom) / i.scale + a / 2 * ("Center" === t.verticalAlignment ? 0 : "Top" === t.verticalAlignment ? -1 : 1) } else if (e.connectors.length > 0) { var c = e.connectors[0], p = { offset: s }, u = Sl(c.intermediatePoints, p), g = u.index; n = u.point; var m = Ml(c.intermediatePoints, p, o), f = (c.intermediatePoints, m.angle); Po(y = jo(), -f, c.intermediatePoints[g].x, c.intermediatePoints[g].y), (n = Io(y, n)).x += l.left - l.right + a / 2 * ("Center" === t.horizontalAlignment ? 0 : "Right" === t.horizontalAlignment ? -1 : 1), n.y += l.top - l.bottom + a / 2 * ("Center" === t.verticalAlignment ? 0 : "Top" === t.verticalAlignment ? -1 : 1), Po(y = jo(), f, c.intermediatePoints[g].x, c.intermediatePoints[g].y), n = Io(y, n) } if (0 !== r.rotateAngle || 0 !== r.parentTransform) { var y; Po(y = jo(), r.rotateAngle + r.parentTransform, r.offsetX, r.offsetY), n = Io(y, n) } return n } function ql(e, t, i, n) { if (n.annotation) { if (ea(n.annotation)) return !0 } else if (_U[t] & e && QU[t] & i) return !0; return !1 } function Gl(e, t) { return !!(_U[t] & e) } function Ql(e, t) { return e.visibility & t } function Xl(e, t) { var i; if ("Text" === e.shape.type) i = e.shape; else { var n = t.split("_"); t = n[n.length - 1]; for (var r = 0; r < e.annotations.length; r++)t === e.annotations[r].id && (i = e.annotations[r]) } return i } function Jl(e, t) { var i = t.split("_"); t = i[i.length - 1]; for (var n = 0; n < e.ports.length; n++)if (t === e.ports[n].id) return e.ports[n] } function Zl(e, t) { var i = {}, n = 0; if (e.ports) { var r = e.ports; for (n = 0; n < r.length; n++)t ? r[n].constraints & sq.InConnect && (i = r[n]) : r[n].constraints & sq.OutConnect && (i = r[n]) } return i } function Kl(e, t, i) { for (var n = i ? e.annotations : e.ports, r = 0; r < n.length; r++)if (n[r].id === t) return r.toString(); return null } function $l(e, t) { var i; for (i = 0; i < e.length; i++)if (t === e[i].id) return !0; return !1 } function eh(e, t, i, n) { if (void 0 !== e.width && void 0 !== e.height && (e.width *= t, e.height *= i), e instanceof dq) { var r = jo(), o = n.width || n.actualSize.width, s = n.height || n.actualSize.height; if (void 0 !== o && void 0 !== s) { var a = n.offsetX - o * n.pivot.x, l = n.offsetY - s * n.pivot.y, h = { x: a + o * n.pivot.x, y: l + s * n.pivot.y }; h = $h(n.rotateAngle, n.offsetX, n.offsetY, h), Po(r, -n.rotateAngle, h.x, h.y), No(r, t, i, h.x, h.y), Po(r, n.rotateAngle, h.x, h.y); for (var d = 0, c = e.children; d < c.length; d++) { var p = c[d]; if (void 0 !== p.width && void 0 !== p.height) { var u = Io(r, { x: p.offsetX, y: p.offsetY }); p.offsetX = u.x, p.offsetY = u.y, eh(p, t, i, n) } } } } } function th(e, t, i, n, r, o) { for (var s, a = e.children, l = 0; l < a.length; l++)if (s = n[a[l]]) if (s.children) th(s, t, i, n, r, o); else if (s.offsetX -= t, s.offsetY -= i, !r) { var h = void 0, d = void 0; n[s.id] = s, (d = s.initContainer()).children || (d.children = []), h = s.init(o), d.children.push(h), d.measure(new LU(s.width, s.height)), d.arrange(d.desiredSize) } } function ih(e, t, i) { if (0 === i.length) i.push(e); else if (1 === i.length) i[0][t] > e[t] ? i.splice(0, 0, e) : i.push(e); else if (i.length > 1) { for (var n = 0, r = i.length - 1, o = Math.floor((n + r) / 2); o !== n;)i[o][t] < e[t] ? (n = o, o = Math.floor((n + r) / 2)) : i[o][t] > e[t] && (r = o, o = Math.floor((n + r) / 2)); i[r][t] < e[t] ? i.push(e) : i[n][t] > e[t] ? i.splice(n, 0, e) : i[n][t] < e[t] && i[r][t] > e[t] && i.splice(r, 0, e) } } function nh(e) { var t = document.getElementById(e.diagramId), i = "ej2_instances", n = t[i][0].nodes; void 0 === n && (n = function (e) { for (var t = [], i = 0; i < e.palettes.length; i++)for (var n = e.palettes[i].symbols, r = 0; r < n.length; r++)n[r] instanceof mQ && t.push(n[r]); return t }(t[i][0])); for (var r = 0; n && r < n.length; r++)if (n[r].id === e.nodeId) return rh(n[r], e); var o = t[i][0].connectors; for (r = 0; o && r < o.length; r++)if (o[r].id === e.nodeId) return rh(o[r], e); var s = t[i][0].enterObject; return s && (s.id === e.nodeId || s.children) ? s.children && gl(s, "HTML", t[i][0].enterTable) ? t[i][0].enterTable[e.nodeId] : s : null } function rh(e, t) { var i, n = e.annotations; for (i = 0; n && i < n.length; i++)if (t.annotationId && n[i].id === t.annotationId) return n[i]; return e } function oh(e, t, i, n, r, o, s, a) { var l = { x: 0, y: 0 }, h = jo(); switch (Po(h, r, o, s), a.x) { case 0: switch (a.y) { case 0: l = Io(h, { x: e, y: t }); break; case .5: l = Io(h, { x: e, y: t + n / 2 }); break; case 1: l = Io(h, { x: e, y: t + n }) }break; case .5: switch (a.y) { case 0: l = Io(h, { x: e + i / 2, y: t }); break; case .5: l = Io(h, { x: e + i / 2, y: t + n / 2 }); break; case 1: l = Io(h, { x: e + i / 2, y: t + n }) }break; case 1: switch (a.y) { case 0: l = Io(h, { x: e + i, y: t }); break; case .5: l = Io(h, { x: e + i, y: t + n / 2 }); break; case 1: l = Io(h, { x: e + i, y: t + n }) } }return { x: l.x, y: l.y } } function sh(e, t, i) { var n, r = "NoWrap"; "Class" === t.shape.classifier ? n = t.shape.classShape : "Enumeration" === t.shape.classifier ? n = t.shape.enumerationShape : "Interface" === t.shape.classifier && (n = t.shape.interfaceShape), t.container = { type: "Stack", orientation: "Vertical" }, t.constraints = (qU.Default | qU.HideThumbs) & ~(qU.Rotate | qU.Resize), t.style = { fill: t.style.fill, strokeColor: "black", strokeWidth: 1.5 }, t.children = [], t.maxWidth && (r = "Wrap"); var o = new mQ(i, "nodes", { id: t.id + "_umlClass_header", annotations: [{ id: "name", content: n.name, offset: { x: .5, y: .65 }, margin: { left: 10, right: 10 }, style: { bold: !0, fontSize: 14, color: n.style.color, fill: n.style.fill, textWrapping: r } }, { content: "<<" + t.shape.classifier + ">>", margin: { left: 10, right: 10 }, id: "class", style: { fontSize: n.style.fontSize, color: n.style.color, fill: n.style.fill, textWrapping: r }, offset: { x: .5, y: .3 }, constraints: UU.ReadOnly }], constraints: (qU.Default | qU.HideThumbs) & ~(qU.Rotate | qU.Drag | qU.Resize), verticalAlignment: "Stretch", horizontalAlignment: "Stretch", style: { fill: t.style.fill, strokeColor: "#ffffff00" } }, !0); return i.initObject(o), i.nodes.push(o), t.children.push(o.id), function (e, t, i, n) { if ("Enumeration" === e.shape.classifier) { var r = i.members; if (r && r.length) { ah(e, t); for (var o = "", s = 0; s < r.length; s++) { var a = r[s]; if ("" !== a.name && (o += a.name), s !== r.length) { var l = lh(e, a), h = new mQ(t, "nodes", { id: Bh() + "_umlMember", annotations: [{ id: "name", content: o, offset: { x: 0, y: .5 }, style: { bold: !0, fontSize: l.fontSize, color: l.color, fill: l.fill, textWrapping: n }, margin: { left: 14, right: 5 }, horizontalAlignment: "Left" }], verticalAlignment: "Stretch", horizontalAlignment: "Stretch", style: { fill: e.style.fill, strokeColor: "#ffffff00", textWrapping: n }, constraints: (qU.Default | qU.HideThumbs) & ~(qU.Rotate | qU.Drag | qU.Resize), minHeight: 25 }, !0); t.initObject(h), t.nodes.push(h), e.children.push(h.id), o = "", a.isSeparator && s !== r.length - 1 && ah(e, t) } } } } else { var d = i.attributes; if (d.length) { var c = ""; ah(e, t); for (var s = 0; s < d.length; s++) { var p = void 0, u = d[s]; if (p = u.scope && "Public" === u.scope ? " +" : u.scope && "Private" === u.scope ? "-" : u.scope && "Protected" === u.scope ? "#" : "~", "" !== u.name && p && (c += p + " " + u.name + " : " + u.type), s !== d.length) { var l = lh(e, u), h = new mQ(t, "nodes", { id: Bh() + "_umlProperty", style: { fill: e.style.fill, strokeColor: "#ffffff00" }, annotations: [{ id: "name", content: c, offset: { x: 0, y: .5 }, style: { bold: !0, fontSize: l.fontSize, color: l.color, fill: l.fill, textWrapping: n }, margin: { left: 14, right: 5 }, horizontalAlignment: "Left" }], verticalAlignment: "Stretch", horizontalAlignment: "Stretch", constraints: (qU.Default | qU.HideThumbs) & ~(qU.Rotate | qU.Drag | qU.Resize), minHeight: 25 }, !0); t.initObject(h), t.nodes.push(h), e.children.push(h.id), c = "", u.isSeparator && s !== d.length - 1 && ah(e, t) } } } } }(t, i, n, r), function (e, t, i, n) { if (i.methods && i.methods.length) { var r = i.methods; ah(e, t); for (var o = "", s = "", a = void 0, l = 0; l < r.length; l++) { var h = r[l]; if (a = h.scope && "Public" === h.scope ? " +" : h.scope && "Private" === h.scope ? "-" : h.scope && "Protected" === h.scope ? "#" : "~", h.parameters) for (var d = 0; d < h.parameters.length; d++)h.parameters[d].type ? o += h.parameters[d].name + ":" + h.parameters[d].type : o += h.parameters[d].name, d !== h.parameters.length - 1 && (o += ","); if ("" !== h.name && a && (s += a + " " + h.name + "(" + o + ") : " + h.type), l !== r.length) { var c = lh(e, h), p = new mQ(t, "nodes", { id: Bh() + "_umlMethods", verticalAlignment: "Stretch", horizontalAlignment: "Stretch", annotations: [{ id: "name", content: s, offset: { x: 0, y: .5 }, style: { bold: !0, fontSize: c.fontSize, color: c.color, fill: c.fill, textWrapping: n }, margin: { left: 14, right: 5 }, horizontalAlignment: "Left" }], style: { fill: e.style.fill, strokeColor: "#ffffff00" }, minHeight: 25, constraints: (qU.Default | qU.HideThumbs) & ~(qU.Rotate | qU.Drag | qU.Resize) }, !0); t.initObject(p), t.nodes.push(p), e.children.push(p.id), s = "", h.isSeparator && l !== r.length - 1 && ah(e, t) } } } }(t, i, n, r), t.offsetX = t.offsetX, t.offsetY = t.offsetY, t.style.fill = t.style.fill, t.borderColor = t.borderColor, i.initObject(t), e } function ah(e, t) { var i = new mQ(t, "nodes", { id: Bh() + "_path", height: 1, constraints: qU.Default & ~qU.Select, verticalAlignment: "Stretch", horizontalAlignment: "Stretch" }, !0); t.initObject(i), t.nodes.push(i), e.children.push(i.id) } function lh(e, t) { var i = {}, n = t.style; return i.fill = "transparent" !== n.fill ? n.fill : e.style.fill, i.color = n.color, i.fontSize = 12 !== n.fontSize ? n.fontSize : e.style.fontSize, i.strokeColor = "black" !== n.strokeColor ? n.strokeColor : e.style.strokeColor, i.strokeWidth = 1 !== n.strokeWidth ? n.strokeWidth : e.style.strokeWidth, i } function hh(e) { var t, i = []; if ("msie" === uw.info.name || "edge" === uw.info.name) for (var n = 0; n < e.childNodes.length; n++)1 === (t = e.childNodes[n]).nodeType && i.push(t); else i = e.children; return i } function dh(e) { if (e) { var t = "measureElement"; window[t].style.visibility = "visible"; var i = hh(window[t].children[2])[0]; i.setAttribute("d", e); var n = i.getBBox(), r = new TU(n.x, n.y, n.width, n.height); return window[t].style.visibility = "hidden", r } return new TU(0, 0, 0, 0) } function ch(e, t, i) { var n, r, o = [], s = 0, a = t || e.content; if ("nowrap" !== e.whiteSpace && "pre" !== e.whiteSpace) if ("breakall" === e.breakWord) for (n = "", n += a[0], s = 0; s < a.length; s++)if ((r = Qh(n, e)) >= e.width && n.length > 0) o[o.length] = { text: n, x: 0, dy: 0, width: r }, n = ""; else { (n += a[s + 1] || "").indexOf("\n") > -1 && (n = n.replace("\n", "")); var l = Qh(n, e); Math.ceil(l) + 2 >= e.width && n.length > 0 && (o[o.length] = { text: n, x: 0, dy: 0, width: l }, n = ""), s === a.length - 1 && n.length > 0 && (o[o.length] = { text: n, x: 0, dy: 0, width: l }, n = "") } else o = function (e, t, i) { var n, r, o, s, a = [], l = "", h = 0, d = 0, c = "nowrap" !== e.whiteSpace, p = (t || e.content).split("\n"); for (h = 0; h < p.length; h++)for (n = "NoWrap" !== e.textWrapping ? p[h].split(" ") : p, d = 0; d < n.length; d++) { l += ((0 !== d || 1 === n.length) && c && l.length > 0 ? " " : "") + n[d]; var u = Qh(r = l + (n[d + 1] || ""), e); Math.floor(u) > (i || e.width) - 2 && l.length > 0 ? (a[a.length] = { text: l, x: 0, dy: 0, width: r === l ? u : l === s ? o : Qh(l, e) }, l = "") : d === n.length - 1 && (a[a.length] = { text: l, x: 0, dy: 0, width: u }, l = ""), s = r, o = u } return a }(e, t, i); else o[o.length] = { text: a, x: 0, dy: 0, width: Qh(a, e) }; return o } function ph(e, t, i, n, r) { var o = new LU, s = Dh("span", { style: "display:inline-block; line-height: normal" }); return e.bold && (s.style.fontWeight = "bold"), e.italic && (s.style.fontStyle = "italic"), void 0 !== i && (s.style.width = i.toString() + "px"), void 0 !== n && (s.style.height = n.toString() + "px"), void 0 !== r && (s.style.maxWidth = r.toString() + "px"), s.style.fontFamily = e.fontFamily, s.style.fontSize = e.fontSize + "px", s.style.color = e.color, s.textContent = t, s.style.whiteSpace = Zh(e.whiteSpace, e.textWrapping), s.style.wordBreak = void 0 !== r ? "break-word" : Gh(e.textWrapping), document.body.appendChild(s), o.width = s.offsetWidth, o.height = s.offsetHeight, document.body.removeChild(s), o } function uh(e, t, i, n, r) { var o, s, a = new LU(0, 0), l = function (e, t) { var i = { fill: e.style.fill, stroke: e.style.strokeColor, angle: e.rotateAngle + e.parentTransform, pivotX: e.pivot.x, pivotY: e.pivot.y, strokeWidth: e.style.strokeWidth, dashArray: e.style.strokeDashArray, opacity: e.style.opacity, shadow: e.shadow, gradient: e.style.gradient, visible: e.visible, id: e.id, description: e.description, width: t || e.actualSize.width, height: e.actualSize.height, x: e.offsetX - e.actualSize.width * e.pivot.x + .5, y: e.offsetY - e.actualSize.height * e.pivot.y + .5 }; return i.fontSize = e.style.fontSize, i.fontFamily = e.style.fontFamily, i.textOverflow = e.style.textOverflow, i.textDecoration = e.style.textDecoration, i.doWrap = e.doWrap, i.whiteSpace = Zh(e.style.whiteSpace, e.style.textWrapping), i.content = e.content, i.textWrapping = e.style.textWrapping, i.breakWord = Gh(e.style.textWrapping), i.textAlign = qh(e.style.textAlign), i.color = e.style.color, i.italic = e.style.italic, i.bold = e.style.bold, i.dashArray = "", i.strokeWidth = 0, i.fill = "", i }(e, n); return e.childNodes = o = ch(l, r, e.isLaneOrientation ? n : void 0), e.wrapBounds = s = function (e, t) { var i, n, r = { x: 0, width: 0 }, o = 0; for (o = 0; o < t.length; o++)n = i = t[o].width, i = "left" === e.textAlign ? 0 : "center" === e.textAlign ? i > e.width && ("Ellipsis" === e.textOverflow || "Clip" === e.textOverflow) ? 0 : -i / 2 : "right" === e.textAlign ? -i : t.length > 1 ? 0 : -i / 2, t[o].dy = 1.2 * e.fontSize, t[o].x = i, r ? (r.x = Math.min(r.x, i), r.width = Math.max(r.width, n)) : r = { x: i, width: n }; return r }(l, o), a.width = s.width, e.wrapBounds.width >= n && "Wrap" !== l.textOverflow && (a.width = n), a.height = o.length * e.style.fontSize * 1.2, a } function gh(e, t, i, n) { var r, o = 0, s = 0, a = !1, l = "", h = []; return 0 === (r = t).x && 0 === r.y || (o = 0 - Number(r.x), s = 0 - Number(r.y)), (e.actualSize.width !== r.width || e.actualSize.height !== r.height || n) && (o = (n && n.width || e.actualSize.width) / Number(r.width ? r.width : 1), s = (n && n.height || e.actualSize.height) / Number(r.height ? r.height : 1), a = !0), h = wo(e.data), h = Do(h), l = So(h, o, s, a, r.x, r.y, 0, 0), a = !1, l } function mh(e) { var t; return t = fh(e).getElementsByClassName("e-diagram-layer"), t[0] } function fh(e, t) { var i; return t && (i = document.getElementById(t)), i ? i.querySelector("#" + e) : document.getElementById(e) } function yh(e, t, i) { var n, r = void 0, o = ""; "native" === i ? (n = xh(e), o = "_content_groupElement") : "html" === i ? (n = Th(e).childNodes[0], o = "_content_html_element") : (n = function (e) { var t = mh(e); return t.getElementById(e + "_diagramLayer") }(e), o = "_groupElement"); for (var s, a = 0; n.childNodes && a < n.childNodes.length; a++)if ((s = n.childNodes[a]) && s.id === t + o) { r = a; break } return r } function vh(e) { var t; return t = fh(e).getElementsByClassName("e-adorner-layer"), t[0] } function wh(e) { return vh(e).getElementById(e + "_SelectorElement") } function bh(e) { return vh(e).getElementById(e + "_diagramAdorner") } function Ch(e) { var t; return t = fh(e).getElementsByClassName("e-native-layer"), t[0] } function Lh(e) { var t; return t = fh(e).getElementsByClassName("e-grid-layer"), t[0] } function Mh(e) { return fh(e).getElementsByClassName("e-background-layer")[0].parentNode } function Sh(e) { var t; return t = fh(e).getElementsByClassName("e-background-layer"), t[0] } function xh(e) { return Ch(e).getElementById(e + "_nativeLayer") } function Th(e) { var t; return t = fh(e).getElementsByClassName("e-html-layer"), t[0] } function Dh(e, t) { var i = M(e); return Oh(i, t), i } function Ah(e, t) { var i = document.createElementNS("http://www.w3.org/2000/svg", e); return Nh(i, t), i } function Eh(e, t, i) { for (var n = e; n && (i ? n.id !== t : !jh(n, t));)n = n.parentNode; return n } function jh(e, t) { return (" " + ("object" == typeof e.className ? e.className.animVal : e.className) + " ").indexOf(" " + t + " ") > -1 } function Ih(e, t, i) { e = []; for (var n = 0, r = i.length; n < r; n++)e.push({ pageX: i[n].clientX, pageY: i[n].clientY, pointerId: null }); return e } function kh(e, t) { var i = fh(e, t); i && i.parentNode.removeChild(i) } function Ph(e, t) { var i; if (t) { i = Dh("div", { style: "height: 100%; width: 100%" }) } else i = document.createElementNS("http://www.w3.org/2000/svg", "g"); var n = nh(e), r = "", o = {}; if (n instanceof mQ) { o = n; if (window.Blazor) { o = {}; if (r = n.id + "content_diagram", o.id = n.id, o.height = n.height, o.width = n.width, o.offsetX = n.offsetX, o.offsetY = n.offsetY, o.addInfo = n.addInfo, n.annotations && n.annotations.length > 0) { o.annotations = []; for (var s = 0; s < n.annotations.length; s++)o.annotations[s] = { content: n.annotations[s].content } } } } else o = n, r = e.diagramId + "template_diagram"; var a; if ("string" == typeof e.content) { var l = document.getElementById(e.content); if (l) i.appendChild(l); else for (var h = 0, d = ce(e.content)(o, null, null, r); h < d.length; h++)a = d[h], i.appendChild(a) } else i.appendChild(e.content); return i.cloneNode(!0) } function Nh(e, t) { for (var i = Object.keys(t), n = 0; n < i.length; n++)e.setAttribute(i[n], t[i[n]]) } function Oh(e, t) { for (var i = Object.keys(t), n = 0; n < i.length; n++)e.setAttribute(i[n], t[i[n]]) } function Rh() { var e = "measureElement"; if (window[e]) window[e].usageCount += 1; else { var t = Dh("div", { id: "measureElement", style: "visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;" }), i = Dh("span", { style: "display:inline-block ; line-height: normal" }); t.appendChild(i); var n = void 0; n = Dh("img", {}), t.appendChild(n); var r = document.createElementNS("http://www.w3.org/2000/svg", "svg"); r.setAttribute("xlink", "http://www.w3.org/1999/xlink"), t.appendChild(r); var o = document.createElementNS("http://www.w3.org/2000/svg", "path"); r.appendChild(o); document.createTextNode(""); var s = document.createElementNS("http://www.w3.org/2000/svg", "text"); s.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"), r.appendChild(s), window[e] = t, window[e].usageCount = 1, document.body.appendChild(t) } } function zh(e, t, i, n) { return t.length > 1 && 0 === e.x && ("Clip" === n.textOverflow || "Ellipsis" === n.textOverflow) && "Wrap" === n.textWrapping ? (e.x = t[i - 1] ? t[i - 1].x : -e.width / 2, e.x) : e.x } function Bh() { for (var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz", i = "", n = 0; n < 5; n++) { if ("crypto" in window && "getRandomValues" in crypto) { var r = new Uint16Array(1); e = (window.msCrypto || window.crypto).getRandomValues(r)[0] % (t.length - 1) } else e = Math.floor(Math.random() * t.length); 0 === n && e < 10 ? n-- : i += t.substring(e, e + 1) } return i } function Fh(e) { new TU; var t = e.offsetY - e.actualSize.height * e.pivot.y, i = e.offsetY + e.actualSize.height * (1 - e.pivot.y), n = e.offsetX - e.actualSize.width * e.pivot.x, r = e.offsetX + e.actualSize.width * (1 - e.pivot.x), o = { x: n, y: t }, s = { x: r, y: t }, a = { x: n, y: i }, l = { x: r, y: i }; return TU.toBounds([o, s, a, l]) } function Vh(e) { var t, i = new TU, n = (t = Fh(e)).middleLeft, r = t.topCenter, o = t.bottomCenter, s = t.middleRight, a = t.topLeft, l = t.topRight, h = t.bottomLeft, d = t.bottomRight; if (e.corners = { topLeft: a, topCenter: r, topRight: l, middleLeft: n, middleRight: s, bottomLeft: h, bottomCenter: o, bottomRight: d }, 0 !== e.rotateAngle || 0 !== e.parentTransform) { var c = jo(); Po(c, e.rotateAngle + e.parentTransform, e.offsetX, e.offsetY), e.corners.topLeft = a = Io(c, a), e.corners.topCenter = r = Io(c, r), e.corners.topRight = l = Io(c, l), e.corners.middleLeft = n = Io(c, n), e.corners.middleRight = s = Io(c, s), e.corners.bottomLeft = h = Io(c, h), e.corners.bottomCenter = o = Io(c, o), e.corners.bottomRight = d = Io(c, d) } return i = TU.toBounds([a, l, h, d]), e.corners.left = i.left, e.corners.right = i.right, e.corners.top = i.top, e.corners.bottom = i.bottom, e.corners.center = i.center, e.corners.width = i.width, e.corners.height = i.height, i } function Wh(e, t, i) { var n = {}, r = "properties"; if (e) { i = e.propName; var o = e[r] || e, s = [], a = []; if ((s = s.concat(Object.keys(o))).push("version"), i) { var l = td(t); a = l ? l(i) : [], s = s.concat(a) } for (var h = Hh(i), d = 0, c = s = s.concat(h); d < c.length; d++) { var p = c[d]; if ("historyManager" !== p) if ("wrapper" !== p) { !(!e[p] || !e.hasOwnProperty("observers")) || (e[p] instanceof Array ? n[p] = _h(-1 === h.indexOf(p) && e[r] ? e[r][p] : e[p], t, p) : e[p] instanceof Array == !1 && e[p] instanceof HTMLElement ? n[p] = e[p].cloneNode(!0).innerHtml : e[p] instanceof Array == !1 && e[p] instanceof Object ? n[p] = Wh(-1 === h.indexOf(p) && e[r] ? e[r][p] : e[p]) : n[p] = e[p]) } else e[p] && (n[p] = { actualSize: { width: e[p].actualSize.width, height: e[p].actualSize.height }, offsetX: e[p].offsetX, offsetY: e[p].offsetY }) } } return n } function Hh(e) { switch (e) { case "nodes": case "children": return ["inEdges", "outEdges", "parentId", "processId", "nodeId", "umlIndex", "isPhase", "isLane"]; case "connectors": return ["parentId"]; case "annotation": case "annotations": return ["nodeId"]; case "shape": return ["hasHeader"] }return [] } function _h(e, t, i) { var n; if (e) { n = []; for (var r = 0; r < e.length; r++)e[r] instanceof Array ? n.push(e[r]) : e[r] instanceof Object ? n.push(Wh(e[r], t, i)) : n.push(e[r]) } return n } function Yh(e, t) { var i = "properties"; if (e) { t || (t = { properties: {} }); for (var n = 0, r = Object.keys(e); n < r.length; n++) { var o = r[n]; if (e[o] instanceof Array) { var s = Uh(e[o], t[i][o]); t[i][o] && t[i][o].length || (t[o] = s) } else if (e[o] instanceof Array == !1 && e[o] instanceof HTMLElement) t[o] = e[o].cloneNode(!0).innerHtml; else if (e[o] instanceof Array == !1 && e[o] instanceof Object) { var a = Yh(e[o], t[i][o]); a[i] && !Object.keys(a[i]).length && delete a[i], t[o] = a } else t[o] = void 0 !== t[i][o] ? t[o] : e[o] } } return t } function Uh(e, t) { var i = [], n = !1; t || (t = []), t.length || (n = !0); for (var r = 0; r < e.length; r++)if (e[r] instanceof Array) { Uh(e[r], t[r]); n && i.push(Uh) } else if (e[r] instanceof Object) { var o = Yh(e[r], t[r]); n && i.push(o) } else i.push(e[r]); return i } function qh(e) { var t = ""; switch (e) { case "Center": t = "center"; break; case "Left": t = "left"; break; case "Right": t = "right" }return t } function Gh(e) { var t = ""; switch (e) { case "Wrap": t = "breakall"; break; case "NoWrap": t = "keepall"; break; case "WrapWithOverflow": t = "normal"; break; case "LineThrough": t = "line-through" }return t } function Qh(e, t) { var i = "measureElement"; window[i].style.visibility = "visible"; var n = hh(window[i].children[2])[1]; n.textContent = e, n.setAttribute("style", "font-size:" + t.fontSize + "px; font-family:" + t.fontFamily + ";font-weight:" + (t.bold ? "bold" : "normal")); var r = n.getBBox().width; return window[i].style.visibility = "hidden", r } function Xh(e, t) { return (e + t) / 2 } function Jh(e, t) { var i = 0, n = 0, r = 0, o = 0, s = ""; n = e.length; var a = 0; do { o > 0 && (i = r), r = Math.floor(Xh(i, n)), o = Qh(s += e.substr(i, r), t) } while (o <= t.width); for (s = s.substr(0, i), a = i; a < n; a++)if (s += e[a], (o = Qh(s, t)) >= t.width) { e = e.substr(0, s.length - 1); break } return "Ellipsis" === t.textOverflow ? (e = e.substr(0, e.length - 3), e += "...") : e = e.substr(0, e.length), e } function Zh(e, t) { if ("NoWrap" === t && "PreserveAll" === e) return "pre"; var i = ""; switch (e) { case "CollapseAll": i = "nowrap"; break; case "CollapseSpace": i = "pre-line"; break; case "PreserveAll": i = "pre-wrap" }return i } function Kh(e, t) { var i = jo(); Po(i, t, 0, 0); var n = Io(i, { x: 0, y: 0 }), r = Io(i, { x: e.width, y: 0 }), o = Io(i, { x: 0, y: e.height }), s = Io(i, { x: e.width, y: e.height }), a = Math.min(n.x, r.x, o.x, s.x), l = Math.min(n.y, r.y, o.y, s.y), h = Math.max(n.x, r.x, o.x, s.x), d = Math.max(n.y, r.y, o.y, s.y); return new LU(h - a, d - l) } function $h(e, t, i, n) { if (0 !== e) { var r = jo(); return Po(r, e, t, i), Io(r, n) } return n } function ed(e, t) { return { x: e.x + t.desiredSize.width * t.pivot.x, y: e.y + t.desiredSize.height * t.pivot.y } } function td(e) { return void 0 !== e && "string" == typeof e && (e = n(e, window)), e } function id(e, t, i, n, r, o, s) { n.selectedItems.connectors[0]; if (o && o.length > 1 && r && r.length > 1) return "PinchZoom"; if (n.currentSymbol) return "Drag"; if ("PortDraw" === n.eventHandler.action && (n.tool &= ~JU.DrawOnce), (sa(n) || oa(n)) && n.drawingObject) return "Draw"; if (od(n)) { if ((p = n.selectedItems).wrapper && Gl(p.constraints, "UserHandle")) for (var a = 0, l = p.userHandles; a < l.length; a++) { var h = l[a]; if (h.visible) { if (rd(i, u = Ul(p, h, n.scroller.transform), h.size / 2)) return h.name } } } if (od(n)) { var d = n.selectedItems.annotation ? n.selectedItems.wrapper.children[0] : n.selectedItems.wrapper, c = d.bounds, p = n.selectedItems, u = new TU(c.x, c.y, c.width, c.height); if (sd(n) && !n.selectedItems.annotation) { var g = n.selectedItems.connectors[0], m = 10 / n.scrollSettings.currentZoom, f = 10 / n.scrollSettings.currentZoom; if (Gl(p.constraints, "ResizeAll")) { if (Gl(p.constraints, "ConnectorSourceThumb") && Us(g) && rd(i, g.sourcePoint, m)) return "ConnectorSourceEnd"; if (Gl(p.constraints, "ConnectorTargetThumb") && qs(g) && rd(i, g.targetPoint, f)) return "ConnectorTargetEnd"; if (S = function (e, t, i, n) { var r = 10 / n.scrollSettings.currentZoom, o = 10 / n.scrollSettings.currentZoom; if ("Bezier" === e.type) for (var s = 0; s < e.segments.length; s++) { var a = e.segments[s]; if (rd(i, xU.isEmptyPoint(a.point1) ? a.bezierPoint1 : a.point1, o)) return "BezierSourceThumb"; if (rd(i, xU.isEmptyPoint(a.point2) ? a.bezierPoint2 : a.point2, r)) return "BezierTargetThumb" } if (n.connectorEditingToolModule && Gs(e)) if ("Straight" === e.type || "Bezier" === e.type) for (var s = 0; s < e.segments.length; s++) { var a = void 0; if (a = e.segments[s], rd(i, a.point, 10)) return "SegmentEnd" } else for (var s = 0; s < e.segments.length; s++) { var a = void 0, l = { x: 0, y: 0 }; if ((a = e.segments[s]).allowDrag) for (var h = 0; h < a.points.length - 1; h++) { var d = xU.distancePoints(a.points[h], a.points[h + 1]); if (d >= 50 && (l.x = (a.points[h].x + a.points[h + 1].x) / 2, l.y = (a.points[h].y + a.points[h + 1].y) / 2, rd(i, l, 30))) return "OrthoThumb" } } return null }(g, 0, i, n)) return S } } else { var y = 10 / n.scroller.currentZoom, v = jo(); Po(v, d.rotateAngle + d.parentTransform, d.offsetX, d.offsetY); var w = d.offsetX - d.pivot.x * d.actualSize.width, b = d.offsetY - d.pivot.y * d.actualSize.height, C = { x: w + (.5 === d.pivot.x ? 2 * d.pivot.x : d.pivot.x) * d.actualSize.width / 2, y: b - 30 / n.scroller.currentZoom }; C = Io(v, C); var L = !!n.selectedItems.annotation, M = !(!L || !Qs(n.selectedItems.annotation)); if (Gl(p.constraints, "Rotate") && rd(i, C, y) && n.selectedItems.thumbsConstraints & QU.Rotate) { if (L && M) return "LabelRotate"; if (!L) return "Rotate" } if (u.Inflate(y), u.containsPoint(i)) { if (S = function (e, t, i, n, r, o) { var s; 1 === e.selectedItems.nodes.length && 0 === e.selectedItems.connectors.length && e.selectedItems.nodes[0].container && (s = function (e, t, i, n, r) { var o = 10 / e.scroller.currentZoom, s = 40 / e.scroller.currentZoom, a = e.selectedItems, l = t.actualSize.width, h = t.actualSize.height, d = new TU(n, r + 20, t.style.strokeWidth, h - 40), c = new TU(n + l, r + 20, t.style.strokeWidth, h - 40), p = new TU(n + 20, r, l - 40, t.style.strokeWidth), u = new TU(n + 20, r + h, l - 40, t.style.strokeWidth), g = Ca(e, e.selectedItems.nodes[0], !0) ? e.nameTable[e.selectedItems.nodes[0].parentId] : e.selectedItems.nodes[0]; if (l >= s && h >= s) { if (ql(a.constraints, "ResizeEast", a.thumbsConstraints, a) && c.containsPoint(i, o)) return "ResizeEast"; if (ql(a.constraints, "ResizeSouth", a.thumbsConstraints, a) && u.containsPoint(i, o)) return "ResizeSouth"; if ("Grid" !== g.container.type) { if (ql(a.constraints, "ResizeWest", a.thumbsConstraints, a) && d.containsPoint(i, o)) return "ResizeWest"; if (ql(a.constraints, "ResizeNorth", a.thumbsConstraints, a) && p.containsPoint(i, o)) return "ResizeNorth" } } return null }(e, t, i, r, o)); s || e.selectedItems.nodes[0] && (e.selectedItems.nodes[0].isPhase || e.selectedItems.nodes[0].isLane || "SwimLane" === e.selectedItems.nodes[0].shape.type) || (s = function (e, t, i, n, r, o) { var s = 40 / e.scroller.currentZoom, a = 10 / e.scroller.currentZoom, l = e.selectedItems, h = !!l.annotation; if (t.actualSize.width >= s && t.actualSize.height >= s) { if (ql(l.constraints, "ResizeSouthEast", l.thumbsConstraints, l) && rd(i, Io(n, { x: r + t.actualSize.width, y: o + t.actualSize.height }), a)) return h ? "LabelResizeSouthEast" : "ResizeSouthEast"; if (ql(l.constraints, "ResizeSouthWest", l.thumbsConstraints, l) && rd(i, Io(n, { x: r, y: o + t.actualSize.height }), a)) return h ? "LabelResizeSouthWest" : "ResizeSouthWest"; if (ql(l.constraints, "ResizeNorthEast", l.thumbsConstraints, l) && rd(i, Io(n, { x: r + t.actualSize.width, y: o }), a)) return h ? "LabelResizeNorthEast" : "ResizeNorthEast"; if (ql(l.constraints, "ResizeNorthWest", l.thumbsConstraints, l) && rd(i, Io(n, { x: r, y: o }), a)) return h ? "LabelResizeNorthWest" : "ResizeNorthWest" } if (ql(l.constraints, "ResizeEast", l.thumbsConstraints, l) && rd(i, Io(n, { x: r + t.actualSize.width, y: o + t.actualSize.height / 2 }), a)) return h ? "LabelResizeEast" : "ResizeEast"; if (ql(l.constraints, "ResizeWest", l.thumbsConstraints, l) && rd(i, Io(n, { x: r, y: o + t.actualSize.height / 2 }), a)) return h ? "LabelResizeWest" : "ResizeWest"; if (ql(l.constraints, "ResizeSouth", l.thumbsConstraints, l) && rd(i, Io(n, { x: r + t.actualSize.width / 2, y: o + t.actualSize.height }), a)) return h ? "LabelResizeSouth" : "ResizeSouth"; if (ql(l.constraints, "ResizeNorth", l.thumbsConstraints, l) && rd(i, Io(n, { x: r + t.actualSize.width / 2, y: o }), a)) return h ? "LabelResizeNorth" : "ResizeNorth"; return null }(e, t, i, n, r, o)); if (s) return s; return null }(n, d, i, v, w, b)) return S } } } if (ra(n) && !e) return "Pan"; if (s instanceof xq && !ra(n)) { var S; if ("None" !== (S = nd(n, s))) return S } if ((s instanceof jq || s instanceof Iq) && !ra(n) && Hs(s)) return ad(n, s, void 0, t) && _s(s) ? "LabelDrag" : "LabelSelect"; if (null !== e) { if (!(e instanceof mQ || e instanceof lG)) return "Select"; if (t && t.id) { var x = t.id.split(e.id)[1]; if (x && x.match("^_icon")) return "LayoutAnimation" } if (_s(e) && t instanceof pq && t.hyperlink.link) return "Hyperlink"; if (!_s(e) || !ad(n, e, !1) || void 0 !== n.selectedItems.annotation) return e && ra(n) && !aa(n) ? "Pan" : n.selectedItems.nodes.length && n.selectedItems.nodes[0].isLane && n.selectedItems.wrapper && n.selectedItems.wrapper.bounds.containsPoint(i) ? "Drag" : "Select"; if (e instanceof lG && !rd(i, e.sourcePoint, e.hitPadding) && !rd(i, e.targetPoint, e.hitPadding) || !(e instanceof lG)) return "Drag" } return "Select" } function nd(e, t, i, n) { if (pa(t) && (Ql(t, DU.Hover) || Ql(t, DU.Visible))) { if (t.constraints & sq.Drag) return "PortDrag" } else if (ca(t) && (Ql(t, DU.Hover) || Ql(t, DU.Visible)) && t.constraints & sq.Draw) { e.drawingObject = {}; var r = { type: "Orthogonal", sourcePortID: t.id }; return e.drawingObject = r, e.tool |= JU.DrawOnce, e.currentDrawingObject = r, "PortDraw" } return "None" } function rd(e, t, i) { return e.x >= t.x - i && e.x <= t.x + i && e.y >= t.y - i && e.y <= t.y + i } function od(e) { return e.selectedItems.nodes.length > 0 || e.selectedItems.connectors.length > 0 } function sd(e) { return 1 === e.selectedItems.connectors.length && !e.selectedItems.nodes.length } function ad(e, t, i, n) { if (void 0 === i && (i = !0), t instanceof mG) return !0; if (t instanceof mQ) for (; t;) { if (-1 !== e.selectedItems.nodes.indexOf(t) && void 0 === e.selectedItems.annotation) return !0; if (i) break; t = e.nameTable[t.parentId] } else if (t instanceof lG) { if (-1 !== e.selectedItems.connectors.indexOf(t) && void 0 === e.selectedItems.annotation) return !0 } else if ((t instanceof jq || t instanceof Iq) && e.selectedItems.annotation && e.selectedItems.wrapper.children[0].id === n.id) return !0; return !1 } function ld(e, t) { if (t += 360, t %= 360, -1 === e.indexOf("Resize")) return qQ[e]; var i = qQ[e]; return t >= 0 && t < 25 || t >= 160 && t <= 205 || t >= 340 && t <= 360 ? i : t >= 25 && t <= 70 || t >= 205 && t <= 250 ? "n-resize" === i || "s-resize" === i ? "ne-resize" : "nw-resize" === i || "se-resize" === i ? "n-resize" : "e-resize" === i || "w-resize" === i ? "nw-resize" : "e-resize" : t >= 70 && t <= 115 || t >= 250 && t <= 295 ? "n-resize" === i || "s-resize" === i ? "e-resize" : "nw-resize" === i || "se-resize" === i ? "ne-resize" : "e-resize" === i || "w-resize" === i ? "n-resize" : "nw-resize" : t >= 115 && t <= 155 || t >= 295 && t <= 340 ? "n-resize" === i || "s-resize" === i ? "nw-resize" : "nw-resize" === i || "se-resize" === i ? "e-resize" : "e-resize" === i || "w-resize" === i ? "ne-resize" : qQ[e] : "n-resize" } function hd(e) { return PX[e.toString()] } function dd(e) { return NX[e.toString()] } function cd(e) { return OX[e.toString()] } function pd(e) { return RX[e.toString()] } function ud(e) { return zX[e.toString()] } function gd(e) { var t = e.offsetX - e.actualSize.width * e.pivot.x, i = e.offsetY - e.actualSize.height * e.pivot.y; return new TU(t, i, e.actualSize.width, e.actualSize.height) } function md(e, t) { for (var i = 0; i < t.length; i++)if (t[i].id === e) return !0; return !1 } function fd(e, t, i, n) { p$ += String.fromCharCode(e), setTimeout(function () { p$ = "" }, 1e3); var r; if (p$ = n ? p$.toLowerCase() : p$, u$ === p$) { for (var o = 0; o < g$.length; o++)if (g$[o].classList.contains(m$)) { r = o; break } return r += 1, g$[r] } var s = t, a = p$.length, l = void 0; o = i = i ? i + 1 : 0; g$ = []; do { o === s.length && (o = -1), l = s[r = -1 === o ? 0 : o], (n ? l.innerText.toLowerCase() : l.innerText).substr(0, a) === p$ && g$.push(s[r]), o++ } while (o !== i); return u$ = p$, g$[0] } function yd(e, t, i, n) { var r = t; n = void 0 === n || null === n || n; var o = { item: null, index: null }; if (e && e.length) { for (var s = e.length, a = n ? e.toLocaleLowerCase() : e, l = 0, h = r; l < h.length; l++) { var d = h[l], c = (n ? d.textContent.toLocaleLowerCase() : d.textContent).replace(/^\s+|\s+$/g, ""); if ("Equal" === i && c === a || "StartsWith" === i && c.substr(0, s) === a) return o.item = d, o.index = l, { item: d, index: l } } return o } return o } function vd(e, t, i, n) { if ("" !== t) { var r = i ? "gim" : "gm"; t = /^[a-zA-Z0-9- ]*$/.test(t) ? t : t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&"); var o = "StartsWith" === n ? "^(" + t + ")" : "EndsWith" === n ? "(" + t + ")$" : "(" + t + ")"; wd(e, new RegExp(o, r)) } } function wd(e, t) { for (var i = 0; e.childNodes && i < e.childNodes.length; i++) { if (3 === e.childNodes[i].nodeType) { e.innerHTML = e.innerHTML.replace(t, '<span class="e-highlight">$1</span>'); break } wd(e.childNodes[i], t) } } function bd(e, t, i, n, r, o, s) { var a, l; a = M("span", { className: V$ }), l = M("label", { className: W$ }), d(i.id) || "" === i.id || (l.id = "label_" + i.id.replace(/ /g, "_"), P(i, { "aria-labelledby": l.id })), d(n.placeholder) || "" === n.placeholder || (l.innerHTML = n.placeholder, n.removeAttribute("placeholder")), l.innerHTML = s, t.appendChild(a), t.appendChild(l), e.classList.add("e-float-input"), function (e, t) { e && e.length > 0 ? (S([t], H$), x([t], _$)) : (x([t], H$), S([t], _$)) }(r, l), "Always" === o && (l.classList.contains(_$) && x([l], _$), S([l], H$)) } function Cd(e, t, i) { e && e.length ? t.placeholder = "" : t.placeholder = i } function Ld() { return new p1(1, 0, 0, 1, 0, 0, h1.Identity) } function Md(e, t) { var i = function (e, t, i) { switch (e.type) { case h1.Identity: break; case h1.Translation: t += e.offsetX, i += e.offsetY; break; case h1.Scaling: t *= e.m11, i *= e.m22; break; case h1.Translation | h1.Scaling: t *= e.m11, t += e.offsetX, i *= e.m22, i += e.offsetY; break; default: var n = i * e.m21 + e.offsetX, r = t * e.m12 + e.offsetY; t *= e.m11, t += n, i *= e.m22, i += r }return { x: t, y: i } }(e, t.x, t.y); return { x: Math.round(100 * i.x) / 100, y: Math.round(100 * i.y) / 100 } } function Sd(e, t, i, n) { Td(e, function (e, t, i) { var n = Ld(), r = Math.sin(e), o = Math.cos(e), s = t * (1 - o) + i * r, a = i * (1 - o) - t * r; return n.type = h1.Unknown, Dd(n, o, r, -r, o, s, a), n }(.017453292519943295 * (t %= 360), i || 0, n || 0)) } function xd(e, t, i, n, r) { void 0 === n && (n = 0), void 0 === r && (r = 0), Td(e, function (e, t, i, n) { var r = Ld(); return r.type = i || n ? h1.Scaling | h1.Translation : h1.Scaling, Dd(r, e, 0, 0, t, i - e * i, n - t * n), r }(t, i, n, r)) } function Td(e, t) { var i = e.type, n = t.type; if (n !== h1.Identity) { if (i === h1.Identity) return Ad(e, t), void (e.type = t.type); if (n === h1.Translation) return e.offsetX += t.offsetX, e.offsetY += t.offsetY, void (i !== h1.Unknown && (e.type |= h1.Translation)); if (i !== h1.Translation) { var r = i << 4 | n; switch (r) { case 34: return e.m11 *= t.m11, void (e.m22 *= t.m22); case 35: return e.m11 *= t.m11, e.m22 *= t.m22, e.offsetX = t.offsetX, e.offsetY = t.offsetY, void (e.type = h1.Translation | h1.Scaling); case 36: break; default: switch (r) { case 50: return e.m11 *= t.m11, e.m22 *= t.m22, e.offsetX *= t.m11, void (e.offsetY *= t.m22); case 51: return e.m11 *= t.m11, e.m22 *= t.m22, e.offsetX = t.m11 * e.offsetX + t.offsetX, void (e.offsetY = t.m22 * e.offsetY + t.offsetY); case 52: break; default: switch (r) { case 66: case 67: case 68: break; default: return } } }var o = Ld(); return Dd(o, e.m11 * t.m11 + e.m12 * t.m21, e.m11 * t.m12 + e.m12 * t.m22, e.m21 * t.m11 + e.m22 * t.m21, e.m21 * t.m12 + e.m22 * t.m22, e.offsetX * t.m11 + e.offsetY * t.m21 + t.offsetX, e.offsetX * t.m12 + e.offsetY * t.m22 + t.offsetY), o.m21 || o.m12 ? o.type = h1.Unknown : ((o.m11 && 1 !== o.m11 || o.m22 && 1 !== o.m22) && (o.type = h1.Scaling), (o.offsetX || o.offsetY) && (o.type |= h1.Translation), (o.type & (h1.Translation | h1.Scaling)) === h1.Identity && (o.type = h1.Identity), o.type = h1.Scaling | h1.Translation), Ad(e, o), void (e.type = o.type) } var s = e.offsetX, a = e.offsetY; e.offsetX = s * t.m11 + a * t.m21 + t.offsetX, e.offsetY = s * t.m12 + a * t.m22 + t.offsetY, n !== h1.Unknown ? e.type = h1.Translation | h1.Scaling : e.type = h1.Unknown } } function Dd(e, t, i, n, r, o, s) { e.m11 = t, e.m12 = i, e.m21 = n, e.m22 = r, e.offsetX = o, e.offsetY = s } function Ad(e, t) { e.m11 = t.m11, e.m12 = t.m12, e.m21 = t.m21, e.m22 = t.m22, e.offsetX = t.offsetX, e.offsetY = t.offsetY, e.type = t.type } function Ed(e) { var t, i = []; if ("msie" === uw.info.name || "edge" === uw.info.name) for (var n = 0; n < e.childNodes.length; n++)1 === (t = e.childNodes[n]).nodeType && i.push(t); else i = e.children; return i } function jd(e) { var t = "pathTable"; if (window[t] || (window[t] = {}), e) { var i = "measureElement"; window[i].style.visibility = "visible"; var n = Ed(window[i].children[2])[0]; n.setAttribute("d", e); var r = void 0; window[t][e] ? r = window[t][e] : window[t][e] = r = n.getBBox(); var o = new c1(r.x, r.y, r.width, r.height); return window[i].style.visibility = "hidden", o } return new c1(0, 0, 0, 0) } function Id(e, t) { var i, n, r = [], o = 0, s = t || e.content; if ("nowrap" !== e.whiteSpace && "pre" !== e.whiteSpace) if ("breakall" === e.breakWord) for (i = "", i += s[0], o = 0; o < s.length; o++)if ((n = Ud(i, e)) >= e.width && i.length > 0) r[r.length] = { text: i, x: 0, dy: 0, width: n }, i = ""; else { (i += s[o + 1] || "").indexOf("\n") > -1 && (i = i.replace("\n", "")); var a = Ud(i, e); Math.ceil(a) + 2 >= e.width && i.length > 0 && (r[r.length] = { text: i, x: 0, dy: 0, width: a }, i = ""), o === s.length - 1 && i.length > 0 && (r[r.length] = { text: i, x: 0, dy: 0, width: a }, i = "") } else r = function (e, t) { var i, n, r, o, s = [], a = "", l = 0, h = 0, d = "nowrap" !== e.whiteSpace, c = (t || e.content).split("\n"); for (l = 0; l < c.length; l++)for (i = "NoWrap" !== e.textWrapping ? c[l].split(" ") : c, h = 0; h < i.length; h++) { a += ((0 !== h || 1 === i.length) && d && a.length > 0 ? " " : "") + i[h]; var p = Ud(n = a + (i[h + 1] || ""), e); Math.floor(p) > e.width - 2 && a.length > 0 ? (s[s.length] = { text: a, x: 0, dy: 0, width: n === a ? p : a === o ? r : Ud(a, e) }, a = "") : h === i.length - 1 && (s[s.length] = { text: a, x: 0, dy: 0, width: p }, a = ""), o = n, r = p } return s }(e, t); else r[r.length] = { text: s, x: 0, dy: 0, width: Ud(s, e) }; return r } function kd(e, t, i, n, r) { var o, s, a = new d1(0, 0), l = function (e, t) { var i = { fill: e.style.fill, stroke: e.style.strokeColor, angle: e.rotateAngle + e.parentTransform, pivotX: e.pivot.x, pivotY: e.pivot.y, strokeWidth: e.style.strokeWidth, dashArray: e.style.strokeDashArray, opacity: e.style.opacity, visible: e.visible, id: e.id, width: t || e.actualSize.width, height: e.actualSize.height, x: e.offsetX - e.actualSize.width * e.pivot.x + .5, y: e.offsetY - e.actualSize.height * e.pivot.y + .5 }; return i.fontSize = e.style.fontSize, i.fontFamily = e.style.fontFamily, i.textOverflow = e.style.textOverflow, i.textDecoration = e.style.textDecoration, i.doWrap = e.doWrap, i.whiteSpace = qd(e.style.whiteSpace, e.style.textWrapping), i.content = e.content, i.textWrapping = e.style.textWrapping, i.breakWord = Yd(e.style.textWrapping), i.textAlign = _d(e.style.textAlign), i.color = e.style.color, i.italic = e.style.italic, i.bold = e.style.bold, i.dashArray = "", i.strokeWidth = 0, i.fill = "", i }(e, n); return e.childNodes = o = Id(l, r), e.wrapBounds = s = function (e, t) { var i, n, r = { x: 0, width: 0 }, o = 0; for (o = 0; o < t.length; o++)n = i = t[o].width, i = "left" === e.textAlign ? 0 : "center" === e.textAlign ? i > e.width && ("Ellipsis" === e.textOverflow || "Clip" === e.textOverflow) ? 0 : -i / 2 : "right" === e.textAlign ? -i : t.length > 1 ? 0 : -i / 2, t[o].dy = 1.2 * e.fontSize, t[o].x = i, r ? (r.x = Math.min(r.x, i), r.width = Math.max(r.width, n)) : r = { x: i, width: n }; return r }(l, o), a.width = s.width, e.wrapBounds.width >= n && "Wrap" !== l.textOverflow && (a.width = n), a.height = o.length * e.style.fontSize * 1.2, a } function Pd(e, t) { var i; return t && (i = document.getElementById(t)), i ? i.querySelector("#" + e) : document.getElementById(e) } function Nd(e, t) { var i = M(e); return Od(i, t), i } function Od(e, t) { for (var i = Object.keys(t), n = 0; n < i.length; n++)e.setAttribute(i[n], t[i[n]]) } function Rd(e, t) { var i = null, n = Pd(e + t + "_diagramAdornerLayer"); return n && (i = n.getElementsByClassName("e-adorner-layer" + t)[0]), i } function zd() { var e = "measureElement"; if (window[e]) window[e].usageCount += 1; else { var t = Nd("div", { id: "measureElement", style: "visibility:hidden ; height: 0px ; width: 0px; overflow: hidden;" }), i = Nd("span", { style: "display:inline-block ; line-height: normal" }); t.appendChild(i); var n = void 0; n = Nd("img", {}), t.appendChild(n); var r = document.createElementNS("http://www.w3.org/2000/svg", "svg"); r.setAttribute("xlink", "http://www.w3.org/1999/xlink"), t.appendChild(r); var o = document.createElementNS("http://www.w3.org/2000/svg", "path"); r.appendChild(o); document.createTextNode(""); var s = document.createElementNS("http://www.w3.org/2000/svg", "text"); s.setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"), r.appendChild(s), window[e] = t, window[e].usageCount = 1, document.body.appendChild(t) } } function Bd(e, t) { var i = "measureElement"; window[i].style.visibility = "visible"; var n = window[i].children[1]; n.setAttribute("src", e); var r = n.getBoundingClientRect(), o = r.width, s = r.height; return t = new d1(o, s), window[i].style.visibility = "hidden", t } function Fd() { for (var e, t = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz", i = "", n = 0; n < 5; n++) { if ("crypto" in window && "getRandomValues" in crypto) { var r = new Uint16Array(1); e = (window.msCrypto || window.crypto).getRandomValues(r)[0] % (t.length - 1) } else e = Math.floor(Math.random() * t.length); 0 === n && e < 10 ? n-- : i += t.substring(e, e + 1) } return i } function Vd(e) { new c1; var t = e.offsetY - e.actualSize.height * e.pivot.y, i = e.offsetY + e.actualSize.height * (1 - e.pivot.y), n = e.offsetX - e.actualSize.width * e.pivot.x, r = e.offsetX + e.actualSize.width * (1 - e.pivot.x), o = { x: n, y: t }, s = { x: r, y: t }, a = { x: n, y: i }, l = { x: r, y: i }; return c1.toBounds([o, s, a, l]) } function Wd(e, t) { var i = Ld(); Sd(i, t, 0, 0); var n = Md(i, { x: 0, y: 0 }), r = Md(i, { x: e.width, y: 0 }), o = Md(i, { x: 0, y: e.height }), s = Md(i, { x: e.width, y: e.height }), a = Math.min(n.x, r.x, o.x, s.x), l = Math.min(n.y, r.y, o.y, s.y), h = Math.max(n.x, r.x, o.x, s.x), d = Math.max(n.y, r.y, o.y, s.y); return new d1(h - a, d - l) } function Hd(e) { var t, i = new c1, n = (t = Vd(e)).middleLeft, r = t.topCenter, o = t.bottomCenter, s = t.middleRight, a = t.topLeft, l = t.topRight, h = t.bottomLeft, d = t.bottomRight; if (e.corners = { topLeft: a, topCenter: r, topRight: l, middleLeft: n, middleRight: s, bottomLeft: h, bottomCenter: o, bottomRight: d }, 0 !== e.rotateAngle || 0 !== e.parentTransform) { var c = Ld(); Sd(c, e.rotateAngle + e.parentTransform, e.offsetX, e.offsetY), e.corners.topLeft = a = Md(c, a), e.corners.topCenter = r = Md(c, r), e.corners.topRight = l = Md(c, l), e.corners.middleLeft = n = Md(c, n), e.corners.middleRight = s = Md(c, s), e.corners.bottomLeft = h = Md(c, h), e.corners.bottomCenter = o = Md(c, o), e.corners.bottomRight = d = Md(c, d) } return i = c1.toBounds([a, l, h, d]), e.corners.left = i.left, e.corners.right = i.right, e.corners.top = i.top, e.corners.bottom = i.bottom, e.corners.center = i.center, e.corners.width = i.width, e.corners.height = i.height, i } function _d(e) { var t = ""; switch (e) { case "Center": t = "center"; break; case "Left": t = "left"; break; case "Right": t = "right" }return t } function Yd(e) { var t = ""; switch (e) { case "Wrap": t = "breakall"; break; case "NoWrap": t = "keepall"; break; case "WrapWithOverflow": t = "normal"; break; case "LineThrough": t = "line-through" }return t } function Ud(e, t) { var i = "measureElement"; window[i].style.visibility = "visible"; var n = Ed(window[i].children[2])[1]; n.textContent = e, n.setAttribute("style", "font-size:" + t.fontSize + "px; font-family:" + t.fontFamily + ";font-weight:" + (t.bold ? "bold" : "normal")); var r = n.getBBox().width; return window[i].style.visibility = "hidden", r } function qd(e, t) { if ("NoWrap" === t && "PreserveAll" === e) return "pre"; var i = ""; switch (e) { case "CollapseAll": i = "nowrap"; break; case "CollapseSpace": i = "pre-line"; break; case "PreserveAll": i = "pre-wrap" }return i } function Gd(e, t, i, n) { if (0 !== e) { var r = Ld(); return Sd(r, e, t, i), Md(r, n) } return n } function Qd(e, t) { return { x: e.x + t.desiredSize.width * t.pivot.x, y: e.y + t.desiredSize.height * t.pivot.y } } function Xd(e) { var t, i = [], n = Jd(e); if (n.length > 0) for (var r = 0; r < n.length; r++) { var o = n[r], s = ""; switch ((s = o[0]).toLowerCase()) { case "m": for (t = 1; t < o.length; t++)i.push({ command: s, x: o[t], y: o[t + 1] }), t += 1, "m" === s ? s = "l" : "M" === s && (s = "L"); break; case "l": case "t": for (t = 1; t < o.length; t++)i.push({ command: s, x: o[t], y: o[t + 1] }), t += 1; break; case "h": for (t = 1; t < o.length; t++)i.push({ command: s, x: o[t] }); break; case "v": for (t = 1; t < o.length; t++)i.push({ command: s, y: o[t] }); break; case "z": i.push({ command: s }); break; case "c": for (t = 1; t < o.length; t++)i.push({ command: s, x1: o[t], y1: o[t + 1], x2: o[t + 2], y2: o[t + 3], x: o[t + 4], y: o[t + 5] }), t += 5; break; case "s": for (t = 1; t < o.length; t++)i.push({ command: s, x2: o[t], y2: o[t + 1], x: o[t + 2], y: o[t + 3] }), t += 3; break; case "q": for (t = 1; t < o.length; t++)i.push({ command: s, x1: o[t], y1: o[t + 1], x: o[t + 2], y: o[t + 3] }), t += 3; break; case "a": for (t = 1; t < o.length; t++)i.push({ command: s, r1: o[t], r2: o[t + 1], angle: o[t + 2], largeArc: o[t + 3], sweep: o[t + 4], x: o[t + 5], y: o[t + 6] }), t += 6 } } return i } function Jd(e) { var t = /([a-z]+)|([+-]?(?:\d+\.?\d*|\.\d+))/gi, i = [], n = [], r = {}; t.lastIndex = 0; var o = !1; for (r = t.exec(e); r;)"e" === r[1] ? o = !0 : r[1] ? ("zm" === r[1].toLowerCase() ? (i.length && n.push(i), n.push(["Z"]), i = [r[1].substring(1, 2)]) : (i.length && n.push(i), i = [r[1]]), o = !1) : (i.length || (i = []), o || i.push(Number(r[2])), o = !1), r = t.exec(e); return i.length && n.push(i), n } function Zd(e, t, i) { var n, r, o = "", s = [{ x: 0 + e, y: 0 }, { x: 0 + i - e, y: 0 }, { x: 0 + i, y: 0 + e }, { x: 0 + i, y: 0 + t - e }, { x: 0 + i - e, y: 0 + t }, { x: 0 + e, y: 0 + t }, { x: 0, y: 0 + t - e }, { x: 0, y: 0 + e }], a = [{ x: 0 + i, y: 0 }, { x: 0 + i, y: 0 + t }, { x: 0, y: 0 + t }, { x: 0, y: 0 }], l = 0; o = "M" + s[0].x + " " + s[0].y; var h; for (h = 0; h < s.length; h += 2)o += "L" + (n = s[h + 1]).x + " " + n.y, r = s[h + 2] || s[0], o += "Q" + a[l].x + " " + a[l].y + " " + r.x + " " + r.y, l++; return o } function Kd(e) { var t, i, n, r, o, s, a, l, h, d, c = []; for (a = 0, l = 0, d = 0, h = e.length; d < h; ++d) { var p = e[d], u = ""; u = p.command, "y1" in p && (r = p.y1), "y2" in p && (s = p.y2), "x1" in p && (n = p.x1), "x2" in p && (o = p.x2), "x" in p && (a = p.x), "y" in p && (l = p.y); var g = c[c.length - 1]; switch (u) { case "M": c.push({ command: "M", x: a, y: l }); break; case "L": c.push({ command: "L", x0: t, y0: i, x: a, y: l }); break; case "H": c.push({ command: "L", x0: t, y0: i, x: a, y: i }); break; case "V": c.push({ command: "L", x0: t, y0: i, x: t, y: l }); break; case "C": c.push({ command: "C", x0: t, y0: i, x1: n, y1: r, x2: o, y2: s, x: a, y: l }); break; case "S": if (g) { var m = void 0, f = { x: 2 * t - (m = "C" === g.command || "S" === g.command ? { x: g.x2, y: g.y2 } : { x: t, y: i }).x, y: 2 * i - m.y }; c.push({ command: "C", x0: t, y0: i, x1: f.x, y1: f.y, x2: o, y2: s, x: a, y: l }) } break; case "Q": c.push({ command: "Q", x0: t, y0: i, x1: n, y1: r, x: a, y: l }); break; case "T": if (g) { m = void 0, f = { x: 2 * t - (m = "Q" === g.command ? { x: g.x1, y: g.y1 } : { x: t, y: i }).x, y: 2 * i - m.y }; c.push({ command: "Q", x0: t, y0: i, x1: f.x, y1: f.y, x: a, y: l }) } break; case "A": var y = p; y.command = "A", c.push(y); break; case "Z": case "z": c.push({ command: "Z" }), a = t, l = i }t = a, i = l } return c } function $d(e, t, i, n, r, o, s, a) { var l, h, d, c, p, u, g, m, f; for (p = 0, u = 0, m = 0, g = e.length; m < g; ++m) { var y = e[m], v = y.command; "x" in y && (p = y.x), "y" in y && (u = y.y), "y1" in y && (h = y.y1), "y2" in y && (c = y.y2), "x1" in y && (l = y.x1), "x2" in y && (d = y.x2), n ? (void 0 !== p && (p = tc(p, t, r, s)), void 0 !== u && (u = tc(u, i, o, a)), void 0 !== l && (l = tc(l, t, r, s)), void 0 !== h && (h = tc(h, i, o, a)), void 0 !== d && (d = tc(d, t, r, s)), void 0 !== c && (c = tc(c, i, o, a))) : (void 0 !== p && (p = Number((p + t).toFixed(2))), void 0 !== u && (u = Number((u + i).toFixed(2))), void 0 !== l && (l = Number((l + t).toFixed(2))), void 0 !== h && (h = Number((h + i).toFixed(2))), void 0 !== d && (d = Number((d + t).toFixed(2))), void 0 !== c && (c = Number((c + i).toFixed(2)))); (f = ec(y, v, { x: p, y: u, x1: l, y1: h, x2: d, y2: c, r1: y.r1, r2: y.r2 }, n, t, i)) && (e[m] = f) } return nc(e) } function ec(e, t, i, n, r, o) { switch (t) { case "M": case "L": e.x = i.x, e.y = i.y; break; case "H": e.x = i.x; break; case "V": e.y = i.y; break; case "C": e.x = i.x, e.y = i.y, e.x1 = i.x1, e.y1 = i.y1, e.x2 = i.x2, e.y2 = i.y2; break; case "S": e.x = i.x, e.y = i.y, e.x2 = i.x2, e.y2 = i.y2; break; case "Q": e.x = i.x, e.y = i.y, e.x1 = i.x1, e.y1 = i.y1; break; case "T": e.x = i.x, e.y = i.y; break; case "A": var s = i.r1, a = i.r2; n && (i.r1 = s *= r, i.r2 = a *= o), e.x = i.x, e.y = i.y, e.r1 = i.r1, e.r2 = i.r2; break; case "z": case "Z": e = { command: "Z" } }return e } function tc(e, t, i, n) { return e !== i ? e = n !== i ? e * t - (Number(i) * t - Number(i)) + (n - Number(i)) : Number(e) * t - (Number(i) * t - Number(i)) : n !== i && (e = n), Number(e.toFixed(2)) } function ic(e) { var t, i, n, r, o, s, a, l, h, d; for (a = 0, l = 0, d = 0, h = e.length; d < h; ++d) { var c = e[d], p = c.command; if (/[MLHVCSQTA]/.test(p)) "x" in c && (c.x = a = c.x), "y" in c && (c.y = l = c.y); else { "x1" in c && (c.x1 = n = a + c.x1), "x2" in c && (c.x2 = o = a + c.x2), "y1" in c && (c.y1 = r = l + c.y1), "y2" in c && (c.y2 = s = l + c.y2), "x" in c && (c.x = a += c.x), "y" in c && (c.y = l += c.y); var u = void 0; switch (p) { case "m": case "M": u = { command: "M", x: a, y: l }; break; case "l": case "L": u = { command: "L", x: a, y: l }; break; case "h": case "H": u = { command: "H", x: a }; break; case "v": case "V": u = { command: "V", y: l }; break; case "c": case "C": u = { command: "C", x: a, y: l, x1: n, y1: r, x2: o, y2: s }; break; case "s": case "S": u = { command: "S", x: a, y: l, x2: o, y2: s }; break; case "q": case "Q": u = { command: "Q", x: a, y: l, x1: n, y1: r }; break; case "t": case "T": u = { command: "T", x: a, y: l }; break; case "a": case "A": (u = { command: "A", x: a, y: l }).r1 = c.r1, u.r2 = c.r2, u.angle = c.angle, u.largeArc = c.largeArc, u.sweep = c.sweep; break; case "z": case "Z": u = { command: "Z" }, a = t, l = i, u = e[d] }u && (e[d] = u) } "M" !== p && "m" !== p || (t = a, i = l) } return e } function nc(e) { var t, i = ""; for (t = 0; t < e.length; t++)i += 0 === t ? rc(e[t]) : " " + rc(e[t]); return i } function rc(e) { var t = ""; switch (e.command) { case "Z": case "z": t = e.command; break; case "M": case "m": case "L": case "l": t = e.command + " " + e.x + " " + e.y; break; case "C": case "c": t = e.command + " " + e.x1 + " " + e.y1 + " " + e.x2 + " " + e.y2 + " " + e.x + " " + e.y; break; case "Q": case "q": t = e.command + " " + e.x1 + " " + e.y1 + " " + e.x + " " + e.y; break; case "A": case "a": var i = e.command, n = e.angle, r = e.largeArc ? "1" : "0", o = e.sweep ? "1" : "0"; t = i + " " + e.r1 + " " + e.r2 + " " + n + " " + r + " " + o + " " + e.x + " " + e.y; break; case "H": case "h": t = e.command + " " + e.x; break; case "V": case "v": t = e.command + " " + e.y; break; case "S": case "s": t = e.command + " " + e.x2 + " " + e.y2 + " " + e.x + " " + e.y; break; case "T": case "t": t = e.command + " " + e.x + " " + e.y }return t } function oc(e, t, i) { for (var n = 0; n < t.length; n++)i.renderElement(t[n], e, void 0) } function sc(e, t) { for (var i = Object.keys(t), n = 0; n < i.length; n++)e.setAttribute(i[n], t[i[n]]) } function ac(e, t) { var i = document.createElementNS("http://www.w3.org/2000/svg", e); return sc(i, t), i } function lc(e, t, i) { for (var n = e.children.length - 1; n >= 0; n--) { var r = e.children[n]; if (r && r.bounds.containsPoint(t, 0)) { if (r instanceof m1) { var o = this.findTargetElement(r, t); if (o) return o } if (r.bounds.containsPoint(t, 0)) return r } } return e.bounds.containsPoint(t, i) && "none" !== e.style.fill ? e : null } function hc(e, t) { var i = { x: 0, y: 0 }, n = e, r = t, o = (r.y2 - r.y1) * (n.x2 - n.x1) - (r.x2 - r.x1) * (n.y2 - n.y1), s = (r.x2 - r.x1) * (n.y1 - r.y1) - (r.y2 - r.y1) * (n.x1 - r.x1), a = (n.x2 - n.x1) * (n.y1 - r.y1) - (n.y2 - n.y1) * (n.x1 - r.x1); if (0 === o) return { enabled: !1, intersectPt: i }; var l = s / o, h = a / o; return l >= 0 && l <= 1 && h >= 0 && h <= 1 ? (i.x = n.x1 + l * (n.x2 - n.x1), i.y = n.y1 + l * (n.y2 - n.y1), { enabled: !0, intersectPt: i }) : { enabled: !1, intersectPt: i } } function dc(e, t, i, n) { return { x1: Number(e) || 0, y1: Number(t) || 0, x2: Number(i) || 0, y2: Number(n) || 0 } } function cc(e, t, i, n) { if (void 0 !== e.width && void 0 !== e.height && (e.width *= t, e.height *= i), e instanceof m1) { var r = Ld(), o = n.width || n.actualSize.width, s = n.height || n.actualSize.height; if (void 0 !== o && void 0 !== s) { var a = n.offsetX - o * n.pivot.x, l = n.offsetY - s * n.pivot.y, h = { x: a + o * n.pivot.x, y: l + s * n.pivot.y }; h = Gd(n.rotateAngle, n.offsetX, n.offsetY, h), Sd(r, -n.rotateAngle, h.x, h.y), Sd(r, n.rotateAngle, h.x, h.y); for (var d = 0, c = e.children; d < c.length; d++) { var p = c[d]; if (void 0 !== p.width && void 0 !== p.height) { var u = Md(r, { x: p.offsetX, y: p.offsetY }); p.offsetX = u.x, p.offsetY = u.y, cc(p, t, i, n) } } } } } function pc(e, t, i) { return e.x >= t.x - i && e.x <= t.x + i && e.y >= t.y - i && e.y <= t.y + i } function uc(e, t, i) { var r = n("name", t), o = e.getAttribute("data-id"), s = d(o) ? r : o; i.setProperties({ path: gc(e, s, i.hasId) }, !0), i.pathId = function (e) { for (var t = mc(e, e.getAttribute("data-uid"), !0), i = [], n = t.length - 1; n >= 0; n--)i.push(t[n]); return i }(e), i.pathNames = function (e, t) { for (var i = mc(e, t, !1), n = [], r = i.length - 1; r >= 0; r--)n.push(i[r]); return n }(e, r) } function gc(e, t, i) { for (var n = mc(e, t, !1, i), r = i ? "" : "/", o = n.length - (i ? 1 : 2); o >= 0; o--)r += n[o] + "/"; return r } function mc(e, t, i, n) { for (var r = [t], o = e.parentNode; !d(o);) { if (F(o, "." + e2)) { var s = i ? o.getAttribute("data-uid") : n ? o.getAttribute("data-id") : N("." + t2, o).textContent; r.push(s) } if ((o = o.parentNode).classList.contains(x2)) break } return r } function fc(e) { e.isCut && (wc(e), e.selectedNodes = [], e.actionRecords = [], e.enablePaste = !1, e.notify(D3, {})) } function yc(e, t) { if (t.isSearchCut = !1, t.actionRecords = [], t.activeElements = [], t.notify(E3, {}), 0 === t.activeElements.length) return !1; wc(t); var i = t.activeElements; "navigationpane" !== t.activeModule ? t.targetPath = t.path : t.targetPath = Yc(t.path); var r = 0; if (i && (bc(t, i[0]), "cut" === e)) for (; r < i.length;)vc(i[r]), r++; for (r = 0, t.selectedNodes = [], t.enablePaste = !0, t.notify(T3, {}); r < t.activeRecords.length;)t.actionRecords.push(t.activeRecords[r]), t.selectedNodes.push(n("name", t.activeRecords[r])), r++; if (("" !== t.breadcrumbbarModule.searchObj.element.value || t.isFiltered) && "navigationpane" !== t.activeModule) { t.selectedNodes = [], t.isSearchCut = !0; for (var o = 0; o < t.selectedItems.length;)t.selectedNodes.push(t.selectedItems[o]), o++ } return !0 } function vc(e) { e.classList.add(o2) } function wc(e, t) { for (var i = t ? e.element.querySelectorAll("." + a2) : e.element.querySelectorAll("." + o2), n = 0; n < i.length;)t ? i[n].classList.remove(a2) : i[n].classList.remove(o2), n++ } function bc(e, t) { t && (t.classList.contains(c2) ? e.activeModule = "detailsview" : R(t, "." + L2) ? e.activeModule = "largeiconsview" : e.activeModule = "navigationpane") } function Cc(e, t, i) { var n; if (0 !== t.length || e.isFiltered || e.notify(R3, { args: e }), n = "startsWith" === e.searchSettings.filterType ? t + "*" : "endsWith" === e.searchSettings.filterType ? "*" + t : "*" + t + "*", e.searchWord = n, e.itemData = [Tc(e)], t.length > 0) { var r = e.searchSettings.ignoreCase, o = e.showHiddenItems; Sp(e, i ? v3 : c3, e.path, n, o, !r) } else e.isFiltered ? dp(e, v3) : hp(e, i ? v3 : c3, e.path) } function Lc(e, t) { e.setProperties({ view: t }, !0), ("" !== e.breadcrumbbarModule.searchObj.element.value || e.isFiltered) && (e.layoutSelectedItems = e.selectedItems); var i = ""; e.breadcrumbbarModule.searchObj.element.value && (i = e.breadcrumbbarModule.searchObj.element.value), e.isLayoutChange = !0, Cc(e, i, !0) } function Mc(e, t) { var i = ""; t && (i = R(t, ".e-gridcontent") ? "detailsview" : R(t, "." + $4) ? "largeiconsview" : t.classList.contains("e-fullrow") || t.classList.contains("e-icon-expandable") ? "navigationpane" : R(t, ".e-address-list-item") ? "breadcrumbbar" : ""), e.targetModule = i } function Sc(e) { e.itemData = [Tc(e)], rp(e.itemData[0]) ? hp(e, n3, e.path) : ip(e, e.itemData[0]) } function xc(e) { hp(e, u3, e.path) } function Tc(e) { return n(e.pathId[e.pathId.length - 1], e.feParent) } function Dc(e) { yc("copy", e) && (e.fileAction = "copy") } function Ac(e) { yc("cut", e) && (e.isCut = !0, e.fileAction = "move") } function Ec(e) { if (!n("isFile", e)) return v2; var t = n("type", e); -1 !== (t = t.toLowerCase()).indexOf(".") && (t = t.split(".").join("")); return -1 !== ["bmp", "dib", "jpg", "jpeg", "jpe", "jfif", "gif", "tif", "tiff", "png", "ico"].indexOf(t) ? w2 : -1 !== ["mp3", "wav", "aac", "ogg", "wma", "aif", "fla", "m4a"].indexOf(t) ? b2 : -1 !== ["webm", "mkv", "flv", "vob", "ogv", "ogg", "avi", "wmv", "mp4", "3gp"].indexOf(t) ? C2 : -1 !== ["css", "exe", "html", "js", "msi", "pdf", "pptx", "ppt", "rar", "zip", "txt", "docx", "doc", "xlsx", "xls", "xml", "rtf", "php"].indexOf(t) ? "e-fe-" + t : "e-fe-unknown e-fe-" + t } function jc(e, t) { var i, r = e.ajaxSettings.getImageUrl ? e.ajaxSettings.getImageUrl : e.ajaxSettings.url, o = n("name", t), s = n("filterPath", t); if (e.hasId) { var a = n("id", t); i = r + "?path=" + e.path + "&id=" + a } else i = "" === e.breadcrumbbarModule.searchObj.element.value && !e.isFiltered || d(s) ? r + "?path=" + e.path + o : r + "?path=" + s.replace(/\\/g, "/") + o; return i = i + "&time=" + (new Date).getTime().toString() } function Ic(e, t, i) { var r = n(e.hasId ? "id" : "name", t) + "/", o = n(e.hasId ? "filterId" : "filterPath", t); return d(o) ? i + r : o.replace(/\\/g, "/") + r } function kc(e, t) { var i = n("name", t), r = n("filterPath", t); return "" === e.breadcrumbbarModule.searchObj.element.value && !e.isFiltered || d(r) || (i = (r = r.replace(/\\/g, "/")).replace(e.path, "") + i), i } function Pc(e, t) { if (0 === t.length) return t; var i = (new GD).sortBy(e.sortBy, e.sortOrder.toLowerCase(), !0).group("isFile"); return n("records", new aA(t).executeLocal(i)) } function Nc(e, t, i) { var r = n(e.pathId[e.pathId.length - 1], e.feFiles), o = (new GD).where(t, "equal", i); return new aA(r).executeLocal(o)[0] } function Oc(e, t, i) { var n, r = N("#" + e.element.id + F4, e.element), o = N("#" + e.element.id + Q4, r).offsetHeight; if (n = r.offsetHeight - o, "Details" === e.view && (n -= N("." + S2, r).offsetHeight), d(t.querySelector("." + p2))) { var s = M("div", { className: p2 }), a = M("div", { className: M2 }), l = M("div", { className: u2 }), h = M("div", { className: g2 }); "Details" === e.view ? t.querySelector("." + D2).appendChild(s) : t.appendChild(s), s.appendChild(a), s.appendChild(l), s.appendChild(h) } t.querySelector("." + p2) && (d(i.error) ? e.isFiltered ? (t.querySelector("." + u2).innerHTML = zc(e, "Filter-Empty"), t.querySelector("." + g2).innerHTML = zc(e, "Filter-Key")) : "" !== e.breadcrumbbarModule.searchObj.element.value ? (t.querySelector("." + u2).innerHTML = zc(e, "Search-Empty"), t.querySelector("." + g2).innerHTML = zc(e, "Search-Key")) : (t.querySelector("." + u2).innerHTML = zc(e, "Folder-Empty"), t.querySelector("." + g2).innerHTML = zc(e, "File-Upload")) : (t.querySelector("." + u2).innerHTML = zc(e, "Access-Denied"), t.querySelector("." + g2).innerHTML = zc(e, "Access-Details"))); var c = N("." + p2, t); n = (n - c.offsetHeight) / 2, c.style.marginTop = n + "px" } function Rc(e) { return new aA(e).executeLocal((new GD).where(Q2, "equal", !1, !1)) } function zc(e, t) { var i = e.localeObj.getConstant(t); return "" === i ? t : i } function Bc(e, t) { var i = e.cssClass; return i = d(i) || "" === i ? t : i + " " + t } function Fc(e, t) { -1 !== t.item.id.indexOf("ascending") || -1 !== t.item.id.indexOf("descending") ? e.sortOrder = Vc(t.item.id) : e.sortBy = Vc(t.item.id), e.itemData = [Tc(e)], "Details" === e.view && (e.isMobile ? Lc(e, "Details") : e.notify(O3, { module: "detailsview" })), "LargeIcons" === e.view && Lc(e, "LargeIcons"), e.notify(w3, {}) } function Vc(e) { var t = e.substring(e.lastIndexOf("_") + 1), i = t; switch (t) { case "date": i = "_fm_modified"; break; case "ascending": i = "Ascending"; break; case "descending": i = "Descending" }return i } function Wc(e, t) { e.notify(y3, { selectedNode: e.pathId[e.pathId.length - 1] }), e.originalPath = Ic(e, t, e.path), hp(e, e.path !== e.originalPath ? J2 : Z2, e.path) } function Hc(e) { if (e.isDragDrop = !1, 0 !== e.selectedNodes.length && e.enablePaste) { var t = "" === e.folderPath ? e.path : e.folderPath; _c(e, e.actionRecords, t, e.path) || ("move" === e.fileAction && e.targetPath !== t || "copy" === e.fileAction ? (e.notify(j3, {}), pp(e, e.targetPath, e.selectedNodes, t, e.fileAction, [], e.actionRecords)) : (e.enablePaste = !1, e.notify(D3, {}), wc(e))) } } function _c(e, t, i, r) { for (var o = !1, s = 0; s < t.length; s++)if (!n("isFile", t[s])) { var a = Ic(e, t[s], r); if (-1 !== i.indexOf(a)) { Dp(e, "Error", { files: null, error: { code: "402", message: zc(e, "Sub-Folder-Error"), fileExists: null } }), o = !0; break } } return o } function Yc(e) { for (var t = e.split("/"), i = t[0] + "/", n = 1; n < t.length - 2; n++)i += t[n] + "/"; return i } function Uc(e, t) { var i = n(e.hasId ? "id" : "name", t.cwd) + "/", r = n(e.hasId ? "filterId" : "filterPath", t.cwd); return d(r) ? e.path + i : "" === r ? e.hasId ? i : "/" : r.replace(/\\/g, "/") + i } function qc(e, t, i) { "move" === t && (e.isDragDrop ? e.notify(V3, i) : (e.enablePaste = !1, e.notify(D3, {}), e.notify(k3, i))), 0 === e.duplicateItems.length && (e.pasteNodes = []); for (var n = 0; n < i.files.length; n++)e.pasteNodes.push(i.files[n][e.hasId ? "id" : "name"]), e.isDragDrop && e.droppedObjects.push(i.files[n]); e.duplicateItems = [], e.duplicateRecords = [], e.isDragDrop && !e.isPasteError ? e.isDropEnd = !0 : e.isDropEnd = !1, !e.isDragDrop || e.path === e.dragPath || e.path === e.dropPath || e.isSearchDrag ? (e.isPathDrag = !1, hp(e, I3, e.path)) : Gc(e), e.trigger("success", { action: t, result: i }) } function Gc(e) { var t = n("_fm_id", e.dropData); if (e.expandedId = t, e.itemData = [e.dropData], e.isPathDrag) e.notify(e3, e.itemData); else { if (e.navigationpaneModule) { uc(N('[data-uid="' + t + '"]', e.navigationpaneModule.treeObj.element), e.dropData, e) } hp(e, W3, e.dropPath) } } function Qc(e) { if (e.isSearchDrag = !1, "" !== e.breadcrumbbarModule.searchObj.element.value && (e.isSearchDrag = !0), "navigationpane" !== e.activeModule) { e.dragNodes = []; for (var t = 0; t < e.selectedItems.length;)e.dragNodes.push(e.selectedItems[t]), t++ } var i = e.createElement("div", { className: "e-fe-icon " + Ec(e.dragData[0]) }), n = e.createElement("div", { className: "e-fe-name", innerHTML: e.dragData[0].name }), r = e.createElement("div", { className: "e-fe-content" }); r.appendChild(i), r.appendChild(n); var o = e.createElement("div", { className: m2 }); if (o.appendChild(r), e.dragNodes.length > 1) { var s = e.createElement("span", { className: "e-fe-count", innerHTML: e.dragNodes.length.toString(10) }); o.appendChild(s) } e.virtualDragElement = o, e.element.appendChild(e.virtualDragElement) } function Xc(e, t) { var i = t; i.cancel = !1, null != e.treeExpandTimer && (window.clearTimeout(e.treeExpandTimer), e.treeExpandTimer = null), Kc(e), e.element.classList.remove("e-fe-drop", "e-no-drop"), wc(e), e.uploadObj.dropArea = N("#" + e.element.id + G4, e.element); var n = N("." + m2, e.element); n && I(n), Mc(e, t.target), e.notify(F3, t), wc(e, "hover"), i.fileDetails = e.dragData, e.trigger("fileDragStop", i, function (t) { t.cancel || d(e.targetModule) || "" === e.targetModule || function (e) { e.isDragDrop = !0, 0 !== e.dragData.length && (e.dragPath = e.dragPath.replace(/\\/g, "/"), e.dropPath = e.dropPath.replace(/\\/g, "/"), _c(e, e.dragData, e.dropPath, e.dragPath) || e.dragPath === e.dropPath || (e.itemData = [e.dropData], pp(e, e.dragPath, e.dragNodes, e.dropPath, "move", [], e.dragData), e.notify(j3, {}))) }(e) }) } function Jc(e, t) { var i = t; if (i.cancel = !1, i.fileDetails = e.dragData, e.droppedObjects = [], (!e.allowDragAndDrop || "navigationpane" === e.activeModule && R(t.element, "li").getAttribute("data-uid") === e.pathId[0]) && (i.cancel = !0), "navigationpane" === e.activeModule && -1 !== e.pathId.indexOf(R(t.element, "li").getAttribute("data-uid")) ? e.isPathDrag = !0 : e.isPathDrag = !1, wc(e), i.cancel) Zc(e); else if (!i.cancel) { for (var n = 0; n < e.activeElements.length;)vc(e.activeElements[n]), n++; e.trigger("fileDragStart", i, function (t) { t.cancel ? Zc(e) : e.uploadObj.dropArea = null }) } } function Zc(e) { wc(e); var t = N("." + m2, e.element); t && I(t) } function Kc(e) { $c(e, f2), $c(e, y2) } function $c(e, t) { for (var i = e.element.querySelectorAll("." + t), n = 0; n < i.length; n++)i[n].classList.remove(t) } function ep(e, t) { var i = t; i.fileDetails = e.dragData; var n = !1; Mc(e, t.target), Kc(e), null != e.treeExpandTimer && (window.clearTimeout(e.treeExpandTimer), e.treeExpandTimer = null), wc(e, "hover"); var r = null; "navigationpane" === e.targetModule ? ((r = R(t.target, "li")).classList.add(a2, f2), n = !0, e.treeExpandTimer = window.setTimeout(function () { e.notify(H3, t) }, 800)) : "detailsview" === e.targetModule ? ((r = R(t.target, "tr")) && r.querySelector("." + v2) && !r.classList.contains(o2) ? r.classList.add(f2) : !r || r.querySelector("." + v2) || r.classList.contains(o2) || r.classList.add(y2), n = !0) : "largeiconsview" === e.targetModule ? ((r = R(t.target, "li")) && r.querySelector("." + v2) && !r.classList.contains(o2) && r.classList.add(a2, f2), n = !0) : "breadcrumbbar" === e.targetModule && (n = !0), e.element.classList.remove("e-fe-drop", "e-no-drop"), e.element.classList.add(n ? "e-fe-drop" : "e-no-drop"), e.trigger("fileDragging", i) } function tp(e) { op(e.itemData[0]) ? Dp(e, "Rename") : ip(e, e.itemData[0]) } function ip(e, t) { Dp(e, "Error", { error: { code: "401", fileExists: null, message: '"' + function (e) { var t = n("name", e); return n("filterPath", e).replace(/\\/g, "/") + t }(t) + '" is not accessible. Access is denied.' } }) } function np(e) { return rp(e) ? "e-fe-locked" : "e-fe-locked e-fe-hidden" } function rp(e) { var t = n("permission", e); return !(t && !n("read", t)) } function op(e) { var t = n("permission", e); return !t || !(!n("read", t) || !n("edit", t)) } function sp(e) { var t = n("permission", e); return !t || !(!n("read", t) || !n("editContents", t)) } function ap(e) { var t = n("permission", e); return !t || !(!n("read", t) || !n("upload", t)) } function lp(e) { var t = n("permission", e); return !t || !(!n("read", t) || !n("download", t)) } function hp(e, t, i) { for (var o = e.itemData, s = 0; s < o.length; s++)d(n("hasChild", o[s])) && r("hasChild", !1, o[s]); mp(e, { action: "read", path: i, showHiddenItems: e.showHiddenItems, data: o }, fp, t) } function dp(e, t) { var i, r = { action: "filter", path: e.path, showHiddenItems: e.showHiddenItems, data: [Tc(e)] }; mp(e, i = e.filterData ? h(i, r, e.filterData) : r, yp, t, n("action", i)) } function cp(e, t, i) { var n, r; if ("" !== e.breadcrumbbarModule.searchObj.element.value || e.isFiltered) { var o = e.filterPath; e.hasId ? (n = e.currentItemText, r = i) : (n = (o = o.replace(/\\/g, "/")).replace(t, "") + e.currentItemText, r = o.replace(t, "") + i) } else n = e.currentItemText, r = i; mp(e, { action: "rename", path: t, name: n, newName: r, data: e.itemData }, wp, t) } function pp(e, t, i, n, r, o, s) { var a = { action: r, path: t, targetData: e.itemData[0], targetPath: n, names: i, renameFiles: o, data: s }; e.destinationPath = n, mp(e, a, bp, t, r, n) } function up(e, t, i, n) { mp(e, { action: n, path: i, names: t, data: e.itemData }, Cp, i) } function gp(e, t, i, n) { mp(e, { action: n, path: i, names: t, data: e.itemData }, Lp, i, n) } function mp(e, t, i, o, s, a) { var l = { url: e.ajaxSettings.url, type: "POST", mode: !0, dataType: "json", contentType: "application/json", data: JSON.stringify(t), onSuccess: null, onFailure: null, beforeSend: null }, h = { action: n("action", t), ajaxSettings: l, cancel: !1 }; e.trigger("beforeSend", h, function (l) { if (!l.cancel) { e.notify(l3, {}); new Zv({ url: n("url", l.ajaxSettings), type: n("type", l.ajaxSettings), mode: n("mode", l.ajaxSettings), dataType: n("dataType", l.ajaxSettings), contentType: n("contentType", l.ajaxSettings), data: n("data", l.ajaxSettings), beforeSend: n("beforeSend", l.ajaxSettings), onSuccess: function (h) { "string" == typeof h && (h = JSON.parse(h)), e.notify(h3, { action: "success" }); var c = e.expandedId ? e.expandedId : e.pathId[e.pathId.length - 1]; if (!d(h.cwd) && "read" === n("action", t) && (r("_fm_id", c, h.cwd), r(c, h.cwd, e.feParent), !d(h.files) || "401" === h.error.code)) { if (("finalize-end" === o || "initial-end" === o) && 0 === e.pathNames.length) { var p = n(e.pathId[0], e.feParent); e.pathNames[0] = n("name", p), e.hasId = !d(n("id", p)) } "finalize-end" === o && function (e) { for (var t = e.hasId ? "id" : "name", i = e.hasId ? "" : "/", r = e.hasId ? 0 : 1; r < e.pathId.length; r++)i += n(t, n(e.pathId[r], e.feParent)) + "/"; e.setProperties({ path: i }, !0) }(e) } if (!d(h.files)) { !function (e) { for (var t = 0; t < e.length; t++)r("_fm_created", new Date(n("dateCreated", e[t])), e[t]), r("_fm_modified", new Date(n("dateModified", e[t])), e[t]) }(h.files); for (var u = 0, g = h.files.length; u < g; u++) { var m = h.files[u]; r("_fm_iconClass", Ec(m), m) } "read" === n("action", t) && (!function (e, t) { for (var i = Rc(e.files), n = 0, o = i.length; n < o; n++)r("_fm_id", t + "_" + n, i[n]) }(h, c), r(c, h.files, e.feFiles)) } i(e, h, o, s, a), d(h.files) || "path-changed" !== o && "finalize-end" !== o && "open-end" !== o || e.notify(z3, h), "function" == typeof n("onSuccess", l.ajaxSettings) && n("onSuccess", l.ajaxSettings)() }, onFailure: function () { var t = { files: null, error: { code: "404", message: "NetworkError: Failed to send on XMLHTTPRequest: Failed to load " + e.ajaxSettings.url, fileExists: null } }; e.notify(h3, { action: "failure" }), i(e, t, o, s, a), "function" == typeof n("onFailure", l.ajaxSettings) && n("onFailure", l.ajaxSettings)() } }).send() } }) } function fp(e, t, i) { if (d(t.files)) "401" === t.error.code && (t.files = [], e.notify(i, t), e.notify(g3, {})), Mp(e, t, "read"); else { e.notify(i, t), e.notify(g3, {}); var n = { action: "read", result: t }; e.trigger("success", n) } if (e.isDragDrop && e.isDropEnd) { if (0 !== e.droppedObjects.length) { n = { fileDetails: e.droppedObjects }; e.trigger("fileDropped", n) } e.isDropEnd = e.isDragDrop = !1 } } function yp(e, t, i, n) { if (d(t.files)) Mp(e, t, n); else { e.notify(i, t); var r = { action: n, result: t }; e.trigger("success", r) } } function vp(e, t) { if (d(t.files)) if ("400" === t.error.code) { var i = N("#newname", e.dialogObj.element), n = zc(e, "Validation-NewFolder-Exists").replace("{0}", '"' + i.value + '"'); i.parentElement.nextElementSibling.innerHTML = n } else e.dialogObj.hide(), Mp(e, t, "create"); else { e.dialogObj.hide(), e.createdItem = t.files[0], e.breadcrumbbarModule.searchObj.value = ""; var r = { action: "create", result: t }; e.trigger("success", r), e.itemData = [Tc(e)], hp(e, K2, e.path) } } function wp(e, t, i) { if (d(t.files)) if ("400" === t.error.code) { var r = N("#rename", e.dialogObj.element), o = zc(e, "Validation-Rename-Exists").replace("{0}", '"' + e.currentItemText + '"'); o = o.replace("{1}", '"' + r.value + '"'), r.parentElement.nextElementSibling.innerHTML = o } else e.dialogObj.hide(), Mp(e, t, "rename"); else { e.dialogObj.hide(); var s = { action: "rename", result: t }; e.trigger("success", s), e.renamedItem = t.files[0], "navigationpane" === e.activeModule ? (e.pathId.pop(), e.itemData = [n(e.pathId[e.pathId.length - 1], e.feParent)], hp(e, S3, Yc(e.path))) : (e.itemData = [Tc(e)], "" !== e.breadcrumbbarModule.searchObj.value ? Sp(e, x3, e.path, e.searchWord, e.showHiddenItems, !e.searchSettings.ignoreCase) : e.isFiltered ? dp(e, x3) : hp(e, x3, e.path)) } } function bp(e, t, i, n) { t.error && t.error.fileExists ? (e.fileLength = 0, d(t.files) || (e.isPasteError = !0, qc(e, n, t)), Ap(e, "DuplicateItems", t.error.fileExists), "404" === t.error.code && Dp(e, "Error", t)) : t.error || d(t.files) ? t.error && !d(t.files) ? (e.isPasteError = !0, qc(e, n, t), Dp(e, "Error", t)) : Mp(e, t, n) : (e.isPasteError = !1, qc(e, n, t)) } function Cp(e, t, i) { if (d(t.files)) Mp(e, t, "delete"); else if (e.setProperties({ path: i }, !0), e.itemData = [Tc(e)], hp(e, i3, e.path), t.error) Mp(e, t, "delete"); else { var n = { action: "delete", result: t }; e.trigger("success", n) } } function Lp(e, t, i, n) { if (d(t.details)) Mp(e, t, "details"); else { Dp(e, n, null, t.details); var r = { action: "details", result: t }; e.trigger("success", r) } } function Mp(e, t, i) { Dp(e, "Error", t); var n = { action: i, error: t.error }; e.trigger("failure", n) } function Sp(e, t, i, n, r, o) { mp(e, { action: "search", path: i, searchString: n, showHiddenItems: r, caseSensitive: o, data: e.itemData }, xp, t) } function xp(e, t, i) { if (d(t.files)) Mp(e, t, "search"); else { e.notify(i, t); var n = { action: "search", result: t }; e.trigger("success", n) } } function Tp(e, t, i) { var n = e.ajaxSettings.downloadUrl ? e.ajaxSettings.downloadUrl : e.ajaxSettings.url, r = { action: "download", path: t, names: i, data: e.itemData }, o = M("form", { id: e.element.id + "_downloadForm", attrs: { action: n, method: "post", name: "downloadForm", download: "" } }), s = M("input", { id: e.element.id + "_hiddenForm", attrs: { name: "downloadInput", value: JSON.stringify(r), type: "hidden" } }); o.appendChild(s), e.element.appendChild(o), document.forms.namedItem("downloadForm").submit(), e.element.removeChild(o) } function Dp(e, t, i, r, o) { var s = function (e, t, i, r, o) { var s = { header: "", content: "", buttons: [], open: null }; switch (t = r && !0 === r.multipleFiles ? "MultipleFileDetails" : t) { case "NewFolder": s.header = zc(e, "Header-NewFolder"), s.content = '<input type="text" value="New folder" id="newname"><div class="e-fe-error"></div>', s.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Create") }, click: function (t) { "keydown" !== t.type && Pp(e) } }], s.open = function (e) { var t = N("#newname", e.dialogObj.element); t.parentElement.classList.contains("e-control-wrapper") || Ip(t, zc(e, "Content-NewFolder")); t.parentElement.nextElementSibling.innerHTML = "", t.oninput = function () { Op(e, t) }, t.onkeyup = function (t) { var i = Bp(t); 13 === i && Pp(e) }, function (e) { var t = N("#newname", e.dialogObj.element); t.focus(), t.value = ""; var i = t.value.length; t.setSelectionRange(0, i) }(e) }.bind(this, e); break; case "Delete": e.selectedItems.length > 1 ? (s.content = ("<div>" + zc(e, "Content-Multiple-Delete") + "</div>").replace("{0}", e.selectedItems.length.toString()), s.header = zc(e, "Header-Multiple-Delete")) : (s.content = "<div>" + zc(e, "Content-Delete") + "</div>", s.header = zc(e, "Header-Delete")), s.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Yes") }, click: function (t) { !function (e) { e.dialogObj.hide(), e.notify(t3, {}) }(e) } }, { buttonModel: { content: zc(e, "Button-No") }, click: function () { e.dialogObj.hide() } }]; break; case "Rename": s.header = zc(e, "Header-Rename"), s.content = '<input type="text" class="e-input" id="rename"><div class="e-fe-error"></div>', s.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Save") }, click: function (t) { "keydown" !== t.type && Np(e) } }], s.open = function (e) { var t = N("#rename", e.dialogObj.element); t.parentElement.classList.contains("e-control-wrapper") || Ip(t, zc(e, "Content-Rename")); t.parentElement.nextElementSibling.innerHTML = "", t.oninput = function () { Op(e, t) }, t.onkeyup = function (t) { var i = Bp(t); 13 === i && Np(e) }, function (e, t) { t.focus(), t.value = e.currentItemText, e.isFile && e.isFile && -1 !== t.value.indexOf(".") ? t.setSelectionRange(0, t.value.lastIndexOf(".")) : t.setSelectionRange(0, t.value.length) }(e, t) }.bind(this, e); break; case "details": var a = new Gw, l = a.formatDate(new Date(r.modified), { format: "MMMM dd, yyyy HH:mm:ss" }), h = ""; d(r.permission) || (h = "<tr><td>" + zc(e, "Permission") + '</td><td class="' + G2 + '" >' + function (e) { for (var t = "", i = Object.keys(e), r = 0; r < i.length; r++)t += (0 === r ? "" : ", ") + i[r] + ": " + n(i[r], e); return t }(r.permission) + "</td></tr>"), s.header = r.name, s.content = "<table><tr><td>" + zc(e, "Type") + '</td><td class="' + G2 + '" title="' + (r.isFile ? "File" : "Folder") + '">' + (r.isFile ? "File" : "Folder") + "</td></tr><tr><td>" + zc(e, "Size") + '</td><td><span class="' + G2 + '" title ="' + r.size + '">' + r.size + "</span></td></tr><tr><td>" + zc(e, "Location") + '</td><td class="' + G2 + '" title="' + r.location + '">' + r.location + "</td></tr><tr><td>" + zc(e, "Modified") + '</td><td class="' + G2 + '" >' + l + "</td></tr>" + h + "</table>", s.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Ok") }, click: function (t) { e.dialogObj.hide() } }]; break; case "MultipleFileDetails": var c = r.name.split(",").map(function (e) { var t = e.indexOf(".") + 1; return 0 === t ? "Folder" : e.substr(t).replace(" ", "") }), p = c.every(function (e, t, i) { return e === i[0] }) ? "Folder" === c[0] ? "Folder" : c[0].toLocaleUpperCase() + " Type" : "Multiple Types", u = r.location; s.header = r.name, s.content = "<table><tr><td>" + zc(e, "Type") + ':</td><td class="' + G2 + '">' + p + "</td></tr><tr><td>" + zc(e, "Size") + ":</td><td>" + r.size + '<span class="' + G2 + '" title ="' + r.size + '"></span></td></tr><tr><td>' + zc(e, "Location") + ':</td><td class="' + G2 + '" title="' + u + '">' + u + "</td></tr></table>", s.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Ok") }, click: function (t) { "keydown" !== t.type && e.dialogObj.hide() } }]; break; case "Error": var g = i; "401" === g.error.code ? s.header = zc(e, "Access-Denied") : s.header = zc(e, "Error"), s.content = '<div class="' + _2 + '">' + g.error.message + "</div>", s.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Ok") }, click: function (t) { e.dialogObj.hide() } }] }return s }(e, t, i, r); d(e.dialogObj) ? (e.dialogObj = new $M({ beforeOpen: function (e) { kp(O(".e-btn", e.dialogObj.element)) }.bind(this, e), header: s.header, content: s.content, buttons: s.buttons, animationSettings: { effect: "None" }, showCloseIcon: !0, closeOnEscape: !0, visible: !0, isModal: !0, target: "#" + e.element.id, width: "350px", open: s.open, close: s.close, enableRtl: e.enableRtl, locale: e.locale }), e.dialogObj.isStringTemplate = !0, e.dialogObj.appendTo("#" + e.element.id + H4)) : function (e, t) { e.dialogObj.header = t.header, e.dialogObj.content = t.content, e.dialogObj.buttons = t.buttons, e.dialogObj.enableRtl = e.enableRtl, e.dialogObj.open = t.open, e.dialogObj.close = t.close, e.dialogObj.dataBind(), e.dialogObj.show() }(e, s) } function Ap(e, t, i, r) { var o = function (e, t, i, r) { var o = { header: "", content: "", buttons: [], open: null, close: null }; switch (t) { case "Extension": o.header = zc(e, "Header-Rename-Confirmation"), o.content = "<div>" + zc(e, "Content-Rename-Confirmation") + "</div>", o.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Yes") }, click: function () { e.extDialogObj.hide(), cp(e, r, e.renameText) } }, { buttonModel: { content: zc(e, "Button-No") }, click: function () { e.extDialogObj.hide(), e.dialogObj.hide() } }]; break; case "DuplicateItems": e.replaceItems = i; var s = e.replaceItems[e.fileLength], a = s.lastIndexOf("/"); s = -1 === a ? s : s.substring(a), o.header = zc(e, "Header-Duplicate"); var l = "<div>" + zc(e, "Content-Duplicate") + "</div>"; o.content = l.replace("{0}", s), o.close = function () { if (!e.isDropEnd && 0 === e.duplicateItems.length) { var t = { fileDetails: e.droppedObjects }; e.trigger("fileDropped", t), e.isDropEnd = e.isDragDrop = !1 } }, o.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Yes") }, click: function () { if (e.duplicateItems.push(e.replaceItems[e.fileLength]), e.duplicateRecords.push(function (e, t) { for (var i = null, r = e.isDragDrop ? e.dragData : e.actionRecords, o = 0; o < r.length; o++)if (n("name", r[o]) === t) { i = r[o]; break } return i }(e, e.replaceItems[e.fileLength])), e.fileLength++ , i[e.fileLength]) { var t = e.replaceItems[e.fileLength], r = t.lastIndexOf("/"); t = -1 === r ? t : t.substring(r), e.extDialogObj.content = l.replace("{0}", t), e.extDialogObj.show() } else { e.extDialogObj.hide(); var o = e.isDragDrop ? e.dragPath : e.targetPath, s = e.isDragDrop ? e.dropPath : "" === e.folderPath ? e.path : e.folderPath, a = e.isDragDrop ? "move" : e.fileAction; pp(e, o, e.duplicateItems, s, a, e.duplicateItems, e.duplicateRecords) } } }, { buttonModel: { content: zc(e, "Button-No") }, click: function () { if (e.fileLength++ , i[e.fileLength]) { var t = e.replaceItems[e.fileLength], n = t.lastIndexOf("/"); t = -1 === n ? t : t.substring(n), e.extDialogObj.content = l.replace("{0}", t), e.extDialogObj.show() } else if (e.extDialogObj.hide(), 0 !== e.duplicateItems.length) { var r = e.isDragDrop ? "move" : e.fileAction, o = e.isDragDrop ? e.dragPath : e.targetPath, s = e.isDragDrop ? e.dropPath : "" === e.folderPath ? e.path : e.folderPath; pp(e, o, e.duplicateItems, s, r, e.duplicateItems, e.duplicateRecords) } } }]; break; case "UploadRetry": o.header = zc(e, "Header-Retry"), o.content = e.retryFiles[0].name + '<div class="e-fe-retrycontent">' + zc(e, "Content-Retry") + "</div>", o.open = function (e, t) { e.isRetryOpened = !0; var i = N(".e-dlg-content", n("element", t)), r = e.createElement("div", { className: "e-dlg-checkbox" }), o = e.createElement("input", { id: e.element.id + "_applyall" }); r.appendChild(o), i.appendChild(r); new xL({ label: zc(e, "ApplyAll-Label"), change: function (t) { e.isApplySame = t.checked } }).appendTo("#" + e.element.id + "_applyall") }.bind(this, e), o.close = function () { e.isRetryOpened = !1, jp(e) }, o.buttons = [{ buttonModel: { isPrimary: !0, content: zc(e, "Button-Keep-Both") }, click: function () { Ep(e, !0) } }, { buttonModel: { isPrimary: !0, content: zc(e, "Button-Replace") }, click: function () { Ep(e, !1) } }, { buttonModel: { isPrimary: !0, content: zc(e, "Button-Skip") }, click: function () { e.isApplySame ? (e.retryFiles = [], jp(e)) : (e.retryFiles.splice(0, 1), 0 !== e.retryFiles.length ? Ap(e, "UploadRetry") : jp(e)) } }] }return o }(e, t, i, r); e.isApplySame = !1, d(e.extDialogObj) ? (e.extDialogObj = new $M({ beforeOpen: function (e) { kp(O(".e-btn", e.extDialogObj.element)) }.bind(this, e), content: o.content, header: o.header, closeOnEscape: !0, animationSettings: { effect: "None" }, target: "#" + e.element.id, enableRtl: e.enableRtl, showCloseIcon: !0, isModal: !0, width: 350, buttons: o.buttons, open: o.open, close: o.close, locale: e.locale }), e.extDialogObj.isStringTemplate = !0, e.extDialogObj.appendTo("#" + e.element.id + Y4)) : (e.extDialogObj.header = o.header, e.extDialogObj.close = o.close, e.extDialogObj.open = o.open, e.extDialogObj.close = o.close, e.extDialogObj.content = o.content, e.extDialogObj.buttons = o.buttons, e.extDialogObj.enableRtl = e.enableRtl, e.extDialogObj.locale = e.locale, e.extDialogObj.dataBind(), e.extDialogObj.show()) } function Ep(e, t) { e.isApplySame ? (t ? function (e) { for (; 0 !== e.retryFiles.length;)e.retryArgs.push({ action: "KeepBoth", file: e.retryFiles[0] }), e.uploadObj.retry(e.retryFiles[0]), e.retryFiles.splice(0, 1) }(e) : function (e) { for (; 0 !== e.retryFiles.length;)e.retryArgs.push({ action: "replace", file: e.retryFiles[0] }), e.uploadObj.retry(e.retryFiles[0]), e.retryFiles.splice(0, 1) }(e), jp(e)) : (e.retryArgs.push({ action: t ? "keepboth" : "replace", file: e.retryFiles[0] }), e.uploadObj.retry(e.retryFiles[0]), e.retryFiles.splice(0, 1), 0 !== e.retryFiles.length ? Ap(e, "UploadRetry") : jp(e)) } function jp(e) { var t = !0; e.isRetryOpened ? e.isRetryOpened = !1 : t = !1; var i = N(".e-dlg-checkbox", e.extDialogObj.element); i && k(i), t ? e.extDialogObj.hide() : e.retryFiles = [] } function Ip(e, t) { eS.createInput({ element: e, properties: { placeholder: t } }) } function kp(e) { for (var t = function (t) { e[t].onkeydown = function (e) { 13 === e.keyCode && e.preventDefault() }, e[t].onkeyup = function (i) { 13 === i.keyCode && e[t].click() } }, i = 0; i < e.length; i++)t(i) } function Pp(e) { var t = N("#newname", e.dialogObj.element); Rp(e, t), "" === t.parentElement.nextElementSibling.innerHTML && function (e, t) { mp(e, { action: "create", path: e.path, name: t, data: e.itemData }, vp) }(e, t.value) } function Np(e) { var t = N("#rename", e.dialogObj.element); if (Rp(e, t), "" === t.parentElement.nextElementSibling.innerHTML) { var i = t.value; if (e.renameText = t.value, e.currentItemText !== i) { var r = "navigationpane" === e.activeModule ? Yc(e.path) : e.path; if (e.renamedId = n("id", e.itemData[0]), e.isFile) { e.currentItemText.substr(e.currentItemText.lastIndexOf(".")) !== i.substr(i.lastIndexOf(".")) ? Ap(e, "Extension", null, r) : cp(e, r, i) } else cp(e, r, i) } else e.dialogObj.hide() } } function Op(e, t) { /[/\\|*?"<>:]/.test(t.value) ? zp(e, t) : "" === t.value ? t.parentElement.nextElementSibling.innerHTML = zc(e, "Validation-Empty") : t.parentElement.nextElementSibling.innerHTML = "" } function Rp(e, t) { Op(e, t); var i = t.value.length - 1; "" === t.value || t.value.lastIndexOf(".") !== i && t.value.lastIndexOf(" ") !== i || zp(e, t) } function zp(e, t) { var i = zc(e, "Validation-Invalid").replace("{0}", '"' + t.value + '"'); t.parentElement.nextElementSibling.innerHTML = i } function Bp(e) { return e.keyCode ? e.keyCode : e.which ? e.which : e.charCode } function Fp(e, t, i) { var n = M("div", { className: "e-image-wrap" }), r = M("img", { className: "e-image", attrs: { src: i, alt: t } }); n.appendChild(r), d(e.viewerObj) ? (e.viewerObj = new $M({ header: t, content: n, animationSettings: { effect: "None" }, showCloseIcon: !0, closeOnEscape: !0, visible: !0, isModal: !0, width: "350px", height: "350px", target: "#" + e.element.id, locale: e.locale, enableResize: !0, allowDragging: !0, position: { X: "center", Y: "center" }, enableRtl: e.enableRtl, open: function (e) { setTimeout(function () { e.viewerObj && e.viewerObj.element.focus() }), Vp(e) }.bind(this, e), resizing: Vp.bind(this, e), resizeStop: Vp.bind(this, e) }), e.viewerObj.isStringTemplate = !0, e.viewerObj.appendTo("#" + e.element.id + _4)) : (e.viewerObj.refresh(), e.viewerObj.header = t, e.viewerObj.content = n, e.viewerObj.enableRtl = e.enableRtl, e.viewerObj.dataBind(), e.viewerObj.show()) } function Vp(e) { var t = N(".e-dlg-content", e.viewerObj.element), i = N(".e-image-wrap", e.viewerObj.element), n = window.getComputedStyle(t, null), r = n ? 2 * parseFloat(n.paddingRight) : 36, o = n ? 2 * parseFloat(n.paddingBottom) : 20; i.style.width = t.offsetWidth - r + "px", i.style.height = t.offsetHeight - o + "px" } function Wp() { return ["aggregates", "allowGrouping", "allowFiltering", "allowMultiSorting", "allowReordering", "allowSorting", "allowTextWrap", "childGrid", "columns", "currentViewData", "dataSource", "detailTemplate", "enableAltRow", "enableColumnVirtualization", "filterSettings", "gridLines", "groupSettings", "height", "locale", "pageSettings", "printMode", "query", "queryString", "enableRtl", "rowHeight", "rowTemplate", "sortSettings", "textWrapSettings", "allowPaging", "hierarchyPrintMode", "searchSettings"] } function Hp(e, t) { return e.prototype && t in e.prototype } function _p(e, t, i) { return d(e) || "" === e ? "" : JD.getObject(e, t) } function Yp(e, t) { requestAnimationFrame(function () { try { t(null, e()) } catch (e) { t(e) } }) } function Up(e) { for (var t = [], i = e.vRows, n = 0; n < i.length; n++)i[n].isDataRow ? t.push(i[n]) : i[n].isDataRow || (t.push(i[n]), !i[n].isExpand && i[n].isCaptionRow && (n += qp(i[n], e))); e.vcRows = t } function qp(e, t) { B8 = 0; var i = "gSummary", n = t.groupSettings.columns.length, r = e[i], o = 0, s = "aggregatesCount"; if (r === e.data.count) return t.groupSettings.columns.length && !d(e[s]) ? 1 !== t.groupSettings.columns.length && e[s] ? B8 += 0 !== e.indent && r < 2 ? e[i] * (n - e.indent + (n - e.indent) * e[s]) : e[i] * (n - e.indent + (n - e.indent - 1) * e[s]) + e[s] : e[s] && 1 === t.groupSettings.columns.length && (B8 += e[i] * (n - e.indent) + e[s]) : t.groupSettings.columns.length && (1 !== t.groupSettings.columns.length ? B8 += e[i] * (t.groupSettings.columns.length - e.indent) : B8 += e[i]), B8; for (var a = 0, l = e.data.items.length; a < l; a++) { var h = e.data.items[a]; B8 += h.items.length + (n === t.columns.length || d(h.items.records) ? 0 : h.items.records.length), o += d(h.items.records) || d(e[s]) ? h.items.length : h.items.records.length, h.items.GroupGuid && 0 !== h.items.childLevels && Gp(h) } return B8 += e.data.items.length, d(e[s]) || e[s] && B8 && 0 !== o && (B8 += (B8 - o) * e[s] + e[s]), B8 } function Gp(e) { for (var t = 0, i = e.items.length; t < i; t++) { var n = e.items[t]; B8 += n.count, 0 !== n.items.childLevels && Gp(n) } } function Qp(e, t) { for (var i = [], n = 0, r = e.length; n < r; n++) { var o = t(e[n], n); d(o) || i.push(o) } return i } function Xp(e) { for (var t = [], i = 0; i < e.length; i++)t.push(h({}, iu(e[i]), {}, !0)); return t } function Jp(e) { if (e) try { if (document.querySelectorAll(e).length) return ce(document.querySelector(e).innerHTML.trim()) } catch (t) { return ce(e) } } function Zp(e, t) { var i = {}, n = ["style", "class"]; h(i, t, {}), "style" in i && (z(e, i[n[0]]), delete i[n[0]]), "class" in i && (S([e], i[n[1]]), delete i[n[1]]), P(e, i) } function Kp(e, t, i, n) { var r = h(e, t, i); return Object.keys(r).forEach(function (e, t) { n && -1 !== n.indexOf(e) && delete r[e] }), r } function $p(e, t) { void 0 === t && (t = 0); for (var i = 0, n = e.length; i < n; i++)e[i].columns ? (e[i].index = d(e[i].index) ? t : e[i].index, t++ , t = $p(e[i].columns, t)) : (e[i].index = d(e[i].index) ? t : e[i].index, t++); return t } function eu(e, t) { for (var i = 0, r = e.length; i < r; i++) { var o = void 0; "string" == typeof e[i] ? o = new P5({ field: e[i] }) : e[i] instanceof P5 ? o = e[i] : e[i].columns ? (e[i].columns = eu(e[i].columns), o = new P5(e[i])) : o = new P5(e[i]), o.headerText = d(o.headerText) ? o.foreignKeyValue || o.field || "" : o.headerText, o.foreignKeyField = o.foreignKeyField || o.field, o.valueAccessor = ("string" == typeof o.valueAccessor ? n(o.valueAccessor, window) : o.valueAccessor) || _p, o.width = t && d(o.width) ? 200 : o.width, d(o.visible) && (o.visible = !0), e[i] = o } return e } function tu(e, t, i) { var n, r = e.querySelector("span"), o = e.parentElement.getBoundingClientRect(), s = t.target.getBoundingClientRect(); r.className = i, e.style.display = "", n = (d(t.clientY) ? t.changedTouches[0].clientY : t.clientY) > e.offsetHeight + 10, e.style.top = s.top - o.top + (n ? -(e.offsetHeight + 10) : e.offsetHeight + 10) + "px", e.style.left = function (e, t, i, n) { var r = e.offsetWidth / 2, o = lu(t).x; return o - i.left < r ? i.left - n : i.right - o < r ? i.right - n - 2 * r : o - n - r }(e, t, s, o.left) + "px", n ? (e.querySelector(".e-downtail").style.display = "", e.querySelector(".e-uptail").style.display = "none") : (e.querySelector(".e-downtail").style.display = "none", e.querySelector(".e-uptail").style.display = "") } function iu(e) { return e instanceof ww ? n("properties", e) : e } function nu(e, t, i) { for (var n = e; n && (i ? n.id !== t : !n.classList.contains(t));)n = n.parentElement; return n } function ru(e, t) { for (var i = -1, n = 0, r = t.length; n < r; n++)if (t[n].isEqualNode(e)) { i = n; break } return i } function ou(e, t) { for (var i = 0, n = t.length; i < n; i++)if (t[i] === e) return i; return -1 } function su(e) { for (var t = [], i = 0, n = e.length; i < n; i++)e[i].hasOwnProperty("properties") ? t.push(e[i].properties) : t.push(e[i]); return t } function au(e, t) { for (var i = [].slice.call(e.querySelectorAll(t)), n = 0; n < i.length; n++)k(i[n]) } function lu(e) { var t = {}; return t.x = d(e.clientX) ? e.changedTouches[0].clientX : e.clientX, t.y = d(e.clientY) ? e.changedTouches[0].clientY : e.clientY, t } function hu(e) { return e + F8++ } function du(e, t) { for (var i = 0, n = t.length; i < n; i++)n === t.length ? e.appendChild(t[i]) : e.appendChild(t[0]); return e } function cu(e, t, i) { for (var n = e, r = []; n;)(i ? n.id === t : n.classList.contains(t)) && r.push(n), n = n.parentElement; return r } function pu(e, t, i, r) { if ("Custom" === e) { var o = i.customAggregate; return "string" == typeof o && (o = n(o, window)), o ? o.call(r, t, i) : "" } return i.field in t || t instanceof Array ? JD.aggregates[e.toLowerCase()](t, i.field) : null } function uu() { if (null !== V8) return V8; var e = document.createElement("div"), t = 0; return e.style.cssText = "width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;", document.body.appendChild(e), t = e.offsetWidth - e.clientWidth | 0, document.body.removeChild(e), V8 = t } function gu(e) { if (void 0 !== I1) return I1; var t = M("table", { className: "e-table", styles: "visibility: hidden" }); t.innerHTML = '<tr><td class="e-rowcell">A<td></tr>', e.appendChild(t); var i = t.querySelector("td").getBoundingClientRect(); return e.removeChild(t), I1 = Math.ceil(i.height) } function mu(e) { return e.split(".").length > 1 } function fu(e) { return void 0 === e && (e = ""), e.replace(/\./g, "___") } function yu(e) { return void 0 === e && (e = ""), e.replace(/___/g, ".") } function vu(e, t, i) { var n = nu(i, "e-row"), r = !n || n && !n.classList.contains("e-insertedrow"); return "beginEdit" === t && r ? !(e.isIdentity || e.isPrimaryKey || !e.allowEditing) : ("add" !== t || !e.isIdentity) && !(r && !e.allowEditing && !e.isIdentity && !e.isPrimaryKey) } function wu(e) { var t = e.element.querySelector("#" + e.element.id + "EditConfirm"); return "Batch" === e.editSettings.mode && e.element.querySelectorAll(".e-updatedtd").length && e.editSettings.showConfirmDialog && (!t || t.classList.contains("e-popup-close")) } function bu(e, t) { e = e instanceof Array ? e : [e]; for (var i = 0; i < e.length; i++)t ? e[i].classList.add("e-wrap") : e[i].classList.remove("e-wrap") } function Cu(e, t) { var i = e.getService("valueFormatter"); switch (t.type) { case "date": t.setFormatter(i.getFormatFunction({ type: "date", skeleton: t.format })), t.setParser(i.getParserFunction({ type: "date", skeleton: t.format })); break; case "datetime": t.setFormatter(i.getFormatFunction({ type: "dateTime", skeleton: t.format })), t.setParser(i.getParserFunction({ type: "dateTime", skeleton: t.format })); break; case "number": t.setFormatter(i.getFormatFunction({ format: t.format })), t.setParser(i.getParserFunction({ format: t.format })) } } function Lu(e, t) { for (var i = [], n = 2; n < arguments.length; n++)i[n - 2] = arguments[n]; for (var r = 0, o = e.length; r < o; r++)t ? (B(e[r], i.slice(), []), e[r].setAttribute("aria-selected", "true")) : (B(e[r], [], i.slice()), e[r].removeAttribute("aria-selected")) } function Mu(e) { for (var t = {}, i = [], n = 0; n < e.length; n++)e[n] in t || (i.push(e[n].toString()), t[e[n]] = 1); return i } function Su(e, t, i) { var n = t.element.style.display; t.element.style.display = "block"; var r, o = t.width; if (i.enableRtl) { r = Ie(e, "left", "bottom"), t.element.style.top = r.top + e.getBoundingClientRect().height - 35 + "px", t.element.style.display = n; s = r.left - o + e.clientWidth; t.element.style.left = s < 1 ? o + s + -16 + "px" : s - 16 + "px" } else { r = je(e, t.element), t.element.style.display = n, t.element.style.top = r.top + e.getBoundingClientRect().height - 5 + "px"; var s = r.left - o + e.clientWidth; t.element.style.left = s < 1 ? o + s - 16 + "px" : s + -4 + "px" } } function xu(e, t) { e.popup.element.style.zIndex = (t.zIndex + 1).toString() } function Tu(e) { var t = e.querySelector(".e-frame"); t.classList.contains("e-check") ? B(t, ["e-uncheck"], ["e-check"]) : B(t, ["e-check"], ["e-uncheck"]) } function Du(e, t, i) { var n = M("div", { className: i }); return n.appendChild(t), n.setAttribute("uid", e), n } function Au(e, t) { x([e], ["e-check", "e-stop", "e-uncheck"]), t ? e.classList.add("e-check") : e.classList.add("e-uncheck") } function Eu(e, t, i) { t.forEach(function (t) { r(t.field, ju(t, i), e.foreignKeyData) }), e.cells.forEach(function (t) { t.isForeignKey && r("foreignKeyData", n(t.column.field, e.foreignKeyData), t) }) } function ju(e, t, i, n) { var r = e.foreignKeyField, o = d(i) ? _p(e.field, t) : i; o = d(o) ? "" : o; var s = new GD, a = n || (e.dataSource instanceof aA && e.dataSource.dataSource.json.length ? e.dataSource.dataSource.json : e.columnData); return o.getDay ? s.where(ku({ field: r, operator: "equal", value: o, matchCase: !1 })) : s.where(r, "==", o, !1), new aA(a).executeLocal(s) } function Iu(e, t) { var i; return t.some(function (t) { return i = t, t.foreignKeyValue === e }) && i } function ku(e, t) { var i, n, r, o = h({}, iu(e)), s = h({}, iu(e)); if (null === e.value) return i = new QD(o.field, o.operator, o.value, !1); var a = new Date(e.value); if ("equal" === e.operator || "notequal" === e.operator) { "datetime" === t ? (n = new Date(a.setSeconds(a.getSeconds() - 1)), r = new Date(a.setSeconds(a.getSeconds() + 2)), e.value = new Date(a.setSeconds(r.getSeconds() - 1))) : (n = new Date(a.setHours(0) - 1), r = new Date(a.setHours(24))), o.value = n, s.value = r, "equal" === e.operator ? (o.operator = "greaterthan", s.operator = "lessthan") : "notequal" === e.operator && (o.operator = "lessthanorequal", s.operator = "greaterthanorequal"); var l = new QD(o.field, o.operator, o.value, !1), d = new QD(s.field, s.operator, s.value, !1); i = "equal" === e.operator ? l.and(d) : l.or(d) } else { "string" == typeof o.value && (o.value = new Date(o.value)); i = new QD(o.field, o.operator, o.value, !1) } return e.setProperties ? e.setProperties({ ejpredicate: i }, !0) : e.ejpredicate = i, i } function Pu(e, t) { for (var i = e.cloneNode(!0), n = 0; n < t; n++)i.removeChild(i.children[0]); n = t; for (var r = e.childElementCount; n < r; n++)e.removeChild(e.children[e.childElementCount - 1]); return i } function Nu(e) { return e.enableVirtualization && e.groupSettings.columns.length > 0 && e.isVirtualAdaptive } function Ou(e, t) { if (void 0 === e && (e = ""), e) { for (var i = t, n = e.split("."), r = 0; r < n.length && !d(i); r++)i = i[n[r]]; return i } } function Ru(e, t) { var i = new Gw; return "date" === t ? "object" == typeof e ? i.getDatePattern({ type: e.type ? e.type : "date", format: e.format }, !1) : i.getDatePattern({ type: "date", skeleton: e }, !1) : "object" == typeof e ? i.getDatePattern({ type: e.type ? e.type : "dateTime", format: e.format }, !1) : i.getDatePattern({ type: "dateTime", skeleton: e }, !1) } function zu(e, t) { for (var i = {}, n = 0, r = e.getRowsObject(); n < r.length; n++) { var o = r[n]; if (o.isExpand && !o.isDetailRow) { var s = e.allowPaging && "AllPages" === e.printMode ? o.index + e.pageSettings.currentPage * e.pageSettings.pageSize - e.pageSettings.pageSize : o.index; i[s] = {}, i[s].isExpand = !0, i[s].gridModel = Bu(o.childGrid, t), i[s].gridModel.query = e.childGrid.query } } return i } function Bu(e, t) { void 0 === t && (t = "Expanded"); var i = {}; if (!e) return i; for (var n = 0, r = z8.printGridProp; n < r.length; n++) { var o = r[n]; i[o] = "columns" === o ? su(e[o]) : "allowPaging" === o ? "CurrentPage" === e.printMode : iu(e[o]) } return e.childGrid && "None" !== t && (i.expandedRows = zu(e, t)), i } function Fu(e, t, i, n) { var r = e || {}, o = arguments.length; n && (o -= 1); for (var a = function (e) { if (!l[e]) return "continue"; var t = l[e]; (Object.keys(Object.getPrototypeOf(t)).length ? Object.keys(t).concat(function (e) { var t = []; for (; Object.getPrototypeOf(e) && Object.keys(Object.getPrototypeOf(e)).length;)t = t.concat(Object.keys(Object.getPrototypeOf(e))), e = Object.getPrototypeOf(e); return t }(t)) : Object.keys(t)).forEach(function (e) { var i, o = r[e], a = t[e]; n && (s(a) || Array.isArray(a)) ? s(a) ? (i = o || {}, r[e] = h({}, i, a, n)) : (i = o || [], r[e] = h([], i, a, n)) : r[e] = a }) }, l = arguments, d = 1; d < o; d++)a(d); return r } function Vu(e) { for (var t = 0, i = 0; i < e.length; i++) { var n = Wu(e[i], 0); t < n && (t = n) } return t + 1 } function Wu(e, t) { var i = t, n = []; if (e.columns) { t++; for (var r = 0; r < e.columns.length; r++)n[r] = Wu(e.columns[r], t); for (var o = 0; o < n.length; o++)i < n[o] && (i = n[o]); t = i } return t } function Hu(e, t) { for (var i = 0; i < t.length; i++)t[i].uid = t[i].isForeignKey ? Iu(t[i].field, e.getForeignKeyColumns()).uid : e.getColumnByField(t[i].field).uid } function _u(e, t, i, n) { n && e ? e.removeAttribute(t) : e && e.setAttribute(t, i) } function Yu(e, t) { e.forEach(function (e) { e.columns.forEach(function (i) { t(i, e) }) }) } function Uu(e, t, i) { var n = "Dialog" !== t, r = Ru(e.column.format, e.column.type), o = Ou(e.column.field, e.rowData); return o = o ? new Date(o) : null, { floatLabelType: n ? "Never" : "Always", value: o, format: r, placeholder: n ? "" : e.column.headerText, enableRtl: i, enabled: vu(e.column, e.requestType, e.element) } } function qu(e, t, i) { for (var n = e; n && (i ? n.id !== t : !n.classList.contains(t));)n = n.parentElement; return n } function Gu(e) { return d(e.startDate) && d(e.endDate) && d(e.duration) ? null : !(d(e.startDate) || d(e.endDate) || d(e.duration)) } function Qu(e) { for (var t = {}, i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; t[e[r]] = r } return t } function Xu(e) { if (e instanceof aA) { var t = e.adaptor; return t instanceof tA || t instanceof nA || t instanceof rA || t instanceof sA || t instanceof eA } return !1 } function Ju(e) { for (var t = [], i = 0; i < e.length; i++) { var n = h({}, e[i].taskData, {}, !0); t.push(n) } return t } function Zu(e, t) { for (var i, n = 0; n < t.length; n++)i = new RegExp("\\{" + n + "\\}", "gm"), e = e.replace(i, t[n].toString()); return e } function Ku(e, t, i, r) { for (var o = -1, s = 0; s < i.length; s++)if (n(t, i[s]) === n(t, e) && d(r) || !d(r) && n(t, i[s]) === n(t, e) && n(r, i[s]) === n(r, e)) { o = s; break } return o } function $u(e) { if (e.dataSource instanceof aA) { var t = e.dataSource.adaptor; return t instanceof tA || t instanceof nA || t instanceof rA || t instanceof sA || t instanceof eA } return !1 } function eg(e) { var t; t = []; for (var i = 0, n = Object.keys(e).length; i < n; i++) { Ou("hasChildRecords", e[i]) && t.push(e[i]) } return t } function tg(e, t, i) { var n, r = d(t.parentItem) ? null : sg(e, t.parentItem.uniqueID); return null == r || (!e.initialRender || d(r[e.expandStateMapping]) || r[e.expandStateMapping] ? !1 !== r.expanded && (!r.parentItem || ((n = sg(e, r.parentItem.uniqueID)) && e.initialRender && !d(n[e.expandStateMapping]) && !n[e.expandStateMapping] ? (n.expanded = !1, !1) : (!n || !1 !== n.expanded) && (!n || tg(e, n, i)))) : (r.expanded = !1, !1)) } function ig(e) { var t = []; if (d(e) || !e.hasChildRecords) return []; if (!d(e.childRecords)) for (var i = e.childRecords, n = 0, r = Object.keys(i).length; n < r; n++)t.push(i[n]), i[n].hasChildRecords && (t = t.concat(ig(i[n]))); return t } function ng(e) { if ($u(e)) { return !d(e.dataSource.ready) } return !0 } function rg(e) { for (var t, i, n = [], r = 0; r < e.length; r++) { i = Object.keys(e[r]), t = {}; for (var o = 0; o < i.length; o++)t[i[o]] = e[r][i[o]]; n.push(t) } return n } function og(e) { return delete e.hasChildRecords, delete e.childRecords, delete e.index, delete e.parentItem, delete e.level, e } function sg(e, t, i) { if (i) { return e.uniqueIDFilterCollection[t] } return e.uniqueIDCollection[t] } function ag(e, t, i, n, r, o, s) { var a, l, c = e.value, p = e.action, u = t.grid.getPrimaryKeyFieldNames()[0], g = t.dataSource instanceof aA ? t.dataSource.dataSource.json : t.dataSource, m = [], f = c, y = !1; t.grid.getCurrentViewRecords(); if ("add" === p) { var v = function (e, t, i, n, r, o, s) { var a, l = !1, c = i.grid.getCurrentViewRecords(); switch (a = h({}, e.value), a = og(a), i.editSettings.newRowPosition) { case "Top": t.unshift(a), l = !0; break; case "Bottom": t.push(a), l = !0; break; case "Above": a = d(s) ? c[r + 1] : s; break; case "Below": case "Child": a = d(s) ? c[r] : s, -1 === o && (t.unshift(a), l = !0) }return { value: a, isSkip: l } }(e, g, t, 0, n, r, s); c = v.value, y = v.isSkip } if (c instanceof Array ? m = rg(c) : m.push(h({}, c)), !y && ("add" !== p || "Top" !== t.editSettings.newRowPosition && "Bottom" !== t.editSettings.newRowPosition)) for (var w = 0; w < m.length; w++) { var b = Object.keys(m[w].taskData); a = g.length; for (var C = function () { if (g[a][u] === m[w][u]) { if ("delete" !== p) { if ("edit" === p) { for (l = 0; l < b.length; l++)if (g[a].hasOwnProperty(b[l]) && ("Cell" !== t.editSettings.mode || b[l] === o)) { sg(t, m[w].uniqueID).taskData[b[l]] = g[a][b[l]] = m[w][b[l]] } } else if ("add" === p) { var e = void 0; "Child" === t.editSettings.newRowPosition ? i ? (f.taskData[t.parentIdMapping] = g[a][t.idMapping], g.splice(a + 1, 0, f.taskData)) : (g[a].hasOwnProperty(t.childMapping) || (g[a][t.childMapping] = []), g[a][t.childMapping].push(f.taskData), hg(u, g[a], p, t, i, f)) : "Below" === t.editSettings.newRowPosition ? (g.splice(a + 1, 0, f.taskData), hg(u, g[a], p, t, i, f)) : n ? "Above" === t.editSettings.newRowPosition && (g.splice(a, 0, f.taskData), hg(u, g[a], p, t, i, f)) : (e = 0, g.splice(e, 0, f.taskData)) } return "break" } var r = g[a]; if (g.splice(a, 1), i) { if (!d(r[t.parentIdMapping])) for (var s = t.flatData.filter(function (e) { return e[t.idMapping] === r[t.parentIdMapping] })[0], h = s ? s[t.childMapping] : [], c = h.length - 1; c >= 0; c--)if (h[c][t.idMapping] === r[t.idMapping]) { h.splice(c, 1), h.length || (s.hasChildRecords = !1, hg(u, s, p, t, i)); break } return "break" } } else d(g[a][t.childMapping]) || lg(g[a][t.childMapping], m[w], p, u, t, i, f, o) && hg(u, g[a], p, t, i) }; a-- && a >= 0;) { if ("break" === C()) break } } } function lg(e, t, i, n, r, o, s, a) { for (var l = !1, h = e.length; h-- && h >= 0;)if (e[h][n] === t[n] || o && e[h][r.parentIdMapping] === t[r.idMapping]) { if ("edit" === i) { for (var c = Object.keys(t), p = sg(r, t.uniqueID), u = 0; u < c.length; u++)!e[h].hasOwnProperty(c[u]) || "Cell" === r.editSettings.mode && c[u] !== a || (p[c[u]] = p.taskData[c[u]] = e[h][c[u]] = t[c[u]]); break } if ("add" === i) "Child" === r.editSettings.newRowPosition ? o ? (s[r.parentIdMapping] = e[h][r.idMapping], e.splice(h + 1, 0, s), hg(n, e[h], i, r, o, s)) : (e[h].hasOwnProperty(r.childMapping) || (e[h][r.childMapping] = []), e[h][r.childMapping].push(s.taskData), hg(n, e[h], i, r, o, s)) : "Above" === r.editSettings.newRowPosition ? (e.splice(h, 0, s.taskData), hg(n, e[h], i, r, o, s)) : "Below" === r.editSettings.newRowPosition && (e.splice(h + 1, 0, s.taskData), hg(n, e[h], i, r, o, s)); else { e[h].parentItem; e.splice(h, 1), e.length || (l = !0) } } else d(e[h][r.childMapping]) || lg(e[h][r.childMapping], t, i, n, r, o, s, a) && hg(n, e[h], i, r, o); return l } function hg(e, t, i, n, r, o) { if ("Above" !== n.editSettings.newRowPosition && "Below" !== n.editSettings.newRowPosition || "add" !== i || d(o.parentItem)) { var s, a = n.grid.getCurrentViewRecords(); if (a.map(function (i, n) { i[e] !== t[e] || (s = n) }), t = a[s], t.hasChildRecords = !1, "add" === i) { t.expanded = !0, t.hasChildRecords = !0, n.sortSettings.columns.length && d(o) && (o = a.filter(function (e) { return e.parentUniqueID === t.uniqueID ? e : null })); var l = o ? o instanceof Array ? o[0] : o : a[s + 1]; t.hasOwnProperty("childRecords") ? d(o) || t.childRecords.push(o) : t.childRecords = [], -1 === t.childRecords.indexOf(l) && t.childRecords.unshift(l), r && (t.hasOwnProperty(n.childMapping) || (t[n.childMapping] = []), -1 === t[n.childMapping].indexOf(l) && t[n.childMapping].unshift(l)) } for (var h = n.grid.getPrimaryKeyFieldNames()[0], c = n.grid.dataSource instanceof aA ? n.grid.dataSource.dataSource.json : n.grid.dataSource, p = 0; p < c.length; p++)if (c[p][h] === t[h]) { c[p] = t; break } n.grid.setRowData(e, t); var u = n.getRowByIndex(s); n.renderModule.cellRender({ data: t, cell: u.cells[n.treeColumnIndex], column: n.grid.getColumns()[n.treeColumnIndex] }) } else { sg(n, o.parentItem.uniqueID).childRecords.push(o) } } function dg(e, t, i) { for (var n = 0; t.length > n; n++)if (t[n].value === i.subCommand) return e.localeObj.getConstant(t[n].locale); return i.text } function cg(e, t) { var i = -1; return t.some(function (t, n) { return "string" == typeof t && e === t.toLocaleLowerCase() && (i = n, !0) }), i } function pg(e, t) { var i = !1; return e.classList.contains(t) && (i = !0), i } function ug(e, t, i, n) { for (var r, o, s = 0; s < e.length; s++) { if ("value" === i && e[s].value.toLocaleLowerCase() === t.toLocaleLowerCase()) { r = e[s]; break } if ("text" === i && e[s].text.toLocaleLowerCase() === t.toLocaleLowerCase()) { r = e[s]; break } if ("subCommand" === i && e[s].subCommand.toLocaleLowerCase() === t.toLocaleLowerCase()) { r = e[s]; break } } if (!d(r)) switch (n) { case "text": o = r.text; break; case "value": o = r.value; break; case "iconCss": o = r.iconCss }return o } function gg() { var e = !1; return uw.isDevice && uw.isIos && (e = !0), e } function mg(e) { return d(e) ? "" : e } function fg(e, t) { var i = t.getService("rteLocale"), n = Ose[e]; return i.getConstant(n) } function yg(e, t) { for (var i = e.dropDownModule, n = e.args, r = 0, o = Object.keys(e.args); r < o.length; r++)for (var s = o[r], a = 0; a < e.tbItems.length; a++) { var l = e.tbItems[a].subCommand, h = l && l.toLocaleLowerCase(); if (l && h === s || "UL" === l && "unorderedlist" === s || "OL" === l && "orderedlist" === s) if ("boolean" == typeof n[s]) !0 === n[s] ? S([e.tbElements[a]], [ase]) : x([e.tbElements[a]], [ase]); else if (("string" == typeof n[s] || null === n[s]) && cg(s, e.parent.toolbarSettings.items) > -1) { var c = n[s] ? n[s] : "", p = ""; switch (s) { case "formats": if (d(i.formatDropDown) || t || !d(i.formatDropDown) && i.formatDropDown.isDestroyed) return; var u = e.parent.format.types; p = ug(u, c, "subCommand", "text"); var g = d(e.parent.format.default) ? u[0].text : e.parent.format.default; i.formatDropDown.content = '<span style="display: inline-flex;width:' + e.parent.format.width + '" ><span class="e-rte-dropdown-btn-text">' + (d(p) ? g : p) + "</span></span>", i.formatDropDown.dataBind(); break; case "alignments": if (d(i.alignDropDown) || !d(i.alignDropDown) && i.alignDropDown.isDestroyed) return; p = ug(Lse, c, "subCommand", "iconCss"), i.alignDropDown.iconCss = d(p) ? "e-icons e-justify-left" : p, i.alignDropDown.dataBind(); break; case "fontname": if (d(i.fontNameDropDown) || t || !d(i.fontNameDropDown) && i.fontNameDropDown.isDestroyed) return; var m = e.parent.fontFamily.items; p = ug(m, c, "value", "text"); var f = d(e.parent.fontFamily.default) ? m[0].text : e.parent.fontFamily.default, y = d(p) ? f : p; e.tbElements[a].title = y, i.fontNameDropDown.content = '<span style="display: inline-flex;width:' + e.parent.fontFamily.width + '" ><span class="e-rte-dropdown-btn-text">' + y + "</span></span>", i.fontNameDropDown.dataBind(); break; case "fontsize": if (d(i.fontSizeDropDown) || !d(i.fontSizeDropDown) && i.fontSizeDropDown.isDestroyed) return; var v = e.parent.fontSize.items, w = d(e.parent.fontSize.default) ? v[1].text : e.parent.fontSize.default; p = ug(v, "" === c ? w.replace(/\s/g, "") : c, "value", "text"), i.fontSizeDropDown.content = '<span style="display: inline-flex;width:' + e.parent.fontSize.width + '" ><span class="e-rte-dropdown-btn-text">' + mg(p) + "</span></span>", i.fontSizeDropDown.dataBind() } } } } function vg(e) { return "object" == typeof e ? e : [e] } function wg(e, t) { for (var i = [], n = 0; n < e.length; n++)for (var r = 0; r < t.length; r++)if ("Separator" !== t[r].type) { if ("OrderedList" === e[n] && "OL" === t[r].subCommand) { i.push(r); break } if ("UnorderedList" === e[n] && "UL" === t[r].subCommand) { i.push(r); break } if (e[n] === t[r].subCommand) { i.push(r); break } } return i } function bg(e, t) { for (var i = 0, n = wg(vg(Rse), e.toolbarObj.items), r = O("." + tse, e.toolbarObj.element), o = 0, s = Object.keys(t); o < s.length; o++) { var a = s[o], l = r[n[i]]; l && e.toolbarObj.enableItems(l, t[a]), i++ } } function Cg(e, t) { var i = document.createEvent("HTMLEvents"); i.initEvent(t, !1, !0), e.dispatchEvent(i) } function Lg(e) { var t = M("template"); return t.innerHTML = e, t.content instanceof DocumentFragment ? t.content : document.createRange().createContextualFragment(e) } function Mg(e, t) { var i = []; for (t = t.firstChild; t; t = t.nextSibling)3 === t.nodeType ? i.push(t) : i = i.concat(Mg(e, t)); return i } function Sg(e) { for (var t = {}, i = Object.keys(e), n = 0; n < Object.keys(e).length; n++)t[i[n].toLocaleLowerCase()] = e[i[n]]; return t } function xg(e, t) { var i; return null !== e && "" !== e ? (i = t.enableHtmlEncode ? Tg(Dg(e)) : Tg(e), t.setProperties({ value: i }, !0)) : i = t.enableHtmlEncode ? "&lt;p&gt;&lt;br/&gt;&lt;/p&gt;" : "<p><br/></p>", i } function Tg(e) { var t = document.createElement("div"); t.innerHTML = e; var i = t.childNodes; return i.length > 0 && [].slice.call(i).forEach(function (e) { if (e.nodeType === Node.TEXT_NODE && e.parentNode === t && "" !== e.textContent.trim()) { var i = document.createElement("p"); e.parentNode.insertBefore(i, e), i.appendChild(e) } }), t.innerHTML } function Dg(e) { return e.replace(/&amp;/g, "&").replace(/&amp;lt;/g, "<").replace(/&lt;/g, "<").replace(/&amp;gt;/g, ">").replace(/&gt;/g, ">").replace(/&nbsp;/g, " ").replace(/&amp;nbsp;/g, " ").replace(/&quot;/g, "") } function Ag() { var e = !1; return uw.isDevice && uw.isIos && (e = !0), e } function Eg(e, t) { if ("BODY" === e.nodeName && !d(t)) { var i = top.window.document.querySelector(t); d(i) || i.contentWindow.focus() } } function jg(e, t, i, n) { var r; if (i) { r = t.contentModule.getDocument().querySelector("body") } else r = t.element; if (Object.keys(e).length) for (var o = 0, s = Object.keys(e); o < s.length; o++) { var a = s[o]; if ("class" === a) r.classList.add(e[a]); else if ("disabled" === a && "disabled" === e[a]) t.enabled = !1, t.setEnable(); else if ("readonly" === a && "readonly" === e[a]) t.readonly = !0, t.setReadOnly(n); else if ("style" === a) r.setAttribute("style", e[a]); else if ("tabindex" === a) t.inputElement.setAttribute("tabindex", e[a]); else if ("placeholder" === a) t.placeholder = e[a], t.setPlaceHolder(); else { ["name", "required"].indexOf(a) > -1 ? t.valueContainer.setAttribute(a, e[a]) : r.setAttribute(a, e[a]) } } } function Ig(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function kg(e, t) { var i = document.getElementById("heatmapmeasuretext"); return null === i && (i = M("text", { id: "heatmapmeasuretext" }), document.body.appendChild(i)), i.innerText = e, i.style.position = "absolute", i.style.visibility = "hidden", i.style.fontSize = -1 !== t.size.indexOf("px") ? t.size : t.size + "px", i.style.fontWeight = t.fontWeight, i.style.fontStyle = t.fontStyle, i.style.fontFamily = t.fontFamily, i.style.top = "-100", i.style.left = "0", i.style.whiteSpace = "nowrap", i.style.lineHeight = "normal", new ide(i.clientWidth, i.clientHeight) } function Pg(e, t, i, n) { return "Near" === n.textAlignment ? t : "Center" === n.textAlignment ? t + e / 2 : e + t } function Ng(e) { for (var t = 0, i = 0, n = e; i < n.length; i++) { t += n[i] } return t } function Og(e, t, i, n) { return "Near" === n.textAlignment ? e.height - i : "Center" === n.textAlignment ? e.height / 2 : t } function Rg(e, t, i) { var n, r, o, s = new JE("heatmapMeasureRotateText"), a = s.createSvg({ id: "heatmapMeasureRotateText_svg", width: 100, height: 100 }); return r = { "font-size": e.size, "font-style": e.fontStyle, "font-family": e.fontFamily, "font-weight": e.fontWeight, transform: "rotate(" + i + ", 0, 0)", "text-anchor": "middle" }, o = s.createText(r, t), a.appendChild(o), document.body.appendChild(a), n = o.getBoundingClientRect(), k(a), new ide(n.right - n.left, n.bottom - n.top) } function zg(e, t, i) { var n = []; switch (t.textOverflow) { case "Wrap": n = Bg(e, i, t); break; case "Trim": n.push(Fg(i, e, t)); break; default: n.push(Vg(i, e, t)) }return n } function Bg(e, t, i) { for (var n, r = e.split(" "), o = "", s = [], a = 0, l = r.length; a < l; a++)n = r[a], kg(o.concat(n), i).width < t ? o = o.concat(("" === o ? "" : " ") + n) : "" !== o ? (s.push(Fg(t, o, i)), o = n) : (s.push(Fg(t, n, i)), n = ""), o && a === l - 1 && s.push(Fg(t, o, i)); return s } function Fg(e, t, i) { var n = t, r = kg(t, i).width; if (r > e) for (var o = t.length - 1; o >= 0; --o)if (n = t.substring(0, o) + "...", (r = kg(n, i).width) <= e) return n; return n } function Vg(e, t, i) { var n = t, r = kg(t, i).width; if (r > e) for (var o = t.length - 1; o >= 0; --o)if (n = t.substring(0, o), (r = kg(n, i).width) <= e) return n; return n } function Wg(e, t, i, n, r, o, s, a) { var l = document.getElementById(r), h = (a.initialClipRect, kg(e, { fontFamily: "Segoe UI", size: "12px", fontStyle: "Normal", fontWeight: "Regular" })), d = h.width + 5; t = (t = t + d > n ? t - d : t) < 0 ? 5 : t, l ? (l.innerText = e, l.style.top = (i + 15).toString() + "px", l.style.left = (t + 15).toString() + "px") : ((l = M("div", { id: r, styles: "top:" + (i + 15).toString() + "px;left:" + (t + 15).toString() + "px;background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(112, 112, 112); padding-left : 3px; padding-right : 2px;padding-bottom : 2px; padding-top : 2px; font-size:12px; font-family: Segoe UI" })).innerText = e, o.appendChild(l)), e === a.titleSettings.text ? l.style.width = t + 15 + h.width + 7 > a.availableSize.width ? (a.availableSize.width - (t + 15)).toString() + "px" : "" : (l.style.left = t + 15 + h.width + 7 > a.availableSize.width ? (a.availableSize.width - (h.width + 7)).toString() + "px" : t.toString() + "px", l.style.top = i + 15 + h.height + 6 > a.availableSize.height ? (i - (h.height + 6) - 10).toString() + "px" : l.style.top), s && setTimeout(function () { Hg(r) }, 1500) } function Hg(e) { var t = _g(e); t && k(t) } function _g(e) { return document.getElementById(e) } function Yg(e, t, i, n) { var r = new Date(e); switch (t = Math.ceil(t * n), i) { case "Years": r.setFullYear(r.getFullYear() + t); break; case "Months": r.setMonth(r.getMonth() + t); break; case "Days": r.setDate(r.getDate() + t); break; case "Hours": r.setHours(r.getHours() + t); break; case "Minutes": r.setMinutes(r.getMinutes() + t) }return r } function Ug(e, t, i) { for (var n, r, o, s = e.length, a = 0; a < s; a++)if (n = e[a], r = n.region, t >= r.x && t <= r.x + r.width && i >= r.y && i <= r.y + r.height) { o = n.text; break } return o } function qg(e) { var t; e = "transparent" === e ? "white" : e, (t = document.getElementById("heatmapmeasuretext")).style.color = e, e = window.getComputedStyle(t).color; var i = /^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e); return Gg(new Khe(parseInt(i[3], 10), parseInt(i[4], 10), parseInt(i[5], 10))) } function Gg(e) { return "#" + Qg(e.R) + Qg(e.G) + Qg(e.B) } function Qg(e) { var t = e.toString(16); return 1 === t.length ? "0" + t : t } function Xg(e) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return t ? new Khe(parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)) : new Khe(255, 255, 255) } function Jg(e, t, i, n) { return e ? t.replace("{value}", n(i)) : n(i) } function Zg(e, t, i) { if (d(t) || "" === t) return ""; var n, r; switch (e) { case "Color": var o = t; n = o.length > 7 ? o.slice(0, -2) : o; break; case "Date": r = i.format, n = Kde.formatDate(t, { format: r, type: e, skeleton: "yMd" }); break; case "DateRange": r = i.format; var s = t; n = Kde.formatDate(s[0], { format: r, type: e, skeleton: "yMd" }) + " - " + Kde.formatDate(s[1], { format: r, type: e, skeleton: "yMd" }); break; case "DateTime": n = d(r = i.format) || "" === r ? Kde.formatDate(t, { format: r, type: e, skeleton: "yMd" }) + " " + Kde.formatDate(t, { format: r, type: e, skeleton: "hm" }) : Kde.formatDate(t, { format: r, type: e, skeleton: "yMd" }); break; case "Time": r = i.format, n = Kde.formatDate(t, { format: r, type: e, skeleton: "hm" }); break; case "Numeric": r = d(i.format) ? "n2" : i.format; var a = d(t) ? null : "number" == typeof t ? t : Kde.parseNumber(t); n = Kde.formatNumber(a, { format: r }); break; default: n = t.toString() }return n } function Kg(e, t) { if (d(t) || "" === t) return t; if ("Date" !== e && "Time" !== e && "DateTime" !== e || "string" != typeof t) { if ("DateRange" === e) if ("object" == typeof t && "string" == typeof t[0]) t = [new Date(t[0]), new Date(t[1])]; else if ("string" == typeof t) { var i = t.split("-"); t = [new Date(i[0]), new Date(i[1])] } } else t = new Date(t); return t } function $g(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function em(e, t) { var i = document.getElementById("gauge-measuretext"); return null === i && (i = M("text", { id: "gauge-measuretext" }), document.body.appendChild(i)), i.innerHTML = e, i.style.position = "absolute", i.style.fontSize = t.size, i.style.fontWeight = t.fontWeight, i.style.fontStyle = t.fontStyle, i.style.fontFamily = t.fontFamily, i.style.visibility = "hidden", i.style.top = "-100", i.style.left = "0", i.style.whiteSpace = "nowrap", new Kce(i.clientWidth, i.clientHeight) } function tm(e, t, i, n, r, o) { return "pointer" === o ? e <= n && e >= r : null != t && t <= n && t >= r && null != i && i <= n && i >= r } function im(e, t, i, n, r, o) { var s = e.getBoundingClientRect(), a = t.getBoundingClientRect(), l = t.id.indexOf("MarkerPointer") > -1 ? a.height / 2 : n.isInversed ? a.height : 0, h = t.id.indexOf("MarkerPointer") > -1 ? a.width / 2 : n.isInversed ? 0 : a.width, d = new Kce(n.lineBounds.width, n.lineBounds.height), c = "drag" === r ? o.y - n.lineBounds.y : a.top + l - s.top - n.lineBounds.y, p = "drag" === r ? o.x - n.lineBounds.x : a.left + h - s.left - n.lineBounds.x, u = "Vertical" === i ? d.height : d.width, g = "Vertical" === i ? c : p, m = "Vertical" === i ? n.isInversed ? g / u : 1 - g / u : n.isInversed ? 1 - g / u : g / u; return m = m * n.visibleRange.delta + n.visibleRange.min } function nm(e, t, i) { var n = document.getElementById("gauge_path"); null === n && ((n = M("text", { id: "gauge_path" })).style.position = "absolute", n.style.top = "0px", n.style.left = "0px", i.appendChild(n)); var r = new JE("id").createSvg({ id: "box_path", width: t.width, height: t.height }); r.appendChild(e), n.appendChild(r); var o = e.getBBox(); return k(n), o } function rm(e) { return document.getElementById(e) } function om(e) { var t = rm(e); t && k(t) } function sm(e) { var t = !1; return e.map(function (e, i) { e.pointers.map(function (e, i) { e.enableDrag && (t = !0) }) }), t } function am(e, t, i, n) { var r = (e - n.min) / n.delta; return r = "Vertical" === i ? t.isInversed ? r : 1 - r : t.isInversed ? 1 - r : r } function lm(e) { return "font-size:" + e.size + "; font-style:" + e.fontStyle + "; font-weight:" + e.fontWeight + "; font-family:" + e.fontFamily + ";opacity:" + e.opacity + "; color:" + e.color + ";" } function hm(e, t, i) { if (d(e)) return null; for (var n = 0, r = Object.keys(t); n < r.length; n++) { var o = r[n]; e = e.split("{" + o + "}").join(dm(t[o], i).toString()) } return e } function dm(e, t) { var i; return null !== (i = t.format && !isNaN(Number(e)) ? t.intl.getNumberFormat({ format: t.format, useGrouping: t.useGroupingSeparator })(Number(e)) : e) ? i : "" } function cm(e) { return e && null !== e.match("{value}") ? "" : e } function pm(e) { var t = null; try { document.querySelectorAll(e).length && (t = ce(document.querySelector(e).innerHTML.trim())) } catch (i) { t = ce(e) } return t } function um(e, t) { var i, n; return t.appendChild(e), i = e.offsetWidth, n = e.offsetHeight, t.removeChild(e), new Kce(i, n) } function gm(e, t, i, n) { var r, o = {}, s = new JE(""), a = "fill:" + i + "; font-size:" + t.size + "; font-style:" + t.fontStyle + " ; font-weight:" + t.fontWeight + "; font-family:" + t.fontFamily + "; text-anchor:" + e.anchor + "; transform:" + e.transform + "; opacity:" + t.opacity + "; dominant-baseline:" + e.baseLine + ";"; return o = { id: e.id, x: e.x, y: e.y, style: a }, r = s.createText(o, e.text), n.appendChild(r), r } function mm(e, t, i, n) { for (var r, o = t - e, s = fm(i, n), a = o / s, l = Math.pow(10, Math.floor(Math.log(a) / Math.log(10))), h = 0, d = [10, 5, 2, 1]; h < d.length; h++) { if (r = l * d[h], s < o / r) break; a = r } return a } function fm(e, t) { var i = 5 * ("Horizontal" === t ? .533 : 1); return i = Math.max(e * (i / 100), 1) } function ym(e, t) { var i, n, r, o, s = []; return s = e.id.replace(t.element.id, "").split("_"), i = parseInt(s[2], 10), n = parseInt(s[4], 10), r = t.axes[i], o = t.axes[i].pointers[n], { axis: r, axisIndex: i, pointer: o, pointerIndex: n } } function vm(e, t) { var i = null; return t.forEach(function (t, n) { e >= t.start && t.end >= e && (i = t.interior) }), i } function wm() { return ["#ff5985", "#ffb133", "#fcde0b", "#27d5ff", "#50c917"] } function bm(e, t, i, n, r, o, s, a) { var h, d = i.width, c = i.height, p = e.x, u = e.y; switch (t) { case "Circle": l(r, { r: h = (d + c) / 4, cx: p = "Vertical" === o ? s.opposedPosition ? "Near" === a.placement ? p - h : p + h : "Far" !== a.placement ? p - h : p + h : p, cy: u = "Vertical" === o ? u : s.opposedPosition ? "Near" === a.placement ? u - h : u + h : "Far" === a.placement ? u + h : u - h }); break; case "Diamond": case "Rectangle": p = "Horizontal" === o ? p - d / 2 : !s.opposedPosition && "Far" !== a.placement || s.opposedPosition && "Near" === a.placement ? p - d : p, u = "Vertical" === o ? u : s.opposedPosition ? "Near" === a.placement ? u - c / 2 : u + c / 2 : "Far" === a.placement ? u + c / 2 : u - c / 2, l(r, { d: "Diamond" === t ? "M " + p + " " + u + " L " + (p + d / 2) + " " + (u - c / 2) + " L " + (p + d) + " " + u + " L " + (p + d / 2) + " " + (u + c / 2) + " L " + p + " " + u + " z" : "M " + p + " " + (u - c / 2) + " L " + (p + d) + " " + (u - c / 2) + " L " + (p + d) + " " + (u + c / 2) + " L " + p + " " + (u + c / 2) + " L " + p + " " + (u - c / 2) + " z" }); break; case "Triangle": l(r, { d: "Vertical" === o ? "M " + p + " " + u + " L" + (p - d) + " " + (u - c / 2) + "L" + (p - d) + " " + (u + c / 2) + " Z" : "M " + p + " " + u + " L" + (p + d / 2) + " " + (u - c) + "L" + (p - d / 2) + " " + (u - c) + " Z" }); break; case "InvertedTriangle": l(r, { d: "Vertical" === o ? "M " + p + " " + u + " L" + (p + d) + " " + (u - c / 2) + "L" + (p + d) + " " + (u + c / 2) + " Z" : "M " + p + " " + u + " L" + (p + d / 2) + " " + (u + c) + "L" + (p - d / 2) + " " + (u + c) + " Z" }); break; case "Arrow": l(r, { d: "Vertical" === o ? "M " + p + " " + u + " L" + (p - d / 2) + " " + (u - c / 2) + " L" + (p - d / 2) + " " + (u - c / 2 + c / 4) + " L" + (p - d) + " " + (u - c / 2 + c / 4) + " L" + (p - d) + " " + (u + c / 2 - c / 4) + " L" + (p - d / 2) + " " + (u + c / 2 - c / 4) + " L" + (p - d / 2) + " " + (u + c / 2) + "z" : "M " + p + " " + u + " L" + (p + d / 2) + " " + (u - c / 2) + " L" + (p + d / 2 - d / 4) + " " + (u - c / 2) + " L" + (p + d / 2 - d / 4) + " " + (u - c) + " L" + (p - d / 2 + d / 4) + " " + (u - c) + " L" + (p - d / 2 + d / 4) + " " + (u - c / 2) + " L" + (p - d / 2) + " " + (u - c / 2) + "z" }); break; case "InvertedArrow": l(r, { d: "Vertical" === o ? "M " + p + " " + u + "L" + (p + d / 2) + " " + (u - c / 2) + " L" + (p + d / 2) + " " + (u - c / 2 + c / 4) + " L" + (p + d) + " " + (u - c / 2 + c / 4) + " L" + (p + d) + " " + (u + c / 2 - c / 4) + " L" + (p + d / 2) + " " + (u + c / 2 - c / 4) + " L" + (p + d / 2) + " " + (u + c / 2) + "z" : "M " + p + " " + u + " L" + (p + d / 2) + " " + (u + c / 2) + " L" + (p + d / 2 - d / 4) + " " + (u + c / 2) + " L" + (p + d / 2 - d / 4) + " " + (u + c) + " L" + (p - d / 2 + d / 4) + " " + (u + c) + " L" + (p - d / 2 + d / 4) + " " + (u + c / 2) + " L" + (p - d / 2) + " " + (u + c / 2) + "z" }); break; case "Image": l(r, { href: n, height: c, width: d, x: p - d / 2, y: u - c / 2 }) }return r } function Cm(e, t, i, n, r, o, s, a) { var l, h, d, c, p, u, g = " ", m = a; switch (t) { case "RoundedRectangle": g = "M " + (l = e.x) + " " + (m + (h = e.y)) + " Q " + l + " " + h + " " + (l + m) + " " + h + " ", g += "L " + (l + (d = e.width) - m) + " " + h + " Q " + (l + d) + " " + h + " " + (l + d) + " " + (h + m) + " ", g += "L " + (l + d) + " " + (h + (c = e.height) - m) + " Q " + (l + d) + " " + (h + c) + " " + (l + d - m) + " " + (h + c) + " ", g += " L " + (l + m) + " " + (h + c) + " Q " + l + " " + (h + c) + " " + l + " " + (h + c - m) + " ", g += "L " + l + " " + (m + h) + " z"; break; case "Thermometer": var f = "Vertical" === i ? e.width : e.height; if (p = f + f / 2 / Math.PI, u = f / 2, "Vertical" === i) { var y = o + o / 2 / Math.PI - p, v = "bar" === r ? e.y + y : e.y, w = "bar" === r ? e.y + (u - u / Math.PI) : e.y, b = e.height; g = "M" + e.x + " " + (v + b) + " A " + p + " " + p + ", 0, 1, 0, " + (e.x + e.width) + " " + (v + b) + " L " + (e.x + e.width) + " " + w + " A " + u + " " + u + ", 0, 1, 0, " + e.x + " " + w + " z " } else { var C = "bar" !== r || s.isInversed ? e.x : e.x - (o + o / 2 / Math.PI - p), L = "bar" === r ? e.width - (u - u / Math.PI) : e.width; g = "M" + C + " " + e.y + " A " + p + " " + p + ", 0, 1, 0, " + C + " " + (e.y + e.height) + " L " + (("bar" === r ? e.x : C) + L) + " " + (e.y + e.height) + " A " + u + " " + u + ", 0, 1, 0, " + (("bar" === r ? e.x : C) + L) + " " + e.y + " z " } }return g } function Lm(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function Mm(e) { var t = e.element.clientWidth, i = e.element.clientHeight; e.availableSize = new wpe(Lm(e.width, t) || t || 600, Lm(e.height, i) || i || (e.isDevice ? Math.min(window.innerWidth, window.innerHeight) : 450)) } function Sm(e) { e.renderer = new JE(e.element.id), Mm(e), e.svgObject = e.renderer.createSvg({ id: e.element.id + "_svg", width: e.availableSize.width, height: e.availableSize.height }) } function xm(e, t, i) { var n = i.getBoundingClientRect(), r = i.ownerDocument.defaultView.pageXOffset, o = i.ownerDocument.defaultView.pageYOffset, s = i.ownerDocument.documentElement.clientTop, a = i.ownerDocument.documentElement.clientLeft, l = n.left + r - a, h = n.top + o - s; return new kpe(e - l, t - h) } function Tm(e) { return e * (Math.PI / 180) } function Dm(e) { return e * (180 / Math.PI) } function Am(e, t, i, n, r) { var o, s, a, l, h, c, p = new wpe(r.mapAreaRect.width, r.mapAreaRect.height), u = r.baseMapBounds.longitude, g = r.baseMapBounds.latitude, m = Tm(e), f = Tm(t), y = r.projectionType, v = r.isTileMap ? 256 * Math.pow(2, 1) : d(i) ? Math.min(p.width, p.height) : Math.min(p.width, p.height) * i; if ("Normal" === n.geometryType) o = d(i) ? t : Math.abs((t - u.min) * i), s = d(i) ? e : Math.abs((g.max - e) * i); else if ("Geographic" === n.geometryType) { switch (y) { case "Mercator": var w = new bpe(v / 2, v / 2); o = w.x + t * (v / 360); var b = Rm(Math.sin(Tm(e)), -.9999, .9999); s = w.y + .5 * Math.log((1 + b) / (1 - b)) * (-v / (2 * Math.PI)); break; case "Winkel3": h = ((a = km(f, m)).x + f / (Math.PI / 2)) / 2, l = (a.y + m) / 2; break; case "Miller": h = f, l = 1.25 * Math.log(Math.tan(Math.PI / 4 + .4 * m)); break; case "Eckert3": h = 2 / (c = Math.sqrt(Math.PI * (4 + Math.PI))) * f * (1 + Math.sqrt(1 - 4 * m * m / (Math.PI * Math.PI))), l = 4 / c * m; break; case "AitOff": h = (a = km(f, m)).x, l = a.y; break; case "Eckert5": h = f * (1 + Math.cos(m)) / Math.sqrt(2 + Math.PI), l = 2 * m / Math.sqrt(2 + Math.PI); break; case "Equirectangular": h = f, l = m; break; case "Eckert6": c = (1 + Math.PI / 2) * Math.sin(m); for (var C = 1 / 0, L = 0; L < 10 && Math.abs(C) > 1e-6; L++)m -= C = (m + Math.sin(m) - c) / (1 + Math.cos(m)); c = Math.sqrt(2 + Math.PI), h = f * (1 + Math.cos(m)) / c, l = 2 * m / c }o = "Mercator" === y ? o : Pm(jm(r, Dm(h)), 3), s = "Mercator" === y ? s : -Pm(Im(r, Dm(l)), 3) } return new bpe(o, s) } function Em(e, t, i, n) { var r = 256 * Math.pow(2, t), o = (e.x + 180) / 360, s = Math.sin(e.y * Math.PI / 180), a = .5 - Math.log((1 + s) / (1 - s)) / (4 * Math.PI), l = e.x, h = e.y; return n && (l = o * r + .5 + i.x, h = a * r + .5 + i.y), { x: l, y: h } } function jm(e, t) { var i = e.baseMapBounds.longitude, n = d(e.baseSize) ? e.mapAreaRect.width : e.mapAreaRect.width + Math.abs(e.baseSize.width - e.mapAreaRect.width) / 2; return Math.round(n * (t - i.min) / (i.max - i.min) * 100) / 100 } function Im(e, t) { var i = e.baseMapBounds.latitude; return Math.round(e.mapAreaRect.height * (t - i.min) / (i.max - i.min) * 100) / 100 } function km(e, t) { var i = Math.cos(t), n = Nm(Om(i * Math.cos(e /= 2))); return new bpe(2 * i * Math.sin(e) * n, Math.sin(t) * n) } function Pm(e, t) { var i = Math.pow(10, t); return Math.round(e * i) / i } function Nm(e) { return e / Math.sin(e) } function Om(e) { return Math.acos(e) } function Rm(e, t, i) { return d(t) || (e = Math.max(e, t)), d(i) || (e = Math.min(e, i)), e } function zm(e, t) { var i = document.getElementById("mapsmeasuretext"); return null === i && (i = M("text", { id: "mapsmeasuretext" }), document.body.appendChild(i)), i.innerHTML = e, i.style.position = "absolute", i.style.fontSize = t.size, i.style.fontWeight = t.fontWeight, i.style.fontStyle = t.fontStyle, i.style.fontFamily = t.fontFamily, i.style.visibility = "hidden", i.style.top = "-100", i.style.left = "0", i.style.whiteSpace = "nowrap", i.style.lineHeight = "normal", new wpe(i.clientWidth, i.clientHeight) } function Bm(e, t, i, n, r) { void 0 === r && (r = !1); var o, s, a = { id: e.id, x: e.x, y: e.y, fill: i, "font-size": t.size, "font-style": t.fontStyle, "font-family": t.fontFamily, "font-weight": t.fontWeight, "text-anchor": e.anchor, transform: e.transform, opacity: t.opacity, "dominant-baseline": e.baseLine }, l = "string" == typeof e.text ? e.text : r ? e.text[e.text.length - 1] : e.text[0], h = new JE(""), d = h.createText(a, l); if (d.style["user-select"] = "none", d.style["-moz-user-select"] = "none", d.style["-webkit-touch-callout"] = "none", d.style["-webkit-user-select"] = "none", d.style["-khtml-user-select"] = "none", d.style["-ms-user-select"] = "none", d.style["-o-user-select"] = "none", "string" != typeof e.text && e.text.length > 1) for (var c = 1, p = e.text.length; c < p; c++)s = zm(e.text[c], t).height, o = h.createTSpan({ x: e.x, id: e.id, y: e.y + (r ? -c * s : c * s) }, r ? e.text[e.text.length - (c + 1)] : e.text[c]), d.appendChild(o); return n.appendChild(d), d } function Fm(e, t, i, n, r) { for (var o = M("div", { id: t, styles: "position: absolute;pointer-events: auto;" }); e.length > 0;)o.appendChild(e[0]); for (var s = o.innerHTML, a = Object.keys(i), l = 0; l < a.length; l++)"latitude" !== a[l].toLowerCase() && "longitude" !== a[l].toLowerCase() && (s = s.replace(new RegExp("{{:" + a[l] + "}}", "g"), i[a[l].toString()])); return o.innerHTML = s, o } function Vm(e, t, i, n, r) { for (var o = (d(e.childElementCount) ? e[0] : e).outerHTML, s = Object.keys(i), a = 0; a < s.length; a++)o = o.replace(new RegExp("{{:" + s[a] + "}}", "g"), i[s[a].toString()]); return M("div", { id: t, innerHTML: o, styles: "position: absolute" }) } function Wm(e, t, i, n, r, o, s) { var a, h, d, c, p, u, g = r.size, m = r.borderColor, f = parseFloat(r.borderWidth), y = r.fill, v = r.dashArray, w = { color: m, width: f }, b = r.opacity; if (p = new Spe(n, y, f, m, b, v, ""), "Circle" === e) { var C = (g.width + g.height) / 4; c = new Dpe(n, y, w, b, i.x, i.y, C, v), a = s.renderer.drawCircle(c) } else "Rectangle" === e ? (h = i.x - g.width / 2, d = i.y - g.height / 2, u = new Tpe(n, y, w, b, new Ppe(h, d, g.width, g.height), null, null, "", v), a = s.renderer.drawRectangle(u)) : "Image" === e ? (h = i.x - g.width / 2, d = i.y - g.height / 2, l(p, { href: t, height: g.height, width: g.width, x: h, y: d }), a = s.renderer.drawImage(p)) : a = Qm(s, e, p, g, i, o); return a } function Hm(e, t, i, n, r) { for (var o, s, a = [], l = [], h = 0, c = 0, p = e.markerClusterSettings.labelStyle, u = 0, g = 0; g < t.childElementCount; g++) { var m = t.childNodes[g]; a.push(m.getBoundingClientRect()) } for (var f = function (g) { if (!d(a[g])) { for (var m = g + 1; m < a.length; m++)d(a[m]) || a[g].left > a[m].right || a[g].right < a[m].left || a[g].top > a[m].bottom || a[g].bottom < a[m].top || l.push(a[m]); h = a[g].x, c = a[g].y; for (var f = 0; f < l.length; f++)for (var y = 0; y < a.length; y++)if (!d(a[y]) && l[f].x === a[y].x) { delete a[y]; for (var v = 0; v < t.childElementCount; v++) { var w = t.childNodes[v]; l[f].x === w.getBoundingClientRect().x && (t.childNodes[v].style.visibility = "hidden", t.childNodes[g].style.visibility = "hidden") } } if (l.length > 0) { var b = i.element.getBoundingClientRect(); h = Math.abs(b.x - h) + 10, c = Math.abs(b.y - c) + 10; var C = i.isTileMap ? new Object : sf(i, e, !1), L = i.isTileMap ? { x: 0, y: 0 } : 0 !== i.translatePoint.x ? i.translatePoint : C.location, M = parseInt(t.childNodes[g].id.split("_dataIndex_")[1].split("_")[0], 10), S = parseInt(t.childNodes[g].id.split("_MarkerIndex_")[1].split("_")[0], 10), x = e.markerClusterSettings, T = { size: new wpe(x.width, x.height), fill: x.fill, borderColor: x.border.color, borderWidth: x.border.width, opacity: x.opacity, dashArray: x.dashArray }, D = { cancel: !1, name: mue, fill: x.fill, height: x.height, width: x.width, imageUrl: x.imageUrl, shape: x.shape, data: void 0, maps: i, cluster: x, border: x.border }; T.fill = D.fill, T.size.width = D.width, T.size.height = D.height, T.imageUrl = D.imageUrl, T.shape = D.shape, T.borderColor = D.border.color, T.borderWidth = D.border.width, i.trigger("markerClusterRendering", D, function (e) { h = i.isTileMap ? h : t.id.indexOf("_Markers_Group") > -1 ? h : (h + L.x) * i.mapScaleValue, c = i.isTileMap ? c : t.id.indexOf("_Markers_Group") > -1 ? c : (c + L.y) * i.mapScaleValue; var a = i.element.id + "_LayerIndex_" + n + "_MarkerIndex_" + S + "_dataIndex_" + M + "_cluster_" + u++, d = i.element.id + "_LayerIndex_" + n + "_MarkerIndex_" + S + "_dataIndex_" + M + "_cluster_" + u + "_datalabel_" + u, g = Wm(D.shape, D.imageUrl, { x: 0, y: 0 }, a, T, r, i); g.setAttribute("transform", "translate( " + h + " " + c + " )"), o = new Mpe(d, 0, 3.75, "middle", (l.length + 1).toString(), "", ""), (s = Bm(o, p, p.color, r)).setAttribute("transform", "translate( " + h + " " + c + " )"), r.appendChild(g), r.appendChild(s) }) } } l = [] }, y = 0; y < a.length; y++)f(y); return t } function _m(e, t, i, n, r, o, s, a, l, h, d) { var c = { size: new wpe(e.width, e.height), fill: e.fill, borderColor: e.border.color, borderWidth: e.border.width, opacity: t.opacity, dashArray: t.dashArray }, p = Wm(e.shape, e.imageUrl, { x: 0, y: 0 }, s, c, d, h), u = (h.isTileMap ? r.x : (r.x + o.x) * l) + a.x, g = (h.isTileMap ? r.y : (r.y + o.y) * l) + a.y; p.setAttribute("transform", "translate( " + u + " " + g + " )"), d.appendChild(p); var m = i.length - 1 === n ? "marker" : null, f = new bpe(u, g); return t.animationDuration > 0 && bf(p, t.animationDelay, t.animationDuration, f, h, m), d } function Ym(e, t, i, n, r, o, s, a, l, h) { if ((t = df(e.template)) && t(h).length) { for (var d = Fm(t(h), i, n), c = 0; c < d.children.length; c++)d.children[c].style.pointerEvents = "none"; d.style.left = (h.isTileMap ? s.x : Math.abs(h.baseMapRectBounds.min.x - s.x) * a) + l.x + "px", d.style.top = (h.isTileMap ? s.y : Math.abs(h.baseMapRectBounds.min.y - s.y) * a) + l.y + "px", o.appendChild(d) } return o } function Um(e, t) { return t && t.appendChild(e), e } function qm(e, t, i) { return Um(e.renderer.drawCircle(t), i) } function Gm(e, t, i) { return Um(e.renderer.drawRectangle(t), i) } function Qm(e, t, i, n, r, o) { var s; switch (t) { case "Balloon": s = Xm(e, i, n, r, o); break; case "Cross": i.d = "M " + r.x + " " + (r.y - n.height / 2) + " L " + r.x + " " + (r.y + n.height / 2) + " M " + (r.x - n.width / 2) + " " + r.y + " L " + (r.x + n.width / 2) + " " + r.y; break; case "Diamond": i.d = "M " + r.x + " " + (r.y - n.height / 2) + " L " + (r.x + n.width / 2) + " " + r.y + " L " + r.x + " " + (r.y + n.height / 2) + " L " + (r.x - n.width / 2) + " " + r.y + " Z"; break; case "Star": i.d = "M " + (r.x + n.width / 3) + " " + (r.y - n.height / 2) + " L " + (r.x - n.width / 2) + " " + (r.y + n.height / 6) + " L " + (r.x + n.width / 2) + " " + (r.y + n.height / 6) + " L " + (r.x - n.width / 3) + " " + (r.y - n.height / 2) + " L " + r.x + " " + (r.y + n.height / 2) + " L " + (r.x + n.width / 3) + " " + (r.y - n.height / 2) + " Z"; break; case "Triangle": i.d = "M " + r.x + " " + (r.y - n.height / 2) + " L " + (r.x + n.width / 2) + " " + (r.y + n.height / 2) + " L " + (r.x - n.width / 2) + " " + (r.y + n.height / 2) + " Z"; break; case "HorizontalLine": i.d = " M " + (r.x - n.width / 2) + " " + r.y + " L " + (r.x + n.width / 2) + " " + r.y; break; case "VerticalLine": i.d = "M " + r.x + " " + (r.y - n.height / 2) + " L " + r.x + " " + (r.y + n.height / 2) }return "Balloon" === t ? s : e.renderer.drawPath(i) } function Xm(e, t, i, n, r) { var o = i.width, s = i.height; n.x -= o / 2, n.y -= s, t.d = "M15,0C8.8,0,3.8,5,3.8,11.2C3.8,17.5,9.4,24.4,15,30c5.6-5.6,11.2-12.5,11.2-18.8C26.2,5,21.2,0,15,0z M15,16c-2.8,0-5-2.2-5-5s2.2-5,5-5s5,2.2,5,5S17.8,16,15,16z"; var a = e.renderer.drawPath(t), l = i.width / 22.5, h = i.height / 30; a.setAttribute("transform", "translate(" + n.x + ", " + n.y + ") scale(" + l + ", " + h + ")"); var d = e.renderer.createGroup({ id: t.id }); return Um(a, d), Um(d, r) } function Jm(e, t, i, n) { if (!d(t)) for (var r = 0; r < e.length; r++) { var o = Zm(e[r][i], n, t); if (e[r][i] === t[o]) return r } return null } function Zm(e, t, i) { if (!d(e) && !d(i) && !d(t)) for (var n = "[object Array]" === Object.prototype.toString.call(t) ? t : [t], r = 0; r < n.length; r++)if (e === i[n[r]]) return n[r]; return null } function Km(e, t, i) { for (var n = [], r = 0; r < e.length; r++) { var o = e[r]; t <= o.y && i >= o.y && n.push(o) } return n } function $m(e, t, i, n, r) { var o = (t - e) / 100 * (100 / (r - n) * (i - n)) + e; return r === n && (o = (t - e) / 100 + e), o } function ef(e, t) { if (!e.length) return null; for (var i, n, r, o, s = e.length, a = 0, l = 0, h = 0, d = 0; d <= s - 1; d++)i = e[d].x, n = "Mercator" === t ? e[d].y : -e[d].y, d === s - 1 ? (r = e[0].x, o = "Mercator" === t ? e[0].y : -e[0].y) : (r = e[d + 1].x, o = "Mercator" === t ? e[d + 1].y : -e[d + 1].y), a += Math.abs(i * o - r * n), l += Math.abs((i + r) * (i * o - r * n)), h += Math.abs((n + o) * (i * o - r * n)); l *= 1 / (4 * (a *= .5)), h *= 1 / (4 * a); var c = { x: 0, y: 0 }, p = { x: 0, y: 0 }, u = { x: 0, y: 0 }, g = { x: 0, y: 0 }, m = { x: 0, y: 0 }, f = { x: 0, y: 0 }, y = { x: 0, y: 0 }, v = { x: 0, y: 0 }, w = 0; for (d = 0; d <= s - 1; d++) { var b = e[d]; b.y = "Mercator" === t ? b.y : -b.y, b.y > h ? b.x < l && l - b.x < l - m.x ? m = { x: b.x, y: b.y } : b.x > l && (0 === f.x || b.x - l < f.x - l) && (f = { x: b.x, y: b.y }) : b.x < l && l - b.x < l - y.x ? y = { x: b.x, y: b.y } : b.x > l && (0 === v.x || b.x - l < v.x - l) && (v = { x: b.x, y: b.y }), w = f.y - v.y + (f.y - v.y) / 4, b.x > l ? b.y < h && h - b.y < h - c.y ? c = { x: b.x, y: b.y } : b.y > h && (0 === p.y || b.y - h < p.y - h) && (p = { x: b.x, y: b.y }) : b.y < h && h - b.y < h - u.y ? u = { x: b.x, y: b.y } : b.y > h && (0 === g.y || b.y - h < g.y - h) && (g = { x: b.x, y: b.y }) } return { x: l, y: h, rightMin: c, rightMax: p, leftMin: u, leftMax: g, points: e, topMax: v, topMin: y, bottomMax: f, bottomMin: m, height: w } } function tf(e) { var t = !1; return "[object Array]" === Object.prototype.toString.call(e) && e.forEach(function (e, i) { d(e.geometry) || "Path" !== e.geometry.type || (t = !0) }), t } function nf(e, t, i) { var n = t, r = zm(t, i).width; if (r > e) for (var o = t.length - 1; o >= 0; --o)if (n = t.substring(0, o) + "...", (r = zm(n, i).width) <= e || n.length < 4) return n.length < 4 && (n = " "), n; return n } function rf(e, t, i, n) { var r, o; switch (t) { case "Near": r = e.x; break; case "Center": r = "title" === n ? e.width / 2 - i.width / 2 : e.x + e.width / 2 - i.width / 2; break; case "Far": r = "title" === n ? e.width - e.y - i.width : e.x + e.width - i.width }return o = "title" === n ? e.y + i.height / 2 : e.y + e.height / 2 + i.height / 2, new bpe(r, o) } function of(e) { var t = document.getElementById(e); return t ? k(t) : null } function sf(e, t, i) { d(e.mapScaleValue) && (e.mapScaleValue = e.zoomSettings.zoomFactor); var n, r, o, s = i ? 1 : e.mapScaleValue, a = e.baseMapRectBounds.min, l = e.baseMapRectBounds.max, h = e.mapAreaRect, c = (e.availableSize, Math.abs(l.x - a.x)), p = Math.abs(a.y - l.y), u = i ? 1 : e.zoomSettings.zoomFactor, g = e.centerPosition; if (d(g.longitude) || d(g.latitude)) d(e.previousProjection) || e.previousProjection !== e.projectionType ? (c *= o = parseFloat(Math.min(h.width / c, h.height / p).toFixed(2)), p *= o, n = h.x + (-a.x + (h.width / 2 - c / 2)), r = h.y + (-a.y + (h.height / 2 - p / 2))) : (o = e.scale, n = e.zoomTranslatePoint.x, r = e.zoomTranslatePoint.y); else { var m = (c + Math.abs(e.mapAreaRect.width - c)) / 2 / u, f = (p + Math.abs(e.mapAreaRect.height - p)) / 2 / u, y = Am(g.latitude, g.longitude, e.mapLayerPanel.calculateFactor(t), t, e); d(e.previousProjection) || e.previousProjection !== e.projectionType ? (n = -y.x + m, r = -y.y + f, o = s) : (o = e.scale, n = e.zoomTranslatePoint.x, r = e.zoomTranslatePoint.y) } return { scale: o, location: new bpe(n, r) } } function af(e, t, i) { d(e.mapScaleValue) && (e.mapScaleValue = e.zoomSettings.zoomFactor); var n, r, o, s = i ? 1 : e.mapScaleValue, a = e.mapAreaRect, l = e.baseMapRectBounds.min, h = e.baseMapRectBounds.max, c = i ? 1 : e.mapScaleValue, p = Math.abs(h.x - l.x), u = Math.abs(l.y - h.y), g = e.centerPosition; if (d(g.longitude) || d(g.latitude)) { var m = 0 === e.zoomSettings.zoomFactor ? 1 : e.zoomSettings.zoomFactor; o = m = m > 10 ? 10 : m; var f = 0 === e.mapScaleValue ? 1 : e.mapScaleValue > 10 ? 10 : e.mapScaleValue; C = a.x + (-l.x + (a.width / 2 - p / 2)), b = a.y + (-l.y + (a.height / 2 - u / 2)); if (!d(e.zoomTranslatePoint) || !d(e.previousProjection)) if (e.previousProjection !== e.projectionType) { var y = [], v = { x: C, y: b }; y.push(v); for (var w = 1; w < 10; w++) { v = { x: y[w - 1].x - (a.width / w - a.width / (w + 1)) / 2, y: y[w - 1].y - (a.height / w - a.height / (w + 1)) / 2 }, y.push(v) } C = y[m - 1].x, b = y[m - 1].y } else C = e.zoomTranslatePoint.x, b = e.zoomTranslatePoint.y, m !== f && (o = f); n = C, r = b } else { var b = (u + Math.abs(e.mapAreaRect.height - u)) / 2 / c, C = (p + Math.abs(e.mapAreaRect.width - p)) / 2 / c, L = Am(g.latitude, g.longitude, e.mapLayerPanel.calculateFactor(t), t, e); d(e.zoomTranslatePoint) && d(e.previousProjection) ? (n = -L.x + C, r = -L.y + b) : e.previousProjection !== e.projectionType ? (n = -L.x + C, r = -L.y + b) : (n = e.zoomTranslatePoint.x, r = e.zoomTranslatePoint.y), o = 0 !== s ? s : 1 } return { scale: o, location: new bpe(n, r) } } function lf(e) { return document.getElementById(e) } function hf(e, t) { return e.formatFunction = e.intl.getNumberFormat({ format: e.format, useGrouping: e.useGroupingSeparator }), e.formatFunction(t) } function df(e) { var t = null; try { document.querySelectorAll(e).length && (t = ce(document.querySelector(e).innerHTML.trim())) } catch (i) { t = ce(e) } return t } function cf(e) { return document.getElementById(e) } function pf(e, t) { var i, n = parseInt(e.split("_LayerIndex_")[1].split("_")[0], 10), r = parseInt(e.split("_shapeIndex_")[1].split("_")[0], 10), o = t.layers[n], s = o.layerData[r].property; return o.dataSource && (i = o.dataSource[Jm(o.dataSource, s, o.shapeDataPath, o.shapePropertyPath)]), { shapeData: s, data: i } } function uf(e, t, i, n) { var r = pf(e, i), o = { cancel: !1, name: n, fill: t.fill, opacity: t.opacity, border: t.border, shapeData: r.shapeData, data: r.data, target: e }; return i.trigger(n, o), o } function gf(e) { return document.getElementsByClassName(e) } function mf(e, t) { var i = null; return document.getElementById(t) && (i = document.getElementById(t).querySelector("#" + e)), i } function ff(e, t, i, n) { for (var r, o = n.layers[e].shapeData.features, s = 0; s < o.length; s++)if (o[s].properties.name === t) { r = n.element.id + "_LayerIndex_" + e + "_shapeIndex_" + s + "_dataIndex_undefined"; break } return cf(r) } function yf(e, t, i) { return M("style", { id: e, innerHTML: "." + t + "{fill:" + i.fill + ";opacity:" + i.opacity.toString() + ";stroke-width:" + i.border.width.toString() + ";stroke:" + i.border.color + ";}" }) } function vf(e, t, i) { cf(e).innerHTML = "." + t + "{fill:" + i.fill + ";opacity:" + i.opacity.toString() + ";stroke-width:" + i.border.width.toString() + ";stroke:" + i.border.color + "}" } function wf(e) { e.removeAttribute("class") } function bf(e, t, i, n, r, o, s) { void 0 === s && (s = 0); var a = n.x, l = n.y, h = 0, d = e.getAttribute("transform") || ""; new fw({}).animate(e, { duration: i, delay: t, progress: function (t) { t.timeStamp > t.delay && (h = (t.timeStamp - t.delay) / t.duration, e.setAttribute("transform", "translate( " + (a - s * h) + " " + (l - s * h) + " ) scale(" + h + ")")) }, end: function (t) { if (e.setAttribute("transform", d), o) { var i = { cancel: !1, name: Mue, element: o, maps: r.isBlazor ? null : r }; r.trigger(Mue, i) } } }) } function Cf(e) { of(e) } function Lf(e, t, i, n, r, o, s, a, l) { for (var h = document.getElementById(s), d = zm(e, { fontFamily: "Segoe UI", size: "8px", fontStyle: "Normal", fontWeight: "Regular" }).width, c = e.split(" "), p = c[0].length, u = 1; u < c.length; u++)p < c[u].length && (p = c[u].length); h || (h = M("div", { id: s, styles: 'background-color: rgb(255, 255, 255) !important; color:black !important; position:absolute;border:1px solid rgb(0, 0, 0); padding-left:5px;font-size:12px; font-family: "Segoe UI"; text-align:center' })), i < r - d ? i = i : i > r - d && i < r - 8 * p ? d = r - i : i >= r - 8 * p && (i > d ? i -= d : (d = i, i = 0)); var g = t.split("px"); Mf(h, e, i, n, g, d, r, a); h.clientHeight + 2 * parseInt(g[0], 10) > o && (d = i, i = 0), Mf(h, e, i, n, g, d, r, a), l && setTimeout(Cf, 5e3, s) } function Mf(e, t, i, n, r, o, s, a) { e.innerHTML = t, e.style.top = (2 * parseInt(r[0], 10)).toString() + "px", e.style.left = i.toString() + "px", e.style.width = o.toString() + "px", e.style.maxWidth = s.toString() + "px", e.style.wordWrap = "break-word", a.appendChild(e) } function Sf(e, t, i, n, r) { var o = cf(e), s = "top:" + i.toString() + "px;left:" + n.toString() + "px;color: #000000; background:#FFFFFF;position:absolute;border:1px solid #707070;font-size:" + r + ";border-radius:2px;"; o ? (o.setAttribute("innerHTML", "&nbsp;" + t + "&nbsp;"), o.setAttribute("styles", s)) : (o = M("div", { id: e, innerHTML: "&nbsp;" + t + "&nbsp;", styles: s }), document.body.appendChild(o)) } function xf(e, t, i, n, r) { var o = new JE(""), s = Tf(e, i, t, r, n); return o["draw" + s.functionName](s.renderOption) } function Tf(e, t, i, n, r) { var o, s = "Path", a = t.width, h = t.height, d = e.x, c = e.y, p = e.x + -a / 2, u = e.y + -h / 2; switch (i) { case "Circle": case "Bubble": s = "Ellipse", l(n, { rx: a / 2, ry: h / 2, cx: d, cy: c }); break; case "VerticalLine": l(n, { d: o = "M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "Diamond": l(n, { d: o = "M " + p + " " + c + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + c + " L " + d + " " + (c + h / 2) + " L " + p + " " + c + " z" }); break; case "Rectangle": l(n, { d: o = "M " + p + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + p + " " + (c + h / 2) + " L " + p + " " + (c + -h / 2) + " z" }); break; case "Triangle": l(n, { d: o = "M " + p + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + p + " " + (c + h / 2) + " z" }); break; case "InvertedTriangle": l(n, { d: o = "M " + (d + a / 2) + " " + (c - h / 2) + " L " + d + " " + (c + h / 2) + " L " + (d - a / 2) + " " + (c - h / 2) + " L " + (d + a / 2) + " " + (c - h / 2) + " z" }); break; case "Pentagon": for (var g = void 0, m = void 0, f = 0; f <= 5; f++)g = a / 2 * Math.cos(Math.PI / 180 * (72 * f)), m = a / 2 * Math.sin(Math.PI / 180 * (72 * f)), o = 0 === f ? "M " + (d + g) + " " + (c + m) + " " : o.concat("L " + (d + g) + " " + (c + m) + " "); l(n, { d: o = o.concat("Z") }); break; case "Star": l(n, { d: o = "M " + (e.x + t.width / 3) + " " + (e.y - t.height / 2) + " L " + (e.x - t.width / 2) + " " + (e.y + t.height / 6) + " L " + (e.x + t.width / 2) + " " + (e.y + t.height / 6) + " L " + (e.x - t.width / 3) + " " + (e.y - t.height / 2) + " L " + e.x + " " + (e.y + t.height / 2) + " L " + (e.x + t.width / 3) + " " + (e.y - t.height / 2) + " Z" }); break; case "Cross": l(n, { d: o = "M " + p + " " + c + " L " + (d + a / 2) + " " + c + " M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "Image": s = "Image", l(n, { href: r, height: h, width: a, x: p, y: u }) }return { renderOption: n, functionName: s } } function Df(e, t) { var i, n; return t.appendChild(e), i = e.offsetWidth, n = e.offsetHeight, t.removeChild(e), new wpe(i, n) } function Af(e, t, i, n) { for (var r, o = 0; o < e.childElementCount; o++)if ((r = e.childNodes[o]).id.indexOf("_NavigationGroup") > -1) Ef(r, t, i, n); else { var s = n.layersCollection[t].shapeSettings.border.width; r.setAttribute("stroke-width", (s / i).toString()) } } function Ef(e, t, i, n) { for (var r, o = 0; o < e.childElementCount; o++)if ("path" === (r = e.childNodes[o]).tagName) { var s = n.layersCollection[t].navigationLineSettings[parseFloat(r.id.split("_NavigationIndex_")[1].split("_")[0])].width; r.setAttribute("stroke-width", (s / i).toString()) } } function jf(e) { for (var t = [], i = e.touches, n = 0; n < i.length; n++)t.push({ pageX: i[n].pageX, pageY: i[n].pageY }); return t } function If(e, t) { var i = kf(e[0], e[1]); return kf(t[0], t[1]) / i } function kf(e, t) { var i = e.pageX - t.pageX, n = e.pageY - t.pageY; return Math.sqrt(i * i + n * n) } function Pf(e, t) { var i = t.element.getBoundingClientRect(), n = i.top + document.defaultView.pageXOffset, r = i.left + document.defaultView.pageYOffset; return Array.prototype.slice.call(e).map(function (e) { return { x: e.pageX - r, y: e.pageY - n } }) } function Nf(e) { return { x: e.map(function (e) { return e.x }).reduce(Of) / e.length, y: e.map(function (e) { return e.y }).reduce(Of) / e.length } } function Of(e, t) { return e + t } function Rf(e, t, i, n, r, o, s) { var a = 0, l = s.previousPoint, h = s.previousScale, d = r - h, c = new kpe(0, 0), p = 1; if (r !== h) { var u = function (e, t) { return e.x === t.x ? null : (t.y - e.y) / (t.x - e.x) }(l, n), g = function (e, t) { return null === t ? e.x : e.y - t * e.x }(l, u), m = n.x - l.x, f = n.y - l.y; zf(e, t, i, function (e) { e.timeStamp > e.delay && (a = (e.timeStamp - e.delay) / e.duration, p = h + a * d, c.x = l.x + a * m / (p / r), c.y = null == u ? l.y + a * f : u * c.x + g, e.element.setAttribute("transform", "scale( " + p + " ) translate( " + c.x + " " + c.y + " )"), s.translatePoint = c, s.scale = p, s.zoomModule.processTemplate(n.x, n.y, p, s)) }, function () { s.translatePoint = n, s.scale = r, e.setAttribute("transform", "scale( " + r + " ) translate( " + n.x + " " + n.y + " )"), s.zoomModule.processTemplate(n.x, n.y, r, s) }) } else e.setAttribute("transform", "scale( " + r + " ) translate( " + n.x + " " + n.y + " )") } function zf(e, t, i, n, r) { var o, s = this, a = null, l = function (t) { a || (a = t); var h = t - a; h < i ? (n.call(s, { element: e, delay: 0, timeStamp: h, duration: i }), window.requestAnimationFrame(l)) : (window.cancelAnimationFrame(o), r.call(s, { element: e })) }; o = window.requestAnimationFrame(l) } function Bf(e, t, i, n) { var r = 0, o = e.getAttribute("transform").split(" "); 2 === o.length && (o[2] = o[1].split(")")[0], o[1] = o[0].split("(")[1]); var s = new kpe(parseInt(o[1], 10), parseInt(o[2], 10)), a = n.x - s.x, l = n.y - s.y, h = new kpe(0, 0); zf(e, 0, i, function (e) { e.timeStamp > e.delay && (r = (e.timeStamp - e.delay) / e.duration, h.x = s.x + r * a, h.y = s.y + r * l, e.element.setAttribute("transform", "translate( " + h.x + " " + h.y + " )")) }, function () { e.setAttribute("transform", "translate( " + n.x + " " + n.y + " )") }) } function Ff(e) { return "Line" === e.shapeAnnotationType || "LineWidthArrowHead" === e.shapeAnnotationType || "Distance" === e.shapeAnnotationType || "Polygon" === e.shapeAnnotationType } function Vf(e, t) { e && t && (t.style.fill = e.fillColor, t.style.strokeColor = e.strokeColor, t.style.color = e.strokeColor, t.style.strokeWidth = e.thickness, t.style.strokeDashArray = e.borderDashArray, t.style.opacity = e.opacity) } function Wf(e) { for (var t = 0, i = 0; i < e.length - 1; i++)t += T1.findLength(e[i], e[i + 1]); return t } function Hf(e) { return T1.getLengthFromListOfPoints(e) } function _f(e, t) { var i = { width: e.actualSize.width, height: e.actualSize.height, x: e.offsetX - e.actualSize.width * e.pivot.x + .5, y: e.offsetY - e.actualSize.height * e.pivot.y + .5, angle: e.rotateAngle + e.parentTransform, fill: e.style.fill, stroke: e.style.strokeColor, pivotX: e.pivot.x, pivotY: e.pivot.y, strokeWidth: 1, opacity: e.style.opacity, dashArray: e.style.strokeDashArray || "", visible: e.visible, id: e.id }; return t && (i.x += t.tx, i.y += t.ty), i } function Yf(e, t, i) { var r = {}, o = "properties"; if (e) { i = e.propName; var s = e[o] || e, a = [], l = []; if ((a = a.concat(Object.keys(s))).push("version"), i) { var h = function (e) { return void 0 !== e && "string" == typeof e && (e = n(e, window)), e }(t); l = h ? h(i) : [], a = a.concat(l) } for (var d = function (e) { switch (e) { case "nodes": case "children": return ["inEdges", "outEdges", "parentId", "processId", "nodeId", "umlIndex", "isPhase", "isLane"]; case "connectors": return ["parentId"]; case "annotation": case "annotations": return ["nodeId"]; case "shape": return ["hasHeader"] }return [] }(i), c = 0, p = a = a.concat(d); c < p.length; c++) { var u = p[c]; if ("historyManager" !== u) if ("wrapper" !== u) { !(!e[u] || !e.hasOwnProperty("observers")) || (e[u] instanceof Array ? r[u] = function (e, t, i) { var n; if (e) { n = []; for (var r = 0; r < e.length; r++)e[r] instanceof Array ? n.push(e[r]) : e[r] instanceof Object ? n.push(Yf(e[r], t, i)) : n.push(e[r]) } return n }(-1 === d.indexOf(u) && e[o] ? e[o][u] : e[u], t, u) : e[u] instanceof Array == !1 && e[u] instanceof HTMLElement ? r[u] = e[u].cloneNode(!0).innerHtml : e[u] instanceof Array == !1 && e[u] instanceof Object ? r[u] = Yf(-1 === d.indexOf(u) && e[o] ? e[o][u] : e[u]) : r[u] = e[u]) } else e[u] && (r[u] = { actualSize: { width: e[u].actualSize.width, height: e[u].actualSize.height }, offsetX: e[u].offsetX, offsetY: e[u].offsetY }) } } return r } function Uf(e, t) { Math.abs(e.sourcePoint.x - e.targetPoint.x), Math.abs(e.sourcePoint.y - e.targetPoint.y); var i = e.vertexPoints.slice(0); return i && i.length > 0 && (e.sourcePoint = i[0], e.targetPoint = i[i.length - 1]), i } function qf(e, t, i) { var n, r = new c1; return n = function (e, t) { for (var i, n = "", r = [], o = 0; o < t.length;)r.push({ x: t[o].x, y: t[o].y }), o++; r = Xf(e, r); for (var s = 0; s < r.length; s++)i = r[s], 0 === s && (n = "M" + i.x + " " + i.y), s > 0 && (n += " L" + i.x + " " + i.y); return n }(e, t), r = c1.toBounds(t), i.width = r.width, i.height = r.height, i.offsetX = r.x + i.width / 2, i.offsetY = r.y + i.height / 2, i.data = n, e.wrapper && (e.wrapper.offsetX = i.offsetX, e.wrapper.offsetY = i.offsetY, e.wrapper.width = r.width, e.wrapper.height = r.height), i } function Gf(e, t, i, n, r) { var o, s; t.offsetX = i.x, t.offsetY = i.y, s = T1.findAngle(i, n); var a = e.thickness <= 5 ? 5 : e.thickness; o = function (e) { return pge[e] }(r ? e.sourceDecoraterShapes : e.taregetDecoraterShapes); var l = new d1(2 * a, 2 * a); t.transform = Y0.Self, Vf(e, t), t.style.fill = "tranparent" !== e.fillColor ? e.fillColor : "white", t.rotateAngle = s, t.data = o, t.canMeasurePath = !0, t.width = l.width, t.height = l.height } function Qf(e, t, i, n) { var r = new M1; return Gf(e, r, t, i, n), r } function Xf(e, t) { return t[0] = Jf(e, t, !0), t[t.length - 1] = Jf(e, t, !1), t } function Jf(e, t, i) { var n = { x: 0, y: 0 }, r = { x: 0, y: 0 }, o = { x: 0, y: 0 }, s = t.length; r = i ? t[0] : t[s - 1], o = i ? t[1] : t[s - 2]; var a = T1.distancePoints(r, o); a = 0 === a ? 1 : a; var l = e.thickness; n.x = Math.round(r.x + l * (o.x - r.x) / a), n.y = Math.round(r.y + l * (o.y - r.y) / a); return n = T1.adjustPoint(n, o, !0, .5) } function Zf(e) { var t, i = ""; i = "M" + e[0].x + " " + e[0].y; var n; for (n = 1; n < e.length; n++)i += "L" + (t = e[n]).x + " " + t.y; return i += "Z" } function Kf(e, t) { var i = new y1; return Vf(e, i), i.style.fill = "transparent", i.id = Fd(), i.horizontalAlignment = "Center", i.rotateValue = { y: 10, angle: t }, i.verticalAlignment = "Top", i.relativeMode = "Object", i.setOffsetWithRespectToBounds(.5, .5, "Absolute"), i.rotateAngle = t, i.style.textWrapping = "NoWrap", i } function $f(e, t, i, n) { var r = new M1; r.offsetX = t.x, r.offsetY = t.y; var o, s = T1.findAngle(t, i), a = { x: (t.x + i.x) / 2, y: (t.y + i.y) / 2 }, l = Ld(); Sd(l, 0 - s, a.x, a.y); var h = Md(l, t), d = { x: h.x, y: h.y - e.leaderHeight }; Sd(l = Ld(), s, r.offsetX, r.offsetY), h = Md(l, d); var c = { x: t.x, y: t.y }; r.offsetX = c.x, r.offsetY = c.y, r.transform = Y0.Self, o = "M" + t.x + "," + t.y + ",L" + h.x + "," + h.y + "Z"; var p = new d1(0, e.leaderHeight); return r.pivot.x = .5, n ? (r.id = "leader2_" + Fd(), r.pivot.y = 0) : (r.id = "leader1_" + Fd(), r.pivot.y = 1), Vf(e, r), r.rotateAngle = s, r.data = o, r.canMeasurePath = !0, r.width = p.width, r.height = p.height, r } function ey(e, t) { for (var i = e.vertexPoints, n = 0; n < i.length - 1; n++) { var r = i[n], o = i[n + 1], s = c1.toBounds([r, o]); if (s.Inflate(10), s.containsPoint(t)) { var a = function (e, t, i) { var n, r = T1.findLength(t, e), o = T1.findLength(i, e); n = r > o ? i : t; var s = T1.findAngle(t, i), a = T1.findAngle(n, e), l = T1.findLength(n, e), h = a + 2 * (s - a); return { x: n.x + l * Math.cos(h * Math.PI / 180), y: n.y + l * Math.sin(h * Math.PI / 180) } }(t, r, o), l = hc({ x1: r.x, x2: o.x, y1: r.y, y2: o.y }, { x1: t.x, x2: a.x, y1: t.y, y2: a.y }); if (l.enabled) { var h = T1.findLength(t, l.intersectPt); if (Math.abs(h) < 10) return !0 } else { var d = c1.toBounds([t, t]); if (d.Inflate(3), d.containsPoint(r) || d.containsPoint(o)) return !0 } if (T1.equals(t, a)) return !0 } } return !1 } function ty(e, t, i) { if (i && t.activeElements.activePageID > -1) { return function (e, t, i) { for (var n = null, r = isNaN(t.offsetX) ? t.position ? t.position.x : 0 : t.offsetX, o = isNaN(t.offsetY) ? t.position ? t.position.y : 0 : t.offsetY, s = 0; s < e.length; s++)if ("Distance" !== e[s].shapeAnnotationType && "Line" !== e[s].shapeAnnotationType && "LineWidthArrowHead" !== e[s].shapeAnnotationType) { var a = e[s].wrapper.bounds; if ((a.x - 5) * i.getZoomFactor() < r && (a.x + a.width + 5) * i.getZoomFactor() > r && (a.y - 5) * i.getZoomFactor() < o && (a.y + a.height + 5) * i.getZoomFactor() > o) { n = e[s]; break } } else { var l = { x: r / i.getZoomFactor(), y: o / i.getZoomFactor() }, h = iy(e[s], l, 5), d = ey(e[s], l); if (h && d) { n = e[s]; break } } return n }(function (e, t, i) { var n = e.currentPosition || { x: i.offsetX, y: i.offsetY }; n = { x: n.x / e.getZoomFactor(), y: n.y / e.getZoomFactor() }; var r = t.getPageTable(e.activeElements.activePageID); return function (e, t) { for (var i = [], n = 0, r = t; n < r.length; n++) { var o = r[n]; (iy(o, e, 10) || "Stamp" === o.shapeAnnotationType && iy(o, e, 40)) && ny(o, "Zindex", i) } return i }(n, r.objects) }(t, i, e), e, t) } } function iy(e, t, i) { return function (e, t, i) { if (e && e.children) for (var n = e.children.length - 1; n >= 0; n--) { var r = e.children[n]; if (r && r.bounds.containsPoint(t, 10)) { if (r instanceof m1) { var o = this.findTargetElement(r, t); if (o) return o } if (r.bounds.containsPoint(t, 10)) return r } } if (e.bounds.containsPoint(t, i) && "none" !== e.style.fill) return e; return null }(e.wrapper, t, i) } function ny(e, t, i) { if (0 === i.length) i.push(e); else if (1 === i.length) i[0][t] > e[t] ? i.splice(0, 0, e) : i.push(e); else if (i.length > 1) { for (var n = 0, r = i.length - 1, o = Math.floor((n + r) / 2); o !== n;)i[o][t] < e[t] ? (n = o, o = Math.floor((n + r) / 2)) : i[o][t] > e[t] && (r = o, o = Math.floor((n + r) / 2)); i[r][t] < e[t] ? i.push(e) : i[n][t] > e[t] ? i.splice(n, 0, e) : i[n][t] < e[t] && i[r][t] > e[t] && i.splice(r, 0, e) } } function ry(e, t, i, n, r) { var o = Nd("div", { id: r.element.id + n + "_diagramAdornerLayer", style: "width:" + e.width + "px;height:" + e.height + "px;" + t }); if (!Pd(o.id)) { var s = function (e, t, i) { var n = document.createElementNS("http://www.w3.org/2000/svg", "svg"); return sc(n, { id: e, width: t, height: i }), n }(r.element.id + n + "_diagramAdorner_svg", e.width, e.height); s.setAttribute("class", "e-adorner-layer" + n), s.setAttribute("style", "pointer-events:none;"), r.adornerSvgLayer = ac("g", { id: r.element.id + "_diagramAdorner" }), r.adornerSvgLayer.setAttribute("style", " pointer-events: all; "), s.appendChild(r.adornerSvgLayer), o.appendChild(s), i.parentElement.appendChild(o); var a = ac("g", { id: r.element.id + "_SelectorElement" }); r.adornerSvgLayer.appendChild(a), sc(s, { style: "pointer-events:none;" }) } } function oy(e, t) { var i = 0, n = M("div", { className: t }).cloneNode(); return n.style.visibility = "hidden", n.style.position = "absolute", e.appendChild(n), i = Ly(n), k(n), i } function sy(e) { var t = getComputedStyle(e); return window.WebKitCSSMatrix ? new WebKitCSSMatrix(t.webkitTransform).m42 : 0 } function ay(e, t) { var i = new Date(e.getTime()); return t = (t - i.getDay() - 7) % 7, new Date(i.setDate(i.getDate() + t)) } function ly(e) { return new Date(e.getFullYear(), e.getMonth() + 1, 0) } function hy(e) { var t = new Date(e.getFullYear(), 0, 1).valueOf(), i = (new Date(e.getFullYear(), e.getMonth(), e.getDate()).valueOf() - t + Jve) / Jve; return Math.ceil(i / 7) } function dy(e, t) { var i = e.getTimezoneOffset(), n = new Date(e.getTime() + t), r = n.getTimezoneOffset() - i; return e.setTime(n.getTime() + r * Zve), e } function cy(e) { return e.setHours(0, 0, 0, 0), e } function py(e) { return e.getTime() - new Date(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0).getTime() } function uy(e, t) { return (t.getTime() - e.getTime()) / Jve } function gy(e, t) { return e = new Date("" + e), new Date(e.setDate(e.getDate() + t)) } function my(e, t) { var i = (e = new Date("" + e)).getDate(); return e.setDate(1), e.setMonth(e.getMonth() + t), e.setDate(Math.min(i, yy(e))), e } function fy(e, t, i) { var n = new Date(e.getTime()); n.setHours(t.getHours()), n.setMinutes(t.getMinutes()), n.setSeconds(t.getSeconds()); var r = new Date(e.getTime()); return 0 === i.getHours() ? r = gy(r, 1) : (r.setHours(i.getHours()), r.setMinutes(i.getMinutes()), r.setSeconds(i.getSeconds())), { startHour: n, endHour: r } } function yy(e) { return new Date(e.getFullYear(), e.getMonth() + 1, 0).getDate() } function vy(e, t) { var i = cy(new Date(e)); return (cy(new Date(t)).getTime() - i.getTime()) / Jve } function wy(e) { return -1 !== e.indexOf("Date") ? new Date(parseInt(e.match(/\d+/g).toString(), 10)) : -1 !== e.indexOf("T") ? new Date(e) : new Date(e.replace(/-/g, "/")) } function by() { if (null !== Kve) return Kve; var e = M("div"), t = 0; e.style.cssText = "width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;", document.body.appendChild(e); var i = devicePixelRatio ? "1.10" === devicePixelRatio.toFixed(2) || devicePixelRatio <= 1 ? Math.ceil(devicePixelRatio % 1) : Math.floor(devicePixelRatio % 1) : 0; return t = e.offsetWidth - e.clientWidth - i | 0, document.body.removeChild(e), Kve = t } function Cy(e, t, i) { for (var n = 0, r = e.length; n < r; n++)if (e[n][t] === i) return n; return -1 } function Ly(e) { var t = getComputedStyle(e); return e.offsetHeight + (parseInt(t.marginTop, 10) || 0) + (parseInt(t.marginBottom, 10) || 0) } function My(e, t, i) { var r = ""; if (e.monthDay.length) r += e.monthDay[0]; else if (e.day) { var o = e.setPosition - 1; r += i.getConstant(dCe[o > -1 ? o : dCe.length - 1]) + " " + n(wCe[e.day[0]], t) } return r } function Sy(e, t, i, n, r, o, s) { void 0 === r && (r = hCe), void 0 === o && (o = null), void 0 === s && (s = "Gregorian"); var a, l = Yy(t); Nve = Qy(s); var h = [], c = new Date(e.getTime()); Ive = []; if ((d(i) ? [] : i.split(",")).forEach(function (e) { var t = xy(e); Ive.push(new Date(t.getTime()).setHours(0, 0, 0, 0)) }), l.recExceptionCount = d(l.count) ? 0 : Ive.length, Pve = o && o > e && !l.count ? new Date(new Date(o.getTime()).setHours(0, 0, 0)) : null, !l.until && Pve && ((a = new Date(Pve.getTime())).setDate(Pve.getDate() + r * l.interval), l.until = a), l.until && e > l.until) return h; switch (kve = r, function (e) { for (; aCe[0] !== e;)qy(aCe) }(lCe[n]), l.freq) { case "DAILY": !function (e, t, i, n) { var r = new Date(e.getTime()), o = n.interval, s = n.count ? n.count : kve, a = n.day; for (; Wy(r, t) && (!0, !(Gy(r, n) && (a.indexOf(lCe[r.getDay()]) > -1 || 0 === a.length) && (Ty(i, r.getTime()), s && i.length + n.recExceptionCount >= s)));)r.setDate(r.getDate() + o) }(c, l.until, h, l); break; case "WEEKLY": !function (e, t, i, n) { var r = new Date(e.getTime()); n.day.length || n.day.push(lCe[e.getDay()]); var o, s = n.interval, a = n.day, l = n.count ? n.count : kve, h = !0, c = []; if (a.length > 1) for ((d(n.wkst) || "" === n.wkst) && (n.wkst = aCe[0]), o = lCe.indexOf(n.wkst); Wy(r, t);) { var p = lCe.indexOf(lCe[r.getDay()]) - o, u = gy(r, -(p = -1 === p ? 6 : p)), g = gy(u, 6), m = new Date(r.getTime()); for (cy(g), cy(m); g >= m && (a.indexOf(lCe[r.getDay()]) > -1 && c.push([r.getTime()]), !(l && i.length + n.recExceptionCount >= l));)r.setDate(r.getDate() + 1), cy(m = new Date(r.getTime())); if (r.setDate(r.getDate() - 1), l && i.length + n.recExceptionCount >= l) break; r.setDate(r.getDate() + 1 + 7 * (s - 1)), Ny(c, h, e, t, i, n), c = [] } else { for (r = _y(e, n.day); Wy(r, t) && ((h = Gy(r, n)) && a.indexOf(lCe[r.getDay()]) > -1 && Ty(i, r.getTime()), !(l && i.length + n.recExceptionCount >= l));)r.setDate(r.getDate() + 7 * s); Ny(c, h, e, t, i, n), c = [] } }(c, l.until, h, l); break; case "MONTHLY": Dy(c, l.until, h, l); break; case "YEARLY": !function (e, t, i, n) { switch (function (e) { { if (e.yearDay.length) return "YEARDAY"; if (e.weekNo.length) return "WEEKNO" } return "MONTH" }(n)) { case "MONTH": Dy(e, t, i, n); break; case "WEEKNO": !function (e, t, i, n) { var r, o, s, a, l, h, c = Nve.getYearLastDate(e, 0), p = n.count ? n.count : kve, u = n.weekNo, g = [], m = n.day; for (; Wy(c, t);) { o = aCe.indexOf(lCe[c.getDay()]), s = 6 - o + 1; for (var f = 0; f < u.length; f++)for (a = u[f], l = 1 === (a = a > 0 ? a : 53 + a + 1) ? s : s + 7 * (a - 1), h = 1 === a ? s - 7 : s + 7 * (a - 2); h < l;)r = new Date(c.getTime() + Jve * h), (0 === m.length || m.indexOf(lCe[r.getDay()]) > -1) && (d(n.setPosition) ? By(void 0, e, t, i, n, r.getTime()) : g.push([r.getTime()])), h++; if (d(n.setPosition) || Vy(g, void 0, e, t, i, n), p && i.length + n.recExceptionCount >= p) return; c = Nve.getYearLastDate(r, n.interval), g = [] } }(e, t, i, n); break; case "YEARDAY": !function (e, t, i, n) { var r, o, s = Nve.getYearLastDate(e, 0), a = n.count ? n.count : kve, l = [], h = n.day; for (; Wy(s, t);) { for (var c = 0; c < n.yearDay.length; c++)o = n.yearDay[c], r = new Date(s.getTime()), o !== Nve.getLeapYearDaysCount() && o !== -Nve.getLeapYearDaysCount() || Nve.isLeapYear(Nve.getFullYear(r), 1) ? (r.setDate(r.getDate() + (o < 0 ? Nve.getYearDaysCount(r, 1) + 1 + o : o)), (0 === h.length || h.indexOf(lCe[r.getDay()]) > -1) && (null == n.setPosition ? By(void 0, e, t, i, n, r.getTime()) : l.push([r.getTime()]))) : r.setDate(r.getDate() + 1); if (d(n.setPosition) || Vy(l, void 0, e, t, i, n), a && i.length + n.recExceptionCount >= a) return; s = Nve.getYearLastDate(r, n.interval), l = [] } }(e, t, i, n) } }(c, l.until, h, l) }return h } function xy(e) { return new Date(e.substr(0, 4) + "-" + e.substr(4, 2) + "-" + e.substr(6, 5) + ":" + e.substr(11, 2) + ":" + e.substr(13)) } function Ty(e, t) { var i = new Date(t).setHours(0, 0, 0, 0); -1 === Ive.indexOf(i) && (!Pve || i >= Pve.getTime()) && e.push(t) } function Dy(e, t, i, n) { n.month.length || n.day.length || n.monthDay.length ? n.month.length > 0 && !n.day.length && !n.monthDay.length && n.monthDay.push(e.getDate()) : (n.monthDay.push(e.getDate()), "YEARLY" === n.freq && n.month.push(e.getMonth() + 1)); switch (function (e) { { if (e.monthDay.length && !e.day.length) return "date"; if (!e.monthDay.length && e.day.length) return "day" } return "both" }(n)) { case "day": switch (n.freq) { case "MONTHLY": Py(e, t, i, n); break; case "YEARLY": !function (e, t, i, n) { var r = n.day, o = r.map(function (e) { return bCe.test(e) }); { if (r.length > 1 && o.indexOf(!0) > -1) return void function (e, t, i, n) { var r, o, s, a = n.day, l = n.count ? n.count : kve, h = new Date(e.getTime()), c = n.interval, p = [], u = [], g = 0; h = Nve.getMonthStartDate(h); var m = []; n.month.length && Nve.setMonth(h, n.month[0], 1); h = _y(h, n.day); for (; Wy(h, t);) { o = new Date(h.getTime()); for (var f = 0; f <= n.month.length; f++)for (var y = 0; y <= a.length - 1; y++) { for (h = _y(h = Nve.getMonthStartDate(h), n.day), p = []; Nve.isSameYear(o, h) && l && i.length + n.recExceptionCount <= l;)for (; Nve.isSameYear(o, h);) { if (o = new Date(h.getTime()), 0 === n.month.length || n.month.length > 0 && n.month[f] === Nve.getMonth(o)) { var v = a[y].match(LCe), w = parseInt(v[0], 10); for (s = new Date(h.getTime()); Nve.isSameYear(s, h) && Nve.isSameMonth(s, h);)v[v.length - 1] === lCe[s.getDay()] && p.push([s.getTime()]), s.setDate(s.getDate() + 1); s.setDate(s.getDate() - 1), r = v[0].indexOf("-") > -1 ? p.length - -1 * w : w - 1, r = isNaN(r) ? 0 : r } g = Iy(h, n, g, void 0, 1), h = _y(h, n.day) } if (h = 0 === y && s ? new Date(s.getTime()) : new Date(o.getTime()), p.length > 0 && (d(n.setPosition) ? Vy(p, void 0, e, t, i, n, r) : u = [zy(p, r, m)]), l && i.length + n.recExceptionCount >= l) return } d(n.setPosition) || (Fy(u, void 0, e, t, i, n), m = []), Nve.isLastMonth(h) ? (Nve.setValidDate(h, 1, 1), h.setFullYear(h.getFullYear() + c - 1)) : h.setFullYear(h.getFullYear() + c), h = _y(h, n.day), n.month.length && Nve.setMonth(h, n.month[0], h.getDate()) } }(e, t, i, n); if (n.month.length && 1 === r.length && o.indexOf(!0) > -1) return void Py(e, t, i, n) } var s, a = new Date(e.getTime()), l = n.count ? n.count : kve, h = n.interval, c = []; n.month.length && Nve.setMonth(a, n.month[0], a.getDate()); d(n.setPosition) && 0 === n.month.length && 0 === n.weekNo.length && a.setFullYear(e.getFullYear(), 0, 1); a = _y(a = Nve.getMonthStartDate(a), n.day); for (; Wy(a, t);) { for (s = new Date(a.getTime()); Nve.isSameYear(s, a) && l && i.length + n.recExceptionCount <= l;)for (s = new Date(a.getTime()); Nve.isSameYear(s, a);) { if (!(0 === n.month.length || n.month.length > 0 && !Nve.checkMonth(a, n.month))) { Nve.setValidDate(a, 1, 1), a = _y(a, n.day); break } if (r.length > 1) { if (Nve.compareMonth(s, a)) { Nve.setValidDate(a, 1, 1), a = _y(a, n.day); break } r.indexOf(lCe[s.getDay()]) > -1 && c.push([s.getTime()]), s.setDate(s.getDate() + 1) } else { if (s.getFullYear() > a.getFullYear()) { Nve.setValidDate(a, 1, 1), a = _y(a, n.day); break } var p = Hy(r[0]); lCe[s.getDay()] === p && new Date(s.getFullYear(), s.getMonth(), 0) > new Date(e.getFullYear()) && c.push([s.getTime()]), s.setDate(s.getDate() + 7) } } if (a.setFullYear(s.getFullYear(), s.getMonth(), s.getDate()), Ry(c, e, t, i, n), Nve.isLastMonth(a) && (Nve.setValidDate(a, 1, 1), a = _y(a, n.day)), a.setFullYear(a.getFullYear() + h - 1), l && i.length + n.recExceptionCount >= l) return; a = _y(a, n.day), c = [] } }(e, t, i, n) }break; case "both": case "date": switch (n.freq) { case "MONTHLY": Ey(e, t, i, n); break; case "YEARLY": !function (e, t, i, n) { if (n.month.length) return void Ey(e, t, i, n); var r, o = Ay(e, n); o.tempDate = o.mainDate = Nve.getMonthStartDate(o.tempDate); for (; Wy(o.tempDate, t);) { for (r = new Date(o.tempDate.getTime()); Nve.isSameYear(r, o.tempDate) && o.expectedCount && i.length + n.recExceptionCount <= o.expectedCount;) { if (!(0 === n.month.length || n.month.length > 0 && !Nve.checkMonth(o.tempDate, n.month))) { Nve.setValidDate(o.tempDate, 1, 1), o.tempDate = _y(o.tempDate, n.day); break } jy(n, o, t, !1), o.beginDate = new Date(o.tempDate.getTime()), o.monthInit = Iy(o.tempDate, n, o.monthInit, o.beginDate) } if (o.tempDate.setFullYear(r.getFullYear(), r.getMonth(), r.getDate()), Ny(o.dateCollection, o.state, e, t, i, n), Nve.isLastMonth(o.tempDate) && (Nve.setValidDate(o.tempDate, 1, 1), o.tempDate = _y(o.tempDate, n.day)), o.expectedCount && i.length + n.recExceptionCount >= o.expectedCount) return; o.tempDate.setFullYear(o.tempDate.getFullYear() + n.interval - 1), o.tempDate = _y(o.tempDate, n.day), o.monthInit = Iy(o.tempDate, n, o.monthInit, o.beginDate), o.dateCollection = [] } }(e, t, i, n) } } } function Ay(e, t) { var i = { monthCollection: [], index: 0, tempDate: new Date(e.getTime()), mainDate: new Date(e.getTime()), expectedCount: t.count ? t.count : kve, monthInit: 0, dateCollection: [] }; return t.month.length && Nve.setMonth(i.tempDate, t.month[0], i.tempDate.getDate()), i } function Ey(e, t, i, n) { var r = Ay(e, n); for (r.tempDate = r.mainDate = Nve.getMonthStartDate(r.tempDate); Wy(r.tempDate, t);) { if (r.beginDate = new Date(r.tempDate.getTime()), jy(n, r, t, !0, e, i), d(n.setPosition) || Vy(r.dateCollection, r.state, e, t, i, n), r.expectedCount && i.length + n.recExceptionCount >= r.expectedCount) return; r.monthInit = Iy(r.tempDate, n, r.monthInit, r.beginDate), r.dateCollection = [] } } function jy(e, t, i, n, r, o) { for (var s = 0; s < e.monthDay.length; s++) { t.date = e.monthDay[s], t.tempDate = Nve.getMonthStartDate(t.tempDate); var a = Nve.getMonthDaysCount(t.tempDate); if (t.date = t.date > 0 ? t.date : a + t.date + 1, function (e, t, i) { var n = Nve.getMonthDaysCount(e); return t <= n && e >= i }(t.tempDate, t.date, t.mainDate) && t.date > 0) { if (Nve.setDate(t.tempDate, t.date), i && t.tempDate > i) return; (0 === e.day.length || e.day.indexOf(lCe[t.tempDate.getDay()]) > -1) && (n && d(e.setPosition) && t.expectedCount && o.length + e.recExceptionCount < t.expectedCount ? By(t.state, r, i, o, e, t.tempDate.getTime()) : t.dateCollection.push([t.tempDate.getTime()])) } } } function Iy(e, t, i, n, r) { void 0 === n && (n = null); var o = n ? n.getMonth() : 0, s = Nve.getMonthStartDate(e); return r = d(r) ? t.interval : r, e.setFullYear(s.getFullYear()), e.setMonth(s.getMonth()), e.setDate(s.getDate()), t.month.length ? (i++ , i %= t.month.length, Nve.setMonth(e, t.month[i], 1), 0 === i && Nve.addYears(e, r, t.month[0])) : (n && n.getFullYear() < e.getFullYear() && (o = e.getMonth() - 1), Nve.setValidDate(e, r, 1, o, n)), i } function ky(e, t, i, n) { var r = n.day, o = new Date(e.getTime()); o = Nve.getMonthStartDate(o); var s, a, l = [], h = [], c = [], p = n.count ? n.count : kve, u = 0; for (n.month.length && Nve.setMonth(o, n.month[0], 1), o = _y(o, n.day); Wy(o, t) && p && i.length + n.recExceptionCount < p;) { var g = new Date(o.getTime()); if (r.map(function (e) { return bCe.test(e) }).indexOf(!0) > -1) { for (var m = 0; m <= r.length - 1; m++) { var f = r[m].match(LCe), y = parseInt(f[0], 10); for (o = new Date(o.getTime()), o = _y(o = Nve.getMonthStartDate(o), r), g.setFullYear(o.getFullYear(), o.getMonth(), o.getDate()); Nve.isSameYear(g, o) && Nve.isSameMonth(g, o);)f[f.length - 1] === lCe[g.getDay()] && l.push([g.getTime()]), g.setDate(g.getDate() + 1); if (g.setDate(g.getDate() - 1), s = f[0].indexOf("-") > -1 ? l.length - -1 * y : y - 1, s = isNaN(s) ? 0 : s, l.length > 0 && (d(n.setPosition) ? Vy(l, void 0, e, t, i, n, s) : h = [zy(l, s, c)]), p && i.length + n.recExceptionCount >= p) return; l = [] } d(n.setPosition) || (Fy(h, void 0, e, t, i, n), c = []), u = Iy(o, n, u, a), o = _y(o, n.day), l = [] } else { var v = [], w = function (e) { var t = {}; return e.forEach(function (i, n) { if (n === e.length - 1) { for (var r = aCe.indexOf(i), o = r; o % 7 !== aCe.indexOf(e[0]);)o++; t[i] = o - r } else t[i] = aCe.indexOf(e[n + 1]) - aCe.indexOf(i) }), t }(r); g.setFullYear(o.getFullYear(), o.getMonth(), o.getDate()); var b = new Date(o.getTime()); for (a = new Date(o.getTime()); Nve.isSameMonth(b, o);)v.push(o.getTime()), r.indexOf(lCe[o.getDay()]) > -1 && (l.push(v), v = []), o.setDate(o.getDate() + w[lCe[o.getDay()]]); if (s = n.setPosition < 1 ? l.length + n.setPosition : n.setPosition - 1, d(n.setPosition)) { s = 0; for (var C = [], L = 0; L < l.length; L++)for (var M = 0; M < l[L].length; M++)C.push(l[L][M]); l = [C] } if (l.length > 0 && Vy(l, void 0, e, t, i, n, s), p && i.length + n.recExceptionCount >= p) return; u = Iy(o, n, u, a), o = _y(o, n.day), l = [] } } } function Py(e, t, i, n) { if (n.day.length > 1) ky(e, t, i, n); else { var r, o = new Date(e.getTime()), s = n.count ? n.count : kve, a = [], l = 0; for (o = Nve.getMonthStartDate(o), n.month.length && Nve.setMonth(o, n.month[0], 1), o = _y(o, n.day); Wy(o, t) && s && i.length + n.recExceptionCount < s;) { r = new Date(o.getTime()); for (var h = new Date(o.getTime()); Nve.isSameMonth(o, h);)a.push([h.getTime()]), h.setDate(h.getDate() + 7); Ry(a, e, t, i, n), l = Iy(o, n, l, r), o = _y(o, n.day), a = [] } } } function Ny(e, t, i, n, r, o) { var s = o.setPosition < 1 ? e.length + o.setPosition : o.setPosition - 1; d(o.setPosition) && (s = 0, e = Oy(e)), e.length > 0 && Vy(e, t, i, n, r, o, s) } function Oy(e) { for (var t = [], i = 0; i < e.length; i++)for (var n = 0; n < e[i].length; n++)t.push(new Date(e[i][n]).getTime()); return e = t.length > 0 ? [t] : [] } function Ry(e, t, i, n, r) { var o, s, a = []; e = (s = function (e, t) { var i, n = { monthCollection: [], index: 0 }; if (1 === t.length) { var r = t[0].match(LCe), o = void 0; r.length > 1 ? i = (o = parseInt(r[0], 10)) < 1 ? e.length + o : o - 1 : (i = 0, e = Oy(e)) } else i = 0, e = Oy(e); return n.monthCollection = e, n.index = i, n }(e, r.day)).monthCollection, o = s.index, null != r.setPosition ? Fy([zy(e, o, a)], void 0, t, i, n, r) : e.length > 0 && Vy(e, void 0, t, i, n, r, o), a = [] } function zy(e, t, i) { for (var n = 0; n < e[t].length; n++)i.push(e[t][n]); return i } function By(e, t, i, n, r, o) { var s = r.count ? r.count : kve, a = new Date(o); e = Gy(a, r), a >= t && Wy(a, i) && e && s && n.length + r.recExceptionCount < s && Ty(n, o) } function Fy(e, t, i, n, r, o) { if (e.length > 0) for (var s = 0; s < e.length; s++) { e[s].sort(); var a = o.setPosition < 1 ? e[s].length + o.setPosition : o.setPosition - 1; By(t, i, n, r, o, e[s][a]) } } function Vy(e, t, i, n, r, o, s) { if (e.length > 0) { e[s = d(s) ? o.setPosition < 1 ? e.length + o.setPosition : o.setPosition - 1 : s].sort(); for (var a = 0; a < e[s].length; a++) { By(t, i, n, r, o, e[s][a]) } } } function Wy(e, t) { return !t || e <= t } function Hy(e) { return e.replace(CCe, "") } function _y(e, t) { var i, n = new Date(e.getTime()); if (t.length > 0) { for (var r = [], o = 0; o <= t.length - 1; o++)i = Hy(t[o]), r.push(i); if (-1 === r.indexOf(lCe[n.getDay()])) do { n.setDate(n.getDate() + 1) } while (-1 === r.indexOf(lCe[n.getDay()])) } return n } function Yy(e) { var t, i = { freq: null, interval: 1, count: null, until: null, day: [], wkst: null, month: [], weekNo: [], monthDay: [], yearDay: [], setPosition: null, validRules: [] }, n = []; if (e.split(";").forEach(function (e) { switch ((n = e.split("="))[0]) { case "UNTIL": t = n[1], i.until = xy(t); break; case "BYDAY": i.day = n[1].split(","), i.validRules.push(n[0]); break; case "BYMONTHDAY": i.monthDay = n[1].split(",").map(Number), i.validRules.push(n[0]); break; case "BYMONTH": i.month = n[1].split(",").map(Number), i.validRules.push(n[0]); break; case "BYYEARDAY": i.yearDay = n[1].split(",").map(Number), i.validRules.push(n[0]); break; case "BYWEEKNO": i.weekNo = n[1].split(",").map(Number), i.validRules.push(n[0]); break; case "INTERVAL": i.interval = parseInt(n[1], 10); break; case "COUNT": i.count = parseInt(n[1], 10); break; case "BYSETPOS": i.setPosition = parseInt(n[1], 10); break; case "FREQ": i.freq = n[1]; break; case "WKST": i.wkst = n[1] } }), "MONTHLY" === i.freq && 0 === i.monthDay.length) { var r = i.validRules.indexOf("BYDAY"); i.validRules.splice(r, 1) } return i } function Uy(e, t) { var i, n = t.slice(0), r = function (e) { sCe[Nve.getFullYear(e)] || (sCe[Nve.getFullYear(e)] = Nve.getYearLastDate(e, 0)); var t = sCe[Nve.getFullYear(e)], i = e.getTime() - t.getTime(); return Math.ceil(i / Jve) }(e); for (i = n.shift(); i;) { if (i < 0 && (i = i + Nve.getYearDaysCount(e, 0) + 1), i === r) return !1; i = n.shift() } return !0 } function qy(e) { var t = e.shift(); e.push(t) } function Gy(e, t) { var i = !0, n = t.day, r = t.month, o = Nve.getExpectedDays(e, t.monthDay), s = t.yearDay; return t.validRules.forEach(function (t) { switch (t) { case "BYDAY": (function (e, t) { var i = []; return t.forEach(function (e) { var t = e.match(LCe); 2 === t.length ? i.push(t[1]) : i.push(t[0]) }), -1 === i.indexOf(lCe[e]) })(e.getDay(), n) && (i = !1); break; case "BYMONTH": Nve.checkMonth(e, r) && (i = !1); break; case "BYMONTHDAY": (function (e, t) { var i, n = t.slice(0), r = Nve.getMonthDaysCount(e); for (i = n.shift(); i;) { if (i < 0 && (i = i + r + 1), i === e.getDate()) return !1; i = n.shift() } return !0 })(e, o) && (i = !1); break; case "BYYEARDAY": Uy(e, s) && (i = !1) } }), i } function Qy(e) { return "Islamic" === e ? new oCe : new rCe } function Xy(e) { return [e.getUTCFullYear(), Jy(e.getUTCMonth() + 1), Jy(e.getUTCDate()), "T", Jy(e.getUTCHours()), Jy(e.getUTCMinutes()), Jy(e.getUTCSeconds()), "Z"].join("") } function Jy(e) { return ("0" + e).slice(-2) } function Zy(e, t) { return null !== e && void 0 !== e ? -1 !== e.indexOf("%") ? t / 100 * parseInt(e, 10) : parseInt(e, 10) : null } function Ky(e, t) { var i = document.getElementById("treeMapMeasureText"); return null === i && (i = M("text", { id: "treeMapMeasureText" }), document.body.appendChild(i)), i.innerHTML = e, i.style.position = "absolute", i.style.fontSize = t.size, i.style.fontWeight = t.fontWeight, i.style.fontStyle = t.fontStyle, i.style.fontFamily = t.fontFamily, i.style.visibility = "hidden", i.style.top = "-100", i.style.left = "0", i.style.whiteSpace = "nowrap", i.style.lineHeight = "normal", new XMe(i.clientWidth, i.clientHeight) } function $y(e, t, i) { var n = t, r = Ky(t, i).width; if (r > e) for (var o = t.length - 1; o >= 0; --o)if (n = t.substring(0, o) + "...", (r = Ky(n, i).width) <= e || n.length < 4) return n.length < 4 && (n = " "), n; return n } function ev(e, t, i, n) { var r, o; switch (t) { case "Near": r = e.x; break; case "Center": r = "title" === n ? e.width / 2 - i.width / 2 : e.x + e.width / 2 - i.width / 2; break; case "Far": r = "title" === n ? e.width - e.y - i.width : e.x + e.width - i.width }return o = "title" === n ? e.y + i.height / 2 : e.y + e.height / 2 + i.height / 2, new eSe(r, o) } function tv(e, t, i) { var n; return (n = e.createText(t, i)).setAttributeNS("http://www.w3.org/XML/1998/namespace", "xml:space", "preserve"), n.style["user-select"] = "none", n.style["-moz-user-select"] = "none", n.style["-webkit-touch-callout"] = "none", n.style["-webkit-user-select"] = "none", n.style["-khtml-user-select"] = "none", n.style["-ms-user-select"] = "none", n.style["-o-user-select"] = "none", n } function iv(e, t, i, n, r) { void 0 === r && (r = !1); var o, s, a, l = { "font-size": t.size, "font-style": t.fontStyle, "font-family": t.fontFamily, "font-weight": t.fontWeight, "text-anchor": e.anchor, transform: e.transform, opacity: t.opacity, "dominant-baseline": e.baseLine, id: e.id, x: e.x, y: e.y, fill: i }, h = "string" == typeof e.text ? e.text : r ? e.text[e.text.length - 1] : e.text[0], c = new JE(""); if (!d(h) && !d(e.connectorText) && h.search(e.connectorText[1]) >= 0) { var p = void 0; p = h.split("#"); for (var u = 0; u < p.length; u++) { var g = -1 === p[u].search(e.connectorText) || d(e.connectorText) ? p[u] : e.connectorText; if (l.id = e.id + "_" + u, a = tv(c, l, g), u % 2 == 0 && 0 !== u) { g = g.replace(/\s+/g, "&nbsp") } var m = Ky(g, t); l.x = 0 !== u ? l.x + m.width : l.x + m.width + 5, n.appendChild(a) } } else a = tv(c, l, h), n.appendChild(a); if ("string" != typeof e.text && e.text.length > 1) { for (var f = 1, y = e.text.length; f < y; f++)s = Ky(e.text[f], t).height, o = c.createTSpan({ x: e.x, id: e.id, y: e.y + f * s }, e.text[f]), a.appendChild(o); n.appendChild(a) } return a } function nv(e) { return document.getElementById(e) } function rv(e, t) { return e.weight === t.weight ? 0 : e.weight < t.weight ? 1 : -1 } function ov(e, t, i, n) { for (var r, o = !1, s = "", a = n.leafItemSettings, l = 0; l < e.length; l++)if (r = n.levels[l] ? n.levels[l].groupPath : a.labelPath ? a.labelPath : n.weightValuePath, e[l] === i[r] && (s += i[r] + (l === e.length - 1 ? "" : "#")) === t) { o = !0; break } return o } function sv(e) { var t; if (e) { var i = Object.keys(e); t = new Object; for (var n = 0; n < i.length; n++)if (e[i[n]] instanceof Array) { t.values = e[i[n]], t.key = i[n]; break } } return t } function av(e, t, i, n) { if ("Child" === i) { t.push(e.levelOrderName); var r = sv(e).values; if (r && r.length > 0) { for (var o = 0; o < r.length; o++)-1 === t.indexOf(r[o].levelOrderName) && t.push(r[o].levelOrderName); for (var s = 0; s < r.length; s++)av(r[s], t, i, n) } } else if ("Parent" === i) "string" == typeof e.levelOrderName && -1 === t.indexOf(e.levelOrderName) && (t.push(e.levelOrderName), av(e.parent, t, i, n)); else if ("All" === i) { var a = e.levelOrderName.split("#")[0], l = void 0; for (o = 0; o < n.layout.renderItems.length; o++)(l = n.layout.renderItems[o]).levelOrderName.indexOf(a) > -1 && -1 === t.indexOf(l.levelOrderName) && t.push(l.levelOrderName) } else t.push(e.levelOrderName); return t } function lv(e) { var t = null; try { document.querySelectorAll(e).length && (t = ce(document.querySelector(e).innerHTML.trim())) } catch (i) { t = ce(e) } return t } function hv(e, t, i) { for (var n = M("div", { id: t, styles: "position: absolute;pointer-events: auto;" }); e.length > 0;)n.appendChild(e[0]); for (var r = n.innerHTML, o = Object.keys(i), s = 0; s < o.length; s++)r = r.replace(new RegExp("{{:" + o[s] + "}}", "g"), i[o[s].toString()]); return n.innerHTML = r, n } function dv(e, t, i, n, r) { var o = new eSe(0, 0), s = (r.element.getBoundingClientRect(), "Template" === n ? r.areaRect.x : 0), a = "Template" === n ? r.areaRect.y : 0; return o.x = Math.abs(s - (t.indexOf("Left") > -1 ? e.x + 5 : t.indexOf("Right") > -1 ? e.x + e.width - i.width : e.x + (e.width / 2 - i.width / 2))) - 2, !r.enableDrillDown || "BottomLeftTopRight" !== r.renderDirection && "BottomRightTopLeft" !== r.renderDirection ? o.y = Math.abs(a - (t.indexOf("Top") > -1 ? "Template" === n ? e.y : e.y + i.height : t.indexOf("Bottom") > -1 ? e.y + e.height - i.height : "Template" === n ? e.y + (e.height / 2 - i.height / 2) : e.y + e.height / 2 + i.height / 4)) : o.y = Math.abs(e.y + e.height - i.height + 5), o } function cv(e, t) { var i = new XMe(0, 0); return t.appendChild(e), i.height = e.offsetHeight, i.width = e.offsetWidth, document.getElementById(e.id).remove(), i } function pv(e) { return (e.width - e.x) * (e.height - e.y) } function uv(e) { var t = gv(e), i = t.width, n = t.height; return Math.min(i, n) } function gv(e) { var t = e.x, i = e.y; return { x: t, y: i, width: e.width - t, height: e.height - i } } function mv(e) { var t = e.x, i = e.y; return { x: t, y: i, width: t + e.width, height: i + e.height } } function fv(e, t, i) { var n = i.getBoundingClientRect(), r = i.ownerDocument.defaultView.pageXOffset, o = i.ownerDocument.defaultView.pageYOffset, s = i.ownerDocument.documentElement.clientTop, a = i.ownerDocument.documentElement.clientLeft, l = n.left + r - a, h = n.top + o - s; return new eSe(e - l, t - h) } function yv(e, t, i, n) { var r, o, s = []; if (d(t) && d(i) && isNaN(i)) return null; for (var a = 0; a < e.length; a++) { var l = !1, h = i; d(e[a].from) || d(e[a].to) || d(e[a].value) ? (d(e[a].from) || d(e[a].to)) && d(e[a].value) || (i >= e[a].from && e[a].to >= i || e[a].value === t) && (e[a].value === t && (l = !0), r = "[object Array]" === Object.prototype.toString.call(e[a].color) ? l ? e[a].color[0] : wv(e[a], h) : e[a].color) : i >= e[a].from && e[a].to >= i && e[a].value === t && (l = !0, r = "[object Array]" === Object.prototype.toString.call(e[a].color) ? l ? e[a].color[0] : wv(e[a], h) : e[a].color), (i >= e[a].from && i <= e[a].to || e[a].value === t) && !d(e[a].minOpacity) && !d(e[a].maxOpacity) && r && (o = vv(n, e[a], r, i)), ("" === r || d(r)) && d(e[a].from) && d(e[a].to) && d(e[a].minOpacity) && d(e[a].maxOpacity) && d(e[a].value) && (r = "[object Array]" === Object.prototype.toString.call(e[a].color) ? e[a].color[0] : e[a].color), o = d(o) ? "1" : o, s.push(r) } for (var c = s.length - 1; c >= 0; c--)c = (r = s[c]) ? -1 : c; return { fill: r, opacity: o } } function vv(e, t, i, n) { var r = 1; if (n >= t.from && n <= t.to) { r = (n - t.from) / (t.to - t.from) * (t.maxOpacity - t.minOpacity) + t.minOpacity } return r.toString() } function wv(e, t) { return Cv(e, t) } function bv(e, t, i) { return "#" + Nv(e) + Nv(t) + Nv(i) } function Cv(e, t) { var i; return Number(t) === e.from ? e.color[0] : Number(t) === e.to ? e.color[e.color.length - 1] : bv((i = Lv(Number(t), e)).r, i.g, i.b) } function Lv(e, t) { var i = t.from, n = t.to, r = 0, o = n - i; r = (e - i) / o; var s, a; if (t.color.length <= 2) s = "#" === t.color[0].charAt(0) ? t.color[0] : Rv(t.color[0]), a = "#" === t.color[t.color.length - 1].charAt(0) ? t.color[t.color.length - 1] : Rv(t.color[t.color.length - 1]); else { s = "#" === t.color[0].charAt(0) ? t.color[0] : Rv(t.color[0]), a = "#" === t.color[t.color.length - 1].charAt(0) ? t.color[t.color.length - 1] : Rv(t.color[t.color.length - 1]); for (var l = o / (t.color.length - 1), h = t.color.length - 1, d = [], c = {}, p = 1; p < h; p++)c = { b: i + p * l, color: t.color[p] }, d.push(c); for (var u = 0; u < d.length; u++)i <= e && e <= d[u].b && 0 === u ? (a = "#" === d[u].color.charAt(0) ? d[u].color : Rv(d[u].color), r = e < d[u].b ? 1 - Math.abs((e - d[u].b) / l) : (e - d[u].b) / l) : d[u].b <= e && e <= n && u === d.length - 1 && (s = "#" === d[u].color.charAt(0) ? d[u].color : Rv(d[u].color), r = e < d[u].b ? 1 - Math.abs((e - d[u].b) / l) : (e - d[u].b) / l), u !== d.length - 1 && u < d.length && d[u].b <= e && e <= d[u + 1].b && (s = "#" === d[u].color.charAt(0) ? d[u].color : Rv(d[u].color), a = "#" === d[u + 1].color.charAt(0) ? d[u + 1].color : Rv(d[u + 1].color), r = Math.abs(e - d[u + 1].b) / l) } return Mv(r, s, a) } function Mv(e, t, i) { var n = i.split("#")[1], r = t.split("#")[1], o = Sv(e, parseInt(r.substr(0, 2), 16), parseInt(n.substr(0, 2), 16)), s = Sv(e, parseInt(r.substr(2, 2), 16), parseInt(n.substr(2, 2), 16)), a = Sv(e, parseInt(r.substr(4, 2), 16), parseInt(n.substr(4, 2), 16)); return new tSe(o, s, a) } function Sv(e, t, i) { var n = i - t; return Math.round(t + n * e) } function xv(e, t, i) { for (var n, r = t.split(" "), o = "", s = [], a = 0, l = r.length; a < l; a++)n = r[a], Ky(o.concat(n), i).width < e ? o = o.concat(("" === o ? "" : " ") + n) : "" !== o ? (s.push($y(e, o, i)), o = n) : (s.push($y(e, n, i)), n = ""), o && a === l - 1 && s.push($y(e, o, i)); return s } function Tv(e, t, i) { var n = [], r = 0, o = Ky(t, i).width, s = t.length; if (e >= o) return n.push(t), n; for (var a = t.length; a > r; a--) { var l = t.slice(r, a); if ((o = Ky(l, i).width) <= e) { if (n.push(l), r += l.length, s === r) return n; a = s + 1 } } return n } function Dv(e, t, i, n) { var r = Ky(i, n); return r.width > e || r.height > t ? " " : i } function Av(e, t) { return e.itemArea === t.itemArea ? 0 : e.itemArea < t.itemArea ? 1 : -1 } function Ev(e, t, i) { for (var n, r = 0; r < e.length; r++)jv(n = e[r].childNodes[0], i.layout.renderItems[n.id.split("_")[6]].options), e[r].classList.remove(t), r -= 1 } function jv(e, t) { e.setAttribute("opacity", t.opacity), e.setAttribute("fill", t.fill), e.setAttribute("stroke", t.border.color), e.setAttribute("stroke-width", t.border.width) } function Iv(e, t, i) { if (d(e)) return null; for (var n = 0, r = Object.keys(t); n < r.length; n++) { var o = r[n]; e = e.split("${" + o + "}").join(kv(t[o], i).toString()) } return e } function kv(e, t) { return (t.format && !isNaN(Number(e)) ? t.intl.getNumberFormat({ format: t.format, useGrouping: t.useGroupingSeparator })(Number(e)) : e) || "" } function Pv(e) { return "#" + Nv(e.r) + Nv(e.g) + Nv(e.b) } function Nv(e) { var t = e.toString(16); return 1 === t.length ? "0" + t : t } function Ov(e) { var t = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e); return t ? new tSe(parseInt(t[1], 16), parseInt(t[2], 16), parseInt(t[3], 16)) : new tSe(255, 255, 255) } function Rv(e) { var t; e = "transparent" === e ? "white" : e, (t = document.getElementById("treeMapMeasureText")).style.color = e, e = window.getComputedStyle(t).color; var i = /^(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/.exec(e); return Pv(new tSe(parseInt(i[3], 10), parseInt(i[4], 10), parseInt(i[5], 10))) } function zv(e, t, i, n, r, o) { var s = new JE(""), a = Bv(e, i, t, r, n), l = s["draw" + a.functionName](a.renderOption); return l.setAttribute("aria-label", o), l } function Bv(e, t, i, n, r) { var o, s = "Path", a = t.width, h = t.height, d = e.x, c = e.y, p = e.x + -a / 2, u = e.y + -h / 2; switch (i) { case "Circle": case "Bubble": s = "Ellipse", l(n, { rx: a / 2, ry: h / 2, cx: d, cy: c }); break; case "VerticalLine": l(n, { d: o = "M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "Diamond": l(n, { d: o = "M " + p + " " + c + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + c + " L " + d + " " + (c + h / 2) + " L " + p + " " + c + " z" }); break; case "Rectangle": l(n, { d: o = "M " + p + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + p + " " + (c + h / 2) + " L " + p + " " + (c + -h / 2) + " z" }); break; case "Triangle": l(n, { d: o = "M " + p + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) + " L " + (d + a / 2) + " " + (c + h / 2) + " L " + p + " " + (c + h / 2) + " z" }); break; case "InvertedTriangle": l(n, { d: o = "M " + (d + a / 2) + " " + (c - h / 2) + " L " + d + " " + (c + h / 2) + " L " + (d - a / 2) + " " + (c - h / 2) + " L " + (d + a / 2) + " " + (c - h / 2) + " z" }); break; case "Pentagon": for (var g = void 0, m = void 0, f = 0; f <= 5; f++)g = a / 2 * Math.cos(Math.PI / 180 * (72 * f)), m = a / 2 * Math.sin(Math.PI / 180 * (72 * f)), o = 0 === f ? "M " + (d + g) + " " + (c + m) + " " : o.concat("L " + (d + g) + " " + (c + m) + " "); l(n, { d: o = o.concat("Z") }); break; case "Star": l(n, { d: o = "M " + (e.x + t.width / 3) + " " + (e.y - t.height / 2) + " L " + (e.x - t.width / 2) + " " + (e.y + t.height / 6) + " L " + (e.x + t.width / 2) + " " + (e.y + t.height / 6) + " L " + (e.x - t.width / 3) + " " + (e.y - t.height / 2) + " L " + e.x + " " + (e.y + t.height / 2) + " L " + (e.x + t.width / 3) + " " + (e.y - t.height / 2) + " Z" }); break; case "Cross": l(n, { d: o = "M " + p + " " + c + " L " + (d + a / 2) + " " + c + " M " + d + " " + (c + h / 2) + " L " + d + " " + (c + -h / 2) }); break; case "Image": s = "Image", l(n, { href: r, height: h, width: a, x: p, y: u }) }return { renderOption: n, functionName: s } } function Fv(e, t) { for (var i = !1, n = 0; n < e.length; n++)if (t.levelOrderName === e[n].levelOrderName) { i = !0; break } return i } function Vv(e, t) { if (e.length > 0) for (var i = 0; i < e.length; i++) { var n = e[i]; Hv(n.legendEle, n.oldFill, n.oldOpacity, n.oldBorderColor, n.oldBorderWidth) } } function Wv(e, t) { if (e.length > 0) for (var i = 0; i < e.length; i++) { var n = e[i]; Hv(n.legendEle, n.oldFill, n.oldOpacity, n.oldBorderColor, n.oldBorderWidth); for (var r = n.ShapeCollection.Elements.length, o = 0; o < r; o++)Hv(n.ShapeCollection.Elements[o], n.shapeOldFill, n.shapeOldOpacity, n.shapeOldBorderColor, n.shapeOldBorderWidth) } } function Hv(e, t, i, n, r) { e.setAttribute("fill", t), e.setAttribute("opacity", i), e.setAttribute("stroke", n), e.setAttribute("stroke-width", r) } function _v(e, t, i) { Vv(e), Ev(document.getElementsByClassName("treeMapHighLight"), "treeMapHighLight", i) } function Yv(e, t, i) { for (var n, r = 0; r < e; r++)for (var o = i.treeMapLegendModule.legendCollections[r].legendData.length, s = 0; s < o; s++)if (i.treeMapLegendModule.legendCollections[r].legendData[s].levelOrderName === t.levelOrderName) { n = r; break } return n } function Uv(e, t, i, n, r, o, s) { e.push({ legendEle: n, oldFill: s[t].legendFill, oldOpacity: s[t].opacity, oldBorderColor: s[t].borderColor, oldBorderWidth: s[t].borderWidth, shapeElement: r, shapeOldFill: o[i].options.fill, shapeOldOpacity: o[i].options.opacity, shapeOldBorderColor: o[i].options.border.color, shapeOldBorderWidth: o[i].options.border.width }) } function qv(e) { var t, i; switch (e.toLowerCase()) { case "materialdark": i = "#303030"; break; case "fabricdark": i = "#201F1F"; break; case "bootstrapdark": i = "#1A1A1A" }switch (e.toLowerCase()) { case "bootstrapdark": case "fabricdark": case "materialdark": t = { backgroundColor: i, titleFontColor: "#FFFFFF", subTitleFontColor: "#FFFFFF", tooltipFillColor: "#363F4C", tooltipFontColor: "#ffffff", legendTitleColor: "#DADADA", legendTextColor: "#DADADA", fontFamily: "Roboto, Noto, Sans-serif" }; break; case "highcontrast": t = { backgroundColor: "#000000", titleFontColor: "#FFFFFF", subTitleFontColor: "#FFFFFF", tooltipFillColor: "#363F4C", tooltipFontColor: "#ffffff", legendTitleColor: "#FFFFFF", legendTextColor: "#FFFFFF", fontFamily: "Roboto, Noto, Sans-serif" }; break; case "bootstrap4": t = { backgroundColor: "#FFFFFF", titleFontColor: "#212529", subTitleFontColor: "#212529", tooltipFillColor: "#000000", tooltipFontColor: "#FFFFFF", tooltipFillOpacity: 1, tooltipTextOpacity: .9, legendTitleColor: "#212529", legendTextColor: "#212529", fontFamily: "HelveticaNeue-Medium", fontSize: "16px", legendFontSize: "14px", labelFontFamily: "HelveticaNeue" }; break; default: t = { backgroundColor: "#FFFFFF", titleFontColor: "#424242", subTitleFontColor: "#424242", tooltipFillColor: "#363F4C", tooltipFontColor: "#ffffff", legendTitleColor: "#353535", legendTextColor: "#353535", fontFamily: "Roboto, Noto, Sans-serif" } }return t } var Gv = "ej2_instances", Qv = 0, Xv = /^(.*?):[ \t]*([^\r\n]*)$/gm, Jv = "GET", Zv = function () { function e(e, t, i, n) { this.mode = !0, this.emitError = !0, this.options = {}, "string" == typeof e ? (this.url = e, this.type = t ? t.toUpperCase() : Jv, this.mode = !!d(i) || i) : "object" == typeof e && (this.options = e, l(this, this.options)), this.type = this.type ? this.type.toUpperCase() : Jv, this.contentType = void 0 !== this.contentType ? this.contentType : n } return e.prototype.send = function (e) { var t = this; this.data = d(e) ? this.data : e; var i = { cancel: !1, httpRequest: null }; return new Promise(function (e, n) { t.httpRequest = new XMLHttpRequest, t.httpRequest.onreadystatechange = function () { t.stateChange(e, n) }, d(t.onLoad) || (t.httpRequest.onload = t.onLoad), d(t.onProgress) || (t.httpRequest.onprogress = t.onProgress), d(t.onAbort) || (t.httpRequest.onabort = t.onAbort), d(t.onError) || (t.httpRequest.onerror = t.onError), d(t.onUploadProgress) || (t.httpRequest.upload.onprogress = t.onUploadProgress), t.httpRequest.open(t.type, t.url, t.mode), d(t.data) || null === t.contentType || t.httpRequest.setRequestHeader("Content-Type", t.contentType || "application/json; charset=utf-8"), t.beforeSend && (i.httpRequest = t.httpRequest, t.beforeSend(i)), i.cancel || t.httpRequest.send(d(t.data) ? null : t.data) }) }, e.prototype.successHandler = function (e) { return this.onSuccess && this.onSuccess(e, this), e }, e.prototype.failureHandler = function (e) { return this.onFailure && this.onFailure(this.httpRequest), e }, e.prototype.stateChange = function (e, t) { var i = this.httpRequest.responseText; if (this.dataType && "json" === this.dataType.toLowerCase()) if ("" === i) i = void 0; else try { i = JSON.parse(i) } catch (e) { } 4 === this.httpRequest.readyState && (this.httpRequest.status >= 200 && this.httpRequest.status <= 299 || 304 === this.httpRequest.status ? e(this.successHandler(i)) : this.emitError ? t(new Error(this.failureHandler(this.httpRequest.statusText))) : e()) }, e.prototype.getResponseHeader = function (e) { var t, i; t = {}; for (var n = Xv.exec(this.httpRequest.getAllResponseHeaders()); n;)t[n[1].toLowerCase()] = n[2], n = Xv.exec(this.httpRequest.getAllResponseHeaders()); return i = t[e.toLowerCase()], d(i) ? null : i }, e }(), Kv = function () { function e() { } return e.addOrGetEventData = function (e) { return "__eventList" in e ? e.__eventList.events : (e.__eventList = {}, e.__eventList.events = []) }, e.add = function (t, i, n, r, o) { var s, a = e.addOrGetEventData(t); s = o ? u(n, o) : n, r && (s = s.bind(r)); for (var l = i.split(" "), h = 0; h < l.length; h++)a.push({ name: l[h], listener: n, debounce: s }), t.addEventListener(l[h], s); return s }, e.remove = function (t, i, n) { for (var r = e.addOrGetEventData(t), o = i.split(" "), s = function (e) { var i, s = -1; r && 0 !== r.length && r.some(function (t, r) { return t.name === o[e] && t.listener === n && (s = r, i = t.debounce, !0) }), -1 !== s && r.splice(s, 1), i && t.removeEventListener(o[e], i) }, a = 0; a < o.length; a++)s(a) }, e.clearEvents = function (t) { var i, n; n = h([], n, i = e.addOrGetEventData(t)); for (var r = 0; r < n.length; r++)t.removeEventListener(n[r].name, n[r].debounce), i.shift() }, e.trigger = function (t, i, n) { for (var r = 0, o = e.addOrGetEventData(t); r < o.length; r++) { var s = o[r]; s.name === i && s.debounce.call(this, n) } }, e }(), $v = /^svg|^path|^g/, ew = function () { function e(e) { this.ranArray = [], this.boundedEvents = {}, d(e) || (this.context = e) } return e.prototype.on = function (e, t, i, n) { if (!d(t)) { var r = i || this.context; this.notExist(e) ? this.boundedEvents[e] = [{ handler: t, context: r }] : d(n) ? this.isHandlerPresent(this.boundedEvents[e], t) || this.boundedEvents[e].push({ handler: t, context: r }) : -1 === this.ranArray.indexOf(n) && (this.ranArray.push(n), this.boundedEvents[e].push({ handler: t, context: r, id: n })) } }, e.prototype.off = function (e, t, i) { if (!this.notExist(e)) { var r = n(e, this.boundedEvents); if (t) { for (var o = 0; o < r.length; o++)if (i) { if (r[o].id === i) { r.splice(o, 1); var s = this.ranArray.indexOf(i); -1 !== s && this.ranArray.splice(s, 1); break } } else if (t === r[o].handler) { r.splice(o, 1); break } } else delete this.boundedEvents[e] } }, e.prototype.notify = function (e, t, i, r) { if (this.notExist(e)) i && i.call(this, t); else { t && (t.name = e); var o = n(e, this.boundedEvents).slice(0); if (window.Blazor) return this.blazorCallback(o, t, i, r, 0); for (var s = 0, a = o; s < a.length; s++) { var l = a[s]; l.handler.call(l.context, t) } i && i.call(this, t) } }, e.prototype.blazorCallback = function (e, t, i, n, r) { var o = this, s = r === e.length - 1; if (r < e.length) { var a = e[r], l = a.handler.call(a.context, t); if (l && "function" == typeof l.then) { if (!i) return l; l.then(function (l) { if (l = "string" == typeof l && o.isJson(l) ? JSON.parse(l) : l, h(t, t, l, !0), !i || !s) return o.blazorCallback(e, t, i, n, r + 1); i.call(a.context, t) }).catch(function (e) { n && n.call(a.context, "string" == typeof e && o.isJson(e) ? JSON.parse(e) : e) }) } else { if (!i || !s) return this.blazorCallback(e, t, i, n, r + 1); i.call(a.context, t) } } }, e.prototype.isJson = function (e) { return !0 }, e.prototype.destroy = function () { this.boundedEvents = this.context = void 0 }, e.prototype.notExist = function (e) { return !1 === this.boundedEvents.hasOwnProperty(e) || this.boundedEvents[e].length <= 0 }, e.prototype.isHandlerPresent = function (e, t) { for (var i = 0, n = e; i < n.length; i++) { if (n[i].handler === t) return !0 } return !1 }, e }(), tw = new RegExp("]"), iw = function () { function e(e, t) { this.isProtectedOnChange = !0, this.properties = {}, this.changedProperties = {}, this.oldProperties = {}, this.refreshing = !1, this.finalUpdate = function () { }, this.childChangedProperties = {}, this.modelObserver = new ew(this), c(t) || (this.element = "string" == typeof t ? document.querySelector(t) : t, d(this.element) || (this.isProtectedOnChange = !1, this.addInstance())), c(e) || this.setProperties(e, !0), this.isDestroyed = !1 } return e.prototype.setProperties = function (e, t) { var i = this.isProtectedOnChange; this.isProtectedOnChange = !!t, l(this, e), !0 !== t && (l(this.changedProperties, e), this.dataBind()), this.finalUpdate(), this.changedProperties = {}, this.oldProperties = {}, this.isProtectedOnChange = i }, e.callChildDataBind = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; if (t[r] instanceof Array) for (var o = 0, s = t[r]; o < s.length; o++) { var a = s[o]; void 0 !== a.dataBind && a.dataBind() } else t[r].dataBind() } }, e.prototype.clearChanges = function () { this.finalUpdate(), this.changedProperties = {}, this.oldProperties = {}, this.childChangedProperties = {} }, e.prototype.dataBind = function () { if (e.callChildDataBind(this.childChangedProperties, this), Object.getOwnPropertyNames(this.changedProperties).length) { var t = this.isProtectedOnChange, i = this.changedProperties, n = this.oldProperties; this.clearChanges(), this.isProtectedOnChange = !0, this.onPropertyChanged(i, n), this.isProtectedOnChange = t } }, e.prototype.saveChanges = function (e, t, n) { this.isProtectedOnChange || (this.oldProperties[e] = n, this.changedProperties[e] = t, this.finalUpdate(), this.finalUpdate = i(this.dataBind.bind(this))) }, e.prototype.addEventListener = function (e, t) { this.modelObserver.on(e, t) }, e.prototype.removeEventListener = function (e, t) { this.modelObserver.off(e, t) }, e.prototype.trigger = function (e, t, i, r) { var o = this; if (!0 !== this.isDestroyed) { var s = this.isProtectedOnChange; this.isProtectedOnChange = !1; var a = this.modelObserver.notify(e, t, i, r); if (tw.test(e)) { var l = n(e, this); if (l) { if (window.Blazor) { var h = l.call(this, t); h && "function" == typeof h.then ? i ? h.then(function (e) { i && (e = "string" == typeof e && o.modelObserver.isJson(e) ? JSON.parse(e) : e, i.call(o, e)) }).catch(function (e) { r && (e = "string" == typeof e && o.modelObserver.isJson(e) ? JSON.parse(e) : e, r.call(o, e)) }) : a = h : i && i.call(this, t) } else l.call(this, t), i && i.call(this, t) } else i && i.call(this, t) } return this.isProtectedOnChange = s, a } }, e.prototype.addInstance = function () { var e = "e-" + this.getModuleName().toLowerCase(); S([this.element], ["e-lib", e]), d(this.element.ej2_instances) ? r("ej2_instances", [this], this.element) : this.element.ej2_instances.push(this) }, e.prototype.destroy = function () { var e = this; this.element.ej2_instances = this.element.ej2_instances.filter(function (t) { return t !== e }), x([this.element], ["e-" + this.getModuleName()]), 0 === this.element.ej2_instances.length && x([this.element], ["e-lib"]), this.clearChanges(), this.modelObserver.destroy(), this.isDestroyed = !0 }, e }(), nw = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i, rw = /msie|trident/i, ow = /Trident\/7\./, sw = /(ipad|iphone|ipod touch)/i, aw = /(ipad|iphone|ipod touch);.*os 7_\d|(ipad|iphone|ipod touch);.*os 8_\d/i, lw = /android/i, hw = /trident|windows phone|edge/i, dw = /(version)[ \/]([\w.]+)/i, cw = { OPERA: /(opera|opr)(?:.*version|)[ \/]([\w.]+)/i, EDGE: /(edge)(?:.*version|)[ \/]([\w.]+)/i, CHROME: /(chrome|crios)[ \/]([\w.]+)/i, PANTHOMEJS: /(phantomjs)[ \/]([\w.]+)/i, SAFARI: /(safari)[ \/]([\w.]+)/i, WEBKIT: /(webkit)[ \/]([\w.]+)/i, MSIE: /(msie|trident) ([\w.]+)/i, MOZILLA: /(mozilla)(?:.*? rv:([\w.]+)|)/i }; "undefined" != typeof window && (window.browserDetails = window.browserDetails || {}); var pw, uw = function () { function e() { } return e.extractBrowserDetail = function () { for (var t = { culture: {} }, i = [], n = 0, r = Object.keys(cw); n < r.length; n++) { var o = r[n]; if (i = e.userAgent.match(cw[o])) { if (t.name = "opr" === i[1].toLowerCase() ? "opera" : i[1].toLowerCase(), t.name = "crios" === i[1].toLowerCase() ? "chrome" : t.name, t.version = i[2], t.culture.name = t.culture.language = navigator.language, e.userAgent.match(ow)) { t.name = "msie"; break } var s = e.userAgent.match(dw); "safari" === t.name && s && (t.version = s[2]); break } } return t }, e.getEvent = function (t) { var i = { start: { isPointer: "pointerdown", isTouch: "touchstart", isDevice: "mousedown" }, move: { isPointer: "pointermove", isTouch: "touchmove", isDevice: "mousemove" }, end: { isPointer: "pointerup", isTouch: "touchend", isDevice: "mouseup" }, cancel: { isPointer: "pointercancel", isTouch: "touchcancel", isDevice: "mouseleave" } }; return e.isPointer ? i[t].isPointer : e.isTouch ? i[t].isTouch + (e.isDevice ? "" : " " + i[t].isDevice) : i[t].isDevice }, e.getTouchStartEvent = function () { return e.getEvent("start") }, e.getTouchEndEvent = function () { return e.getEvent("end") }, e.getTouchMoveEvent = function () { return e.getEvent("move") }, e.getTouchCancelEvent = function () { return e.getEvent("cancel") }, e.getValue = function (t, i) { var n = window.browserDetails; return void 0 === n[t] ? n[t] = i.test(e.userAgent) : n[t] }, Object.defineProperty(e, "userAgent", { get: function () { return e.uA }, set: function (t) { e.uA = t, window.browserDetails = {} }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "info", { get: function () { return c(window.browserDetails.info) ? window.browserDetails.info = e.extractBrowserDetail() : window.browserDetails.info }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isIE", { get: function () { return e.getValue("isIE", rw) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isTouch", { get: function () { return c(window.browserDetails.isTouch) ? window.browserDetails.isTouch = "ontouchstart" in window : window.browserDetails.isTouch }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isPointer", { get: function () { return c(window.browserDetails.isPointer) ? window.browserDetails.isPointer = "pointerEnabled" in window.navigator : window.browserDetails.isPointer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isMSPointer", { get: function () { return c(window.browserDetails.isMSPointer) ? window.browserDetails.isMSPointer = "msPointerEnabled" in window.navigator : window.browserDetails.isMSPointer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isDevice", { get: function () { return e.getValue("isDevice", nw) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isIos", { get: function () { return e.getValue("isIos", sw) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isIos7", { get: function () { return e.getValue("isIos7", aw) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isAndroid", { get: function () { return e.getValue("isAndroid", lw) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isWebView", { get: function () { return c(window.browserDetails.isWebView) ? (window.browserDetails.isWebView = !(c(window.cordova) && c(window.PhoneGap) && c(window.phonegap) && "object" !== window.forge), window.browserDetails.isWebView) : window.browserDetails.isWebView }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "isWindows", { get: function () { return e.getValue("isWindows", hw) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "touchStartEvent", { get: function () { return c(window.browserDetails.touchStartEvent) ? window.browserDetails.touchStartEvent = e.getTouchStartEvent() : window.browserDetails.touchStartEvent }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "touchMoveEvent", { get: function () { return c(window.browserDetails.touchMoveEvent) ? window.browserDetails.touchMoveEvent = e.getTouchMoveEvent() : window.browserDetails.touchMoveEvent }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "touchEndEvent", { get: function () { return c(window.browserDetails.touchEndEvent) ? window.browserDetails.touchEndEvent = e.getTouchEndEvent() : window.browserDetails.touchEndEvent }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "touchCancelEvent", { get: function () { return c(window.browserDetails.touchCancelEvent) ? window.browserDetails.touchCancelEvent = e.getTouchCancelEvent() : window.browserDetails.touchCancelEvent }, enumerable: !0, configurable: !0 }), e.uA = "undefined" != typeof navigator ? navigator.userAgent : "", e }(), gw = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), mw = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, fw = function (e) { function t(t) { var i = e.call(this, t, void 0) || this; return i.easing = { ease: "cubic-bezier(0.250, 0.100, 0.250, 1.000)", linear: "cubic-bezier(0.250, 0.250, 0.750, 0.750)", easeIn: "cubic-bezier(0.420, 0.000, 1.000, 1.000)", easeOut: "cubic-bezier(0.000, 0.000, 0.580, 1.000)", easeInOut: "cubic-bezier(0.420, 0.000, 0.580, 1.000)", elasticInOut: "cubic-bezier(0.5,-0.58,0.38,1.81)", elasticIn: "cubic-bezier(0.17,0.67,0.59,1.81)", elasticOut: "cubic-bezier(0.7,-0.75,0.99,1.01)" }, i } gw(t, e), i = t, t.prototype.animate = function (e, t) { t = t || {}; var n = this.getModel(t); if ("string" == typeof e) for (var r = 0, o = Array.prototype.slice.call(O(e, document)); r < o.length; r++) { var s = o[r]; n.element = s, i.delayAnimation(n) } else n.element = e, i.delayAnimation(n) }, t.stop = function (e, t) { e.style.animation = "", e.removeAttribute("e-animate"); var i = e.getAttribute("e-animation-id"); if (i) { var n = parseInt(i, 10); cancelAnimationFrame(n), e.removeAttribute("e-animation-id") } t && t.end && t.end.call(this, t) }, t.delayAnimation = function (e) { e.delay ? setTimeout(function () { i.applyAnimation(e) }, e.delay) : i.applyAnimation(e) }, t.applyAnimation = function (e) { var t = this; e.timeStamp = 0; var i = 0, n = 0, r = 0, o = e.duration; e.element.setAttribute("e-animate", "true"); var s = function (a) { try { if (a) { r = 0 === r ? a : r, e.timeStamp = a + e.timeStamp - r, r = a, !i && e.begin && e.begin.call(t, e), i += 1; var l = e.timeStamp / i; e.timeStamp < o && e.timeStamp + l < o && e.element.getAttribute("e-animate") ? (e.element.style.animation = e.name + " " + e.duration + "ms " + e.timingFunction, e.progress && e.progress.call(t, e), requestAnimationFrame(s)) : (cancelAnimationFrame(n), e.element.removeAttribute("e-animation-id"), e.element.removeAttribute("e-animate"), e.element.style.animation = "", e.end && e.end.call(t, e)) } else performance.now(), n = requestAnimationFrame(s), e.element.setAttribute("e-animation-id", n.toString()) } catch (i) { cancelAnimationFrame(n), e.element.removeAttribute("e-animation-id"), e.fail && e.fail.call(t, i) } }; s() }, t.prototype.getModel = function (e) { return { name: e.name || this.name, delay: e.delay || this.delay, duration: void 0 !== e.duration ? e.duration : this.duration, begin: e.begin || this.begin, end: e.end || this.end, fail: e.fail || this.fail, progress: e.progress || this.progress, timingFunction: this.easing[e.timingFunction] ? this.easing[e.timingFunction] : e.timingFunction || this.easing[this.timingFunction] } }, t.prototype.onPropertyChanged = function (e, t) { }, t.prototype.getModuleName = function () { return "animation" }, t.prototype.destroy = function () { }; var i; return mw([Y("FadeIn")], t.prototype, "name", void 0), mw([Y(400)], t.prototype, "duration", void 0), mw([Y("ease")], t.prototype, "timingFunction", void 0), mw([Y(0)], t.prototype, "delay", void 0), mw([X()], t.prototype, "progress", void 0), mw([X()], t.prototype, "begin", void 0), mw([X()], t.prototype, "end", void 0), mw([X()], t.prototype, "fail", void 0), t = i = mw([J], t) }(iw), yw = !1, vw = function () { function e(e) { this.loadedModules = [], this.parent = e } return e.prototype.inject = function (e, i) { var n = e.length; if (0 !== n) { this.loadedModules.length && this.clearUnusedModule(e); for (var o = 0; o < n; o++)for (var s = e[o], a = 0, l = i; a < l.length; a++) { var h = l[a], d = s.member; if (h.prototype.getModuleName() === s.member && !this.isModuleLoaded(d)) { var c = t(h, s.args), p = this.getMemberName(d); s.isProperty ? r(p, h, this.parent) : r(p, c, this.parent); var u = s; u.member = p, this.loadedModules.push(u) } } } else this.clean() }, e.prototype.clean = function () { for (var e = 0, t = this.loadedModules; e < t.length; e++) { var i = t[e]; i.isProperty || n(i.member, this.parent).destroy() } this.loadedModules = [] }, e.prototype.clearUnusedModule = function (e) { for (var t = this, i = e.map(function (e) { return t.getMemberName(e.member) }), r = 0, s = this.loadedModules.filter(function (e) { return -1 === i.indexOf(e.member) }); r < s.length; r++) { var a = s[r]; a.isProperty || n(a.member, this.parent).destroy(), this.loadedModules.splice(this.loadedModules.indexOf(a), 1), o(this.parent, a.member) } }, e.prototype.getMemberName = function (e) { return e[0].toLowerCase() + e.substring(1) + "Module" }, e.prototype.isModuleLoaded = function (e) { for (var t = 0, i = this.loadedModules; t < i.length; t++) { if (i[t].member === this.getMemberName(e)) return !0 } return !1 }, e }(), ww = function () { function e(e, t, i, r) { this.properties = {}, this.changedProperties = {}, this.childChangedProperties = {}, this.oldProperties = {}, this.finalUpdate = function () { }, this.callChildDataBind = n("callChildDataBind", iw), this.parentObj = e, this.controlParent = this.parentObj.controlParent || this.parentObj, this.propName = t, this.setProperties(i, !0), this.isParentArray = r } return e.prototype.updateChange = function (e, t) { !0 === e ? this.parentObj.childChangedProperties[t] = e : delete this.parentObj.childChangedProperties[t], this.parentObj.updateChange && this.parentObj.updateChange(e, this.parentObj.propName) }, e.prototype.updateTimeOut = function () { if (this.parentObj.updateTimeOut) this.parentObj.finalUpdate(), this.parentObj.updateTimeOut(); else { var e = setTimeout(this.parentObj.dataBind.bind(this.parentObj)); this.finalUpdate = function () { clearTimeout(e) } } }, e.prototype.clearChanges = function () { this.finalUpdate(), this.updateChange(!1, this.propName), this.oldProperties = {}, this.changedProperties = {} }, e.prototype.setProperties = function (e, t) { !0 === t ? (l(this, e), this.updateChange(!1, this.propName), this.clearChanges()) : l(this, e) }, e.prototype.dataBind = function () { if (this.callChildDataBind(this.childChangedProperties, this), this.isParentArray) { var e = this.parentObj[this.propName].indexOf(this); Object.keys(this.changedProperties).length && (r(this.propName + "." + e, this.changedProperties, this.parentObj.changedProperties), r(this.propName + "." + e, this.oldProperties, this.parentObj.oldProperties)) } else this.parentObj.changedProperties[this.propName] = this.changedProperties, this.parentObj.oldProperties[this.propName] = this.oldProperties; this.clearChanges() }, e.prototype.saveChanges = function (e, t, i) { this.controlParent.isProtectedOnChange || (this.oldProperties[e] = i, this.changedProperties[e] = t, this.updateChange(!0, this.propName), this.finalUpdate(), this.updateTimeOut()) }, e }(), bw = { latn: { _digits: "0123456789", _type: "numeric" } }, Cw = { decimal: ".", group: ",", percentSign: "%", plusSign: "+", minusSign: "-", infinity: "âˆž", nan: "NaN", exponential: "E" }, Lw = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9], Mw = function () { function e() { } return e.getMainObject = function (e, t) { return n("main." + t, e) }, e.getNumberingSystem = function (e) { return n("supplemental.numberingSystems", e) || this.numberingSystems }, e.reverseObject = function (e, t) { for (var i = {}, n = 0, r = t || Object.keys(e); n < r.length; n++) { var o = r[n]; i.hasOwnProperty(e[o]) || (i[e[o]] = o) } return i }, e.getSymbolRegex = function (e) { var t = e.map(function (e) { return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1") }).join("|"); return new RegExp(t, "g") }, e.getSymbolMatch = function (e) { for (var t = {}, i = 0, n = Object.keys(Cw); i < n.length; i++) { var r = n[i]; t[e[r]] = Cw[r] } return t }, e.constructRegex = function (e) { for (var t = e.length, i = "", n = 0; n < t; n++)i += n !== t - 1 ? e[n] + "|" : e[n]; return i }, e.convertValueParts = function (e, t, i) { return e.replace(t, function (e) { return i[e] }) }, e.getDefaultNumberingSystem = function (e) { var t = {}; return t.obj = n("numbers", e), t.nSystem = n("defaultNumberingSystem", t.obj), t }, e.getCurrentNumericOptions = function (e, t, i) { var r = {}, o = this.getDefaultNumberingSystem(e); if (!c(o.nSystem)) { var s = n(o.nSystem + "._digits", t); c(s) || (r.numericPair = this.reverseObject(s, Lw), r.numberParseRegex = new RegExp(this.constructRegex(s), "g"), r.numericRegex = "[" + s[0] + "-" + s[9] + "]", i && (r.numericRegex = s[0] + "-" + s[9], r.symbolNumberSystem = n("symbols-numberSystem-" + o.nSystem, o.obj), r.symbolMatch = this.getSymbolMatch(r.symbolNumberSystem), r.numberSystem = o.nSystem)) } return r }, e.getNumberMapper = function (e, t, i) { var r = { mapper: {} }, o = this.getDefaultNumberingSystem(e); if (!c(o.nSystem)) { r.numberSystem = o.nSystem, r.numberSymbols = n("symbols-numberSystem-" + o.nSystem, o.obj), r.timeSeparator = n("timeSeparator", r.numberSymbols); var s = n(o.nSystem + "._digits", t); if (!c(s)) for (var a = 0, l = Lw; a < l.length; a++) { var h = l[a]; r.mapper[h] = s[h] } } return r }, e.nPair = "numericPair", e.nRegex = "numericRegex", e.numberingSystems = bw, e }(), Sw = { ms: "minimumSignificantDigits", ls: "maximumSignificantDigits", mf: "minimumFractionDigits", lf: "maximumFractionDigits" }, xw = ["infinity", "nan", "group", "decimal", "exponential"], Tw = function () { function e() { } return e.numberFormatter = function (e, t, i) { var n, r = this, o = h({}, t), s = {}, a = {}, l = pw.getDependables(i, e, "", !0); a.numberMapper = Mw.getNumberMapper(l.parserObject, Mw.getNumberingSystem(i), !0), a.currencySymbol = pw.getCurrencySymbol(l.numericObject, o.currency || Uw), a.percentSymbol = a.numberMapper.numberSymbols.percentSign, a.minusSymbol = a.numberMapper.numberSymbols.minusSign; var d = a.numberMapper.numberSymbols; if (t.format && !pw.formatRegex.test(t.format)) s = pw.customFormat(t.format, a, l.numericObject); else { h(o, pw.getProperNumericSkeleton(t.format || "N")), o.isCurrency = "currency" === o.type, o.isPercent = "percent" === o.type, n = pw.getSymbolPattern(o.type, a.numberMapper.numberSystem, l.numericObject, o.isAccount), o.groupOne = this.checkValueRange(o.maximumSignificantDigits, o.minimumSignificantDigits, !0), this.checkValueRange(o.maximumFractionDigits, o.minimumFractionDigits, !1, !0), c(o.fractionDigits) || (o.minimumFractionDigits = o.maximumFractionDigits = o.fractionDigits), c(o.useGrouping) && (o.useGrouping = !0), o.isCurrency && (n = n.replace(/\u00A4/g, pw.defaultCurrency)); var p = n.split(";"); s.nData = pw.getFormatData(p[1] || "-" + p[0], !0, a.currencySymbol), s.pData = pw.getFormatData(p[0], !1, a.currencySymbol), o.useGrouping && (o.groupSeparator = d[xw[2]], o.groupData = this.getGroupingDetails(p[0])); if (c(o.minimumFractionDigits) && (o.minimumFractionDigits = s.nData.minimumFraction), c(o.maximumFractionDigits)) { var u = s.nData.maximumFraction; o.maximumFractionDigits = c(u) && o.isPercent ? 0 : u } var g = o.minimumFractionDigits, m = o.maximumFractionDigits; c(g) || c(m) || g > m && (o.maximumFractionDigits = g) } return h(s.nData, o), h(s.pData, o), function (e) { return isNaN(e) ? d[xw[1]] : isFinite(e) ? r.intNumberFormatter(e, s, a) : d[xw[0]] } }, e.getGroupingDetails = function (e) { var t = {}, i = e.match(pw.negativeDataRegex); if (i && i[4]) { var n = i[4], r = n.lastIndexOf(","); if (-1 !== r) { var o = n.split(".")[0]; t.primary = o.length - r - 1; var s = n.lastIndexOf(",", r - 1); -1 !== s && (t.secondary = r - 1 - s) } } return t }, e.checkValueRange = function (e, t, i, n) { var r = n ? "f" : "s", o = 0, s = Sw["l" + r], a = Sw["m" + r]; if (c(e) || (this.checkRange(e, s, n), o++), c(t) || (this.checkRange(t, a, n), o++), 2 === o) { if (!(e < t)) return !0; f(a + "specified must be less than the" + s) } else i && 1 === o && f("Both" + a + "and" + a + "must be present"); return !1 }, e.checkRange = function (e, t, i) { var n = i ? [0, 20] : [1, 21]; (e < n[0] || e > n[1]) && f(t + "value must be within the range" + n[0] + "to" + n[1]) }, e.intNumberFormatter = function (e, t, i) { var n; if (!c(t.nData.type)) { e < 0 ? (e *= -1, n = t.nData) : n = 0 === e ? t.zeroData || t.pData : t.pData; var r = ""; return n.isPercent && (e *= 100), n.groupOne ? r = this.processSignificantDigits(e, n.minimumSignificantDigits, n.maximumSignificantDigits) : (r = this.processFraction(e, n.minimumFractionDigits, n.maximumFractionDigits), n.minimumIntegerDigits && (r = this.processMinimumIntegers(r, n.minimumIntegerDigits))), "scientific" === n.type && (r = (r = e.toExponential(n.maximumFractionDigits)).replace("e", i.numberMapper.numberSymbols[xw[4]])), r = r.replace(".", i.numberMapper.numberSymbols[xw[3]]), n.useGrouping && (r = this.groupNumbers(r, n.groupData.primary, n.groupSeparator || ",", i.numberMapper.numberSymbols[xw[3]] || ".", n.groupData.secondary)), r = Mw.convertValueParts(r, pw.latnParseRegex, i.numberMapper.mapper), "N/A" === n.nlead ? n.nlead : n.nlead + r + n.nend } }, e.processSignificantDigits = function (e, t, i) { var n = e + ""; return n.length < t ? e.toPrecision(t) : (n = e.toPrecision(i), +n + "") }, e.groupNumbers = function (e, t, i, n, r) { for (var o = !d(r) && 0 !== r, s = e.split(n), a = s[0], l = a.length, h = ""; l > t;)h = a.slice(l - t, l) + (h.length ? i + h : ""), l -= t, o && (t = r, o = !1); return s[0] = a.slice(0, l) + (h.length ? i : "") + h, s.join(n) }, e.processFraction = function (e, t, i) { var n = (e + "").split(".")[1], r = n ? n.length : 0; if (t && r < t) { var o = ""; if (0 !== r) { o += e; for (var s = 0; s < t - r; s++)o += "0"; return o } return o = e.toFixed(t), e.toFixed(t) } return !d(i) && (r > i || 0 === i) ? e.toFixed(i) : e + "" }, e.processMinimumIntegers = function (e, t) { var i = e.split("."), n = i[0], r = n.length; if (r < t) { for (var o = 0; o < t - r; o++)n = "0" + n; i[0] = n } return i.join(".") }, e }(); !function (e) { function t(t, i, r, o) { var s, a = r || "date"; if (-1 !== e.basicPatterns.indexOf(t)) { if (s = n(a + "Formats." + t, i), "dateTime" === a) { var l = n("dateFormats." + t, i), h = n("timeFormats." + t, i); s = s.replace("{1}", l).replace("{0}", h) } } else s = n("dateTimeFormats.availableFormats." + t, i); return c(s) && "yMd" === t && (s = "M/d/y"), s } function i(t, i, r, o) { var s = {}, a = r || "gregorian"; return s.parserObject = Mw.getMainObject(t, i) || e.defaultObject, o ? s.numericObject = n("numbers", s.parserObject) : s.dateObject = n("dates.calendars." + a, s.parserObject), s } function r(e, t, i, r) { return n(e + "Formats-numberSystem-" + t + (r ? ".accounting" : ".standard"), i) || (r ? n(e + "Formats-numberSystem-" + t + ".standard", i) : "") } function o(t) { var i = t.match(e.formatRegex), n = {}, r = i[1].toUpperCase(); return n.isAccount = "A" === r, n.type = e.patternMatcher[r], t.length > 1 && (n.fractionDigits = parseInt(i[2], 10)), n } function s(t, i, n, r) { var o = r ? {} : { nlead: "", nend: "" }, s = t.match(e.customRegex); if (s) { r || (o.nlead = a(s[1], n), o.nend = a(s[10], n), o.groupPattern = s[4]); var l = s[7]; if (l && i) { var h = l.match(u); d(h) ? o.minimumFraction = 0 : o.minimumFraction = h.length, o.maximumFraction = l.length - 1 } } return o } function a(t, i) { return t ? t.replace(e.defaultCurrency, i) : "" } function l(e, t) { return n("currencies." + t + ".symbol", e) || "$" } function p(e, t, i) { for (var n = { nlead: e[0], nend: e[1] }, r = 0; r < 2; r++) { var o = e[r], s = o.indexOf(t); if (-1 !== s && (s < o.indexOf("'") || s > o.lastIndexOf("'"))) { n[w[r]] = o.substr(0, s) + i + o.substr(s + 1), n[w[t]] = !0, n.type = n.isCurrency ? "currency" : "percent"; break } } return n } e.negativeDataRegex = /^(('[^']+'|''|[^*#@0,.E])*)(\*.)?((([#,]*[0,]*0+)(\.0*[0-9]*#*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/, e.customRegex = /^(('[^']+'|''|[^*#@0,.])*)(\*.)?((([0#,]*[0,]*[0#]*)(\.[0#]*)?)|([#,]*@+#*))(E\+?0+)?(('[^']+'|''|[^*#@0,.E])*)$/, e.latnParseRegex = /0|1|2|3|4|5|6|7|8|9/g; var u = /[0-9]/g; e.defaultCurrency = "$"; var g = ["infinity", "nan", "group", "decimal"], m = /G|M|L|H|c|'| a|yy|y|EEEE|E/g, f = { G: "", M: "m", L: "m", H: "h", c: "d", "'": '"', " a": " AM/PM", yy: "yy", y: "yyyy", EEEE: "dddd", E: "ddd" }, y = "sun"; e.islamicRegex = /^islamic/; var v = { sun: 0, mon: 1, tue: 2, wed: 3, thu: 4, fri: 5, sat: 6 }; e.formatRegex = /(^[ncpae]{1})([0-1]?[0-9]|20)?$/i, e.currencyFormatRegex = /(^[ca]{1})([0-1]?[0-9]|20)?$/i, e.curWithoutNumberRegex = /(c|a)$/gi; var w = { $: "isCurrency", "%": "isPercent", "-": "isNegative", 0: "nlead", 1: "nend" }; e.dateParseRegex = /([a-z])\1*|'([^']|'')+'|''|./gi, e.basicPatterns = ["short", "medium", "long", "full"], e.defaultObject = { dates: { calendars: { gregorian: { months: { "stand-alone": { abbreviated: { 1: "Jan", 2: "Feb", 3: "Mar", 4: "Apr", 5: "May", 6: "Jun", 7: "Jul", 8: "Aug", 9: "Sep", 10: "Oct", 11: "Nov", 12: "Dec" }, narrow: { 1: "J", 2: "F", 3: "M", 4: "A", 5: "M", 6: "J", 7: "J", 8: "A", 9: "S", 10: "O", 11: "N", 12: "D" }, wide: { 1: "January", 2: "February", 3: "March", 4: "April", 5: "May", 6: "June", 7: "July", 8: "August", 9: "September", 10: "October", 11: "November", 12: "December" } } }, days: { "stand-alone": { abbreviated: { sun: "Sun", mon: "Mon", tue: "Tue", wed: "Wed", thu: "Thu", fri: "Fri", sat: "Sat" }, narrow: { sun: "S", mon: "M", tue: "T", wed: "W", thu: "T", fri: "F", sat: "S" }, short: { sun: "Su", mon: "Mo", tue: "Tu", wed: "We", thu: "Th", fri: "Fr", sat: "Sa" }, wide: { sun: "Sunday", mon: "Monday", tue: "Tuesday", wed: "Wednesday", thu: "Thursday", fri: "Friday", sat: "Saturday" } } }, dayPeriods: { format: { wide: { am: "AM", pm: "PM" } } }, eras: { eraNames: { 0: "Before Christ", "0-alt-variant": "Before Common Era", 1: "Anno Domini", "1-alt-variant": "Common Era" }, eraAbbr: { 0: "BC", "0-alt-variant": "BCE", 1: "AD", "1-alt-variant": "CE" }, eraNarrow: { 0: "B", "0-alt-variant": "BCE", 1: "A", "1-alt-variant": "CE" } }, dateFormats: { full: "EEEE, MMMM d, y", long: "MMMM d, y", medium: "MMM d, y", short: "M/d/yy" }, timeFormats: { full: "h:mm:ss a zzzz", long: "h:mm:ss a z", medium: "h:mm:ss a", short: "h:mm a" }, dateTimeFormats: { full: "{1} 'at' {0}", long: "{1} 'at' {0}", medium: "{1}, {0}", short: "{1}, {0}", availableFormats: { d: "d", E: "ccc", Ed: "d E", Ehm: "E h:mm a", EHm: "E HH:mm", Ehms: "E h:mm:ss a", EHms: "E HH:mm:ss", Gy: "y G", GyMMM: "MMM y G", GyMMMd: "MMM d, y G", GyMMMEd: "E, MMM d, y G", h: "h a", H: "HH", hm: "h:mm a", Hm: "HH:mm", hms: "h:mm:ss a", Hms: "HH:mm:ss", hmsv: "h:mm:ss a v", Hmsv: "HH:mm:ss v", hmv: "h:mm a v", Hmv: "HH:mm v", M: "L", Md: "M/d", MEd: "E, M/d", MMM: "LLL", MMMd: "MMM d", MMMEd: "E, MMM d", MMMMd: "MMMM d", ms: "mm:ss", y: "y", yM: "M/y", yMd: "M/d/y", yMEd: "E, M/d/y", yMMM: "MMM y", yMMMd: "MMM d, y", yMMMEd: "E, MMM d, y", yMMMM: "MMMM y" } } }, islamic: { months: { "stand-alone": { abbreviated: { 1: "Muh.", 2: "Saf.", 3: "Rab. I", 4: "Rab. II", 5: "Jum. I", 6: "Jum. II", 7: "Raj.", 8: "Sha.", 9: "Ram.", 10: "Shaw.", 11: "DhuÊ»l-Q.", 12: "DhuÊ»l-H." }, narrow: { 1: "1", 2: "2", 3: "3", 4: "4", 5: "5", 6: "6", 7: "7", 8: "8", 9: "9", 10: "10", 11: "11", 12: "12" }, wide: { 1: "Muharram", 2: "Safar", 3: "RabiÊ» I", 4: "RabiÊ» II", 5: "Jumada I", 6: "Jumada II", 7: "Rajab", 8: "ShaÊ»ban", 9: "Ramadan", 10: "Shawwal", 11: "DhuÊ»l-QiÊ»dah", 12: "DhuÊ»l-Hijjah" } } }, days: { "stand-alone": { abbreviated: { sun: "Sun", mon: "Mon", tue: "Tue", wed: "Wed", thu: "Thu", fri: "Fri", sat: "Sat" }, narrow: { sun: "S", mon: "M", tue: "T", wed: "W", thu: "T", fri: "F", sat: "S" }, short: { sun: "Su", mon: "Mo", tue: "Tu", wed: "We", thu: "Th", fri: "Fr", sat: "Sa" }, wide: { sun: "Sunday", mon: "Monday", tue: "Tuesday", wed: "Wednesday", thu: "Thursday", fri: "Friday", sat: "Saturday" } } }, dayPeriods: { format: { wide: { am: "AM", pm: "PM" } } }, eras: { eraNames: { 0: "AH" }, eraAbbr: { 0: "AH" }, eraNarrow: { 0: "AH" } }, dateFormats: { full: "EEEE, MMMM d, y G", long: "MMMM d, y G", medium: "MMM d, y G", short: "M/d/y GGGGG" }, timeFormats: { full: "h:mm:ss a zzzz", long: "h:mm:ss a z", medium: "h:mm:ss a", short: "h:mm a" }, dateTimeFormats: { full: "{1} 'at' {0}", long: "{1} 'at' {0}", medium: "{1}, {0}", short: "{1}, {0}", availableFormats: { d: "d", E: "ccc", Ed: "d E", Ehm: "E h:mm a", EHm: "E HH:mm", Ehms: "E h:mm:ss a", EHms: "E HH:mm:ss", Gy: "y G", GyMMM: "MMM y G", GyMMMd: "MMM d, y G", GyMMMEd: "E, MMM d, y G", h: "h a", H: "HH", hm: "h:mm a", Hm: "HH:mm", hms: "h:mm:ss a", Hms: "HH:mm:ss", M: "L", Md: "M/d", MEd: "E, M/d", MMM: "LLL", MMMd: "MMM d", MMMEd: "E, MMM d", MMMMd: "MMMM d", ms: "mm:ss", y: "y G", yyyy: "y G", yyyyM: "M/y GGGGG", yyyyMd: "M/d/y GGGGG", yyyyMEd: "E, M/d/y GGGGG", yyyyMMM: "MMM y G", yyyyMMMd: "MMM d, y G", yyyyMMMEd: "E, MMM d, y G", yyyyMMMM: "MMMM y G", yyyyQQQ: "QQQ y G", yyyyQQQQ: "QQQQ y G" } } } }, timeZoneNames: { hourFormat: "+HH:mm;-HH:mm", gmtFormat: "GMT{0}", gmtZeroFormat: "GMT" } }, numbers: { currencies: { USD: { displayName: "US Dollar", symbol: "$", "symbol-alt-narrow": "$" }, EUR: { displayName: "Euro", symbol: "â‚¬", "symbol-alt-narrow": "â‚¬" }, GBP: { displayName: "British Pound", "symbol-alt-narrow": "Â£" } }, defaultNumberingSystem: "latn", minimumGroupingDigits: "1", "symbols-numberSystem-latn": { decimal: ".", group: ",", list: ";", percentSign: "%", plusSign: "+", minusSign: "-", exponential: "E", superscriptingExponent: "Ã—", perMille: "â€°", infinity: "âˆž", nan: "NaN", timeSeparator: ":" }, "decimalFormats-numberSystem-latn": { standard: "#,##0.###" }, "percentFormats-numberSystem-latn": { standard: "#,##0%" }, "currencyFormats-numberSystem-latn": { standard: "Â¤#,##0.00", accounting: "Â¤#,##0.00;(Â¤#,##0.00)" }, "scientificFormats-numberSystem-latn": { standard: "#E0" } } }, e.monthIndex = { 3: "abbreviated", 4: "wide", 5: "narrow", 1: "abbreviated" }, e.month = "months", e.days = "days", e.patternMatcher = { C: "currency", P: "percent", N: "decimal", A: "currency", E: "scientific" }, e.getResultantPattern = t, e.getDependables = i, e.getSymbolPattern = r, e.getProperNumericSkeleton = o, e.getFormatData = s, e.getCurrencySymbol = l, e.customFormat = function (t, i, n) { for (var o = {}, s = t.split(";"), a = ["pData", "nData", "zeroData"], l = 0; l < s.length; l++)o[a[l]] = function (t, i, n) { var o = { type: "decimal", minimumFractionDigits: 0, maximumFractionDigits: 0 }, s = t.match(e.customRegex); (d(s) || "" === s[5] && "N/A" !== t) && (o.type = void 0), o.nlead = s[1], o.nend = s[10]; var a = s[6]; o.useGrouping = -1 !== a.indexOf(","), a = a.replace(/,/g, ""); var l = s[7]; if (-1 !== a.indexOf("0") && (o.minimumIntegerDigits = a.length - a.indexOf("0")), d(l) || (o.minimumFractionDigits = l.lastIndexOf("0"), o.maximumFractionDigits = l.lastIndexOf("#"), -1 === o.minimumFractionDigits && (o.minimumFractionDigits = 0), (-1 === o.maximumFractionDigits || o.maximumFractionDigits < o.minimumFractionDigits) && (o.maximumFractionDigits = o.minimumFractionDigits)), d(i) ? h(o, p([o.nlead, o.nend], "%", "%")) : (h(o, p([o.nlead, o.nend], "$", i.currencySymbol)), o.isCurrency || h(o, p([o.nlead, o.nend], "%", i.percentSymbol))), !d(n)) { var c = r(o.type, i.numberMapper.numberSystem, n, !1); o.useGrouping && (o.groupSeparator = i.numberMapper.numberSymbols[g[2]], o.groupData = Tw.getGroupingDetails(c.split(";")[0])), o.nlead = o.nlead.replace(/\'/g, ""), o.nend = o.nend.replace(/\'/g, "") } return o }(s[l], i, n); return d(o.nData) && (o.nData = h({}, o.pData), o.nData.nlead = d(i) ? "-" + o.nData.nlead : i.minusSymbol + o.nData.nlead), o }, e.isCurrencyPercent = p, e.getDateSeparator = function (e) { var t = (n("dateFormats.short", e) || "").match(/[dâ€Mâ€]([^dâ€M])[dâ€Mâ€]/i); return t ? t[1] : "/" }, e.getActualDateTimeFormat = function (e, r, o, s) { var a = i(o, e, r.calendar), l = r.format || t(r.skeleton, a.dateObject, r.type); if (s) { if (-1 !== (l = l.replace(m, function (e) { return f[e] })).indexOf("z")) { var h = l.match(/z/g).length, d = void 0, c = { timeZone: {} }; c.numMapper = Mw.getNumberMapper(a.parserObject, Mw.getNumberingSystem(o)), c.timeZone = n("dates.timeZoneNames", a.parserObject); var p = (new Date).getTimezoneOffset(), u = h < 4 ? "+H;-H" : c.timeZone.hourFormat; u = u.replace(/:/g, c.numMapper.timeSeparator), 0 === p ? d = c.timeZone.gmtZeroFormat : (d = Pw.getTimeZoneValue(p, u), d = c.timeZone.gmtFormat.replace(/\{0\}/, d)), l = l.replace(/[z]+/, '"' + d + '"') } l = l.replace(/ $/, "") } return l }, e.getActualNumberFormat = function (t, n, a) { var d, c = i(a, t, "", !0), p = { custom: !0 }, u = {}, g = (n.format || "").match(e.currencyFormatRegex); if (g) { var m = {}; m.numberMapper = Mw.getNumberMapper(c.parserObject, Mw.getNumberingSystem(a), !0); var f = l(c.numericObject, n.currency || Uw), y = r("currency", m.numberMapper.numberSystem, c.numericObject, /a/i.test(n.format)), v = (y = y.replace(/\u00A4/g, f)).split(";"); u.hasNegativePattern = v.length > 1, u.nData = s(v[1] || "-" + v[0], !0, f), u.pData = s(v[0], !1, f), g[2] || n.minimumFractionDigits || n.maximumFractionDigits || (d = s(y.split(";")[0], !0, "", !0).minimumFraction) } var w; if (e.formatRegex.test(n.format) || !n.format) { if (h(p, o(n.format || "N")), p.custom = !1, w = "###0", (p.fractionDigits || n.minimumFractionDigits || n.maximumFractionDigits || d) && (p.fractionDigits && (n.minimumFractionDigits = n.maximumFractionDigits = p.fractionDigits), w = function (e, t, i) { e += "."; for (var n = 0; n < t; n++)e += "0"; if (t < i) for (var r = i - t, o = 0; o < r; o++)e += "#"; return e }(w, d || p.fractionDigits || n.minimumFractionDigits || 0, n.maximumFractionDigits || 0)), n.minimumIntegerDigits && (w = function (e, t) { for (var i = e.split("."), n = "", r = 0; r < t; r++)n += "0"; return i[1] ? n + "." + i[1] : n }(w, n.minimumIntegerDigits)), n.useGrouping && (w = function (e) { var t = e.split("."), i = t[0], n = 3 - i.length % 3; e = ""; for (var r = (i = (n && 1 === n ? "#" : 2 === n ? "##" : "") + i).length - 1; r > 0; r -= 3)e = "," + i[r - 2] + i[r - 1] + i[r] + e; return e = e.slice(1), t[1] ? e + "." + t[1] : e }(w)), "currency" === p.type) { var b = w; w = u.pData.nlead + b + u.pData.nend, u.hasNegativePattern && (w += ";" + u.nData.nlead + b + u.nData.nend) } "percent" === p.type && (w += " %") } else w = n.format.replace(/\'/g, '"'); return w }, e.getWeekData = function (e, t) { var i = y, r = n("supplemental.weekData.firstDay", t), o = e; return /en-/.test(o) && (o = o.slice(3)), o = o.slice(0, 2).toUpperCase() + o.substr(2), r && (i = r[o] || y), v[i] } }(pw || (pw = {})); var Dw; !function (e) { var t = [28607, 28636, 28665, 28695, 28724, 28754, 28783, 28813, 28843, 28872, 28901, 28931, 28960, 28990, 29019, 29049, 29078, 29108, 29137, 29167, 29196, 29226, 29255, 29285, 29315, 29345, 29375, 29404, 29434, 29463, 29492, 29522, 29551, 29580, 29610, 29640, 29669, 29699, 29729, 29759, 29788, 29818, 29847, 29876, 29906, 29935, 29964, 29994, 30023, 30053, 30082, 30112, 30141, 30171, 30200, 30230, 30259, 30289, 30318, 30348, 30378, 30408, 30437, 30467, 30496, 30526, 30555, 30585, 30614, 30644, 30673, 30703, 30732, 30762, 30791, 30821, 30850, 30880, 30909, 30939, 30968, 30998, 31027, 31057, 31086, 31116, 31145, 31175, 31204, 31234, 31263, 31293, 31322, 31352, 31381, 31411, 31441, 31471, 31500, 31530, 31559, 31589, 31618, 31648, 31676, 31706, 31736, 31766, 31795, 31825, 31854, 31884, 31913, 31943, 31972, 32002, 32031, 32061, 32090, 32120, 32150, 32180, 32209, 32239, 32268, 32298, 32327, 32357, 32386, 32416, 32445, 32475, 32504, 32534, 32563, 32593, 32622, 32652, 32681, 32711, 32740, 32770, 32799, 32829, 32858, 32888, 32917, 32947, 32976, 33006, 33035, 33065, 33094, 33124, 33153, 33183, 33213, 33243, 33272, 33302, 33331, 33361, 33390, 33420, 33450, 33479, 33509, 33539, 33568, 33598, 33627, 33657, 33686, 33716, 33745, 33775, 33804, 33834, 33863, 33893, 33922, 33952, 33981, 34011, 34040, 34069, 34099, 34128, 34158, 34187, 34217, 34247, 34277, 34306, 34336, 34365, 34395, 34424, 34454, 34483, 34512, 34542, 34571, 34601, 34631, 34660, 34690, 34719, 34749, 34778, 34808, 34837, 34867, 34896, 34926, 34955, 34985, 35015, 35044, 35074, 35103, 35133, 35162, 35192, 35222, 35251, 35280, 35310, 35340, 35370, 35399, 35429, 35458, 35488, 35517, 35547, 35576, 35605, 35635, 35665, 35694, 35723, 35753, 35782, 35811, 35841, 35871, 35901, 35930, 35960, 35989, 36019, 36048, 36078, 36107, 36136, 36166, 36195, 36225, 36254, 36284, 36314, 36343, 36373, 36403, 36433, 36462, 36492, 36521, 36551, 36580, 36610, 36639, 36669, 36698, 36728, 36757, 36786, 36816, 36845, 36875, 36904, 36934, 36963, 36993, 37022, 37052, 37081, 37111, 37141, 37170, 37200, 37229, 37259, 37288, 37318, 37347, 37377, 37406, 37436, 37465, 37495, 37524, 37554, 37584, 37613, 37643, 37672, 37701, 37731, 37760, 37790, 37819, 37849, 37878, 37908, 37938, 37967, 37997, 38027, 38056, 38085, 38115, 38144, 38174, 38203, 38233, 38262, 38292, 38322, 38351, 38381, 38410, 38440, 38469, 38499, 38528, 38558, 38587, 38617, 38646, 38676, 38705, 38735, 38764, 38794, 38823, 38853, 38882, 38912, 38941, 38971, 39001, 39030, 39059, 39089, 39118, 39148, 39178, 39208, 39237, 39267, 39297, 39326, 39355, 39385, 39414, 39444, 39473, 39503, 39532, 39562, 39592, 39621, 39650, 39680, 39709, 39739, 39768, 39798, 39827, 39857, 39886, 39916, 39946, 39975, 40005, 40035, 40064, 40094, 40123, 40153, 40182, 40212, 40241, 40271, 40300, 40330, 40359, 40389, 40418, 40448, 40477, 40507, 40536, 40566, 40595, 40625, 40655, 40685, 40714, 40744, 40773, 40803, 40832, 40862, 40892, 40921, 40951, 40980, 41009, 41039, 41068, 41098, 41127, 41157, 41186, 41216, 41245, 41275, 41304, 41334, 41364, 41393, 41422, 41452, 41481, 41511, 41540, 41570, 41599, 41629, 41658, 41688, 41718, 41748, 41777, 41807, 41836, 41865, 41894, 41924, 41953, 41983, 42012, 42042, 42072, 42102, 42131, 42161, 42190, 42220, 42249, 42279, 42308, 42337, 42367, 42397, 42426, 42456, 42485, 42515, 42545, 42574, 42604, 42633, 42662, 42692, 42721, 42751, 42780, 42810, 42839, 42869, 42899, 42929, 42958, 42988, 43017, 43046, 43076, 43105, 43135, 43164, 43194, 43223, 43253, 43283, 43312, 43342, 43371, 43401, 43430, 43460, 43489, 43519, 43548, 43578, 43607, 43637, 43666, 43696, 43726, 43755, 43785, 43814, 43844, 43873, 43903, 43932, 43962, 43991, 44021, 44050, 44080, 44109, 44139, 44169, 44198, 44228, 44258, 44287, 44317, 44346, 44375, 44405, 44434, 44464, 44493, 44523, 44553, 44582, 44612, 44641, 44671, 44700, 44730, 44759, 44788, 44818, 44847, 44877, 44906, 44936, 44966, 44996, 45025, 45055, 45084, 45114, 45143, 45172, 45202, 45231, 45261, 45290, 45320, 45350, 45380, 45409, 45439, 45468, 45498, 45527, 45556, 45586, 45615, 45644, 45674, 45704, 45733, 45763, 45793, 45823, 45852, 45882, 45911, 45940, 45970, 45999, 46028, 46058, 46088, 46117, 46147, 46177, 46206, 46236, 46265, 46295, 46324, 46354, 46383, 46413, 46442, 46472, 46501, 46531, 46560, 46590, 46620, 46649, 46679, 46708, 46738, 46767, 46797, 46826, 46856, 46885, 46915, 46944, 46974, 47003, 47033, 47063, 47092, 47122, 47151, 47181, 47210, 47240, 47269, 47298, 47328, 47357, 47387, 47417, 47446, 47476, 47506, 47535, 47565, 47594, 47624, 47653, 47682, 47712, 47741, 47771, 47800, 47830, 47860, 47890, 47919, 47949, 47978, 48008, 48037, 48066, 48096, 48125, 48155, 48184, 48214, 48244, 48273, 48303, 48333, 48362, 48392, 48421, 48450, 48480, 48509, 48538, 48568, 48598, 48627, 48657, 48687, 48717, 48746, 48776, 48805, 48834, 48864, 48893, 48922, 48952, 48982, 49011, 49041, 49071, 49100, 49130, 49160, 49189, 49218, 49248, 49277, 49306, 49336, 49365, 49395, 49425, 49455, 49484, 49514, 49543, 49573, 49602, 49632, 49661, 49690, 49720, 49749, 49779, 49809, 49838, 49868, 49898, 49927, 49957, 49986, 50016, 50045, 50075, 50104, 50133, 50163, 50192, 50222, 50252, 50281, 50311, 50340, 50370, 50400, 50429, 50459, 50488, 50518, 50547, 50576, 50606, 50635, 50665, 50694, 50724, 50754, 50784, 50813, 50843, 50872, 50902, 50931, 50960, 50990, 51019, 51049, 51078, 51108, 51138, 51167, 51197, 51227, 51256, 51286, 51315, 51345, 51374, 51403, 51433, 51462, 51492, 51522, 51552, 51582, 51611, 51641, 51670, 51699, 51729, 51758, 51787, 51816, 51846, 51876, 51906, 51936, 51965, 51995, 52025, 52054, 52083, 52113, 52142, 52171, 52200, 52230, 52260, 52290, 52319, 52349, 52379, 52408, 52438, 52467, 52497, 52526, 52555, 52585, 52614, 52644, 52673, 52703, 52733, 52762, 52792, 52822, 52851, 52881, 52910, 52939, 52969, 52998, 53028, 53057, 53087, 53116, 53146, 53176, 53205, 53235, 53264, 53294, 53324, 53353, 53383, 53412, 53441, 53471, 53500, 53530, 53559, 53589, 53619, 53648, 53678, 53708, 53737, 53767, 53796, 53825, 53855, 53884, 53913, 53943, 53973, 54003, 54032, 54062, 54092, 54121, 54151, 54180, 54209, 54239, 54268, 54297, 54327, 54357, 54387, 54416, 54446, 54476, 54505, 54535, 54564, 54593, 54623, 54652, 54681, 54711, 54741, 54770, 54800, 54830, 54859, 54889, 54919, 54948, 54977, 55007, 55036, 55066, 55095, 55125, 55154, 55184, 55213, 55243, 55273, 55302, 55332, 55361, 55391, 55420, 55450, 55479, 55508, 55538, 55567, 55597, 55627, 55657, 55686, 55716, 55745, 55775, 55804, 55834, 55863, 55892, 55922, 55951, 55981, 56011, 56040, 56070, 56100, 56129, 56159, 56188, 56218, 56247, 56276, 56306, 56335, 56365, 56394, 56424, 56454, 56483, 56513, 56543, 56572, 56601, 56631, 56660, 56690, 56719, 56749, 56778, 56808, 56837, 56867, 56897, 56926, 56956, 56985, 57015, 57044, 57074, 57103, 57133, 57162, 57192, 57221, 57251, 57280, 57310, 57340, 57369, 57399, 57429, 57458, 57487, 57517, 57546, 57576, 57605, 57634, 57664, 57694, 57723, 57753, 57783, 57813, 57842, 57871, 57901, 57930, 57959, 57989, 58018, 58048, 58077, 58107, 58137, 58167, 58196, 58226, 58255, 58285, 58314, 58343, 58373, 58402, 58432, 58461, 58491, 58521, 58551, 58580, 58610, 58639, 58669, 58698, 58727, 58757, 58786, 58816, 58845, 58875, 58905, 58934, 58964, 58994, 59023, 59053, 59082, 59111, 59141, 59170, 59200, 59229, 59259, 59288, 59318, 59348, 59377, 59407, 59436, 59466, 59495, 59525, 59554, 59584, 59613, 59643, 59672, 59702, 59731, 59761, 59791, 59820, 59850, 59879, 59909, 59939, 59968, 59997, 60027, 60056, 60086, 60115, 60145, 60174, 60204, 60234, 60264, 60293, 60323, 60352, 60381, 60411, 60440, 60469, 60499, 60528, 60558, 60588, 60618, 60648, 60677, 60707, 60736, 60765, 60795, 60824, 60853, 60883, 60912, 60942, 60972, 61002, 61031, 61061, 61090, 61120, 61149, 61179, 61208, 61237, 61267, 61296, 61326, 61356, 61385, 61415, 61445, 61474, 61504, 61533, 61563, 61592, 61621, 61651, 61680, 61710, 61739, 61769, 61799, 61828, 61858, 61888, 61917, 61947, 61976, 62006, 62035, 62064, 62094, 62123, 62153, 62182, 62212, 62242, 62271, 62301, 62331, 62360, 62390, 62419, 62448, 62478, 62507, 62537, 62566, 62596, 62625, 62655, 62685, 62715, 62744, 62774, 62803, 62832, 62862, 62891, 62921, 62950, 62980, 63009, 63039, 63069, 63099, 63128, 63157, 63187, 63216, 63246, 63275, 63305, 63334, 63363, 63393, 63423, 63453, 63482, 63512, 63541, 63571, 63600, 63630, 63659, 63689, 63718, 63747, 63777, 63807, 63836, 63866, 63895, 63925, 63955, 63984, 64014, 64043, 64073, 64102, 64131, 64161, 64190, 64220, 64249, 64279, 64309, 64339, 64368, 64398, 64427, 64457, 64486, 64515, 64545, 64574, 64603, 64633, 64663, 64692, 64722, 64752, 64782, 64811, 64841, 64870, 64899, 64929, 64958, 64987, 65017, 65047, 65076, 65106, 65136, 65166, 65195, 65225, 65254, 65283, 65313, 65342, 65371, 65401, 65431, 65460, 65490, 65520, 65549, 65579, 65608, 65638, 65667, 65697, 65726, 65755, 65785, 65815, 65844, 65874, 65903, 65933, 65963, 65992, 66022, 66051, 66081, 66110, 66140, 66169, 66199, 66228, 66258, 66287, 66317, 66346, 66376, 66405, 66435, 66465, 66494, 66524, 66553, 66583, 66612, 66641, 66671, 66700, 66730, 66760, 66789, 66819, 66849, 66878, 66908, 66937, 66967, 66996, 67025, 67055, 67084, 67114, 67143, 67173, 67203, 67233, 67262, 67292, 67321, 67351, 67380, 67409, 67439, 67468, 67497, 67527, 67557, 67587, 67617, 67646, 67676, 67705, 67735, 67764, 67793, 67823, 67852, 67882, 67911, 67941, 67971, 68e3, 68030, 68060, 68089, 68119, 68148, 68177, 68207, 68236, 68266, 68295, 68325, 68354, 68384, 68414, 68443, 68473, 68502, 68532, 68561, 68591, 68620, 68650, 68679, 68708, 68738, 68768, 68797, 68827, 68857, 68886, 68916, 68946, 68975, 69004, 69034, 69063, 69092, 69122, 69152, 69181, 69211, 69240, 69270, 69300, 69330, 69359, 69388, 69418, 69447, 69476, 69506, 69535, 69565, 69595, 69624, 69654, 69684, 69713, 69743, 69772, 69802, 69831, 69861, 69890, 69919, 69949, 69978, 70008, 70038, 70067, 70097, 70126, 70156, 70186, 70215, 70245, 70274, 70303, 70333, 70362, 70392, 70421, 70451, 70481, 70510, 70540, 70570, 70599, 70629, 70658, 70687, 70717, 70746, 70776, 70805, 70835, 70864, 70894, 70924, 70954, 70983, 71013, 71042, 71071, 71101, 71130, 71159, 71189, 71218, 71248, 71278, 71308, 71337, 71367, 71397, 71426, 71455, 71485, 71514, 71543, 71573, 71602, 71632, 71662, 71691, 71721, 71751, 71781, 71810, 71839, 71869, 71898, 71927, 71957, 71986, 72016, 72046, 72075, 72105, 72135, 72164, 72194, 72223, 72253, 72282, 72311, 72341, 72370, 72400, 72429, 72459, 72489, 72518, 72548, 72577, 72607, 72637, 72666, 72695, 72725, 72754, 72784, 72813, 72843, 72872, 72902, 72931, 72961, 72991, 73020, 73050, 73080, 73109, 73139, 73168, 73197, 73227, 73256, 73286, 73315, 73345, 73375, 73404, 73434, 73464, 73493, 73523, 73552, 73581, 73611, 73640, 73669, 73699, 73729, 73758, 73788, 73818, 73848, 73877, 73907, 73936, 73965, 73995, 74024, 74053, 74083, 74113, 74142, 74172, 74202, 74231, 74261, 74291, 74320, 74349, 74379, 74408, 74437, 74467, 74497, 74526, 74556, 74586, 74615, 74645, 74675, 74704, 74733, 74763, 74792, 74822, 74851, 74881, 74910, 74940, 74969, 74999, 75029, 75058, 75088, 75117, 75147, 75176, 75206, 75235, 75264, 75294, 75323, 75353, 75383, 75412, 75442, 75472, 75501, 75531, 75560, 75590, 75619, 75648, 75678, 75707, 75737, 75766, 75796, 75826, 75856, 75885, 75915, 75944, 75974, 76003, 76032, 76062, 76091, 76121, 76150, 76180, 76210, 76239, 76269, 76299, 76328, 76358, 76387, 76416, 76446, 76475, 76505, 76534, 76564, 76593, 76623, 76653, 76682, 76712, 76741, 76771, 76801, 76830, 76859, 76889, 76918, 76948, 76977, 77007, 77036, 77066, 77096, 77125, 77155, 77185, 77214, 77243, 77273, 77302, 77332, 77361, 77390, 77420, 77450, 77479, 77509, 77539, 77569, 77598, 77627, 77657, 77686, 77715, 77745, 77774, 77804, 77833, 77863, 77893, 77923, 77952, 77982, 78011, 78041, 78070, 78099, 78129, 78158, 78188, 78217, 78247, 78277, 78307, 78336, 78366, 78395, 78425, 78454, 78483, 78513, 78542, 78572, 78601, 78631, 78661, 78690, 78720, 78750, 78779, 78808, 78838, 78867, 78897, 78926, 78956, 78985, 79015, 79044, 79074, 79104, 79133, 79163, 79192, 79222, 79251, 79281, 79310, 79340, 79369, 79399, 79428, 79458, 79487, 79517, 79546, 79576, 79606, 79635, 79665, 79695, 79724, 79753, 79783, 79812, 79841, 79871, 79900, 79930, 79960, 79990]; e.getHijriDate = function (e) { var i = e.getDate(), n = e.getMonth(), r = e.getFullYear(), o = n + 1, s = r; o < 3 && (s -= 1, o += 12); var a = Math.floor(s / 100), l = a - Math.floor(a / 4) - 2, h = Math.floor(365.25 * (s + 4716)) + Math.floor(30.6001 * (o + 1)) + i - l - 1524, d = h + (l = (a = Math.floor((h - 1867216.25) / 36524.25)) - Math.floor(a / 4) + 1) + 1524, c = Math.floor((d - 122.1) / 365.25), p = Math.floor(365.25 * c), u = Math.floor((d - p) / 30.6001); i = d - p - Math.floor(30.6001 * u), (n = Math.floor((d - p) / 20.6001)) > 13 && (c += 1, n -= 12), n -= 1, r = c - 4716; var g = h - 24e5, m = h - 1948084, f = Math.floor(m / 10631); m -= 10631 * f; var y = Math.floor((m - .1335) / (10631 / 30)), v = 30 * f + y; m -= Math.floor(y * (10631 / 30) + .1335); var w = Math.floor((m + 28.5001) / 29.5); 13 === w && (w = 12); for (var b = m - Math.floor(29.5001 * w - 29), C = 0; C < t.length && !(t[C] > g); C++); var L = C + 16260, M = Math.floor((L - 1) / 12), S = M + 1, x = L - 12 * M, T = g - t[C - 1] + 1; return (T + "").length > 2 && (T = b, x = w, S = v), { year: S, month: x, date: T } }, e.toGregorian = function (e, i, n) { var r = n + t[12 * (e - 1) + 1 + (i - 1) - 16260 - 1] - 1 + 24e5, o = Math.floor(r + .5), s = Math.floor((o - 1867216.25) / 36524.25), a = 1524 + (s = o + 1 + s - Math.floor(s / 4)), l = Math.floor((a - 122.1) / 365.25), h = Math.floor(365.25 * l), d = Math.floor((a - h) / 30.6001), c = a - h - Math.floor(30.6001 * d), p = d - (d > 13.5 ? 13 : 1), u = l - (p > 2.5 ? 4716 : 4715); return u <= 0 && p-- , new Date(u + "/" + p + "/" + c) } }(Dw || (Dw = {})); var Aw, Ew = /\/MMMMM|MMMM|MMM|a|LLL|EEEEE|EEEE|E|K|cccc|ccc|G+|z+/gi, jw = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"], Iw = { m: "getMinutes", h: "getHours", H: "getHours", s: "getSeconds", d: "getDate" }, kw = { M: "month", d: "day", E: "weekday", c: "weekday", y: "year", m: "minute", h: "hour", H: "hour", s: "second", L: "month", a: "designator", z: "timeZone", Z: "timeZone", G: "era" }, Pw = function () { function e() { } return e.dateFormat = function (e, t, i) { var r = this, o = pw.getDependables(i, e, t.calendar), s = { isIslamic: pw.islamicRegex.test(t.calendar) }, a = t.format || pw.getResultantPattern(t.skeleton, o.dateObject, t.type); if (s.dateSeperator = pw.getDateSeparator(o.dateObject), c(a)) f("Format options or type given must be invalid"); else { s.pattern = a, s.numMapper = Mw.getNumberMapper(o.parserObject, Mw.getNumberingSystem(i)); for (var l = 0, h = a.match(Ew) || []; l < h.length; l++) { var d = h[l], p = d.length, u = d[0]; switch ("K" === u && (u = "h"), u) { case "E": case "c": s.weekday = o.dateObject[pw.days]["stand-alone"][pw.monthIndex[p]]; break; case "M": case "L": s.month = o.dateObject[pw.month]["stand-alone"][pw.monthIndex[p]]; break; case "a": s.designator = n("dayPeriods.format.wide", o.dateObject); break; case "G": var g = p <= 3 ? "eraAbbr" : 4 === p ? "eraNames" : "eraNarrow"; s.era = n("eras." + g, o.dateObject); break; case "z": s.timeZone = n("dates.timeZoneNames", o.parserObject) } } } return function (e) { return isNaN(e.getDate()) ? null : r.intDateFormatter(e, s) } }, e.intDateFormatter = function (e, t) { for (var i = "", n = t.pattern.match(pw.dateParseRegex), r = this.getCurrentDateValue(e, t.isIslamic), o = 0, s = n; o < s.length; o++) { var a = s[o], l = a.length, h = a[0]; "K" === h && (h = "h"); var c = void 0, p = void 0, u = void 0, g = ""; switch (h) { case "M": case "L": c = r.month, l > 2 ? i += t.month[c] : p = !0; break; case "E": case "c": i += t.weekday[jw[e.getDay()]]; break; case "H": case "h": case "m": case "s": case "d": p = !0, c = "d" === h ? r.date : e[Iw[h]](), "h" === h && (c = c % 12 || 12); break; case "y": u = !0, g += r.year, 2 === l && (g = g.substr(g.length - 2)); break; case "a": var m = e.getHours() < 12 ? "am" : "pm"; i += t.designator[m]; break; case "G": var f = e.getFullYear() < 0 ? 0 : 1, y = t.era[f]; d(y) && (y = t.era[f ? 0 : 1]), i += y || ""; break; case "'": i += "''" === a ? "'" : a.replace(/\'/g, ""); break; case "z": var v = e.getTimezoneOffset(), w = l < 4 ? "+H;-H" : t.timeZone.hourFormat; w = w.replace(/:/g, t.numMapper.timeSeparator), 0 === v ? i += t.timeZone.gmtZeroFormat : (u = !0, g = this.getTimeZoneValue(v, w)), g = t.timeZone.gmtFormat.replace(/\{0\}/, g); break; case ":": i += t.numMapper.numberSymbols.timeSeparator; break; case "/": i += t.dateSeperator; break; default: i += a }p && (u = !0, g = this.checkTwodigitNumber(c, l)), u && (i += Mw.convertValueParts(g, pw.latnParseRegex, t.numMapper.mapper)) } return i }, e.getCurrentDateValue = function (e, t) { return t ? Dw.getHijriDate(e) : { year: e.getFullYear(), month: e.getMonth() + 1, date: e.getDate() } }, e.checkTwodigitNumber = function (e, t) { var i = e + ""; return 2 === t && 2 !== i.length ? "0" + i : i }, e.getTimeZoneValue = function (e, t) { var i = this, n = t.split(";")[e > 0 ? 1 : 0], r = Math.abs(e); return n = n.replace(/HH?|mm/g, function (e) { var t = e.length, n = -1 !== e.indexOf("H"); return i.checkTwodigitNumber(Math.floor(n ? r / 60 : r % 60), t) }) }, e }(), Nw = /^[0-9]*$/, Ow = { minute: "setMinutes", hour: "setHours", second: "setSeconds", day: "setDate", month: "setMonth" }, Rw = function () { function e() { } return e.dateParser = function (e, t, i) { var r, o = this, s = pw.getDependables(i, e, t.calendar), a = Mw.getCurrentNumericOptions(s.parserObject, Mw.getNumberingSystem(i)), l = {}, h = t.format || pw.getResultantPattern(t.skeleton, s.dateObject, t.type), p = ""; if (c(h)) f("Format options or type given must be invalid"); else { l = { isIslamic: pw.islamicRegex.test(t.calendar), pattern: h, evalposition: {} }; for (var u = h.match(pw.dateParseRegex) || [], g = u.length, m = 0, y = 0, v = !1, w = a.numericRegex, b = Mw.getNumberMapper(s.parserObject, Mw.getNumberingSystem(i)), C = 0; C < g; C++) { var L = u[C], M = L.length, S = "K" === L[0] ? "h" : L[0], x = void 0, T = void 0, D = kw[S], A = 2 === M ? "" : "?"; switch (v && (m = y, v = !1), S) { case "E": case "c": var E = Mw.reverseObject(s.dateObject[pw.days]["stand-alone"][pw.monthIndex[M]]); p += "(" + Object.keys(E).join("|") + ")"; break; case "M": case "L": case "d": case "m": case "s": case "h": case "H": T = !0, ("M" === S || "L" === S) && M > 2 ? (l[D] = Mw.reverseObject(s.dateObject.months["stand-alone"][pw.monthIndex[M]]), p += "(" + Object.keys(l[D]).join("|") + ")") : (x = !0, p += "(" + w + w + A + ")"), "h" === S && (l.hour12 = !0); break; case "y": T = x = !0, p += 2 === M ? "(" + w + w + ")" : "(" + w + "{" + M + ",})"; break; case "a": T = !0, l[D] = Mw.reverseObject(n("dayPeriods.format.wide", s.dateObject)), p += "(" + Object.keys(l[D]).join("|") + ")"; break; case "G": T = !0; var j = M <= 3 ? "eraAbbr" : 4 === M ? "eraNames" : "eraNarrow"; l[D] = Mw.reverseObject(n("eras." + j, s.dateObject)), p += "(" + Object.keys(l[D]).join("|") + "?)"; break; case "z": T = 0 !== (new Date).getTimezoneOffset(), l[D] = n("dates.timeZoneNames", s.parserObject); var I = l[D], k = (r = M < 4) ? "+H;-H" : I.hourFormat; k = k.replace(/:/g, b.timeSeparator), p += "(" + this.parseTimeZoneRegx(k, I, w) + ")?", v = !0, y = r ? 6 : 12; break; case "'": p += "(" + L.replace(/\'/g, "") + ")?"; break; default: p += "([\\D])" }T && (l.evalposition[D] = { isNumber: x, pos: C + 1 + m, hourOnly: r }), C !== g - 1 || d(p) || (l.parserRegex = new RegExp("^" + p + "$")) } } return function (e) { var t = o.internalDateParse(e, l, a); if (d(t) || !Object.keys(t).length) return null; if (l.isIslamic) { var i = {}, n = t.year, r = t.day, s = t.month, h = n ? n + "" : "", c = 2 === h.length; n && s && r && !c || (i = Dw.getHijriDate(new Date)), c && (n = parseInt((i.year + "").slice(0, 2) + h, 10)); var p = Dw.toGregorian(n || i.year, s || i.month, r || i.date); t.year = p.getFullYear(), t.month = p.getMonth() + 1, t.day = p.getDate() } return o.getDateObject(t) } }, e.getDateObject = function (e, t) { var i = t || new Date; i.setMilliseconds(0); var n = e.year, r = e.designator, o = e.timeZone; if (!c(n)) { if ((n + "").length <= 2) { n += 100 * Math.floor(i.getFullYear() / 100) } i.setFullYear(n) } for (var s = 0, a = ["hour", "minute", "second", "month", "day"]; s < a.length; s++) { var l = a[s], h = e[l]; if (c(h) && "day" === l && i.setDate(1), !c(h)) if ("month" === l) { if ((h -= 1) < 0 || h > 11) return new Date("invalid"); var d = i.getDate(); i.setDate(1), i[Ow[l]](h); var p = new Date(i.getFullYear(), h + 1, 0).getDate(); i.setDate(d < p ? d : p) } else { if ("day" === l) { var u = new Date(i.getFullYear(), i.getMonth() + 1, 0).getDate(); if (h < 1 || h > u) return null } i[Ow[l]](h) } } if (!c(r)) { var g = i.getHours(); "pm" === r ? i.setHours(g + (12 === g ? 0 : 12)) : 12 === g && i.setHours(0) } if (!c(o)) { var m = o - i.getTimezoneOffset(); 0 !== m && i.setMinutes(i.getMinutes() + m) } return i }, e.internalDateParse = function (e, t, i) { var n = e.match(t.parserRegex), r = { hour: 0, minute: 0, second: 0 }; i.numericRegex; if (d(n)) return null; for (var o = 0, s = Object.keys(t.evalposition); o < s.length; o++) { var a = s[o], l = t.evalposition[a], h = n[l.pos]; if (l.isNumber) r[a] = this.internalNumberParser(h, i); else if ("timeZone" !== a || c(h)) r[a] = t[a][h]; else { var p = l.pos, u = void 0, g = n[p + 1], m = !c(g); l.hourOnly ? u = 60 * this.getZoneValue(m, g, n[p + 4], i) : (u = 60 * this.getZoneValue(m, g, n[p + 7], i), u += this.getZoneValue(m, n[p + 4], n[p + 10], i)), d(u) || (r[a] = u) } } return t.hour12 && (r.hour12 = !0), r }, e.internalNumberParser = function (e, t) { return e = Mw.convertValueParts(e, t.numberParseRegex, t.numericPair), Nw.test(e) ? +e : null }, e.parseTimeZoneRegx = function (e, t, i) { var n, r, o = t.gmtFormat, s = "(" + i + ")(" + i + ")"; return n = e.replace("+", "\\+"), n = -1 !== e.indexOf("HH") ? n.replace(/HH|mm/g, "(" + s + ")") : n.replace(/H|m/g, "(" + s + "?)"), r = n.split(";").map(function (e) { return o.replace("{0}", e) }), n = r.join("|") + "|" + t.gmtZeroFormat }, e.getZoneValue = function (e, t, i, n) { var r = e ? t : i; if (!r) return 0; var o = this.internalNumberParser(r, n); return e ? -o : o }, e }(), zw = /^([^0-9]*)(([0-9,]*[0-9]+)(\.[0-9]+)?)([Ee][+-]?[0-9]+)?([^0-9]*)$/, Bw = /,/g, Fw = ["minusSign", "infinity"], Vw = function () { function e() { } return e.numberParser = function (e, t, i) { var n, r = this, o = pw.getDependables(i, e, "", !0), s = { custom: !0 }; pw.formatRegex.test(t.format) || !t.format ? (h(s, pw.getProperNumericSkeleton(t.format || "N")), s.custom = !1) : h(s, pw.customFormat(t.format, null, null)), n = Mw.getCurrentNumericOptions(o.parserObject, Mw.getNumberingSystem(i), !0), s.symbolRegex = Mw.getSymbolRegex(Object.keys(n.symbolMatch)), s.infinity = n.symbolNumberSystem[Fw[1]]; var a = pw.getSymbolPattern(s.type, n.numberSystem, o.numericObject, s.isAccount); if (a) { var l = (a = a.replace(/\u00A4/g, pw.defaultCurrency)).split(";"); s.nData = pw.getFormatData(l[1] || "-" + l[0], !0, ""), s.pData = pw.getFormatData(l[0], !0, "") } return function (e) { return r.getParsedNumber(e, s, n) } }, e.getParsedNumber = function (e, t, i) { var n, r, o, s, a, l; if (-1 !== e.indexOf(t.infinity)) return 1 / 0; e = Mw.convertValueParts(e, t.symbolRegex, i.symbolMatch), 0 === (e = Mw.convertValueParts(e, i.numberParseRegex, i.numericPair)).indexOf(".") && (e = "0" + e); var h = e.match(zw); if (d(h)) return NaN; s = h[1], o = h[2]; var c = h[5]; return a = h[6], n = t.custom ? s === t.nData.nlead && a === t.nData.nend : -1 !== s.indexOf(t.nData.nlead) && -1 !== a.indexOf(t.nData.nend), r = n ? t.nData.isPercent : t.pData.isPercent, o = o.replace(Bw, ""), c && (o += c), l = +o, ("percent" === t.type || r) && (l /= 100), (t.custom || t.fractionDigits) && (l = parseFloat(l.toFixed(t.custom ? n ? t.nData.maximumFractionDigits : t.pData.maximumFractionDigits : t.fractionDigits))), n && (l *= -1), l }, e }(), Ww = new ew, Hw = !1, _w = {}, Yw = "en-US", Uw = "USD", qw = ["numericObject", "dateObject"], Gw = function () { function e(e) { e && (this.culture = e) } return e.prototype.getDateFormat = function (e) { return Pw.dateFormat(this.getCulture(), e || { type: "date", skeleton: "short" }, _w) }, e.prototype.getNumberFormat = function (e) { return e && !e.currency && (e.currency = Uw), Tw.numberFormatter(this.getCulture(), e || {}, _w) }, e.prototype.getDateParser = function (e) { return Rw.dateParser(this.getCulture(), e || { skeleton: "short", type: "date" }, _w) }, e.prototype.getNumberParser = function (e) { return Vw.numberParser(this.getCulture(), e || { format: "N" }, _w) }, e.prototype.formatNumber = function (e, t) { return this.getNumberFormat(t)(e) }, e.prototype.formatDate = function (e, t) { return this.getDateFormat(t)(e) }, e.prototype.parseDate = function (e, t) { return this.getDateParser(t)(e) }, e.prototype.parseNumber = function (e, t) { return this.getNumberParser(t)(e) }, e.prototype.getDatePattern = function (e, t) { return pw.getActualDateTimeFormat(this.getCulture(), e, _w, t) }, e.prototype.getNumberPattern = function (e) { return pw.getActualNumberFormat(this.getCulture(), e, _w) }, e.prototype.getFirstDayOfWeek = function () { return pw.getWeekData(this.getCulture(), _w) }, e.prototype.getCulture = function () { return this.culture || Yw }, e }(), Qw = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Xw = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, Jw = 0, Zw = 0, Kw = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.randomId = L(), n.isStringTemplate = !1, n.needsID = !1, n.createElement = M, d(n.enableRtl) && n.setProperties({ enableRtl: Hw }, !0), d(n.locale) && n.setProperties({ locale: Yw }, !0), n.moduleLoader = new vw(n), n.localObserver = new ew(n), Ww.on("notifyExternalChange", n.detectFunction, n, n.randomId), c(i) || n.appendTo(), n } return Qw(t, e), t.prototype.requiredModules = function () { return [] }, t.prototype.destroy = function () { this.isDestroyed || (this.enablePersistence && this.setPersistData(), this.localObserver.destroy(), this.refreshing || (x([this.element], ["e-control"]), this.trigger("destroyed", { cancel: !1 }), e.prototype.destroy.call(this), this.moduleLoader.clean(), Ww.off("notifyExternalChange", this.detectFunction, this.randomId))) }, t.prototype.refresh = function () { this.refreshing = !0, this.moduleLoader.clean(), this.destroy(), this.clearChanges(), this.localObserver = new ew(this), this.preRender(), this.injectModules(), this.render(), this.refreshing = !1 }, t.prototype.appendTo = function (t) { if (d(t) || "string" != typeof t ? d(t) || (this.element = t) : this.element = document.querySelector(t), !d(this.element)) { var i = "e-" + this.getModuleName().toLowerCase(); S([this.element], ["e-control", i]), this.isProtectedOnChange = !1, this.needsID && !this.element.id && (this.element.id = this.getUniqueID(this.getModuleName())), this.enablePersistence && (this.mergePersistData(), window.addEventListener("unload", this.setPersistData.bind(this))); var r = n("ej2_instances", this.element); r && -1 !== r.indexOf(this) || e.prototype.addInstance.call(this), this.preRender(), this.injectModules(), this.render(), this.trigger("created") } }, t.prototype.dataBind = function () { this.injectModules(), e.prototype.dataBind.call(this) }, t.prototype.on = function (e, t, i) { if ("string" == typeof e) this.localObserver.on(e, t, i); else for (var n = 0, r = e; n < r.length; n++) { var o = r[n]; this.localObserver.on(o.event, o.handler, o.context) } }, t.prototype.off = function (e, t) { if ("string" == typeof e) this.localObserver.off(e, t); else for (var i = 0, n = e; i < n.length; i++) { var r = n[i]; this.localObserver.off(r.event, r.handler) } }, t.prototype.notify = function (e, t) { !0 !== this.isDestroyed && this.localObserver.notify(e, t) }, t.prototype.getInjectedModules = function () { return this.injectedModules }, t.Inject = function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; this.prototype.injectedModules || (this.prototype.injectedModules = []); for (var i = 0; i < e.length; i++)-1 === this.prototype.injectedModules.indexOf(e[i]) && this.prototype.injectedModules.push(e[i]) }, t.prototype.injectModules = function () { this.injectedModules && this.injectedModules.length && this.moduleLoader.inject(this.requiredModules(), this.injectedModules) }, t.prototype.detectFunction = function (e) { var t = Object.keys(e); t.length && (this[t[0]] = e[t[0]]) }, t.prototype.mergePersistData = function () { var e = window.localStorage.getItem(this.getModuleName() + this.element.id); d(e) || "" === e || this.setProperties(JSON.parse(e), !0) }, t.prototype.setPersistData = function () { this.isDestroyed || window.localStorage.setItem(this.getModuleName() + this.element.id, this.getPersistData()) }, t.prototype.clearTemplate = function (e, t) { }, t.prototype.getUniqueID = function (e) { return this.isHistoryChanged() && (Jw = 0), Aw = this.pageID(location.href), Zw = history.length, e + "_" + Aw + "_" + Jw++ }, t.prototype.pageID = function (e) { var t = 0; if (0 === e.length) return t; for (var i = 0; i < e.length; i++) { t = (t << 5) - t + e.charCodeAt(i), t &= t } return Math.abs(t) }, t.prototype.isHistoryChanged = function () { return Aw !== this.pageID(location.href) || Zw !== history.length }, t.prototype.addOnPersist = function (e) { for (var t = this, i = {}, o = 0, s = e; o < s.length; o++) { var a = s[o], l = void 0; c(l = n(a, this)) || r(a, this.getActualProperties(l), i) } return JSON.stringify(i, function (e, i) { return t.getActualProperties(i) }) }, t.prototype.getActualProperties = function (e) { return e instanceof ww ? n("properties", e) : e }, t.prototype.ignoreOnPersist = function (e) { return JSON.stringify(this.iterateJsonProperties(this.properties, e)) }, t.prototype.iterateJsonProperties = function (e, t) { for (var i = {}, n = function (n) { if (-1 === t.indexOf(n)) { var o = e[n]; if ("object" != typeof o || o instanceof Array) i[n] = o; else { var s = t.filter(function (e) { return new RegExp(n + ".").test(e) }).map(function (e) { return e.replace(n + ".", "") }); i[n] = r.iterateJsonProperties(r.getActualProperties(o), s) } } }, r = this, o = 0, s = Object.keys(e); o < s.length; o++) { n(s[o]) } return i }, Xw([Y(!1)], t.prototype, "enablePersistence", void 0), Xw([Y()], t.prototype, "enableRtl", void 0), Xw([Y()], t.prototype, "locale", void 0), t = Xw([J], t) }(iw); "undefined" != typeof window && window.addEventListener("popstate", function () { Jw = 0 }); var $w, eb = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), tb = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, ib = { left: 0, top: 0, bottom: 0, right: 0 }, nb = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return eb(t, e), tb([Y(0)], t.prototype, "left", void 0), tb([Y(0)], t.prototype, "top", void 0), t }(ww), rb = function (e) { function t(t, n) { var r = e.call(this, n, t) || this; return r.dragLimit = i.getDefaultPosition(), r.borderWidth = i.getDefaultPosition(), r.padding = i.getDefaultPosition(), r.diffX = 0, r.prevLeft = 0, r.prevTop = 0, r.dragProcessStarted = !1, r.tapHoldTimer = 0, r.externalInitialize = !1, r.diffY = 0, r.droppables = {}, r.bind(), r } eb(t, e), i = t, t.prototype.bind = function () { this.toggleEvents(), uw.isIE && S([this.element], "e-block-touch"), this.droppables[this.scope] = {} }, t.getDefaultPosition = function () { return h({}, ib) }, t.prototype.toggleEvents = function (e) { var t; c(this.handle) || (t = N(this.handle, this.element)); var i = this.enableTapHold && uw.isDevice && uw.isTouch ? this.mobileInitialize : this.initialize; e ? Kv.remove(t || this.element, uw.touchStartEvent, i) : Kv.add(t || this.element, uw.touchStartEvent, i, this) }, t.prototype.mobileInitialize = function (e) { var t = this, i = e.currentTarget; this.tapHoldTimer = setTimeout(function () { t.externalInitialize = !0, t.removeTapholdTimer(), t.initialize(e, i) }, this.tapHoldThreshold), Kv.add(document, uw.touchMoveEvent, this.removeTapholdTimer, this) }, t.prototype.removeTapholdTimer = function () { clearTimeout(this.tapHoldTimer), Kv.remove(document, uw.touchMoveEvent, this.removeTapholdTimer) }, t.prototype.getScrollableParent = function (e, t) { return d(e) ? null : e[{ vertical: "scrollHeight", horizontal: "scrollWidth" }[t]] > e[{ vertical: "clientHeight", horizontal: "clientWidth" }[t]] ? e : this.getScrollableParent(e.parentNode, t) }, t.prototype.initialize = function (e, t) { if (this.target = e.currentTarget || t, this.dragProcessStarted = !1, !this.abort || d(R(e.target, this.abort))) { this.preventDefault && !c(e.changedTouches) && e.preventDefault(), this.element.setAttribute("aria-grabbed", "true"); var i = this.getCoordinates(e); if (this.initialPosition = { x: i.pageX, y: i.pageY }, !this.clone) { var n = this.element.getBoundingClientRect(), r = 0, o = 0; if (!(this.element.classList.contains("e-dialog") && this.element.classList.contains("e-dlg-modal"))) { var s = this.getScrollableParent(this.element.parentNode, "vertical"), a = this.getScrollableParent(this.element.parentNode, "horizontal"); r = a ? a.scrollLeft : 0, o = s ? s.scrollTop : 0 } this.relativeXPosition = i.pageX - (n.left + r), this.relativeYPosition = i.pageY - (n.top + o) } this.externalInitialize ? this.intDragStart(e) : (Kv.add(document, uw.touchMoveEvent, this.intDragStart, this), Kv.add(document, uw.touchEndEvent, this.intDestroy, this)), this.toggleEvents(!0), document.body.classList.add("e-prevent-select"), this.externalInitialize = !1, Kv.trigger(document.documentElement, uw.touchStartEvent, e) } }, t.prototype.intDragStart = function (e) { this.removeTapholdTimer(); var t = !c(e.changedTouches); if (!t || 1 === e.changedTouches.length) { t && e.preventDefault(); var i, n = this.getCoordinates(e), r = getComputedStyle(this.element); this.margin = { left: parseInt(r.marginLeft, 10), top: parseInt(r.marginTop, 10), right: parseInt(r.marginRight, 10), bottom: parseInt(r.marginBottom, 10) }; var o = this.element; if (this.clone && this.dragTarget) { var s = R(e.target, this.dragTarget); d(s) || (o = s) } this.offset = this.calculateParentPosition(o), this.position = this.getMousePosition(e); var a = this.initialPosition.x - n.pageX, l = this.initialPosition.y - n.pageY; if (Math.sqrt(a * a + l * l) >= this.distance || this.externalInitialize) { var h = this.getHelperElement(e); if (!h || d(h)) return; var p = this.helperElement = h; if (this.parentClientRect = this.calculateParentPosition(p.offsetParent), this.dragStart) { var u = this.getProperTargetElement(e); this.trigger("dragStart", { event: e, element: o, target: u }) } this.dragArea ? this.setDragArea() : (this.dragLimit = { left: 0, right: 0, bottom: 0, top: 0 }, this.borderWidth = { top: 0, left: 0 }), i = { left: this.position.left - this.parentClientRect.left, top: this.position.top - this.parentClientRect.top }, this.clone && !this.enableTailMode && (this.diffX = this.position.left - this.offset.left, this.diffY = this.position.top - this.offset.top); var g = this.getProcessedPositionValue({ top: i.top - this.diffY + "px", left: i.left - this.diffX + "px" }); z(p, this.getDragPosition({ position: "absolute", left: g.left, top: g.top })), Kv.remove(document, uw.touchMoveEvent, this.intDragStart), Kv.remove(document, uw.touchEndEvent, this.intDestroy), D(p) ? (Kv.add(document, uw.touchMoveEvent, this.intDrag, this), Kv.add(document, uw.touchEndEvent, this.intDragStop, this), this.setGlobalDroppables(!1, this.element, p)) : (this.toggleEvents(), document.body.classList.remove("e-prevent-select")) } } }, t.prototype.elementInViewport = function (e) { for (this.top = e.offsetTop, this.left = e.offsetLeft, this.width = e.offsetWidth, this.height = e.offsetHeight; e.offsetParent;)e = e.offsetParent, this.top += e.offsetTop, this.left += e.offsetLeft; return this.top >= window.pageYOffset && this.left >= window.pageXOffset && this.top + this.height <= window.pageYOffset + window.innerHeight && this.left + this.width <= window.pageXOffset + window.innerWidth }, t.prototype.getProcessedPositionValue = function (e) { return this.queryPositionInfo ? this.queryPositionInfo(e) : e }, t.prototype.calculateParentPosition = function (e) { if (d(e)) return { left: 0, top: 0 }; var t = e.getBoundingClientRect(), i = getComputedStyle(e); return { left: t.left + window.pageXOffset - parseInt(i.marginLeft, 10), top: t.top + window.pageYOffset - parseInt(i.marginTop, 10) } }, t.prototype.intDrag = function (e) { if (c(e.changedTouches) || 1 === e.changedTouches.length) { var t, i; this.position = this.getMousePosition(e); var n = this.getDocumentWidthHeight("Height"); n < this.position.top && (this.position.top = n); var r = this.getDocumentWidthHeight("Width"); if (r < this.position.left && (this.position.left = r), this.drag) { var o = this.getProperTargetElement(e); this.trigger("drag", { event: e, element: this.element, target: o }) } var s = this.checkTargetElement(e); s.target && s.instance ? (s.instance.dragData[this.scope] = this.droppables[this.scope], s.instance.intOver(e, s.target), this.hoverObject = s) : this.hoverObject && (this.hoverObject.instance.intOut(e, s.target), this.hoverObject.instance.dragData[this.scope] = null, this.hoverObject = null); var a = this.droppables[this.scope].helper; this.parentClientRect = this.calculateParentPosition(this.helperElement.offsetParent); var l = this.parentClientRect.left, h = this.parentClientRect.top, p = this.getCoordinates(e), u = p.pageX, g = p.pageY, m = this.position.left - this.diffX, f = this.position.top - this.diffY; if (this.dragArea) { var y = getComputedStyle(a); if (this.pageX !== u || this.skipDistanceCheck) { var v = a.offsetWidth + (parseFloat(y.marginLeft) + parseFloat(y.marginRight)); t = this.dragLimit.left + window.pageXOffset > m ? this.dragLimit.left : this.dragLimit.right + window.pageXOffset < m + v ? this.dragLimit.right - v : m } if (this.pageY !== g || this.skipDistanceCheck) { var w = a.offsetHeight + (parseFloat(y.marginTop) + parseFloat(y.marginBottom)); i = this.dragLimit.top + window.pageYOffset > f ? this.dragLimit.top : this.dragLimit.bottom + window.pageYOffset < f + w ? this.dragLimit.bottom - w : f } } else t = m, i = f; var b = h + this.borderWidth.top, C = l + this.borderWidth.left; this.dragProcessStarted && (d(i) && (i = this.prevTop), d(t) && (t = this.prevLeft)); var L = this.getProcessedPositionValue({ top: i - b + "px", left: t - C + "px" }); z(a, this.getDragPosition(L)), !this.elementInViewport(a) && this.enableAutoScroll && this.helperElement.scrollIntoView(), this.dragProcessStarted = !0, this.prevLeft = t, this.prevTop = i, this.position.left = t, this.position.top = i, this.pageX = u, this.pageY = g } }, t.prototype.getDragPosition = function (e) { var t = h({}, e); return this.axis && ("x" === this.axis ? delete t.top : "y" === this.axis && delete t.left), t }, t.prototype.getDocumentWidthHeight = function (e) { var t = document.body, i = document.documentElement; return Math.max(t["scroll" + e], i["scroll" + e], t["offset" + e], i["offset" + e], i["client" + e]) }, t.prototype.intDragStop = function (e) { if (this.dragProcessStarted = !1, c(e.changedTouches) || 1 === e.changedTouches.length) { if (-1 !== ["touchend", "pointerup", "mouseup"].indexOf(e.type)) { if (this.dragStop) { var t = this.getProperTargetElement(e); this.trigger("dragStop", { event: e, element: this.element, target: t, helper: this.helperElement }) } this.intDestroy(e) } else this.element.setAttribute("aria-grabbed", "false"); var i = this.checkTargetElement(e); i.target && i.instance && (i.instance.dragStopCalled = !0, i.instance.dragData[this.scope] = this.droppables[this.scope], i.instance.intDrop(e, i.target)), this.setGlobalDroppables(!0), document.body.classList.remove("e-prevent-select") } }, t.prototype.intDestroy = function (e) { this.dragProcessStarted = !1, this.toggleEvents(), document.body.classList.remove("e-prevent-select"), this.element.setAttribute("aria-grabbed", "false"), Kv.remove(document, uw.touchMoveEvent, this.intDragStart), Kv.remove(document, uw.touchEndEvent, this.intDragStop), Kv.remove(document, uw.touchEndEvent, this.intDestroy), Kv.remove(document, uw.touchMoveEvent, this.intDrag) }, t.prototype.onPropertyChanged = function (e, t) { }, t.prototype.getModuleName = function () { return "draggable" }, t.prototype.setDragArea = function () { var e, t, i, n = 0, r = 0; if (i = "string" === typeof this.dragArea ? N(this.dragArea) : this.dragArea) { var o = i.getBoundingClientRect(); e = o.width ? o.width : o.right - o.left, t = o.height ? o.height : o.bottom - o.top; for (var s = ["Top", "Left", "Bottom", "Right"], a = getComputedStyle(i), l = 0; l < s.length; l++) { var h = s[l], d = a["border" + h + "Width"], c = a["padding" + h], p = h.toLowerCase(); this.borderWidth[p] = isNaN(parseFloat(d)) ? 0 : parseFloat(d), this.padding[p] = isNaN(parseFloat(c)) ? 0 : parseFloat(c) } n = o.top, r = o.left, this.dragLimit.left = r + this.borderWidth.left + this.padding.left, this.dragLimit.top = n + this.borderWidth.top + this.padding.top, this.dragLimit.right = r + e - (this.borderWidth.right + this.padding.right), this.dragLimit.bottom = n + t - (this.borderWidth.bottom + this.padding.bottom) } }, t.prototype.getProperTargetElement = function (e) { var t, i = this.getCoordinates(e), n = this.helperElement.style.display || ""; return m(e.target, this.helperElement) || -1 !== e.type.indexOf("touch") ? (this.helperElement.style.display = "none", t = document.elementFromPoint(i.clientX, i.clientY), this.helperElement.style.display = n) : t = e.target, t }, t.prototype.getMousePosition = function (e) { var t = this.getCoordinates(e), i = this.clone ? t.pageX : t.pageX + window.pageXOffset - this.relativeXPosition, n = this.clone ? t.pageY : t.pageY + window.pageYOffset - this.relativeYPosition; return { left: i - (this.margin.left + this.cursorAt.left), top: n - (this.margin.top + this.cursorAt.top) } }, t.prototype.getCoordinates = function (e) { return e.type.indexOf("touch") > -1 ? e.changedTouches[0] : e }, t.prototype.getHelperElement = function (e) { var t; return this.clone ? this.helper ? t = this.helper({ sender: e, element: this.target }) : (t = M("div", { className: "e-drag-helper e-block-touch", innerHTML: "Draggable" }), document.body.appendChild(t)) : t = this.element, t }, t.prototype.setGlobalDroppables = function (e, t, i) { this.droppables[this.scope] = e ? null : { draggable: t, helper: i, draggedElement: this.element } }, t.prototype.checkTargetElement = function (e) { var t = this.getProperTargetElement(e), i = this.getDropInstance(t); if (!i && t && !d(t.parentNode)) { var n = R(t.parentNode, ".e-droppable") || t.parentElement; n && (i = this.getDropInstance(n)) } return { target: t, instance: i } }, t.prototype.getDropInstance = function (e) { var t, i = e && e.ej2_instances; if (i) for (var n = 0, r = i; n < r.length; n++) { var o = r[n]; if ("droppable" === o.getModuleName()) { t = o; break } } return t }, t.prototype.destroy = function () { this.toggleEvents(!0), e.prototype.destroy.call(this) }; var i; return tb([U({}, nb)], t.prototype, "cursorAt", void 0), tb([Y(!0)], t.prototype, "clone", void 0), tb([Y()], t.prototype, "dragArea", void 0), tb([X()], t.prototype, "drag", void 0), tb([X()], t.prototype, "dragStart", void 0), tb([X()], t.prototype, "dragStop", void 0), tb([Y(1)], t.prototype, "distance", void 0), tb([Y()], t.prototype, "handle", void 0), tb([Y()], t.prototype, "abort", void 0), tb([Y()], t.prototype, "helper", void 0), tb([Y("default")], t.prototype, "scope", void 0), tb([Y("")], t.prototype, "dragTarget", void 0), tb([Y()], t.prototype, "axis", void 0), tb([Y()], t.prototype, "queryPositionInfo", void 0), tb([Y(!1)], t.prototype, "enableTailMode", void 0), tb([Y(!1)], t.prototype, "skipDistanceCheck", void 0), tb([Y(!0)], t.prototype, "preventDefault", void 0), tb([Y(!1)], t.prototype, "enableAutoScroll", void 0), tb([Y(!1)], t.prototype, "enableTapHold", void 0), tb([Y(750)], t.prototype, "tapHoldThreshold", void 0), t = i = tb([J], t) }(iw), ob = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), sb = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, ab = function (e) { function t(t, i) { var n = e.call(this, i, t) || this; return n.mouseOver = !1, n.dragData = {}, n.dragStopCalled = !1, n.bind(), n } return ob(t, e), t.prototype.bind = function () { this.wireEvents() }, t.prototype.wireEvents = function () { Kv.add(this.element, uw.touchEndEvent, this.intDrop, this) }, t.prototype.onPropertyChanged = function (e, t) { }, t.prototype.getModuleName = function () { return "droppable" }, t.prototype.intOver = function (e, t) { if (!this.mouseOver) { var i = this.dragData[this.scope]; this.trigger("over", { event: e, target: t, dragData: i }), this.mouseOver = !0 } }, t.prototype.intOut = function (e, t) { this.mouseOver && (this.trigger("out", { evt: e, target: t }), this.mouseOver = !1) }, t.prototype.intDrop = function (e, t) { if (this.dragStopCalled) { this.dragStopCalled = !1; var i, n = !0, r = this.dragData[this.scope], o = !!r && (r.helper && D(r.helper)); o && (i = this.isDropArea(e, r.helper, t), this.accept && (n = F(r.helper, this.accept))), o && this.drop && i.canDrop && n && this.trigger("drop", { event: e, target: i.target, droppedElement: r.helper, dragData: r }), this.mouseOver = !1 } }, t.prototype.isDropArea = function (e, t, i) { var n = { canDrop: !0, target: i || e.target }, r = "touchend" === e.type; if (r || n.target === t) { t.style.display = "none"; var o = r ? e.changedTouches[0] : e, s = document.elementFromPoint(o.clientX, o.clientY); n.canDrop = !1, n.canDrop = m(s, this.element), n.canDrop && (n.target = s), t.style.display = "" } return n }, t.prototype.destroy = function () { Kv.remove(this.element, uw.touchEndEvent, this.intDrop), e.prototype.destroy.call(this) }, sb([Y()], t.prototype, "accept", void 0), sb([Y("default")], t.prototype, "scope", void 0), sb([X()], t.prototype, "drop", void 0), sb([X()], t.prototype, "over", void 0), sb([X()], t.prototype, "out", void 0), t = sb([J], t) }(iw), lb = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), hb = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, db = { backspace: 8, tab: 9, enter: 13, shift: 16, control: 17, alt: 18, pause: 19, capslock: 20, space: 32, escape: 27, pageup: 33, pagedown: 34, end: 35, home: 36, leftarrow: 37, uparrow: 38, rightarrow: 39, downarrow: 40, insert: 45, delete: 46, f1: 112, f2: 113, f3: 114, f4: 115, f5: 116, f6: 117, f7: 118, f8: 119, f9: 120, f10: 121, f11: 122, f12: 123, semicolon: 186, plus: 187, comma: 188, minus: 189, dot: 190, forwardslash: 191, graveaccent: 192, openbracket: 219, backslash: 220, closebracket: 221, singlequote: 222 }, cb = function (e) { function t(t, n) { var r = e.call(this, n, t) || this; return r.keyPressHandler = function (e) { for (var t = e.altKey, n = e.ctrlKey, o = e.shiftKey, s = e.which, a = 0, l = Object.keys(r.keyConfigs); a < l.length; a++)for (var h = l[a], d = 0, c = r.keyConfigs[h].split(","); d < c.length; d++) { var p = c[d], u = i.getKeyConfigData(p.trim()); t === u.altKey && n === u.ctrlKey && o === u.shiftKey && s === u.keyCode && (e.action = h, r.keyAction && r.keyAction(e)) } }, r.bind(), r } lb(t, e), i = t, t.prototype.destroy = function () { this.unwireEvents(), e.prototype.destroy.call(this) }, t.prototype.onPropertyChanged = function (e, t) { }, t.prototype.bind = function () { this.wireEvents() }, t.prototype.getModuleName = function () { return "keyboard" }, t.prototype.wireEvents = function () { this.element.addEventListener(this.eventName, this.keyPressHandler) }, t.prototype.unwireEvents = function () { this.element.removeEventListener(this.eventName, this.keyPressHandler) }, t.getKeyConfigData = function (e) { if (e in this.configCache) return this.configCache[e]; var t = e.toLowerCase().split("+"), n = { altKey: -1 !== t.indexOf("alt"), ctrlKey: -1 !== t.indexOf("ctrl"), shiftKey: -1 !== t.indexOf("shift"), keyCode: null }; return t[t.length - 1].length > 1 && Number(t[t.length - 1]) ? n.keyCode = Number(t[t.length - 1]) : n.keyCode = i.getKeyCode(t[t.length - 1]), i.configCache[e] = n, n }, t.getKeyCode = function (e) { return db[e] || e.toUpperCase().charCodeAt(0) }; var i; return t.configCache = {}, hb([Y({})], t.prototype, "keyConfigs", void 0), hb([Y("keyup")], t.prototype, "eventName", void 0), hb([X()], t.prototype, "keyAction", void 0), t = i = hb([J], t) }(iw), pb = function () { function e(e, t, i) { this.controlName = e, this.localeStrings = t, this.setLocale(i || Yw) } return e.prototype.setLocale = function (t) { var i = this.intGetControlConstant(e.locale, t); this.currentLocale = i || this.localeStrings }, e.load = function (e) { this.locale = h(this.locale, e, {}, !0) }, e.prototype.getConstant = function (e) { return d(this.currentLocale[e]) ? this.localeStrings[e] || "" : this.currentLocale[e] }, e.prototype.intGetControlConstant = function (e, t) { return e[t] ? e[t][this.controlName] : null }, e.locale = {}, e }(), ub = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gb = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, mb = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ub(t, e), gb([Y(50)], t.prototype, "swipeThresholdDistance", void 0), t }(ww), fb = /(Up|Down)/, yb = function (e) { function t(t, i) { var n = e.call(this, i, t) || this; return n.touchAction = !0, n.tapCount = 0, n.startEvent = function (e) { if (!0 === n.touchAction) { var t = e.changedTouches ? e.changedTouches[0] : e; void 0 !== e.changedTouches && (n.touchAction = !1), n.isTouchMoved = !1, n.movedDirection = "", n.startPoint = n.lastMovedPoint = { clientX: t.clientX, clientY: t.clientY }, n.startEventData = t, n.hScrollLocked = n.vScrollLocked = !1, n.tStampStart = Date.now(), n.timeOutTapHold = setTimeout(function () { n.tapHoldEvent(e) }, n.tapHoldThreshold), Kv.add(n.element, uw.touchMoveEvent, n.moveEvent, n), Kv.add(n.element, uw.touchEndEvent, n.endEvent, n), Kv.add(n.element, uw.touchCancelEvent, n.cancelEvent, n) } }, n.moveEvent = function (e) { var t = e.changedTouches ? e.changedTouches[0] : e; n.movedPoint = t, n.isTouchMoved = !(t.clientX === n.startPoint.clientX && t.clientY === n.startPoint.clientY); var i = {}; if (n.isTouchMoved) { clearTimeout(n.timeOutTapHold), n.calcScrollPoints(e); i = h(i, {}, { startEvents: n.startEventData, originalEvent: e, startX: n.startPoint.clientX, startY: n.startPoint.clientY, distanceX: n.distanceX, distanceY: n.distanceY, scrollDirection: n.scrollDirection, velocity: n.getVelocity(t) }), n.trigger("scroll", i), n.lastMovedPoint = { clientX: t.clientX, clientY: t.clientY } } }, n.cancelEvent = function (e) { clearTimeout(n.timeOutTapHold), clearTimeout(n.timeOutTap), n.tapCount = 0, n.swipeFn(e), Kv.remove(n.element, uw.touchCancelEvent, n.cancelEvent) }, n.endEvent = function (e) { n.swipeFn(e), n.isTouchMoved || "function" == typeof n.tap && (n.trigger("tap", { originalEvent: e, tapCount: ++n.tapCount }), n.timeOutTap = setTimeout(function () { n.tapCount = 0 }, n.tapThreshold)), n.modeclear() }, n.swipeFn = function (e) { clearTimeout(n.timeOutTapHold), clearTimeout(n.timeOutTap); var t = e; e.changedTouches && (t = e.changedTouches[0]); var i = t.clientX - n.startPoint.clientX, r = t.clientY - n.startPoint.clientY; i = Math.floor(i < 0 ? -1 * i : i), r = Math.floor(r < 0 ? -1 * r : i), n.isTouchMoved = i > 1 || r > 1, n.endPoint = t, n.calcPoints(e); var o = { originalEvent: e, startEvents: n.startEventData, startX: n.startPoint.clientX, startY: n.startPoint.clientY, distanceX: n.distanceX, distanceY: n.distanceY, swipeDirection: n.movedDirection, velocity: n.getVelocity(t) }; if (n.isTouchMoved) { var s = void 0, a = n.swipeSettings.swipeThresholdDistance; s = h(s, n.defaultArgs, o); var l = !1, d = n.element, c = n.isScrollable(d), p = fb.test(n.movedDirection); (a < n.distanceX && !p || a < n.distanceY && p) && (l = !c || n.checkSwipe(d, p)), l && n.trigger("swipe", s) } n.modeclear() }, n.modeclear = function () { n.modeClear = setTimeout(function () { n.touchAction = !0 }, "function" != typeof n.tap ? 0 : 20), n.lastTapTime = (new Date).getTime(), Kv.remove(n.element, uw.touchMoveEvent, n.moveEvent), Kv.remove(n.element, uw.touchEndEvent, n.endEvent), Kv.remove(n.element, uw.touchCancelEvent, n.cancelEvent) }, n.bind(), n } return ub(t, e), t.prototype.onPropertyChanged = function (e, t) { }, t.prototype.bind = function () { this.wireEvents(), uw.isIE && this.element.classList.add("e-block-touch") }, t.prototype.destroy = function () { this.unwireEvents(), e.prototype.destroy.call(this) }, t.prototype.wireEvents = function () { Kv.add(this.element, uw.touchStartEvent, this.startEvent, this) }, t.prototype.unwireEvents = function () { Kv.remove(this.element, uw.touchStartEvent, this.startEvent) }, t.prototype.getModuleName = function () { return "touch" }, t.prototype.isScrollable = function (e) { var t = getComputedStyle(e), i = t.overflow + t.overflowX + t.overflowY; return !!/(auto|scroll)/.test(i) }, t.prototype.tapHoldEvent = function (e) { this.tapCount = 0, this.touchAction = !0; var t; Kv.remove(this.element, uw.touchMoveEvent, this.moveEvent), Kv.remove(this.element, uw.touchEndEvent, this.endEvent), t = { originalEvent: e }, this.trigger("tapHold", t), Kv.remove(this.element, uw.touchCancelEvent, this.cancelEvent) }, t.prototype.calcPoints = function (e) { var t = e.changedTouches ? e.changedTouches[0] : e; this.defaultArgs = { originalEvent: e }, this.distanceX = Math.abs(Math.abs(t.clientX) - Math.abs(this.startPoint.clientX)), this.distanceY = Math.abs(Math.abs(t.clientY) - Math.abs(this.startPoint.clientY)), this.distanceX > this.distanceY ? this.movedDirection = t.clientX > this.startPoint.clientX ? "Right" : "Left" : this.movedDirection = t.clientY < this.startPoint.clientY ? "Up" : "Down" }, t.prototype.calcScrollPoints = function (e) { var t = e.changedTouches ? e.changedTouches[0] : e; this.defaultArgs = { originalEvent: e }, this.distanceX = Math.abs(Math.abs(t.clientX) - Math.abs(this.lastMovedPoint.clientX)), this.distanceY = Math.abs(Math.abs(t.clientY) - Math.abs(this.lastMovedPoint.clientY)), (this.distanceX > this.distanceY || !0 === this.hScrollLocked) && !1 === this.vScrollLocked ? (this.scrollDirection = t.clientX > this.lastMovedPoint.clientX ? "Right" : "Left", this.hScrollLocked = !0) : (this.scrollDirection = t.clientY < this.lastMovedPoint.clientY ? "Up" : "Down", this.vScrollLocked = !0) }, t.prototype.getVelocity = function (e) { var t = e.clientX, i = e.clientY, n = Date.now(), r = t - this.startPoint.clientX, o = i - this.startPoint.clientX, s = n - this.tStampStart; return Math.sqrt(r * r + o * o) / s }, t.prototype.checkSwipe = function (e, t) { var i = ["scroll", "offset"], n = t ? ["Height", "Top"] : ["Width", "Left"]; return e[i[0] + n[0]] <= e[i[1] + n[0]] || (0 === e[i[0] + n[1]] || e[i[1] + n[0]] + e[i[0] + n[1]] >= e[i[0] + n[0]]) }, gb([X()], t.prototype, "tap", void 0), gb([X()], t.prototype, "tapHold", void 0), gb([X()], t.prototype, "swipe", void 0), gb([X()], t.prototype, "scroll", void 0), gb([Y(350)], t.prototype, "tapThreshold", void 0), gb([Y(750)], t.prototype, "tapHoldThreshold", void 0), gb([U({}, mb)], t.prototype, "swipeSettings", void 0), t = gb([J], t) }(iw), vb = new RegExp("\\n|\\r|\\s\\s+", "g"), wb = new RegExp(/'|"/g), bb = new RegExp("if ?\\("), Cb = new RegExp("else if ?\\("), Lb = new RegExp("else"), Mb = new RegExp("for ?\\("), Sb = new RegExp("(/if|/for)"), xb = new RegExp("\\((.*)\\)", ""), Tb = new RegExp("^[0-9]+$", "g"), Db = new RegExp("[\\w\"'.\\s+]+", "g"), Ab = new RegExp('"(.*?)"', "g"), Eb = /\@|\#|\$/g, jb = new RegExp("\\${([^}]*)}", "g"), Ib = /^\..*/gm, kb = /^[\n\r.]+\<tr|^\<tr/, Pb = /^[\n\r.]+\<svg|^\<path|^\<g/, Nb = {}, Ob = { compile: (new (function () { function e() { } return e.prototype.compile = function (e, t) { return void 0 === t && (t = {}), le(e, t) }, e }())).compile }; !function (e) { e[e.invalid = 0] = "invalid" }($w || ($w = {})); var Rb; !function (e) { e[e.All = 2] = "All" }(Rb || (Rb = {})); var zb; !function (e) { e[e.Auto = 0] = "Auto", e[e.Size10x10 = 1] = "Size10x10", e[e.Size12x12 = 2] = "Size12x12", e[e.Size14x14 = 3] = "Size14x14", e[e.Size16x16 = 4] = "Size16x16", e[e.Size18x18 = 5] = "Size18x18", e[e.Size20x20 = 6] = "Size20x20", e[e.Size22x22 = 7] = "Size22x22", e[e.Size24x24 = 8] = "Size24x24", e[e.Size26x26 = 9] = "Size26x26", e[e.Size32x32 = 10] = "Size32x32", e[e.Size36x36 = 11] = "Size36x36", e[e.Size40x40 = 12] = "Size40x40", e[e.Size44x44 = 13] = "Size44x44", e[e.Size48x48 = 14] = "Size48x48", e[e.Size52x52 = 15] = "Size52x52", e[e.Size64x64 = 16] = "Size64x64", e[e.Size72x72 = 17] = "Size72x72", e[e.Size80x80 = 18] = "Size80x80", e[e.Size88x88 = 19] = "Size88x88", e[e.Size96x96 = 20] = "Size96x96", e[e.Size104x104 = 21] = "Size104x104", e[e.Size120x120 = 22] = "Size120x120", e[e.Size132x132 = 23] = "Size132x132", e[e.Size144x144 = 24] = "Size144x144", e[e.Size8x18 = 25] = "Size8x18", e[e.Size8x32 = 26] = "Size8x32", e[e.Size12x26 = 27] = "Size12x26", e[e.Size12x36 = 28] = "Size12x36", e[e.Size16x36 = 29] = "Size16x36", e[e.Size16x48 = 30] = "Size16x48" }(zb || (zb = {})); var Bb; !function (e) { e[e.Auto = 0] = "Auto", e[e.Version01 = 1] = "Version01", e[e.Version02 = 2] = "Version02", e[e.Version03 = 3] = "Version03", e[e.Version04 = 4] = "Version04", e[e.Version05 = 5] = "Version05", e[e.Version06 = 6] = "Version06", e[e.Version07 = 7] = "Version07", e[e.Version08 = 8] = "Version08", e[e.Version09 = 9] = "Version09", e[e.Version10 = 10] = "Version10", e[e.Version11 = 11] = "Version11", e[e.Version12 = 12] = "Version12", e[e.Version13 = 13] = "Version13", e[e.Version14 = 14] = "Version14", e[e.Version15 = 15] = "Version15", e[e.Version16 = 16] = "Version16", e[e.Version17 = 17] = "Version17", e[e.Version18 = 18] = "Version18", e[e.Version19 = 19] = "Version19", e[e.Version20 = 20] = "Version20", e[e.Version21 = 21] = "Version21", e[e.Version22 = 22] = "Version22", e[e.Version23 = 23] = "Version23", e[e.Version24 = 24] = "Version24", e[e.Version25 = 25] = "Version25", e[e.Version26 = 26] = "Version26", e[e.Version27 = 27] = "Version27", e[e.Version28 = 28] = "Version28", e[e.Version29 = 29] = "Version29", e[e.Version30 = 30] = "Version30", e[e.Version31 = 31] = "Version31", e[e.Version32 = 32] = "Version32", e[e.Version33 = 33] = "Version33", e[e.Version34 = 34] = "Version34", e[e.Version35 = 35] = "Version35", e[e.Version36 = 36] = "Version36", e[e.Version37 = 37] = "Version37", e[e.Version38 = 38] = "Version38", e[e.Version39 = 39] = "Version39", e[e.Version40 = 40] = "Version40" }(Bb || (Bb = {})); var Fb; !function (e) { e[e.Low = 7] = "Low", e[e.Medium = 15] = "Medium", e[e.Quartile = 25] = "Quartile", e[e.High = 30] = "High" }(Fb || (Fb = {})); var Vb, Wb, Hb, _b, Yb, Ub, qb, Gb, Qb, Xb, Jb, Zb, Kb, $b, eC, tC = function () { return function (e, t) { this.width = e, this.height = t } }(), iC = function () { function e() { } return e.getContext = function (e) { return e.getContext("2d") }, e.prototype.renderRootElement = function (e, t, i, n) { var r = ge("canvas", e), o = r.getContext("2d"); return o.fillStyle = t, o.fillRect(0, 0, i, n), r }, e.prototype.renderRect = function (e, t) { var i = e.getContext("2d"); return i.fillStyle = t.color, i.fillRect(t.x, t.y, t.width, t.height), e }, e.prototype.renderText = function (e, t) { var i = e.getContext("2d"); return i.save(), i.font = t.stringSize + "px " + t.fontStyle, i.fillStyle = t.color, i.fillText(t.string, t.x, t.y), e }, e }(), nC = function () { function e() { } return e.prototype.renderRootElement = function (e, t) { var i = ve("svg", e); return i.setAttribute("style", "background:" + t), i }, e.prototype.renderRect = function (e, t) { var i = document.createElementNS("http://www.w3.org/2000/svg", "rect"); return i.setAttribute("x", t.x.toString()), i.setAttribute("y", t.y.toString()), i.setAttribute("width", t.width.toString()), i.setAttribute("height", t.height.toString()), i.setAttribute("fill", t.color), e.appendChild(i), e }, e.prototype.renderText = function (e, t) { var i = document.createElementNS("http://www.w3.org/2000/svg", "text"); return i.setAttribute("x", t.x.toString()), i.setAttribute("y", t.y.toString()), i.setAttribute("fill", t.color), i.style.fontSize = t.stringSize.toString() + "px", i.style.fontFamily = t.fontStyle, i.textContent = t.string, e.appendChild(i), e }, e }(), rC = function () { function e(e, t) { this.renderer = null, this.isSvgMode = null, this.isSvgMode = t, this.renderer = t ? new nC : new iC } return e.prototype.renderRootElement = function (e, t, i, n) { return this.renderer.renderRootElement(e, t, i, n) }, e.prototype.renderRectElement = function (e, t) { return this.renderer.renderRect(e, t) }, e.prototype.renderTextElement = function (e, t) { return this.renderer.renderText(e, t) }, e }(), oC = function () { return function () { } }(), sC = function () { return function (e, t, i, n) { this.x = Number.MAX_VALUE, this.y = Number.MAX_VALUE, this.width = 0, this.height = 0, this.x = e, this.y = t, this.width = i, this.height = n } }(), aC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), lC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return aC(t, e), t.prototype.getInstance = function (e) { var t = document.getElementById(e); return new rC(t.id, this.isSvgMode) }, t.prototype.getDrawableSize = function (e, t, i) { var n, r; n = (this.isSvgMode ? e.bottom : 1.5 * e.bottom) + (this.isSvgMode ? e.top : 1.5 * e.top), r = (this.isSvgMode ? e.right : 1.5 * e.right) + (this.isSvgMode ? e.left : 1.5 * e.left); return new sC(e.left, e.top, t - r, i - n) }, t.prototype.getBaseAttributes = function (e, t, i, n, r, o, s, a, l) { var h = { width: e, height: t, x: i, y: n, color: r, string: o, stringSize: s, visibility: a, fontStyle: l }; if (this.isSvgMode || (h.height = h.height / 1.5), o && !this.isSvgMode) { var d = 1.5 * this.margin.bottom - this.margin.bottom; h.y += d } return h }, t.prototype.getBarLineRatio = function (e, t) { var i = this.type; if ("Code39" === i || "Code32" === i || "Code39Extension" === i || "Code11" === i) { var n = e.length * ("Code39" === i || "Code32" === i || "Code39Extension" === i ? 6 : 3); return t / (e.length * ("Code39" === i || "Code32" === i || "Code39Extension" === i ? 3 : 2) * 2 + n + e.length - 1) } if ("Code128A" === i || "Code128B" === i || "Code128C" === i || "Code128" === i) { return t / ((l = e[0].length) + e.length - 1) } if ("Code93Extension" === i) { for (var r = 0, o = 0; o < e.length; o++)for (var s = e[o], a = 0; a < s.length; a++)r += Number(s[a]); return t / r } var l = 0; for (o = 0; o < e.length; o++) { l += s = e[o].length } var h = void 0; return "Ean8" === i || "Ean13" === i || "UpcA" === i ? h = 2 : "Code93" === i && (h = 1 - e.length), t / (h ? l + e.length - 1 + h : l + e.length - 1) }, t.prototype.multipleWidth = function (e, t, i) { var n; return "1" === e[t] && "1" === e[t + 1] ? (n = i + 1, this.multipleWidth(e, t + 1, n)) : i }, t.prototype.barCodeType = function (e) { return "Code39" === e || "UpcE" === e || "Code39Extension" === e ? "twoBars" : "UpcA" === e || "Ean13" === e || "Ean8" === e ? "threeBars" : "noBars" }, t.prototype.checkStartValueCondition = function (e, t, i, n) { return 1 === e && 0 === t && "twoBars" === n && "UpcE" !== this.type || (0 === e && t === i - 1 || 2 === e && t === i - 2) && ("Ean8" === this.type || "Ean13" === this.type) || "UpcE" === this.type && 2 === e && 0 === t || "threeBars" === n && 2 === e && t === i - 1 || "UpcA" === this.type && (1 === e && t === i - 2 || 3 === e && t === i - 2) || "noBars" === n && 0 === e && 0 === t }, t.prototype.checkEndValueCondition = function (e, t, i, n, r, o) { var s = this.type; return e === i && t === n.length - 2 && ("Code39" === s || "Code39Extension" === s) || "Code11" === s && t === n.length - 1 && e === i - 1 || "Code93Extension" === s && t === n.length - 1 && e === i - 1 || "Ean8" === s && (1 === t && e === i || t === n.length - 2 && e === i) || "Ean13" === this.type && (2 === t && 1 === e || t === n.length - 2 && e === i) || "UpcA" === s && (3 === t && 0 === e || 5 === t && (r ? e === o : 1 === e)) || "UpcE" === s && t === n.length - 2 && 1 === e || "Code93" === s && t === n.length - 1 && e === i - 1 || "Code39" !== s && "Code39Extension" !== s && "Ean8" !== s && "Ean13" !== s && t === n.length - 1 && e === i }, t.prototype.getDisplayText = function (e, t) { return "Ean8" === this.type ? 1 === e ? this.value.substring(0, 4) : this.value.substring(4, 8) : "Ean13" === this.type ? 2 === e ? this.value.substring(1, 7) : this.value.substring(7) : "UpcA" === this.type ? 3 === e ? this.value.substring(0, 6) : this.value.substring(6, 12) : t.text ? t.text : this.value }, t.prototype.checkExtraHeight = function (e, t, i) { return !(0 !== e && e !== i.length - 1 || "Code39" !== t && "Code39Extension" !== t) || !("Ean8" !== t && "Ean13" !== t || 0 !== e && 2 !== e && e !== i.length - 1) || "UpcA" === t && (1 === e || e === i.length - 2 || e === i.length - 4) || "UpcE" === t && (1 === e || e === i.length - 2 || e === i.length - 4) }, t.prototype.getWidthValue = function (e, t, i) { if ("Code93Extension" !== this.type) if (e) { t = e % ("Code32" === i ? 3 : 2) ? 1 : 2 } else t = 1; return "Code93Extension" === this.type && (t = !e || e % 4 ? !e || e % 2 ? !e || e % 3 ? 1 : 3 : 2 : 4), t }, t.prototype.calculateBarCodeAttributes = function (e, t, i) { var n, r = !1, o = this.getDrawableSize(this.margin, this.width, this.height); if (o.height > 0 && o.width > 0) { var s = void 0, a = [], l = o.x, h = this.getBarLineRatio(e, o.width); h = this.isSvgMode ? h : h / 1.5; for (var d = 0, c = void 0, p = this.type, u = this.displayText.position, g = this.isSvgMode ? 1 : 1.5, m = void 0, f = void 0, y = void 0, v = void 0, w = 0; w < e.length; w++) { var b = e[w], C = "UpcA" !== p && "UpcE" !== p && "Code11" !== p && "Code93" !== p && "Code93Extension" !== p, L = this.barCodeType(this.type), M = this.checkExtraHeight(w, p, e), S = b.length; r = !1; for (var x = 0; C ? x <= S : x < S; x++) { var T = !1; this.checkStartValueCondition(w, x, S, L) ? d = l : this.checkEndValueCondition(x, w, S, e, r, n) && (c = l, "UpcA" === this.type && r && n && (c -= n * h), T = !0); var D = "Code39" === p || "Code93Extension" === p || "Code32" === p || "Code11" === p || "Code39Extension" === p ? !(x % 2) : "1" === b[x], A = b.toString(), E = Number(A[x]), j = void 0; j = this.getWidthValue(E, j, p), j *= h, v = this.displayText; var I = this.getDisplayText(w, v); if (m = this.getBaseAttributes(void 0, void 0, d, "Bottom" === u ? o.y + o.height + 2 : o.y + y - 2, this.foreColor, i || I, v.size, v.visibility, v.font), y || (we(), y = (f = fe(m)).height / 2 + 2), M && (s = this.getBaseAttributes(j, "Top" === u && "noBars" !== L ? o.height - y - this.displayText.margin.top : o.height, l, "Bottom" === u ? o.y : o.y + y + this.displayText.margin.top, this.foreColor)), "Ean13" === p && 0 === x && 0 === w && v.visibility && ((m = this.getBaseAttributes(void 0, void 0, d, "Bottom" === u ? o.y + o.height + 2 : o.y + y + this.displayText.margin.top - 2 - this.displayText.margin.bottom, this.foreColor, i || I, v.size, v.visibility, v.font)).string = this.value[0], this.drawText(t, m)), !M || T || "UpcA" === p && M) { var k = "Code39" === p || "Code32" === p || "Code93Extension" === p || "Code39Extension" === p || "Code11" === p, P = o.height, N = P - y * g > 0 ? P - y * g : 0; if (k || "Ean8" === p || "Ean13" === p) { N = "Top" === u && "noBars" !== L ? N - y : N; var O = M ? o.height : N; "Code39" !== this.type && (O = "Top" === u && "noBars" !== L ? O - this.displayText.margin.top - y : O), s = this.getBaseAttributes(j, O, l, "Bottom" === u ? o.y : o.y + y + this.displayText.margin.top, this.foreColor) } if (!(k && (T || k) || T && "UpcE" === this.type)) { x += (n = this.multipleWidth(b, x, 1)) - 1, n > 1 && (r = !0); var R = n > 1 ? n * j : j, z = o.height - y * g; O = M ? o.height : z; O = "Top" === u && "noBars" !== L ? O - this.displayText.margin.top - y : O, s = this.getBaseAttributes(R, O, l, "Bottom" === u ? o.y : o.y + y + this.displayText.margin.top, this.foreColor), l = n > 1 ? l + n * j : l + 1 * j } !T && M || this.verticalTextMargin(v, s, m), v.visibility && (c && "Ean8" !== p && "Ean13" !== p && "UpcA" !== p && "UpcE" !== p || ("Ean8" === p || "UpcA" === p || "UpcE" === p || "Ean13" === p) && T) && (v.margin.left || v.margin.right || !v.text && "UpcA" !== p ? this.getAlignmentPosition(m, c, d, f) : this.updateOverlappedTextPosition(c - d, m, f, d, v, c), this.alignDisplayText(m, v, d, c, f), this.drawText(t, m)) } D && a.push(s), this.canIncrementCheck(p, w, e) && (l += j) } } this.drawImage(t, a) } }, t.prototype.canIncrementCheck = function (e, t, i) { return "Code39" === e || "Code32" === e || "Code39Extension" === e || "Code93Extension" === e || "Code11" === e || "UpcE" === e && (1 === t || t === i.length - 2) || !("Ean8" !== e && "Ean13" !== e || 0 !== t && t !== i.length - 1 && 2 !== t) }, t.prototype.verticalTextMargin = function (e, t, i) { e.margin.top && t.height - e.margin.top > 0 && (e.margin.top > 0 && "Bottom" === e.position ? t.height -= e.margin.top : i.y += e.margin.top), e.margin.bottom && t.height - e.margin.bottom > 0 && (e.margin.bottom > 0 ? (i.y -= e.margin.bottom, "Bottom" === this.displayText.position && (t.height -= e.margin.bottom)) : i.y -= e.margin.bottom) }, t.prototype.getAlignmentPosition = function (e, t, i, n) { "Center" === this.displayText.alignment ? e.x += (t - i) / 2 - .5 * n.width : "Left" === this.displayText.alignment ? e.x = i : e.x = t - n.width }, t.prototype.drawImage = function (e, t) { for (var i = this.getInstance(e.id), n = 0; n < t.length; n++)i.renderRectElement(e, t[n]) }, t.prototype.updateDisplayTextSize = function (e, t, i, n, r) { if (e.x + t.width > i || e.x < n && e.stringSize > 2) { e.x < n && r.margin.right; if (e.x < n && r.margin.right) { e.stringSize -= 2; var o = fe(e); e.x += (i - n) / 2 - .5 * o.width; var s = void 0; s = r.margin.right - (i - (e.x + t.width)), e.x -= s, this.updateDisplayTextSize(e, o, i, n, r) } } }, t.prototype.alignDisplayText = function (e, t, i, n, r) { var o = !1; if (t.margin.left || t.margin.right) { if (e.x - i < t.margin.left && t.margin.left) { o = !0; var s = t.margin.left - (e.x - i); e.x += s, this.updateDisplayTextSize(e, r, n, i, t) } if (n - (e.x + r.width) < t.margin.right && t.margin.right && !o) { s = t.margin.right - (n - (e.x + r.width)); e.x -= s, this.updateDisplayTextSize(e, r, n, i, t) } else if (n - (e.x + r.width) < t.margin.right) { var a = fe(e); this.updateOverlappedTextPosition(n - i, e, a, i, t, n), this.updateDisplayTextSize(e, a, n, i, t) } } }, t.prototype.updateOverlappedTextPosition = function (e, t, i, n, r, o) { if ((i.width > e || r) && o - (t.x + i.width) <= r.margin.right && t.stringSize > 2) { t.stringSize -= r ? .2 : 2; var s = fe(t); this.updateOverlappedTextPosition(e, t, s, n, r, o) } else !r.margin.left && !r.margin.right && t.stringSize > 2 && this.getAlignmentPosition(t, o, n, i) }, t.prototype.drawText = function (e, t) { this.isSvgMode || (t.y /= 1.5); this.getInstance(e.id).renderTextElement(e, t) }, t }(oC), hC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hC(t, e), t.prototype.validateInput = function (e) { return -1 === e.search(/^[0-9A-Za-z\-\.\ \@\$\/\+\%\!\@\#\$\%\&\*\^\(\)\_\+\=\<\>\?\{\}\[\]\~\-\ÃŠ]+$/) ? "Supports only 128 characters of ASCII." : void 0 }, t.prototype.getCodeValue = function () { return [11011001100, 11001101100, 11001100110, 10010011e3, 10010001100, 10001001100, 10011001e3, 10011000100, 10001100100, 11001001e3, 11001000100, 11000100100, 10110011100, 10011011100, 10011001110, 10111001100, 10011101100, 10011100110, 11001110010, 11001011100, 11001001110, 11011100100, 11001110100, 11101101110, 11101001100, 11100101100, 11100100110, 11101100100, 11100110100, 11100110010, 11011011e3, 11011000110, 11000110110, 10100011e3, 10001011e3, 10001000110, 10110001e3, 10001101e3, 10001100010, 11010001e3, 11000101e3, 11000100010, 10110111e3, 10110001110, 10001101110, 10111011e3, 10111000110, 10001110110, 11101110110, 11010001110, 11000101110, 11011101e3, 11011100010, 11011101110, 11101011e3, 11101000110, 11100010110, 11101101e3, 11101100010, 11100011010, 11101111010, 11001000010, 11110001010, 1010011e4, 10100001100, 1001011e4, 10010000110, 10000101100, 10000100110, 1011001e4, 10110000100, 1001101e4, 10011000010, 10000110100, 10000110010, 11000010010, 1100101e4, 11110111010, 11000010100, 10001111010, 10100111100, 10010111100, 10010011110, 10111100100, 10011110100, 10011110010, 11110100100, 11110010100, 11110010010, 11011011110, 11011110110, 11110110110, 10101111e3, 10100011110, 10001011110, 10111101e3, 10111100010, 11110101e3, 11110100010, 10111011110, 10111101110, 11101011110, 11110101110, 11010000100, 1101001e4, 11010011100, 1100011101011] }, t.prototype.getBytes = function (e) { for (var t = [], i = 0; i < e.length; i++)t.push(e[i].charCodeAt(0)); return t }, t.prototype.appendStartStopCharacters = function (e) { var t; return "Code128A" === this.type ? t = String.fromCharCode(208) : "Code128B" === this.type ? t = String.fromCharCode(209) : "Code128C" === this.type && (t = String.fromCharCode(210)), t + e }, t.prototype.check128C = function (e) { return e.match(new RegExp("^(Ã*[0-9]{2}Ã*)*"))[0] }, t.prototype.check128A = function (e) { return e.match(new RegExp("^[\0-_Ãˆ-Ã]*"))[0] }, t.prototype.check128B = function (e) { return e.match(new RegExp("^[ -Ãˆ-Ã]*"))[0] }, t.prototype.clipAB = function (e, t) { var i = t ? "[\0-_Ãˆ-Ã]" : "[ -Ãˆ-Ã]", n = e.match(new RegExp("^(" + i + "+?)(([0-9]{2}){2,})([^0-9]|$)")); if (n) return n[1] + String.fromCharCode(204) + this.clipC(e.substring(n[1].length)); return e.match(new RegExp("^" + i + "+"))[0].length, e.length, e }, t.prototype.code128Clip = function () { if (this.check128C(this.value).length >= 2) return String.fromCharCode(210) + this.clipC(this.value); var e = this.check128A(this.value) > this.check128B(this.value); return (e ? String.fromCharCode(208) : String.fromCharCode(209)) + this.clipAB(this.value, e) }, t.prototype.clipC = function (e) { var t = this.check128C(e), i = t.length; if (i === e.length) return e; e = e.substring(i); var n = this.check128A(e) >= this.check128B(e); return t + String.fromCharCode(n ? 206 : 205) + this.clipAB(e, n) }, t.prototype.draw = function (e) { this.code128(e) }, t.prototype.code128 = function (e) { var t = this.value; t = "Code128" !== this.type ? this.appendStartStopCharacters(t) : this.code128Clip(); var i, n, r = (i = this.getBytes(t)).shift() - 105; n = 103 === r ? "0" : 104 === r ? "1" : "2"; var o = this.encodeData(i, 1, n), s = this.encode(r, o), a = []; a.push(s), this.calculateBarCodeAttributes(a, e) }, t.prototype.encodeData = function (e, t, i) { if (!e.length) return { result: "", checksum: 0 }; var n, r; if (e[0] >= 200) { r = e.shift() - 105; var o = this.swap(r); void 0 !== o && (n = this.encodeData(e, t + 1, o)) } else r = this.correctIndex(e, i), n = this.encodeData(e, t + 1, i); var s = r * t; return { result: this.getCodes(r) + n.result, checksum: s + n.checksum } }, t.prototype.swap = function (e) { return 99 === e ? "2" : 100 === e ? "1" : "0" }, t.prototype.encode = function (e, t) { var i = this.getCodes(e) + t.result; return this.enableCheckSum && (i += this.getCodes((t.checksum + e) % 103)), i += this.getCodes(106) }, t.prototype.correctIndex = function (e, t) { if ("0" === t) { var i = e.shift(); return i < 32 ? i + 64 : i - 32 } return "1" === t ? e.shift() - 32 : 10 * (e.shift() - 48) + e.shift() - 48 }, t.prototype.getCodes = function (e) { var t = this.getCodeValue(); return t[e] ? t[e].toString() : "" }, t }(lC), cC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return cC(t, e), t.prototype.validateInput = function (e) { return new RegExp("^[ -Ãˆ-Ã]+$").test(e) ? void 0 : "Supports only ASCII characters 32 to 127 (0â€“9, Aâ€“Z, aâ€“z), and special characters." }, t.prototype.draw = function (e) { this.code128(e) }, t }(dC), uC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return uC(t, e), t.prototype.validateInput = function (e) { return new RegExp("^(Ã*[0-9]{2}Ã*)+$").test(e) ? void 0 : "Supports even number of numeric characters (00-99)." }, t.prototype.draw = function (e) { this.code128(e) }, t }(dC), mC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), fC = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, yC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return mC(t, e), fC([Y(10)], t.prototype, "left", void 0), fC([Y(10)], t.prototype, "right", void 0), fC([Y(10)], t.prototype, "top", void 0), fC([Y(10)], t.prototype, "bottom", void 0), t }(ww), vC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), wC = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, bC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return vC(t, e), wC([Y("")], t.prototype, "text", void 0), wC([Y(!0)], t.prototype, "visibility", void 0), wC([Y("monospace")], t.prototype, "font", void 0), wC([Y(20)], t.prototype, "size", void 0), wC([U({ left: 0, right: 0, top: 0, bottom: 0 }, yC)], t.prototype, "margin", void 0), wC([Y("Center")], t.prototype, "alignment", void 0), wC([Y("Bottom")], t.prototype, "position", void 0), t }(ww), CC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), LC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return CC(t, e), t.prototype.getCodeValue = function () { return ["111221211", "211211112", "112211112", "212211111", "111221112", "211221111", "112221111", "111211212", "211211211", "112211211", "211112112", "112112112", "212112111", "111122112", "211122111", "112122111", "111112212", "211112211", "112112211", "111122211", "211111122", "112111122", "212111121", "111121122", "211121121", "112121121", "111111222", "211111221", "112111221", "111121221", "221111112", "122111112", "222111111", "121121112", "221121111", "122121111", "121111212", "221111211", "122111211", "121121211", "121212111", "121211121", "121112121", "111212121"] }, t.prototype.getCharacter = function () { return "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%" }, t.prototype.checkSum = function (e, t) { for (var i = 0, n = 0; n < e.length; n++) { i += t.indexOf(e[n]) } return i %= 43 }, t.prototype.validateInput = function (e) { return -1 === e.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/) ? "Supports A-Z, 0-9, and symbols ( - . $ / + % SPACE)." : void 0 }, t.prototype.getPatternCollection = function (e, t) { for (var i, n = [], r = this.getCodeValue(), o = 0; o < e.length; o++)i = t.indexOf(e.charAt(o)), n.push(r[i]); return n }, t.prototype.appendStartStopCharacters = function (e) { return "*" + e + "*" }, t.prototype.drawCode39Extension = function (e, t) { this.draw(e, t) }, t.prototype.draw = function (e, t) { var i = t || this.value, n = this.getCharacter(); if (this.enableCheckSum) { i += this.checkSum(i, n) } i = this.appendStartStopCharacters(i); var r = this.getPatternCollection(i, n); this.calculateBarCodeAttributes(r, e) }, t }(lC), MC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return MC(t, e), t.prototype.validateInput = function (e) { return -1 === e.search(/^[0-9A-D\-\.\$\/\+\%\:]+$/) ? "Supports 0-9, A-D and symbols (-,$, /, ., +)." : void 0 }, t.prototype.getCodeValue = function () { return { 0: "101010011", 1: "101011001", 2: "101001011", 3: "110010101", 4: "101101001", 5: "110101001", 6: "100101011", 7: "100101101", 8: "100110101", 9: "110100101", "-": "101001101", $: "101100101", ":": "1101011011", "/": "1101101011", ".": "1101101101", "+": "101100110011", A: "1011001001", B: "1001001011", C: "1010010011", D: "1010011001" } }, t.prototype.appendStartStopCharacters = function (e) { return "A" + e + "A" }, t.prototype.getPatternCollection = function (e, t) { for (var i = [], n = 0; n < e.length; n++) { var r = e[n]; i.push(t[r]) } return i }, t.prototype.draw = function (e) { var t = this.getCodeValue(), i = this.value; i = this.appendStartStopCharacters(i); var n = this.getPatternCollection(i, t); this.calculateBarCodeAttributes(n, e) }, t }(lC), xC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), TC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return xC(t, e), t.prototype.validateInput = function (e) { return new RegExp("^[\0-_Ãˆ-Ã]+$").test(e) ? void 0 : "Supports only ASCII characters 00 to 95 (0â€“9, Aâ€“Z and control codes) and special characters." }, t.prototype.draw = function (e) { this.code128(e) }, t }(dC), DC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), AC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return DC(t, e), t.prototype.validateInput = function (e) { return -1 !== e.search(/^[0-9]{8}$/) && Number(e[7]) === this.checkSumData(e) ? void 0 : "Accepts 8 numeric characters." }, t.prototype.getCodeValueRight = function (e) { return e ? { 0: "0001101", 1: "0011001", 2: "0010011", 3: "0111101", 4: "0100011", 5: "0110001", 6: "0101111", 7: "0111011", 8: "0110111", 9: "0001011" } : { 0: "1110010", 1: "1100110", 2: "1101100", 3: "1000010", 4: "1011100", 5: "1001110", 6: "1010000", 7: "1000100", 8: "1001000", 9: "1110100" } }, t.prototype.checkSumData = function (e) { for (var t = 0; t < e.length; t++) { var i = 10 - (Number(e[1]) + Number(e[3]) + Number(e[5]) + 3 * (Number(e[0]) + Number(e[2]) + Number(e[4]) + Number(e[6]))) % 10; return 0 === i ? i = 0 : i } return 0 }, t.prototype.draw = function (e) { var t = this.getCodeValueRight(!0), i = []; i.push("101"), i.push(this.leftValue(t, !0)), i.push("01010"), t = this.getCodeValueRight(!1), i.push(this.leftValue(t, !1)), i.push("101"), this.calculateBarCodeAttributes(i, e) }, t.prototype.leftValue = function (e, t) { for (var i, n = t ? 0 : this.value.length - 4; n < (t ? this.value.length - 4 : this.value.length); n++)0 === n || 4 === n ? i = e[this.value[n]] : i += e[this.value[n]]; return i }, t }(lC), EC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), jC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EC(t, e), t.prototype.validateInput = function (e) { return -1 !== e.search(/^[0-9]{13}$/) && Number(e[12]) === this.checkSumData(e) ? void 0 : -1 !== e.search(/^[0-9]{12}$/) ? (e += this.checkSumData(e), void (this.value = e)) : "Accepts 12 numeric characters." }, t.prototype.checkSumData = function (e) { var t = 3 * (Number(e[11]) + Number(e[9]) + Number(e[7]) + Number(e[5]) + Number(e[3]) + Number(e[1])) + (Number(e[10]) + Number(e[8]) + Number(e[6]) + Number(e[4]) + Number(e[2]) + Number(e[0])); return 10 * Math.round(t / 10) - t }, t.prototype.getStructure = function () { return { 0: "LLLLLL", 1: "LLGLGG", 2: "LLGGLG", 3: "LLGGGL", 4: "LGLLGG", 5: "LGGLLG", 6: "LGGGLL", 7: "LGLGLG", 8: "LGLGGL", 9: "LGGLGL" } }, t.prototype.getBinaries = function () { return { L: ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"], G: ["0100111", "0110011", "0011011", "0100001", "0011101", "0111001", "0000101", "0010001", "0001001", "0010111"], R: ["1110010", "1100110", "1101100", "1000010", "1011100", "1001110", "1010000", "1000100", "1001000", "1110100"], O: ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"], E: ["0100111", "0110011", "0011011", "0100001", "0011101", "0111001", "0000101", "0010001", "0001001", "0010111"] } }, t.prototype.draw = function (e) { var t = [], i = this.getStructure()[this.value[0]]; t.push("101"); var n = this.value.substr(1, 6); t.push(this.leftValue(!0, i, n)), t.push("01010"), n = this.value.substr(7, 6), t.push(this.leftValue(!1, "RRRRRR", n)), t.push("101"), this.calculateBarCodeAttributes(t, e) }, t.prototype.leftValue = function (e, t, i) { var n, r, o; o = this.getBinaries(); for (var s = 0; s < i.length; s++)r = o[t[s]], 0 === s ? n = r[i[s]] : n += r[i[s]]; return n }, t }(lC), IC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), kC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return IC(t, e), t.prototype.validateInput = function (e) { return -1 !== e.search(/^[0-9]{6}$/) ? void 0 : "Accepts 6 numeric characters." }, t.prototype.checkSum = function (e) { var t, i = 0; for (t = 1; t < 11; t += 2)i += parseInt(e[t], void 0); for (t = 0; t < 11; t += 2)i += 3 * parseInt(e[t], void 0); return (10 - i % 10) % 10 }, t.prototype.getStructure = function () { return { 0: "EEEOOO", 1: "EEOEOO", 2: "EEOOEO", 3: "EEOOOE", 4: "EOEEOO", 5: "EOOEEO", 6: "EOOOEE", 7: "EOEOEO", 8: "EOEOOE", 9: "EOOEOE" } }, t.prototype.getValue = function () { return ["XX00000XXX", "XX10000XXX", "XX20000XXX", "XXX00000XX", "XXXX00000X", "XXXXX00005", "XXXXX00006", "XXXXX00007", "XXXXX00008", "XXXXX00009"] }, t.prototype.getExpansion = function (e) { return this.getValue()[e] }, t.prototype.getUpcValue = function () { for (var e = this.value[this.value.length - 1], t = this.getExpansion(e), i = "", n = 0, r = 0; r < t.length; r++) { var o = t[r]; i += "X" === o ? this.value[n++] : o } var s = "" + (i = "0" + i); return this.enableCheckSum && (s += this.checkSum(i)), s }, t.prototype.getBinaries = function () { return { O: ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"], E: ["0100111", "0110011", "0011011", "0100001", "0011101", "0111001", "0000101", "0010001", "0001001", "0010111"] } }, t.prototype.encoding = function (e, t, i) { var n, r, o; o = this.getBinaries(); for (var s = 0; s < t.length; s++)r = o[i[s]], 0 === s ? n = r[t[s]] : n += r[t[s]]; return n }, t.prototype.draw = function (e) { var t = [], i = this.getUpcValue(), n = this.getStructure()[i[i.length - 1]]; t.push("00000000"), t.push("101"), t.push(this.encoding(i, this.value, n)), t.push("010101"), t.push("00000000"); var r = i[0] + this.value + i[i.length - 1]; this.calculateBarCodeAttributes(t, e, "" === this.displayText.text ? r : void 0) }, t }(lC), PC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), NC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return PC(t, e), t.prototype.validateInput = function (e) { return -1 !== e.search(/^[0-9]{11}$/) && this.enableCheckSum && (this.value += this.checkSumData(this.value)), -1 !== this.value.search(/^[0-9]{12}$/) && Number(this.value[11]) === this.checkSumData(this.value) ? void 0 : "Accepts 11 numeric characters." }, t.prototype.checkSumData = function (e) { return (10 - (3 * (Number(e[0]) + Number(e[2]) + Number(e[4]) + Number(e[6]) + Number(e[8]) + Number(e[10])) + (Number(e[9]) + Number(e[7]) + Number(e[5]) + Number(e[3]) + Number(e[1]))) % 10) % 10 }, t.prototype.getBinaries = function () { return { L: ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"], R: ["1110010", "1100110", "1101100", "1000010", "1011100", "1001110", "1010000", "1000100", "1001000", "1110100"] } }, t.prototype.draw = function (e) { this.value; var t = []; t.push("00000000"), t.push("101" + this.leftValue(!0, "L", this.value[0])), t.push(this.leftValue(!0, "LLLLL", this.value.substr(1, 5))), t.push("01010"), t.push(this.leftValue(!0, "RRRRR", this.value.substr(6, 5))), t.push(this.leftValue(!0, "R", this.value[11]) + "101"), t.push("00000000"), this.calculateBarCodeAttributes(t, e) }, t.prototype.leftValue = function (e, t, i) { var n, r, o; o = this.getBinaries(); for (var s = 0; s < i.length; s++)r = o[t[s]], 0 === s ? n = r[i[s]] : n += r[i[s]]; return n }, t }(lC), OC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), RC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return OC(t, e), t.prototype.validateInput = function (e) { return -1 === e.search(/^[0-9\-\*]+$/) ? "This bar code support 0-9 , * , -" : void 0 }, t.prototype.getCodeValue = function () { return { 0: "111121", 1: "211121", 2: "121121", 3: "221111", 4: "112121", 5: "212111", 6: "122111", 7: "111221", 8: "211211", 9: "211111", "-": "112111", "*": "112211" } }, t.prototype.getPatternCollection = function (e) { for (var t = [], i = this.getCodeValue(), n = 0; n < e.length; n++)t.push(i[e[n]]); return t }, t.prototype.draw = function (e) { var t = [], i = "*" + this.value + "*"; t = this.getPatternCollection(i), this.calculateBarCodeAttributes(t, e) }, t }(lC), zC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return zC(t, e), t.prototype.validateInput = function (e) { return -1 === e.search(/^[0-9A-Z\-\.\*\$\/\+\ %\ ]+$/) ? "Supports A-Z, 0-9, and symbols ( - . $ / + % SPACE)." : void 0 }, t.prototype.getCharacterWeight = function () { return { 0: "0", 1: "1", 2: "2", 3: "3", 4: "4", 5: "5", 6: "6", 7: "7", 8: "8", 9: "9", A: "10", B: "11", C: "12", D: "13", E: "14", F: "15", G: "16", H: "17", I: "18", J: "19", K: "20", L: "21", M: "22", N: "23", O: "24", P: "25", Q: "26", R: "27", S: "28", T: "29", U: "30", V: "31", W: "32", X: "33", Y: "34", Z: "35", "-": "36", ".": "37", " ": "38", $: "39", "/": "40", "+": "41", "%": "42", "($)": "43", "(/)": "44", "(+)": "45", "(%)": "46" } }, t.prototype.getCodeValue = function () { return { 0: "100010100", 1: "101001000", 2: "101000100", 3: "101000010", 4: "100101000", 5: "100100100", 6: "100100010", 7: "101010000", 8: "100010010", 9: "100001010", A: "110101000", B: "110100100", C: "110100010", D: "110010100", E: "110010010", F: "110001010", G: "101101000", H: "101100100", I: "101100010", J: "100110100", K: "100011010", L: "101011000", M: "101001100", N: "101000110", O: "100101100", P: "100010110", Q: "110110100", R: "110110010", S: "110101100", T: "110100110", U: "110010110", V: "110011010", W: "101101100", X: "101100110", Y: "100110110", Z: "100111010", "-": "100101110", ".": "111010100", " ": "111010010", $: "111001010", "/": "101101110", "+": "101110110", "%": "110101110", "($)": "100100110", "(/)": "111010110", "(+)": "100110010", "(%)": "111011010" } }, t.prototype.getPatternCollection = function (e, t, i) { for (var n = i, r = 0; r < e.length; r++) { var o = e[r]; n.push(t[o]) } }, t.prototype.calculateCheckSum = function (e) { for (var t, i = e, n = 0, r = 0, o = this.getCharacterWeight(), s = i.length; s > 0; s--) { n += o[i[r]] * s, r++ } t = n % 47; return Object.keys(o)[t] }, t.prototype.draw = function (e) { var t = this.getCodeValue(), i = [], n = this.value; this.enableCheckSum && (n += this.calculateCheckSum(n), n += this.calculateCheckSum(n)), i.push("101011110"), this.getPatternCollection(n, t, i), i.push("101011110"), i.push("1"), this.calculateBarCodeAttributes(i, e) }, t }(lC), FC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), VC = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.barcodeSymbols = [], t } return FC(t, e), t.prototype.validateInput = function (e) { return this.getValue(e) ? void 0 : "Supports 128 characters of ASCII." }, t.prototype.getValue = function (e) { for (var t = 0; t < e.length; t++)if (e.charCodeAt(t) > 127) return !1; return !0 }, t.prototype.getBars = function () { this.barcodeSymbols[0] = { value: "", checkDigit: 0, bars: "111213" }, this.barcodeSymbols[1] = { value: "1", checkDigit: 1, bars: "111213" }, this.barcodeSymbols[2] = { value: "2", checkDigit: 2, bars: "111312 " }, this.barcodeSymbols[3] = { value: "3", checkDigit: 3, bars: "111411 " }, this.barcodeSymbols[4] = { value: "4", checkDigit: 4, bars: "121113" }, this.barcodeSymbols[5] = { value: "5", checkDigit: 5, bars: "121212" }, this.barcodeSymbols[6] = { value: "6", checkDigit: 6, bars: "121311" }, this.barcodeSymbols[7] = { value: "7", checkDigit: 7, bars: "111114" }, this.barcodeSymbols[8] = { value: "8", checkDigit: 8, bars: "131211" }, this.barcodeSymbols[9] = { value: "9", checkDigit: 9, bars: "141111" }, this.barcodeSymbols[10] = { value: "A", checkDigit: 10, bars: "211113" }, this.barcodeSymbols[11] = { value: "B", checkDigit: 11, bars: "211212" }, this.barcodeSymbols[12] = { value: "C", checkDigit: 12, bars: "211311" }, this.barcodeSymbols[13] = { value: "D", checkDigit: 13, bars: "221112" }, this.barcodeSymbols[14] = { value: "E", checkDigit: 14, bars: "221211 " }, this.barcodeSymbols[15] = { value: "F", checkDigit: 15, bars: "231111" }, this.barcodeSymbols[16] = { value: "G", checkDigit: 16, bars: "112113" }, this.barcodeSymbols[17] = { value: "H", checkDigit: 17, bars: "112212" }, this.barcodeSymbols[18] = { value: "I", checkDigit: 18, bars: "112311" }, this.barcodeSymbols[19] = { value: "J", checkDigit: 19, bars: "122112" }, this.barcodeSymbols[20] = { value: "K", checkDigit: 20, bars: "132111 " }, this.barcodeSymbols[21] = { value: "L", checkDigit: 21, bars: "111123" }, this.barcodeSymbols[22] = { value: "M", checkDigit: 22, bars: "111222" }, this.barcodeSymbols[23] = { value: "N", checkDigit: 23, bars: "111321" }, this.barcodeSymbols[24] = { value: "O", checkDigit: 24, bars: "121122 " }, this.barcodeSymbols[25] = { value: "P", checkDigit: 25, bars: "131121 " }, this.barcodeSymbols[26] = { value: "Q", checkDigit: 26, bars: "212112 " }, this.barcodeSymbols[27] = { value: "R", checkDigit: 27, bars: " 212211 " }, this.barcodeSymbols[28] = { value: "S", checkDigit: 28, bars: "211122" }, this.barcodeSymbols[29] = { value: "T", checkDigit: 29, bars: "211221" }, this.barcodeSymbols[30] = { value: "U", checkDigit: 30, bars: "221121" }, this.barcodeSymbols[31] = { value: "V", checkDigit: 31, bars: "222111" }, this.barcodeSymbols[32] = { value: "W", checkDigit: 32, bars: "112122" }, this.barcodeSymbols[33] = { value: "X", checkDigit: 33, bars: "112221" }, this.barcodeSymbols[34] = { value: "Y", checkDigit: 34, bars: "122121" }, this.barcodeSymbols[35] = { value: "Z", checkDigit: 35, bars: " 123111" }, this.barcodeSymbols[36] = { value: "-", checkDigit: 36, bars: "121131" }, this.barcodeSymbols[37] = { value: ".", checkDigit: 37, bars: "311112" }, this.barcodeSymbols[38] = { value: " ", checkDigit: 38, bars: "311211" }, this.barcodeSymbols[39] = { value: "$", checkDigit: 39, bars: "321111" }, this.barcodeSymbols[40] = { value: "/", checkDigit: 40, bars: "112131" }, this.barcodeSymbols[41] = { value: "+", checkDigit: 41, bars: "113121" }, this.barcodeSymbols[42] = { value: "%", checkDigit: 42, bars: "211131" }, this.barcodeSymbols[43] = { value: "*", checkDigit: 42, bars: "111141" }, this.barcodeSymbols[44] = { value: "Ã¿", checkDigit: 47, bars: "1111411" }, this.barcodeSymbols[45] = { value: "Ã»", checkDigit: 43, bars: "121220" }, this.barcodeSymbols[46] = { value: "Ã¼", checkDigit: 44, bars: "312111 " }, this.barcodeSymbols[47] = { value: "Ã½", checkDigit: 45, bars: "311121" }, this.barcodeSymbols[48] = { value: "Ã¾", checkDigit: 46, bars: "122211" } }, t.prototype.GetExtendedText = function (e) { var t, i = this.value; this.extendedText = ""; for (var n = 0; n < i.length; n++) { for (var r = e.length - 1; r > 0; r--)if (e[r] && e[r].value && e[r].character === i[n]) { t = e[r]; break } t.keyword && t.value ? this.extendedText += t.keyword + t.value : t.value && t.value && (this.extendedText += t.value) } }, t.prototype.drawCode93 = function (e) { this.getBars(); var t = [], i = this.getArrayValue(); this.GetExtendedText(i); for (var n = this.CalculateCheckDigit(), r = 0; r < n.length; r++)this.extendedText += n[r]; t[0] = "*" + this.extendedText + "Ã¿"; var o = []; o = this.encoding(t), this.calculateBarCodeAttributes(o, e) }, t.prototype.GetCheckSumSymbols = function () { for (var e, t = this.extendedText, i = t, n = [], r = 0, o = i.length, s = 0; s < o; s++) { 0 === (c = (o - s) % 20) && (c = 20); for (var a = 0; a < this.barcodeSymbols.length; a++)i[s] === this.barcodeSymbols[a].value && (e = this.barcodeSymbols[a].checkDigit); r += e * c } r %= 47; for (var l = "", h = 0; h < this.barcodeSymbols.length; h++)if (r === this.barcodeSymbols[h].checkDigit) { l = this.barcodeSymbols[h].value; break } var d = this.extendedText; d += l, n[0] = l, r = 0, o = (i = t = d).length; for (s = 0; s < o; s++) { var c; 0 === (c = (o - s) % 15) && (c = 15); for (var p = 0; p < this.barcodeSymbols.length; p++)if (i[s] === this.barcodeSymbols[p].value) { r += this.barcodeSymbols[p].checkDigit * c } } t += r %= 47; var u = " "; for (s = 0; s < this.barcodeSymbols.length; s++)if (r === this.barcodeSymbols[s].checkDigit) { u = this.barcodeSymbols[s].value; break } return d += u, n[1] = u, n }, t.prototype.CalculateCheckDigit = function () { for (var e = this.extendedText, t = 0; t < e.length; t++)for (var i = 0; i < this.barcodeSymbols.length; i++)e[t] === this.barcodeSymbols[i].value && this.barcodeSymbols[i].checkDigit; return this.GetCheckSumSymbols() }, t.prototype.getArrayValue = function () { var e = []; return e[0] = { character: "\0", keyword: "Ã¼", value: "U" }, e[1] = { character: "\x0001", keyword: "Ã»", value: "A" }, e[2] = { character: "\x0002", keyword: "x00fb", value: "B" }, e[3] = { character: "\x0003", keyword: "Ã»", value: "C" }, e[4] = { character: "\x0004", keyword: "Ã»", value: "D" }, e[5] = { character: "\x0005", keyword: "Ã»", value: "E" }, e[6] = { character: "\x0006", keyword: "Ã»", value: "F" }, e[7] = { character: "a", keyword: "Ã»", value: "G" }, e[8] = { character: "\b", keyword: "Ã»", value: "H" }, e[9] = { character: "\t", keyword: "Ã»", value: "I" }, e[10] = { character: "\n", keyword: "Ã»", value: "J" }, e[12] = { character: "\v", keyword: "Ã»", value: "K" }, e[13] = { character: "\f", keyword: "Ã»", value: "L" }, e[14] = { character: "\r", keyword: "Ã»", value: "M" }, e[15] = { character: "\x000e", keyword: "Ã»", value: "N" }, e[16] = { character: "\x000f", keyword: "Ã»", value: "O" }, e[17] = { character: "\x0010", keyword: "Ã»", value: "P" }, e[18] = { character: "\x0011", keyword: "Ã»", value: "Q" }, e[19] = { character: "\x0012", keyword: "Ã»", value: "R" }, e[20] = { character: "\x0013", keyword: "Ã»", value: "S" }, e[21] = { character: "\x0014", keyword: "Ã»", value: "T" }, e[22] = { character: "\x0015", keyword: "Ã»", value: "U" }, e[23] = { character: "\x0016", keyword: "Ã»", value: "V" }, e[24] = { character: "\x0017", keyword: "Ã»", value: "W" }, e[25] = { character: "\x0018", keyword: "Ã»", value: "X" }, e[26] = { character: "\x0019", keyword: "Ã»", value: "Y" }, e[27] = { character: "\x001a", keyword: "Ã»", value: "Z" }, e[28] = { character: "\x001b", keyword: "Ã¼", value: "A" }, e[29] = { character: "\x001c", keyword: "Ã¼", value: "B" }, e[30] = { character: "\x001d", keyword: "Ã¼", value: "C" }, e[31] = { character: "\x001e", keyword: "Ã¼", value: "D" }, e[32] = { character: "\x001f", keyword: "Ã¼", value: "E" }, e[33] = { character: " ", keyword: " " }, e[34] = { character: "!", keyword: "Ã½", value: "A" }, e[35] = { character: '"', keyword: "Ã½", value: "B" }, e[36] = { character: "#", keyword: "Ã½", value: "C" }, e[37] = { character: "$", keyword: "Ã½", value: "D" }, e[38] = { character: "%", keyword: "Ã½", value: "E" }, e[39] = { character: "&", keyword: "Ã½", value: "F" }, e[40] = { character: "'", keyword: "Ã½", value: "G" }, e[41] = { character: "(", keyword: "Ã½", value: "H" }, e[42] = { character: ")", keyword: "Ã½", value: "I" }, e[43] = { character: "*", keyword: "Ã½", value: "J" }, e[44] = { character: "+", keyword: "Ã½", value: "K" }, e[45] = { character: ",", keyword: "Ã½", value: "L" }, e[46] = { character: "-", keyword: "Ã½", value: "M" }, e[47] = { character: ".", keyword: "Ã½", value: "N" }, e[48] = { character: "/", keyword: "Ã½", value: "O" }, e[49] = { character: "0", value: "0" }, e[50] = { character: "1", value: "1" }, e[51] = { character: "2", value: "2" }, e[52] = { character: "3", value: "3" }, e[53] = { character: "4", value: "4" }, e[54] = { character: "5", value: "5" }, e[55] = { character: "6", value: "6" }, e[56] = { character: "7", value: "7" }, e[57] = { character: "8", value: "8" }, e[58] = { character: "9", value: "9" }, e[59] = { character: ":", keyword: "Ã½", value: "Z" }, e[60] = { character: ";", keyword: "Ã¼", value: "F" }, e[61] = { character: "<", keyword: "Ã¼", value: "G" }, e[62] = { character: "=", keyword: "Ã¼", value: "H" }, e[63] = { character: ">", keyword: "Ã¼", value: "I" }, e[64] = { character: "?", keyword: "Ã¼", value: "J" }, e[65] = { character: "@", keyword: "Ã¼", value: "V" }, e[66] = { character: "A", value: "A" }, e[67] = { character: "B", value: "B" }, e[68] = { character: "C", value: "C" }, e[69] = { character: "D", value: "D" }, e[70] = { character: "E", value: "E" }, e[71] = { character: "F", value: "F" }, e[72] = { character: "G", value: "G" }, e[73] = { character: "H", value: "H" }, e[74] = { character: "I", value: "I" }, e[75] = { character: "J", value: "J" }, e[76] = { character: "K", value: "K" }, e[77] = { character: "L", value: "L" }, e[78] = { character: "M", value: "M" }, e[79] = { character: "N", value: "N" }, e[80] = { character: "O", value: "O" }, e[81] = { character: "P", value: "P" }, e[82] = { character: "Q", value: "Q" }, e[83] = { character: "R", value: "R" }, e[84] = { character: "S", value: "S" }, e[85] = { character: "T", value: "T" }, e[86] = { character: "U", value: "U" }, e[87] = { character: "V", value: "V" }, e[88] = { character: "W", value: "W" }, e[88] = { character: "X", value: "X" }, e[89] = { character: "Y", value: "Y" }, e[90] = { character: "Z", value: "Z" }, e[91] = { character: "[", keyword: "Ã¼", value: "K" }, e[92] = { character: "\\", keyword: "Ã¼", value: "L" }, e[93] = { character: "]", keyword: "Ã¼", value: "M" }, e[94] = { character: "^", keyword: "Ã¼", value: "N" }, e[95] = { character: "_", keyword: "Ã¼", value: "O" }, e[96] = { character: "`", keyword: "Ã¼", value: "W" }, e[97] = { character: "a", keyword: "Ã¾", value: "A" }, e[98] = { character: "b", keyword: "Ã¾", value: "B" }, e[99] = { character: "c", keyword: "Ã¾", value: "C" }, e[100] = { character: "d", keyword: "Ã¾", value: "D" }, e[101] = { character: "e", keyword: "Ã¾", value: "E" }, e[102] = { character: "f", keyword: "Ã¾", value: "F" }, e[103] = { character: "g", keyword: "Ã¾", value: "G" }, e[104] = { character: "h", keyword: "Ã¾", value: "H" }, e[105] = { character: "i", keyword: "Ã¾", value: "I" }, e[106] = { character: "j", keyword: "Ã¾", value: "J" }, e[107] = { character: "k", keyword: "Ã¾", value: "K" }, e[108] = { character: "l", keyword: "Ã¾", value: "L" }, e[109] = { character: "m", keyword: "Ã¾", value: "M" }, e[110] = { character: "n", keyword: "Ã¾", value: "N" }, e[111] = { character: "o", keyword: "Ã¾", value: "O" }, e[112] = { character: "p", keyword: "Ã¾", value: "P" }, e[113] = { character: "q", keyword: "Ã¾", value: "Q" }, e[114] = { character: "r", keyword: "Ã¾", value: "R" }, e[115] = { character: "s", keyword: "Ã¾", value: "S" }, e[116] = { character: "t", keyword: "Ã¾", value: "T" }, e[117] = { character: "u", keyword: "Ã¾", value: "U" }, e[118] = { character: "v", keyword: "Ã¾", value: "V" }, e[119] = { character: "w", keyword: "Ã¾", value: "W" }, e[120] = { character: "x", keyword: "Ã¾", value: "X" }, e[121] = { character: "y", keyword: "Ã¾", value: "Y" }, e[122] = { character: "z", keyword: "Ã¾", value: "Z" }, e[123] = { character: "{", keyword: "Ã¼", value: "P" }, e[124] = { character: "|", keyword: "Ã¼", value: "Q" }, e[125] = { character: "}", keyword: "Ã¼", value: "R" }, e[126] = { character: "~", keyword: "Ã¼", value: "S" }, e }, t.prototype.encoding = function (e) { for (var t = [], i = 0; i < e.length; i++)for (var n = 0; n < e[i].length; n++)for (var r = 0; r < this.barcodeSymbols.length; r++)e[i][n] === this.barcodeSymbols[r].value && (t[n] = this.barcodeSymbols[r].bars); return t }, t }(BC), WC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), HC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return WC(t, e), t.prototype.validateInput = function (e) { return 8 === e.length && e.match(/^[0-9]+$/) ? void 0 : "Accepts 9 numeric characters." }, t.prototype.getCodeValue = function () { return [["0", 0, ["111331311"]], ["1", 1, ["311311113"]], ["2", 2, ["113311113"]], ["3", 3, ["313311111"]], ["4", 4, ["111331113"]], ["5", 5, ["311331111"]], ["6", 6, ["113331111"]], ["7", 7, ["111311313"]], ["8", 8, ["311311311"]], ["9", 9, ["113311311"]], ["A", 10, ["113113113"]], ["B", 11, ["113113113"]], ["C", 12, ["313113111"]], ["D", 13, ["111133113"]], ["E", 14, ["221211"]], ["F", 15, ["113133111"]], ["G", 16, ["111113313"]], ["H", 17, ["311113311"]], ["I", 18, ["112311"]], ["J", 19, ["111133311"]], ["K", 20, ["311111133"]], ["L", 21, ["113111133"]], ["M", 22, ["313111131"]], ["N", 23, ["111131133"]], ["O", 24, ["121122"]], ["P", 25, ["113131131"]], ["Q", 26, ["111111333"]], ["R", 27, ["311111331"]], ["S", 28, ["113111331"]], ["T", 29, ["111131331"]], ["U", 30, ["331111113"]], ["V", 31, ["133111113"]], ["W", 32, ["333111111"]], ["X", 33, ["131131113"]], ["Y", 34, ["331131111"]], ["Z", 35, ["133131111"]], ["*", 0, ["131131311"]]] }, t.prototype.getPatternCollection = function (e) { for (var t = [], i = this.getCodeValue(), n = 0; n <= e.length; n++)for (var r = 0; r < i.length; r++)e[n] === i[r][0] && t.push(i[r][2][0]); return t }, t.prototype.draw = function (e) { var t, i = "*" + this.value + "*"; t = this.getPatternCollection(i), this.calculateBarCodeAttributes(t, e) }, t }(lC), _C = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), YC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return _C(t, e), t.prototype.code39ExtensionValues = function () { return { 0: "%U", 1: "$A", 2: "$B", 3: "$C", 4: "$D", 5: "$E", 6: "$F", 7: "$G", 8: "$H", 9: "$I", 10: "$J", 11: "$K", 12: "$L", 13: "$M", 14: "$N", 15: "$O", 16: "$P", 17: "$Q", 18: "$R", 19: "$S", 20: "$T", 21: "$U", 22: "$V", 23: "$W", 24: "$X", 25: "$Y", 26: "$Z", 27: "%A", 28: "%B", 29: "%C", 30: "%D", 31: "%E", 32: " ", 33: "/A", 34: "/B", 35: "/C", 36: "/D", 37: "/E", 38: "/F", 39: "/G", 40: "/H", 41: "/I", 42: "/J", 43: "/K", 44: "/L", 45: "-", 46: ".", 47: "/O", 48: "0", 49: "1", 50: "2", 51: "3", 52: "4", 53: "5", 54: "6", 55: "7", 56: "8", 57: "9", 58: "/Z", 59: "%F", 60: "%G", 61: "%H", 62: "%I", 63: "%J", 64: "%V", 65: "A", 66: "B", 67: "C", 68: "D", 69: "E", 70: "F", 71: "G", 72: "H", 73: "I", 74: "J", 75: "K", 76: "L", 77: "M", 78: "N", 79: "O", 80: "P", 81: "Q", 82: "R", 83: "S", 84: "T", 85: "U", 86: "V", 87: "W", 88: "X", 89: "Y", 90: "Z", 91: "%K", 92: "%L", 93: "%M", 94: "%N", 95: "%O", 96: "%W", 97: "+A", 98: "+B", 99: "+C", 100: "+D", 101: "+E", 102: "+F", 103: "+G", 104: "+H", 105: "+I", 106: "+J", 107: "+K", 108: "+L", 109: "+M", 110: "+N", 111: "+O", 112: "+P", 113: "+Q", 114: "+R", 115: "+S", 116: "+T", 117: "+U", 118: "+V", 119: "+W", 120: "+X", 121: "+Y", 122: "+Z", 123: "%P", 124: "%Q", 125: "\t%R", 126: "%S", 127: "%T" } }, t.prototype.validateInput = function (e) { return this.checkText(e) ? void 0 : "Supports 128 characters of ASCII." }, t.prototype.checkText = function (e) { for (var t = 0; t < e.length; t++)if (e.charCodeAt(t) > 127) return !1; return !0 }, t.prototype.code39Extension = function (e) { for (var t = "", i = this.code39ExtensionValues(), n = 0; n < e.length; n++)t += i[e[n].charCodeAt(0)]; return t }, t.prototype.drawCode39 = function (e) { var t = this.value, i = this.code39Extension(t); this.drawCode39Extension(e, i) }, t }(LC), UC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), qC = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, GC = function (e) { function t(t, i) { return e.call(this, t, i) || this } return UC(t, e), t.prototype.triggerEvent = function (e, t) { var i = { message: t }; this.trigger($w[e], i) }, t.prototype.onPropertyChanged = function (e, t) { "Canvas" === this.mode && "Canvas" !== e.mode ? this.refreshCanvasBarcode() : this.barcodeRenderer = be(e, this.barcodeCanvas, this.mode, this.element.id), e.width && this.barcodeCanvas.setAttribute("width", String(e.width)); for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "width": this.element.style.width = this.getElementSize(this.width), this.barcodeCanvas.setAttribute("width", String(this.element.offsetWidth)); break; case "height": this.element.style.height = this.getElementSize(this.height), this.barcodeCanvas.setAttribute("height", String(this.element.offsetHeight)); break; case "backgroundColor": this.barcodeCanvas.setAttribute("style", "background:" + e.backgroundColor); break; case "mode": this.initialize() } } this.renderElements() }, t.prototype.initialize = function () { this.element.style.height = this.getElementSize(this.height), this.element.style.width = this.getElementSize(this.width); var e = this.mode; this.barcodeCanvas = this.barcodeRenderer.renderRootElement({ id: this.element.id, height: "SVG" === e ? this.element.offsetHeight : 1.5 * this.element.offsetHeight, width: "SVG" === e ? this.element.offsetWidth : 1.5 * this.element.offsetWidth }, this.backgroundColor, this.element.offsetWidth, this.element.offsetHeight), this.element.appendChild(this.barcodeCanvas) }, t.prototype.renderElements = function () { var e; switch (this.type) { case "Code39Extension": e = new YC; break; case "Code39": e = new LC; break; case "Codabar": e = new SC; break; case "Code128A": e = new TC; break; case "Code128B": e = new pC; break; case "Code128C": e = new gC; break; case "Code128": e = new dC; break; case "Ean8": e = new AC; break; case "Ean13": e = new jC; break; case "UpcA": e = new NC; break; case "UpcE": e = new kC; break; case "Code11": e = new RC; break; case "Code93": e = new BC; break; case "Code93Extension": e = new VC; break; case "Code32": e = new HC }"Canvas" === this.mode && (this.barcodeCanvas.getContext("2d").setTransform(1, 0, 0, 1, 0, 0), this.barcodeCanvas.getContext("2d").scale(1.5, 1.5)), e.width = this.barcodeCanvas.getAttribute("width"), ("Ean8" === this.type || "Ean13" === this.type || "UpcA" === this.type) && this.displayText.text.length > 0 && this.triggerEvent($w.invalid, "Invalid Display Text"), e.value = this.value, e.margin = this.margin, e.type = this.type, e.height = this.barcodeCanvas.getAttribute("height"), e.foreColor = this.foreColor, e.isSvgMode = "SVG" === this.mode, e.displayText = this.displayText, e.enableCheckSum = this.enableCheckSum; var t = e.validateInput(this.value); void 0 === t ? "Code39Extension" === this.type ? e.drawCode39(this.barcodeCanvas) : "Code93Extension" === this.type ? e.drawCode93(this.barcodeCanvas) : e.draw(this.barcodeCanvas) : this.triggerEvent($w.invalid, t), "Canvas" === this.mode && (this.barcodeCanvas.style.transform = "scale(" + 2 / 3 + ")", this.barcodeCanvas.style.transformOrigin = "0 0") }, t.prototype.refreshCanvasBarcode = function () { this.clearCanvas(this) }, t.prototype.clearCanvas = function (e) { var t, i; if (t = e.element.offsetWidth, i = e.element.offsetHeight, "SVG" !== e.mode) { iC.getContext(this.barcodeCanvas).clearRect(0, 0, t, i) } }, t.prototype.getPersistData = function () { return this.addOnPersist(["loaded"]) }, t.prototype.getElementSize = function (e, t) { return e.toString().indexOf("px") > 0 || e.toString().indexOf("%") > 0 ? e.toString() : e.toString() + "px" }, t.prototype.preRender = function () { this.barcodeRenderer = new rC(this.element.id, "SVG" === this.mode), this.initialize(), this.initializePrivateVariables(), this.setCulture(); var e = document.getElementsByClassName("barcodeMeasureElement"); if (e.length > 0) { for (var t = e.length - 1; t >= 0; t--)e[t].parentNode.removeChild(e[t]); window.barcodeMeasureElement = null } this.element.classList.add("e-barcode") }, t.prototype.initializePrivateVariables = function () { this.defaultLocale = {} }, t.prototype.setCulture = function () { this.localeObj = new pb(this.getModuleName(), this.defaultLocale, this.locale) }, t.prototype.render = function () { this.notify("initial-load", {}), this.trigger("load"), this.notify("initial-end", {}), this.renderElements() }, t.prototype.getModuleName = function () { return "barcode" }, t.prototype.requiredModules = function () { return [] }, t.prototype.destroy = function () { this.notify("destroy", {}), e.prototype.destroy.call(this) }, qC([Y("100%")], t.prototype, "width", void 0), qC([Y("100px")], t.prototype, "height", void 0), qC([Y("SVG")], t.prototype, "mode", void 0), qC([Y("Code128")], t.prototype, "type", void 0), qC([Y(void 0)], t.prototype, "value", void 0), qC([Y(!0)], t.prototype, "enableCheckSum", void 0), qC([U({}, bC)], t.prototype, "displayText", void 0), qC([U({}, yC)], t.prototype, "margin", void 0), qC([Y("white")], t.prototype, "backgroundColor", void 0), qC([Y("black")], t.prototype, "foreColor", void 0), qC([X()], t.prototype, "invalid", void 0), t }(Kw), QC = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), XC = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, JC = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return QC(t, e), XC([Y(0)], t.prototype, "x", void 0), XC([Y(0)], t.prototype, "y", void 0), t }(ww), ZC = function () { function e() { } return e.prototype.renderRootElement = function (e) { return ge("canvase", e) }, e.prototype.renderRect = function (e, t) { return ge("canvase", t) }, e.prototype.renderLine = function (e, t) { return ge("canvase", t) }, e.prototype.renderText = function (e, t) { return ge("canvase", t) }, e }(), KC = function () { function e(e, t) { this.numberOfErrorCorrectingCodeWords = [7, 10, 13, 17, 10, 16, 22, 28, 15, 26, 36, 44, 20, 36, 52, 64, 26, 48, 72, 88, 36, 64, 96, 112, 40, 72, 108, 130, 48, 88, 132, 156, 60, 110, 160, 192, 72, 130, 192, 224, 80, 150, 224, 264, 96, 176, 260, 308, 104, 198, 288, 352, 120, 216, 320, 384, 132, 240, 360, 432, 144, 280, 408, 480, 168, 308, 448, 532, 180, 338, 504, 588, 196, 364, 546, 650, 224, 416, 600, 700, 224, 442, 644, 750, 252, 476, 690, 816, 270, 504, 750, 900, 300, 560, 810, 960, 312, 588, 870, 1050, 336, 644, 952, 1110, 360, 700, 1020, 1200, 390, 728, 1050, 1260, 420, 784, 1140, 1350, 450, 812, 1200, 1440, 480, 868, 1290, 1530, 510, 924, 1350, 1620, 540, 980, 1440, 1710, 570, 1036, 1530, 1800, 570, 1064, 1590, 1890, 600, 1120, 1680, 1980, 630, 1204, 1770, 2100, 660, 1260, 1860, 2220, 720, 1316, 1950, 2310, 750, 1372, 2040, 2430], this.cp437CharSet = ["2591", "2592", "2593", "2502", "2524", "2561", "2562", "2556", "2555", "2563", "2551", "2557", "255D", "255C", "255B", "2510", "2514", "2534", "252C", "251C", "2500", "253C", "255E", "255F", "255A", "2554", "2569", "2566", "2560", "2550", "256C", "2567", "2568", "2564", "2565", "2559", "2558", "2552", "2553", "256B", "256A", "2518", "250C", "2588", "2584", "258C", "2590", "2580", "25A0"], this.iso88592CharSet = ["104", "2D8", "141", "13D", "15A", "160", "15E", "164", "179", "17D", "17B", "105", "2DB", "142", "13E", "15B", "2C7", "161", "15F", "165", "17A", "2DD", "17E", "17C", "154", "102", "139", "106", "10C", "118", "11A", "10E", "110", "143", "147", "150", "158", "16E", "170", "162", "155", "103", "13A", "107", "10D", "119", "11B", "10F", "111", "144", "148", "151", "159", "16F", "171", "163", "2D9"], this.iso88593CharSet = ["126", "124", "130", "15E", "11E", "134", "17B", "127", "125", "131", "15F", "11F", "135", "17C", "10A", "108", "120", "11C", "16C", "15C", "10B", "109", "121", "11D", "16D", "15D"], this.iso88594CharSet = ["104", "138", "156", "128", "13B", "160", "112", "122", "166", "17D", "105", "2DB", "157", "129", "13C", "2C7", "161", "113", "123", "167", "14A", "17E", "14B", "100", "12E", "10C", "118", "116", "12A", "110", "145", "14C", "136", "172", "168", "16A", "101", "12F", "10D", "119", "117", "12B", "111", "146", "14D", "137", "173", "169", "16B"], this.windows1250CharSet = ["141", "104", "15E", "17B", "142", "105", "15F", "13D", "13E", "17C"], this.windows1251CharSet = ["402", "403", "453", "409", "40A", "40C", "40B", "40F", "452", "459", "45A", "45C", "45B", "45F", "40E", "45E", "408", "490", "401", "404", "407", "406", "456", "491", "451", "454", "458", "405", "455", "457"], this.windows1252CharSet = ["20AC", "201A", "192", "201E", "2026", "2020", "2021", "2C6", "2030", "160", "2039", "152", "17D", "2018", "2019", "201C", "201D", "2022", "2013", "2014", "2DC", "2122", "161", "203A", "153", "17E", "178"], this.windows1256CharSet = ["67E", "679", "152", "686", "698", "688", "6AF", "6A9", "691", "153", "6BA", "6BE", "6C1", "644", "645", "646", "647", "648", "649", "64A", "6D2"], this.cp437ReplaceNumber = [176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 254], this.iso88592ReplaceNumber = [161, 162, 163, 165, 166, 169, 170, 171, 172, 174, 175, 177, 178, 179, 181, 182, 183, 185, 186, 187, 188, 189, 190, 191, 192, 195, 197, 198, 200, 202, 204, 207, 208, 209, 210, 213, 216, 217, 219, 222, 224, 227, 229, 230, 232, 234, 236, 239, 240, 241, 242, 245, 248, 249, 251, 254, 255], this.iso88593ReplaceNumber = [161, 166, 169, 170, 171, 172, 175, 177, 182, 185, 186, 187, 188, 191, 197, 198, 213, 216, 221, 222, 229, 230, 245, 248, 253, 254], this.iso88594ReplaceNumber = [161, 162, 163, 165, 166, 169, 170, 171, 172, 174, 177, 178, 179, 181, 182, 183, 185, 186, 187, 188, 189, 190, 191, 192, 199, 200, 202, 204, 207, 208, 209, 210, 211, 217, 221, 222, 224, 231, 232, 234, 236, 239, 240, 241, 242, 243, 249, 253, 254], this.windows1250ReplaceNumber = [163, 165, 170, 175, 179, 185, 186, 188, 190, 191], this.windows1251ReplaceNumber = [128, 129, 131, 138, 140, 141, 142, 143, 144, 154, 156, 157, 158, 159, 161, 162, 163, 165, 168, 170, 175, 178, 179, 180, 184, 186, 188, 189, 190, 191], this.windows1252ReplaceNumber = [128, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 142, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 158, 159], this.windows1256ReplaceNumber = [129, 138, 140, 141, 142, 143, 144, 152, 154, 156, 159, 170, 192, 225, 227, 228, 229, 230, 236, 237, 255], this.endValues = [208, 359, 567, 807, 1079, 1383, 1568, 1936, 2336, 2768, 3232, 3728, 4256, 4651, 5243, 5867, 6523, 7211, 7931, 8683, 9252, 10068, 10916, 11796, 12708, 13652, 14628, 15371, 16411, 17483, 18587, 19723, 20891, 22091, 23008, 24272, 25568, 26896, 28256, 29648], this.dataCapacityValues = [26, 44, 70, 100, 134, 172, 196, 242, 292, 346, 404, 466, 532, 581, 655, 733, 815, 901, 991, 1085, 1156, 1258, 1364, 1474, 1588, 1706, 1828, 1921, 2051, 2185, 2323, 2465, 2611, 2761, 2876, 3034, 3196, 3362, 3532, 3706], this.numericDataCapacityLow = [41, 77, 127, 187, 255, 322, 370, 461, 552, 652, 772, 883, 1022, 1101, 1250, 1408, 1548, 1725, 1903, 2061, 2232, 2409, 2620, 2812, 3057, 3283, 3517, 3669, 3909, 4158, 4417, 4686, 4965, 5253, 5529, 5836, 6153, 6479, 6743, 7089], this.numericDataCapacityMedium = [34, 63, 101, 149, 202, 255, 293, 365, 432, 513, 604, 691, 796, 871, 991, 1082, 1212, 1346, 1500, 1600, 1708, 1872, 2059, 2188, 2395, 2544, 2701, 2857, 3035, 3289, 3486, 3693, 3909, 4134, 4343, 4588, 4775, 5039, 5313, 5596], this.numericDataCapacityQuartile = [27, 48, 77, 111, 144, 178, 207, 259, 312, 364, 427, 489, 580, 621, 703, 775, 876, 948, 1063, 1159, 1224, 1358, 1468, 1588, 1718, 1804, 1933, 2085, 2181, 2358, 2473, 2670, 2805, 2949, 3081, 3244, 3417, 3599, 3791, 3993], this.numericDataCapacityHigh = [17, 34, 58, 82, 106, 139, 154, 202, 235, 288, 331, 374, 427, 468, 530, 602, 674, 746, 813, 919, 969, 1056, 1108, 1228, 1286, 1425, 1501, 1581, 1677, 1782, 1897, 2022, 2157, 2301, 2361, 2524, 2625, 2735, 2927, 3057], this.alphanumericDataCapacityLow = [25, 47, 77, 114, 154, 195, 224, 279, 335, 395, 468, 535, 619, 667, 758, 854, 938, 1046, 1153, 1249, 1352, 1460, 1588, 1704, 1853, 1990, 2132, 2223, 2369, 2520, 2677, 2840, 3009, 3183, 3351, 3537, 3729, 3927, 4087, 4296], this.alphanumericDataCapacityMedium = [20, 38, 61, 90, 122, 154, 178, 221, 262, 311, 366, 419, 483, 528, 600, 656, 734, 816, 909, 970, 1035, 1134, 1248, 1326, 1451, 1542, 1637, 1732, 1839, 1994, 2113, 2238, 2369, 2506, 2632, 2780, 2894, 3054, 3220, 3391], this.alphanumericDataCapacityQuartile = [16, 29, 47, 67, 87, 108, 125, 157, 189, 221, 259, 296, 352, 376, 426, 470, 531, 574, 644, 702, 742, 823, 890, 963, 1041, 1094, 1172, 1263, 1322, 1429, 1499, 1618, 1700, 1787, 1867, 1966, 2071, 2181, 2298, 2420], this.alphanumericDataCapacityHigh = [10, 20, 35, 50, 64, 84, 93, 122, 143, 174, 200, 227, 259, 283, 321, 365, 408, 452, 493, 557, 587, 640, 672, 744, 779, 864, 910, 958, 1016, 1080, 1150, 1226, 1307, 1394, 1431, 1530, 1591, 1658, 1774, 1852], this.binaryDataCapacityLow = [17, 32, 53, 78, 106, 134, 154, 192, 230, 271, 321, 367, 425, 458, 520, 586, 644, 718, 792, 858, 929, 1003, 1091, 1171, 1273, 1367, 1465, 1528, 1628, 1732, 1840, 1952, 2068, 2188, 2303, 2431, 2563, 2699, 2809, 2953], this.binaryDataCapacityMedium = [14, 26, 42, 62, 84, 106, 122, 152, 180, 213, 251, 287, 331, 362, 412, 450, 504, 560, 624, 666, 711, 779, 857, 911, 997, 1059, 1125, 1190, 1264, 1370, 1452, 1538, 1628, 1722, 1809, 1911, 1989, 2099, 2213, 2331], this.binaryDataCapacityQuartile = [11, 20, 32, 46, 60, 74, 86, 108, 130, 151, 177, 203, 241, 258, 292, 322, 364, 394, 442, 482, 509, 565, 611, 661, 715, 751, 805, 868, 908, 982, 1030, 1112, 1168, 1228, 1283, 1351, 1423, 1499, 1579, 1663], this.binaryDataCapacityHigh = [7, 14, 24, 34, 44, 58, 64, 84, 98, 119, 137, 155, 177, 194, 220, 250, 280, 310, 338, 382, 403, 439, 461, 511, 535, 593, 625, 658, 698, 742, 790, 842, 898, 958, 983, 1051, 1093, 1139, 1219, 1273], this.mixedDataCapacityLow = [152, 272, 440, 640, 864, 1088, 1248, 1552, 1856, 2192, 2592, 2960, 3424, 3688, 4184, 4712, 5176, 5768, 6360, 6888, 7456, 8048, 8752, 9392, 10208, 10960, 11744, 12248, 13048, 13880, 4744, 15640, 16568, 17528, 18448, 19472, 20528, 21616, 22496, 23648], this.mixedDataCapacityMedium = [128, 244, 352, 512, 688, 864, 992, 1232, 1456, 1728, 2032, 2320, 2672, 2920, 3320, 3624, 4056, 4504, 5016, 5352, 5712, 6256, 6880, 7312, 8e3, 8496, 9024, 9544, 10136, 10984, 1640, 12328, 13048, 13800, 14496, 15312, 15936, 16816, 17728, 18672], this.mixedDataCapacityQuartile = [104, 176, 272, 384, 496, 608, 704, 880, 1056, 1232, 1440, 1648, 1952, 2088, 2360, 2600, 2936, 3176, 3560, 3880, 4096, 4544, 4912, 5312, 5744, 6032, 6464, 6968, 7288, 7880, 8264, 8920, 9368, 9848, 10288, 10832, 11408, 12016, 12656, 13328], this.mixedDataCapacityHigh = [72, 128, 208, 288, 368, 480, 528, 688, 800, 976, 1120, 1264, 1440, 1576, 1784, 2024, 2264, 2504, 2728, 3080, 3248, 3536, 3712, 4112, 4304, 4768, 5024, 5288, 5608, 5960, 6344, 6760, 7208, 7688, 7888, 8432, 8768, 9136, 9776, 10208], this.mVersion = e, this.mErrorCorrectionLevel = t, this.NumberOfDataCodeWord = this.obtainNumberOfDataCodeWord(), this.NumberOfErrorCorrectingCodeWords = this.obtainNumberOfErrorCorrectingCodeWords(), this.NumberOfErrorCorrectionBlocks = this.obtainNumberOfErrorCorrectionBlocks(), this.End = this.obtainEnd(), this.DataCapacity = this.obtainDataCapacity(), this.FormatInformation = this.obtainFormatInformation(), this.VersionInformation = this.obtainVersionInformation() } return Object.defineProperty(e.prototype, "NumberOfDataCodeWord", { get: function () { return this.mNumberOfDataCodeWord }, set: function (e) { this.mNumberOfDataCodeWord = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "NumberOfErrorCorrectingCodeWords", { get: function () { return this.mNumberOfErrorCorrectingCodeWords }, set: function (e) { this.mNumberOfErrorCorrectingCodeWords = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "NumberOfErrorCorrectionBlocks", { get: function () { return this.mNumberOfErrorCorrectionBlocks }, set: function (e) { this.mNumberOfErrorCorrectionBlocks = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "End", { set: function (e) { this.mEnd = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "DataCapacity", { get: function () { return this.mDataCapacity }, set: function (e) { this.mDataCapacity = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "FormatInformation", { get: function () { return this.mFormatInformation }, set: function (e) { this.mFormatInformation = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "VersionInformation", { get: function () { return this.mVersionInformation }, set: function (e) { this.mVersionInformation = e }, enumerable: !0, configurable: !0 }), e.prototype.getAlphaNumericValues = function (e) { var t = 0; switch (e) { case "0": t = 0; break; case "1": t = 1; break; case "2": t = 2; break; case "3": t = 3; break; case "4": t = 4; break; case "5": t = 5; break; case "6": t = 6; break; case "7": t = 7; break; case "8": t = 8; break; case "9": t = 9; break; case "A": t = 10; break; case "B": t = 11; break; case "C": t = 12; break; case "D": t = 13; break; case "E": t = 14; break; case "F": t = 15; break; case "G": t = 16; break; case "H": t = 17; break; case "I": t = 18; break; case "J": t = 19; break; case "K": t = 20; break; case "L": t = 21; break; case "M": t = 22; break; case "N": t = 23; break; case "O": t = 24; break; case "P": t = 25; break; case "Q": t = 26; break; case "R": t = 27; break; case "S": t = 28; break; case "T": t = 29; break; case "U": t = 30; break; case "V": t = 31; break; case "W": t = 32; break; case "X": t = 33; break; case "Y": t = 34; break; case "Z": t = 35; break; case " ": t = 36; break; case "$": t = 37; break; case "%": t = 38; break; case "*": t = 39; break; case "+": t = 40; break; case "-": t = 41; break; case ".": t = 42; break; case "/": t = 43; break; case ":": t = 44 }return t }, e.prototype.obtainNumberOfDataCodeWord = function () { var e = 0; switch (this.mVersion) { case 1: switch (this.mErrorCorrectionLevel) { case 7: e = 19; break; case 15: e = 16; break; case 25: e = 13; break; case 30: e = 9 }break; case 2: switch (this.mErrorCorrectionLevel) { case 7: e = 34; break; case 15: e = 28; break; case 25: e = 22; break; case 30: e = 16 }break; case 3: switch (this.mErrorCorrectionLevel) { case 7: e = 55; break; case 15: e = 44; break; case 25: e = 34; break; case 30: e = 26 }break; case 4: switch (this.mErrorCorrectionLevel) { case 7: e = 80; break; case 15: e = 64; break; case 25: e = 48; break; case 30: e = 36 }break; case 5: switch (this.mErrorCorrectionLevel) { case 7: e = 108; break; case 15: e = 86; break; case 25: e = 62; break; case 30: e = 46 }break; case 6: switch (this.mErrorCorrectionLevel) { case 7: e = 136; break; case 15: e = 108; break; case 25: e = 76; break; case 30: e = 60 }break; case 7: switch (this.mErrorCorrectionLevel) { case 7: e = 156; break; case 15: e = 124; break; case 25: e = 88; break; case 30: e = 66 }break; case 8: switch (this.mErrorCorrectionLevel) { case 7: e = 194; break; case 15: e = 154; break; case 25: e = 110; break; case 30: e = 86 }break; case 9: switch (this.mErrorCorrectionLevel) { case 7: e = 232; break; case 15: e = 182; break; case 25: e = 132; break; case 30: e = 100 }break; case 10: switch (this.mErrorCorrectionLevel) { case 7: e = 274; break; case 15: e = 216; break; case 25: e = 154; break; case 30: e = 122 }break; case 11: switch (this.mErrorCorrectionLevel) { case 7: e = 324; break; case 15: e = 254; break; case 25: e = 180; break; case 30: e = 140 }break; case 12: switch (this.mErrorCorrectionLevel) { case 7: e = 370; break; case 15: e = 290; break; case 25: e = 206; break; case 30: e = 158 }break; case 13: switch (this.mErrorCorrectionLevel) { case 7: e = 428; break; case 15: e = 334; break; case 25: e = 244; break; case 30: e = 180 }break; case 14: switch (this.mErrorCorrectionLevel) { case 7: e = 461; break; case 15: e = 365; break; case 25: e = 261; break; case 30: e = 197 }break; case 15: switch (this.mErrorCorrectionLevel) { case 7: e = 523; break; case 15: e = 415; break; case 25: e = 295; break; case 30: e = 223 }break; case 16: switch (this.mErrorCorrectionLevel) { case 7: e = 589; break; case 15: e = 453; break; case 25: e = 325; break; case 30: e = 253 }break; case 17: switch (this.mErrorCorrectionLevel) { case 7: e = 647; break; case 15: e = 507; break; case 25: e = 367; break; case 30: e = 283 }break; case 18: switch (this.mErrorCorrectionLevel) { case 7: e = 721; break; case 15: e = 563; break; case 25: e = 397; break; case 30: e = 313 }break; case 19: switch (this.mErrorCorrectionLevel) { case 7: e = 795; break; case 15: e = 627; break; case 25: e = 445; break; case 30: e = 341 }break; case 20: switch (this.mErrorCorrectionLevel) { case 7: e = 861; break; case 15: e = 669; break; case 25: e = 485; break; case 30: e = 385 }break; case 21: switch (this.mErrorCorrectionLevel) { case 7: e = 932; break; case 15: e = 714; break; case 25: e = 512; break; case 30: e = 406 }break; case 22: switch (this.mErrorCorrectionLevel) { case 7: e = 1006; break; case 15: e = 782; break; case 25: e = 568; break; case 30: e = 442 }break; case 23: switch (this.mErrorCorrectionLevel) { case 7: e = 1094; break; case 15: e = 860; break; case 25: e = 614; break; case 30: e = 464 }break; case 24: switch (this.mErrorCorrectionLevel) { case 7: e = 1174; break; case 15: e = 914; break; case 25: e = 664; break; case 30: e = 514 }break; case 25: switch (this.mErrorCorrectionLevel) { case 7: e = 1276; break; case 15: e = 1e3; break; case 25: e = 718; break; case 30: e = 538 }break; case 26: switch (this.mErrorCorrectionLevel) { case 7: e = 1370; break; case 15: e = 1062; break; case 25: e = 754; break; case 30: e = 596 }break; case 27: switch (this.mErrorCorrectionLevel) { case 7: e = 1468; break; case 15: e = 1128; break; case 25: e = 808; break; case 30: e = 628 }break; case 28: switch (this.mErrorCorrectionLevel) { case 7: e = 1531; break; case 15: e = 1193; break; case 25: e = 871; break; case 30: e = 661 }break; case 29: switch (this.mErrorCorrectionLevel) { case 7: e = 1631; break; case 15: e = 1267; break; case 25: e = 911; break; case 30: e = 701 }break; case 30: switch (this.mErrorCorrectionLevel) { case 7: e = 1735; break; case 15: e = 1373; break; case 25: e = 985; break; case 30: e = 745 }break; case 31: switch (this.mErrorCorrectionLevel) { case 7: e = 1843; break; case 15: e = 1455; break; case 25: e = 1033; break; case 30: e = 793 }break; case 32: switch (this.mErrorCorrectionLevel) { case 7: e = 1955; break; case 15: e = 1541; break; case 25: e = 1115; break; case 30: e = 845 }break; case 33: switch (this.mErrorCorrectionLevel) { case 7: e = 2071; break; case 15: e = 1631; break; case 25: e = 1171; break; case 30: e = 901 }break; case 34: switch (this.mErrorCorrectionLevel) { case 7: e = 2191; break; case 15: e = 1725; break; case 25: e = 1231; break; case 30: e = 961 }break; case 35: switch (this.mErrorCorrectionLevel) { case 7: e = 2306; break; case 15: e = 1812; break; case 25: e = 1286; break; case 30: e = 986 }break; case 36: switch (this.mErrorCorrectionLevel) { case 7: e = 2434; break; case 15: e = 1914; break; case 25: e = 1354; break; case 30: e = 1054 }break; case 37: switch (this.mErrorCorrectionLevel) { case 7: e = 2566; break; case 15: e = 1992; break; case 25: e = 1426; break; case 30: e = 1096 }break; case 38: switch (this.mErrorCorrectionLevel) { case 7: e = 2702; break; case 15: e = 2102; break; case 25: e = 1502; break; case 30: e = 1142 }break; case 39: switch (this.mErrorCorrectionLevel) { case 7: e = 2812; break; case 15: e = 2216; break; case 25: e = 1582; break; case 30: e = 1222 }break; case 40: switch (this.mErrorCorrectionLevel) { case 7: e = 2956; break; case 15: e = 2334; break; case 25: e = 1666; break; case 30: e = 1276 } }return e }, e.prototype.obtainNumberOfErrorCorrectingCodeWords = function () { var e = 4 * (this.mVersion - 1); switch (this.mErrorCorrectionLevel) { case 7: e += 0; break; case 15: e += 1; break; case 25: e += 2; break; case 30: e += 3 }return this.numberOfErrorCorrectingCodeWords[e] }, e.prototype.obtainNumberOfErrorCorrectionBlocks = function () { var e = null; switch (this.mVersion) { case 1: case 2: e = [1]; break; case 3: switch (this.mErrorCorrectionLevel) { case 7: case 15: e = [1]; break; case 25: case 30: e = [2] }break; case 4: switch (this.mErrorCorrectionLevel) { case 7: e = [1]; break; case 15: case 25: e = [2]; break; case 30: e = [4] }break; case 5: switch (this.mErrorCorrectionLevel) { case 7: e = [1]; break; case 15: e = [2]; break; case 25: e = [2, 33, 15, 2, 34, 16]; break; case 30: e = [2, 33, 11, 2, 34, 12] }break; case 6: switch (this.mErrorCorrectionLevel) { case 7: e = [2]; break; case 15: case 25: case 30: e = [4] }break; case 7: switch (this.mErrorCorrectionLevel) { case 7: e = [2]; break; case 15: e = [4]; break; case 25: e = [2, 32, 14, 4, 33, 15]; break; case 30: e = [4, 39, 13, 1, 40, 14] }break; case 8: switch (this.mErrorCorrectionLevel) { case 7: e = [2]; break; case 15: e = [2, 60, 38, 2, 61, 39]; break; case 25: e = [4, 40, 18, 2, 41, 19]; break; case 30: e = [4, 40, 14, 2, 41, 15] }break; case 9: switch (this.mErrorCorrectionLevel) { case 7: e = [2]; break; case 15: e = [3, 58, 36, 2, 59, 37]; break; case 25: e = [4, 36, 16, 4, 37, 17]; break; case 30: e = [4, 36, 12, 4, 37, 13] }break; case 10: switch (this.mErrorCorrectionLevel) { case 7: e = [2, 86, 68, 2, 87, 69]; break; case 15: e = [4, 69, 43, 1, 70, 44]; break; case 25: e = [6, 43, 19, 2, 44, 20]; break; case 30: e = [6, 43, 15, 2, 44, 16] }break; case 11: switch (this.mErrorCorrectionLevel) { case 7: e = [4]; break; case 15: e = [1, 80, 50, 4, 81, 51]; break; case 25: e = [4, 50, 22, 4, 51, 23]; break; case 30: e = [3, 36, 12, 8, 37, 13] }break; case 12: switch (this.mErrorCorrectionLevel) { case 7: e = [2, 116, 92, 2, 117, 93]; break; case 15: e = [6, 58, 36, 2, 59, 37]; break; case 25: e = [4, 46, 20, 6, 47, 21]; break; case 30: e = [7, 42, 14, 4, 43, 15] }break; case 13: switch (this.mErrorCorrectionLevel) { case 7: e = [4]; break; case 15: e = [8, 59, 37, 1, 60, 38]; break; case 25: e = [8, 44, 20, 4, 45, 21]; break; case 30: e = [12, 33, 11, 4, 34, 12] }break; case 14: switch (this.mErrorCorrectionLevel) { case 7: e = [3, 145, 115, 1, 146, 116]; break; case 15: e = [4, 64, 40, 5, 65, 41]; break; case 25: e = [11, 36, 16, 5, 37, 17]; break; case 30: e = [11, 36, 12, 5, 37, 13] }break; case 15: switch (this.mErrorCorrectionLevel) { case 7: e = [5, 109, 87, 1, 110, 88]; break; case 15: e = [5, 65, 41, 5, 66, 42]; break; case 25: e = [5, 54, 24, 7, 55, 25]; break; case 30: e = [11, 36, 12, 7, 37, 13] }break; case 16: switch (this.mErrorCorrectionLevel) { case 7: e = [5, 112, 98, 1, 123, 99]; break; case 15: e = [7, 73, 45, 3, 74, 46]; break; case 25: e = [15, 43, 19, 2, 44, 20]; break; case 30: e = [3, 45, 15, 13, 46, 16] }break; case 17: switch (this.mErrorCorrectionLevel) { case 7: e = [1, 135, 107, 5, 136, 108]; break; case 15: e = [10, 74, 46, 1, 75, 47]; break; case 25: e = [1, 50, 22, 15, 51, 23]; break; case 30: e = [2, 42, 14, 17, 43, 15] }break; case 18: switch (this.mErrorCorrectionLevel) { case 7: e = [5, 150, 120, 1, 151, 121]; break; case 15: e = [9, 69, 43, 4, 70, 44]; break; case 25: e = [17, 50, 22, 1, 51, 23]; break; case 30: e = [2, 42, 14, 19, 43, 15] }break; case 19: switch (this.mErrorCorrectionLevel) { case 7: e = [3, 141, 113, 4, 142, 114]; break; case 15: e = [3, 70, 44, 11, 71, 45]; break; case 25: e = [17, 47, 21, 4, 48, 22]; break; case 30: e = [9, 39, 13, 16, 40, 14] }break; case 20: switch (this.mErrorCorrectionLevel) { case 7: e = [3, 135, 107, 5, 136, 108]; break; case 15: e = [3, 67, 41, 13, 68, 42]; break; case 25: e = [15, 54, 24, 5, 55, 25]; break; case 30: e = [15, 43, 15, 10, 44, 16] }break; case 21: switch (this.mErrorCorrectionLevel) { case 7: e = [4, 144, 116, 4, 145, 117]; break; case 15: e = [17]; break; case 25: e = [17, 50, 22, 6, 51, 23]; break; case 30: e = [19, 46, 16, 6, 47, 17] }break; case 22: switch (this.mErrorCorrectionLevel) { case 7: e = [2, 139, 111, 7, 140, 112]; break; case 15: e = [17]; break; case 25: e = [7, 54, 24, 16, 55, 25]; break; case 30: e = [34] }break; case 23: switch (this.mErrorCorrectionLevel) { case 7: e = [4, 151, 121, 5, 152, 122]; break; case 15: e = [4, 75, 47, 14, 76, 48]; break; case 25: e = [11, 54, 24, 14, 55, 25]; break; case 30: e = [16, 45, 15, 14, 46, 16] }break; case 24: switch (this.mErrorCorrectionLevel) { case 7: e = [6, 147, 117, 4, 148, 118]; break; case 15: e = [6, 73, 45, 14, 74, 46]; break; case 25: e = [11, 54, 24, 16, 55, 25]; break; case 30: e = [30, 46, 16, 2, 47, 17] }break; case 25: switch (this.mErrorCorrectionLevel) { case 7: e = [8, 132, 106, 4, 133, 107]; break; case 15: e = [8, 75, 47, 13, 76, 48]; break; case 25: e = [7, 54, 24, 22, 55, 25]; break; case 30: e = [22, 45, 15, 13, 46, 16] }break; case 26: switch (this.mErrorCorrectionLevel) { case 7: e = [10, 142, 114, 2, 143, 115]; break; case 15: e = [19, 74, 46, 4, 75, 47]; break; case 25: e = [28, 50, 22, 6, 51, 23]; break; case 30: e = [33, 46, 16, 4, 47, 17] }break; case 27: switch (this.mErrorCorrectionLevel) { case 7: e = [8, 152, 122, 4, 153, 123]; break; case 15: e = [22, 73, 45, 3, 74, 46]; break; case 25: e = [8, 53, 23, 26, 54, 24]; break; case 30: e = [12, 45, 15, 28, 46, 16] }break; case 28: switch (this.mErrorCorrectionLevel) { case 7: e = [3, 147, 117, 10, 148, 118]; break; case 15: e = [3, 73, 45, 23, 74, 46]; break; case 25: e = [4, 54, 24, 31, 55, 25]; break; case 30: e = [11, 45, 15, 31, 46, 16] }break; case 29: switch (this.mErrorCorrectionLevel) { case 7: e = [7, 146, 116, 7, 147, 117]; break; case 15: e = [21, 73, 45, 7, 74, 46]; break; case 25: e = [1, 53, 23, 37, 54, 24]; break; case 30: e = [19, 45, 15, 26, 46, 16] }break; case 30: switch (this.mErrorCorrectionLevel) { case 7: e = [5, 145, 115, 10, 146, 116]; break; case 15: e = [19, 75, 47, 10, 76, 48]; break; case 25: e = [15, 54, 24, 25, 55, 25]; break; case 30: e = [23, 45, 15, 25, 46, 16] }break; case 31: switch (this.mErrorCorrectionLevel) { case 7: e = [13, 145, 115, 3, 146, 116]; break; case 15: e = [2, 74, 46, 29, 75, 47]; break; case 25: e = [42, 54, 24, 1, 55, 25]; break; case 30: e = [23, 45, 15, 28, 46, 16] }break; case 32: switch (this.mErrorCorrectionLevel) { case 7: e = [17]; break; case 15: e = [10, 74, 46, 23, 75, 47]; break; case 25: e = [10, 54, 24, 35, 55, 25]; break; case 30: e = [19, 45, 15, 35, 46, 16] }break; case 33: switch (this.mErrorCorrectionLevel) { case 7: e = [17, 145, 115, 1, 146, 116]; break; case 15: e = [14, 74, 46, 21, 75, 47]; break; case 25: e = [29, 54, 24, 19, 55, 25]; break; case 30: e = [11, 45, 15, 46, 46, 16] }break; case 34: switch (this.mErrorCorrectionLevel) { case 7: e = [13, 145, 115, 6, 146, 116]; break; case 15: e = [14, 74, 46, 23, 75, 47]; break; case 25: e = [44, 54, 24, 7, 55, 25]; break; case 30: e = [59, 46, 16, 1, 47, 17] }break; case 35: switch (this.mErrorCorrectionLevel) { case 7: e = [12, 151, 121, 7, 152, 122]; break; case 15: e = [12, 75, 47, 26, 76, 48]; break; case 25: e = [39, 54, 24, 14, 55, 25]; break; case 30: e = [22, 45, 15, 41, 46, 16] }break; case 36: switch (this.mErrorCorrectionLevel) { case 7: e = [6, 151, 121, 14, 152, 122]; break; case 15: e = [6, 75, 47, 34, 76, 48]; break; case 25: e = [46, 54, 24, 10, 55, 25]; break; case 30: e = [2, 45, 15, 64, 46, 16] }break; case 37: switch (this.mErrorCorrectionLevel) { case 7: e = [17, 152, 122, 4, 153, 123]; break; case 15: e = [29, 74, 46, 14, 75, 47]; break; case 25: e = [49, 54, 24, 10, 55, 25]; break; case 30: e = [24, 45, 15, 46, 46, 16] }break; case 38: switch (this.mErrorCorrectionLevel) { case 7: e = [4, 152, 122, 18, 153, 123]; break; case 15: e = [13, 74, 46, 32, 75, 47]; break; case 25: e = [48, 54, 24, 14, 55, 25]; break; case 30: e = [42, 45, 15, 32, 46, 16] }break; case 39: switch (this.mErrorCorrectionLevel) { case 7: e = [20, 147, 117, 4, 148, 118]; break; case 15: e = [40, 75, 47, 7, 76, 48]; break; case 25: e = [43, 54, 24, 22, 55, 25]; break; case 30: e = [10, 45, 15, 67, 46, 16] }break; case 40: switch (this.mErrorCorrectionLevel) { case 7: e = [19, 148, 118, 6, 149, 119]; break; case 15: e = [18, 75, 47, 31, 76, 48]; break; case 25: e = [34, 54, 24, 34, 55, 25]; break; case 30: e = [20, 45, 15, 61, 46, 16] } }return e }, e.prototype.obtainEnd = function () { return this.endValues[this.mVersion - 1] }, e.prototype.obtainDataCapacity = function () { return this.dataCapacityValues[this.mVersion - 1] }, e.prototype.obtainFormatInformation = function () { var e = null; switch (this.mErrorCorrectionLevel) { case 7: e = [1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1]; break; case 15: e = [1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1]; break; case 25: e = [0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0]; break; case 30: e = [0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0] }return e }, e.prototype.obtainVersionInformation = function () { var e = null; switch (this.mVersion) { case 7: e = [0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0]; break; case 8: e = [0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 0]; break; case 9: e = [1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0]; break; case 10: e = [1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0]; break; case 11: e = [0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0]; break; case 12: e = [0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0, 0]; break; case 13: e = [1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0]; break; case 14: e = [1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 0]; break; case 15: e = [0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0]; break; case 16: e = [0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0]; break; case 17: e = [1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0]; break; case 18: e = [1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0]; break; case 19: e = [0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1, 0]; break; case 20: e = [0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 0]; break; case 21: e = [1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0]; break; case 22: e = [1, 0, 0, 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1, 1, 0, 1, 0]; break; case 23: e = [0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0]; break; case 24: e = [0, 0, 1, 0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0]; break; case 25: e = [1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 0, 1, 1, 0]; break; case 26: e = [1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0]; break; case 27: e = [0, 1, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0]; break; case 28: e = [0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0]; break; case 29: e = [1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 1, 0]; break; case 30: e = [1, 0, 1, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 0]; break; case 31: e = [0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 1, 1, 1, 1, 1, 0]; break; case 32: e = [1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1]; break; case 33: e = [0, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 0, 0, 1]; break; case 34: e = [0, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1]; break; case 35: e = [1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1]; break; case 36: e = [1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 1, 0, 0, 1]; break; case 37: e = [0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0, 1]; break; case 38: e = [0, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1]; break; case 39: e = [1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1]; break; case 40: e = [1, 0, 0, 1, 0, 1, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 1] }return e }, e.prototype.getNumericDataCapacity = function (e, t) { var i = null; switch (t) { case 7: i = this.numericDataCapacityLow; break; case 15: i = this.numericDataCapacityMedium; break; case 25: i = this.numericDataCapacityQuartile; break; case 30: i = this.numericDataCapacityHigh }return i[e - 1] }, e.prototype.getAlphanumericDataCapacity = function (e, t) { var i = null; switch (t) { case 7: i = this.alphanumericDataCapacityLow; break; case 15: i = this.alphanumericDataCapacityMedium; break; case 25: i = this.alphanumericDataCapacityQuartile; break; case 30: i = this.alphanumericDataCapacityHigh }return i[e - 1] }, e.prototype.getBinaryDataCapacity = function (e, t) { var i = null; switch (t) { case 7: i = this.binaryDataCapacityLow; break; case 15: i = this.binaryDataCapacityMedium; break; case 25: i = this.binaryDataCapacityQuartile; break; case 30: i = this.binaryDataCapacityHigh }return i[e - 1] }, e }(), $C = function () { function e(e, t) { this.alpha = [1, 2, 4, 8, 16, 32, 64, 128, 29, 58, 116, 232, 205, 135, 19, 38, 76, 152, 45, 90, 180, 117, 234, 201, 143, 3, 6, 12, 24, 48, 96, 192, 157, 39, 78, 156, 37, 74, 148, 53, 106, 212, 181, 119, 238, 193, 159, 35, 70, 140, 5, 10, 20, 40, 80, 160, 93, 186, 105, 210, 185, 111, 222, 161, 95, 190, 97, 194, 153, 47, 94, 188, 101, 202, 137, 15, 30, 60, 120, 240, 253, 231, 211, 187, 107, 214, 177, 127, 254, 225, 223, 163, 91, 182, 113, 226, 217, 175, 67, 134, 17, 34, 68, 136, 13, 26, 52, 104, 208, 189, 103, 206, 129, 31, 62, 124, 248, 237, 199, 147, 59, 118, 236, 197, 151, 51, 102, 204, 133, 23, 46, 92, 184, 109, 218, 169, 79, 158, 33, 66, 132, 21, 42, 84, 168, 77, 154, 41, 82, 164, 85, 170, 73, 146, 57, 114, 228, 213, 183, 115, 230, 209, 191, 99, 198, 145, 63, 126, 252, 229, 215, 179, 123, 246, 241, 255, 227, 219, 171, 75, 150, 49, 98, 196, 149, 55, 110, 220, 165, 87, 174, 65, 130, 25, 50, 100, 200, 141, 7, 14, 28, 56, 112, 224, 221, 167, 83, 166, 81, 162, 89, 178, 121, 242, 249, 239, 195, 155, 43, 86, 172, 69, 138, 9, 18, 36, 72, 144, 61, 122, 244, 245, 247, 243, 251, 235, 203, 139, 11, 22, 44, 88, 176, 125, 250, 233, 207, 131, 27, 54, 108, 216, 173, 71, 142], this.mQrBarcodeValues = new KC(e, t); var i = "DataCapacity"; this.mLength = this.mQrBarcodeValues[i], i = "NumberOfErrorCorrectingCodeWords", this.eccw = this.mQrBarcodeValues[i] } return Object.defineProperty(e.prototype, "DC", { set: function (e) { this.mDataCodeWord = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "DataBits", { set: function (e) { this.databits = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "Eccw", { set: function (e) { this.eccw = e }, enumerable: !0, configurable: !0 }), e.prototype.getErcw = function () { var e; switch (this.decimalValue = [this.databits], this.eccw) { case 7: this.gx = [0, 87, 229, 146, 149, 238, 102, 21]; break; case 10: this.gx = [0, 251, 67, 46, 61, 118, 70, 64, 94, 32, 45]; break; case 13: this.gx = [0, 74, 152, 176, 100, 86, 100, 106, 104, 130, 218, 206, 140, 78]; break; case 15: this.gx = [0, 8, 183, 61, 91, 202, 37, 51, 58, 58, 237, 140, 124, 5, 99, 105]; break; case 16: this.gx = [0, 120, 104, 107, 109, 102, 161, 76, 3, 91, 191, 147, 169, 182, 194, 225, 120]; break; case 17: this.gx = [0, 43, 139, 206, 78, 43, 239, 123, 206, 214, 147, 24, 99, 150, 39, 243, 163, 136]; break; case 18: this.gx = [0, 215, 234, 158, 94, 184, 97, 118, 170, 79, 187, 152, 148, 252, 179, 5, 98, 96, 153]; break; case 20: this.gx = [0, 17, 60, 79, 50, 61, 163, 26, 187, 202, 180, 221, 225, 83, 239, 156, 164, 212, 212, 188, 190]; break; case 22: this.gx = [0, 210, 171, 247, 242, 93, 230, 14, 109, 221, 53, 200, 74, 8, 172, 98, 80, 219, 134, 160, 105, 165, 231]; break; case 24: this.gx = [0, 229, 121, 135, 48, 211, 117, 251, 126, 159, 180, 169, 152, 192, 226, 228, 218, 111, 0, 117, 232, 87, 96, 227, 21]; break; case 26: this.gx = [0, 173, 125, 158, 2, 103, 182, 118, 17, 145, 201, 111, 28, 165, 53, 161, 21, 245, 142, 13, 102, 48, 227, 153, 145, 218, 70]; break; case 28: this.gx = [0, 168, 223, 200, 104, 224, 234, 108, 180, 110, 190, 195, 147, 205, 27, 232, 201, 21, 43, 245, 87, 42, 195, 212, 119, 242, 37, 9, 123]; break; case 30: this.gx = [0, 41, 173, 145, 152, 216, 31, 179, 182, 50, 48, 110, 86, 239, 96, 222, 125, 42, 173, 226, 193, 224, 130, 156, 37, 251, 216, 238, 40, 192, 180] }return this.gx = this.getElement(this.gx, this.alpha), this.toDecimal(this.mDataCodeWord), e = this.divide(), this.toBinary(e) }, e.prototype.toDecimal = function (e) { for (var t = 0; t < e.length; t++)this.decimalValue[t] = parseInt(e[t], 2) }, e.prototype.toBinary = function (e) { for (var t = [], i = 0; i < this.eccw; i++) { var n = "", r = e[i].toString(2); if (r.length < 8) for (var o = 0; o < 8 - r.length; o++)n += "0"; t[i] = n + r } return t }, e.prototype.divide = function () { for (var e = {}, t = 0; t < this.decimalValue.length; t++)e[this.decimalValue.length - 1 - t] = this.decimalValue[t]; var i = {}; for (t = 0; t < this.gx.length; t++)i[this.gx.length - 1 - t] = this.findElement(this.gx[t], this.alpha); for (var n = {}, r = 0, o = Object.keys(e); r < o.length; r++) { var s = o[r]; n[Number(s) + this.eccw] = e[s] } e = n; var a = this.decimalValue.length + this.eccw - this.gx.length; n = {}; for (var l = 0, h = Object.keys(i); l < h.length; l++) { s = h[l]; n[Number(s) + a] = i[s] } i = n; var d = e; for (t = 0; t < Object.keys(e).length; t++) { var c = this.findLargestExponent(d); if (0 === d[c]) delete d[c]; else { var p = this.convertToAlphaNotation(d), u = this.multiplyGeneratorPolynomByLeadterm(i, p[this.findLargestExponent(p)], t); u = this.convertToDecNotation(u), d = u = this.xORPolynoms(d, u) } } this.eccw = Object.keys(d).length; for (var g = [], m = 0, f = Object.keys(d); m < f.length; m++) { var y = f[m]; g.push(d[y]) } return g.reverse() }, e.prototype.xORPolynoms = function (e, t) { var i = {}, n = {}, r = {}; Object.keys(e).length >= Object.keys(t).length ? (n = e, r = t) : (n = t, r = e); for (var o = this.findLargestExponent(e), s = this.findLargestExponent(r), a = Object.keys(n).length - 1, l = 0, h = Object.keys(n); l < h.length; l++) { var d = h[l]; i[o - a] = n[d] ^ (Object.keys(r).length > a ? r[s - a] : 0), a-- } return delete i[this.findLargestExponent(i)], i }, e.prototype.multiplyGeneratorPolynomByLeadterm = function (e, t, i) { for (var n = {}, r = 0, o = Object.keys(e); r < o.length; r++) { var s = o[r]; n[Number(s) - i] = (e[s] + t) % 255 } return n }, e.prototype.convertToDecNotation = function (e) { for (var t = {}, i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; t[r] = this.getIntValFromAlphaExp(e[r], this.alpha) } return t }, e.prototype.convertToAlphaNotation = function (e) { for (var t = {}, i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; 0 !== e[r] && (t[r] = this.findElement(e[r], this.alpha)) } return t }, e.prototype.findLargestExponent = function (e) { for (var t = 0, i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; Number(r) > t && (t = Number(r)) } return t }, e.prototype.getIntValFromAlphaExp = function (e, t) { return e > 255 && (e -= 255), t[e] }, e.prototype.findElement = function (e, t) { var i; for (i = 0; i < t.length && e !== t[i]; i++); return i }, e.prototype.getElement = function (e, t) { for (var i = [e.length], n = 0; n < e.length; n++)e[n] > 255 && (e[n] = e[n] - 255), i[n] = t[e[n]]; return i }, e }(), eL = function () { function e() { this.mVersion = Bb.Version01, this.mInputMode = "NumericMode", this.validInput = !0, this.totalBits = 0, this.mModuleValue = [], this.mDataAllocationValues = [[], []], this.mixVersionERC = !0, this.mixExecutablePart = null, this.mixDataCount = 0, this.mNoOfModules = 21, this.mIsUserMentionedMode = !1, this.chooseDefaultMode = !1, this.mixRemainingPart = null, this.isXdimension = !1, this.mXDimension = 1, this.mIsEci = !1, this.mIsUserMentionedErrorCorrectionLevel = !1, this.mEciAssignmentNumber = 3, this.mIsUserMentionedVersion = !1, this.mErrorCorrectionLevel = Fb.Low, this.textList = [], this.mode = [] } return Object.defineProperty(e.prototype, "XDimension", { get: function () { return this.mXDimension }, set: function (e) { this.mXDimension = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "inputMode", { get: function () { return this.mInputMode }, set: function (e) { this.mInputMode = e, this.mIsUserMentionedMode = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "version", { get: function () { return this.mVersion }, set: function (e) { this.mVersion = e, this.mNoOfModules = 4 * (this.mVersion - 1) + 21, e !== Bb.Auto && (this.mIsUserMentionedVersion = !0) }, enumerable: !0, configurable: !0 }), e.prototype.getBaseAttributes = function (e, t, i, n, r, o) { return { width: e, height: t, x: i, y: n, color: r, strokeColor: o } }, e.prototype.getInstance = function (e) { var t = document.getElementById(e); return new rC(t.id, this.isSvgMode) }, e.prototype.drawImage = function (e, t, i, n, r, o) { for (var s = this.getInstance(e.id), a = 0; a < t.length; a++)s.renderRectElement(e, t[a]) }, e.prototype.draw = function (e, t, i, n, r, o, s, a) { if (this.isSvgMode = s, this.generateValues(), this.validInput) { var l = void 0, h = n - (r.left + r.right), d = i - (r.top + r.bottom); l = h >= d ? d : h; var c = this.XDimension, p = Rb.All, u = h >= l ? (h - l) / 2 : 0, g = d >= l ? (d - l) / 2 : 0; g += r.top, u += r.left; var m = this.drawDisplayText(t, u, g, l, d, o, e, r, a); d -= m.height, o.margin.bottom > 0 && ("Top" === o.position ? (g += o.margin.bottom, d -= o.margin.bottom) : d -= o.margin.bottom), o.margin.top > 0 && ("Top" === o.position ? (g += o.margin.top, d -= o.margin.top) : d -= o.margin.top); c = (l = h >= d ? d : h) / (this.mNoOfModules + 2 * p + 1), this.isXdimension = !0, n = (this.mNoOfModules + 2 * p) * c, i = (this.mNoOfModules + 2 * p) * c; for (var f = this.mNoOfModules + 2 * p, y = this.mNoOfModules + 2 * p, v = [], w = 0; w < f; w++) { for (var b = 0; b < y; b++) { var C = void 0; if (C = this.mModuleValue[w][b].isBlack ? a : "white", this.mDataAllocationValues[b][w].isFilled && this.mDataAllocationValues[b][w].isBlack && (C = a), "white" !== C) { var L = void 0; L = this.getBaseAttributes(c, c, u, "Bottom" === o.position ? g : g + m.height / 2, C), v.push(L) } u += c } g += c, u = (h >= l ? (h - l) / 2 : 0) + r.left } return this.drawImage(t, v), this.mModuleValue = void 0, this.mDataAllocationValues = void 0, !0 } return !1 }, e.prototype.drawText = function (e, t) { this.getInstance(e.id).renderTextElement(e, t) }, e.prototype.drawDisplayText = function (e, t, i, n, r, o, s, a, l) { var h = o; we(); var d = this.getBaseAttributes(n, r, t, i, "black"); d.string = h.text ? h.text : s, d.color = l, d.fontStyle = h.font, d.stringSize = h.size, d.visibility = h.visibility; var c = fe(d), p = c.height / 2 + 2; return d.height = p, d.x = t + n / 2 - c.width / 2 + h.margin.left - h.margin.right, "Bottom" === o.position ? (o.margin.top > 0 && (d.y = i + r), o.margin.bottom > 0 ? d.y = i + r - h.margin.bottom : a.top < 10 ? d.y = r + c.height / 2 : d.y = r + a.top) : o.margin.top > 0 ? d.y = i + o.margin.top + c.height / 2 : d.y = i + c.height / 2, o.visibility && this.drawText(e, d), d }, e.prototype.generateValues = function () { this.mQrBarcodeValues = new KC(this.mVersion, this.mErrorCorrectionLevel), this.initialize(), this.mQrBarcodeValues = new KC(this.mVersion, this.mErrorCorrectionLevel); for (var e = 0; e < this.mNoOfModules; e++) { this.mModuleValue.push([0]); for (var t = 0; t < this.mNoOfModules; t++)this.mModuleValue[e][t] = new tL } if (this.drawPDP(0, 0), this.drawPDP(this.mNoOfModules - 7, 0), this.drawPDP(0, this.mNoOfModules - 7), this.drawTimingPattern(), 1 !== this.mVersion) for (var i = this.getAlignmentPatternCoOrdinates(), n = 0, r = Object.keys(i); n < r.length; n++) { e = r[n]; for (var o = 0, s = Object.keys(i); o < s.length; o++) { t = s[o]; this.mModuleValue[i[e]][i[t]].isPdp || this.drawAlignmentPattern(i[e], i[t]) } } this.allocateFormatAndVersionInformation(); var a = null; a = this.encodeData(), this.dataAllocationAndMasking(a), this.drawFormatInformation(), this.addQuietZone(), this.mQrBarcodeValues.FormatInformation = void 0, this.mQrBarcodeValues.NumberOfDataCodeWord = void 0, this.mQrBarcodeValues.NumberOfErrorCorrectingCodeWords = void 0, this.mQrBarcodeValues.VersionInformation = void 0, this.mQrBarcodeValues.alphanumericDataCapacityHigh = void 0, this.mQrBarcodeValues.alphanumericDataCapacityLow = void 0, this.mQrBarcodeValues.alphanumericDataCapacityMedium = void 0, this.mQrBarcodeValues.alphanumericDataCapacityQuartile = void 0, this.mQrBarcodeValues.binaryDataCapacityHigh = void 0, this.mQrBarcodeValues.dataCapacityValues = void 0, this.mQrBarcodeValues.endValues = void 0, this.mQrBarcodeValues.dataCapacityValues = void 0, this.mQrBarcodeValues = void 0, this.mIsUserMentionedVersion = void 0, this.mVersion = void 0 }, e.prototype.drawPDP = function (e, t) { var i, n; for (i = e, n = t; i < e + 7; i++ , n++)this.mModuleValue[i][t].isBlack = !0, this.mModuleValue[i][t].isFilled = !0, this.mModuleValue[i][t].isPdp = !0, this.mModuleValue[i][t + 6].isBlack = !0, this.mModuleValue[i][t + 6].isFilled = !0, this.mModuleValue[i][t + 6].isPdp = !0, t + 7 < this.mNoOfModules ? (this.mModuleValue[i][t + 7].isBlack = !1, this.mModuleValue[i][t + 7].isFilled = !0, this.mModuleValue[i][t + 7].isPdp = !0) : t - 1 >= 0 && (this.mModuleValue[i][t - 1].isBlack = !1, this.mModuleValue[i][t - 1].isFilled = !0, this.mModuleValue[i][t - 1].isPdp = !0), this.mModuleValue[e][n].isBlack = !0, this.mModuleValue[e][n].isFilled = !0, this.mModuleValue[e][n].isPdp = !0, this.mModuleValue[e + 6][n].isBlack = !0, this.mModuleValue[e + 6][n].isFilled = !0, this.mModuleValue[e + 6][n].isPdp = !0, e + 7 < this.mNoOfModules ? (this.mModuleValue[e + 7][n].isBlack = !1, this.mModuleValue[e + 7][n].isFilled = !0, this.mModuleValue[e + 7][n].isPdp = !0) : e - 1 >= 0 && (this.mModuleValue[e - 1][n].isBlack = !1, this.mModuleValue[e - 1][n].isFilled = !0, this.mModuleValue[e - 1][n].isPdp = !0); for (e + 7 < this.mNoOfModules && t + 7 < this.mNoOfModules ? (this.mModuleValue[e + 7][t + 7].isBlack = !1, this.mModuleValue[e + 7][t + 7].isFilled = !0, this.mModuleValue[e + 7][t + 7].isPdp = !0) : e + 7 < this.mNoOfModules && t + 7 >= this.mNoOfModules ? (this.mModuleValue[e + 7][t - 1].isBlack = !1, this.mModuleValue[e + 7][t - 1].isFilled = !0, this.mModuleValue[e + 7][t - 1].isPdp = !0) : e + 7 >= this.mNoOfModules && t + 7 < this.mNoOfModules && (this.mModuleValue[e - 1][t + 7].isBlack = !1, this.mModuleValue[e - 1][t + 7].isFilled = !0, this.mModuleValue[e - 1][t + 7].isPdp = !0), i = ++e, n = ++t; i < e + 5; i++ , n++)this.mModuleValue[i][t].isBlack = !1, this.mModuleValue[i][t].isFilled = !0, this.mModuleValue[i][t].isPdp = !0, this.mModuleValue[i][t + 4].isBlack = !1, this.mModuleValue[i][t + 4].isFilled = !0, this.mModuleValue[i][t + 4].isPdp = !0, this.mModuleValue[e][n].isBlack = !1, this.mModuleValue[e][n].isFilled = !0, this.mModuleValue[e][n].isPdp = !0, this.mModuleValue[e + 4][n].isBlack = !1, this.mModuleValue[e + 4][n].isFilled = !0, this.mModuleValue[e + 4][n].isPdp = !0; for (i = ++e, n = ++t; i < e + 3; i++ , n++)this.mModuleValue[i][t].isBlack = !0, this.mModuleValue[i][t].isFilled = !0, this.mModuleValue[i][t].isPdp = !0, this.mModuleValue[i][t + 2].isBlack = !0, this.mModuleValue[i][t + 2].isFilled = !0, this.mModuleValue[i][t + 2].isPdp = !0, this.mModuleValue[e][n].isBlack = !0, this.mModuleValue[e][n].isFilled = !0, this.mModuleValue[e][n].isPdp = !0, this.mModuleValue[e + 2][n].isBlack = !0, this.mModuleValue[e + 2][n].isFilled = !0, this.mModuleValue[e + 2][n].isPdp = !0; this.mModuleValue[e + 1][t + 1].isBlack = !0, this.mModuleValue[e + 1][t + 1].isFilled = !0, this.mModuleValue[e + 1][t + 1].isPdp = !0 }, e.prototype.drawTimingPattern = function () { for (var e = 8; e < this.mNoOfModules - 8; e += 2)this.mModuleValue[e][6].isBlack = !0, this.mModuleValue[e][6].isFilled = !0, this.mModuleValue[e + 1][6].isBlack = !1, this.mModuleValue[e + 1][6].isFilled = !0, this.mModuleValue[6][e].isBlack = !0, this.mModuleValue[6][e].isFilled = !0, this.mModuleValue[6][e + 1].isBlack = !1, this.mModuleValue[6][e + 1].isFilled = !0; this.mModuleValue[this.mNoOfModules - 8][8].isBlack = !0, this.mModuleValue[this.mNoOfModules - 8][8].isFilled = !0 }, e.prototype.initialize = function () { this.mIsUserMentionedMode || (this.chooseDefaultMode = !0); for (var e = "NumericMode", t = 0; t < this.text.length; t++)if (this.text.charCodeAt(t) < 58 && this.text.charCodeAt(t) > 47); else { if (!(this.text.charCodeAt(t) < 91 && this.text.charCodeAt(t) > 64 || "$" === this.text[t] || "%" === this.text[t] || "*" === this.text[t] || "+" === this.text[t] || "-" === this.text[t] || "." === this.text[t] || "/" === this.text[t] || ":" === this.text[t] || " " === this.text[t])) { if (this.text.charCodeAt(t) >= 65377 && this.text.charCodeAt(t) <= 65439 || this.text.charCodeAt(t) >= 97 && this.text.charCodeAt(t) <= 122) { e = "BinaryMode"; break } e = "BinaryMode", this.mIsEci = !0; break } e = "AlphaNumericMode" } if (this.mIsUserMentionedMode && e !== this.mInputMode && (("AlphaNumericMode" === e || "BinaryMode" === e) && "NumericMode" === this.mInputMode || "BinaryMode" === e && "AlphaNumericMode" === this.mInputMode) && (this.validInput = !1, e !== this.mInputMode && (("AlphaNumericMode" === e || "BinaryMode" === e) && "NumericMode" === this.mInputMode || "BinaryMode" === e && "AlphaNumericMode" === this.mInputMode) && (this.validInput = !1)), this.inputMode = e, !0 === this.mIsEci) for (t = 0; t < this.text.length; t++)this.text.charCodeAt(t) >= 32 && this.text.charCodeAt(t); if (this.mixVersionERC) if (!this.mIsUserMentionedVersion || this.mVersion & Bb.Auto) { var i = null; if (this.mIsUserMentionedErrorCorrectionLevel) switch (this.mInputMode) { case "NumericMode": switch (this.mErrorCorrectionLevel) { case 7: i = this.mQrBarcodeValues.numericDataCapacityLow; break; case 15: i = this.mQrBarcodeValues.numericDataCapacityMedium; break; case 25: i = this.mQrBarcodeValues.numericDataCapacityQuartile; break; case 30: i = this.mQrBarcodeValues.numericDataCapacityHigh }break; case "AlphaNumericMode": switch (this.mErrorCorrectionLevel) { case 7: i = this.mQrBarcodeValues.alphanumericDataCapacityLow; break; case 15: i = this.mQrBarcodeValues.alphanumericDataCapacityMedium; break; case 25: i = this.mQrBarcodeValues.alphanumericDataCapacityQuartile; break; case 30: i = this.mQrBarcodeValues.alphanumericDataCapacityHigh }break; case "BinaryMode": switch (this.mErrorCorrectionLevel) { case 7: i = this.mQrBarcodeValues.binaryDataCapacityLow; break; case 15: i = this.mQrBarcodeValues.binaryDataCapacityMedium; break; case 25: i = this.mQrBarcodeValues.binaryDataCapacityQuartile; break; case 30: i = this.mQrBarcodeValues.binaryDataCapacityHigh } } else switch (this.mErrorCorrectionLevel = Fb.Medium, this.mInputMode) { case "NumericMode": i = this.mQrBarcodeValues.numericDataCapacityMedium; break; case "AlphaNumericMode": i = this.mQrBarcodeValues.alphanumericDataCapacityMedium; break; case "BinaryMode": i = this.mQrBarcodeValues.binaryDataCapacityMedium }t = void 0; for (t = 0; t < i.length && !(i[t] > this.text.length); t++); this.version = t + 1 } else if (this.mIsUserMentionedVersion) if (this.mIsUserMentionedErrorCorrectionLevel) { var n = 0; "AlphaNumericMode" === this.mInputMode ? n = this.mQrBarcodeValues.getAlphanumericDataCapacity(this.mVersion, this.mErrorCorrectionLevel) : "NumericMode" === this.mInputMode && (n = this.mQrBarcodeValues.getNumericDataCapacity(this.mVersion, this.mErrorCorrectionLevel)), "BinaryMode" === this.mInputMode && (n = this.mQrBarcodeValues.getBinaryDataCapacity(this.mVersion, this.mErrorCorrectionLevel)), n < this.text.length && (this.chooseDefaultMode ? this.mixVersionERC = !1 : this.validInput = !1) } else { var r = 0, o = 0, s = 0, a = 0; "AlphaNumericMode" === this.mInputMode ? (r = this.mQrBarcodeValues.getAlphanumericDataCapacity(this.mVersion, Fb.Low), o = this.mQrBarcodeValues.getAlphanumericDataCapacity(this.mVersion, Fb.Medium), s = this.mQrBarcodeValues.getAlphanumericDataCapacity(this.mVersion, Fb.Quartile), a = this.mQrBarcodeValues.getAlphanumericDataCapacity(this.mVersion, Fb.High)) : "NumericMode" === this.mInputMode ? (r = this.mQrBarcodeValues.getNumericDataCapacity(this.mVersion, Fb.Low), o = this.mQrBarcodeValues.getNumericDataCapacity(this.mVersion, Fb.Medium), s = this.mQrBarcodeValues.getNumericDataCapacity(this.mVersion, Fb.Quartile), a = this.mQrBarcodeValues.getNumericDataCapacity(this.mVersion, Fb.High)) : "BinaryMode" === this.mInputMode && (r = this.mQrBarcodeValues.getBinaryDataCapacity(this.mVersion, Fb.Low), o = this.mQrBarcodeValues.getBinaryDataCapacity(this.mVersion, Fb.Medium), s = this.mQrBarcodeValues.getBinaryDataCapacity(this.mVersion, Fb.Quartile), a = this.mQrBarcodeValues.getBinaryDataCapacity(this.mVersion, Fb.High)), a > this.text.length ? this.mErrorCorrectionLevel = Fb.High : s > this.text.length ? this.mErrorCorrectionLevel = Fb.Quartile : o > this.text.length ? this.mErrorCorrectionLevel = Fb.Medium : r > this.text.length ? this.mErrorCorrectionLevel = Fb.Low : this.validInput = !1 } }, e.prototype.addQuietZone = function () { for (var e = Rb.All, t = this.mNoOfModules + 2 * e, i = this.mNoOfModules + 2 * e, n = [], r = [], o = 0; o < t; o++) { n.push([0]), r.push([0]); for (var s = 0; s < i; s++)n[o][s] = new tL, r[o][s] = new tL } for (o = 0; o < i; o++)n[0][o] = new tL, n[0][o].isBlack = !1, n[0][o].isFilled = !1, n[0][o].isPdp = !1, r[0][o] = new tL, r[0][o].isBlack = !1, r[0][o].isFilled = !1, r[0][o].isPdp = !1; for (o = e; o < t - e; o++) { n[o][0] = new tL, n[o][0].isBlack = !1, n[o][0].isFilled = !1, n[o][0].isPdp = !1, r[o][0] = new tL, r[o][0].isBlack = !1, r[o][0].isFilled = !1, r[o][0].isPdp = !1; for (s = e; s < i - e; s++)n[o][s] = this.mModuleValue[o - e][s - e], r[o][s] = this.mDataAllocationValues[o - e][s - e]; n[o][i - e] = new tL, n[o][i - e].isBlack = !1, n[o][i - e].isFilled = !1, n[o][i - e].isPdp = !1, r[o][i - e] = new tL, r[o][i - e].isBlack = !1, r[o][i - e].isFilled = !1, r[o][i - e].isPdp = !1 } for (o = 0; o < i; o++)n[t - e][o] = new tL, n[t - e][o].isBlack = !1, n[t - e][o].isFilled = !1, n[t - e][o].isPdp = !1, r[t - e][o] = new tL, r[t - e][o].isBlack = !1, r[t - e][o].isFilled = !1, r[t - e][o].isPdp = !1; this.mModuleValue = n, this.mDataAllocationValues = r }, e.prototype.drawFormatInformation = function () { for (var e = this.mQrBarcodeValues.FormatInformation, t = 0, i = 0; i < 7; i++)6 === i ? this.mModuleValue[i + 1][8].isBlack = 1 === e[t] : this.mModuleValue[i][8].isBlack = 1 === e[t], this.mModuleValue[8][this.mNoOfModules - i - 1].isBlack = 1 === e[t++]; t = 14; for (i = 0; i < 7; i++)6 === i ? this.mModuleValue[8][i + 1].isBlack = 1 === e[t] : this.mModuleValue[8][i].isBlack = 1 === e[t], this.mModuleValue[this.mNoOfModules - i - 1][8].isBlack = 1 === e[t--]; this.mModuleValue[8][8].isBlack = 1 === e[7], this.mModuleValue[8][this.mNoOfModules - 8].isBlack = 1 === e[7] }, e.prototype.dataAllocationAndMasking = function (e) { this.mDataAllocationValues = []; for (var t = 0; t < this.mNoOfModules; t++) { this.mDataAllocationValues.push([0]); for (var i = 0; i < this.mNoOfModules; i++)this.mDataAllocationValues[t][i] = new tL } var n = 0; for (t = this.mNoOfModules - 1; t >= 0; t -= 2) { for (i = this.mNoOfModules - 1; i >= 0; i--)this.mModuleValue[t][i].isFilled && this.mModuleValue[t - 1][i].isFilled || (this.mModuleValue[t][i].isFilled || (n + 1 < e.length && (this.mDataAllocationValues[t][i].isBlack = e[n++]), this.mDataAllocationValues[t][i].isBlack = (t + i) % 3 == 0 ? !!this.mDataAllocationValues[t][i].isBlack : !this.mDataAllocationValues[t][i].isBlack, this.mDataAllocationValues[t][i].isFilled = !0), this.mModuleValue[t - 1][i].isFilled || (n + 1 < e.length && (this.mDataAllocationValues[t - 1][i].isBlack = e[n++]), this.mDataAllocationValues[t - 1][i].isBlack = (t - 1 + i) % 3 == 0 ? !!this.mDataAllocationValues[t - 1][i].isBlack : !this.mDataAllocationValues[t - 1][i].isBlack, this.mDataAllocationValues[t - 1][i].isFilled = !0)); 6 === (t -= 2) && t--; for (var r = 0; r < this.mNoOfModules; r++)this.mModuleValue[t][r].isFilled && this.mModuleValue[t - 1][r].isFilled || (this.mModuleValue[t][r].isFilled || (n + 1 < e.length && (this.mDataAllocationValues[t][r].isBlack = e[n++]), this.mDataAllocationValues[t][r].isBlack = (t + r) % 3 != 0 ? !this.mDataAllocationValues[t][r].isBlack : !!this.mDataAllocationValues[t][r].isBlack, this.mDataAllocationValues[t][r].isFilled = !0), this.mModuleValue[t - 1][r].isFilled || (n + 1 < e.length && (this.mDataAllocationValues[t - 1][r].isBlack = e[n++]), this.mDataAllocationValues[t - 1][r].isBlack = (t - 1 + r) % 3 != 0 ? !this.mDataAllocationValues[t - 1][r].isBlack : !!this.mDataAllocationValues[t - 1][r].isBlack, this.mDataAllocationValues[t - 1][r].isFilled = !0)) } for (t = 0; t < this.mNoOfModules; t++)for (i = 0; i < this.mNoOfModules; i++)if (!this.mModuleValue[t][i].isFilled) { var o = this.mDataAllocationValues[t][i].isBlack; this.mDataAllocationValues[t][i].isBlack = !o } }, e.prototype.allocateFormatAndVersionInformation = function () { for (var e = 0; e < 9; e++)this.mModuleValue[8][e].isFilled = !0, this.mModuleValue[e][8].isFilled = !0; for (e = this.mNoOfModules - 8; e < this.mNoOfModules; e++)this.mModuleValue[8][e].isFilled = !0, this.mModuleValue[e][8].isFilled = !0; if (this.mVersion > 6) { var t = this.mQrBarcodeValues.VersionInformation, i = 0; for (e = 0; e < 6; e++)for (var n = 2; n >= 0; n--)this.mModuleValue[e][this.mNoOfModules - 9 - n].isBlack = 1 === t[i], this.mModuleValue[e][this.mNoOfModules - 9 - n].isFilled = !0, this.mModuleValue[this.mNoOfModules - 9 - n][e].isBlack = 1 === t[i++], this.mModuleValue[this.mNoOfModules - 9 - n][e].isFilled = !0 } }, e.prototype.drawAlignmentPattern = function (e, t) { var i, n; for (i = e - 2, n = t - 2; i < e + 3; i++ , n++)this.mModuleValue[i][t - 2].isBlack = !0, this.mModuleValue[i][t - 2].isFilled = !0, this.mModuleValue[i][t + 2].isBlack = !0, this.mModuleValue[i][t + 2].isFilled = !0, this.mModuleValue[e - 2][n].isBlack = !0, this.mModuleValue[e - 2][n].isFilled = !0, this.mModuleValue[e + 2][n].isBlack = !0, this.mModuleValue[e + 2][n].isFilled = !0; for (i = e - 1, n = t - 1; i < e + 2; i++ , n++)this.mModuleValue[i][t - 1].isBlack = !1, this.mModuleValue[i][t - 1].isFilled = !0, this.mModuleValue[i][t + 1].isBlack = !1, this.mModuleValue[i][t + 1].isFilled = !0, this.mModuleValue[e - 1][n].isBlack = !1, this.mModuleValue[e - 1][n].isFilled = !0, this.mModuleValue[e + 1][n].isBlack = !1, this.mModuleValue[e + 1][n].isFilled = !0; this.mModuleValue[e][t].isBlack = !0, this.mModuleValue[e][t].isFilled = !0 }, e.prototype.getAlignmentPatternCoOrdinates = function () { var e = null; switch (this.mVersion) { case 2: e = [6, 18]; break; case 3: e = [6, 22]; break; case 4: e = [6, 26]; break; case 5: e = [6, 30]; break; case 6: e = [6, 34]; break; case 7: e = [6, 22, 38]; break; case 8: e = [6, 24, 42]; break; case 9: e = [6, 26, 46]; break; case 10: e = [6, 28, 50]; break; case 11: e = [6, 30, 54]; break; case 12: e = [6, 32, 58]; break; case 13: e = [6, 34, 62]; break; case 14: e = [6, 26, 46, 66]; break; case 15: e = [6, 26, 48, 70]; break; case 16: e = [6, 26, 50, 74]; break; case 17: e = [6, 30, 54, 78]; break; case 18: e = [6, 30, 56, 82]; break; case 19: e = [6, 30, 58, 86]; break; case 20: e = [6, 34, 62, 90]; break; case 21: e = [6, 28, 50, 72, 94]; break; case 22: e = [6, 26, 50, 74, 98]; break; case 23: e = [6, 30, 54, 78, 102]; break; case 24: e = [6, 28, 54, 80, 106]; break; case 25: e = [6, 32, 58, 84, 110]; break; case 26: e = [6, 30, 58, 86, 114]; break; case 27: e = [6, 34, 62, 90, 118]; break; case 28: e = [6, 26, 50, 74, 98, 122]; break; case 29: e = [6, 30, 54, 78, 102, 126]; break; case 30: e = [6, 26, 52, 78, 104, 130]; break; case 31: e = [6, 30, 56, 82, 108, 134]; break; case 32: e = [6, 34, 60, 86, 112, 138]; break; case 33: e = [6, 30, 58, 86, 114, 142]; break; case 34: e = [6, 34, 62, 90, 118, 146]; break; case 35: e = [6, 30, 54, 78, 102, 126, 150]; break; case 36: e = [6, 24, 50, 76, 102, 128, 154]; break; case 37: e = [6, 28, 54, 80, 106, 132, 158]; break; case 38: e = [6, 32, 58, 84, 110, 136, 162]; break; case 39: e = [6, 26, 54, 82, 110, 138, 166]; break; case 40: e = [6, 30, 58, 86, 114, 142, 170] }return e }, e.prototype.encodeData = function () { var e = []; switch (this.mInputMode) { case "NumericMode": e.push(!1), e.push(!1), e.push(!1), e.push(!0); break; case "AlphaNumericMode": e.push(!1), e.push(!1), e.push(!0), e.push(!1); break; case "BinaryMode": if (this.mIsEci) { e.push(!1), e.push(!0), e.push(!0), e.push(!0); for (var t = this.stringToBoolArray(this.mEciAssignmentNumber.toString(), 8), i = 0, n = Object.keys(t); i < n.length; i++) { var r = n[i]; e.push(t[r]) } } e.push(!1), e.push(!0), e.push(!1), e.push(!1) }var o = 0; if (this.mVersion < 10) switch (this.mInputMode) { case "NumericMode": o = 10; break; case "AlphaNumericMode": o = 9; break; case "BinaryMode": o = 8 } else if (this.mVersion < 27) switch (this.mInputMode) { case "NumericMode": o = 12; break; case "AlphaNumericMode": o = 11; break; case "BinaryMode": o = 16 } else switch (this.mInputMode) { case "NumericMode": o = 14; break; case "AlphaNumericMode": o = 13; break; case "BinaryMode": o = 16 }for (var s = this.intToBoolArray(this.text.length, o), a = 0; a < o; a++)e.push(s[a]); if ("NumericMode" === this.mInputMode) { var l = this.text.split(""), h = ""; for (a = 0; a < l.length; a++) { t = void 0; if (h += l[a], a % 3 == 2 && 0 !== a || a === l.length - 1) { t = 3 === h.toString().length ? this.stringToBoolArray(h, 10) : 2 === h.toString().length ? this.stringToBoolArray(h, 7) : this.stringToBoolArray(h, 4), h = ""; for (var d = 0, c = Object.keys(t); d < c.length; d++) { r = c[d]; e.push(t[r]) } } } } else if ("AlphaNumericMode" === this.mInputMode) { l = this.text.split(""); var p = ""; for (h = 0, a = 0; a < l.length; a++) { t = void 0; if (p += l[a], a % 2 == 0 && a + 1 !== l.length && (h = 45 * this.mQrBarcodeValues.getAlphaNumericValues(l[a])), a % 2 == 1 && 0 !== a) { h += this.mQrBarcodeValues.getAlphaNumericValues(l[a]), t = this.intToBoolArray(h, 11), h = 0; for (var u = 0, g = Object.keys(t); u < g.length; u++) { r = g[u]; e.push(t[r]) } p = null } if (1 !== a && null !== p && a + 1 === l.length && 1 === p.length) { h = this.mQrBarcodeValues.getAlphaNumericValues(l[a]), t = this.intToBoolArray(h, 6), h = 0; for (var m = 0, f = Object.keys(t); m < f.length; m++) { r = f[m]; e.push(t[r]) } } } } else if ("BinaryMode" === this.mInputMode) for (l = this.text.split(""), a = 0; a < l.length; a++) { h = 0; this.text.charCodeAt(a) >= 32 && this.text.charCodeAt(a) <= 126 || this.text.charCodeAt(a) >= 161 && this.text.charCodeAt(a) <= 255 || 10 === this.text.charCodeAt(a) || 13 === this.text.charCodeAt(a) ? h = l[a].charCodeAt(0) : this.text.charCodeAt(a) >= 65377 && this.text.charCodeAt(a) <= 65439 ? h = l[a].charCodeAt(0) - 65216 : this.text.charCodeAt(a) >= 1025 && this.text.charCodeAt(a) <= 1119 ? h = l[a].charCodeAt(0) - 864 : this.text.charCodeAt(a) >= 260 && this.text.charCodeAt(a) <= 382 || (this.validInput = !1); t = this.intToBoolArray(h, 8); for (var y = 0, v = Object.keys(t); y < v.length; y++) { r = v[y]; e.push(t[r]) } } if (0 === this.mixDataCount) { for (a = 0; a < 4 && e.length / 8 !== this.mQrBarcodeValues.NumberOfDataCodeWord; a++)e.push(!1); for (; e.length % 8 != 0;)e.push(!1); for (; e.length / 8 !== this.mQrBarcodeValues.NumberOfDataCodeWord && (e.push(!0), e.push(!0), e.push(!0), e.push(!1), e.push(!0), e.push(!0), e.push(!1), e.push(!1), e.length / 8 !== this.mQrBarcodeValues.NumberOfDataCodeWord);)e.push(!1), e.push(!1), e.push(!1), e.push(!0), e.push(!1), e.push(!1), e.push(!1), e.push(!0); var w = this.mQrBarcodeValues.NumberOfDataCodeWord, b = this.mQrBarcodeValues.NumberOfErrorCorrectionBlocks, C = b[0]; 6 === b.length && (C = b[0] + b[3]); var L = [], M = e; if (6 === b.length) { var S = b[0] * b[2] * 8; M = []; for (a = 0; a < S; a++)M.push(e[a]) } var x = []; x = this.createBlocks(M, b[0]); for (a = 0; a < b[0]; a++)L[a] = this.splitCodeWord(x, a, M.length / 8 / b[0]); if (6 === b.length) { M = []; for (a = b[0] * b[2] * 8; a < e.length; a++)M.push(e[a]); var T = []; T = this.createBlocks(M, b[3]); a = b[0]; for (var D = 0; a < C; a++)L[a] = this.splitCodeWord(T, D++, M.length / 8 / b[3]) } e = null, e = []; for (a = 0; a < 125; a++)for (var A = 0; A < C; A++)for (var E = 0; E < 8; E++)a < L[A].length && e.push("1" === L[A][a][E]); var j = new $C(this.mVersion, this.mErrorCorrectionLevel); w = this.mQrBarcodeValues.NumberOfDataCodeWord; var I = this.mQrBarcodeValues.NumberOfErrorCorrectingCodeWords; 6 === (b = this.mQrBarcodeValues.NumberOfErrorCorrectionBlocks).length ? j.DataBits = (w - b[3] * b[5]) / b[0] : j.DataBits = w / b[0], j.Eccw = I / C; var k = [], P = 0; for (a = 0; a < b[0]; a++)j.DC = L[P], k[P++] = j.getErcw(); if (6 === b.length) { j.DataBits = (w - b[0] * b[2]) / b[3]; for (a = 0; a < b[3]; a++)j.DC = L[P], k[P++] = j.getErcw() } if (6 !== b.length) for (a = 0; a < k[0].length; a++)for (A = 0; A < b[0]; A++)for (E = 0; E < 8; E++)a < k[A].length && e.push("1" === k[A][a][E]); else for (a = 0; a < k[0].length; a++)for (A = 0; A < C; A++)for (E = 0; E < 8; E++)a < k[A].length && e.push("1" === k[A][a][E]) } return e }, e.prototype.stringToBoolArray = function (e, t) { for (var i = [], n = e.split(""), r = 0, o = 0; o < n.length; o++)r = 10 * r + n[o].charCodeAt(0) - 48; for (o = 0; o < t; o++)i[t - o - 1] = 1 == (r >> o & 1); return i }, e.prototype.intToBoolArray = function (e, t) { for (var i = [], n = 0; n < t; n++)i[t - n - 1] = 1 == (e >> n & 1); return i }, e.prototype.splitCodeWord = function (e, t, i) { for (var n = [], r = 0; r < i; r++)n.push(e[t][r]); return n }, e.prototype.createBlocks = function (e, t) { for (var i = [], n = e.length / 8 / t, r = "", o = 0, s = 0, a = 0; a < t; a++) { i.push([0]); for (var l = 0; l < n; l++)i[a][l] = "" } for (l = 0; l < e.length; l++)l % 8 == 0 && 0 !== l && (i[s][o] = r, r = "", ++o === e.length / t / 8 && (s++ , o = 0)), r += e[l] ? "1" : "0"; return i[s][o] = r, i }, e }(), tL = function () { return function () { this.isBlack = !1, this.isFilled = !1, this.isPdp = !1 } }(), iL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), nL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, rL = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.widthChange = !1, n.heightChange = !1, n } return iL(t, e), t.prototype.render = function () { this.notify("initial-load", {}), this.trigger("load"), this.notify("initial-end", {}), this.renderElements() }, t.prototype.triggerEvent = function (e, t) { var i = { message: t }; this.trigger($w[e], i) }, t.prototype.renderElements = function () { var e = new eL; e.text = this.value, e.XDimension = this.xDimension, e.mIsUserMentionedErrorCorrectionLevel = void 0 !== this.errorCorrectionLevel, e.mErrorCorrectionLevel = void 0 !== this.errorCorrectionLevel ? this.errorCorrectionLevel : Fb.Medium, e.version = void 0 !== this.version ? this.version : void 0, e.mIsUserMentionedVersion = void 0 !== this.version; var t = "SVG" === this.mode; if (!e.draw(this.value, this.barcodeCanvas, this.element.offsetHeight, this.element.offsetWidth, this.margin, this.displayText, t, this.foreColor)) { this.triggerEvent($w.invalid, "Invalid Input") } }, t.prototype.setCulture = function () { this.localeObj = new pb(this.getModuleName(), this.defaultLocale, this.locale) }, t.prototype.getElementSize = function (e, t) { return e.toString().indexOf("px") > 0 || e.toString().indexOf("%") > 0 ? e.toString() : e.toString() + "px" }, t.prototype.initialize = function () { this.element.style.height = this.getElementSize(this.height), this.element.style.width = this.getElementSize(this.width), this.barcodeCanvas = this.barcodeRenderer.renderRootElement({ id: this.element.id, height: "SVG" === this.mode ? this.element.offsetHeight : 1.5 * this.element.offsetHeight, width: "SVG" === this.mode ? this.element.offsetWidth : 1.5 * this.element.offsetWidth }, this.backgroundColor, this.element.offsetWidth, this.element.offsetHeight), this.element.appendChild(this.barcodeCanvas) }, t.prototype.preRender = function () { this.barcodeRenderer = new rC(this.element.id, "SVG" === this.mode), this.initialize(), this.initializePrivateVariables(), this.setCulture(), this.element.classList.add("e-qrcode") }, t.prototype.getPersistData = function () { return this.addOnPersist(["loaded"]) }, t.prototype.getModuleName = function () { return "QRCodeGenerator" }, t.prototype.destroy = function () { this.notify("destroy", {}), e.prototype.destroy.call(this) }, t.prototype.initializePrivateVariables = function () { this.defaultLocale = {} }, t.prototype.onPropertyChanged = function (e, t) { var i, n; "Canvas" === this.mode && "Canvas" !== e.mode ? Le(this, this.barcodeCanvas) : this.barcodeRenderer = be(e, this.barcodeCanvas, this.mode, this.element.id), e.width && ("Canvas" === this.mode && "Canvas" !== e.mode && (this.widthChange = !0), i = "Canvas" === this.mode && "Canvas" !== e.mode ? 1.5 * e.width : e.width, this.barcodeCanvas.setAttribute("width", String(i))), e.height && ("Canvas" === this.mode && "Canvas" !== e.mode && (this.heightChange = !0), n = "Canvas" === this.mode && "Canvas" !== e.mode ? 1.5 * e.height : e.height, this.barcodeCanvas.setAttribute("height", String(n))); for (var r = 0, o = Object.keys(e); r < o.length; r++) { switch (o[r]) { case "width": this.element.style.width = this.getElementSize(i), this.barcodeCanvas.setAttribute("width", String(this.element.offsetWidth)); break; case "height": this.element.style.height = this.getElementSize(n), this.barcodeCanvas.setAttribute("height", String(this.element.offsetHeight)); break; case "backgroundColor": this.barcodeCanvas.setAttribute("style", "background:" + e.backgroundColor); break; case "mode": this.initialize() } } this.renderElements() }, nL([Y("100%")], t.prototype, "height", void 0), nL([Y("100%")], t.prototype, "width", void 0), nL([Y("SVG")], t.prototype, "mode", void 0), nL([Y(1)], t.prototype, "xDimension", void 0), nL([Y()], t.prototype, "errorCorrectionLevel", void 0), nL([U({}, yC)], t.prototype, "margin", void 0), nL([Y("white")], t.prototype, "backgroundColor", void 0), nL([X()], t.prototype, "invalid", void 0), nL([Y("black")], t.prototype, "foreColor", void 0), nL([U({}, bC)], t.prototype, "displayText", void 0), nL([Y()], t.prototype, "version", void 0), nL([Y(void 0)], t.prototype, "value", void 0), t }(Kw), oL = function () { function e() { this.mXDimension = 1, this.mDataMatrixArray = [] } return Object.defineProperty(e.prototype, "XDimension", { set: function (e) { this.mXDimension = e }, enumerable: !0, configurable: !0 }), e.prototype.GetData = function () { for (var e = this.value, t = [], i = 0; i < e.length; i++)t.push(e.charCodeAt(i)); return t }, e.prototype.fillZero = function (e) { for (var t = 0; t < e.length; t++)e[t] = 0; return e }, e.prototype.DataMatrixNumericEncoder = function (e) { var t = e, i = !0; t.length % 2 == 1 && (i = !1, t = Array(e.length + 1), t = this.fillZero(t), t = this.copy(e, 0, t, 0, e.length)); var n = Array(t.length / 2); n = this.fillZero(n); for (var r = 0; r < n.length; r++)i || r !== n.length - 1 ? n[r] = 10 * (t[2 * r] - 48) + (t[2 * r + 1] - 48) + 130 : n[r] = t[2 * r] + 1; return n }, e.prototype.ComputeBase256Codeword = function (e, t) { var i = e + (149 * (t + 1) % 255 + 1); return i <= 255 ? i : i - 256 }, e.prototype.DataMatrixBaseEncoder = function (e) { var t = 1; e.length > 249 && t++; var i = Array(1 + t + e.length); (i = this.fillZero(i))[0] = 231, e.length <= 249 ? i[1] = e.length : (i[1] = e.length / 250 + 249, i[2] = e.length % 250), i = this.copy(e, 0, i, 1 + t, e.length); for (var n = 1; n < i.length; n++)i[n] = this.ComputeBase256Codeword(i[n], n); return i }, e.prototype.copy = function (e, t, i, n, r) { for (var o = 0; o < r; o++)i[n + o] = e[t + o]; return i }, e.prototype.DataMatrixEncoder = function (e) { for (var t = e, i = 0, n = 0; n < e.length; n++)if (e[n] >= 48 && e[n] <= 57) { var r = 0; 0 !== n && (r = i - 1); var o = t[r] - 1, s = 0; 0 !== n && 1 !== i && (s = t[r - 1]), 235 !== s && o >= 48 && o <= 57 ? t[r] = 10 * (o - 0) + (e[n] - 0) + 130 : t[i++] = e[n] + 1 } else e[n] < 127 ? t[i++] = e[n] + 1 : (t[i] = 235, t[i++] = e[n] - 127); var a = Array(i); return a = this.fillZero(a), a = t }, e.prototype.PrepareDataCodeword = function (e) { if ("Auto" === this.encodingValue || "ASCIINumeric" === this.encodingValue) { for (var t = !0, i = e, n = "ASCII", r = 0; r < i.length; r++)(i[r] < 48 || i[r] > 57) && (t = !1); if (t && (n = "ASCIINumeric"), "ASCIINumeric" === this.encodingValue && this.encodingValue !== n) return "Data contains invalid characters and cannot be encoded as ASCIINumeric."; this.encodingValue = n } var o = []; switch (this.encodingValue) { case "ASCII": o = this.DataMatrixEncoder(e); break; case "ASCIINumeric": o = this.DataMatrixNumericEncoder(e); break; case "Base256": o = this.DataMatrixBaseEncoder(e) }return o }, e.prototype.PdfDataMatrixSymbolAttribute = function (e, t, i, n, r, o, s, a) { return { SymbolRow: e, SymbolColumn: t, HorizontalDataRegion: i, VerticalDataRegion: n, DataCodewords: r, CorrectionCodewords: o, InterleavedBlock: s, InterleavedDataBlock: a } }, e.prototype.getmSymbolAttributes = function () { var e = []; return e.push(this.PdfDataMatrixSymbolAttribute(10, 10, 1, 1, 3, 5, 1, 3)), e.push(this.PdfDataMatrixSymbolAttribute(12, 12, 1, 1, 5, 7, 1, 5)), e.push(this.PdfDataMatrixSymbolAttribute(14, 14, 1, 1, 8, 10, 1, 8)), e.push(this.PdfDataMatrixSymbolAttribute(16, 16, 1, 1, 12, 12, 1, 12)), e.push(this.PdfDataMatrixSymbolAttribute(18, 18, 1, 1, 18, 14, 1, 18)), e.push(this.PdfDataMatrixSymbolAttribute(20, 20, 1, 1, 22, 18, 1, 22)), e.push(this.PdfDataMatrixSymbolAttribute(22, 22, 1, 1, 30, 20, 1, 30)), e.push(this.PdfDataMatrixSymbolAttribute(24, 24, 1, 1, 36, 24, 1, 36)), e.push(this.PdfDataMatrixSymbolAttribute(26, 26, 1, 1, 44, 28, 1, 44)), e.push(this.PdfDataMatrixSymbolAttribute(32, 32, 2, 2, 62, 36, 1, 62)), e.push(this.PdfDataMatrixSymbolAttribute(36, 36, 2, 2, 86, 42, 1, 86)), e.push(this.PdfDataMatrixSymbolAttribute(40, 40, 2, 2, 114, 48, 1, 114)), e.push(this.PdfDataMatrixSymbolAttribute(44, 44, 2, 2, 144, 56, 1, 144)), e.push(this.PdfDataMatrixSymbolAttribute(48, 48, 2, 2, 174, 68, 1, 174)), e.push(this.PdfDataMatrixSymbolAttribute(52, 52, 2, 2, 204, 84, 2, 102)), e.push(this.PdfDataMatrixSymbolAttribute(64, 64, 4, 4, 280, 112, 2, 140)), e.push(this.PdfDataMatrixSymbolAttribute(72, 72, 4, 4, 368, 144, 4, 92)), e.push(this.PdfDataMatrixSymbolAttribute(80, 80, 4, 4, 456, 192, 4, 114)), e.push(this.PdfDataMatrixSymbolAttribute(88, 88, 4, 4, 576, 224, 4, 144)), e.push(this.PdfDataMatrixSymbolAttribute(96, 96, 4, 4, 696, 272, 4, 174)), e.push(this.PdfDataMatrixSymbolAttribute(104, 104, 4, 4, 816, 336, 6, 136)), e.push(this.PdfDataMatrixSymbolAttribute(120, 120, 6, 6, 1050, 408, 6, 175)), e.push(this.PdfDataMatrixSymbolAttribute(132, 132, 6, 6, 1304, 496, 8, 163)), e.push(this.PdfDataMatrixSymbolAttribute(144, 144, 6, 6, 1558, 620, 10, 156)), e.push(this.PdfDataMatrixSymbolAttribute(8, 18, 1, 1, 5, 7, 1, 5)), e.push(this.PdfDataMatrixSymbolAttribute(8, 32, 2, 1, 10, 11, 1, 10)), e.push(this.PdfDataMatrixSymbolAttribute(12, 26, 1, 1, 16, 14, 1, 16)), e.push(this.PdfDataMatrixSymbolAttribute(12, 36, 2, 1, 22, 18, 1, 22)), e.push(this.PdfDataMatrixSymbolAttribute(16, 36, 2, 1, 32, 24, 1, 32)), e.push(this.PdfDataMatrixSymbolAttribute(16, 48, 2, 1, 49, 28, 1, 49)), e }, e.prototype.PadCodewords = function (e, t, i) { for (var n = t.length, r = [], o = 0; o < n; o++)r.push(t[o]); for (n < e && r.push(129), n = r.length; n < e;) { var s = 129 + 149 * (n + 1) % 253 + 1; s > 254 && (s -= 254), r.push(s), n = r.length } return Array(r.length), r }, e.prototype.EccProduct = function (e, t) { if (0 === e || 0 === t) return 0; var i = Array(256); i = this.CreateLogArrays(!0); Array(256); return this.CreateLogArrays(!1)[(i[e] + i[t]) % 255] }, e.prototype.validateInput = function (e, t) { return e }, e.prototype.ComputeErrorCorrection = function () { var e = this.encodedCodeword.length; this.mSymbolAttribute = this.PdfDataMatrixSymbolAttribute(0, 0, 0, 0, 0, 0, 0, 0); var t = this.getmSymbolAttributes(); if (this.size) this.mSymbolAttribute = t[this.size - 1]; else { t = this.getmSymbolAttributes(); for (var i = 0; i < t.length; i++) { var n = t[i]; if (n.DataCodewords >= e) { this.mSymbolAttribute = n; break } } } var r; if (this.mSymbolAttribute.DataCodewords > e) r = this.PadCodewords(this.mSymbolAttribute.DataCodewords, this.encodedCodeword, r), this.encodedCodeword = Array(r.length), this.encodedCodeword = r, e = this.encodedCodeword.length; else { if (0 === this.mSymbolAttribute.DataCodewords) return this.validateInput("Data cannot be encoded as barcode", void 0); if (this.mSymbolAttribute.DataCodewords < e) { this.mSymbolAttribute.SymbolRow.toString(), this.mSymbolAttribute.SymbolColumn.toString(); return "Data too long for {0}x{1} barcode." } } var o = this.mSymbolAttribute.CorrectionCodewords, s = []; s = this.create1DMatrixArray(o + this.mSymbolAttribute.DataCodewords, s); var a = this.mSymbolAttribute.InterleavedBlock, l = this.mSymbolAttribute.DataCodewords, h = this.mSymbolAttribute.CorrectionCodewords / a, d = l + h * a, c = this.CreateRSPolynomial(a, this.mSymbolAttribute), p = []; p = this.create1DMatrixArray(68, p); for (var u = 0; u < a; u++) { for (var g = 0; g < p.length; g++)p[g] = 0; for (i = u; i < l; i += a) { for (var m = this.EccSum(p[h - 1], this.encodedCodeword[i]), f = h - 1; f > 0; f--)p[f] = this.EccSum(p[f - 1], this.EccProduct(c[f], m)); p[0] = this.EccProduct(c[0], m) } if (u >= 8 && this.size & zb.Size144x144) this.mSymbolAttribute.DataCodewords / a; else { var y = h; for (i = u + a * this.mSymbolAttribute.InterleavedDataBlock; i < d; i += a)s[i] = p[--y]; if (0 !== y) return "Error in error correction code generation!" } } if (s.length > o) { var v = s; s = [], s = this.create1DMatrixArray(o, s); var w = 0; for (i = v.length - 1; i > this.mSymbolAttribute.DataCodewords; i--)s[w++] = v[i] } return s.reverse() }, e.prototype.CreateLogArrays = function (e) { var t = Array(256), i = Array(256); t[0] = -255, i[0] = 1; for (var n = 1; n <= 255; n++)i[n] = 2 * i[n - 1], i[n] >= 256 && (i[n] = 301 ^ i[n]), t[i[n]] = n; return e ? t : i }, e.prototype.EccSum = function (e, t) { return e ^ t }, e.prototype.EccDoublify = function (e, t) { if (0 === e) return 0; if (0 === t) return e; var i = Array(256); i = this.CreateLogArrays(!0); Array(256); return this.CreateLogArrays(!1)[(i[e] + t) % 255] }, e.prototype.CreateRSPolynomial = function (e, t) { for (var i = Array(69), n = t.CorrectionCodewords / e, r = 0; r < i.length; r++)i[r] = 1; for (r = 1; r <= n; r++)for (var o = r - 1; o >= 0; o--)i[o] = this.EccDoublify(i[o], r), o > 0 && (i[o] = this.EccSum(i[o], i[o - 1])); return i }, e.prototype.PrepareCodeword = function (e) { if (this.encodedCodeword = this.PrepareDataCodeword(e), isNaN(this.encodedCodeword[0])) return this.encodedCodeword; var t = this.ComputeErrorCorrection(); if (isNaN(t[0])) return t; this.encodedCodeword = this.encodedCodeword; var i = Array(this.encodedCodeword.length + t.length); return this.copyArray(i, 0, this.encodedCodeword), this.copyArray(i, this.encodedCodeword.length, t), i }, e.prototype.copyArray = function (e, t, i) { for (var n = 0; n < i.length; n++)e[t + n] = i[n] }, e.prototype.ecc200placementbit = function (e, t, i, n, r, o, s) { n < 0 && (n += t, r += 4 - (t + 4) % 8), r < 0 && (r += i, n += 4 - (i + 4) % 8), e[n * i + r] = (o << 3) + s }, e.prototype.ecc200placementblock = function (e, t, i, n, r, o) { this.ecc200placementbit(e, t, i, n - 2, r - 2, o, 7), this.ecc200placementbit(e, t, i, n - 2, r - 1, o, 6), this.ecc200placementbit(e, t, i, n - 1, r - 2, o, 5), this.ecc200placementbit(e, t, i, n - 1, r - 1, o, 4), this.ecc200placementbit(e, t, i, n - 1, r - 0, o, 3), this.ecc200placementbit(e, t, i, n - 0, r - 2, o, 2), this.ecc200placementbit(e, t, i, n - 0, r - 1, o, 1), this.ecc200placementbit(e, t, i, n - 0, r - 0, o, 0) }, e.prototype.ecc200placementcornerD = function (e, t, i, n) { this.ecc200placementbit(e, t, i, t - 1, 0, n, 7), this.ecc200placementbit(e, t, i, t - 1, i - 1, n, 6), this.ecc200placementbit(e, t, i, 0, i - 3, n, 5), this.ecc200placementbit(e, t, i, 0, i - 2, n, 4), this.ecc200placementbit(e, t, i, 0, i - 1, n, 3), this.ecc200placementbit(e, t, i, 1, i - 3, n, 2), this.ecc200placementbit(e, t, i, 1, i - 2, n, 1), this.ecc200placementbit(e, t, i, 1, i - 1, n, 0) }, e.prototype.ecc200placementcornerA = function (e, t, i, n) { this.ecc200placementbit(e, t, i, t - 1, 0, n, 7), this.ecc200placementbit(e, t, i, t - 1, 1, n, 6), this.ecc200placementbit(e, t, i, t - 1, 2, n, 5); this.ecc200placementbit(e, t, i, 0, i - 2, n, 4), this.ecc200placementbit(e, t, i, 0, i - 1, n, 3); this.ecc200placementbit(e, t, i, 1, i - 1, n, 2), this.ecc200placementbit(e, t, i, 2, i - 1, n, 1), this.ecc200placementbit(e, t, i, 3, i - 1, n, 0) }, e.prototype.ecc200placementcornerB = function (e, t, i, n) { this.ecc200placementbit(e, t, i, t - 3, 0, n, 7), this.ecc200placementbit(e, t, i, t - 2, 0, n, 6), this.ecc200placementbit(e, t, i, t - 1, 0, n, 5), this.ecc200placementbit(e, t, i, 0, i - 4, n, 4), this.ecc200placementbit(e, t, i, 0, i - 3, n, 3), this.ecc200placementbit(e, t, i, 0, i - 2, n, 2), this.ecc200placementbit(e, t, i, 0, i - 1, n, 1), this.ecc200placementbit(e, t, i, 1, i - 1, n, 0) }, e.prototype.ecc200placementcornerC = function (e, t, i, n) { this.ecc200placementbit(e, t, i, t - 3, 0, n, 7), this.ecc200placementbit(e, t, i, t - 2, 0, n, 6), this.ecc200placementbit(e, t, i, t - 1, 0, n, 5), this.ecc200placementbit(e, t, i, 0, i - 2, n, 4), this.ecc200placementbit(e, t, i, 0, i - 1, n, 3), this.ecc200placementbit(e, t, i, 1, i - 1, n, 2), this.ecc200placementbit(e, t, i, 2, i - 1, n, 1), this.ecc200placementbit(e, t, i, 3, i - 1, n, 0) }, e.prototype.ecc200placement = function (e, t, i) { for (var n, r, o, s = 0; s < t; s++)for (var a = 0; a < i; a++)e[s * i + a] = 0; o = 1, n = 4, r = 0; do { n === t && 0 === r && this.ecc200placementcornerA(e, t, i, o++), n === t - 2 && 0 === r && i % 4 != 0 && this.ecc200placementcornerB(e, t, i, o++), n === t - 2 && 0 === r && i % 8 == 4 && this.ecc200placementcornerC(e, t, i, o++), n === t + 4 && 2 === r && i % 8 == 0 && this.ecc200placementcornerD(e, t, i, o++); do { n < t && r >= 0 && 0 === e[n * i + r] && this.ecc200placementblock(e, t, i, n, r, o++), n -= 2, r += 2 } while (n >= 0 && r < i); n++ , r += 3; do { n >= 0 && r < i && 0 === e[n * i + r] && this.ecc200placementblock(e, t, i, n, r, o++), n += 2, r -= 2 } while (n < t && r >= 0); n += 3, r++ } while (n < t || r < i); 0 === e[t * i - 1] && (e[t * i - 1] = e[t * i - i - 2] = 1) }, e.prototype.getActualRows = function () { return this.mSymbolAttribute.SymbolRow + Rb.All }, e.prototype.getActualColumns = function () { return this.mSymbolAttribute.SymbolColumn + Rb.All }, e.prototype.AddQuiteZone = function (e) { this.actualRows = this.getActualRows(), this.actualColumns = this.getActualColumns(); var t = this.actualRows, i = this.actualColumns, n = Rb.All - 1; this.mDataMatrixArray = this.create2DMartixArray(t, i, this.mDataMatrixArray); for (var r = 0; r < i; r++)this.mDataMatrixArray[0][r] = 0; for (r = n; r < t - n; r++) { this.mDataMatrixArray[r][0] = 0; for (var o = n; o < i - n; o++)this.mDataMatrixArray[r][o] = e[r - n][o - n]; this.mDataMatrixArray[r][i - n] = 0 } for (r = 0; r < i; r++)this.mDataMatrixArray[t - n][r] = 0 }, e.prototype.drawImage = function (e, t) { for (var i = this.getInstance(e.id), n = 0; n < t.length; n++)i.renderRectElement(e, t[n]) }, e.prototype.CreateMatrix = function (e) { var t, i, n, r, o, s = this.mSymbolAttribute.SymbolColumn, a = this.mSymbolAttribute.SymbolRow, l = s / this.mSymbolAttribute.HorizontalDataRegion, h = a / this.mSymbolAttribute.VerticalDataRegion; n = s - s / l * 2, r = a - a / h * 2, o = Array(n * r), this.ecc200placement(o, r, n); var d = []; d = this.create1DMatrixArray(s * a, d); for (var c = 0; c < a; c += h) { for (var p = 0; p < s; p++)d[c * s + p] = 1; for (var u = 0; u < s; u += 2)d[(c + h - 1) * s + u] = 1 } for (t = 0; t < s; t += l) { for (i = 0; i < a; i++)d[i * s + t] = 1; for (i = 0; i < a; i += 2)d[i * s + t + l - 1] = 1 } for (var g = 0; g < r; g++)for (var m = 0; m < n; m++) { var f = o[(r - g - 1) * n + m]; (1 === f || f > 7 && 0 != (e[(f >> 3) - 1] & 1 << (7 & f))) && (d[(1 + Math.floor(g) + 2 * Math.floor(Math.floor(g) / Math.floor(h - 2))) * Math.floor(s) + 1 + Math.floor(m) + 2 * Math.floor(Math.floor(m) / Math.floor(l - 2))] = 1) } var y = this.mSymbolAttribute.SymbolColumn, v = this.mSymbolAttribute.SymbolRow, w = []; w = this.create2DMartixArray(y, v, w); for (var b = 0; b < y; b++)for (var C = 0; C < v; C++)w[b][C] = d[y * C + b]; var L = []; L = this.create2DMartixArray(y, v, L); for (var M = 0; M < v; M++)for (var S = 0; S < y; S++)L[v - 1 - M][S] = w[S][M]; this.AddQuiteZone(L) }, e.prototype.create1DMatrixArray = function (e, t) { for (var i = 0; i < e; i++)t[i] = 0; return t }, e.prototype.create2DMartixArray = function (e, t, i) { for (var n = 0; n < e; n++) { i.push([n]); for (var r = 0; r < t; r++)i[n][r] = 0 } return i }, e.prototype.BuildDataMatrix = function () { var e = []; return e = this.PrepareCodeword(this.GetData()), isNaN(e[0]) ? e : (this.CreateMatrix(e), this.mDataMatrixArray[0]) }, e.prototype.drawText = function (e, t) { this.getInstance(e.id).renderTextElement(e, t) }, e.prototype.getInstance = function (e) { var t = document.getElementById(e); return new rC(t.id, this.isSvgMode) }, e.prototype.drawDisplayText = function (e, t, i, n, r, o, s) { var a = this.displayText; we(); var l = Ce(n, r, t, i, "black"); l.string = a.text ? a.text : this.value, l.fontStyle = a.font, l.color = s, l.stringSize = a.size, l.visibility = a.visibility; var h = fe(l); this.isSvgMode || (h = { width: h.width * o, height: h.height * o }); var d = h.height / 2 + (this.isSvgMode ? 2 : 3); return l.height = d, n > h.width && ("Center" === this.displayText.alignment ? l.x += (t + n - t) / 2 - .5 * h.width : "Left" === this.displayText.alignment ? l.x = t + this.displayText.margin.left : l.x = this.width - this.margin.left - h.width - this.displayText.margin.right), l.x < t && (l.x = t), "Bottom" === this.displayText.position ? (this.displayText.margin.top > 0 && (l.y = i + r), this.displayText.margin.bottom > 0 ? l.y = i + r - a.margin.bottom : this.margin.top < 10 ? l.y = r + h.height / 2 : l.y = r + this.margin.top) : this.displayText.margin.top > 0 ? l.y = i + this.displayText.margin.top + h.height / 2 : l.y = i + h.height / 2, this.displayText.visibility && (this.isSvgMode || (l.stringSize = 1.5 * l.stringSize), this.drawText(e, l)), l }, e.prototype.getDrawableSize = function (e, t, i) { return t >= i ? i : t }, e.prototype.draw = function (e) { var t, i, n = this.isSvgMode, r = this.size < 25, o = this.mDataMatrixArray.length, s = this.width, a = this.height, l = this.margin.left, h = this.margin.right, d = this.margin.top, c = this.margin.bottom, p = s - ((n ? l : 1.5 * l) + (n ? h : 1.5 * h)), u = a - ((n ? d : 1.5 * d) + (n ? c : 1.5 * c)), g = this.getDrawableSize(this.margin, p, u), m = (p - (g = p >= u ? u : p)) / 2, f = (u - g) / 2; f += n ? this.margin.top : 1.5 * this.margin.top, m += n ? this.margin.left : 1.5 * this.margin.left; var y = this.drawDisplayText(e, m, f, g, u, 1.5, this.foreColor); u -= y.height, this.displayText.margin.bottom > 0 && ("Top" === this.displayText.position ? (f += this.displayText.margin.bottom, u -= this.displayText.margin.bottom) : u -= this.displayText.margin.bottom), this.displayText.margin.top > 0 && ("Top" === this.displayText.position ? (f += this.displayText.margin.top, u -= this.displayText.margin.top) : u -= this.displayText.margin.top), g = p >= u ? u : p, r || (t = g / this.mDataMatrixArray[0].length, i = g / this.mDataMatrixArray.length), o = g / this.mDataMatrixArray.length; for (var v, w = this.actualRows, b = this.actualColumns, C = [], L = 0; L < w; L++) { for (var M = 0; M < b; M++) { var S = void 0; "white" !== (S = 1 === this.mDataMatrixArray[L][M] ? this.foreColor : "white") && (v = Ce(r ? o : t, r ? o : i, m, "Bottom" === this.displayText.position ? f : f + y.height / 2, S), C.push(v)), m += r ? o : t } f += r ? o : i, m = (p - g) / 2 + (n ? this.margin.left : 1.5 * this.margin.left) } this.drawImage(e, C), this.mDataMatrixArray = void 0 }, e }(), sL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), aL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, lL = function (e) { function t(t, i) { return e.call(this, t, i) || this } return sL(t, e), t.prototype.destroy = function () { this.notify("destroy", {}), e.prototype.destroy.call(this) }, t.prototype.initializePrivateVariables = function () { this.defaultLocale = {} }, t.prototype.getPersistData = function () { return this.addOnPersist(["loaded"]) }, t.prototype.getModuleName = function () { return "DataMatrixGenerator" }, t.prototype.setCulture = function () { this.localeObj = new pb(this.getModuleName(), this.defaultLocale, this.locale) }, t.prototype.getElementSize = function (e, t) { return e.toString().indexOf("px") > 0 || e.toString().indexOf("%") > 0 ? e.toString() : e.toString() + "px" }, t.prototype.initialize = function () { this.element.style.width = this.getElementSize(this.width), this.element.style.height = this.getElementSize(this.height); var e = this.mode; this.barcodeCanvas = this.barcodeRenderer.renderRootElement({ id: this.element.id, height: "SVG" === e ? this.element.offsetHeight : 1.5 * this.element.offsetHeight, width: "SVG" === e ? this.element.offsetWidth : 1.5 * this.element.offsetWidth }, this.backgroundColor, this.element.offsetWidth, this.element.offsetHeight), this.element.appendChild(this.barcodeCanvas) }, t.prototype.triggerEvent = function (e, t) { var i = { message: t }; this.trigger($w[e], i) }, t.prototype.preRender = function () { this.barcodeRenderer = new rC(this.element.id, "SVG" === this.mode), this.initialize(), this.initializePrivateVariables(), this.setCulture(), this.element.classList.add("e-datamatrix") }, t.prototype.onPropertyChanged = function (e, t) { var i, n; "Canvas" === this.mode && "Canvas" !== e.mode ? Le(this, this.barcodeCanvas) : this.barcodeRenderer = be(e, this.barcodeCanvas, this.mode, this.element.id), e.width && (i = "Canvas" === this.mode && "Canvas" !== e.mode ? 1.5 * e.width : e.width, this.barcodeCanvas.setAttribute("width", String(i))), e.height && (n = "Canvas" === this.mode && "Canvas" !== e.mode ? 1.5 * e.height : e.height, this.barcodeCanvas.setAttribute("height", String(n))); for (var r = 0, o = Object.keys(e); r < o.length; r++) { switch (o[r]) { case "mode": this.initialize(); break; case "height": this.element.style.height = this.getElementSize(n), this.barcodeCanvas.setAttribute("height", String(this.element.offsetHeight)); break; case "width": this.element.style.width = this.getElementSize(i), this.barcodeCanvas.setAttribute("width", String(this.element.offsetWidth)); break; case "backgroundColor": this.barcodeCanvas.setAttribute("style", "background:" + e.backgroundColor) } } this.renderElements() }, t.prototype.checkdata = function (e) { for (var t = !1, i = 0; i < e.length; i++)(e.charCodeAt(i) >= 32 && e.charCodeAt(i) <= 126 || 10 === e.charCodeAt(i) || 13 === e.charCodeAt(i)) && (t = !0); return t }, t.prototype.renderElements = function () { var e = new oL; e.encodingValue = this.encoding, e.size = this.size, e.value = this.value, e.width = this.barcodeCanvas.getAttribute("width"), e.height = this.barcodeCanvas.getAttribute("height"), e.XDimension = this.xDimension, e.isSvgMode = "SVG" === this.mode, e.margin = this.margin, e.displayText = this.displayText, e.foreColor = this.foreColor; var t = this.checkdata(this.value), i = e.BuildDataMatrix(); isNaN(i[0]) ? this.triggerEvent($w.invalid, i) : t ? e.draw(this.barcodeCanvas) : this.triggerEvent($w.invalid, "Invalid input"), "Canvas" === this.mode && (this.barcodeCanvas.style.transform = "scale(" + 2 / 3 + ")", this.barcodeCanvas.style.transformOrigin = "0 0") }, t.prototype.render = function () { this.notify("initial-load", {}), this.trigger("load"), this.notify("initial-end", {}), this.renderElements() }, aL([Y("Auto")], t.prototype, "encoding", void 0), aL([Y(zb.Auto)], t.prototype, "size", void 0), aL([Y("SVG")], t.prototype, "mode", void 0), aL([Y(void 0)], t.prototype, "value", void 0), aL([Y("100%")], t.prototype, "height", void 0), aL([Y("100%")], t.prototype, "width", void 0), aL([U({}, bC)], t.prototype, "displayText", void 0), aL([U({}, yC)], t.prototype, "margin", void 0), aL([Y("white")], t.prototype, "backgroundColor", void 0), aL([X()], t.prototype, "invalid", void 0), aL([Y("black")], t.prototype, "foreColor", void 0), aL([Y(1)], t.prototype, "xDimension", void 0), t }(Kw), hL = Object.freeze({ BarcodeGenerator: GC, BarcodeBase: oC, OneDimension: lC, get BarcodeEvent() { return $w }, get QuietZone() { return Rb }, get DataMatrixSize() { return zb }, get QRCodeVersion() { return Bb }, get ErrorCorrectionLevel() { return Fb }, createHtmlElement: ge, getChildNode: me, measureText: fe, setAttribute: ye, createSvgElement: ve, createMeasureElements: we, Point: JC, Rect: sC, Size: tC, DisplayText: bC, Margin: yC, BarcodeCanvasRenderer: iC, BarcodeRenderer: rC, BarcodeSVGRenderer: ZC, CodaBar: SC, Code128: dC, Code128A: TC, Code128B: pC, Code128C: gC, Code39: LC, Ean8: AC, Ean13: jC, UpcA: NC, UpcE: kC, QRCode: eL, ModuleValue: tL, QRCodeGenerator: rL, PdfQRBarcodeValues: KC, ErrorCorrectionCodewords: $C, DataMatrixGenerator: lL, DataMatrix: oL }), dL = Object.freeze({ Ajax: Zv, Animation: fw, rippleEffect: ee, get isRippleEnabled() { return yw }, enableRipple: function (e) { return yw = e }, Base: iw, getComponent: V, Browser: uw, Component: Kw, ChildProperty: ww, Position: nb, Draggable: rb, Droppable: ab, EventHandler: Kv, onIntlChange: Ww, get rightToLeft() { return Hw }, cldrData: _w, get defaultCulture() { return Yw }, get defaultCurrencyCode() { return Uw }, Internationalization: Gw, setCulture: oe, setCurrencyCode: function (e) { Uw = e, Ww.notify("notifyExternalChange", { currencyCode: Uw }) }, loadCldr: function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; for (var i = 0, n = e; i < n.length; i++) { var r = n[i]; h(_w, r, {}, !0) } }, enableRtl: function (e) { void 0 === e && (e = !0), Hw = e, Ww.notify("notifyExternalChange", { enableRtl: Hw }) }, getNumericObject: se, getNumberDependable: function (e, t) { var i = pw.getDependables(_w, e, "", !0); return pw.getCurrencySymbol(i.numericObject, t) }, getDefaultDateObject: ae, KeyboardEvents: cb, L10n: pb, ModuleLoader: vw, Property: Y, Complex: U, ComplexFactory: q, Collection: G, CollectionFactory: Q, Event: X, NotifyPropertyChanges: J, CreateBuilder: function (e) { var t = function (e) { return this.element = e, this }; return function (i) { return t.prototype.hasOwnProperty("create") || ((t.prototype = K(e)).create = function () { var t = h({}, {}, this.properties); return this.properties = {}, new e(t, this.element) }), new t(i) } }, SwipeSettings: mb, Touch: yb, get HijriParser() { return Dw }, blazorTemplates: Nb, getRandomId: de, compile: ce, updateBlazorTemplate: pe, resetBlazorTemplate: ue, setTemplateEngine: function (e) { Ob.compile = e.compile }, getTemplateEngine: function () { return Ob.compile }, createInstance: t, setImmediate: i, getValue: n, setValue: r, deleteObject: o, isObject: s, getEnumValue: a, merge: l, extend: h, isNullOrUndefined: d, isUndefined: c, getUniqueID: p, debounce: u, queryParams: function (e) { for (var t = [], i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; t.push(encodeURIComponent(r) + "=" + encodeURIComponent("" + e[r])) } return t.join("&") }, isObjectArray: g, compareElementParent: m, throwError: f, print: y, formatUnit: v, isBlazor: w, getElement: b, getInstance: C, addInstance: function (e, t) { var i = "string" == typeof e ? document.querySelector(e) : e; i[Gv] ? i[Gv].push(t) : i[Gv] = [t] }, uniqueID: L, createElement: M, addClass: S, removeClass: x, isVisible: D, prepend: A, append: E, detach: I, remove: k, attributes: P, select: N, selectAll: O, closest: R, siblings: function (e) { for (var t = [], i = 0, n = Array.prototype.slice.call(e.parentNode.childNodes); i < n.length; i++) { var r = n[i]; r.nodeType === Node.ELEMENT_NODE && e !== r && t.push(r) } return t }, getAttributeOrDefault: function (e, t, i) { var n = e.getAttribute(t); return d(n) && (e.setAttribute(t, i.toString()), n = i), n }, setStyleAttribute: z, classList: B, matches: F, Observer: ew }), cL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, uL = "e-rtl", gL = "e-btn", mL = "e-primary", fL = "e-icon-btn", yL = function (e) { function t(t, i) { return e.call(this, t, i) || this } return cL(t, e), t.prototype.preRender = function () { }, t.prototype.render = function () { this.initialize() }, t.prototype.initialize = function () { this.cssClass && S([this.element], this.cssClass.split(" ")), this.isPrimary && this.element.classList.add(mL), this.content && (this.element.innerHTML = this.content), this.setIconCss(), this.enableRtl && this.element.classList.add(uL), this.disabled ? this.controlStatus(this.disabled) : this.wireEvents(), this.removeRippleEffect = ee(this.element, { selector: "." + gL }) }, t.prototype.controlStatus = function (e) { this.element.disabled = e }, t.prototype.setIconCss = function () { if (this.iconCss) { var e = this.createElement("span", { className: "e-btn-icon " + this.iconCss }); this.element.textContent.trim() ? (e.classList.add("e-icon-" + this.iconPosition.toLowerCase()), "Top" !== this.iconPosition && "Bottom" !== this.iconPosition || this.element.classList.add("e-" + this.iconPosition.toLowerCase() + "-icon-btn")) : this.element.classList.add(fL); var t = this.element.childNodes[0]; !t || "Left" !== this.iconPosition && "Top" !== this.iconPosition ? this.element.appendChild(e) : this.element.insertBefore(e, t) } }, t.prototype.wireEvents = function () { this.isToggle && Kv.add(this.element, "click", this.btnClickHandler, this) }, t.prototype.unWireEvents = function () { this.isToggle && Kv.remove(this.element, "click", this.btnClickHandler) }, t.prototype.btnClickHandler = function () { this.element.classList.contains("e-active") ? this.element.classList.remove("e-active") : this.element.classList.add("e-active") }, t.prototype.destroy = function () { var t, i = [mL, uL, fL, "e-success", "e-info", "e-danger", "e-warning", "e-flat", "e-outline", "e-small", "e-bigger", "e-active", "e-round", "e-top-icon-btn", "e-bottom-icon-btn"]; this.cssClass && (i = i.concat(this.cssClass.split(" "))), e.prototype.destroy.call(this), x([this.element], i), this.element.getAttribute("class") || this.element.removeAttribute("class"), this.disabled && this.element.removeAttribute("disabled"), this.content && (this.element.innerHTML = this.element.innerHTML.replace(this.content, "")), (t = this.element.querySelector("span.e-btn-icon")) && I(t), this.unWireEvents(), this.removeRippleEffect() }, t.prototype.getModuleName = function () { return "btn" }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.Inject = function () { }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "isPrimary": e.isPrimary ? this.element.classList.add(mL) : this.element.classList.remove(mL); break; case "disabled": this.controlStatus(e.disabled), this.unWireEvents(); break; case "iconCss": var r = this.element.querySelector("span.e-btn-icon"); r ? e.iconCss ? (r.className = "e-btn-icon " + e.iconCss, this.element.textContent.trim() && ("Left" === this.iconPosition ? r.classList.add("e-icon-left") : r.classList.add("e-icon-right"))) : I(r) : this.setIconCss(); break; case "iconPosition": x([this.element], ["e-top-icon-btn", "e-bottom-icon-btn"]), (r = this.element.querySelector("span.e-btn-icon")) && I(r), this.setIconCss(); break; case "cssClass": t.cssClass && x([this.element], t.cssClass.split(" ")), e.cssClass && S([this.element], e.cssClass.split(" ")); break; case "enableRtl": e.enableRtl ? this.element.classList.add(uL) : this.element.classList.remove(uL); break; case "content": Se(this.element) || this.element.classList.remove(fL), this.element.innerHTML = e.content, this.setIconCss(); break; case "isToggle": e.isToggle ? Kv.add(this.element, "click", this.btnClickHandler, this) : (Kv.remove(this.element, "click", this.btnClickHandler), x([this.element], ["e-active"])) } } }, t.prototype.click = function () { this.element.click() }, t.prototype.focusIn = function () { this.element.focus() }, pL([Y("Left")], t.prototype, "iconPosition", void 0), pL([Y("")], t.prototype, "iconCss", void 0), pL([Y(!1)], t.prototype, "disabled", void 0), pL([Y(!1)], t.prototype, "isPrimary", void 0), pL([Y("")], t.prototype, "cssClass", void 0), pL([Y("")], t.prototype, "content", void 0), pL([Y(!1)], t.prototype, "isToggle", void 0), pL([Y()], t.prototype, "locale", void 0), pL([X()], t.prototype, "created", void 0), t = pL([J], t) }(Kw), vL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), wL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, bL = "e-checkbox-disabled", CL = "e-ripple-container", LL = "e-ripple-check", ML = "e-ripple-stop", SL = "e-checkbox-wrapper", xL = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.isFocused = !1, n.isMouseClick = !1, n } return vL(t, e), t.prototype.changeState = function (e) { var t, i, n = this.getWrapper().getElementsByClassName("e-frame")[0]; yw && (i = this.getWrapper().getElementsByClassName(CL)[0]), "check" === e ? (n.classList.remove("e-stop"), n.classList.add("e-check"), i && (i.classList.remove(ML), i.classList.add(LL)), t = "true", this.element.checked = !0) : "uncheck" === e ? (x([n], ["e-check", "e-stop"]), i && x([i], [LL, ML]), t = "false", this.element.checked = !1) : (n.classList.remove("e-check"), n.classList.add("e-stop"), i && (i.classList.remove(LL), i.classList.add(ML)), t = "mixed", this.element.indeterminate = !0), this.getWrapper().setAttribute("aria-checked", t) }, t.prototype.clickHandler = function (e) { this.isMouseClick && (this.focusOutHandler(), this.isMouseClick = !1), this.indeterminate ? (this.changeState(this.checked ? "check" : "uncheck"), this.indeterminate = !1, this.element.indeterminate = !1) : this.checked ? (this.changeState("uncheck"), this.checked = !1) : (this.changeState("check"), this.checked = !0); var t = { checked: this.element.checked, event: e }; this.trigger("change", t) }, t.prototype.destroy = function () { var t = this, i = this.getWrapper(); e.prototype.destroy.call(this), this.disabled || this.unWireEvents(), "INPUT" === this.tagName ? (i.parentNode.insertBefore(this.element, i), I(i), this.element.checked = !1, this.indeterminate && (this.element.indeterminate = !1), ["name", "value", "disabled"].forEach(function (e) { t.element.removeAttribute(e) })) : (["role", "aria-checked", "class"].forEach(function (e) { i.removeAttribute(e) }), i.innerHTML = "") }, t.prototype.focusHandler = function () { this.isFocused = !0 }, t.prototype.focusOutHandler = function () { this.getWrapper().classList.remove("e-focus"), this.isFocused = !1 }, t.prototype.getModuleName = function () { return "checkbox" }, t.prototype.getPersistData = function () { return this.addOnPersist(["checked", "indeterminate"]) }, t.prototype.getWrapper = function () { return this.element.parentElement.parentElement }, t.prototype.initialize = function () { d(this.initialCheckedValue) && (this.initialCheckedValue = this.checked), this.name && this.element.setAttribute("name", this.name), this.value && this.element.setAttribute("value", this.value), this.checked && this.changeState("check"), this.indeterminate && this.changeState(), this.disabled && this.setDisabled() }, t.prototype.initWrapper = function () { var e = this.element.parentElement; e.classList.contains(SL) || (e = this.createElement("div", { className: SL, attrs: { role: "checkbox", "aria-checked": "false" } }), this.element.parentNode.insertBefore(e, this.element)); var t = this.createElement("label", { attrs: { for: this.element.id } }), i = this.createElement("span", { className: "e-icons e-frame" }); if (this.enableRtl && e.classList.add("e-rtl"), this.cssClass && S([e], this.cssClass.split(" ")), e.appendChild(t), t.appendChild(this.element), Ee(this, t), t.appendChild(i), yw) { var n = this.createElement("span", { className: CL }); "Before" === this.labelPosition ? t.appendChild(n) : t.insertBefore(n, i), ee(n, { duration: 400, isCenterRipple: !0 }) } this.label && this.setText(this.label) }, t.prototype.keyUpHandler = function () { this.isFocused && this.getWrapper().classList.add("e-focus") }, t.prototype.labelMouseHandler = function (e) { this.isMouseClick = !0; Ae(e, this.getWrapper().getElementsByClassName(CL)[0]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this.getWrapper(), n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "checked": this.indeterminate = !1, this.element.indeterminate = !1, this.changeState(e.checked ? "check" : "uncheck"); break; case "indeterminate": e.indeterminate ? this.changeState() : (this.element.indeterminate = !1, this.changeState(this.checked ? "check" : "uncheck")); break; case "disabled": e.disabled ? (this.setDisabled(), this.unWireEvents()) : (this.element.disabled = !1, i.classList.remove(bL), i.setAttribute("aria-disabled", "false"), this.wireEvents()); break; case "cssClass": t.cssClass && x([i], t.cssClass.split(" ")), e.cssClass && S([i], e.cssClass.split(" ")); break; case "enableRtl": e.enableRtl ? i.classList.add("e-rtl") : i.classList.remove("e-rtl"); break; case "label": this.setText(e.label); break; case "labelPosition": var o = i.getElementsByClassName("e-label")[0], s = i.getElementsByTagName("label")[0]; I(o), "After" === e.labelPosition ? s.appendChild(o) : s.insertBefore(o, i.getElementsByClassName("e-frame")[0]); break; case "name": this.element.setAttribute("name", e.name); break; case "value": this.element.setAttribute("value", e.value) } } }, t.prototype.preRender = function () { var e = this.element; this.formElement = R(this.element, "form"), this.tagName = this.element.tagName, e = Me(this.createElement, "EJS-CHECKBOX", "checkbox", e, SL, "checkbox"), this.element = e, "checkbox" !== this.element.getAttribute("type") && this.element.setAttribute("type", "checkbox"), this.element.id || (this.element.id = p("e-" + this.getModuleName())) }, t.prototype.render = function () { this.initWrapper(), this.initialize(), this.disabled || this.wireEvents() }, t.prototype.setDisabled = function () { var e = this.getWrapper(); this.element.disabled = !0, e.classList.add(bL), e.setAttribute("aria-disabled", "true") }, t.prototype.setText = function (e) { var t = this.getWrapper().getElementsByClassName("e-label")[0]; if (t) t.textContent = e; else { t = this.createElement("span", { className: "e-label", innerHTML: e }); var i = this.getWrapper().getElementsByTagName("label")[0]; "Before" === this.labelPosition ? i.insertBefore(t, this.getWrapper().getElementsByClassName("e-frame")[0]) : i.appendChild(t) } }, t.prototype.changeHandler = function (e) { e.stopPropagation() }, t.prototype.formResetHandler = function () { this.checked = this.initialCheckedValue, P(this.element, { checked: this.initialCheckedValue.toString() }) }, t.prototype.unWireEvents = function () { var e = this.getWrapper(); Kv.remove(this.element, "click", this.clickHandler), Kv.remove(this.element, "keyup", this.keyUpHandler), Kv.remove(this.element, "focus", this.focusHandler), Kv.remove(this.element, "focusout", this.focusOutHandler); var t = e.getElementsByTagName("label")[0]; Kv.remove(t, "mousedown", this.labelMouseHandler), Kv.remove(t, "mouseup", this.labelMouseHandler), this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler), "EJS-CHECKBOX" === this.tagName && Kv.remove(this.element, "change", this.changeHandler) }, t.prototype.wireEvents = function () { var e = this.getWrapper(); Kv.add(this.element, "click", this.clickHandler, this), Kv.add(this.element, "keyup", this.keyUpHandler, this), Kv.add(this.element, "focus", this.focusHandler, this), Kv.add(this.element, "focusout", this.focusOutHandler, this); var t = e.getElementsByTagName("label")[0]; Kv.add(t, "mousedown", this.labelMouseHandler, this), Kv.add(t, "mouseup", this.labelMouseHandler, this), this.formElement && Kv.add(this.formElement, "reset", this.formResetHandler, this), "EJS-CHECKBOX" === this.tagName && Kv.add(this.element, "change", this.changeHandler, this) }, t.prototype.click = function () { this.element.click() }, t.prototype.focusIn = function () { this.element.focus() }, wL([X()], t.prototype, "change", void 0), wL([X()], t.prototype, "created", void 0), wL([Y(!1)], t.prototype, "checked", void 0), wL([Y("")], t.prototype, "cssClass", void 0), wL([Y(!1)], t.prototype, "disabled", void 0), wL([Y(!1)], t.prototype, "indeterminate", void 0), wL([Y("")], t.prototype, "label", void 0), wL([Y("After")], t.prototype, "labelPosition", void 0), wL([Y("")], t.prototype, "name", void 0), wL([Y("")], t.prototype, "value", void 0), t = wL([J], t) }(Kw), TL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), DL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, AL = "e-ripple-container", EL = "e-radio-wrapper", jL = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.isKeyPressed = !1, n } TL(t, e), i = t, t.prototype.changeHandler = function (e) { this.checked = !0, this.dataBind(); var t = { value: this.value, event: e }; this.trigger("change", t), "EJS-RADIOBUTTON" === this.tagName && e.stopPropagation() }, t.prototype.updateChange = function (e) { for (var t, n, r = this.getRadioGroup(), o = 0; o < r.length; o++)(t = r[o]) !== this.element && ((n = C(t, i)).checked = !1, "EJS-RADIOBUTTON" === this.tagName && (n.angularValue = this.value)) }, t.prototype.destroy = function () { var t = this, i = this.element.parentElement; e.prototype.destroy.call(this), this.disabled || this.unWireEvents(), "INPUT" === this.tagName ? (i.parentNode.insertBefore(this.element, i), I(i), this.element.checked = !1, ["name", "value", "disabled"].forEach(function (e) { t.element.removeAttribute(e) })) : (["role", "aria-checked", "class"].forEach(function (e) { i.removeAttribute(e) }), i.innerHTML = "") }, t.prototype.focusHandler = function () { this.isKeyPressed && this.getLabel().classList.add("e-focus") }, t.prototype.focusOutHandler = function () { this.getLabel().classList.remove("e-focus") }, t.prototype.getModuleName = function () { return "radio" }, t.prototype.getSelectedValue = function () { for (var e, t = this.getRadioGroup(), i = 0, n = t.length; i < n; i++)if ((e = t[i]).checked) return e.value; return "" }, t.prototype.getRadioGroup = function () { return document.querySelectorAll('input.e-radio[name="' + this.element.getAttribute("name") + '"]') }, t.prototype.getPersistData = function () { return this.addOnPersist(["checked"]) }, t.prototype.getLabel = function () { return this.element.nextElementSibling }, t.prototype.initialize = function () { d(this.initialCheckedValue) && (this.initialCheckedValue = this.checked), this.initWrapper(), this.name && this.element.setAttribute("name", this.name), this.value && this.element.setAttribute("value", this.value), this.checked && (this.element.checked = !0), this.disabled && this.setDisabled() }, t.prototype.initWrapper = function () { var e, t = this.element.parentElement; t.classList.contains(EL) || (t = this.createElement("div", { className: EL }), this.element.parentNode.insertBefore(t, this.element)); var i = this.createElement("label", { attrs: { for: this.element.id } }); t.appendChild(this.element), t.appendChild(i), yw && (e = this.createElement("span", { className: AL }), i.appendChild(e), ee(e, { duration: 400, isCenterRipple: !0 })), this.enableRtl && i.classList.add("e-rtl"), this.cssClass && S([i], this.cssClass.split(" ")), this.label && this.setText(this.label) }, t.prototype.keyDownHandler = function () { this.isKeyPressed = !0 }, t.prototype.labelRippleHandler = function (e) { Ae(e, this.getLabel().getElementsByClassName(AL)[0]) }, t.prototype.mouseDownHandler = function () { this.isKeyPressed = !1 }, t.prototype.formResetHandler = function () { this.checked = this.initialCheckedValue, this.initialCheckedValue && P(this.element, { checked: "true" }) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this.getLabel(), n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "checked": e.checked && this.updateChange(e.checked), this.element.checked = e.checked; break; case "disabled": e.disabled ? (this.setDisabled(), this.unWireEvents()) : (this.element.disabled = !1, this.wireEvents()); break; case "cssClass": t.cssClass && x([i], t.cssClass.split(" ")), e.cssClass && S([i], e.cssClass.split(" ")); break; case "enableRtl": e.enableRtl ? i.classList.add("e-rtl") : i.classList.remove("e-rtl"); break; case "label": this.setText(e.label); break; case "labelPosition": "Before" === e.labelPosition ? i.classList.add("e-right") : i.classList.remove("e-right"); break; case "name": this.element.setAttribute("name", e.name); break; case "value": this.element.setAttribute("value", e.value) } } }, t.prototype.preRender = function () { var e = this.element; if (this.formElement = R(this.element, "form"), this.tagName = this.element.tagName, e = Me(this.createElement, "EJS-RADIOBUTTON", "radio", e, EL, "radio"), this.element = e, "radio" !== this.element.getAttribute("type") && this.element.setAttribute("type", "radio"), this.element.id || (this.element.id = p("e-" + this.getModuleName())), "EJS-RADIOBUTTON" === this.tagName) { var t = this.element.getAttribute("formcontrolname"); t && (this.setProperties({ name: t }, !0), this.element.setAttribute("name", t)) } }, t.prototype.render = function () { this.initialize(), this.disabled || this.wireEvents() }, t.prototype.setDisabled = function () { this.element.disabled = !0 }, t.prototype.setText = function (e) { var t = this.getLabel(), i = t.getElementsByClassName("e-label")[0]; i ? i.textContent = e : (i = this.createElement("span", { className: "e-label", innerHTML: e }), t.appendChild(i)), "Before" === this.labelPosition ? this.getLabel().classList.add("e-right") : this.getLabel().classList.remove("e-right") }, t.prototype.unWireEvents = function () { var e = this.getLabel(); Kv.remove(this.element, "change", this.changeHandler), Kv.remove(document, "keydown", this.keyDownHandler), Kv.remove(e, "mousedown", this.mouseDownHandler), Kv.remove(this.element, "focus", this.focusHandler), Kv.remove(this.element, "focusout", this.focusOutHandler); var t = e.getElementsByClassName("e-label")[0]; t && (Kv.remove(t, "mousedown", this.labelRippleHandler), Kv.remove(t, "mouseup", this.labelRippleHandler)), this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler) }, t.prototype.wireEvents = function () { var e = this.getLabel(); Kv.add(this.element, "change", this.changeHandler, this), Kv.add(document, "keydown", this.keyDownHandler, this), Kv.add(e, "mousedown", this.mouseDownHandler, this), Kv.add(this.element, "focus", this.focusHandler, this), Kv.add(this.element, "focusout", this.focusOutHandler, this); var t = e.getElementsByClassName("e-label")[0]; t && (Kv.add(t, "mousedown", this.labelRippleHandler, this), Kv.add(t, "mouseup", this.labelRippleHandler, this)), this.formElement && Kv.add(this.formElement, "reset", this.formResetHandler, this) }, t.prototype.click = function () { this.element.click() }, t.prototype.focusIn = function () { this.element.focus() }; var i; return DL([X()], t.prototype, "change", void 0), DL([X()], t.prototype, "created", void 0), DL([Y(!1)], t.prototype, "checked", void 0), DL([Y("")], t.prototype, "cssClass", void 0), DL([Y(!1)], t.prototype, "disabled", void 0), DL([Y("")], t.prototype, "label", void 0), DL([Y("After")], t.prototype, "labelPosition", void 0), DL([Y("")], t.prototype, "name", void 0), DL([Y("")], t.prototype, "value", void 0), t = i = DL([J], t) }(Kw), IL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), kL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, PL = "e-switch-disabled", NL = "e-ripple-container", OL = "e-switch-wrapper", RL = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.isKeyPressed = !1, n.isDrag = !1, n } return IL(t, e), t.prototype.changeState = function (e) { var t, i, n = this.getWrapper(), r = n.querySelector(".e-switch-inner"), o = n.querySelector(".e-switch-handle"); yw && (i = n.getElementsByClassName(NL)[0]), e ? (S([r, o], "e-switch-active"), t = "true", this.element.checked = !0, this.checked = !0, i && S([i], ["e-ripple-check"])) : (x([r, o], "e-switch-active"), t = "false", this.element.checked = !1, this.checked = !1, i && x([i], ["e-ripple-check"])), n.setAttribute("aria-checked", t) }, t.prototype.clickHandler = function (e) { this.isDrag = !1, this.focusOutHandler(), this.changeState(!this.checked), this.element.focus(); var t = { checked: this.element.checked, event: e }; this.trigger("change", t) }, t.prototype.destroy = function () { e.prototype.destroy.call(this), this.disabled || this.unWireEvents(), xe(this, this.getWrapper(), this.tagName) }, t.prototype.focusHandler = function () { this.isKeyPressed && this.getWrapper().classList.add("e-focus") }, t.prototype.focusOutHandler = function () { this.getWrapper().classList.remove("e-focus") }, t.prototype.getModuleName = function () { return "switch" }, t.prototype.getPersistData = function () { return this.addOnPersist(["checked"]) }, t.prototype.getWrapper = function () { return this.element.parentElement }, t.prototype.initialize = function () { d(this.initialSwitchCheckedValue) && (this.initialSwitchCheckedValue = this.checked), this.name && this.element.setAttribute("name", this.name), this.value && this.element.setAttribute("value", this.value), this.checked && this.changeState(!0), this.disabled && this.setDisabled(), (this.onLabel || this.offLabel) && this.setLabel(this.onLabel, this.offLabel) }, t.prototype.initWrapper = function () { var e = this.element.parentElement; e.classList.contains(OL) || (e = this.createElement("div", { className: OL, attrs: { role: "switch", "aria-checked": "false" } }), this.element.parentNode.insertBefore(e, this.element)); var t = this.createElement("span", { className: "e-switch-inner" }), i = this.createElement("span", { className: "e-switch-on" }), n = this.createElement("span", { className: "e-switch-off" }), r = this.createElement("span", { className: "e-switch-handle" }); if (e.appendChild(this.element), Ee(this, e), t.appendChild(i), t.appendChild(n), e.appendChild(t), e.appendChild(r), yw) { var o = this.createElement("span", { className: NL }); r.appendChild(o), ee(o, { duration: 400, isCenterRipple: !0 }) } this.enableRtl && e.classList.add("e-rtl"), this.cssClass && S([e], this.cssClass.split(" ")) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this.getWrapper(), n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "checked": this.changeState(e.checked); break; case "disabled": e.disabled ? (this.setDisabled(), this.unWireEvents()) : (this.element.disabled = !1, i.classList.remove(PL), i.setAttribute("aria-disabled", "false"), this.wireEvents()); break; case "value": this.element.setAttribute("value", e.value); break; case "name": this.element.setAttribute("name", e.name); break; case "onLabel": case "offLabel": this.setLabel(e.onLabel, e.offLabel); break; case "enableRtl": e.enableRtl ? i.classList.add("e-rtl") : i.classList.remove("e-rtl"); break; case "cssClass": t.cssClass && x([i], t.cssClass.split(" ")), e.cssClass && S([i], e.cssClass.split(" ")) } } }, t.prototype.preRender = function () { var e = this.element; this.formElement = R(this.element, "form"), this.tagName = this.element.tagName, Te(this, "EJS-SWITCH", OL, e, this.getModuleName()) }, t.prototype.render = function () { this.initWrapper(), this.initialize(), this.disabled || this.wireEvents() }, t.prototype.rippleHandler = function (e) { Ae(e, this.getWrapper().getElementsByClassName(NL)[0]), "mousedown" === e.type && e.currentTarget.classList.contains("e-switch-wrapper") && 1 === e.which && (this.isDrag = !0, this.isKeyPressed = !1) }, t.prototype.rippleTouchHandler = function (e) { var t = this.getWrapper().getElementsByClassName(NL)[0]; if (t) { var i = document.createEvent("MouseEvents"); i.initEvent(e, !1, !0), t.dispatchEvent(i) } }, t.prototype.setDisabled = function () { var e = this.getWrapper(); this.element.disabled = !0, e.classList.add(PL), e.setAttribute("aria-disabled", "true") }, t.prototype.setLabel = function (e, t) { var i = this.getWrapper(); e && (i.querySelector(".e-switch-on").textContent = e), t && (i.querySelector(".e-switch-off").textContent = t) }, t.prototype.switchFocusHandler = function () { this.isKeyPressed = !0 }, t.prototype.switchMouseUp = function (e) { var t = e.target; this.getWrapper().getElementsByClassName(NL)[0]; "touchmove" === e.type && e.preventDefault(), "touchstart" === e.type && (this.isDrag = !0, this.rippleTouchHandler("mousedown")), this.isDrag && ("mouseup" === e.type && t.className.indexOf("e-switch") < 0 || "touchend" === e.type) && (this.clickHandler(e), this.rippleTouchHandler("mouseup"), e.preventDefault()) }, t.prototype.formResetHandler = function () { this.checked = this.initialSwitchCheckedValue, P(this.element, { checked: this.initialSwitchCheckedValue.toString() }) }, t.prototype.toggle = function () { this.clickHandler() }, t.prototype.wireEvents = function () { var e = this.getWrapper(); e.querySelector(".e-switch-handle"); this.delegateMouseUpHandler = this.switchMouseUp.bind(this), this.delegateKeyDownHandler = this.switchFocusHandler.bind(this), Kv.add(e, "click", this.clickHandler, this), Kv.add(this.element, "focus", this.focusHandler, this), Kv.add(this.element, "focusout", this.focusOutHandler, this), Kv.add(document, "mouseup", this.delegateMouseUpHandler, this), Kv.add(document, "keydown", this.delegateKeyDownHandler, this), Kv.add(e, "mousedown mouseup", this.rippleHandler, this), Kv.add(e, "touchstart touchmove touchend", this.switchMouseUp, this), this.formElement && Kv.add(this.formElement, "reset", this.formResetHandler, this) }, t.prototype.unWireEvents = function () { var e = this.getWrapper(); e.querySelector(".e-switch-handle"); Kv.remove(e, "click", this.clickHandler), Kv.remove(this.element, "focus", this.focusHandler), Kv.remove(this.element, "focusout", this.focusOutHandler), Kv.remove(document, "mouseup", this.delegateMouseUpHandler), Kv.remove(document, "keydown", this.delegateKeyDownHandler), Kv.remove(e, "mousedown mouseup", this.rippleHandler), Kv.remove(e, "touchstart touchmove touchend", this.switchMouseUp), this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler) }, t.prototype.click = function () { this.element.click() }, t.prototype.focusIn = function () { this.element.focus() }, kL([X()], t.prototype, "change", void 0), kL([X()], t.prototype, "created", void 0), kL([Y(!1)], t.prototype, "checked", void 0), kL([Y("")], t.prototype, "cssClass", void 0), kL([Y(!1)], t.prototype, "disabled", void 0), kL([Y("")], t.prototype, "name", void 0), kL([Y("")], t.prototype, "onLabel", void 0), kL([Y("")], t.prototype, "offLabel", void 0), kL([Y("")], t.prototype, "value", void 0), t = kL([J], t) }(Kw), zL = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, FL = { chipSet: "e-chip-set", chip: "e-chip", avatar: "e-chip-avatar", text: "e-chip-text", icon: "e-chip-icon", delete: "e-chip-delete", deleteIcon: "e-dlt-btn", multiSelection: "e-multi-selection", singleSelection: "e-selection", active: "e-active", chipWrapper: "e-chip-avatar-wrap", iconWrapper: "e-chip-icon-wrap", focused: "e-focused", disabled: "e-disabled", rtl: "e-rtl" }, VL = function (e) { function t(t, i) { return e.call(this, t, i) || this } return zL(t, e), t.prototype.preRender = function () { }, t.prototype.render = function () { this.type = this.chips.length ? "chipset" : this.text || this.element.innerText ? "chip" : "chipset", this.setAttributes(), this.createChip(), this.setRtl(), this.wireEvent(!1), this.select(this.selectedChips), this.rippleFunctin = ee(this.element, { selector: ".e-chip" }) }, t.prototype.createChip = function () { this.innerText = this.element.innerText.trim(), this.element.innerHTML = "", this.chipCreation("chip" === this.type ? [this.innerText ? this.innerText : this.text] : this.chips) }, t.prototype.setAttributes = function () { "chip" === this.type ? (this.element.tabIndex = 0, this.element.setAttribute("role", "option")) : (this.element.classList.add(FL.chipSet), this.element.setAttribute("role", "listbox"), "Multiple" === this.selection ? (this.element.classList.add(FL.multiSelection), this.element.setAttribute("aria-multiselectable", "true")) : "Single" === this.selection ? (this.element.classList.add(FL.singleSelection), this.element.setAttribute("aria-multiselectable", "false")) : this.element.setAttribute("aria-multiselectable", "false")) }, t.prototype.setRtl = function () { this.element.classList[this.enableRtl ? "add" : "remove"](FL.rtl) }, t.prototype.chipCreation = function (e) { for (var t = [], i = 0; i < e.length; i++) { var n = this.getFieldValues(e[i]), r = this.elementCreation(n), o = (FL.chip + " " + (n.enabled ? " " : FL.disabled) + " " + (n.avatarIconCss || n.avatarText ? FL.chipWrapper : n.leadingIconCss ? FL.iconWrapper : " ") + " " + n.cssClass).split(" ").filter(function (e) { return e }); if ("chip" === this.type) t = r, S([this.element], o), this.element.setAttribute("aria-label", n.text); else { var s = this.createElement("DIV", { className: o.join(" "), attrs: { tabIndex: "0", role: "option", "aria-label": n.text, "aria-selected": "false" } }); E(r, s), t.push(s) } } E(t, this.element) }, t.prototype.getFieldValues = function (e) { var t = "false" !== this.enabled.toString(); return { text: "object" == typeof e ? e.text ? e.text.toString() : this.text.toString() : "chip" === this.type ? this.innerText ? this.innerText : this.text.toString() : e.toString(), cssClass: "object" == typeof e && e.cssClass ? e.cssClass.toString() : this.cssClass.toString(), leadingIconCss: "object" == typeof e && e.leadingIconCss ? e.leadingIconCss.toString() : this.leadingIconCss.toString(), avatarIconCss: "object" == typeof e && e.avatarIconCss ? e.avatarIconCss.toString() : this.avatarIconCss.toString(), avatarText: "object" == typeof e && e.avatarText ? e.avatarText.toString() : this.avatarText.toString(), trailingIconCss: "object" == typeof e && e.trailingIconCss ? e.trailingIconCss.toString() : this.trailingIconCss.toString(), enabled: "object" == typeof e ? d(e.enabled) ? t : "false" !== e.enabled.toString() : t } }, t.prototype.elementCreation = function (e) { var t = []; if (e.avatarText || e.avatarIconCss) { var i = (FL.avatar + " " + e.avatarIconCss).trim(), n = this.createElement("span", { className: i }); n.innerText = e.avatarText, t.push(n) } else if (e.leadingIconCss) { i = (FL.icon + " " + e.leadingIconCss).trim(); var r = this.createElement("span", { className: i }); t.push(r) } var o = this.createElement("span", { className: FL.text }); if (o.innerText = e.text, t.push(o), e.trailingIconCss || "chip" !== this.type && this.enableDelete) { i = (FL.delete + " " + (e.trailingIconCss ? e.trailingIconCss : FL.deleteIcon)).trim(); var s = this.createElement("span", { className: i }); t.push(s) } return t }, t.prototype.find = function (e) { var t, i = e instanceof HTMLElement ? e : this.element.querySelectorAll("." + FL.chip)[e]; return i && "chip" !== this.type && ((t = { text: void 0, index: void 0, element: void 0, data: void 0 }).index = Array.prototype.slice.call(this.element.querySelectorAll("." + FL.chip)).indexOf(i), t.text = "object" == typeof this.chips[t.index] ? this.chips[t.index].text ? this.chips[t.index].text.toString() : "" : this.chips[t.index].toString(), t.data = this.chips[t.index], t.element = i), t }, t.prototype.add = function (e) { var t; if ("chip" !== this.type) { var i = e instanceof Array ? e : [e]; (t = this.chips).push.apply(t, i), this.chipCreation(i) } }, t.prototype.select = function (e) { if ("chip" !== this.type && "None" !== this.selection) for (var t = e instanceof Array ? e : [e], i = 0; i < t.length; i++) { var n = t[i] instanceof HTMLElement ? t[i] : this.element.querySelectorAll("." + FL.chip)[t[i]]; n instanceof HTMLElement && this.selectionHandler(n) } }, t.prototype.remove = function (e) { var t = this; if ("chip" !== this.type) { var i = e instanceof Array ? e : [e], n = [], r = this.element.querySelectorAll("." + FL.chip); i.forEach(function (e) { var t = e instanceof HTMLElement ? e : r[e]; t instanceof HTMLElement && n.push(t) }), n.forEach(function (e) { var i = t.element.querySelectorAll("." + FL.chip), n = Array.prototype.slice.call(i).indexOf(e); t.deleteHandler(e, n) }) } }, t.prototype.getSelectedChips = function () { var e; if ("chip" !== this.type && "None" !== this.selection) { for (var t = { texts: [], Indexes: [], data: [], elements: [] }, i = this.element.querySelectorAll("." + FL.active), n = 0; n < i.length; n++) { var r = i[n]; t.elements.push(r); var o = Array.prototype.slice.call(this.element.querySelectorAll("." + FL.chip)).indexOf(r); t.Indexes.push(o), t.data.push(this.chips[o]); var s = "object" == typeof this.chips[o] ? this.chips[o].text.toString() : this.chips[o].toString(); t.texts.push(s) } var a = { text: t.texts[0], index: t.Indexes[0], data: t.data[0], element: t.elements[0] }; e = d(a.index) ? void 0 : "Multiple" === this.selection ? t : a } return e }, t.prototype.wireEvent = function (e) { e ? (Kv.remove(this.element, "click", this.clickHandler), Kv.remove(this.element, "focusout", this.focusOutHandler), Kv.remove(this.element, "keydown", this.keyHandler), Kv.remove(this.element, "keyup", this.keyHandler)) : (Kv.add(this.element, "click", this.clickHandler, this), Kv.add(this.element, "focusout", this.focusOutHandler, this), Kv.add(this.element, "keydown", this.keyHandler, this), Kv.add(this.element, "keyup", this.keyHandler, this)) }, t.prototype.keyHandler = function (e) { e.target.classList.contains(FL.chip) && ("keydown" === e.type ? 13 === e.keyCode ? this.clickHandler(e) : 46 === e.keyCode && this.enableDelete && this.clickHandler(e, !0) : 9 === e.keyCode && this.focusInHandler(e.target)) }, t.prototype.focusInHandler = function (e) { e.classList.contains(FL.focused) || e.classList.add(FL.focused) }, t.prototype.focusOutHandler = function (e) { var t = R(e.target, "." + FL.chip), i = "chip" === this.type ? this.element.classList.contains(FL.focused) ? this.element : null : this.element.querySelector("." + FL.focused); t && i && i.classList.remove(FL.focused) }, t.prototype.clickHandler = function (e, t) { var i = this; void 0 === t && (t = !1); var n = R(e.target, "." + FL.chip); if (n) if ("chip" !== this.type) { var r = this.find(n); r.event = e; if ((e.target.classList.contains(FL.delete) ? e.target : t ? n.querySelector("." + FL.delete) : void 0) && this.enableDelete) { r.cancel = !1; var o = r; this.trigger("delete", o, function (e) { e.cancel || i.deleteHandler(r.element, r.index) }) } else if ("None" !== this.selection) { this.selectionHandler(n), r.selected = n.classList.contains(FL.active); var s = r; this.trigger("click", s) } else { this.focusInHandler(n); var a = r; this.trigger("click", a) } } else { this.focusInHandler(n); a = { text: this.innerText ? this.innerText : this.text, element: n, data: this.text, event: e }; this.trigger("click", a) } }, t.prototype.selectionHandler = function (e) { if ("Single" === this.selection) { var t = this.element.querySelector("." + FL.active); t && t !== e && (t.classList.remove(FL.active), e.setAttribute("aria-selected", "false")) } e.classList.contains(FL.active) ? (e.classList.remove(FL.active), e.setAttribute("aria-selected", "false")) : (e.classList.add(FL.active), e.setAttribute("aria-selected", "true")) }, t.prototype.deleteHandler = function (e, t) { this.chips.splice(t, 1), I(e) }, t.prototype.destroy = function () { e.prototype.destroy.call(this), x([this.element], [FL.chipSet, FL.chip, FL.rtl, FL.multiSelection, FL.singleSelection, FL.disabled, FL.chipWrapper, FL.iconWrapper, FL.active, FL.focused].concat(this.cssClass.toString().split(" ").filter(function (e) { return e }))), this.removeMultipleAttributes(["tabindex", "role", "aria-label", "aria-multiselectable"], this.element), this.wireEvent(!0), this.rippleFunctin(), this.element.innerHTML = "", this.element.innerText = this.innerText }, t.prototype.removeMultipleAttributes = function (e, t) { e.forEach(function (e) { t.removeAttribute(e) }) }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.getModuleName = function () { return "chip-list" }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "chips": case "text": case "avatarText": case "avatarIconCss": case "leadingIconCss": case "trailingIconCss": case "selection": case "enableDelete": case "enabled": this.refresh(); break; case "cssClass": "chip" === this.type ? (x([this.element], t.cssClass.toString().split(" ").filter(function (e) { return e })), S([this.element], e.cssClass.toString().split(" ").filter(function (e) { return e }))) : this.refresh(); break; case "selectedChips": this.select(e.selectedChips); break; case "enableRtl": this.setRtl() } } }, BL([Y([])], t.prototype, "chips", void 0), BL([Y("")], t.prototype, "text", void 0), BL([Y("")], t.prototype, "avatarText", void 0), BL([Y("")], t.prototype, "avatarIconCss", void 0), BL([Y("")], t.prototype, "leadingIconCss", void 0), BL([Y("")], t.prototype, "trailingIconCss", void 0), BL([Y("")], t.prototype, "cssClass", void 0), BL([Y(!0)], t.prototype, "enabled", void 0), BL([Y([])], t.prototype, "selectedChips", void 0), BL([Y("None")], t.prototype, "selection", void 0), BL([Y(!1)], t.prototype, "enableDelete", void 0), BL([X()], t.prototype, "created", void 0), BL([X()], t.prototype, "click", void 0), BL([X()], t.prototype, "delete", void 0), t = BL([J], t) }(Kw), WL = function () { return function () { } }(), HL = Object.freeze({ wrapperInitialize: Me, getTextNode: Se, destroy: xe, preRender: Te, createCheckBox: De, rippleMouseHandler: Ae, setHiddenInput: Ee, Button: yL, CheckBox: xL, RadioButton: jL, Switch: RL, classNames: FL, ChipList: VL, Chip: WL }), _L = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), YL = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, UL = "e-other-month", qL = "e-other-year", GL = "e-calendar", QL = "e-disabled", XL = "e-overlay", JL = "e-week-number", ZL = "e-selected", KL = "e-focused-date", $L = "e-month-hide", eM = "e-zoomin", tM = "e-calendar-day-header-lg", iM = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.effect = "", n.isPopupClicked = !1, n.isDateSelected = !0, n.defaultKeyConfigs = { controlUp: "ctrl+38", controlDown: "ctrl+40", moveDown: "downarrow", moveUp: "uparrow", moveLeft: "leftarrow", moveRight: "rightarrow", select: "enter", home: "home", end: "end", pageUp: "pageup", pageDown: "pagedown", shiftPageUp: "shift+pageup", shiftPageDown: "shift+pagedown", controlHome: "ctrl+home", controlEnd: "ctrl+end", altUpArrow: "alt+uparrow", spacebar: "space", altRightArrow: "alt+rightarrow", altLeftArrow: "alt+leftarrow" }, n } return _L(t, e), t.prototype.render = function () { this.rangeValidation(this.min, this.max), this.calendarEleCopy = this.element.cloneNode(!0), "Islamic" === this.calendarMode && (+this.min.setSeconds(0) == +new Date(1900, 0, 1, 0, 0, 0) && (this.min = new Date(1944, 2, 18)), +this.max == +new Date(2099, 11, 31) && (this.max = new Date(2069, 10, 16))), this.globalize = new Gw(this.locale), (d(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) && this.setProperties({ firstDayOfWeek: this.globalize.getFirstDayOfWeek() }, !0), this.todayDisabled = !1, this.todayDate = new Date((new Date).setHours(0, 0, 0, 0)), "calendar" === this.getModuleName() ? (this.element.classList.add(GL), this.enableRtl && this.element.classList.add("e-rtl"), uw.isDevice && this.element.classList.add("e-device"), P(this.element, { "data-role": "calendar" }), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.setAttribute("tabindex", this.tabIndex)) : (this.calendarElement = this.createElement("div"), this.calendarElement.classList.add(GL), this.enableRtl && this.calendarElement.classList.add("e-rtl"), uw.isDevice && this.calendarElement.classList.add("e-device"), P(this.calendarElement, { role: "calendar" })), this.createHeader(), this.createContent(), this.wireEvents() }, t.prototype.rangeValidation = function (e, t) { d(e) && this.setProperties({ min: new Date(1900, 0, 1) }, !0), d(t) && this.setProperties({ max: new Date(2099, 11, 31) }, !0) }, t.prototype.validateDate = function (e) { this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(this.min))) }, !0), this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(this.max))) }, !0), this.currentDate = this.currentDate ? this.currentDate : new Date((new Date).setHours(0, 0, 0, 0)), !d(e) && this.min <= this.max && e >= this.min && e <= this.max && (this.currentDate = new Date(this.checkValue(e))) }, t.prototype.setOverlayIndex = function (e, t, i, n) { if (n && !d(t) && !d(i) && !d(e)) { var r = parseInt(t.style.zIndex, 10) ? parseInt(t.style.zIndex, 10) : 1e3; i.style.zIndex = (r - 1).toString(), e.style.zIndex = r.toString() } }, t.prototype.minMaxUpdate = function (e) { +this.min <= +this.max ? x([this.element], XL) : (this.setProperties({ min: this.min }, !0), S([this.element], XL)), this.min = d(this.min) || !+this.min ? this.min = new Date(1900, 0, 1) : this.min, this.max = d(this.max) || !+this.max ? this.max = new Date(2099, 11, 31) : this.max, +this.min <= +this.max && e && +e <= +this.max && +e >= +this.min ? this.currentDate = new Date(this.checkValue(e)) : +this.min <= +this.max && !e && +this.currentDate > +this.max ? this.currentDate = new Date(this.checkValue(this.max)) : +this.currentDate < +this.min && (this.currentDate = new Date(this.checkValue(this.min))) }, t.prototype.createHeader = function () { this.headerElement = this.createElement("div", { className: "e-header" }); var e = this.createElement("div", { className: "e-icon-container" }); this.previousIcon = this.createElement("button", { className: "e-prev", attrs: { type: "button" } }), ee(this.previousIcon, { duration: 400, selector: ".e-prev", isCenterRipple: !0 }), P(this.previousIcon, { "aria-disabled": "false", "aria-label": "previous month" }), this.nextIcon = this.createElement("button", { className: "e-next", attrs: { type: "button" } }), ee(this.nextIcon, { selector: ".e-next", duration: 400, isCenterRipple: !0 }), P(this.nextIcon, { "aria-disabled": "false", "aria-label": "next month" }), this.headerTitleElement = this.createElement("div", { className: "e-day e-title" }), P(this.headerTitleElement, { "aria-atomic": "true", "aria-live": "assertive", "aria-label": "title" }), this.headerElement.appendChild(this.headerTitleElement), this.previousIcon.appendChild(this.createElement("span", { className: "e-date-icon-prev e-icons" })), this.nextIcon.appendChild(this.createElement("span", { className: "e-date-icon-next  e-icons" })), e.appendChild(this.previousIcon), e.appendChild(this.nextIcon), this.headerElement.appendChild(e), "calendar" === this.getModuleName() ? this.element.appendChild(this.headerElement) : this.calendarElement.appendChild(this.headerElement), this.adjustLongHeaderSize() }, t.prototype.createContent = function () { this.contentElement = this.createElement("div", { className: "e-content" }), this.table = this.createElement("table", { attrs: { tabIndex: "0", role: "grid", "aria-activedescendant": "" } }), "calendar" === this.getModuleName() ? this.element.appendChild(this.contentElement) : this.calendarElement.appendChild(this.contentElement), this.contentElement.appendChild(this.table), this.createContentHeader(), this.createContentBody(), this.showTodayButton && this.createContentFooter() }, t.prototype.getCultureValues = function () { var e, t = [], i = "days.stand-alone." + this.dayHeaderFormat.toLowerCase(); e = "en" === this.locale || "en-US" === this.locale ? n(i, ae()) : this.getCultureObjects(_w, "" + this.locale); for (var r = 0, o = Object.keys(e); r < o.length; r++) { var s = o[r]; t.push(n(s, e)) } return t }, t.prototype.createContentHeader = function () { "calendar" === this.getModuleName() ? d(this.element.querySelectorAll(".e-content .e-week-header")[0]) || I(this.element.querySelectorAll(".e-content .e-week-header")[0]) : d(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]) || I(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]); var e, t = ""; (this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) && this.setProperties({ firstDayOfWeek: 0 }, !0), this.tableHeadElement = this.createElement("thead", { className: "e-week-header" }), this.weekNumber && (t += '<th class="e-week-number"></th>', "calendar" === this.getModuleName() ? S([this.element], "" + JL) : S([this.calendarElement], "" + JL)), e = this.shiftArray(this.getCultureValues().length > 0 && this.getCultureValues(), this.firstDayOfWeek); for (var i = 0; i <= 6; i++)t += '<th  class="">' + e[i] + "</th>"; t = "<tr>" + t + "</tr>", this.tableHeadElement.innerHTML = t, this.table.appendChild(this.tableHeadElement) }, t.prototype.createContentBody = function () { switch ("calendar" === this.getModuleName() ? d(this.element.querySelectorAll(".e-content tbody")[0]) || I(this.element.querySelectorAll(".e-content tbody")[0]) : d(this.calendarElement.querySelectorAll(".e-content tbody")[0]) || I(this.calendarElement.querySelectorAll(".e-content tbody")[0]), this.start) { case "Year": this.renderYears(); break; case "Decade": this.renderDecades(); break; default: this.renderMonths() } }, t.prototype.updateFooter = function () { this.todayElement.textContent = this.l10.getConstant("today"), this.todayElement.setAttribute("aria-label", this.l10.getConstant("today")) }, t.prototype.createContentFooter = function () { if (this.showTodayButton) { var e = new Date(+this.min), t = new Date(+this.max); this.globalize = new Gw(this.locale), this.l10 = new pb(this.getModuleName(), { today: "Today" }, this.locale), this.todayElement = this.createElement("button", { attrs: { role: "button" } }), ee(this.todayElement), this.updateFooter(), S([this.todayElement], ["e-btn", "e-today", "e-flat", "e-primary", "e-css"]), +new Date(e.setHours(0, 0, 0, 0)) <= +this.todayDate && +this.todayDate <= +new Date(t.setHours(0, 0, 0, 0)) && !this.todayDisabled || S([this.todayElement], QL), this.footer = this.createElement("div", { className: "e-footer-container" }), this.footer.appendChild(this.todayElement), "calendar" === this.getModuleName() && this.element.appendChild(this.footer), "datepicker" === this.getModuleName() && this.calendarElement.appendChild(this.footer), "datetimepicker" === this.getModuleName() && this.calendarElement.appendChild(this.footer), this.todayElement.classList.contains(QL) || Kv.add(this.todayElement, "click", this.todayButtonClick, this) } }, t.prototype.wireEvents = function () { Kv.add(this.headerTitleElement, "click", this.navigateTitle, this), this.defaultKeyConfigs = h(this.defaultKeyConfigs, this.keyConfigs), "calendar" === this.getModuleName() ? this.keyboardModule = new cb(this.element, { eventName: "keydown", keyAction: this.keyActionHandle.bind(this), keyConfigs: this.defaultKeyConfigs }) : this.keyboardModule = new cb(this.calendarElement, { eventName: "keydown", keyAction: this.keyActionHandle.bind(this), keyConfigs: this.defaultKeyConfigs }) }, t.prototype.todayButtonClick = function (e) { this.showTodayButton && (this.currentView() === this.depth ? this.effect = "" : this.effect = "e-zoomin", this.getViewNumber(this.start) >= this.getViewNumber(this.depth) ? this.navigateTo(this.depth, new Date(this.checkValue(e))) : this.navigateTo("Month", new Date(this.checkValue(e)))) }, t.prototype.keyActionHandle = function (e, t, i) { var n, r = this.getViewNumber(this.currentView()), o = this.tableBodyElement.querySelector("tr td.e-focused-date"); n = i ? d(o) || +t !== parseInt(o.getAttribute("id").split("_")[0], 10) ? this.tableBodyElement.querySelector("tr td.e-selected") : o : this.tableBodyElement.querySelector("tr td.e-selected"); var s = this.getViewNumber(this.depth), a = r === s && this.getViewNumber(this.start) >= s; switch (this.effect = "", e.action) { case "moveLeft": this.KeyboardNavigate(-1, r, e, this.max, this.min), e.preventDefault(); break; case "moveRight": this.KeyboardNavigate(1, r, e, this.max, this.min), e.preventDefault(); break; case "moveUp": 0 === r ? this.KeyboardNavigate(-7, r, e, this.max, this.min) : this.KeyboardNavigate(-4, r, e, this.max, this.min), e.preventDefault(); break; case "moveDown": 0 === r ? this.KeyboardNavigate(7, r, e, this.max, this.min) : this.KeyboardNavigate(4, r, e, this.max, this.min), e.preventDefault(); break; case "select": if (e.target === this.todayElement) this.todayButtonClick(t); else { var l = d(o) ? n : o; if (!d(l) && !l.classList.contains(QL)) if (a) { var h = new Date(parseInt("" + l.id, 0)); this.selectDate(e, h, l) } else this.contentClick(null, --r, l, t) } break; case "controlUp": this.title(), e.preventDefault(); break; case "controlDown": d(o) && (d(n) || a) || this.contentClick(null, --r, o || n, t), e.preventDefault(); break; case "home": this.currentDate = this.firstDay(this.currentDate), I(this.tableBodyElement), 0 === r ? this.renderMonths(e) : 1 === r ? this.renderYears(e) : this.renderDecades(e), e.preventDefault(); break; case "end": this.currentDate = this.lastDay(this.currentDate, r), I(this.tableBodyElement), 0 === r ? this.renderMonths(e) : 1 === r ? this.renderYears(e) : this.renderDecades(e), e.preventDefault(); break; case "pageUp": this.addMonths(this.currentDate, -1), this.navigateTo("Month", this.currentDate), e.preventDefault(); break; case "pageDown": this.addMonths(this.currentDate, 1), this.navigateTo("Month", this.currentDate), e.preventDefault(); break; case "shiftPageUp": this.addYears(this.currentDate, -1), this.navigateTo("Month", this.currentDate), e.preventDefault(); break; case "shiftPageDown": this.addYears(this.currentDate, 1), this.navigateTo("Month", this.currentDate), e.preventDefault(); break; case "controlHome": this.navigateTo("Month", new Date(this.currentDate.getFullYear(), 0, 1)), e.preventDefault(); break; case "controlEnd": this.navigateTo("Month", new Date(this.currentDate.getFullYear(), 11, 31)), e.preventDefault() }"calendar" === this.getModuleName() && this.table.focus() }, t.prototype.KeyboardNavigate = function (e, t, i, n, r) { var o = new Date(this.checkValue(this.currentDate)); switch (t) { case 2: this.addYears(this.currentDate, e), this.isMonthYearRange(this.currentDate) ? (I(this.tableBodyElement), this.renderDecades(i)) : this.currentDate = o; break; case 1: this.addMonths(this.currentDate, e), this.calendarMode, this.isMonthYearRange(this.currentDate) ? (I(this.tableBodyElement), this.renderYears(i)) : this.currentDate = o; break; case 0: this.addDay(this.currentDate, e, i, n, r), this.isMinMaxRange(this.currentDate) ? (I(this.tableBodyElement), this.renderMonths(i)) : this.currentDate = o } }, t.prototype.preRender = function (e) { var t = this; this.navigatePreviousHandler = this.navigatePrevious.bind(this), this.navigateNextHandler = this.navigateNext.bind(this), this.navigateHandler = function (e) { t.triggerNavigate(e) } }, t.prototype.minMaxDate = function (e) { var t = new Date(new Date(+e).setHours(0, 0, 0, 0)), i = new Date(new Date(+this.min).setHours(0, 0, 0, 0)), n = new Date(new Date(+this.max).setHours(0, 0, 0, 0)); return +t != +i && +t != +n || (+e < +this.min && (e = new Date(+this.min)), +e > +this.max && (e = new Date(+this.max))), e }, t.prototype.renderMonths = function (e, t) { var i, n = this.weekNumber ? 8 : 7; i = "Gregorian" === this.calendarMode ? this.renderDays(this.currentDate, e, t) : this.islamicModule.islamicRenderDays(this.currentDate, t), this.createContentHeader(), "Gregorian" === this.calendarMode ? this.renderTemplate(i, n, "e-month", e, t) : this.islamicModule.islamicRenderTemplate(i, n, "e-month", e, t) }, t.prototype.renderDays = function (e, t, i, n, r) { var o, s = [], a = new Date(this.checkValue(e)), l = (this.weekNumber, a.getMonth()); this.titleUpdate(e, "days"); var h = a; for (a = new Date(h.getFullYear(), h.getMonth(), 0, h.getHours(), h.getMinutes(), h.getSeconds(), h.getMilliseconds()); a.getDay() !== this.firstDayOfWeek;)this.setStartDate(a, -864e5); for (var c = 0; c < 42; ++c) { var p = this.createElement("td", { className: "e-cell" }), u = this.createElement("span"); c % 7 == 0 && this.weekNumber && (u.textContent = "" + this.getWeek(a), p.appendChild(u), S([p], "" + JL), s.push(p)), o = new Date(+a), a = this.minMaxDate(a); var g = { type: "dateTime", skeleton: "full" }, m = this.globalize.parseDate(this.globalize.formatDate(a, g), g), f = this.dayCell(a), y = this.globalize.formatDate(a, { type: "date", skeleton: "full" }), v = this.createElement("span"); v.textContent = this.globalize.formatDate(a, { format: "d", type: "date", skeleton: "yMd" }); var w = this.min > a || this.max < a; w ? (S([f], QL), S([f], XL)) : v.setAttribute("title", "" + y), l !== a.getMonth() && S([f], UL), 0 !== a.getDay() && 6 !== a.getDay() || S([f], "e-weekend"), f.appendChild(v), this.renderDayCellArgs = { date: a, isDisabled: !1, element: f, isOutOfRange: w }; var b = this.renderDayCellArgs; if (this.renderDayCellEvent(b), b.isDisabled) if (n) { if (!d(r) && r.length > 0) for (var C = 0; C < r.length; C++) { +new Date(this.globalize.formatDate(b.date, { type: "date", skeleton: "yMd" })) === +new Date(this.globalize.formatDate(r[C], { type: "date", skeleton: "yMd" })) && (r.splice(C, 1), C = -1) } } else i && +i == +b.date && this.setProperties({ value: null }, !0); this.renderDayCellArgs.isDisabled && !f.classList.contains(ZL) && (S([f], QL), S([f], XL), +this.renderDayCellArgs.date == +this.todayDate && (this.todayDisabled = !0)); var L = f.classList.contains(UL), M = f.classList.contains(QL); if (M || Kv.add(f, "click", this.clickHandler, this), !n || d(r) || L || M) L || M || !this.getDateVal(a, i) ? this.updateFocus(L, M, a, f, e) : S([f], ZL); else { for (var x = 0; x < r.length; x++) { var T = { type: "date", skeleton: "short", calendar: "Gregorian" === this.calendarMode ? "gregorian" : "islamic" }; this.globalize.formatDate(a, T) === this.globalize.formatDate(r[x], T) && this.getDateVal(a, r[x]) || this.getDateVal(a, i) ? S([f], ZL) : this.updateFocus(L, M, a, f, e) } r.length <= 0 && this.updateFocus(L, M, a, f, e) } m.getMonth() === (new Date).getMonth() && m.getDate() === (new Date).getDate() && m.getFullYear() === (new Date).getFullYear() && S([f], "e-today"), s.push(this.renderDayCellArgs.element), a = new Date(+o), this.addDay(a, 1, null, this.max, this.min) } return s }, t.prototype.updateFocus = function (e, t, i, n, r) { r.getDate() !== i.getDate() || e || t ? (r >= this.max && parseInt(n.id, 0) === +this.max && !e && !t && S([n], KL), r <= this.min && parseInt(n.id, 0) === +this.min && !e && !t && S([n], KL)) : S([n], KL) }, t.prototype.renderYears = function (e, t) { this.removeTableHeadElement(); var i = [], n = d(t), r = new Date(this.checkValue(this.currentDate)), o = r.getMonth(), s = r.getFullYear(), a = r, l = a.getFullYear(), h = new Date(this.checkValue(this.min)).getFullYear(), c = new Date(this.checkValue(this.min)).getMonth(), p = new Date(this.checkValue(this.max)).getFullYear(), u = new Date(this.checkValue(this.max)).getMonth(); a.setMonth(0), this.titleUpdate(this.currentDate, "months"); this.min > a || this.max; a.setDate(1); for (var g = 0; g < 12; ++g) { var m = this.dayCell(a), f = this.createElement("span"), y = t && t.getMonth() === a.getMonth(), v = t && t.getFullYear() === s && y; f.textContent = this.globalize.formatDate(a, { type: "dateTime", skeleton: "MMM" }), this.min && (l < h || g < c && l === h) || this.max && (l > p || g > u && l >= p) ? S([m], QL) : !n && v ? S([m], ZL) : a.getMonth() === o && this.currentDate.getMonth() === o && S([m], KL), a.setDate(1), a.setMonth(a.getMonth() + 1), m.classList.contains(QL) || Kv.add(m, "click", this.clickHandler, this), m.appendChild(f), i.push(m) } this.renderTemplate(i, 4, "e-year", e, t) }, t.prototype.renderDecades = function (e, t) { this.removeTableHeadElement(); var i = [], n = new Date(this.checkValue(this.currentDate)); n.setMonth(0), n.setDate(1); var r = n.getFullYear(), o = new Date(n.setFullYear(r - r % 10)), s = new Date(n.setFullYear(r - r % 10 + 9)), a = o.getFullYear(), l = s.getFullYear(), h = this.globalize.formatDate(o, { type: "dateTime", skeleton: "y" }), c = this.globalize.formatDate(s, { type: "dateTime", skeleton: "y" }); this.headerTitleElement.textContent = h + " - " + c; for (var p = new Date(r - r % 10 - 1, 0, 1).getFullYear(), u = 0; u < 12; ++u) { var g = p + u; n.setFullYear(g); var m = this.dayCell(n); P(m, { role: "gridcell" }); var f = this.createElement("span"); f.textContent = this.globalize.formatDate(n, { type: "dateTime", skeleton: "y" }), g < a || g > l ? (S([m], qL), (g < new Date(this.checkValue(this.min)).getFullYear() || g > new Date(this.checkValue(this.max)).getFullYear()) && S([m], QL)) : g < new Date(this.checkValue(this.min)).getFullYear() || g > new Date(this.checkValue(this.max)).getFullYear() ? S([m], QL) : d(t) || n.getFullYear() !== t.getFullYear() ? n.getFullYear() !== this.currentDate.getFullYear() || m.classList.contains(QL) || S([m], KL) : S([m], ZL), m.classList.contains(QL) || Kv.add(m, "click", this.clickHandler, this), m.appendChild(f), i.push(m) } this.renderTemplate(i, 4, "e-decade", e, t) }, t.prototype.dayCell = function (e) { var t = { skeleton: "full", type: "dateTime", calendar: "Gregorian" === this.calendarMode ? "gregorian" : "islamic" }, i = { className: "e-cell", attrs: { id: "" + p("" + this.globalize.parseDate(this.globalize.formatDate(e, t), t).valueOf()), "aria-selected": "false", role: "gridcell" } }; return this.createElement("td", i) }, t.prototype.firstDay = function (e) { var t = "Decade" !== this.currentView() ? this.tableBodyElement.querySelectorAll("td:not(." + UL) : this.tableBodyElement.querySelectorAll("td:not(." + qL); if (t.length) for (var i = 0; i < t.length; i++)if (!t[i].classList.contains(QL)) { e = new Date(parseInt(t[i].id, 0)); break } return e }, t.prototype.lastDay = function (e, t) { var i = new Date(e.getFullYear(), e.getMonth() + 1, 0); if (2 !== t) { var n = Math.abs(i.getTimezoneOffset() - this.firstDay(e).getTimezoneOffset()); return n && i.setHours(this.firstDay(e).getHours() + n / 60), this.findLastDay(i) } return this.findLastDay(this.firstDay(i)) }, t.prototype.checkDateValue = function (e) { return !d(e) && e instanceof Date && !isNaN(+e) ? e : null }, t.prototype.findLastDay = function (e) { var t = "Decade" === this.currentView() ? this.tableBodyElement.querySelectorAll("td:not(." + qL) : this.tableBodyElement.querySelectorAll("td:not(." + UL); if (t.length) for (var i = t.length - 1; i >= 0; i--)if (!t[i].classList.contains(QL)) { e = new Date(parseInt(t[i].id, 0)); break } return e }, t.prototype.removeTableHeadElement = function () { "calendar" === this.getModuleName() ? d(this.element.querySelectorAll(".e-content table thead")[0]) || I(this.tableHeadElement) : d(this.calendarElement.querySelectorAll(".e-content table thead")[0]) || I(this.tableHeadElement) }, t.prototype.renderTemplate = function (e, t, i, n, r) { var o, s = this.getViewNumber(this.currentView()); this.tableBodyElement = this.createElement("tbody"), this.table.appendChild(this.tableBodyElement), x([this.contentElement, this.headerElement], ["e-month", "e-decade", "e-year"]), S([this.contentElement, this.headerElement], [i]); for (var a = t, l = 0, h = 0; h < e.length / t; ++h) { for (o = this.createElement("tr", { attrs: { role: "row" } }), l = 0 + l; l < a; l++)e[l].classList.contains("e-week-number") || d(e[l].children[0]) || (S([e[l].children[0]], ["e-day"]), ee(e[l].children[0], { duration: 600, isCenterRipple: !0 })), o.appendChild(e[l]), this.weekNumber && 7 === l && e[7].classList.contains(UL) && S([o], $L), !this.weekNumber && 6 === l && e[6].classList.contains(UL) && S([o], $L), this.weekNumber ? 41 === l && e[41].classList.contains(UL) && S([o], $L) : 35 === l && e[35].classList.contains(UL) && S([o], $L); a += t, l += 0, this.tableBodyElement.appendChild(o) } this.table.querySelector("tbody").className = this.effect, "Gregorian" === this.calendarMode ? this.iconHandler() : this.islamicModule.islamicIconHandler(), (s !== this.getViewNumber(this.currentView()) || 0 === s && s !== this.getViewNumber(this.currentView())) && this.navigateHandler(n), this.setAriaActiveDescendant() }, t.prototype.clickHandler = function (e, t) { this.clickEventEmitter(e); var i = e.currentTarget, n = this.getViewNumber(this.currentView()); i.classList.contains(UL) ? this.contentClick(e, 0, null, t) : n === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth) ? this.contentClick(e, 1, null, t) : 2 === n ? this.contentClick(e, 1, null, t) : i.classList.contains(UL) || 0 !== n ? this.contentClick(e, 0, i, t) : this.selectDate(e, this.getIdValue(e, null), null), "calendar" === this.getModuleName() && this.table.focus() }, t.prototype.clickEventEmitter = function (e) { e.preventDefault() }, t.prototype.contentClick = function (e, t, i, n) { var r = this.getViewNumber(this.currentView()), o = this.getIdValue(e, i); switch (t) { case 0: r === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth) ? (I(this.tableBodyElement), this.currentDate = o, this.effect = eM, this.renderMonths(e)) : ("Gregorian" === this.calendarMode ? (this.currentDate.setMonth(o.getMonth()), o.getMonth() > 0 && this.currentDate.getMonth() !== o.getMonth() && this.currentDate.setDate(0), this.currentDate.setFullYear(o.getFullYear())) : this.currentDate = o, this.effect = eM, I(this.tableBodyElement), this.renderMonths(e)); break; case 1: if (r === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) this.selectDate(e, o, null); else { if ("Gregorian" === this.calendarMode) this.currentDate.setFullYear(o.getFullYear()); else { var s = this.islamicModule.getIslamicDate(o); this.currentDate = this.islamicModule.toGregorian(s.year, s.month, 1) } this.effect = eM, I(this.tableBodyElement), this.renderYears(e) } } }, t.prototype.switchView = function (e, t, i) { switch (e) { case 0: I(this.tableBodyElement), this.renderMonths(t), i && !d(this.tableBodyElement.querySelectorAll("." + KL)[0]) && this.tableBodyElement.querySelectorAll("." + KL)[0].classList.remove(KL); break; case 1: I(this.tableBodyElement), this.renderYears(t); break; case 2: I(this.tableBodyElement), this.renderDecades(t) } }, t.prototype.getModuleName = function () { return "calendar" }, t.prototype.requiredModules = function () { var e = []; return this && e.push({ args: [this], member: "islamic" }), e }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.onPropertyChanged = function (e, t, i, n) { this.effect = ""; for (var r = 0, o = Object.keys(e); r < o.length; r++) { var s = o[r]; switch (s) { case "enableRtl": e.enableRtl ? "calendar" === this.getModuleName() ? this.element.classList.add("e-rtl") : this.calendarElement.classList.add("e-rtl") : "calendar" === this.getModuleName() ? this.element.classList.remove("e-rtl") : this.calendarElement.classList.remove("e-rtl"); break; case "dayHeaderFormat": this.getCultureValues(), this.createContentHeader(), this.adjustLongHeaderSize(); break; case "min": case "max": this.rangeValidation(this.min, this.max), "min" === s ? this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(e.min))) }, !0) : this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(e.max))) }, !0), this.setProperties({ start: this.currentView() }, !0), I(this.tableBodyElement), this.minMaxUpdate(), i && this.validateValues(i, n), this.createContentBody(), (this.todayDate < this.min || this.max < this.todayDate) && this.footer && this.todayElement ? (I(this.todayElement), I(this.footer), this.todayElement = this.footer = null, this.createContentFooter()) : this.footer && this.todayElement && this.todayElement.classList.contains("e-disabled") && (x([this.todayElement], QL), I(this.todayElement), I(this.footer), this.todayElement = this.footer = null, this.createContentFooter()); break; case "start": case "depth": case "weekNumber": case "firstDayOfWeek": this.checkView(), this.createContentHeader(), this.createContentBody(); break; case "locale": this.globalize = new Gw(this.locale), this.createContentHeader(), this.createContentBody(), this.l10.setLocale(this.locale), this.updateFooter(); break; case "showTodayButton": e.showTodayButton ? this.createContentFooter() : d(this.todayElement) || d(this.footer) || (I(this.todayElement), I(this.footer), this.todayElement = this.footer = void 0), this.setProperties({ showTodayButton: e.showTodayButton }, !0) } } }, t.prototype.validateValues = function (e, t) { if (e && !d(t) && t.length > 0) { for (var i = this.copyValues(t), n = 0; n < i.length; n++) { var r = i[n], o = "Gregorian" === this.calendarMode ? "gregorian" : "islamic", s = void 0; s = "Gregorian" === this.calendarMode ? this.globalize.formatDate(r, { type: "date", skeleton: "yMd" }) : this.globalize.formatDate(r, { type: "dateTime", skeleton: "full", calendar: "islamic" }); var a = { type: "date", skeleton: "yMd", calendar: o }, l = this.globalize.formatDate(this.min, a), h = { type: "date", skeleton: "yMd", calendar: o }, c = this.globalize.formatDate(this.max, h); (+new Date(s) < +new Date(l) || +new Date(s) > +new Date(c)) && (i.splice(n, 1), n = -1) } this.setProperties({ values: i }, !0) } }, t.prototype.setValueUpdate = function () { d(this.tableBodyElement) || (I(this.tableBodyElement), this.setProperties({ start: this.currentView() }, !0), this.createContentBody()) }, t.prototype.copyValues = function (e) { var t = []; if (!d(e) && e.length > 0) for (var i = 0; i < e.length; i++)t.push(new Date(+e[i])); return t }, t.prototype.titleUpdate = function (e, t) { var i, n, r = new Gw(this.locale), o = "Gregorian" === this.calendarMode ? "gregorian" : "islamic"; switch ("Gregorian" === this.calendarMode ? (i = r.formatDate(e, { type: "dateTime", skeleton: "yMMMM", calendar: o }), n = r.formatDate(e, { type: "dateTime", skeleton: "y", calendar: o })) : (i = r.formatDate(e, { type: "dateTime", format: "MMMM y", calendar: o }), n = r.formatDate(e, { type: "dateTime", format: "y", calendar: o })), t) { case "days": this.headerTitleElement.textContent = i; break; case "months": this.headerTitleElement.textContent = n } }, t.prototype.setActiveDescendant = function () { var e, t, i = this.tableBodyElement.querySelector("tr td.e-focused-date"), n = this.tableBodyElement.querySelector("tr td.e-selected"), r = "Gregorian" === this.calendarMode ? "gregorian" : "islamic", o = this.currentView(); return t = "Month" === o ? this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "full", calendar: r }) : "Year" === o ? "islamic" !== r ? this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "yMMMM", calendar: r }) : this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "GyMMM", calendar: r }) : this.globalize.formatDate(this.currentDate, { type: "date", skeleton: "y", calendar: r }), (n || i) && (d(n) || n.setAttribute("aria-selected", "true"), (i || n).setAttribute("aria-label", t), e = (i || n).getAttribute("id")), e }, t.prototype.iconHandler = function () { switch (new Date(this.checkValue(this.currentDate)).setDate(1), this.currentView()) { case "Month": this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.min) < 1), this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.max) > -1); break; case "Year": this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.min) < 1), this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.max) > -1); break; case "Decade": this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.min) < 1), this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.max) > -1) } }, t.prototype.destroy = function () { "calendar" === this.getModuleName() ? x([this.element], [GL]) : this.calendarElement && x([this.element], [GL]), "calendar" === this.getModuleName() && (Kv.remove(this.headerTitleElement, "click", this.navigateTitle), this.todayElement && Kv.remove(this.todayElement, "click", this.todayButtonClick), this.previousIconHandler(!0), this.nextIconHandler(!0), this.keyboardModule.destroy(), this.element.removeAttribute("data-role"), d(this.calendarEleCopy.getAttribute("tabindex")) ? this.element.removeAttribute("tabindex") : this.element.setAttribute("tabindex", this.tabIndex)), this.element.innerHTML = "", e.prototype.destroy.call(this) }, t.prototype.title = function (e) { var t = this.getViewNumber(this.currentView()); this.effect = eM, this.switchView(++t, e) }, t.prototype.getViewNumber = function (e) { return "Month" === e ? 0 : "Year" === e ? 1 : 2 }, t.prototype.navigateTitle = function (e) { e.preventDefault(), this.title(e), "calendar" === this.getModuleName() && this.table.focus() }, t.prototype.previous = function () { this.effect = ""; var e = this.getViewNumber(this.currentView()); switch (this.currentView()) { case "Month": this.addMonths(this.currentDate, -1), this.switchView(e); break; case "Year": this.addYears(this.currentDate, -1), this.switchView(e); break; case "Decade": this.addYears(this.currentDate, -10), this.switchView(e) } }, t.prototype.navigatePrevious = function (e) { e.preventDefault(), "Gregorian" === this.calendarMode ? this.previous() : this.islamicModule.islamicPrevious(), this.triggerNavigate(e), "calendar" === this.getModuleName() && this.table.focus() }, t.prototype.next = function () { this.effect = ""; var e = this.getViewNumber(this.currentView()); switch (this.currentView()) { case "Month": this.addMonths(this.currentDate, 1), this.switchView(e); break; case "Year": this.addYears(this.currentDate, 1), this.switchView(e); break; case "Decade": this.addYears(this.currentDate, 10), this.switchView(e) } }, t.prototype.navigateNext = function (e) { e.preventDefault(), "Gregorian" === this.calendarMode ? this.next() : this.islamicModule.islamicNext(), this.triggerNavigate(e), "calendar" === this.getModuleName() && this.table.focus() }, t.prototype.navigateTo = function (e, t) { +t >= +this.min && +t <= +this.max && (this.currentDate = t), +t <= +this.min && (this.currentDate = new Date(this.checkValue(this.min))), +t >= +this.max && (this.currentDate = new Date(this.checkValue(this.max))), this.getViewNumber(this.depth) >= this.getViewNumber(e) && (this.getViewNumber(this.depth) <= this.getViewNumber(this.start) || this.getViewNumber(this.depth) === this.getViewNumber(e)) && (e = this.depth), this.switchView(this.getViewNumber(e)) }, t.prototype.currentView = function () { return this.contentElement.classList.contains("e-year") ? "Year" : this.contentElement.classList.contains("e-decade") ? "Decade" : "Month" }, t.prototype.getDateVal = function (e, t) { return !d(t) && e.getDate() === t.getDate() && e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear() }, t.prototype.getCultureObjects = function (e, t) { var i = ".dates.calendars.gregorian.days.format." + this.dayHeaderFormat.toLowerCase(), r = ".dates.calendars.islamic.days.format." + this.dayHeaderFormat.toLowerCase(); return "Gregorian" === this.calendarMode ? n("main." + this.locale + i, e) : n("main." + this.locale + r, e) }, t.prototype.getWeek = function (e) { var t = new Date(this.checkValue(e)).valueOf(), i = new Date(e.getFullYear(), 0, 1).valueOf(), n = t - i; return Math.ceil((n / 864e5 + new Date(i).getDay() + 1) / 7) }, t.prototype.setStartDate = function (e, t) { var i = e.getTimezoneOffset(), n = new Date(e.getTime() + t), r = n.getTimezoneOffset() - i; e.setTime(n.getTime() + 6e4 * r) }, t.prototype.addMonths = function (e, t) { if ("Gregorian" === this.calendarMode) { var i = e.getDate(); e.setDate(1), e.setMonth(e.getMonth() + t), e.setDate(Math.min(i, this.getMaxDays(e))) } else { var n = this.islamicModule.getIslamicDate(e); this.currentDate = this.islamicModule.toGregorian(n.year, n.month + t, 1) } }, t.prototype.addYears = function (e, t) { if ("Gregorian" === this.calendarMode) { var i = e.getDate(); e.setDate(1), e.setFullYear(e.getFullYear() + t), e.setDate(Math.min(i, this.getMaxDays(e))) } else { var n = this.islamicModule.getIslamicDate(e); this.currentDate = this.islamicModule.toGregorian(n.year + t, n.month, 1) } }, t.prototype.getIdValue = function (e, t) { var i; i = e ? e.currentTarget : t; var n = { type: "dateTime", skeleton: "full", calendar: "Gregorian" === this.calendarMode ? "gregorian" : "islamic" }, r = this.globalize.formatDate(new Date(parseInt("" + i.getAttribute("id"), 0)), n), o = this.globalize.parseDate(r, n), s = o.valueOf() - o.valueOf() % 1e3; return new Date(s) }, t.prototype.adjustLongHeaderSize = function () { x([this.element], tM), "Wide" === this.dayHeaderFormat && S(["calendar" === this.getModuleName() ? this.element : this.calendarElement], tM) }, t.prototype.selectDate = function (e, t, i, n, r) { var o = i || e.currentTarget; if (this.isDateSelected = !1, "Decade" === this.currentView()) this.setDateDecade(this.currentDate, t.getFullYear()); else if ("Year" === this.currentView()) this.setDateYear(this.currentDate, t); else { if (n && !this.checkPresentDate(t, r)) { var s = this.copyValues(r); !d(r) && s.length > 0 ? (s.push(new Date(this.checkValue(t))), this.setProperties({ values: s }, !0), this.setProperties({ value: r[r.length - 1] }, !0)) : this.setProperties({ values: [new Date(this.checkValue(t))] }, !0) } else this.setProperties({ value: new Date(this.checkValue(t)) }, !0); this.currentDate = new Date(this.checkValue(t)) } var a = R(o, "." + GL); if (d(a) && (a = this.tableBodyElement), n || d(a.querySelector("." + ZL)) || x([a.querySelector("." + ZL)], ZL), n || d(a.querySelector("." + KL)) || x([a.querySelector("." + KL)], KL), n) { s = this.copyValues(r); for (var l = Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")), h = 0; h < l.length; h++) { var c = a.querySelectorAll("td." + KL)[0], p = a.querySelectorAll("td." + ZL)[0]; l[h] === c && x([l[h]], KL), l[h] !== p || this.checkPresentDate(new Date(parseInt(p.getAttribute("id").split("_")[0], 10)), r) || x([l[h]], ZL) } if (o.classList.contains(ZL)) { x([o], ZL); for (var u = 0; u < s.length; u++) { var g = { type: "date", skeleton: "short", calendar: "Gregorian" === this.calendarMode ? "gregorian" : "islamic" }; if (this.globalize.formatDate(t, g) === this.globalize.formatDate(s[u], g)) { h = s.indexOf(s[u]); s.splice(h, 1), S([o], KL) } } this.setProperties({ values: s }, !0) } else S([o], ZL) } else S([o], ZL); this.isDateSelected = !0 }, t.prototype.checkPresentDate = function (e, t) { var i = !1; if (!d(t)) for (var n = 0; n < t.length; n++) { var r = "Gregorian" === this.calendarMode ? "gregorian" : "islamic"; this.globalize.formatDate(e, { type: "date", skeleton: "short", calendar: r }) === this.globalize.formatDate(t[n], { type: "date", skeleton: "short", calendar: r }) && (i = !0) } return i }, t.prototype.setAriaActiveDescendant = function () { P(this.table, { "aria-activedescendant": "" + this.setActiveDescendant() }) }, t.prototype.previousIconHandler = function (e) { e ? (Kv.remove(this.previousIcon, "click", this.navigatePreviousHandler), S([this.previousIcon], "" + QL), S([this.previousIcon], "" + XL), this.previousIcon.setAttribute("aria-disabled", "true")) : (Kv.add(this.previousIcon, "click", this.navigatePreviousHandler), x([this.previousIcon], "" + QL), x([this.previousIcon], "" + XL), this.previousIcon.setAttribute("aria-disabled", "false")) }, t.prototype.renderDayCellEvent = function (e) { h(this.renderDayCellArgs, { name: "renderDayCell" }), this.trigger("renderDayCell", e) }, t.prototype.navigatedEvent = function (e) { h(this.navigatedArgs, { name: "navigated", event: e }), this.trigger("navigated", this.navigatedArgs) }, t.prototype.triggerNavigate = function (e) { this.navigatedArgs = { view: this.currentView(), date: this.currentDate }, this.navigatedEvent(e) }, t.prototype.nextIconHandler = function (e) { e ? (Kv.remove(this.nextIcon, "click", this.navigateNextHandler), S([this.nextIcon], QL), S([this.nextIcon], XL), this.nextIcon.setAttribute("aria-disabled", "true")) : (Kv.add(this.nextIcon, "click", this.navigateNextHandler), x([this.nextIcon], QL), x([this.nextIcon], XL), this.nextIcon.setAttribute("aria-disabled", "false")) }, t.prototype.compare = function (e, t, i) { var n, r, o = t.getFullYear(); return n = o, r = 0, i && (n = (o -= o % i) - o % i + i - 1), e.getFullYear() > n ? r = 1 : e.getFullYear() < o && (r = -1), r }, t.prototype.isMinMaxRange = function (e) { return +e >= +this.min && +e <= +this.max }, t.prototype.isMonthYearRange = function (e) { if ("Gregorian" === this.calendarMode) return e.getMonth() >= this.min.getMonth() && e.getFullYear() >= this.min.getFullYear() && e.getMonth() <= this.max.getMonth() && e.getFullYear() <= this.max.getFullYear(); var t = this.islamicModule.getIslamicDate(e); return t.month >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).month && t.year >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).year && t.month <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).month && t.year <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).year }, t.prototype.compareYear = function (e, t) { return this.compare(e, t, 0) }, t.prototype.compareDecade = function (e, t) { return this.compare(e, t, 10) }, t.prototype.shiftArray = function (e, t) { return e.slice(t).concat(e.slice(0, t)) }, t.prototype.addDay = function (e, t, i, n, r) { var o = t, s = new Date(+e); if (!d(this.tableBodyElement) && !d(i)) { for (; this.findNextTD(new Date(+e), o, n, r);)o += t; var a = new Date(s.setDate(s.getDate() + o)); o = +a > +n || +a < +r ? o === t ? t - t : t : o } e.setDate(e.getDate() + o) }, t.prototype.findNextTD = function (e, t, i, n) { var r = new Date(e.setDate(e.getDate() + t)), o = [], s = !1; if ((!d(r) && r.getMonth()) === (!d(this.currentDate) && this.currentDate.getMonth())) { o = ("Gregorian" === this.calendarMode ? this.renderDays(r, null) : this.islamicModule.islamicRenderDays(this.currentDate, r)).filter(function (e) { return e.classList.contains(QL) }) } else o = this.tableBodyElement.querySelectorAll("td." + QL); if (+r <= +i && +r >= +n && o.length) for (var a = 0; a < o.length && !(s = +r == +new Date(parseInt(o[a].id, 0))); a++); return s }, t.prototype.getMaxDays = function (e) { var t, i, n = new Date(this.checkValue(e)); for (t = 28, i = n.getMonth(); n.getMonth() === i;)++t, n.setDate(t); return t - 1 }, t.prototype.setDateDecade = function (e, t) { e.setFullYear(t), this.setProperties({ value: new Date(this.checkValue(e)) }, !0) }, t.prototype.setDateYear = function (e, t) { e.setFullYear(t.getFullYear(), t.getMonth(), e.getDate()), t.getMonth() !== e.getMonth() && e.setDate(0), this.setProperties({ value: new Date(this.checkValue(e)) }, !0), this.currentDate = new Date(this.checkValue(t)) }, t.prototype.compareMonth = function (e, t) { return e.getFullYear() > t.getFullYear() ? 1 : e.getFullYear() < t.getFullYear() ? -1 : e.getMonth() === t.getMonth() ? 0 : e.getMonth() > t.getMonth() ? 1 : -1 }, t.prototype.checkValue = function (e) { return e instanceof Date ? e.toUTCString() : "" + e }, t.prototype.checkView = function () { "Decade" !== this.start && "Year" !== this.start && this.setProperties({ start: "Month" }, !0), "Decade" !== this.depth && "Year" !== this.depth && this.setProperties({ depth: "Month" }, !0), this.getViewNumber(this.depth) > this.getViewNumber(this.start) && this.setProperties({ depth: "Month" }, !0) }, YL([Y(new Date(1900, 0, 1))], t.prototype, "min", void 0), YL([Y(new Date(2099, 11, 31))], t.prototype, "max", void 0), YL([Y(null)], t.prototype, "firstDayOfWeek", void 0), YL([Y("Gregorian")], t.prototype, "calendarMode", void 0), YL([Y("Month")], t.prototype, "start", void 0), YL([Y("Month")], t.prototype, "depth", void 0), YL([Y(!1)], t.prototype, "weekNumber", void 0), YL([Y(!0)], t.prototype, "showTodayButton", void 0), YL([Y("Short")], t.prototype, "dayHeaderFormat", void 0), YL([Y(!1)], t.prototype, "enablePersistence", void 0), YL([Y(null)], t.prototype, "keyConfigs", void 0), YL([X()], t.prototype, "created", void 0), YL([X()], t.prototype, "destroyed", void 0), YL([X()], t.prototype, "navigated", void 0), YL([X()], t.prototype, "renderDayCell", void 0), t = YL([J], t) }(Kw), nM = function (e) { function t(t, i) { return e.call(this, t, i) || this } return _L(t, e), t.prototype.render = function () { if ("Islamic" === this.calendarMode && void 0 === this.islamicModule && f("Requires the injectable Islamic modules to render Calendar in Islamic mode"), this.isMultiSelection && "object" == typeof this.values && !d(this.values) && this.values.length > 0) { for (var t = [], i = [], n = 0; n < this.values.length; n++)-1 === t.indexOf(+this.values[n]) && (t.push(+this.values[n]), i.push(this.values[n])); this.setProperties({ values: i }, !0); for (var r = 0; r < this.values.length; r++)if (!this.checkDateValue(this.values[r])) if ("string" == typeof this.values[r] && this.checkDateValue(new Date(this.checkValue(this.values[r])))) { var o = new Date(this.checkValue(this.values[r])); this.values.splice(r, 1), this.values.splice(r, 0, o) } else this.values.splice(r, 1); this.setProperties({ value: this.values[this.values.length - 1] }, !0), this.previousValues = this.values.length } if (this.validateDate(), this.minMaxUpdate(), e.prototype.render.call(this), "calendar" === this.getModuleName()) { var s = R(this.element, "form"); s && Kv.add(s, "reset", this.formResetHandler.bind(this)) } }, t.prototype.formResetHandler = function () { this.setProperties({ value: null }, !0) }, t.prototype.validateDate = function () { "string" == typeof this.value && this.setProperties({ value: this.checkDateValue(new Date(this.checkValue(this.value))) }, !0), e.prototype.validateDate.call(this, this.value), !d(this.value) && this.min <= this.max && this.value >= this.min && this.value <= this.max && (this.currentDate = new Date(this.checkValue(this.value))), isNaN(+this.value) && this.setProperties({ value: null }, !0) }, t.prototype.minMaxUpdate = function () { "calendar" === this.getModuleName() && (!d(this.value) && this.value <= this.min && this.min <= this.max ? (this.setProperties({ value: this.min }, !0), this.changedArgs = { value: this.value }) : !d(this.value) && this.value >= this.max && this.min <= this.max && (this.setProperties({ value: this.max }, !0), this.changedArgs = { value: this.value })), "calendar" === this.getModuleName() || d(this.value) ? e.prototype.minMaxUpdate.call(this, this.value) : !d(this.value) && this.value < this.min && this.min <= this.max ? e.prototype.minMaxUpdate.call(this, this.min) : !d(this.value) && this.value > this.max && this.min <= this.max && e.prototype.minMaxUpdate.call(this, this.max) }, t.prototype.todayButtonClick = function () { if (this.showTodayButton) { var t = new Date; if (this.value ? (t.setHours(this.value.getHours()), t.setMinutes(this.value.getMinutes()), t.setSeconds(this.value.getSeconds()), t.setMilliseconds(this.value.getMilliseconds())) : t = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0, 0, 0, 0), this.setProperties({ value: t }, !0), this.isMultiSelection) { var i = this.copyValues(this.values); e.prototype.checkPresentDate.call(this, t, this.values) || (i.push(t), this.setProperties({ values: i })) } e.prototype.todayButtonClick.call(this, new Date(+this.value)) } }, t.prototype.keyActionHandle = function (t) { e.prototype.keyActionHandle.call(this, t, this.value, this.isMultiSelection) }, t.prototype.preRender = function () { var t = this; this.changeHandler = function (e) { t.triggerChange(e) }, this.checkView(), e.prototype.preRender.call(this, this.value) }, t.prototype.createContent = function () { this.previousDate = this.value, e.prototype.createContent.call(this) }, t.prototype.minMaxDate = function (t) { return e.prototype.minMaxDate.call(this, t) }, t.prototype.renderMonths = function (t) { e.prototype.renderMonths.call(this, t, this.value) }, t.prototype.renderDays = function (t, i) { var n = e.prototype.renderDays.call(this, t, i, this.value, this.isMultiSelection, this.values); return this.isMultiSelection && e.prototype.validateValues.call(this, this.isMultiSelection, this.values), n }, t.prototype.renderYears = function (t) { "Gregorian" === this.calendarMode ? e.prototype.renderYears.call(this, t, this.value) : this.islamicModule.islamicRenderYears(t, this.value) }, t.prototype.renderDecades = function (t) { "Gregorian" === this.calendarMode ? e.prototype.renderDecades.call(this, t, this.value) : this.islamicModule.islamicRenderDecade(t, this.value) }, t.prototype.renderTemplate = function (t, i, n, r) { "Gregorian" === this.calendarMode ? e.prototype.renderTemplate.call(this, t, i, n, r, this.value) : this.islamicModule.islamicRenderTemplate(t, i, n, r, this.value), this.changedArgs = { value: this.value, values: this.values }, this.changeHandler() }, t.prototype.clickHandler = function (t) { var i = t.currentTarget; if (this.isPopupClicked = !0, i.classList.contains(UL)) if (this.isMultiSelection) { var n = this.copyValues(this.values); n.push(this.getIdValue(t, null)), this.setProperties({ values: n }, !0), this.setProperties({ value: this.values[this.values.length - 1] }, !0) } else this.setProperties({ value: this.getIdValue(t, null) }, !0); var r = this.currentView(); e.prototype.clickHandler.call(this, t, this.value), this.isMultiSelection && this.currentDate !== this.value && !d(this.tableBodyElement.querySelectorAll("." + KL)[0]) && "Year" === r && this.tableBodyElement.querySelectorAll("." + KL)[0].classList.remove(KL) }, t.prototype.switchView = function (t, i) { e.prototype.switchView.call(this, t, i, this.isMultiSelection) }, t.prototype.getModuleName = function () { return e.prototype.getModuleName.call(this), "calendar" }, t.prototype.getPersistData = function () { e.prototype.getPersistData.call(this); return this.addOnPersist(["value", "values"]) }, t.prototype.onPropertyChanged = function (t, i) { this.effect = ""; for (var n = 0, r = Object.keys(t); n < r.length; n++) { switch (r[n]) { case "value": this.isDateSelected && ("string" == typeof t.value ? this.setProperties({ value: new Date(this.checkValue(t.value)) }, !0) : t.value = new Date(this.checkValue(t.value)), isNaN(+this.value) && this.setProperties({ value: i.value }, !0), this.update()); break; case "values": if (this.isDateSelected) { if ("string" == typeof t.values || "number" == typeof t.values) this.setProperties({ values: null }, !0); else { for (var o = this.copyValues(this.values), s = 0; s < o.length; s++) { var a = o[s]; this.checkDateValue(a) && !e.prototype.checkPresentDate.call(this, a, o) && o.push(a) } this.setProperties({ values: o }, !0), this.values.length > 0 && this.setProperties({ value: t.values[t.values.length - 1] }, !0) } this.validateValues(this.isMultiSelection, this.values), this.update() } break; case "isMultiSelection": this.isDateSelected && (this.setProperties({ isMultiSelection: t.isMultiSelection }, !0), this.update()); break; default: e.prototype.onPropertyChanged.call(this, t, i, this.isMultiSelection, this.values) } } }, t.prototype.destroy = function () { if (e.prototype.destroy.call(this), "calendar" === this.getModuleName()) { var t = R(this.element, "form"); t && Kv.remove(t, "reset", this.formResetHandler.bind(this)) } }, t.prototype.navigateTo = function (t, i) { this.minMaxUpdate(), e.prototype.navigateTo.call(this, t, i) }, t.prototype.currentView = function () { return e.prototype.currentView.call(this) }, t.prototype.addDate = function (t) { if ("string" != typeof t && "number" != typeof t) { var i = this.copyValues(this.values); if ("object" == typeof t && t.length > 0) for (var n = t, r = 0; r < n.length; r++)this.checkDateValue(n[r]) && !e.prototype.checkPresentDate.call(this, n[r], i) && (!d(i) && i.length > 0 ? i.push(n[r]) : i = [new Date(+n[r])]); else this.checkDateValue(t) && !e.prototype.checkPresentDate.call(this, t, i) && (!d(i) && i.length > 0 ? i.push(t) : i = [new Date(+t)]); this.setProperties({ values: i }, !0), this.isMultiSelection && this.setProperties({ value: this.values[this.values.length - 1] }, !0), this.validateValues(this.isMultiSelection, i), this.update(), this.changedArgs = { value: this.value, values: this.values }, this.changeHandler() } }, t.prototype.removeDate = function (e) { if ("string" != typeof e && "number" != typeof e && !d(this.values) && this.values.length > 0) { var t = this.copyValues(this.values); if ("object" == typeof e && e.length > 0) for (var i = e, n = 0; n < i.length; n++)for (var r = 0; r < t.length; r++)+t[r] == +i[n] && t.splice(r, 1); else for (r = 0; r < t.length; r++)+t[r] == +e && t.splice(r, 1); this.setProperties({ values: t }, !1), this.update(), this.isMultiSelection && this.setProperties({ value: this.values[this.values.length - 1] }, !0), this.changedArgs = { value: this.value, values: this.values }, this.changeHandler() } }, t.prototype.update = function () { this.validateDate(), this.minMaxUpdate(), e.prototype.setValueUpdate.call(this) }, t.prototype.selectDate = function (t, i, n) { e.prototype.selectDate.call(this, t, i, n, this.isMultiSelection, this.values), this.isMultiSelection && !d(this.values) && this.values.length > 0 && this.setProperties({ value: this.values[this.values.length - 1] }, !0), this.changedArgs = { value: this.value, values: this.values }, this.changeHandler(t) }, t.prototype.changeEvent = function (e) { this.trigger("change", this.changedArgs), this.previousDate = new Date(+this.value) }, t.prototype.triggerChange = function (e) { this.changedArgs.event = e || null, this.changedArgs.isInteracted = !d(e), d(this.value) || this.setProperties({ value: this.value }, !0), this.isMultiSelection || +this.value === Number.NaN || +this.value == +this.previousDate ? d(this.values) || this.previousValues === this.values.length || (this.changeEvent(e), this.previousValues = this.values.length) : this.changeEvent(e) }, YL([Y(null)], t.prototype, "value", void 0), YL([Y(null)], t.prototype, "values", void 0), YL([Y(!1)], t.prototype, "isMultiSelection", void 0), YL([X()], t.prototype, "change", void 0), t = YL([J], t) }(iM), rM = "e-other-month", oM = "e-disabled", sM = "e-selected", aM = "e-month-hide", lM = function () { function e(e) { this.calendarInstance = e } return e.prototype.getModuleName = function () { return "islamic" }, e.prototype.islamicTitleUpdate = function (e, t) { var i = new Gw(this.calendarInstance.locale); switch (t) { case "days": this.calendarInstance.headerTitleElement.textContent = i.formatDate(e, { type: "dateTime", format: "MMMMyyyy", calendar: "islamic" }); break; case "months": this.calendarInstance.headerTitleElement.textContent = i.formatDate(e, { type: "dateTime", format: "yyyy", calendar: "islamic" }) } }, e.prototype.islamicRenderDays = function (e, t, i, n) { var r, o = [], s = new Date(this.islamicInValue(e)); this.calendarInstance.weekNumber; this.islamicTitleUpdate(e, "days"); var a = this.getIslamicDate(s), l = this.toGregorian(a.year, a.month, 1), h = a.month; for (s = l; s.getDay() !== this.calendarInstance.firstDayOfWeek;)this.calendarInstance.setStartDate(s, -864e5); for (var c = 0; c < 42; ++c) { var p = this.calendarInstance.createElement("td", { className: "e-cell" }), u = this.calendarInstance.createElement("span"); c % 7 == 0 && this.calendarInstance.weekNumber && (u.textContent = "" + this.calendarInstance.getWeek(s), p.appendChild(u), S([p], "e-week-number"), o.push(p)), r = new Date(+s), s = this.calendarInstance.minMaxDate(s); var g = { type: "dateTime", skeleton: "full", calendar: "islamic" }, m = this.calendarInstance.globalize.parseDate(this.calendarInstance.globalize.formatDate(s, g), g), f = this.islamicDayCell(s), y = this.calendarInstance.globalize.formatDate(s, { type: "date", skeleton: "full", calendar: "islamic" }), v = this.calendarInstance.createElement("span"); v.textContent = this.calendarInstance.globalize.formatDate(s, { type: "date", skeleton: "d", calendar: "islamic" }); var w = this.calendarInstance.min > s || this.calendarInstance.max < s; w ? (S([f], oM), S([f], "e-overlay")) : v.setAttribute("title", "" + y); h !== this.getIslamicDate(s).month && S([f], rM), 0 !== s.getDay() && 6 !== s.getDay() || S([f], "e-weekend"), f.appendChild(v), this.calendarInstance.renderDayCellArgs = { date: s, isDisabled: !1, element: f, isOutOfRange: w }; var b = this.calendarInstance.renderDayCellArgs; if (this.calendarInstance.renderDayCellEvent(b), b.isDisabled) if (this.calendarInstance.isMultiSelection) { if (!d(this.calendarInstance.values) && this.calendarInstance.values.length > 0) for (var C = 0; C < n.length; C++) { +new Date(this.calendarInstance.globalize.formatDate(b.date, { type: "date", skeleton: "yMd", calendar: "islamic" })) === +new Date(this.calendarInstance.globalize.formatDate(this.calendarInstance.values[C], { type: "date", skeleton: "yMd", calendar: "islamic" })) && (this.calendarInstance.values.splice(C, 1), C = -1) } } else t && +t == +b.date && this.calendarInstance.setProperties({ value: null }, !0); this.calendarInstance.renderDayCellArgs.isDisabled && !f.classList.contains(sM) && (S([f], oM), S([f], "e-overlay"), +this.calendarInstance.renderDayCellArgs.date == +this.calendarInstance.todayDate && (this.calendarInstance.todayDisabled = !0)); var L = f.classList.contains(rM), M = f.classList.contains(oM); if (M || Kv.add(f, "click", this.calendarInstance.clickHandler, this.calendarInstance), !this.calendarInstance.isMultiSelection || d(this.calendarInstance.values) || L || M) L || M || !this.calendarInstance.getDateVal(s, t) ? this.calendarInstance.updateFocus(L, M, s, f, e) : S([f], sM); else { for (var x = 0; x < this.calendarInstance.values.length; x++) { this.calendarInstance.globalize.formatDate(s, { type: "date", skeleton: "short", calendar: "islamic" }) === this.calendarInstance.globalize.formatDate(this.calendarInstance.values[x], { type: "date", skeleton: "short", calendar: "islamic" }) && this.calendarInstance.getDateVal(s, this.calendarInstance.values[x]) ? S([f], sM) : this.calendarInstance.updateFocus(L, M, s, f, e) } this.calendarInstance.values.length <= 0 && this.calendarInstance.updateFocus(L, M, s, f, e) } m.getDate() === (new Date).getDate() && m.getMonth() === (new Date).getMonth() && m.getFullYear() === (new Date).getFullYear() && S([f], "e-today"), s = new Date(+r), o.push(this.calendarInstance.renderDayCellArgs.element), this.calendarInstance.addDay(s, 1, null, this.calendarInstance.max, this.calendarInstance.min) } return o }, e.prototype.islamicIconHandler = function () { new Date(this.islamicInValue(this.calendarInstance.currentDate)).setDate(1); var e = new Date(this.islamicInValue(this.calendarInstance.currentDate)); switch (this.calendarInstance.currentView()) { case "Month": var t = this.islamicCompareMonth(e, this.calendarInstance.min) < 1, i = this.islamicCompareMonth(e, this.calendarInstance.max) > -1; this.calendarInstance.previousIconHandler(t), this.calendarInstance.nextIconHandler(i); break; case "Year": var n = this.hijriCompareYear(e, this.calendarInstance.min) < 1, r = this.hijriCompareYear(e, this.calendarInstance.max) > -1; this.calendarInstance.previousIconHandler(n), this.calendarInstance.nextIconHandler(r); break; case "Decade": var o = this.hijriCompareDecade(e, this.calendarInstance.min) < 1, s = this.hijriCompareDecade(e, this.calendarInstance.max) > -1; this.calendarInstance.previousIconHandler(o), this.calendarInstance.nextIconHandler(s) } }, e.prototype.islamicNext = function () { this.calendarInstance.effect = ""; var e = this.calendarInstance.getViewNumber(this.calendarInstance.currentView()), t = this.getIslamicDate(this.calendarInstance.currentDate); switch (this.calendarInstance.currentView()) { case "Year": this.calendarInstance.currentDate = this.toGregorian(t.year + 1, t.month, 1), this.calendarInstance.switchView(e); break; case "Month": this.calendarInstance.currentDate = this.toGregorian(t.year, t.month + 1, 1), this.calendarInstance.switchView(e); break; case "Decade": this.calendarInstance.currentDate = this.toGregorian(t.year + 10, t.month, 1), this.calendarInstance.switchView(e) } }, e.prototype.islamicPrevious = function () { var e = this.calendarInstance.getViewNumber(this.calendarInstance.currentView()); this.calendarInstance.effect = ""; var t = this.getIslamicDate(this.calendarInstance.currentDate); switch (this.calendarInstance.currentView()) { case "Month": this.calendarInstance.currentDate = this.toGregorian(t.year, t.month - 1, 1), this.calendarInstance.switchView(e); break; case "Year": this.calendarInstance.currentDate = this.toGregorian(t.year - 1, t.month, 1), this.calendarInstance.switchView(e); break; case "Decade": this.calendarInstance.currentDate = this.toGregorian(t.year - 10, t.month - 1, 1), this.calendarInstance.switchView(e) } }, e.prototype.islamicRenderYears = function (e, t) { this.calendarInstance.removeTableHeadElement(); var i = [], n = d(t), r = new Date(this.islamicInValue(this.calendarInstance.currentDate)), o = this.getIslamicDate(r); r = Dw.toGregorian(o.year, 1, 1); var s = o.month, a = o.year, l = o.year, h = this.getIslamicDate(this.calendarInstance.min).year, c = this.getIslamicDate(this.calendarInstance.min).month, p = this.getIslamicDate(this.calendarInstance.max).year, u = this.getIslamicDate(this.calendarInstance.max).month; this.islamicTitleUpdate(this.calendarInstance.currentDate, "months"); this.calendarInstance.min > r || this.calendarInstance.max; for (var g = 1; g <= 12; ++g) { var m = this.getIslamicDate(r); r = Dw.toGregorian(m.year, g, 1); var f = this.islamicDayCell(r), y = this.calendarInstance.createElement("span"), v = t && this.getIslamicDate(t).month === this.getIslamicDate(r).month, w = t && this.getIslamicDate(t).year === a && v; y.textContent = this.calendarInstance.globalize.formatDate(r, { type: "dateTime", format: "MMM", calendar: "islamic" }), this.calendarInstance.min && (l < h || g < c && l === h) || this.calendarInstance.max && (l > p || g > u && l >= p) ? S([f], oM) : !n && w ? S([f], sM) : this.getIslamicDate(r).month === s && this.getIslamicDate(this.calendarInstance.currentDate).month === s && S([f], "e-focused-date"), f.classList.contains(oM) || Kv.add(f, "click", this.calendarInstance.clickHandler, this.calendarInstance), f.appendChild(y), i.push(f) } this.islamicRenderTemplate(i, 4, "e-year", e, t) }, e.prototype.islamicRenderDecade = function (e, t) { this.calendarInstance.removeTableHeadElement(); var i = [], n = new Date(this.islamicInValue(this.calendarInstance.currentDate)), r = this.getIslamicDate(n), o = (n = Dw.toGregorian(r.year, 1, 1)).getFullYear(), s = new Date(this.islamicInValue(o - o % 10)), a = new Date(this.islamicInValue(o - o % 10 + 9)), l = s.getFullYear(), h = a.getFullYear(), c = this.calendarInstance.globalize.formatDate(s, { type: "dateTime", format: "y", calendar: "islamic" }), p = this.calendarInstance.globalize.formatDate(a, { type: "dateTime", format: "y", calendar: "islamic" }); this.calendarInstance.headerTitleElement.textContent = c + " - " + p; for (var u = new Date(o - o % 10 - 2, 0, 1).getFullYear(), g = 1; g <= 12; ++g) { var m = u + g; n.setFullYear(m), n.setDate(1), n.setMonth(0); var f = this.getIslamicDate(n); n = Dw.toGregorian(f.year, 1, 1); var y = this.islamicDayCell(n); P(y, { role: "gridcell" }); var v = this.calendarInstance.createElement("span"); v.textContent = this.calendarInstance.globalize.formatDate(n, { type: "dateTime", format: "y", calendar: "islamic" }), m < l || m > h ? S([y], rM) : m < new Date(this.islamicInValue(this.calendarInstance.min)).getFullYear() || m > new Date(this.islamicInValue(this.calendarInstance.max)).getFullYear() ? S([y], oM) : d(t) || this.getIslamicDate(n).year !== this.getIslamicDate(t).year ? n.getFullYear() !== this.calendarInstance.currentDate.getFullYear() || y.classList.contains(oM) || S([y], "e-focused-date") : S([y], sM), y.classList.contains(oM) || Kv.add(y, "click", this.calendarInstance.clickHandler, this.calendarInstance), y.appendChild(v), i.push(y) } this.islamicRenderTemplate(i, 4, "e-decade", e, t) }, e.prototype.islamicDayCell = function (e) { var t = { skeleton: "full", type: "dateTime", calendar: "islamic" }, i = this.calendarInstance.globalize.formatDate(e, t), n = { className: "e-cell", attrs: { id: "" + p("" + this.calendarInstance.globalize.parseDate(i, t).valueOf()), "aria-selected": "false", role: "gridcell" } }; return this.calendarInstance.createElement("td", n) }, e.prototype.islamicRenderTemplate = function (e, t, i, n, r) { var o, s = this.calendarInstance.getViewNumber(this.calendarInstance.currentView()); this.calendarInstance.tableBodyElement = this.calendarInstance.createElement("tbody"), this.calendarInstance.table.appendChild(this.calendarInstance.tableBodyElement), x([this.calendarInstance.contentElement, this.calendarInstance.headerElement], ["e-month", "e-decade", "e-year"]), S([this.calendarInstance.contentElement, this.calendarInstance.headerElement], [i]); for (var a = t, l = 0, h = 0; h < e.length / t; ++h) { for (o = this.calendarInstance.createElement("tr", { attrs: { role: "row" } }), l = 0 + l; l < a; l++)e[l].classList.contains("e-week-number") || d(e[l].children[0]) || (S([e[l].children[0]], ["e-day"]), ee(e[l].children[0], { duration: 600, isCenterRipple: !0 })), o.appendChild(e[l]), this.calendarInstance.weekNumber && 7 === l && e[7].classList.contains(rM) && S([o], aM), !this.calendarInstance.weekNumber && 6 === l && e[6].classList.contains(rM) && S([o], aM), this.calendarInstance.weekNumber ? 41 === l && e[41].classList.contains(rM) && S([o], aM) : 35 === l && e[35].classList.contains(rM) && S([o], aM); a += t, l += 0, this.calendarInstance.tableBodyElement.appendChild(o) } this.calendarInstance.table.querySelector("tbody").className = this.calendarInstance.effect, this.islamicIconHandler(), (s !== this.calendarInstance.getViewNumber(this.calendarInstance.currentView()) || 0 === s && s !== this.calendarInstance.getViewNumber(this.calendarInstance.currentView())) && this.calendarInstance.navigateHandler(n), this.calendarInstance.setAriaActiveDescendant(), this.calendarInstance.changedArgs = { value: this.calendarInstance.value, values: this.calendarInstance.values }, this.calendarInstance.changeHandler() }, e.prototype.islamicCompareMonth = function (e, t) { var i = this.getIslamicDate(e), n = this.getIslamicDate(t); return i.year > n.year ? 1 : i.year < n.year ? -1 : i.month === n.month ? 0 : i.month > n.month ? 1 : -1 }, e.prototype.islamicCompare = function (e, t, i) { var n, r, o = this.getIslamicDate(e), s = this.getIslamicDate(t).year; return n = s, r = 0, i && (n = (s -= s % i) - s % i + i - 1), o.year > n ? r = 1 : "Decade" === this.calendarInstance.currentView() && o.year < s && !(e.getFullYear() >= 2060 && e.getFullYear() <= 2069) ? r = -1 : o.year < s && "Year" === this.calendarInstance.currentView() && (r = -1), r }, e.prototype.getIslamicDate = function (e) { return Dw.getHijriDate(e) }, e.prototype.toGregorian = function (e, t, i) { return Dw.toGregorian(e, t, i) }, e.prototype.hijriCompareYear = function (e, t) { return this.islamicCompare(e, t, 0) }, e.prototype.hijriCompareDecade = function (e, t) { return this.islamicCompare(e, t, 10) }, e.prototype.destroy = function () { this.calendarInstance = null }, e.prototype.islamicInValue = function (e) { return e instanceof Date ? e.toUTCString() : "" + e }, e }(), hM = !1, dM = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), cM = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, pM = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return dM(t, e), cM([Y("left")], t.prototype, "X", void 0), cM([Y("top")], t.prototype, "Y", void 0), t }(ww), uM = "e-popup", gM = "e-rtl", mM = "e-popup-open", fM = "e-popup-close", yM = function (e) { function t(t, i) { return e.call(this, i, t) || this } return dM(t, e), t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "width": z(this.element, { width: v(e.width) }); break; case "height": z(this.element, { height: v(e.height) }); break; case "zIndex": z(this.element, { zIndex: e.zIndex }); break; case "enableRtl": this.setEnableRtl(); break; case "position": case "relateTo": this.refreshPosition(); break; case "offsetX": var r = e.offsetX - t.offsetX; this.element.style.left = (parseInt(this.element.style.left, 10) + r).toString() + "px"; break; case "offsetY": var o = e.offsetY - t.offsetY; this.element.style.top = (parseInt(this.element.style.top, 10) + o).toString() + "px"; break; case "content": this.setContent(); break; case "actionOnScroll": "none" !== e.actionOnScroll ? this.wireScrollEvents() : this.unwireScrollEvents() } } }, t.prototype.getModuleName = function () { return "popup" }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.destroy = function () { this.element.classList.remove(uM, gM), this.unwireEvents(), e.prototype.destroy.call(this) }, t.prototype.render = function () { this.element.classList.add(uM); var e = {}; 1e3 !== this.zIndex && (e.zIndex = this.zIndex), "auto" !== this.width && (e.width = v(this.width)), "auto" !== this.height && (e.height = v(this.height)), z(this.element, e), this.fixedParent = !1, this.setEnableRtl(), this.setContent(), this.wireEvents() }, t.prototype.wireEvents = function () { uw.isDevice && Kv.add(window, "orientationchange", this.orientationOnChange, this), "none" !== this.actionOnScroll && this.wireScrollEvents() }, t.prototype.wireScrollEvents = function () { if (this.getRelateToElement()) for (var e = 0, t = this.getScrollableParent(this.getRelateToElement()); e < t.length; e++) { var i = t[e]; Kv.add(i, "scroll", this.scrollRefresh, this) } }, t.prototype.unwireEvents = function () { uw.isDevice && Kv.remove(window, "orientationchange", this.orientationOnChange), "none" !== this.actionOnScroll && this.unwireScrollEvents() }, t.prototype.unwireScrollEvents = function () { if (this.getRelateToElement()) for (var e = 0, t = this.getScrollableParent(this.getRelateToElement()); e < t.length; e++) { var i = t[e]; Kv.remove(i, "scroll", this.scrollRefresh) } }, t.prototype.getRelateToElement = function () { var e = "" === this.relateTo || d(this.relateTo) ? document.body : this.relateTo; return this.setProperties({ relateTo: e }, !0), "string" == typeof this.relateTo ? document.querySelector(this.relateTo) : this.relateTo }, t.prototype.scrollRefresh = function (e) { if ("reposition" === this.actionOnScroll ? this.element.offsetParent === e.target || this.element.offsetParent && "BODY" === this.element.offsetParent.tagName && null == e.target.parentElement || this.refreshPosition() : "hide" === this.actionOnScroll && this.hide(), "none" !== this.actionOnScroll && this.getRelateToElement()) { var t = this.isElementOnViewport(this.getRelateToElement(), e.target); t || this.targetInvisibleStatus ? t && (this.targetInvisibleStatus = !1) : (this.trigger("targetExitViewport"), this.targetInvisibleStatus = !0) } }, t.prototype.isElementOnViewport = function (e, t) { for (var i = this.getScrollableParent(e), n = 0; n < i.length; n++)if (!this.isElementVisible(e, i[n])) return !1; return !0 }, t.prototype.isElementVisible = function (e, t) { var i = this.checkGetBoundingClientRect(e); if (!i.height || !i.width) return !1; if (d(this.checkGetBoundingClientRect(t))) { var n = window, r = n.scrollY, o = n.scrollX, s = n.scrollX + n.outerWidth, a = n.scrollY + n.outerHeight, l = Ie(e), h = l.top, c = l.left, p = l.left + i.width, u = l.top + i.height; return a - h > 0 && s - c > 0 && p - o > 0 && u - r > 0 } var g = t.getBoundingClientRect(); return !(i.bottom < g.top || i.bottom > g.bottom || i.right > g.right || i.left < g.left) }, t.prototype.preRender = function () { }, t.prototype.setEnableRtl = function () { this.reposition(), this.enableRtl ? this.element.classList.add(gM) : this.element.classList.remove(gM) }, t.prototype.setContent = function () { d(this.content) || (this.element.innerHTML = "", "string" == typeof this.content ? this.element.textContent = this.content : this.element.appendChild(this.content)) }, t.prototype.orientationOnChange = function () { var e = this; setTimeout(function () { e.refreshPosition() }, 200) }, t.prototype.refreshPosition = function (e, t) { d(e) || this.checkFixedParent(e), this.reposition(), t || this.checkCollision() }, t.prototype.reposition = function () { var e, t, i = this.getRelateToElement(); if ("number" == typeof this.position.X && "number" == typeof this.position.Y) e = { left: this.position.X, top: this.position.Y }; else if ("string" == typeof this.position.X && "number" == typeof this.position.Y || "number" == typeof this.position.X && "string" == typeof this.position.Y) { var n = this.element.style.display, r = void 0; this.element.style.display = "block", this.element.classList.contains("e-dlg-modal") && (r = this.element.parentElement.style.display, this.element.parentElement.style.display = "block"), t = this.getAnchorPosition(i, this.element, this.position, this.offsetX, this.offsetY), e = "string" == typeof this.position.X ? { left: t.left, top: this.position.Y } : { left: this.position.X, top: t.top }, this.element.style.display = n, this.element.classList.contains("e-dlg-modal") && (this.element.parentElement.style.display = r) } else if (i) { n = this.element.style.display; this.element.style.display = "block", e = this.getAnchorPosition(i, this.element, this.position, this.offsetX, this.offsetY), this.element.style.display = n } else e = { left: 0, top: 0 }; d(e) || (this.element.style.left = e.left + "px", this.element.style.top = e.top + "px") }, t.prototype.checkGetBoundingClientRect = function (e) { try { return e.getBoundingClientRect() } catch (e) { return null } }, t.prototype.getAnchorPosition = function (e, t, i, n, r) { var o = this.checkGetBoundingClientRect(t), s = this.checkGetBoundingClientRect(e); if (d(o) || d(s)) return null; var a = e, l = { left: 0, top: 0 }; switch (t.offsetParent && "BODY" === t.offsetParent.tagName && "BODY" === e.tagName ? l = Ie(e) : (t.classList.contains("e-dlg-modal") && "BODY" !== a.tagName && (t = t.parentElement), l = je(a, t)), i.X) { default: case "left": break; case "center": t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.left += window.innerWidth / 2 - o.width / 2 : "container" === this.targetType ? l.left += s.width / 2 - o.width / 2 : l.left += s.width / 2; break; case "right": t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.left += window.innerWidth - o.width : "container" === this.targetType ? l.left += s.width - o.width : l.left += s.width }switch (i.Y) { default: case "top": break; case "center": t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.top += window.innerHeight / 2 - o.height / 2 : "container" === this.targetType ? l.top += s.height / 2 - o.height / 2 : l.top += s.height / 2; break; case "bottom": t.classList.contains("e-dlg-modal") && "BODY" === a.tagName && "container" === this.targetType ? l.top += window.innerHeight - o.height : "container" === this.targetType ? l.top += s.height - o.height : l.top += s.height }return l.left += n, l.top += r, l }, t.prototype.callFlip = function (e) { var t = this.getRelateToElement(); Ye(this.element, t, this.offsetX, this.offsetY, this.position.X, this.position.Y, this.viewPortElement, e, this.fixedParent) }, t.prototype.callFit = function (e) { if (0 !== _e(this.element, this.viewPortElement).length) if (d(this.viewPortElement)) { var t = He(this.element, this.viewPortElement, e); e.X && (this.element.style.left = t.left + "px"), e.Y && (this.element.style.top = t.top + "px") } else { var i = this.checkGetBoundingClientRect(this.element), n = this.checkGetBoundingClientRect(this.viewPortElement); if (d(i) || d(n)) return null; e && !0 === e.Y && (n.top > i.top ? this.element.style.top = "0px" : n.bottom < i.bottom && (this.element.style.top = parseInt(this.element.style.top, 10) - (i.bottom - n.bottom) + "px")), e && !0 === e.X && (n.right < i.right ? this.element.style.left = parseInt(this.element.style.left, 10) - (i.right - n.right) + "px" : n.left > i.left && (this.element.style.left = parseInt(this.element.style.left, 10) + (n.left - i.left) + "px")) } }, t.prototype.checkCollision = function () { var e = this.collision.X, t = this.collision.Y; "none" === e && "none" === t || ("flip" === e && "flip" === t ? this.callFlip({ X: !0, Y: !0 }) : "fit" === e && "fit" === t ? this.callFit({ X: !0, Y: !0 }) : ("flip" === e ? this.callFlip({ X: !0, Y: !1 }) : "flip" === t && this.callFlip({ Y: !0, X: !1 }), "fit" === e ? this.callFit({ X: !0, Y: !1 }) : "fit" === t && this.callFit({ X: !1, Y: !0 }))) }, t.prototype.show = function (e, t) { var i = this; if (1e3 === this.zIndex || !d(t)) { var n = d(t) ? this.element : t; this.zIndex = ht(n), z(this.element, { zIndex: this.zIndex }) } e = d(e) || "object" != typeof e ? this.showAnimation : e, "none" === this.collision.X && "none" === this.collision.Y || (x([this.element], fM), S([this.element], mM), this.checkCollision(), x([this.element], mM), S([this.element], fM)), d(e) ? (x([this.element], fM), S([this.element], mM), this.trigger("open")) : (e.begin = function () { i.isDestroyed || (x([i.element], fM), S([i.element], mM)) }, e.end = function () { i.isDestroyed || i.trigger("open") }, new fw(e).animate(this.element)) }, t.prototype.hide = function (e) { var t = this; d(e = d(e) || "object" != typeof e ? this.hideAnimation : e) ? (x([this.element], mM), S([this.element], fM), this.trigger("close")) : (e.end = function () { t.isDestroyed || (x([t.element], mM), S([t.element], fM), t.trigger("close")) }, new fw(e).animate(this.element)) }, t.prototype.getScrollableParent = function (e) { return this.checkFixedParent(e), lt(e, this.fixedParent) }, t.prototype.checkFixedParent = function (e) { for (var t = e.parentElement; t && "HTML" !== t.tagName;) { var i = getComputedStyle(t); "fixed" === i.position && this.element.offsetParent && "BODY" === this.element.offsetParent.tagName && (this.element.style.position = "fixed", this.fixedParent = !0), t = t.parentElement, d(this.element.offsetParent) && "fixed" === i.position && "fixed" === this.element.style.position && (this.fixedParent = !0) } }, cM([Y("auto")], t.prototype, "height", void 0), cM([Y("auto")], t.prototype, "width", void 0), cM([Y(null)], t.prototype, "content", void 0), cM([Y("container")], t.prototype, "targetType", void 0), cM([Y(null)], t.prototype, "viewPortElement", void 0), cM([Y({ X: "none", Y: "none" })], t.prototype, "collision", void 0), cM([Y("")], t.prototype, "relateTo", void 0), cM([U({}, pM)], t.prototype, "position", void 0), cM([Y(0)], t.prototype, "offsetX", void 0), cM([Y(0)], t.prototype, "offsetY", void 0), cM([Y(1e3)], t.prototype, "zIndex", void 0), cM([Y(!1)], t.prototype, "enableRtl", void 0), cM([Y("reposition")], t.prototype, "actionOnScroll", void 0), cM([Y(null)], t.prototype, "showAnimation", void 0), cM([Y(null)], t.prototype, "hideAnimation", void 0), cM([X()], t.prototype, "open", void 0), cM([X()], t.prototype, "close", void 0), cM([X()], t.prototype, "targetExitViewport", void 0), t = cM([J], t) }(Kw), vM = ["north-west", "north", "north-east", "west", "east", "south-west", "south", "south-east"], wM = 0, bM = 0, CM = 0, LM = 0, MM = 0, SM = 0, xM = "e-resize-handle", TM = "e-focused-handle", DM = ["e-restrict-left"], AM = "e-resize-viewport", EM = null, jM = null, IM = null, kM = !0, PM = 0, NM = !0, OM = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), RM = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, zM = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return OM(t, e), RM([Y()], t.prototype, "buttonModel", void 0), RM([Y("Button")], t.prototype, "type", void 0), RM([X()], t.prototype, "click", void 0), t }(ww), BM = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return OM(t, e), RM([Y("Fade")], t.prototype, "effect", void 0), RM([Y(400)], t.prototype, "duration", void 0), RM([Y(0)], t.prototype, "delay", void 0), t }(ww), FM = "e-dialog", VM = "e-dlg-header-content", WM = "e-footer-content", HM = "e-dlg-modal", _M = "e-icon-dlg-close", YM = "e-scroll-disabled", UM = "e-dlg-fullscreen", qM = "e-dlg-closeicon-btn", GM = "Information", QM = "e-scroll-disabled", XM = "e-alert-dialog", JM = "e-confirm-dialog", ZM = "e-restrict-left", KM = "e-resize-viewport", $M = function (e) { function t(t, i) { return e.call(this, t, i) || this } return OM(t, e), t.prototype.render = function () { this.initialize(), this.initRender(), this.wireEvents(), "100%" === this.width && (this.element.style.width = ""), this.enableResize && (this.setResize(), "None" === this.animationSettings.effect && this.getMinHeight()) }, t.prototype.preRender = function () { var e = this; this.headerContent = null, this.allowMaxHeight = !0; for (var t = [], i = 0; i < this.element.classList.length; i++)d(this.element.classList[i].match("e-control")) && d(this.element.classList[i].match(FM)) || t.push(this.element.classList[i]); x([this.element], t), this.clonedEle = this.element.cloneNode(!0), this.closeIconClickEventHandler = function (t) { e.hide(t) }, this.dlgOverlayClickEventHandler = function (t) { e.trigger("overlayClick", t), e.focusContent() }; if (this.l10n = new pb("dialog", { close: "Close" }, this.locale), this.checkPositionData(), d(this.target)) { var n = this.isProtectedOnChange; this.isProtectedOnChange = !0, this.target = document.body, this.isProtectedOnChange = n } }, t.prototype.isNumberValue = function (e) { return /^[-+]?\d*\.?\d+$/.test(e) }, t.prototype.checkPositionData = function () { if (!d(this.position)) { if (!d(this.position.X) && "number" != typeof this.position.X) { if (this.isNumberValue(this.position.X)) { var e = this.isProtectedOnChange; this.isProtectedOnChange = !0, this.position.X = parseFloat(this.position.X), this.isProtectedOnChange = e } } if (!d(this.position.Y) && "number" != typeof this.position.Y) { if (this.isNumberValue(this.position.Y)) { e = this.isProtectedOnChange; this.isProtectedOnChange = !0, this.position.Y = parseFloat(this.position.Y), this.isProtectedOnChange = e } } } }, t.prototype.getEle = function (e, t) { for (var i = void 0, n = 0; n < e.length; n++)if (e[n].classList.contains(t)) { i = e[n]; break } return i }, t.prototype.getMinHeight = function () { var e = "0px", t = "0px"; d(this.element.querySelector("." + VM)) || (e = getComputedStyle(this.headerContent).height); var i = this.getEle(this.element.children, WM); d(i) || (t = getComputedStyle(i).height); !function (e) { Qb = e }(parseInt(e.slice(0, e.indexOf("p")), 10) + 30 + parseInt(t.slice(0, t.indexOf("p")), 10)) }, t.prototype.onResizeStart = function (e) { return this.trigger("resizeStart", e), e.cancel }, t.prototype.onResizing = function (e) { this.trigger("resizing", e) }, t.prototype.onResizeComplete = function (e) { this.trigger("resizeStop", e) }, t.prototype.setResize = function () { if (this.enableResize) { this.element.classList.add("e-dlg-resizable"); var e = getComputedStyle(this.element).minHeight, t = getComputedStyle(this.element).minWidth, i = this.enableRtl ? "south-west" : "south-east"; this.isModal && this.enableRtl ? this.element.classList.add(ZM) : this.isModal && this.target === document.body && this.element.classList.add(KM), dt({ element: this.element, direction: i, minHeight: parseInt(e.slice(0, t.indexOf("p")), 10), maxHeight: this.targetEle.clientHeight, minWidth: parseInt(t.slice(0, t.indexOf("p")), 10), maxWidth: this.targetEle.clientWidth, boundary: this.target === document.body ? null : this.targetEle, resizeBegin: this.onResizeStart.bind(this), resizeComplete: this.onResizeComplete.bind(this), resizing: this.onResizing.bind(this) }) } else Mt(), this.isModal ? this.element.classList.remove(ZM) : this.element.classList.remove(KM), this.element.classList.remove("e-dlg-resizable") }, t.prototype.keyDown = function (e) { var t = this; if (9 === e.keyCode && this.isModal) { var i = void 0; d(this.btnObj) || (i = this.btnObj[this.btnObj.length - 1]), d(i) || document.activeElement !== i.element || e.shiftKey || (e.preventDefault(), this.focusableElements(this.element).focus()), document.activeElement === this.focusableElements(this.element) && e.shiftKey && (e.preventDefault(), d(i) || i.element.focus()) } var n = document.activeElement, r = ["input", "textarea"].indexOf(n.tagName.toLowerCase()) > -1, o = !1; if (r || (o = n.hasAttribute("contenteditable") && "true" === n.getAttribute("contenteditable")), 27 === e.keyCode && this.closeOnEscape && this.hide(e), 13 === e.keyCode && !e.ctrlKey && "textarea" !== n.tagName.toLowerCase() && r && !d(this.primaryButtonEle) || 13 === e.keyCode && e.ctrlKey && ("textarea" === n.tagName.toLowerCase() || o) && !d(this.primaryButtonEle)) { var s; this.buttons.some(function (e, t) { s = t; var i = e.buttonModel; return !d(i) && !0 === i.isPrimary }) && "function" == typeof this.buttons[s].click && setTimeout(function () { t.buttons[s].click.call(t, e) }) } }, t.prototype.initialize = function () { d(this.target) || (this.targetEle = "string" == typeof this.target ? document.querySelector(this.target) : this.target), S([this.element], FM), uw.isDevice && S([this.element], "e-device"), this.setCSSClass(), this.setMaxHeight() }, t.prototype.initRender = function () { var e = this; this.initialRender = !0, P(this.element, { role: "dialog" }), 1e3 === this.zIndex ? (this.setzIndex(this.element, !1), this.calculatezIndex = !0) : this.calculatezIndex = !1, this.setTargetContent(), "" === this.header || d(this.header) || this.setHeader(), this.showCloseIcon && this.renderCloseIcon(), this.setContent(), "" === this.footerTemplate || d(this.footerTemplate) ? d(this.buttons[0].buttonModel) || this.setButton() : this.setFooterTemplate(), this.allowDragging && !d(this.headerContent) && this.setAllowDragging(), P(this.element, { "aria-modal": this.isModal ? "true" : "false" }), this.isModal && this.setIsModal(), d(this.targetEle) || (this.isModal ? this.targetEle.appendChild(this.dlgContainer) : this.targetEle.appendChild(this.element)), this.popupObj = new yM(this.element, { height: this.height, width: this.width, zIndex: this.zIndex, relateTo: this.target, actionOnScroll: "none", open: function (t) { e.focusContent(); var i = { container: e.isModal ? e.dlgContainer : e.element, element: e.element, target: e.target }; e.enableResize && e.getMinHeight(), e.trigger("open", i) }, close: function (t) { e.isModal && S([e.dlgOverlay], "e-fade"), e.unBindEvent(e.element), e.isModal && (e.dlgContainer.style.display = "none"), e.trigger("close", e.closeArgs); var i = document.activeElement; d(i) || d(i.blur) || i.blur(), d(e.storeActiveElement) || e.storeActiveElement.focus() } }), this.positionChange(), this.setEnableRTL(), S([this.element], "e-popup-close"), this.isModal && this.setOverlayZindex(), this.visible ? this.show() : this.isModal && (this.dlgOverlay.style.display = "none"), this.initialRender = !1 }, t.prototype.setOverlayZindex = function (e) { var t; t = d(e) ? parseInt(this.element.style.zIndex, 10) ? parseInt(this.element.style.zIndex, 10) : this.zIndex : e, this.dlgOverlay.style.zIndex = (t - 1).toString(), this.dlgContainer.style.zIndex = t.toString() }, t.prototype.positionChange = function () { this.isModal && (isNaN(parseFloat(this.position.X)) || isNaN(parseFloat(this.position.Y))) ? !isNaN(parseFloat(this.position.X)) && isNaN(parseFloat(this.position.Y)) || isNaN(parseFloat(this.position.X)) && !isNaN(parseFloat(this.position.Y)) ? this.setPopupPosition() : (this.element.style.top = "0px", this.element.style.left = "0px", this.dlgContainer.classList.add("e-dlg-" + this.position.X + "-" + this.position.Y)) : this.setPopupPosition() }, t.prototype.setPopupPosition = function () { this.popupObj.setProperties({ position: { X: this.position.X, Y: this.position.Y } }) }, t.prototype.setAllowDragging = function () { var e = this; this.dragObj = new rb(this.element, { clone: !1, abort: ".e-dlg-closeicon-btn", handle: ".e-dlg-header-content", dragStart: function (t) { e.trigger("dragStart", t) }, dragStop: function (t) { e.isModal && (d(e.position) || e.dlgContainer.classList.remove("e-dlg-" + e.position.X + "-" + e.position.Y), e.element.style.position = "relative"), e.trigger("dragStop", t), e.element.classList.remove(ZM) }, drag: function (t) { e.trigger("drag", t) } }), d(this.targetEle) || (this.dragObj.dragArea = this.targetEle) }, t.prototype.setButton = function () { this.buttonContent = [], this.btnObj = []; for (var e = 0; e < this.buttons.length; e++) { var t = d(this.buttons[e].type) ? "button" : this.buttons[e].type.toLowerCase(), i = this.createElement("button", { attrs: { type: t } }); this.buttonContent.push(i.outerHTML) } this.setFooterTemplate(); for (e = 0; e < this.buttons.length; e++)this.btnObj[e] = new yL(this.buttons[e].buttonModel), "function" == typeof this.buttons[e].click && Kv.add(this.ftrTemplateContent.children[e], "click", this.buttons[e].click, this), this.btnObj[e].appendTo(this.ftrTemplateContent.children[e]), this.btnObj[e].element.classList.add("e-flat"), this.primaryButtonEle = this.element.getElementsByClassName("e-primary")[0] }, t.prototype.setContent = function () { if (P(this.element, { "aria-describedby": this.element.id + "_dialog-content" }), this.contentEle = this.createElement("div", { className: "e-dlg-content", id: this.element.id + "_dialog-content" }), this.innerContentElement) this.contentEle.appendChild(this.innerContentElement); else if (!d(this.content) && "" !== this.content || !this.initialRender) { var e = Object.keys(window); "string" == typeof this.content && -1 === e.indexOf("ejsInterop") ? this.contentEle.innerHTML = this.content : this.content instanceof HTMLElement ? this.contentEle.appendChild(this.content) : this.setTemplate(this.content, this.contentEle) } d(this.headerContent) ? this.element.insertBefore(this.contentEle, this.element.children[0]) : this.element.insertBefore(this.contentEle, this.element.children[1]), "auto" === this.height && this.setMaxHeight() }, t.prototype.setTemplate = function (e, t) { var i, n, r = Object.keys(window); n = t.classList.contains("e-dlg-header") ? this.element.id + "header" : t.classList.contains(WM) ? this.element.id + "footerTemplate" : this.element.id + "content"; var o; d(e.outerHTML) ? (i = ce(e), o = e) : (i = ce(e.outerHTML), o = e.outerHTML); var s = []; if (!d(i)) { for (var a = 0, l = i({}, null, null, n, !(-1 !== r.indexOf("ejsInterop") && !this.isStringTemplate && 0 === o.indexOf("<div>Blazor")) || this.isStringTemplate); a < l.length; a++) { var h = l[a]; s.push(h) } E([].slice.call(s), t), -1 === r.indexOf("ejsInterop") || this.isStringTemplate || 0 !== o.indexOf("<div>Blazor") || this.blazorTemplate(n) } }, t.prototype.blazorTemplate = function (e) { e === this.element.id + "header" ? pe(e, "Header", this) : e === this.element.id + "footerTemplate" ? pe(e, "FooterTemplate", this) : pe(e, "Content", this) }, t.prototype.setMaxHeight = function () { if (this.allowMaxHeight) { var e = this.element.style.display; this.element.style.display = "none", this.element.style.maxHeight = !d(this.target) && this.targetEle.offsetHeight < window.innerHeight ? this.targetEle.offsetHeight - 20 + "px" : window.innerHeight - 20 + "px", this.element.style.display = e } }, t.prototype.setEnableRTL = function () { this.enableRtl ? S([this.element], "e-rtl") : x([this.element], "e-rtl"), d(this.element.querySelector(".e-resize-handle")) || (Mt(), this.setResize()) }, t.prototype.setTargetContent = function () { var e = this; if (d(this.content) || "" === this.content) { var t = "" !== this.element.innerHTML.replace(/\s|<(\/?|\!?)(!--!--)>/g, ""); (this.element.children.length > 0 || t) && (this.innerContentElement = document.createDocumentFragment(), [].slice.call(this.element.childNodes).forEach(function (t) { 8 !== t.nodeType && e.innerContentElement.appendChild(t) })) } }, t.prototype.setHeader = function () { this.headerEle ? this.headerEle.innerHTML = "" : this.headerEle = this.createElement("div", { id: this.element.id + "_title", className: "e-dlg-header" }), this.createHeaderContent(), this.headerContent.appendChild(this.headerEle), this.setTemplate(this.header, this.headerEle), P(this.element, { "aria-labelledby": this.element.id + "_title" }), this.element.insertBefore(this.headerContent, this.element.children[0]) }, t.prototype.setFooterTemplate = function () { this.ftrTemplateContent ? this.ftrTemplateContent.innerHTML = "" : this.ftrTemplateContent = this.createElement("div", { className: WM }), "" === this.footerTemplate || d(this.footerTemplate) ? this.ftrTemplateContent.innerHTML = this.buttonContent.join("") : this.setTemplate(this.footerTemplate, this.ftrTemplateContent), this.element.appendChild(this.ftrTemplateContent) }, t.prototype.createHeaderContent = function () { d(this.headerContent) && (this.headerContent = this.createElement("div", { className: VM })) }, t.prototype.renderCloseIcon = function () { this.closeIcon = this.createElement("button", { className: qM, attrs: { type: "button" } }), this.closeIconBtnObj = new yL({ cssClass: "e-flat", iconCss: _M + " e-icons" }), this.closeIconTitle(), d(this.headerContent) ? (this.createHeaderContent(), A([this.closeIcon], this.headerContent), this.element.insertBefore(this.headerContent, this.element.children[0])) : A([this.closeIcon], this.headerContent), this.closeIconBtnObj.appendTo(this.closeIcon) }, t.prototype.closeIconTitle = function () { this.l10n.setLocale(this.locale); var e = this.l10n.getConstant("close"); this.closeIcon.setAttribute("title", e) }, t.prototype.setCSSClass = function (e) { this.cssClass && S([this.element], this.cssClass.split(" ")), e && x([this.element], e.split(" ")) }, t.prototype.setIsModal = function () { this.dlgContainer = this.createElement("div", { className: "e-dlg-container" }), this.element.classList.remove("e-popup-open"), this.element.parentNode.insertBefore(this.dlgContainer, this.element), this.dlgContainer.appendChild(this.element), S([this.element], HM), this.dlgOverlay = this.createElement("div", { className: "e-dlg-overlay" }), this.dlgOverlay.style.zIndex = (this.zIndex - 1).toString(), this.dlgContainer.appendChild(this.dlgOverlay) }, t.prototype.getValidFocusNode = function (e) { for (var t, i = 0; i < e.length; i++)if (((t = e[i]).clientHeight > 0 || "a" === t.tagName.toLowerCase() && t.hasAttribute("href")) && t.tabIndex > -1 && !t.disabled && !this.disableElement(t, '[disabled],[aria-disabled="true"],[type="hidden"]')) return t; return t }, t.prototype.focusableElements = function (e) { if (!d(e)) { var t = e.querySelectorAll('input,select,textarea,button,a,[contenteditable="true"],[tabindex]'); return this.getValidFocusNode(t) } return null }, t.prototype.getAutoFocusNode = function (e) { var t = e.querySelector("." + qM), i = e.querySelectorAll("[autofocus]"), n = this.getValidFocusNode(i); if (d(n)) { if (n = this.focusableElements(this.contentEle), !d(n)) return t = n; if (!d(this.primaryButtonEle)) return this.element.querySelector(".e-primary") } else t = n; return t }, t.prototype.disableElement = function (e, t) { var i = e ? e.matches || e.webkitMatchesSelector || e.msMatchesSelector : null; if (i) for (; e; e = e.parentNode)if (e instanceof Element && i.call(e, t)) return e; return null }, t.prototype.focusContent = function () { var e = this.getAutoFocusNode(this.element); (d(e) ? this.element : e).focus(), this.bindEvent(this.element) }, t.prototype.bindEvent = function (e) { Kv.add(e, "keydown", this.keyDown, this) }, t.prototype.unBindEvent = function (e) { Kv.remove(e, "keydown", this.keyDown) }, t.prototype.getModuleName = function () { return "dialog" }, t.prototype.onPropertyChanged = function (e, t) { if (this.element.classList.contains(FM)) for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "content": d(this.content) || "" === this.content ? d(this.contentEle) || (I(this.contentEle), this.contentEle = null) : d(this.contentEle) || "dialog" === this.contentEle.getAttribute("role") ? this.setContent() : (this.contentEle.innerHTML = "", "string" == typeof this.content ? this.contentEle.innerHTML = this.content : this.contentEle.appendChild(this.content), this.setMaxHeight()); break; case "header": "" === this.header || d(this.header) ? this.headerEle && (I(this.headerEle), this.headerEle = null) : this.setHeader(); break; case "footerTemplate": if ("" === this.footerTemplate || d(this.footerTemplate)) { if (!this.ftrTemplateContent) return; I(this.ftrTemplateContent), this.ftrTemplateContent = null, this.buttons = [{}] } else this.setFooterTemplate(), this.buttons = [{}]; break; case "showCloseIcon": this.element.getElementsByClassName(_M).length > 0 ? this.showCloseIcon || "" !== this.header && !d(this.header) ? this.showCloseIcon || I(this.closeIcon) : (I(this.headerContent), this.headerContent = null) : (this.renderCloseIcon(), this.wireEvents()); break; case "locale": this.showCloseIcon && this.closeIconTitle(); break; case "visible": this.visible ? this.show() : this.hide(); break; case "isModal": this.updateIsModal(); break; case "height": z(this.element, { height: v(e.height) }); break; case "width": z(this.element, { width: v(e.width) }); break; case "zIndex": this.popupObj.zIndex = this.zIndex, this.isModal && this.setOverlayZindex(this.zIndex), this.calculatezIndex = !1; break; case "cssClass": this.setCSSClass(t.cssClass); break; case "buttons": var r = this.buttons.length; d(this.ftrTemplateContent) || (I(this.ftrTemplateContent), this.ftrTemplateContent = null); for (var o = 0; o < r; o++)d(this.buttons[o].buttonModel) || (this.footerTemplate = "", this.setButton()); break; case "allowDragging": this.allowDragging && !d(this.headerContent) ? this.setAllowDragging() : this.dragObj.destroy(); break; case "target": this.popupObj.relateTo = e.target; break; case "position": if (this.checkPositionData(), this.isModal) { var s = d(t.position.X) ? this.position.X : t.position.X, a = d(t.position.Y) ? this.position.Y : t.position.Y; this.dlgContainer.classList.contains("e-dlg-" + s + "-" + a) && this.dlgContainer.classList.remove("e-dlg-" + s + "-" + a) } this.positionChange(); break; case "enableRtl": this.setEnableRTL(); break; case "enableResize": this.setResize() } } }, t.prototype.updateIsModal = function () { if (this.element.setAttribute("aria-modal", this.isModal ? "true" : "false"), this.isModal) this.setIsModal(), this.element.style.top = "0px", this.element.style.left = "0px", d(this.targetEle) || this.targetEle.appendChild(this.dlgContainer); else { for (x([this.element], HM), x([document.body], YM), I(this.dlgOverlay); this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild, this.dlgContainer); this.dlgContainer.parentElement.removeChild(this.dlgContainer) } this.visible && this.show(), this.positionChange(), this.isModal && this.dlgOverlay && Kv.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this) }, t.prototype.setzIndex = function (e, t) { var i = this.isProtectedOnChange; this.isProtectedOnChange = !0, this.zIndex = ht(e), this.isProtectedOnChange = i, t && (this.popupObj.zIndex = this.zIndex) }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.destroy = function () { if (this.element.classList.contains(FM)) { this.unWireEvents(), e.prototype.destroy.call(this); var t = [FM, "e-rtl", HM]; if (x([this.element, this.element], t), this.popupObj.element.classList.contains("e-popup") && this.popupObj.destroy(), !d(this.btnObj)) for (var i = void 0; i < this.btnObj.length; i++)this.btnObj[i].destroy(); for (this.isModal && (I(this.dlgOverlay), this.dlgContainer.parentNode.insertBefore(this.element, this.dlgContainer), I(this.dlgContainer)), this.element.innerHTML = ""; this.element.attributes.length > 0;)this.element.removeAttribute(this.element.attributes[0].name); for (var n = 0; n < this.clonedEle.attributes.length; n++)this.element.setAttribute(this.clonedEle.attributes[n].name, this.clonedEle.attributes[n].value) } }, t.prototype.wireEvents = function () { this.showCloseIcon && Kv.add(this.closeIcon, "click", this.closeIconClickEventHandler, this), this.isModal && this.dlgOverlay && Kv.add(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler, this) }, t.prototype.unWireEvents = function () { if (this.showCloseIcon && Kv.remove(this.closeIcon, "click", this.closeIconClickEventHandler), this.isModal && Kv.remove(this.dlgOverlay, "click", this.dlgOverlayClickEventHandler), !d(this.buttons[0].buttonModel)) for (var e = 0; e < this.buttons.length; e++)"function" == typeof this.buttons[e].click && Kv.remove(this.ftrTemplateContent.children[e], "click", this.buttons[e].click) }, t.prototype.refreshPosition = function () { this.popupObj.refreshPosition() }, t.prototype.show = function (e) { var t = this; if (this.element.classList.contains(FM) && (!this.element.classList.contains("e-popup-open") || !d(e))) { d(e) || this.fullScreen(e); var i = { cancel: !1, element: this.element, container: this.isModal ? this.dlgContainer : this.element, target: this.target, maxHeight: this.element.style.maxHeight }; this.trigger("beforeOpen", i, function (e) { if (!e.cancel) { t.element.style.maxHeight !== i.maxHeight && (t.allowMaxHeight = !1, t.element.style.maxHeight = i.maxHeight), t.storeActiveElement = document.activeElement, t.element.tabIndex = -1, t.isModal && !d(t.dlgOverlay) && (t.dlgOverlay.style.display = "block", t.dlgContainer.style.display = "flex", x([t.dlgOverlay], "e-fade"), d(t.targetEle) ? S([document.body], YM) : (t.targetEle === document.body ? t.dlgContainer.style.position = "fixed" : t.dlgContainer.style.position = "absolute", t.dlgOverlay.style.position = "absolute", t.element.style.position = "relative", S([t.targetEle], YM))); var n = { name: t.animationSettings.effect + "In", duration: t.animationSettings.duration, delay: t.animationSettings.delay }, r = t.isModal ? t.element.parentElement : t.element; t.calculatezIndex && (t.setzIndex(r, !0), z(t.element, { zIndex: t.zIndex }), t.isModal && t.setOverlayZindex(t.zIndex)), "None" === t.animationSettings.effect ? t.popupObj.show() : t.popupObj.show(n), t.dialogOpen = !0; var o = t.isProtectedOnChange; t.isProtectedOnChange = !0, t.visible = !0, t.isProtectedOnChange = o } }) } }, t.prototype.hide = function (e) { var t = this; if (this.element.classList.contains(FM) && this.visible) { var i = { cancel: !1, isInteraction: !!e, isInteracted: !!e, element: this.element, target: this.target, container: this.isModal ? this.dlgContainer : this.element, event: e }; this.closeArgs = i, this.trigger("beforeClose", i, function (e) { if (!e.cancel) { t.isModal && (d(t.targetEle) ? x([document.body], YM) : x([t.targetEle], YM)); var i = { name: t.animationSettings.effect + "Out", duration: t.animationSettings.duration, delay: t.animationSettings.delay }; "None" === t.animationSettings.effect ? t.popupObj.hide() : t.popupObj.hide(i), t.dialogOpen = !1; var n = t.isProtectedOnChange; t.isProtectedOnChange = !0, t.visible = !1, t.isProtectedOnChange = n } }) } }, t.prototype.fullScreen = function (e) { this.element.offsetTop, this.element.offsetLeft; if (e) { S([this.element], UM); var t = this.element.style.display; this.element.style.display = "none", this.element.style.maxHeight = d(this.target) ? window.innerHeight + "px" : this.targetEle.offsetHeight + "px", this.element.style.display = t, S([document.body], YM), this.allowDragging && !d(this.dragObj) && this.dragObj.destroy() } else x([this.element], UM), x([document.body], YM), this.allowDragging && !d(this.headerContent) && this.setAllowDragging(); return e }, t.prototype.getButtons = function (e) { return d(e) ? this.btnObj : this.btnObj[e] }, RM([Y("")], t.prototype, "content", void 0), RM([Y(!1)], t.prototype, "showCloseIcon", void 0), RM([Y(!1)], t.prototype, "isModal", void 0), RM([Y("")], t.prototype, "header", void 0), RM([Y(!0)], t.prototype, "visible", void 0), RM([Y(!1)], t.prototype, "enableResize", void 0), RM([Y("auto")], t.prototype, "height", void 0), RM([Y("100%")], t.prototype, "width", void 0), RM([Y("")], t.prototype, "cssClass", void 0), RM([Y(1e3)], t.prototype, "zIndex", void 0), RM([Y(null)], t.prototype, "target", void 0), RM([Y("")], t.prototype, "footerTemplate", void 0), RM([Y(!1)], t.prototype, "allowDragging", void 0), RM([G([{}], zM)], t.prototype, "buttons", void 0), RM([Y(!0)], t.prototype, "closeOnEscape", void 0), RM([U({}, BM)], t.prototype, "animationSettings", void 0), RM([U({ X: "center", Y: "center" }, pM)], t.prototype, "position", void 0), RM([X()], t.prototype, "created", void 0), RM([X()], t.prototype, "open", void 0), RM([X()], t.prototype, "beforeOpen", void 0), RM([X()], t.prototype, "close", void 0), RM([X()], t.prototype, "beforeClose", void 0), RM([X()], t.prototype, "dragStart", void 0), RM([X()], t.prototype, "dragStop", void 0), RM([X()], t.prototype, "drag", void 0), RM([X()], t.prototype, "overlayClick", void 0), RM([X()], t.prototype, "resizeStart", void 0), RM([X()], t.prototype, "resizing", void 0), RM([X()], t.prototype, "resizeStop", void 0), t = RM([J], t) }(Kw); !function (e) { function t(e, t) { var i = new $M(e); return i.appendTo(t), i } function i(e, t) { return e.header = d(t.title) ? GM : t.title, e.content = d(t.content) ? "" : t.content, e.isModal = !!d(t.isModal) || t.isModal, e.showCloseIcon = !d(t.showCloseIcon) && t.showCloseIcon, e.allowDragging = !d(t.isDraggable) && t.isDraggable, e.closeOnEscape = !d(t.closeOnEscape) && t.closeOnEscape, e.position = d(t.position) ? { X: "center", Y: "top" } : t.position, e.animationSettings = d(t.animationSettings) ? { effect: "Fade", duration: 400, delay: 0 } : t.animationSettings, e.cssClass = d(t.cssClass) ? "" : t.cssClass, e.zIndex = d(t.zIndex) ? 1e3 : t.zIndex, e.open = d(t.open) ? null : t.open, e } function n(e, t, i) { var n = i; return d(t.text) || (n.buttonModel.content = t.text), d(t.icon) || (n.buttonModel.iconCss = t.icon), d(t.cssClass) || (n.buttonModel.cssClass = t.cssClass), d(t.click) || (n.click = t.click), n } e.alert = function (e) { var r = M("div", { className: XM }); document.body.appendChild(r); var o; return o = t("string" == typeof e ? { content: e, position: { X: "center", Y: "top" }, isModal: !0, header: GM, buttons: [{ buttonModel: { isPrimary: !0, content: "OK" }, click: function () { this.hide() } }] } : function (e) { var t = {}; return t.buttons = [], t = i(t, e), t = function (e, t) { var i = [{ buttonModel: { isPrimary: !0, content: "OK" }, click: function () { this.hide() } }]; return d(t.okButton) ? e.buttons = i : e.buttons[0] = n(e.buttons[0], t.okButton, i[0]), e }(t, e) }(e), r), o.close = function () { e && e.close && e.close.apply(o), o.destroy(), o.element.classList.contains("e-dlg-modal") ? (o.element.parentElement.remove(), o.target.classList.remove(QM)) : o.element.remove() }, o }, e.confirm = function (e) { var r = M("div", { className: JM }); document.body.appendChild(r); var o; return o = t("string" == typeof e ? { position: { X: "center", Y: "top" }, content: e, isModal: !0, header: GM, buttons: [{ buttonModel: { isPrimary: !0, content: "OK" }, click: function () { this.hide() } }, { buttonModel: { content: "Cancel" }, click: function () { this.hide() } }] } : function (e) { var t = {}; return t.buttons = [], t = i(t, e), t = function (e, t) { var i = { buttonModel: { isPrimary: !0, content: "OK" }, click: function () { this.hide() } }, r = { buttonModel: { content: "Cancel" }, click: function () { this.hide() } }; return d(t.okButton) ? e.buttons[0] = i : e.buttons[0] = n(e.buttons[0], t.okButton, i), d(t.cancelButton) ? e.buttons[1] = r : e.buttons[1] = n(e.buttons[1], t.cancelButton, r), e }(t, e) }(e), r), o.close = function () { e && e.close && e.close.apply(o), o.destroy(), o.element.classList.contains("e-dlg-modal") ? (o.element.parentElement.remove(), o.target.classList.remove(QM)) : o.element.remove() }, o } }(eC || (eC = {})); var eS, tS = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), iS = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, nS = "e-arrow-tip", rS = "e-arrow-tip-outer", oS = "e-arrow-tip-inner", sS = "e-tip-bottom", aS = "e-tip-right", lS = "e-popup-open", hS = "e-popup-close", dS = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return tS(t, e), iS([Y({ effect: "FadeIn", duration: 150, delay: 0 })], t.prototype, "open", void 0), iS([Y({ effect: "FadeOut", duration: 150, delay: 0 })], t.prototype, "close", void 0), t }(ww), cS = function (e) { function t(t, i) { return e.call(this, t, i) || this } return tS(t, e), t.prototype.initialize = function () { this.formatPosition(), S([this.element], "e-tooltip") }, t.prototype.formatPosition = function () { var e, t; 0 === this.position.indexOf("Top") || 0 === this.position.indexOf("Bottom") ? (e = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = e[0], this.tooltipPositionX = e[1]) : (t = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = t[0], this.tooltipPositionY = t[1]) }, t.prototype.renderArrow = function () { this.setTipClass(this.position); var e = this.createElement("div", { className: nS + " " + this.tipClass }); e.appendChild(this.createElement("div", { className: rS + " " + this.tipClass })), e.appendChild(this.createElement("div", { className: oS + " " + this.tipClass })), this.tooltipEle.appendChild(e) }, t.prototype.setTipClass = function (e) { 0 === e.indexOf("Right") ? this.tipClass = "e-tip-left" : 0 === e.indexOf("Bottom") ? this.tipClass = "e-tip-top" : 0 === e.indexOf("Left") ? this.tipClass = aS : this.tipClass = sS }, t.prototype.renderPopup = function (e) { var t = this.mouseTrail ? { top: 0, left: 0 } : this.getTooltipPosition(e); this.tooltipEle.classList.remove("e-lib"), this.popupObj = new yM(this.tooltipEle, { height: this.height, width: this.width, position: { X: t.left, Y: t.top }, enableRtl: this.enableRtl, open: this.openPopupHandler.bind(this), close: this.closePopupHandler.bind(this) }) }, t.prototype.getTooltipPosition = function (e) { this.tooltipEle.style.display = "none"; var t = Ie(e, this.tooltipPositionX, this.tooltipPositionY); this.tooltipEle.style.display = ""; var i = this.calculateTooltipOffset(this.position); return this.collisionFlipFit(e, t.left + i.left, t.top + i.top) }, t.prototype.reposition = function (e) { var t = this.getTooltipPosition(e); this.popupObj.position = { X: t.left, Y: t.top }, this.popupObj.dataBind() }, t.prototype.openPopupHandler = function () { this.needTemplateReposition() && !this.mouseTrail && this.reposition(this.findTarget()), this.trigger("afterOpen", this.tooltipEventArgs) }, t.prototype.closePopupHandler = function () { ue(this.element.id + "content"), this.clear(), this.trigger("afterClose", this.tooltipEventArgs) }, t.prototype.calculateTooltipOffset = function (e) { var t = { top: 0, left: 0 }, i = this.tooltipEle.offsetWidth, n = this.tooltipEle.offsetHeight, r = this.tooltipEle.querySelector("." + nS), o = r ? r.offsetWidth : 0, s = r ? r.offsetHeight : 0, a = this.showTipPointer ? 0 : 8, l = s / 2 + 2 + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight), h = o / 2 + 2 + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth); switch (this.mouseTrail && (a += 2), e) { case "RightTop": t.left += o + a, t.top -= n - l; break; case "RightCenter": t.left += o + a, t.top -= n / 2; break; case "RightBottom": t.left += o + a, t.top -= l; break; case "BottomRight": t.top += s + a, t.left -= h; break; case "BottomCenter": t.top += s + a, t.left -= i / 2; break; case "BottomLeft": t.top += s + a, t.left -= i - h; break; case "LeftBottom": t.left -= o + i + a, t.top -= l; break; case "LeftCenter": t.left -= o + i + a, t.top -= n / 2; break; case "LeftTop": t.left -= o + i + a, t.top -= n - l; break; case "TopLeft": t.top -= n + s + a, t.left -= i - h; break; case "TopRight": t.top -= n + s + a, t.left -= h; break; default: t.top -= n + s + a, t.left -= i / 2 }return t.left += this.offsetX, t.top += this.offsetY, t }, t.prototype.updateTipPosition = function (e) { var t = this.tooltipEle.querySelectorAll("." + nS + ",." + rS + ",." + oS); x(t, [sS, "e-tip-top", "e-tip-left", aS]), this.setTipClass(e), S(t, this.tipClass) }, t.prototype.adjustArrow = function (e, t, i, n) { if (!1 !== this.showTipPointer) { this.updateTipPosition(t); var r, o, s = this.tooltipEle.clientWidth, a = this.tooltipEle.clientHeight, l = this.tooltipEle.querySelector("." + nS), h = this.tooltipEle.querySelector("." + oS), d = l.offsetWidth, c = l.offsetHeight; if (this.tipClass === sS || "e-tip-top" === this.tipClass) { this.tipClass === sS ? (o = "99.9%", h.style.top = "-" + (c - 2) + "px") : (o = -(c - 1) + "px", h.style.top = "-" + (c - 6) + "px"); r = (p = "Center" !== i || s > e.offsetWidth || this.mouseTrail) && "Left" === i || !p && "End" === this.tipPointerPosition ? s - d - 2 + "px" : p && "Right" === i || !p && "Start" === this.tipPointerPosition ? "2px" : s / 2 - d / 2 + "px" } else { this.tipClass === aS ? (r = "99.9%", h.style.left = "-" + (d - 2) + "px") : (r = -(d - 1) + "px", h.style.left = d - 2 - d + "px"); var p; o = (p = "Center" !== n || a > e.offsetHeight || this.mouseTrail) && "Top" === n || !p && "End" === this.tipPointerPosition ? a - c - 2 + "px" : p && "Bottom" === n || !p && "Start" === this.tipPointerPosition ? "2px" : a / 2 - c / 2 + "px" } l.style.top = o, l.style.left = r } }, t.prototype.renderContent = function (e) { var t = this.tooltipEle.querySelector(".e-tip-content"); if (e && !d(e.getAttribute("title")) && (e.setAttribute("data-content", e.getAttribute("title")), e.removeAttribute("title")), d(this.content)) e && !d(e.getAttribute("data-content")) && (t.innerHTML = e.getAttribute("data-content")); else if (t.innerHTML = "", this.content instanceof HTMLElement) t.appendChild(this.content); else if ("string" == typeof this.content && this.content.indexOf("<div>Blazor") < 0) t.innerHTML = this.content; else { E(ce(this.content)({}, null, null, this.element.id + "content"), t), this.content.indexOf("<div>Blazor") >= 0 && (this.isBlazorTemplate = !0, pe(this.element.id + "content", "Content", this)) } }, t.prototype.renderCloseIcon = function () { if (this.isSticky) { var e = this.createElement("div", { className: "e-icons e-tooltip-close" }); this.tooltipEle.appendChild(e), Kv.add(e, uw.touchStartEvent, this.onStickyClose, this) } }, t.prototype.addDescribedBy = function (e, t) { var i = (e.getAttribute("aria-describedby") || "").split(/\s+/); i.indexOf(t) < 0 && i.push(t), P(e, { "aria-describedby": i.join(" ").trim(), "data-tooltip-id": t }) }, t.prototype.removeDescribedBy = function (e) { var t = e.getAttribute("data-tooltip-id"), i = (e.getAttribute("aria-describedby") || "").split(/\s+/), n = i.indexOf(t); -1 !== n && i.splice(n, 1), e.removeAttribute("data-tooltip-id"); var r = i.join(" ").trim(); r ? e.setAttribute("aria-describedby", r) : e.removeAttribute("aria-describedby") }, t.prototype.tapHoldHandler = function (e) { clearTimeout(this.autoCloseTimer), this.targetHover(e.originalEvent) }, t.prototype.touchEndHandler = function (e) { var t = this; if (!this.isSticky) { this.autoCloseTimer = setTimeout(function () { t.close() }, 1500) } }, t.prototype.targetClick = function (e) { var t; d(t = this.target ? R(e.target, this.target) : this.element) || (null === t.getAttribute("data-tooltip-id") ? this.targetHover(e) : this.isSticky || this.hideTooltip(this.animation.close, e, t)) }, t.prototype.targetHover = function (e) { var t; if (t = this.target ? R(e.target, this.target) : this.element, !d(t) && null === t.getAttribute("data-tooltip-id")) { for (var i = 0, n = [].slice.call(document.querySelectorAll("[data-tooltip-id= " + this.ctrlId + "_content]")); i < n.length; i++) { var r = n[i]; this.restoreElement(r) } this.showTooltip(t, this.animation.open, e), this.wireMouseEvents(e, t) } }, t.prototype.showTooltip = function (e, t, i) { var n = this; clearTimeout(this.showTimer), clearTimeout(this.hideTimer), this.tooltipEventArgs = i ? { type: i.type, cancel: !1, target: e, event: i, element: this.tooltipEle } : { type: null, cancel: !1, target: e, event: null, element: this.tooltipEle }, this.trigger("beforeRender", this.tooltipEventArgs, function (r) { if (r.cancel) n.isHidden = !0, n.clear(); else { n.isHidden = !1, d(n.tooltipEle) ? (n.ctrlId = n.element.getAttribute("id") ? p(n.element.getAttribute("id")) : p("tooltip"), n.tooltipEle = n.createElement("div", { className: "e-tooltip-wrap e-popup e-lib", attrs: { role: "tooltip", "aria-hidden": "false", id: n.ctrlId + "_content" }, styles: "width:" + v(n.width) + ";height:" + v(n.height) + ";position:absolute;" }), n.cssClass && S([n.tooltipEle], n.cssClass.split(" ")), uw.isDevice && S([n.tooltipEle], "e-bigger"), "auto" !== n.width && (n.tooltipEle.style.maxWidth = v(n.width)), n.tooltipEle.appendChild(n.createElement("div", { className: "e-tip-content" })), document.body.appendChild(n.tooltipEle), n.addDescribedBy(e, n.ctrlId + "_content"), n.renderContent(e), S([n.tooltipEle], lS), n.showTipPointer && n.renderArrow(), n.renderCloseIcon(), n.renderPopup(e)) : (n.adjustArrow(e, n.position, n.tooltipPositionX, n.tooltipPositionY), n.addDescribedBy(e, n.ctrlId + "_content"), n.renderContent(e), fw.stop(n.tooltipEle), n.reposition(e)), x([n.tooltipEle], lS), S([n.tooltipEle], hS), n.tooltipEventArgs = i ? { type: i.type, cancel: !1, target: e, event: i, element: n.tooltipEle } : { type: null, cancel: !1, target: e, event: null, element: n.tooltipEle }; var o = n; n.needTemplateReposition() && !n.mouseTrail && (n.tooltipEle.style.display = "none"), n.trigger("beforeOpen", n.tooltipEventArgs, function (i) { if (i.cancel) o.isHidden = !0, o.clear(), o.restoreElement(e); else { var n = { name: t.effect, duration: t.duration, delay: t.delay, timingFunction: "easeOut" }; if ("None" === t.effect && (n = void 0), o.openDelay > 0) { o.showTimer = setTimeout(function () { o.popupObj && o.popupObj.show(n, e) }, o.openDelay) } else o.popupObj.show(n, e) } }) } }) }, t.prototype.needTemplateReposition = function () { return !d(this.viewContainerRef) && "string" != typeof this.viewContainerRef || w() && this.isBlazorTemplate }, t.prototype.checkCollision = function (e, t, i) { var n = { left: t, top: i, position: this.position, horizontal: this.tooltipPositionX, vertical: this.tooltipPositionY }, r = _e(this.tooltipEle, this.target ? this.element : null, t, i); return r.length > 0 && (n.horizontal = r.indexOf("left") >= 0 ? "Right" : r.indexOf("right") >= 0 ? "Left" : this.tooltipPositionX, n.vertical = r.indexOf("top") >= 0 ? "Bottom" : r.indexOf("bottom") >= 0 ? "Top" : this.tooltipPositionY), n }, t.prototype.collisionFlipFit = function (e, t, i) { var n = this.checkCollision(e, t, i), r = n.position; if (this.tooltipPositionY !== n.vertical && (r = 0 === this.position.indexOf("Bottom") || 0 === this.position.indexOf("Top") ? n.vertical + this.tooltipPositionX : this.tooltipPositionX + n.vertical), this.tooltipPositionX !== n.horizontal && (0 === r.indexOf("Left") && (n.vertical = "LeftTop" === r || "LeftCenter" === r ? "Top" : "Bottom", r = n.vertical + "Left"), 0 === r.indexOf("Right") && (n.vertical = "RightTop" === r || "RightCenter" === r ? "Top" : "Bottom", r = n.vertical + "Right"), n.horizontal = this.tooltipPositionX), this.tooltipEventArgs = { type: null, cancel: !1, target: e, event: null, element: this.tooltipEle, collidedPosition: r }, this.trigger("beforeCollision", this.tooltipEventArgs), n.position !== r) { var o = Ie(e, n.horizontal, n.vertical); this.adjustArrow(e, r, n.horizontal, n.vertical); var s = this.calculateTooltipOffset(r); s.top -= -1 !== "TopBottom".indexOf(this.position.split(/(?=[A-Z])/)[0]) && -1 !== "TopBottom".indexOf(r.split(/(?=[A-Z])/)[0]) ? 2 * this.offsetY : 0, s.left -= -1 !== "RightLeft".indexOf(this.position.split(/(?=[A-Z])/)[0]) && -1 !== "RightLeft".indexOf(r.split(/(?=[A-Z])/)[0]) ? 2 * this.offsetX : 0, n.position = r, n.left = o.left + s.left, n.top = o.top + s.top } else this.adjustArrow(e, r, n.horizontal, n.vertical); var a = { left: n.left, top: n.top }, l = He(this.tooltipEle, this.target ? this.element : null, { X: !0, Y: !1 }, a).left; if (this.showTipPointer && (0 === r.indexOf("Bottom") || 0 === r.indexOf("Top"))) { var h = this.tooltipEle.querySelector("." + nS), d = parseInt(h.style.left, 10) - (l - n.left); d < 0 ? d = 0 : d + h.offsetWidth > this.tooltipEle.clientWidth && (d = this.tooltipEle.clientWidth - h.offsetWidth), h.style.left = d.toString() + "px" } return a.left = l, a }, t.prototype.hideTooltip = function (e, t, i) { var n, r = this; t ? (n = this.target ? i || t.target : this.element, this.tooltipEventArgs = { type: t.type, cancel: !1, target: n, event: t, element: this.tooltipEle }) : (n = document.querySelector("[data-tooltip-id= " + this.ctrlId + "_content]"), this.tooltipEventArgs = { type: null, cancel: !1, target: n, event: null, element: this.tooltipEle }), d(n) || this.trigger("beforeClose", this.tooltipEventArgs, function (t) { if (t.cancel) r.isHidden = !1; else { r.restoreElement(n), r.isHidden = !0; var i = { name: e.effect, duration: e.duration, delay: e.delay, timingFunction: "easeIn" }; if ("None" === e.effect && (i = void 0), r.closeDelay > 0) { r.hideTimer = setTimeout(function () { r.popupObj && r.popupObj.hide(i) }, r.closeDelay) } else r.popupObj.hide(i) } }) }, t.prototype.restoreElement = function (e) { this.unwireMouseEvents(e), d(e.getAttribute("data-content")) || (e.setAttribute("title", e.getAttribute("data-content")), e.removeAttribute("data-content")), this.removeDescribedBy(e) }, t.prototype.clear = function () { this.tooltipEle && (x([this.tooltipEle], hS), S([this.tooltipEle], lS)), this.isHidden && (this.popupObj && this.popupObj.destroy(), this.tooltipEle && k(this.tooltipEle), this.tooltipEle = null, this.popupObj = null) }, t.prototype.onMouseOut = function (e) { var t = e.relatedTarget; if (t && !this.mouseTrail) { var i = R(t, ".e-tooltip-wrap.e-lib.e-popup"); i ? (Kv.add(i, "mouseleave", this.tooltipElementMouseOut, this), this.unwireMouseEvents(e.target)) : this.hideTooltip(this.animation.close, e) } else this.hideTooltip(this.animation.close, e) }, t.prototype.tooltipElementMouseOut = function (e) { this.hideTooltip(this.animation.close, e, this.findTarget()), Kv.remove(this.element, "mouseleave", this.tooltipElementMouseOut) }, t.prototype.onStickyClose = function (e) { this.close() }, t.prototype.onMouseMove = function (e) { var t = 0, i = 0; e.type.indexOf("touch") > -1 ? (e.preventDefault(), t = e.touches[0].pageX, i = e.touches[0].pageY) : (t = e.pageX, i = e.pageY), fw.stop(this.tooltipEle), x([this.tooltipEle], hS), S([this.tooltipEle], lS), this.adjustArrow(e.target, this.position, this.tooltipPositionX, this.tooltipPositionY); var n = this.calculateTooltipOffset(this.position), r = t + n.left + this.offsetX, o = i + n.top + this.offsetY, s = this.checkCollision(e.target, r, o); if (this.tooltipPositionX !== s.horizontal || this.tooltipPositionY !== s.vertical) { var a = 0 === this.position.indexOf("Bottom") || 0 === this.position.indexOf("Top") ? s.vertical + s.horizontal : s.horizontal + s.vertical; s.position = a, this.adjustArrow(e.target, s.position, s.horizontal, s.vertical); var l = this.calculateTooltipOffset(s.position); s.left = t + l.left - this.offsetX, s.top = i + l.top - this.offsetY } this.tooltipEle.style.left = s.left + "px", this.tooltipEle.style.top = s.top + "px" }, t.prototype.keyDown = function (e) { this.tooltipEle && 27 === e.keyCode && this.close() }, t.prototype.touchEnd = function (e) { this.tooltipEle && null === R(e.target, ".e-tooltip") && this.close() }, t.prototype.scrollHandler = function (e) { this.tooltipEle && this.close() }, t.prototype.render = function () { this.initialize(), this.wireEvents(this.opensOn) }, t.prototype.preRender = function () { this.tipClass = sS, this.tooltipPositionX = "Center", this.tooltipPositionY = "Top", this.isHidden = !0 }, t.prototype.wireEvents = function (e) { for (var t = 0, i = this.getTriggerList(e); t < i.length; t++) { var n = i[t]; if ("Custom" === n) return; "Focus" === n && this.wireFocusEvents(), "Click" === n && Kv.add(this.element, uw.touchStartEvent, this.targetClick, this), "Hover" === n && (uw.isDevice ? (this.touchModule = new yb(this.element, { tapHoldThreshold: 500, tapHold: this.tapHoldHandler.bind(this) }), Kv.add(this.element, uw.touchEndEvent, this.touchEndHandler, this)) : Kv.add(this.element, "mouseover", this.targetHover, this)) } Kv.add(document, "touchend", this.touchEnd, this), Kv.add(document, "scroll", this.scrollHandler, this), Kv.add(document, "keydown", this.keyDown, this) }, t.prototype.getTriggerList = function (e) { return "Auto" === e && (e = uw.isDevice ? "Hover" : "Hover Focus"), e.split(" ") }, t.prototype.wireFocusEvents = function () { if (d(this.target)) Kv.add(this.element, "focus", this.targetHover, this); else for (var e = 0, t = [].slice.call(this.element.querySelectorAll(this.target)); e < t.length; e++) { var i = t[e]; Kv.add(i, "focus", this.targetHover, this) } }, t.prototype.wireMouseEvents = function (e, t) { this.tooltipEle && (this.isSticky || ("focus" === e.type && Kv.add(t, "blur", this.onMouseOut, this), "mouseover" === e.type && Kv.add(t, "mouseleave", this.onMouseOut, this)), this.mouseTrail && Kv.add(t, "mousemove touchstart mouseenter", this.onMouseMove, this)) }, t.prototype.unwireEvents = function (e) { for (var t = 0, i = this.getTriggerList(e); t < i.length; t++) { var n = i[t]; if ("Custom" === n) return; "Focus" === n && this.unwireFocusEvents(), "Click" === n && Kv.remove(this.element, uw.touchStartEvent, this.targetClick), "Hover" === n && (uw.isDevice ? (this.touchModule && this.touchModule.destroy(), Kv.remove(this.element, uw.touchEndEvent, this.touchEndHandler)) : Kv.remove(this.element, "mouseover", this.targetHover)) } Kv.remove(document, "touchend", this.touchEnd), Kv.remove(document, "scroll", this.scrollHandler), Kv.remove(document, "keydown", this.keyDown) }, t.prototype.unwireFocusEvents = function () { if (d(this.target)) Kv.remove(this.element, "focus", this.targetHover); else for (var e = 0, t = [].slice.call(this.element.querySelectorAll(this.target)); e < t.length; e++) { var i = t[e]; Kv.remove(i, "focus", this.targetHover) } }, t.prototype.unwireMouseEvents = function (e) { if (!this.isSticky) for (var t = 0, i = this.getTriggerList(this.opensOn); t < i.length; t++) { var n = i[t]; "Focus" === n && Kv.remove(e, "blur", this.onMouseOut), "Hover" !== n || uw.isDevice || Kv.remove(e, "mouseleave", this.onMouseOut) } this.mouseTrail && Kv.remove(e, "mousemove touchstart mouseenter", this.onMouseMove) }, t.prototype.findTarget = function () { return document.querySelector("[data-tooltip-id= " + this.ctrlId + "_content]") }, t.prototype.getModuleName = function () { return "tooltip" }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this.findTarget(), n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "width": this.tooltipEle && i && (this.tooltipEle.style.width = v(e.width), this.reposition(i)); break; case "height": this.tooltipEle && i && (this.tooltipEle.style.height = v(e.height), this.reposition(i)); break; case "content": this.tooltipEle && this.renderContent(); break; case "opensOn": this.unwireEvents(t.opensOn), this.wireEvents(e.opensOn); break; case "position": if (this.formatPosition(), this.tooltipEle && i) { var o = this.tooltipEle.querySelector("." + oS); o.style.top = o.style.left = null, this.reposition(i) } break; case "tipPointerPosition": this.tooltipEle && i && this.reposition(i); break; case "offsetX": if (this.tooltipEle) { var s = e.offsetX - t.offsetX; this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + s).toString() + "px" } break; case "offsetY": if (this.tooltipEle) { var a = e.offsetY - t.offsetY; this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + a).toString() + "px" } break; case "cssClass": this.tooltipEle && (t.cssClass && x([this.tooltipEle], t.cssClass.split(" ")), e.cssClass && S([this.tooltipEle], e.cssClass.split(" "))); break; case "enableRtl": this.tooltipEle && (this.enableRtl ? S([this.tooltipEle], "e-rtl") : x([this.tooltipEle], "e-rtl")) } } }, t.prototype.open = function (e, t) { void 0 === t && (t = this.animation.open), "none" !== e.style.display && this.showTooltip(e, t) }, t.prototype.close = function (e) { void 0 === e && (e = this.animation.close), this.hideTooltip(e) }, t.prototype.refresh = function (e) { this.tooltipEle && this.renderContent(e), this.popupObj && e && this.reposition(e) }, t.prototype.destroy = function () { e.prototype.destroy.call(this), x([this.element], "e-tooltip"), this.unwireEvents(this.opensOn), this.unwireMouseEvents(this.element), this.popupObj && this.popupObj.destroy(), this.tooltipEle && k(this.tooltipEle), this.tooltipEle = null, this.popupObj = null }, iS([Y("auto")], t.prototype, "width", void 0), iS([Y("auto")], t.prototype, "height", void 0), iS([Y()], t.prototype, "content", void 0), iS([Y()], t.prototype, "target", void 0), iS([Y("TopCenter")], t.prototype, "position", void 0), iS([Y(0)], t.prototype, "offsetX", void 0), iS([Y(0)], t.prototype, "offsetY", void 0), iS([Y(!0)], t.prototype, "showTipPointer", void 0), iS([Y("Auto")], t.prototype, "tipPointerPosition", void 0), iS([Y("Auto")], t.prototype, "opensOn", void 0), iS([Y(!1)], t.prototype, "mouseTrail", void 0), iS([Y(!1)], t.prototype, "isSticky", void 0), iS([U({}, dS)], t.prototype, "animation", void 0), iS([Y(0)], t.prototype, "openDelay", void 0), iS([Y(0)], t.prototype, "closeDelay", void 0), iS([Y()], t.prototype, "cssClass", void 0), iS([X()], t.prototype, "beforeRender", void 0), iS([X()], t.prototype, "beforeOpen", void 0), iS([X()], t.prototype, "afterOpen", void 0), iS([X()], t.prototype, "beforeClose", void 0), iS([X()], t.prototype, "afterClose", void 0), iS([X()], t.prototype, "beforeCollision", void 0), iS([X()], t.prototype, "created", void 0), iS([X()], t.prototype, "destroyed", void 0), t = iS([J], t) }(Kw), pS = {}, uS = null, gS = null, mS = 30, fS = 30, yS = 30, vS = 36, wS = "e-spin-show", bS = "e-spin-hide", CS = "e-spin-material", LS = "e-spin-fabric", MS = "e-spin-bootstrap", SS = "e-spin-bootstrap4", xS = "e-spin-high-contrast", TS = "e-spinner-pane", DS = "e-spinner-inner", AS = "e-path-circle", ES = "e-path-arc", jS = "e-spin-label", IS = "e-spin-template", kS = { RTL: "e-rtl", DISABLE: "e-disabled", INPUT: "e-input", TEXTAREA: "e-multi-line-input", INPUTGROUP: "e-input-group", FLOATINPUT: "e-float-input", FLOATLINE: "e-float-line", FLOATTEXT: "e-float-text", CLEARICON: "e-clear-icon", CLEARICONHIDE: "e-clear-icon-hide", LABELTOP: "e-label-top", LABELBOTTOM: "e-label-bottom", NOFLOATLABEL: "e-no-float-label", INPUTCUSTOMTAG: "e-input-custom-tag", FLOATCUSTOMTAG: "e-float-custom-tag" }; !function (e) { function t(e, t) { var i = t.value; "" === i || d(i) ? "Always" !== e && t.parentElement.classList.remove("e-valid-input") : t.parentElement.classList.add("e-valid-input") } function i() { var e = l(this).getElementsByClassName("e-float-text")[0]; S([e], kS.LABELTOP), e.classList.contains(kS.LABELBOTTOM) && x([e], kS.LABELBOTTOM) } function n() { var e = l(this); if (e.getElementsByTagName("textarea")[0] ? "" === e.getElementsByTagName("textarea")[0].value : "" === e.getElementsByTagName("input")[0].value) { var t = e.getElementsByClassName("e-float-text")[0]; t.classList.contains(kS.LABELTOP) && x([t], kS.LABELTOP), S([t], kS.LABELBOTTOM) } } function r(e, t, r) { var o, s, l = d(r) ? M : r; "Auto" === e.floatLabelType && function (e) { e.addEventListener("focus", i), e.addEventListener("blur", n) }(e.element), d(t.container) ? (t.container = p(e, kS.FLOATINPUT, kS.FLOATCUSTOMTAG, "div", l), e.element.parentNode.insertBefore(t.container, e.element)) : (d(e.customTag) || t.container.classList.add(kS.FLOATCUSTOMTAG), t.container.classList.add(kS.FLOATINPUT)), o = l("span", { className: kS.FLOATLINE }), s = l("label", { className: kS.FLOATTEXT }), d(e.element.id) || "" === e.element.id || (s.id = "label_" + e.element.id.replace(/ /g, "_"), P(e.element, { "aria-labelledby": s.id })), d(e.element.placeholder) || "" === e.element.placeholder || (s.innerHTML = e.element.placeholder, e.element.removeAttribute("placeholder")), d(e.properties) || d(e.properties.placeholder) || "" === e.properties.placeholder || (s.innerHTML = e.properties.placeholder), s.innerHTML || t.container.classList.add(kS.NOFLOATLABEL), t.container.appendChild(e.element), t.container.appendChild(o), t.container.appendChild(s), a(e.element.value, s), "Always" === e.floatLabelType && (s.classList.contains(kS.LABELBOTTOM) && x([s], kS.LABELBOTTOM), S([s], kS.LABELTOP)), "Auto" === e.floatLabelType && (e.element.addEventListener("input", function (t) { a(e.element.value, s) }), e.element.addEventListener("blur", function (t) { a(e.element.value, s) })), d(e.element.getAttribute("id")) || s.setAttribute("for", e.element.getAttribute("id")) } function o(e, t) { "Always" === e && t.classList.contains("e-outline") && t.classList.add("e-valid-input") } function s(e, t) { e ? x([t], kS.CLEARICONHIDE) : S([t], kS.CLEARICONHIDE) } function a(e, t) { e ? (S([t], kS.LABELTOP), t.classList.contains(kS.LABELBOTTOM) && x([t], kS.LABELBOTTOM)) : (t.classList.contains(kS.LABELTOP) && x([t], kS.LABELTOP), S([t], kS.LABELBOTTOM)) } function l(e) { return e.parentNode } function h(e, t, i, n) { var r = (d(n) ? M : n)("span", { className: kS.CLEARICON }), o = t.container; if (d(i)) { (t.container.classList.contains(kS.FLOATINPUT) ? t.container.querySelector("." + kS.FLOATTEXT) : e).insertAdjacentElement("afterend", r) } else o.appendChild(r); return !d(o) && o.classList.contains(kS.FLOATINPUT) && S([o], kS.INPUTGROUP), S([r], kS.CLEARICONHIDE), function (e, t, i) { t.addEventListener("click", function (i) { e.classList.contains(kS.DISABLE) || e.readOnly || (i.preventDefault(), e !== document.activeElement && e.focus(), e.value = "", S([t], kS.CLEARICONHIDE)) }), e.addEventListener("input", function (i) { s(e.value, t) }), e.addEventListener("focus", function (i) { s(e.value, t) }), e.addEventListener("blur", function (e) { setTimeout(function () { S([t], kS.CLEARICONHIDE) }, 200) }) }(e, r), r.setAttribute("aria-label", "close"), r } function c(e, t) { if (l(e).classList.contains(kS.FLOATINPUT) && "Auto" === t) { var i = l(e).getElementsByClassName("e-float-text")[0]; a(e.value, i) } } function p(e, t, i, n, r) { var o, s = d(r) ? M : r; return d(e.customTag) ? o = s(n, { className: t }) : (o = s(e.customTag, { className: t })).classList.add(i), o.classList.add("e-control-wrapper"), o } function u(e, t, i) { d(i) || "" === i || x(t, i.split(" ")), d(e) || "" === e || S(t, e.split(" ")) } function g(e, t) { var i; e = function (e) { var t = ""; if (!d(e) && "" !== e) { var i = document.createElement("span"); i.innerHTML = e, t = i.innerHTML } return t }(e), (i = l(t)).classList.contains(kS.FLOATINPUT) ? d(e) || "" === e ? (i.classList.add(kS.NOFLOATLABEL), i.getElementsByClassName(kS.FLOATTEXT)[0].textContent = "") : (i.getElementsByClassName(kS.FLOATTEXT)[0].textContent = e, i.classList.remove(kS.NOFLOATLABEL), t.removeAttribute("placeholder")) : d(e) || "" === e ? (t.removeAttribute("placeholder"), t.removeAttribute("aria-placeholder")) : P(t, { placeholder: e, "aria-placeholder": e }) } function m(e, t, i) { e ? P(t, { readonly: "" }) : t.removeAttribute("readonly"), d(i) || c(t, i) } function f(e, t) { e ? S(t, kS.RTL) : x(t, kS.RTL) } function y(e, t, i, n) { var r = { disabled: "disabled", "aria-disabled": "true" }, o = !d(n); e ? (t.classList.remove(kS.DISABLE), w(r, t), o && x([n], kS.DISABLE)) : (t.classList.add(kS.DISABLE), b(r, t), o && S([n], kS.DISABLE)), d(i) || c(t, i) } function v(e, t, i, n, r) { var o = d(r) ? M : r; e ? i.clearButton = h(t, i, n, o) : (i.clearButton.remove(), i.clearButton = null) } function w(e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i], o = void 0; o = l(t), "disabled" === r && t.classList.remove(kS.DISABLE), "disabled" === r && o.classList.contains(kS.INPUTGROUP) && o.classList.remove(kS.DISABLE), "placeholder" === r && o.classList.contains(kS.FLOATINPUT) ? o.getElementsByClassName(kS.FLOATTEXT)[0].textContent = "" : t.removeAttribute(r) } } function b(e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i], o = void 0; o = l(t), "disabled" === r && t.classList.add(kS.DISABLE), "disabled" === r && o.classList.contains(kS.INPUTGROUP) && o.classList.add(kS.DISABLE), "placeholder" === r && o.classList.contains(kS.FLOATINPUT) ? o.getElementsByClassName(kS.FLOATTEXT)[0].textContent = e[r] : t.setAttribute(r, e[r]) } } function C(e, t, i) { var n = []; n.push(i); var r = d(i) ? t.querySelectorAll(".e-input-group-icon") : n; if (e && r.length > 0) for (var o = 0; o < r.length; o++)r[o].addEventListener("mousedown", L, !1), r[o].addEventListener("mouseup", T, !1); else if (r.length > 0) for (o = 0; o < r.length; o++)r[o].removeEventListener("mousedown", L, this), r[o].removeEventListener("mouseup", T, this) } function L() { for (var e = this.parentElement; !e.classList.contains("e-input-group");)e = e.parentElement; !function (e, t) { e.classList.contains("e-disabled") || e.querySelector("input").readOnly || t.classList.add("e-input-btn-ripple") }(e, this) } function T() { var e = this; setTimeout(function () { e.classList.remove("e-input-btn-ripple") }, 500) } function D(e, t, i) { var n = (d(i) ? M : i)("span", { className: e }); return n.classList.add("e-input-group-icon"), t.appendChild(n), t.classList.contains(kS.INPUTGROUP) || t.classList.add(kS.INPUTGROUP), C(!0, t, n), n } var A; e.createInput = function (e, i) { var n = d(i) ? M : i, s = { container: null, buttons: [], clearButton: null }; if (A = e.floatLabelType, d(e.floatLabelType) || "Never" === e.floatLabelType ? (s.container = p(e, kS.INPUTGROUP, kS.INPUTCUSTOMTAG, "span", n), e.element.parentNode.insertBefore(s.container, e.element), S([e.element], kS.INPUT), s.container.appendChild(e.element)) : r(e, s, n), t(e.floatLabelType, e.element), e.element.addEventListener("focus", function () { var e = l(this); (e.classList.contains("e-input-group") || e.classList.contains("e-outline") || e.classList.contains("e-filled")) && e.classList.add("e-input-focus") }), e.element.addEventListener("blur", function () { var e = l(this); (e.classList.contains("e-input-group") || e.classList.contains("e-outline") || e.classList.contains("e-filled")) && e.classList.remove("e-input-focus") }), e.element.addEventListener("input", function () { t(A, e.element) }), d(e.properties) || d(e.properties.showClearButton) || !e.properties.showClearButton || "TEXTAREA" === e.element.tagName || (v(e.properties.showClearButton, e.element, s, !0, n), s.clearButton.setAttribute("role", "button"), s.container.classList.contains(kS.FLOATINPUT) && S([s.container], kS.INPUTGROUP)), !d(e.buttons) && "TEXTAREA" !== e.element.tagName) for (var a = 0; a < e.buttons.length; a++)s.buttons.push(D(e.buttons[a], s.container, n)); return d(e.element) || "TEXTAREA" !== e.element.tagName || S([s.container], kS.TEXTAREA), s = function (e, t) { if (!d(e.properties)) for (var i = 0, n = Object.keys(e.properties); i < n.length; i++) { var r = n[i]; switch (r) { case "cssClass": u(e.properties.cssClass, [t.container]), o(e.floatLabelType, t.container); break; case "enabled": y(e.properties.enabled, e.element, e.floatLabelType, t.container); break; case "enableRtl": f(e.properties.enableRtl, [t.container]); break; case "placeholder": g(e.properties.placeholder, e.element); break; case "readonly": m(e.properties.readonly, e.element) } } return t }(e, s) }, e.setValue = function (e, i, n, r) { if (i.value = e, d(n) || "Auto" !== n || c(i, n), !d(r) && r) { var o = l(i); if (!d(o)) { var s = o.getElementsByClassName(kS.CLEARICON)[0]; i.value && o.classList.contains("e-input-focus") ? x([s], kS.CLEARICONHIDE) : S([s], kS.CLEARICONHIDE) } } t(n, i) }, e.setCssClass = u, e.setPlaceholder = g, e.setReadonly = m, e.setEnableRtl = f, e.setEnabled = y, e.setClearButton = v, e.removeAttributes = w, e.addAttributes = b, e.removeFloating = function (e) { var t = e.container; if (!d(t) && t.classList.contains(kS.FLOATINPUT)) { var r = t.querySelector("textarea") ? t.querySelector("textarea") : t.querySelector("input"), o = t.querySelector("." + kS.FLOATTEXT).textContent, s = null !== t.querySelector(".e-clear-icon"); I(t.querySelector("." + kS.FLOATLINE)), I(t.querySelector("." + kS.FLOATTEXT)), B(t, [kS.INPUTGROUP], [kS.FLOATINPUT]), function (e) { e.removeEventListener("focus", i), e.removeEventListener("blur", n) }(r), P(r, { placeholder: o }), r.classList.add(kS.INPUT), s || "INPUT" !== r.tagName || r.removeAttribute("required") } }, e.addFloating = function (e, t, i, n) { var s = d(n) ? M : n, a = R(e, "." + kS.INPUTGROUP); if (A = t, "Never" !== t) { var l = a.tagName, h = { element: e, floatLabelType: t, customTag: l = "DIV" !== l && "SPAN" !== l ? l : null, properties: { placeholder: i } }, c = a.querySelector(".e-clear-icon"), p = { container: a }; if (e.classList.remove(kS.INPUT), r(h, p, s), d(c) && (c = a.querySelector(".e-input-group-icon")), d(c)) a.classList.remove(kS.INPUTGROUP); else { var u = a.querySelector("." + kS.FLOATLINE), g = a.querySelector("." + kS.FLOATTEXT); a.insertBefore(e, c), a.insertBefore(u, c), a.insertBefore(g, c) } } o(t, e.parentElement) }, e.setRipple = function (e, t) { for (var i = 0; i < t.length; i++)C(e, t[i].container) }, e.appendSpan = D }(eS || (eS = {})); var PS, NS = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), OS = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, RS = "e-input-group-icon", zS = "increment", BS = "decrement", FS = new RegExp("^(-)?(\\d*)$"), VS = ["title", "style", "class"], WS = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.numericOptions = t, n } return NS(t, e), t.prototype.preRender = function () { this.isPrevFocused = !1, this.decimalSeparator = ".", this.intRegExp = new RegExp("/^(-)?(d*)$/"), this.isCalled = !1; var e = n("ej2_instances", this.element); if (this.cloneElement = this.element.cloneNode(!0), x([this.cloneElement], ["e-control", "e-numerictextbox", "e-lib"]), this.angularTagName = null, this.formEle = R(this.element, "form"), "EJS-NUMERICTEXTBOX" === this.element.tagName) { this.angularTagName = this.element.tagName; for (var t = this.createElement("input"), i = 0; i < this.element.attributes.length; i++) { "id" !== this.element.attributes[i].nodeName && (t.setAttribute(this.element.attributes[i].nodeName, this.element.attributes[i].nodeValue), t.innerHTML = this.element.innerHTML) } this.element.hasAttribute("name") && this.element.removeAttribute("name"), this.element.classList.remove("e-control", "e-numerictextbox"), this.element.appendChild(t), this.element = t, r("ej2_instances", e, this.element) } P(this.element, { role: "spinbutton", tabindex: "0", autocomplete: "off", "aria-live": "assertive" }); var o = { incrementTitle: "Increment value", decrementTitle: "Decrement value", placeholder: this.placeholder }; this.l10n = new pb("numerictextbox", o, this.locale), "" !== this.l10n.getConstant("placeholder") && this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, !0), this.isValidState = !0, this.inputStyle = null, this.inputName = null, this.cultureInfo = {}, this.initCultureInfo(), this.initCultureFunc(), this.updateHTMLAttrToElement(), this.checkAttributes(!1), this.prevValue = this.value, this.formEle && (this.inputEleValue = this.value), this.validateMinMax(), this.validateStep(), null === this.placeholder && this.updatePlaceholder() }, t.prototype.render = function () { "input" === this.element.tagName.toLowerCase() && (this.createWrapper(), this.showSpinButton && this.spinBtnCreation(), d(this.width) || z(this.container, { width: v(this.width) }), this.container.classList.contains("e-input-group") || this.container.classList.add("e-input-group"), this.changeValue(null === this.value || isNaN(this.value) ? null : this.strictMode ? this.trimValue(this.value) : this.value), this.wireEvents(), null === this.value || isNaN(this.value) || this.decimals && this.setProperties({ value: this.roundNumber(this.value, this.decimals) }, !0), (this.element.getAttribute("value") || this.value) && this.element.setAttribute("value", this.element.value)) }, t.prototype.checkAttributes = function (e) { for (var t = 0, i = e ? Object.keys(this.htmlAttributes) : ["value", "min", "max", "step", "disabled", "readonly", "style", "name", "placeholder"]; t < i.length; t++) { var n = i[t]; if (!d(this.element.getAttribute(n))) switch (n) { case "disabled": if (d(this.numericOptions) || void 0 === this.numericOptions.enabled || e) { var o = "disabled" !== this.element.getAttribute(n) && "" !== this.element.getAttribute(n) && "true" !== this.element.getAttribute(n); this.setProperties({ enabled: o }, !e) } break; case "readonly": if (d(this.numericOptions) || void 0 === this.numericOptions.readonly || e) { var s = "readonly" === this.element.getAttribute(n) || "" === this.element.getAttribute(n) || "true" === this.element.getAttribute(n); this.setProperties({ readonly: s }, !e) } break; case "placeholder": (d(this.numericOptions) || void 0 === this.numericOptions.placeholder || e) && this.setProperties({ placeholder: this.element.placeholder }, !e); break; case "value": if (d(this.numericOptions) || void 0 === this.numericOptions.value || e) { var a = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(n)); this.setProperties(r(n, a, {}), !e) } break; case "min": if (d(this.numericOptions) || void 0 === this.numericOptions.min || e) { var l = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(n)); null === l || isNaN(l) || this.setProperties(r(n, l, {}), !e) } break; case "max": if (d(this.numericOptions) || void 0 === this.numericOptions.max || e) { var h = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(n)); null === h || isNaN(h) || this.setProperties(r(n, h, {}), !e) } break; case "step": if (d(this.numericOptions) || void 0 === this.numericOptions.step || e) { var c = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(n)); null === c || isNaN(c) || this.setProperties(r(n, c, {}), !e) } break; case "style": this.inputStyle = this.element.getAttribute(n); break; case "name": this.inputName = this.element.getAttribute(n); break; default: var p = this.instance.getNumberParser({ format: "n" })(this.element.getAttribute(n)); (null !== p && !isNaN(p) || "value" === n) && this.setProperties(r(n, p, {}), !0) } } }, t.prototype.updatePlaceholder = function () { this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, !0) }, t.prototype.initCultureFunc = function () { this.instance = new Gw(this.locale) }, t.prototype.initCultureInfo = function () { this.cultureInfo.format = this.format, null !== n("currency", this) && (r("currency", this.currency, this.cultureInfo), this.setProperties({ currencyCode: this.currency }, !0)) }, t.prototype.createWrapper = function () { var e = eS.createInput({ element: this.element, floatLabelType: this.floatLabelType, properties: { readonly: this.readonly, placeholder: this.placeholder, cssClass: this.cssClass, enableRtl: this.enableRtl, showClearButton: this.showClearButton, enabled: this.enabled } }, this.createElement); this.inputWrapper = e, this.container = e.container, this.container.setAttribute("class", "e-control-wrapper e-numeric " + this.container.getAttribute("class")), this.updateHTMLAttrToWrapper(), this.readonly && P(this.element, { "aria-readonly": "true" }), this.hiddenInput = this.createElement("input", { attrs: { type: "hidden", validateHidden: "true" } }), this.inputName = null !== this.inputName ? this.inputName : this.element.id, this.element.removeAttribute("name"), P(this.hiddenInput, { name: this.inputName }), this.container.insertBefore(this.hiddenInput, this.container.childNodes[1]), null !== this.inputStyle && P(this.container, { style: this.inputStyle }) }, t.prototype.updateHTMLAttrToElement = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; VS.indexOf(i) < 0 && this.element.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHTMLAttrToWrapper = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (VS.indexOf(i) > -1) if ("class" === i) S([this.container], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.container.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.container.setAttribute(i, n) } else this.container.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.spinBtnCreation = function () { this.spinDown = eS.appendSpan(RS + " e-spin-down", this.container, this.createElement), P(this.spinDown, { title: this.l10n.getConstant("decrementTitle"), "aria-label": this.l10n.getConstant("decrementTitle") }), this.spinUp = eS.appendSpan(RS + " e-spin-up", this.container, this.createElement), P(this.spinUp, { title: this.l10n.getConstant("incrementTitle"), "aria-label": this.l10n.getConstant("incrementTitle") }), this.wireSpinBtnEvents() }, t.prototype.validateMinMax = function () { ("number" != typeof this.min || isNaN(this.min)) && this.setProperties({ min: -Number.MAX_VALUE }, !0), ("number" != typeof this.max || isNaN(this.max)) && this.setProperties({ max: Number.MAX_VALUE }, !0), null !== this.decimals && (this.min !== -Number.MAX_VALUE && this.setProperties({ min: this.instance.getNumberParser({ format: "n" })(this.formattedValue(this.decimals, this.min)) }, !0), this.max !== Number.MAX_VALUE && this.setProperties({ max: this.instance.getNumberParser({ format: "n" })(this.formattedValue(this.decimals, this.max)) }, !0)), this.setProperties({ min: this.min > this.max ? this.max : this.min }, !0), P(this.element, { "aria-valuemin": this.min.toString(), "aria-valuemax": this.max.toString() }) }, t.prototype.formattedValue = function (e, t) { return this.instance.getNumberFormat({ maximumFractionDigits: e, minimumFractionDigits: e, useGrouping: !1 })(t) }, t.prototype.validateStep = function () { null !== this.decimals && this.setProperties({ step: this.instance.getNumberParser({ format: "n" })(this.formattedValue(this.decimals, this.step)) }, !0) }, t.prototype.action = function (e, t) { this.isInteract = !0; var i = this.isFocused ? this.instance.getNumberParser({ format: "n" })(this.element.value) : this.value; this.changeValue(this.performAction(i, this.step, e)), this.raiseChangeEvent(t) }, t.prototype.checkErrorClass = function () { this.isValidState ? x([this.container], "e-error") : S([this.container], "e-error"), P(this.element, { "aria-invalid": this.isValidState ? "false" : "true" }) }, t.prototype.bindClearEvent = function () { this.showClearButton && Kv.add(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler, this) }, t.prototype.resetHandler = function (e) { e.preventDefault(), this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide") || this.clear(e), this.isInteract = !0, this.raiseChangeEvent(e) }, t.prototype.clear = function (e) { this.setProperties({ value: null }, !0), this.setElementValue("") }, t.prototype.resetFormHandler = function () { "EJS-NUMERICTEXTBOX" === this.element.tagName ? this.updateValue(null) : this.updateValue(this.inputEleValue) }, t.prototype.setSpinButton = function () { d(this.spinDown) || P(this.spinDown, { title: this.l10n.getConstant("decrementTitle"), "aria-label": this.l10n.getConstant("decrementTitle") }), d(this.spinUp) || P(this.spinUp, { title: this.l10n.getConstant("incrementTitle"), "aria-label": this.l10n.getConstant("incrementTitle") }) }, t.prototype.wireEvents = function () { Kv.add(this.element, "focus", this.focusHandler, this), Kv.add(this.element, "blur", this.focusOutHandler, this), Kv.add(this.element, "keydown", this.keyDownHandler, this), Kv.add(this.element, "keyup", this.keyUpHandler, this), Kv.add(this.element, "input", this.inputHandler, this), Kv.add(this.element, "keypress", this.keyPressHandler, this), Kv.add(this.element, "change", this.changeHandler, this), Kv.add(this.element, "paste", this.pasteHandler, this), this.enabled && (this.bindClearEvent(), this.formEle && Kv.add(this.formEle, "reset", this.resetFormHandler, this)) }, t.prototype.wireSpinBtnEvents = function () { Kv.add(this.spinUp, uw.touchStartEvent, this.mouseDownOnSpinner, this), Kv.add(this.spinDown, uw.touchStartEvent, this.mouseDownOnSpinner, this), Kv.add(this.spinUp, uw.touchEndEvent, this.mouseUpOnSpinner, this), Kv.add(this.spinDown, uw.touchEndEvent, this.mouseUpOnSpinner, this), Kv.add(this.spinUp, uw.touchMoveEvent, this.touchMoveOnSpinner, this), Kv.add(this.spinDown, uw.touchMoveEvent, this.touchMoveOnSpinner, this) }, t.prototype.unwireEvents = function () { Kv.remove(this.element, "focus", this.focusHandler), Kv.remove(this.element, "blur", this.focusOutHandler), Kv.remove(this.element, "keyup", this.keyUpHandler), Kv.remove(this.element, "input", this.inputHandler), Kv.remove(this.element, "keydown", this.keyDownHandler), Kv.remove(this.element, "keypress", this.keyPressHandler), Kv.remove(this.element, "change", this.changeHandler), Kv.remove(this.element, "paste", this.pasteHandler), this.formEle && Kv.remove(this.formEle, "reset", this.resetFormHandler) }, t.prototype.unwireSpinBtnEvents = function () { Kv.remove(this.spinUp, uw.touchStartEvent, this.mouseDownOnSpinner), Kv.remove(this.spinDown, uw.touchStartEvent, this.mouseDownOnSpinner), Kv.remove(this.spinUp, uw.touchEndEvent, this.mouseUpOnSpinner), Kv.remove(this.spinDown, uw.touchEndEvent, this.mouseUpOnSpinner), Kv.remove(this.spinUp, uw.touchMoveEvent, this.touchMoveOnSpinner), Kv.remove(this.spinDown, uw.touchMoveEvent, this.touchMoveOnSpinner) }, t.prototype.changeHandler = function (e) { e.stopPropagation(), this.element.value.length || this.setProperties({ value: null }, !0); var t = this.instance.getNumberParser({ format: "n" })(this.element.value); this.updateValue(t, e) }, t.prototype.raiseChangeEvent = function (e) { if (this.prevValue !== this.value) { var t = {}; this.changeEventArgs = { value: this.value, previousValue: this.prevValue, isInteracted: this.isInteract, isInteraction: this.isInteract, event: e }, e && (this.changeEventArgs.event = e), void 0 === this.changeEventArgs.event && (this.changeEventArgs.isInteracted = !1, this.changeEventArgs.isInteraction = !1), l(t, this.changeEventArgs), this.prevValue = this.value, this.isInteract = !1, this.trigger("change", t) } }, t.prototype.pasteHandler = function () { var e = this; if (this.enabled && !this.readonly) { var t = this.element.value; setTimeout(function () { e.numericRegex().test(e.element.value) || e.setElementValue(t) }) } }, t.prototype.preventHandler = function () { var e = this, t = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform); setTimeout(function () { if (e.element.selectionStart > 0) { var i = e.element.selectionStart, r = e.element.selectionStart - 1, o = void 0, s = e.element.value.split(""); o = n("decimal", se(e.locale)).charCodeAt(0), " " === e.element.value[r] && e.element.selectionStart > 0 && !t ? (d(e.prevVal) ? e.element.value = e.element.value.trim() : 0 !== r ? e.element.value = e.prevVal : 0 === r && (e.element.value = e.element.value.trim()), e.element.setSelectionRange(r, r)) : isNaN(parseFloat(e.element.value[e.element.selectionStart - 1])) && 45 !== e.element.value[e.element.selectionStart - 1].charCodeAt(0) ? (s.indexOf(e.element.value[e.element.selectionStart - 1]) !== s.lastIndexOf(e.element.value[e.element.selectionStart - 1]) && e.element.value[e.element.selectionStart - 1].charCodeAt(0) === o || e.element.value[e.element.selectionStart - 1].charCodeAt(0) !== o) && (e.element.value = e.element.value.substring(0, r) + e.element.value.substring(i, e.element.value.length), e.element.setSelectionRange(r, r), isNaN(parseFloat(e.element.value[e.element.selectionStart - 1])) && e.element.selectionStart > 0 && e.element.value.length && e.preventHandler()) : isNaN(parseFloat(e.element.value[e.element.selectionStart - 2])) && e.element.selectionStart > 1 && 45 !== e.element.value[e.element.selectionStart - 2].charCodeAt(0) && (s.indexOf(e.element.value[e.element.selectionStart - 2]) !== s.lastIndexOf(e.element.value[e.element.selectionStart - 2]) && e.element.value[e.element.selectionStart - 2].charCodeAt(0) === o || e.element.value[e.element.selectionStart - 2].charCodeAt(0) !== o) && (e.element.setSelectionRange(r, r), e.nextEle = e.element.value[e.element.selectionStart], e.cursorPosChanged = !0, e.preventHandler()), !0 === e.cursorPosChanged && e.element.value[e.element.selectionStart] === e.nextEle && isNaN(parseFloat(e.element.value[e.element.selectionStart - 1])) && (e.element.setSelectionRange(e.element.selectionStart + 1, e.element.selectionStart + 1), e.cursorPosChanged = !1, e.nextEle = null), "" === e.element.value.trim() && e.element.setSelectionRange(0, 0), e.element.selectionStart > 0 && 45 === e.element.value[e.element.selectionStart - 1].charCodeAt(0) && e.element.selectionStart > 1 && (d(e.prevVal) ? e.element.value = e.element.value : e.element.value = e.prevVal, e.element.setSelectionRange(e.element.selectionStart, e.element.selectionStart)), e.prevVal = e.element.value } }) }, t.prototype.keyUpHandler = function (e) { if (this.enabled && !this.readonly) { !(!!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)) && uw.isDevice && this.preventHandler(); var t = this.instance.getNumberParser({ format: "n" })(this.element.value); t = null === t || isNaN(t) ? null : t, this.hiddenInput.value = t || 0 === t ? t.toString() : null; if (R(this.element, "form")) { var i = this.element.nextElementSibling, n = document.createEvent("KeyboardEvent"); n.initEvent("keyup", !1, !0), i.dispatchEvent(n) } } }, t.prototype.inputHandler = function (e) { if (this.enabled && !this.readonly) { var t = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform); (navigator.userAgent.toLowerCase().indexOf("firefox") > -1 || t) && uw.isDevice && this.preventHandler() } }, t.prototype.keyDownHandler = function (e) { if (!this.readonly) switch (e.keyCode) { case 38: e.preventDefault(), this.action(zS, e); break; case 40: e.preventDefault(), this.action(BS, e) } }, t.prototype.performAction = function (e, t, i) { (null === e || isNaN(e)) && (e = 0); var n = i === zS ? e + t : e - t; return n = this.correctRounding(e, t, n), this.strictMode ? this.trimValue(n) : n }, t.prototype.correctRounding = function (e, t, i) { var n = new RegExp("[,.](.*)"), r = (e.toString(), t.toString(), n.test(e.toString())), o = n.test(t.toString()); if (r || o) { var s = r ? n.exec(e.toString())[0].length : 0, a = o ? n.exec(t.toString())[0].length : 0, l = Math.max(s, a); return e = this.roundValue(i, l) } return i }, t.prototype.roundValue = function (e, t) { t = t || 0; var i = Math.pow(10, t); return e *= i, e = Math.round(e) / i }, t.prototype.updateValue = function (e, t) { t && (this.isInteract = !0), null === e || isNaN(e) || this.decimals && (e = this.roundNumber(e, this.decimals)), this.changeValue(null === e || isNaN(e) ? null : this.strictMode ? this.trimValue(e) : e), this.raiseChangeEvent(t) }, t.prototype.updateCurrency = function (e, t) { r(e, t, this.cultureInfo), this.updateValue(this.value) }, t.prototype.changeValue = function (e) { if (e || 0 === e) { var t = void 0, i = e.toString().split(".")[1]; t = i && i.length ? i.length : 0, null !== this.decimals && (t = t < this.decimals ? t : this.decimals), this.setProperties({ value: this.roundNumber(e, t) }, !0) } else e = null, this.setProperties({ value: e }, !0); this.modifyText(), this.strictMode || this.validateState() }, t.prototype.modifyText = function () { if (this.value || 0 === this.value) { var e = this.formatNumber(), t = this.isFocused ? e : this.instance.getNumberFormat(this.cultureInfo)(this.value); this.setElementValue(t), P(this.element, { "aria-valuenow": e }), this.hiddenInput.value = this.value.toString() } else this.setElementValue(""), this.element.removeAttribute("aria-valuenow"), this.hiddenInput.value = null }, t.prototype.setElementValue = function (e, t) { eS.setValue(e, t || this.element, this.floatLabelType, this.showClearButton) }, t.prototype.validateState = function () { this.isValidState = !0, (this.value || 0 === this.value) && (this.isValidState = !(this.value > this.max || this.value < this.min)), this.checkErrorClass() }, t.prototype.formatNumber = function () { var e, t = this.value.toString().split(".")[1]; return e = t && t.length ? t.length : 0, null !== this.decimals && (e = e < this.decimals ? e : this.decimals), this.instance.getNumberFormat({ maximumFractionDigits: e, minimumFractionDigits: e, useGrouping: !1 })(this.value) }, t.prototype.trimValue = function (e) { return e > this.max ? this.max : e < this.min ? this.min : e }, t.prototype.roundNumber = function (e, t) { var i = e, n = t || 0, r = i.toString().split("e"), o = (i = Math.round(Number(r[0] + "e" + (r[1] ? Number(r[1]) + n : n)))).toString().split("e"); return i = Number(o[0] + "e" + (o[1] ? Number(o[1]) - n : -n)), Number(i.toFixed(n)) }, t.prototype.cancelEvent = function (e) { return e.preventDefault(), !1 }, t.prototype.keyPressHandler = function (e) { if (!this.enabled || this.readonly) return !0; if (!uw.isDevice && "11.0" === uw.info.version && 13 === e.keyCode) { var t = this.instance.getNumberParser({ format: "n" })(this.element.value); return this.updateValue(t, e), !0 } if (0 === e.which || e.metaKey || e.ctrlKey || 8 === e.keyCode || 13 === e.keyCode) return !0; var i = String.fromCharCode(e.which), n = this.element.value; return n = n.substring(0, this.element.selectionStart) + i + n.substring(this.element.selectionEnd), !!this.numericRegex().test(n) || (e.preventDefault(), e.stopPropagation(), !1) }, t.prototype.numericRegex = function () { var e = n("decimal", se(this.locale)), t = "*"; return "." === e && (e = "\\" + e), 0 === this.decimals && this.validateDecimalOnType ? FS : (this.decimals && this.validateDecimalOnType && (t = "{0," + this.decimals + "}"), new RegExp("^(-)?(((\\d+(" + e + "\\d" + t + ")?)|(" + e + "\\d" + t + ")))?$")) }, t.prototype.mouseWheel = function (e) { e.preventDefault(); var t, i = e; i.wheelDelta ? t = i.wheelDelta / 120 : i.detail && (t = -i.detail / 3), t > 0 ? this.action(zS, e) : t < 0 && this.action(BS, e), this.cancelEvent(e) }, t.prototype.focusHandler = function (e) { var t = this; if (this.focusEventArgs = { event: e, value: this.value, container: this.container }, this.trigger("focus", this.focusEventArgs), this.enabled && !this.readonly) { if (this.isFocused = !0, x([this.container], "e-error"), this.prevValue = this.value, this.value || 0 === this.value) { var i = this.formatNumber(); if (this.setElementValue(i), !this.isPrevFocused) { var n = uw.isDevice && uw.isIos ? 600 : 0; setTimeout(function () { t.element.setSelectionRange(0, i.length) }, n) } } uw.isDevice || Kv.add(this.element, "mousewheel DOMMouseScroll", this.mouseWheel, this) } }, t.prototype.focusOutHandler = function (e) { var t = this; if (this.blurEventArgs = { event: e, value: this.value, container: this.container }, this.trigger("blur", this.blurEventArgs), this.enabled && !this.readonly) { if (this.isPrevFocused) { if (e.preventDefault(), uw.isDevice) { var i = this.element.value; this.element.focus(), this.isPrevFocused = !1; var n = this.element; setTimeout(function () { t.setElementValue(i, n) }, 200) } } else { this.isFocused = !1, this.element.value.length || this.setProperties({ value: null }, !0); var r = this.instance.getNumberParser({ format: "n" })(this.element.value); this.updateValue(r), uw.isDevice || Kv.remove(this.element, "mousewheel DOMMouseScroll", this.mouseWheel) } if (R(this.element, "form")) { var o = this.element.nextElementSibling, s = document.createEvent("FocusEvent"); s.initEvent("focusout", !1, !0), o.dispatchEvent(s) } } }, t.prototype.mouseDownOnSpinner = function (e) { var t = this; if (this.isFocused && (this.isPrevFocused = !0, e.preventDefault()), this.getElementData(e)) { this.getElementData(e); var i = e.currentTarget, n = i.classList.contains("e-spin-up") ? zS : BS; Kv.add(i, "mouseleave", this.mouseUpClick, this), this.timeOut = setInterval(function () { t.isCalled = !0, t.action(n, e) }, 150), Kv.add(document, "mouseup", this.mouseUpClick, this) } }, t.prototype.touchMoveOnSpinner = function (e) { document.elementFromPoint(e.clientX, e.clientY).classList.contains(RS) || clearInterval(this.timeOut) }, t.prototype.mouseUpOnSpinner = function (e) { if (this.isPrevFocused && (this.element.focus(), uw.isDevice || (this.isPrevFocused = !1)), uw.isDevice || e.preventDefault(), this.getElementData(e)) { var t = e.currentTarget, i = t.classList.contains("e-spin-up") ? zS : BS; Kv.remove(t, "mouseleave", this.mouseUpClick), this.isCalled || this.action(i, e), this.isCalled = !1, Kv.remove(document, "mouseup", this.mouseUpClick); if (R(this.element, "form")) { var n = this.element.nextElementSibling, r = document.createEvent("KeyboardEvent"); r.initEvent("keyup", !1, !0), n.dispatchEvent(r) } } }, t.prototype.getElementData = function (e) { return !(e.which && 3 === e.which || e.button && 2 === e.button || !this.enabled || this.readonly) && (clearInterval(this.timeOut), !0) }, t.prototype.floatLabelTypeUpdate = function () { eS.removeFloating(this.inputWrapper); var e = this.hiddenInput; this.hiddenInput.remove(), eS.addFloating(this.element, this.floatLabelType, this.placeholder, this.createElement), this.container.insertBefore(e, this.container.childNodes[1]) }, t.prototype.mouseUpClick = function (e) { e.stopPropagation(), clearInterval(this.timeOut), this.isCalled = !1, Kv.remove(this.spinUp, "mouseleave", this.mouseUpClick), Kv.remove(this.spinDown, "mouseleave", this.mouseUpClick) }, t.prototype.increment = function (e) { void 0 === e && (e = this.step), this.isInteract = !1, this.changeValue(this.performAction(this.value, e, zS)), this.raiseChangeEvent() }, t.prototype.decrement = function (e) { void 0 === e && (e = this.step), this.isInteract = !1, this.changeValue(this.performAction(this.value, e, BS)), this.raiseChangeEvent() }, t.prototype.destroy = function () { var t = this; this.unwireEvents(), I(this.hiddenInput), this.showSpinButton && (this.unwireSpinBtnEvents(), I(this.spinUp), I(this.spinDown));["aria-labelledby", "role", "autocomplete", "aria-readonly", "autocorrect", "aria-disabled", "aria-placeholder", "autocapitalize", "spellcheck", "aria-autocomplete", "tabindex", "aria-valuemin", "aria-valuemax", "aria-live", "aria-valuenow", "aria-invalid"].forEach(function (e) { t.element.removeAttribute(e) }), this.element.classList.remove("e-input"), this.container.insertAdjacentElement("afterend", this.element), I(this.container), e.prototype.destroy.call(this) }, t.prototype.getText = function () { return this.element.value }, t.prototype.focusIn = function () { document.activeElement !== this.element && this.enabled && (this.element.focus(), S([this.container], ["e-input-focus"])) }, t.prototype.focusOut = function () { document.activeElement === this.element && this.enabled && (this.element.blur(), x([this.container], ["e-input-focus"])) }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, o = Object.keys(e); i < o.length; i++) { var s = o[i]; switch (s) { case "width": z(this.container, { width: v(e.width) }); break; case "cssClass": eS.setCssClass(e.cssClass, [this.container], t.cssClass); break; case "enabled": eS.setEnabled(e.enabled, this.element); break; case "enableRtl": eS.setEnableRtl(e.enableRtl, [this.container]); break; case "readonly": eS.setReadonly(e.readonly, this.element), this.readonly ? P(this.element, { "aria-readonly": "true" }) : this.element.removeAttribute("aria-readonly"); break; case "htmlAttributes": this.updateHTMLAttrToElement(), this.updateHTMLAttrToWrapper(), this.checkAttributes(!0); break; case "placeholder": eS.setPlaceholder(e.placeholder, this.element); break; case "step": this.step = e.step, this.validateStep(); break; case "showSpinButton": e.showSpinButton ? this.spinBtnCreation() : (I(this.spinUp), I(this.spinDown)); break; case "showClearButton": eS.setClearButton(e.showClearButton, this.element, this.inputWrapper, void 0, this.createElement), this.bindClearEvent(); break; case "floatLabelType": this.floatLabelType = e.floatLabelType, this.floatLabelTypeUpdate(); break; case "value": this.updateValue(e.value); break; case "min": case "max": r(s, n(s, e), this), this.validateMinMax(), this.updateValue(this.value); break; case "strictMode": this.strictMode = e.strictMode, this.updateValue(this.value), this.validateState(); break; case "locale": this.initCultureFunc(), this.l10n.setLocale(this.locale), this.setSpinButton(), this.updatePlaceholder(), eS.setPlaceholder(this.placeholder, this.element), this.updateValue(this.value); break; case "currency": var a = n(s, e); this.setProperties({ currencyCode: a }, !0), this.updateCurrency(s, a); break; case "currencyCode": var l = n(s, e); this.setProperties({ currency: l }, !0), this.updateCurrency("currency", l); break; case "format": r(s, n(s, e), this), this.initCultureInfo(), this.updateValue(this.value); break; case "decimals": this.decimals = e.decimals, this.updateValue(this.value) } } }, t.prototype.getModuleName = function () { return "numerictextbox" }, OS([Y("")], t.prototype, "cssClass", void 0), OS([Y(null)], t.prototype, "value", void 0), OS([Y(-Number.MAX_VALUE)], t.prototype, "min", void 0), OS([Y(Number.MAX_VALUE)], t.prototype, "max", void 0), OS([Y(1)], t.prototype, "step", void 0), OS([Y(null)], t.prototype, "width", void 0), OS([Y(null)], t.prototype, "placeholder", void 0), OS([Y({})], t.prototype, "htmlAttributes", void 0), OS([Y(!0)], t.prototype, "showSpinButton", void 0), OS([Y(!1)], t.prototype, "readonly", void 0), OS([Y(!0)], t.prototype, "enabled", void 0), OS([Y(!1)], t.prototype, "showClearButton", void 0), OS([Y(!1)], t.prototype, "enablePersistence", void 0), OS([Y("n2")], t.prototype, "format", void 0), OS([Y(null)], t.prototype, "decimals", void 0), OS([Y(null)], t.prototype, "currency", void 0), OS([Y(null)], t.prototype, "currencyCode", void 0), OS([Y(!0)], t.prototype, "strictMode", void 0), OS([Y(!1)], t.prototype, "validateDecimalOnType", void 0), OS([Y("Never")], t.prototype, "floatLabelType", void 0), OS([X()], t.prototype, "created", void 0), OS([X()], t.prototype, "destroyed", void 0), OS([X()], t.prototype, "change", void 0), OS([X()], t.prototype, "focus", void 0), OS([X()], t.prototype, "blur", void 0), t = OS([J], t) }(Kw), HS = "e-error", _S = "e-input-group", YS = "e-float-input", US = "e-utility-mask", qS = "e-label-top", GS = "e-label-bottom", QS = { 0: "[0-9]", 9: "[0-9 ]", "#": "[0-9 +-]", L: "[A-Za-z]", "?": "[A-Za-z ]", "&": "[^ ]+", C: "[^]+", A: "[A-Za-z0-9]", a: "[A-Za-z0-9 ]" }, XS = function () { return function () { } }(), JS = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), ZS = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, KS = ["title", "style", "class"], $S = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.initInputValue = "", n.maskOptions = t, n } return JS(t, e), t.prototype.getModuleName = function () { return "maskedtextbox" }, t.prototype.preRender = function () { this.promptMask = "", this.hiddenMask = "", this.escapeMaskValue = "", this.regExpCollec = QS, this.customRegExpCollec = [], this.undoCollec = [], this.redoCollec = [], this.changeEventArgs = {}, this.focusEventArgs = {}, this.blurEventArgs = {}, this.maskKeyPress = !1, this.isFocus = !1, this.isInitial = !1, this.isIosInvalid = !1; var e = n("ej2_instances", this.element); if (this.cloneElement = this.element.cloneNode(!0), x([this.cloneElement], ["e-control", "e-maskedtextbox", "e-lib"]), this.angularTagName = null, this.formElement = R(this.element, "form"), "EJS-MASKEDTEXTBOX" === this.element.tagName) { this.angularTagName = this.element.tagName; for (var t = this.createElement("input"), i = 0; i < this.element.attributes.length; i++)t.setAttribute(this.element.attributes[i].nodeName, this.element.attributes[i].nodeValue), t.innerHTML = this.element.innerHTML; this.element.hasAttribute("id") && this.element.removeAttribute("id"), this.element.classList.remove("e-control", "e-maskedtextbox"), this.element.classList.add("e-mask-container"), this.element.appendChild(t), this.element = t, r("ej2_instances", e, this.element) } this.updateHTMLAttrToElement(), this.checkHtmlAttributes(!1), this.formElement && (this.initInputValue = this.value) }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.render = function () { "input" === this.element.tagName.toLowerCase() && ("Never" === this.floatLabelType && S([this.element], "e-input"), this.createWrapper(), this.updateHTMLAttrToWrapper(), "" === this.element.name && this.element.setAttribute("name", this.element.id), this.isInitial = !0, this.resetMaskedTextBox(), this.isInitial = !1, this.setMaskPlaceholder(!0, !1), this.setWidth(this.width), this.preEleVal = this.element.value, uw.isDevice || "11.0" !== uw.info.version && "edge" !== uw.info.name || this.element.blur(), (this.element.getAttribute("value") || this.value) && this.element.setAttribute("value", this.element.value)) }, t.prototype.updateHTMLAttrToElement = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; KS.indexOf(i) < 0 && this.element.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHTMLAttrToWrapper = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (KS.indexOf(i) > -1) if ("class" === i) S([this.inputObj.container], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.inputObj.container.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.inputObj.container.setAttribute(i, n) } else this.inputObj.container.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.resetMaskedTextBox = function () { this.promptMask = "", this.hiddenMask = "", this.escapeMaskValue = "", this.customRegExpCollec = [], this.undoCollec = [], this.redoCollec = [], this.promptChar.length > 1 && (this.promptChar = this.promptChar[0]), Vt.call(this), Wt.call(this), (null === this.mask || "" === this.mask && void 0 !== this.value) && mi.call(this, this.value); var e = Qt.call(this, this.element); this.prevValue = e, this.value = e, this.isInitial || _t.call(this), Ht.call(this) }, t.prototype.setMaskPlaceholder = function (e, t) { (t || this.placeholder) && (eS.setPlaceholder(this.placeholder, this.element), this.element.value === this.promptMask && e && "Always" !== this.floatLabelType && mi.call(this, ""), "Never" === this.floatLabelType && Zt.call(this)) }, t.prototype.setWidth = function (e) { d(e) || (this.element.style.width = v(e), this.inputObj.container.style.width = v(e)) }, t.prototype.checkHtmlAttributes = function (e) { for (var t = 0, i = e ? Object.keys(this.htmlAttributes) : ["placeholder", "disabled", "value", "readonly"]; t < i.length; t++) { var n = i[t]; if (!d(this.element.getAttribute(n))) switch (n) { case "placeholder": (d(this.maskOptions) || void 0 === this.maskOptions.placeholder || e) && this.setProperties({ placeholder: this.element.placeholder }, !e); break; case "disabled": if (d(this.maskOptions) || void 0 === this.maskOptions.enabled || e) { var r = "disabled" !== this.element.getAttribute(n) && "" !== this.element.getAttribute(n) && "true" !== this.element.getAttribute(n); this.setProperties({ enabled: r }, !e) } break; case "value": (d(this.maskOptions) || void 0 === this.maskOptions.value || e) && this.setProperties({ value: this.element.value }, !e); break; case "readonly": if (d(this.maskOptions) || void 0 === this.maskOptions.readonly || e) { var o = "readonly" === this.element.getAttribute(n) || "" === this.element.getAttribute(n) || "true" === this.element.getAttribute(n); this.setProperties({ readonly: o }, !e) } } } }, t.prototype.createWrapper = function () { this.inputObj = eS.createInput({ element: this.element, floatLabelType: this.floatLabelType, properties: { enableRtl: this.enableRtl, cssClass: this.cssClass, enabled: this.enabled, readonly: this.readonly, placeholder: this.placeholder, showClearButton: this.showClearButton } }, this.createElement), this.inputObj.container.setAttribute("class", "e-widget e-control-wrapper e-mask " + this.inputObj.container.getAttribute("class")) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "value": gi.call(this, this.value), this.placeholder && this.setMaskPlaceholder(!1, !1); break; case "placeholder": this.setMaskPlaceholder(!0, !0); break; case "width": this.setWidth(e.width); break; case "cssClass": eS.setCssClass(e.cssClass, [this.inputObj.container], t.cssClass); break; case "enabled": eS.setEnabled(e.enabled, this.element); break; case "readonly": eS.setReadonly(e.readonly, this.element); break; case "enableRtl": eS.setEnableRtl(e.enableRtl, [this.inputObj.container]); break; case "customCharacters": this.customCharacters = e.customCharacters, this.resetMaskedTextBox(); break; case "showClearButton": eS.setClearButton(e.showClearButton, this.element, this.inputObj, void 0, this.createElement), Yt.call(this); break; case "floatLabelType": this.floatLabelType = e.floatLabelType, eS.removeFloating(this.inputObj), eS.addFloating(this.element, this.floatLabelType, this.placeholder, this.createElement); break; case "htmlAttributes": this.updateHTMLAttrToElement(), this.updateHTMLAttrToWrapper(), this.checkHtmlAttributes(!0); break; case "mask": var r = this.value; this.mask = e.mask, this.updateValue(r); break; case "promptChar": e.promptChar.length > 1 && (e.promptChar = e.promptChar[0]), e.promptChar ? this.promptChar = e.promptChar : this.promptChar = "_"; var o = this.element.value.replace(new RegExp("[" + t.promptChar + "]", "g"), this.promptChar); this.promptMask === this.element.value && (o = this.promptMask.replace(new RegExp("[" + t.promptChar + "]", "g"), this.promptChar)), this.promptMask = this.promptMask.replace(new RegExp("[" + t.promptChar + "]", "g"), this.promptChar), this.undoCollec = this.redoCollec = [], mi.call(this, o) } } }, t.prototype.updateValue = function (e) { this.resetMaskedTextBox(), gi.call(this, e) }, t.prototype.getMaskedValue = function () { return Gt.call(this, this.element) }, t.prototype.focusIn = function () { document.activeElement !== this.element && this.enabled && (this.element.focus(), S([this.inputObj.container], ["e-input-focus"])) }, t.prototype.focusOut = function () { document.activeElement === this.element && this.enabled && (this.element.blur(), x([this.inputObj.container], ["e-input-focus"])) }, t.prototype.destroy = function () { var t = this; _t.call(this);["aria-labelledby", "role", "autocomplete", "aria-readonly", "autocorrect", "aria-disabled", "aria-placeholder", "autocapitalize", "spellcheck", "aria-autocomplete", "aria-live", "aria-valuenow", "aria-invalid"].forEach(function (e) { t.element.removeAttribute(e) }), this.element.classList.remove("e-input"), this.inputObj.container.insertAdjacentElement("afterend", this.element), I(this.inputObj.container), e.prototype.destroy.call(this) }, ZS([Y(null)], t.prototype, "cssClass", void 0), ZS([Y(null)], t.prototype, "width", void 0), ZS([Y(null)], t.prototype, "placeholder", void 0), ZS([Y("Never")], t.prototype, "floatLabelType", void 0), ZS([Y({})], t.prototype, "htmlAttributes", void 0), ZS([Y(!0)], t.prototype, "enabled", void 0), ZS([Y(!1)], t.prototype, "readonly", void 0), ZS([Y(!1)], t.prototype, "showClearButton", void 0), ZS([Y(!1)], t.prototype, "enablePersistence", void 0), ZS([Y(null)], t.prototype, "mask", void 0), ZS([Y("_")], t.prototype, "promptChar", void 0), ZS([Y(null)], t.prototype, "value", void 0), ZS([Y(null)], t.prototype, "customCharacters", void 0), ZS([X()], t.prototype, "created", void 0), ZS([X()], t.prototype, "destroyed", void 0), ZS([X()], t.prototype, "change", void 0), ZS([X()], t.prototype, "focus", void 0), ZS([X()], t.prototype, "blur", void 0), t = ZS([J], t) }(Kw), ex = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), tx = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, ix = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ex(t, e), tx([Y("None")], t.prototype, "placement", void 0), tx([Y(10)], t.prototype, "largeStep", void 0), tx([Y(1)], t.prototype, "smallStep", void 0), tx([Y(!1)], t.prototype, "showSmallTicks", void 0), tx([Y(null)], t.prototype, "format", void 0), t }(ww), nx = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ex(t, e), tx([Y(!1)], t.prototype, "enabled", void 0), tx([Y(null)], t.prototype, "minStart", void 0), tx([Y(null)], t.prototype, "minEnd", void 0), tx([Y(null)], t.prototype, "maxStart", void 0), tx([Y(null)], t.prototype, "maxEnd", void 0), tx([Y(!1)], t.prototype, "startHandleFixed", void 0), tx([Y(!1)], t.prototype, "endHandleFixed", void 0), t }(ww), rx = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ex(t, e), tx([Y("")], t.prototype, "cssClass", void 0), tx([Y("Before")], t.prototype, "placement", void 0), tx([Y("Focus")], t.prototype, "showOn", void 0), tx([Y(!1)], t.prototype, "isVisible", void 0), tx([Y(null)], t.prototype, "format", void 0), t }(ww), ox = "e-slider", sx = "e-rtl", ax = "e-slider-input", lx = "e-control-wrapper", hx = "e-handle", dx = "e-range", cx = "e-slider-button", px = "e-first-button", ux = "e-second-button", gx = "e-scale", mx = "e-tick", fx = "e-large", yx = "e-tick-value", vx = "e-slider-tooltip", wx = "e-slider-hover", bx = "e-handle-first", Cx = "e-handle-second", Lx = "e-disabled", Mx = "e-slider-container", Sx = "e-slider-horizontal-before", xx = "e-slider-horizontal-after", Tx = "e-slider-vertical-before", Dx = "e-slider-vertical-after", Ax = "e-material-tooltip-open", Ex = "e-tooltip-active", jx = "e-material-slider", Ix = "e-slider-track", kx = "e-handle-focused", Px = "e-vertical", Nx = "e-horizontal", Ox = "e-handle-start", Rx = "e-material-tooltip-start", zx = "e-tab-handle", Bx = "e-button-icon", Fx = "e-small-size", Vx = "e-tick-pos", Wx = "e-first-tick", Hx = "e-last-tick", _x = "e-slider-btn", Yx = "e-tab-track", Ux = "e-tab-range", qx = "e-handle-active", Gx = "e-material-handle", Qx = "e-material-range", Xx = "e-material-default", Jx = "e-material-tooltip-show", Zx = "e-material-tooltip-hide", Kx = "e-read-only", $x = "e-limits", eT = "e-limit-bar", tT = "e-limit-first", iT = "e-limit-second", nT = "e-drag-horizontal", rT = "e-drag-vertical", oT = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.horDir = "left", n.verDir = "bottom", n.transition = { handle: "left .4s cubic-bezier(.25, .8, .25, 1), right .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1) , bottom .4s cubic-bezier(.25, .8, .25, 1)", rangeBar: "all .4s cubic-bezier(.25, .8, .25, 1)" }, n.transitionOnMaterialTooltip = { handle: "left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, top 1ms ease-out", rangeBar: "left 1ms ease-out, right 1ms ease-out, bottom 1ms ease-out, width 1ms ease-out, height 1ms ease-out" }, n.scaleTransform = "transform .4s cubic-bezier(.25, .8, .25, 1)", n.customAriaText = null, n.drag = !0, n } return ex(t, e), t.prototype.preRender = function () { this.l10n = new pb("slider", { incrementTitle: "Increase", decrementTitle: "Decrease" }, this.locale), this.isElementFocused = !1, this.tickElementCollection = [], this.tooltipFormatInfo = {}, this.ticksFormatInfo = {}, this.initCultureInfo(), this.initCultureFunc(), this.formChecker() }, t.prototype.formChecker = function () { var e = R(this.element, "form"); e ? (this.isForm = !0, d(this.formResetValue) || this.setProperties({ value: this.formResetValue }, !0), this.formResetValue = this.value, "Range" !== this.type || !d(this.formResetValue) && "object" == typeof this.formResetValue ? d(this.formResetValue) && (this.formResetValue = parseFloat(v(this.min))) : this.formResetValue = [parseFloat(v(this.min)), parseFloat(v(this.max))], this.formElement = e) : this.isForm = !1 }, t.prototype.initCultureFunc = function () { this.internationalization = new Gw(this.locale) }, t.prototype.initCultureInfo = function () { this.tooltipFormatInfo.format = d(this.tooltip.format) ? null : this.tooltip.format, this.ticksFormatInfo.format = d(this.ticks.format) ? null : this.ticks.format }, t.prototype.formatString = function (e, t) { var i = null, n = null; if (e || 0 === e) { i = this.formatNumber(e); var r = this.numberOfDecimals(e); n = this.internationalization.getNumberFormat(t)(this.makeRoundNumber(e, r)) } return { elementVal: i, formatString: n } }, t.prototype.formatNumber = function (e) { var t = this.numberOfDecimals(e); return this.internationalization.getNumberFormat({ maximumFractionDigits: t, minimumFractionDigits: t, useGrouping: !1 })(e) }, t.prototype.numberOfDecimals = function (e) { var t = e.toString().split(".")[1]; return t && t.length ? t.length : 0 }, t.prototype.makeRoundNumber = function (e, t) { var i = t || 0; return Number(e.toFixed(i)) }, t.prototype.fractionalToInteger = function (e) { e = 0 === this.numberOfDecimals(e) ? Number(e).toFixed(this.noOfDecimals) : e; for (var t = 1, i = 0; i < this.noOfDecimals; i++)t *= 10; return e = Number((e * t).toFixed(0)) }, t.prototype.render = function () { this.initialize(), this.initRender(), this.wireEvents(), this.setZindex() }, t.prototype.initialize = function () { S([this.element], ox), this.setCSSClass() }, t.prototype.setCSSClass = function (e) { e && x([this.element], e.split(" ")), this.cssClass && S([this.element], this.cssClass.split(" ")) }, t.prototype.setEnabled = function () { this.enabled ? (x([this.sliderContainer], [Lx]), this.tooltip.isVisible && this.tooltipElement && "Always" === this.tooltip.showOn && this.tooltipElement.classList.remove(Lx), this.wireEvents()) : (S([this.sliderContainer], [Lx]), this.tooltip.isVisible && this.tooltipElement && "Always" === this.tooltip.showOn && this.tooltipElement.classList.add(Lx), this.unwireEvents()) }, t.prototype.getTheme = function (e) { return window.getComputedStyle(e, ":after").getPropertyValue("content").replace(/['"]+/g, "") }, t.prototype.initRender = function () { this.sliderContainer = this.createElement("div", { className: Mx + " " + lx }), this.element.parentNode.insertBefore(this.sliderContainer, this.element), this.sliderContainer.appendChild(this.element), this.sliderTrack = this.createElement("div", { className: Ix }), this.element.appendChild(this.sliderTrack), this.element.tabIndex = -1, this.getThemeInitialization(), this.setHandler(), this.createRangeBar(), this.limits.enabled && this.createLimitBar(), this.setOrientClass(), this.hiddenInput = this.createElement("input", { attrs: { type: "hidden", value: d(this.value) ? this.min.toString() : this.value.toString(), name: this.element.getAttribute("name") || this.element.getAttribute("id") || "_" + (1e3 * Math.random()).toFixed(0) + "slider", class: ax } }), this.hiddenInput.tabIndex = -1, this.sliderContainer.appendChild(this.hiddenInput), this.showButtons && this.setButtons(), this.setEnableRTL(), "Range" === this.type ? this.rangeValueUpdate() : this.value = d(this.value) ? parseFloat(v(this.min.toString())) : this.value, this.previousVal = "Range" !== this.type ? this.checkHandleValue(parseFloat(v(this.value.toString()))) : [this.checkHandleValue(parseFloat(v(this.value[0].toString()))), this.checkHandleValue(parseFloat(v(this.value[1].toString())))], this.previousChanged = this.previousVal, d(this.element.hasAttribute("name")) || this.element.removeAttribute("name"), this.setValue(), this.limits.enabled && this.setLimitBar(), "None" !== this.ticks.placement && this.renderScale(), this.tooltip.isVisible && this.renderTooltip(), this.enabled ? x([this.sliderContainer], [Lx]) : S([this.sliderContainer], [Lx]), this.readonly ? S([this.sliderContainer], [Kx]) : x([this.sliderContainer], [Kx]) }, t.prototype.getThemeInitialization = function () { this.isMaterial = "material" === this.getTheme(this.sliderContainer) || "material-dark" === this.getTheme(this.sliderContainer), this.isBootstrap = "bootstrap" === this.getTheme(this.sliderContainer) || "bootstrap-dark" === this.getTheme(this.sliderContainer), this.isBootstrap4 = "bootstrap4" === this.getTheme(this.sliderContainer), this.isMaterialTooltip = this.isMaterial && "Range" !== this.type && this.tooltip.isVisible }, t.prototype.createRangeBar = function () { "Default" !== this.type && (this.rangeBar = this.createElement("div", { attrs: { class: dx } }), this.element.appendChild(this.rangeBar), this.drag && "Range" === this.type && ("Horizontal" === this.orientation ? this.rangeBar.classList.add(nT) : this.rangeBar.classList.add(rT))) }, t.prototype.createLimitBar = function () { var e = "Range" !== this.type ? eT : tT; e += " " + $x, this.limitBarFirst = this.createElement("div", { attrs: { class: e } }), this.element.appendChild(this.limitBarFirst), "Range" === this.type && (this.limitBarSecond = this.createElement("div", { attrs: { class: iT + " " + $x } }), this.element.appendChild(this.limitBarSecond)) }, t.prototype.setOrientClass = function () { "Vertical" !== this.orientation ? (this.sliderContainer.classList.remove(Px), this.sliderContainer.classList.add(Nx), this.firstHandle.setAttribute("aria-orientation", "horizontal"), "Range" === this.type && this.secondHandle.setAttribute("aria-orientation", "horizontal")) : (this.sliderContainer.classList.remove(Nx), this.sliderContainer.classList.add(Px), this.firstHandle.setAttribute("aria-orientation", "vertical"), "Range" === this.type && this.secondHandle.setAttribute("aria-orientation", "vertical")) }, t.prototype.setAriaAttributes = function (e) { var t = this, i = this.min, n = this.max; if (!d(this.customValues) && this.customValues.length > 0 && (i = this.customValues[0], n = this.customValues[this.customValues.length - 1]), "Range" !== this.type) P(e, { "aria-valuemin": i.toString(), "aria-valuemax": n.toString() }); else { (!d(this.customValues) && this.customValues.length > 0 ? [[i.toString(), this.customValues[this.value[1]].toString()], [this.customValues[this.value[0]].toString(), n.toString()]] : [[i.toString(), this.value[1].toString()], [this.value[0].toString(), n.toString()]]).forEach(function (e, i) { var n = 0 === i ? t.firstHandle : t.secondHandle; n && P(n, { "aria-valuemin": e[0], "aria-valuemax": e[1] }) }) } }, t.prototype.createSecondHandle = function () { this.secondHandle = this.createElement("div", { attrs: { class: hx, role: "slider", "aria-labelledby": this.element.id + "_title", tabIndex: "0" } }), this.secondHandle.classList.add(Cx), this.element.appendChild(this.secondHandle) }, t.prototype.createFirstHandle = function () { this.firstHandle = this.createElement("div", { attrs: { class: hx, role: "slider", "aria-labelledby": this.element.id + "_title", tabIndex: "0" } }), this.firstHandle.classList.add(bx), this.element.appendChild(this.firstHandle), this.isMaterialTooltip && (this.materialHandle = this.createElement("div", { attrs: { class: hx + " " + Gx } }), this.element.appendChild(this.materialHandle)) }, t.prototype.wireFirstHandleEvt = function (e) { e ? (Kv.remove(this.firstHandle, "mousedown touchstart", this.handleFocus), Kv.remove(this.firstHandle, "transitionend", this.transitionEnd), Kv.remove(this.firstHandle, "mouseenter touchenter", this.handleOver), Kv.remove(this.firstHandle, "mouseleave touchend", this.handleLeave)) : (Kv.add(this.firstHandle, "mousedown touchstart", this.handleFocus, this), Kv.add(this.firstHandle, "transitionend", this.transitionEnd, this), Kv.add(this.firstHandle, "mouseenter touchenter", this.handleOver, this), Kv.add(this.firstHandle, "mouseleave touchend", this.handleLeave, this)) }, t.prototype.wireSecondHandleEvt = function (e) { e ? (Kv.remove(this.secondHandle, "mousedown touchstart", this.handleFocus), Kv.remove(this.secondHandle, "transitionend", this.transitionEnd), Kv.remove(this.secondHandle, "mouseenter touchenter", this.handleOver), Kv.remove(this.secondHandle, "mouseleave touchend", this.handleLeave)) : (Kv.add(this.secondHandle, "mousedown touchstart", this.handleFocus, this), Kv.add(this.secondHandle, "transitionend", this.transitionEnd, this), Kv.add(this.secondHandle, "mouseenter touchenter", this.handleOver, this), Kv.add(this.secondHandle, "mouseleave touchend", this.handleLeave, this)) }, t.prototype.handleStart = function () { "Range" !== this.type && (this.firstHandle.classList[0 === this.handlePos1 ? "add" : "remove"](Ox), this.isMaterialTooltip && (this.materialHandle.classList[0 === this.handlePos1 ? "add" : "remove"](Ox), this.tooltipElement && this.tooltipElement.classList[0 === this.handlePos1 ? "add" : "remove"](Rx))) }, t.prototype.transitionEnd = function (e) { "transform" !== e.propertyName && (this.handleStart(), this.getHandle().style.transition = "none", "Default" !== this.type && (this.rangeBar.style.transition = "none"), this.isMaterial && this.tooltip.isVisible && "Default" === this.type && (this.tooltipElement.style.transition = this.transition.handle), this.tooltipToggle(this.getHandle()), this.closeTooltip()) }, t.prototype.handleFocusOut = function () { this.firstHandle.classList.contains(kx) && this.firstHandle.classList.remove(kx), "Range" === this.type && this.secondHandle.classList.contains(kx) && this.secondHandle.classList.remove(kx) }, t.prototype.handleFocus = function (e) { e.currentTarget === this.firstHandle ? this.firstHandle.classList.add(kx) : this.secondHandle.classList.add(kx) }, t.prototype.handleOver = function (e) { this.tooltip.isVisible && "Hover" === this.tooltip.showOn && this.tooltipToggle(e.currentTarget) }, t.prototype.handleLeave = function (e) { !this.tooltip.isVisible || "Hover" !== this.tooltip.showOn || e.currentTarget.classList.contains(kx) || e.currentTarget.classList.contains(zx) || this.closeTooltip() }, t.prototype.setHandler = function () { this.min > this.max && (this.min = this.max), this.createFirstHandle(), "Range" === this.type && this.createSecondHandle() }, t.prototype.setEnableRTL = function () { this.enableRtl && "Vertical" !== this.orientation ? S([this.sliderContainer], sx) : x([this.sliderContainer], sx); var e = "Vertical" !== this.orientation ? this.horDir : this.verDir; this.enableRtl ? (this.horDir = "right", this.verDir = "bottom") : (this.horDir = "left", this.verDir = "bottom"); e !== ("Vertical" !== this.orientation ? this.horDir : this.verDir) && "Horizontal" === this.orientation && (z(this.firstHandle, { right: "", left: "auto" }), "Range" === this.type && z(this.secondHandle, { top: "", left: "auto" })) }, t.prototype.tooltipValue = function () { var e, t = this, i = { value: this.value, text: "" }; this.setTooltipContent(), i.text = e = this.tooltipObj.content, this.trigger("tooltipChange", i, function (i) { t.addTooltipClass(i.text), e !== i.text && (t.customAriaText = i.text, t.tooltipObj.content = i.text, t.setAriaAttrValue(t.firstHandle), "Range" === t.type && t.setAriaAttrValue(t.secondHandle)) }) }, t.prototype.setTooltipContent = function () { var e; e = this.formatContent(this.tooltipFormatInfo, !1), this.tooltipObj.content = e }, t.prototype.formatContent = function (e, t) { var i = "", n = this.handleVal1, r = this.handleVal2; return !d(this.customValues) && this.customValues.length > 0 && (n = this.customValues[this.handleVal1], r = this.customValues[this.handleVal2]), t ? ("Range" === this.type ? i = this.enableRtl && "Vertical" !== this.orientation ? d(this.tooltip) || d(this.tooltip.format) ? r.toString() + " - " + n.toString() : this.formatString(r, e).elementVal + " - " + this.formatString(n, e).elementVal : d(this.tooltip) || d(this.tooltip.format) ? n.toString() + " - " + r.toString() : this.formatString(n, e).elementVal + " - " + this.formatString(r, e).elementVal : d(n) || (i = d(this.tooltip) || d(this.tooltip.format) ? n.toString() : this.formatString(n, e).elementVal), i) : ("Range" === this.type ? i = this.enableRtl && "Vertical" !== this.orientation ? d(e.format) ? r.toString() + " - " + n.toString() : this.formatString(r, e).formatString + " - " + this.formatString(n, e).formatString : d(e.format) ? n.toString() + " - " + r.toString() : this.formatString(n, e).formatString + " - " + this.formatString(r, e).formatString : d(n) || (i = d(e.format) ? n.toString() : this.formatString(n, e).formatString), i) }, t.prototype.addTooltipClass = function (e) { if (this.isMaterialTooltip) { var t = e.toString().length; if (this.tooltipElement) { i = t > 4 ? { oldCss: Xx, newCss: Qx } : { oldCss: Qx, newCss: Xx }; this.tooltipElement.classList.remove(i.oldCss), this.tooltipElement.classList.contains(i.newCss) || (this.tooltipElement.classList.add(i.newCss), this.tooltipElement.style.transform = t > 4 ? "scale(1)" : this.getTooltipTransformProperties(this.previousTooltipClass).rotate) } else { var i = t > 4 ? Qx : Xx; this.tooltipObj.cssClass = vx + " " + i } } }, t.prototype.tooltipPlacement = function () { return "Horizontal" === this.orientation ? "Before" === this.tooltip.placement ? "TopCenter" : "BottomCenter" : "Before" === this.tooltip.placement ? "LeftCenter" : "RightCenter" }, t.prototype.tooltipBeforeOpen = function (e) { this.tooltipElement = e.element, this.tooltip.cssClass && S([this.tooltipElement], this.tooltip.cssClass.split(" ").filter(function (e) { return e })), e.target.removeAttribute("aria-describedby"), this.isMaterialTooltip && (this.tooltipElement.firstElementChild.classList.add(Zx), this.handleStart(), this.setTooltipTransform()) }, t.prototype.tooltipCollision = function (e) { if (this.isBootstrap || this.isBootstrap4 || this.isMaterial && !this.isMaterialTooltip) { var t = this.isBootstrap4 ? 3 : 6; switch (e) { case "TopCenter": this.tooltipObj.setProperties({ offsetY: -t }, !1); break; case "BottomCenter": this.tooltipObj.setProperties({ offsetY: t }, !1); break; case "LeftCenter": this.tooltipObj.setProperties({ offsetX: -t }, !1); break; case "RightCenter": this.tooltipObj.setProperties({ offsetX: t }, !1) } } }, t.prototype.wireMaterialTooltipEvent = function (e) { this.isMaterialTooltip && (e ? Kv.remove(this.tooltipElement, "mousedown touchstart", this.sliderDown) : Kv.add(this.tooltipElement, "mousedown touchstart", this.sliderDown, this)) }, t.prototype.tooltipPositionCalculation = function (e) { var t; switch (e) { case "TopCenter": t = Sx; break; case "BottomCenter": t = xx; break; case "LeftCenter": t = Tx; break; case "RightCenter": t = Dx }return t }, t.prototype.getTooltipTransformProperties = function (e) { var t; if (this.tooltipElement) { var i = "Horizontal" === this.orientation ? this.tooltipElement.clientHeight + 14 - this.tooltipElement.clientHeight / 2 : this.tooltipElement.clientWidth + 14 - this.tooltipElement.clientWidth / 2; t = "Horizontal" === this.orientation ? e === Sx ? { rotate: "rotate(45deg)", translate: "translateY(" + i + "px)" } : { rotate: "rotate(225deg)", translate: "translateY(" + -i + "px)" } : e === Tx ? { rotate: "rotate(-45deg)", translate: "translateX(" + i + "px)" } : { rotate: "rotate(-225deg)", translate: "translateX(" + -i + "px)" } } return t }, t.prototype.openMaterialTooltip = function () { var e = this; if (this.isMaterialTooltip) { this.refreshTooltip(this.firstHandle); var t = this.tooltipElement.firstElementChild; t.classList.remove(Zx), t.classList.add(Jx), this.firstHandle.style.cursor = "default", this.tooltipElement.style.transition = this.scaleTransform, this.tooltipElement.classList.add(Ax), this.materialHandle.style.transform = "scale(0)", t.innerText.length > 4 ? this.tooltipElement.style.transform = "scale(1)" : this.tooltipElement.style.transform = this.getTooltipTransformProperties(this.previousTooltipClass).rotate, "Default" === this.type ? setTimeout(function () { e.tooltipElement.style.transition = e.transition.handle }, 2500) : setTimeout(function () { e.tooltipElement.style.transition = "none" }, 2500) } }, t.prototype.closeMaterialTooltip = function () { var e = this; if (this.isMaterialTooltip) { var t = this.tooltipElement.firstElementChild; this.tooltipElement.style.transition = this.scaleTransform, t.classList.remove(Jx), t.classList.add(Zx), this.firstHandle.style.cursor = "-webkit-grab", this.firstHandle.style.cursor = "grab", this.materialHandle.style.transform = "scale(1)", this.tooltipElement.classList.remove(Ax), this.setTooltipTransform(), this.tooltipTarget = void 0, setTimeout(function () { e.tooltipElement.style.transition = "none" }, 2500) } }, t.prototype.checkTooltipPosition = function (e) { if (void 0 === this.tooltipCollidedPosition || this.tooltipCollidedPosition !== e.collidedPosition) { if (this.isMaterialTooltip) { var t = this.tooltipPositionCalculation(e.collidedPosition); e.element.classList.remove(this.previousTooltipClass), e.element.classList.add(t), this.previousTooltipClass = t, e.element.style.transform && e.element.classList.contains(Ax) && e.element.firstElementChild.innerText.length <= 4 && (e.element.style.transform = this.getTooltipTransformProperties(this.previousTooltipClass).rotate) } this.tooltipCollidedPosition = e.collidedPosition } this.isMaterialTooltip && this.tooltipElement && -1 !== this.tooltipElement.style.transform.indexOf("translate") && this.setTooltipTransform() }, t.prototype.setTooltipTransform = function () { var e = this.getTooltipTransformProperties(this.previousTooltipClass); this.tooltipElement.firstElementChild.innerText.length > 4 ? this.tooltipElement.style.transform = e.translate + " scale(0.01)" : this.tooltipElement.style.transform = e.translate + " " + e.rotate + " scale(0.01)" }, t.prototype.renderTooltip = function () { this.tooltipObj = new cS({ showTipPointer: this.isBootstrap || this.isMaterial || this.isBootstrap4, cssClass: vx, height: this.isMaterial ? 30 : "auto", animation: { open: { effect: "None" }, close: { effect: "FadeOut", duration: 500 } }, opensOn: "Custom", beforeOpen: this.tooltipBeforeOpen.bind(this), beforeCollision: this.checkTooltipPosition.bind(this), beforeClose: this.tooltipBeforeClose.bind(this) }), this.tooltipObj.appendTo(this.firstHandle), this.initializeTooltipProps() }, t.prototype.initializeTooltipProps = function () { var e = this.isMaterialTooltip ? "Always" : "Auto" === this.tooltip.showOn ? "Hover" : this.tooltip.showOn; this.setProperties({ tooltip: { showOn: e } }, !0), this.tooltipObj.position = this.tooltipPlacement(), this.tooltipCollision(this.tooltipObj.position), [this.firstHandle, this.rangeBar, this.secondHandle].forEach(function (e) { d(e) || (e.style.transition = "none") }), this.isMaterialTooltip && (this.sliderContainer.classList.add(jx), this.tooltipValue(), this.tooltipObj.animation.close.effect = "None", this.tooltipObj.open(this.firstHandle)) }, t.prototype.tooltipBeforeClose = function () { this.tooltipElement = void 0, this.tooltipCollidedPosition = void 0 }, t.prototype.setButtons = function () { this.firstBtn = this.createElement("div", { className: cx + " " + px }), this.firstBtn.appendChild(this.createElement("span", { className: Bx })), this.firstBtn.tabIndex = -1, this.secondBtn = this.createElement("div", { className: cx + " " + ux }), this.secondBtn.appendChild(this.createElement("span", { className: Bx })), this.secondBtn.tabIndex = -1, this.sliderContainer.classList.add(_x), this.sliderContainer.appendChild(this.firstBtn), this.sliderContainer.appendChild(this.secondBtn), this.sliderContainer.appendChild(this.element), this.buttonTitle() }, t.prototype.buttonTitle = function () { var e = this.enableRtl && "Vertical" !== this.orientation; this.l10n.setLocale(this.locale); var t = this.l10n.getConstant("decrementTitle"), i = this.l10n.getConstant("incrementTitle"); P(e ? this.secondBtn : this.firstBtn, { "aria-label": t, title: t }), P(e ? this.firstBtn : this.secondBtn, { "aria-label": i, title: i }) }, t.prototype.buttonFocusOut = function () { this.isMaterial && this.getHandle().classList.remove("e-large-thumb-size") }, t.prototype.repeatButton = function (e) { var t, i = this.handleValueUpdate(), n = this.enableRtl && "Vertical" !== this.orientation; e.target.parentElement.classList.contains(px) || e.target.classList.contains(px) ? t = n ? this.add(i, parseFloat(this.step.toString()), !0) : this.add(i, parseFloat(this.step.toString()), !1) : (e.target.parentElement.classList.contains(ux) || e.target.classList.contains(ux)) && (t = n ? this.add(i, parseFloat(this.step.toString()), !1) : this.add(i, parseFloat(this.step.toString()), !0)), this.limits.enabled && (t = this.getLimitCorrectedValues(t)), t >= this.min && t <= this.max && (this.changeHandleValue(t), this.tooltipToggle(this.getHandle())) }, t.prototype.repeatHandlerMouse = function (e) { e.preventDefault(), "mousedown" !== e.type && "touchstart" !== e.type || (this.buttonClick(e), this.repeatInterval = setInterval(this.repeatButton.bind(this), 180, e)) }, t.prototype.materialChange = function () { this.getHandle().classList.contains("e-large-thumb-size") || this.getHandle().classList.add("e-large-thumb-size") }, t.prototype.repeatHandlerUp = function (e) { this.changeEvent("changed"), this.closeTooltip(), clearInterval(this.repeatInterval), this.getHandle().focus() }, t.prototype.customTickCounter = function (e) { var t = 4; return !d(this.customValues) && this.customValues.length > 0 && (e > 4 && (t = 3), e > 7 && (t = 2), e > 14 && (t = 1), e > 28 && (t = 0)), t }, t.prototype.renderScale = function () { var e = "Vertical" === this.orientation ? "v" : "h"; this.noOfDecimals = this.numberOfDecimals(this.step), this.ul = this.createElement("ul", { className: gx + " e-" + e + "-scale " + mx + "-" + this.ticks.placement.toLowerCase(), attrs: { role: "presentation", tabIndex: "-1", "aria-hidden": "true" } }), this.ul.style.zIndex = "-1", uw.isAndroid && "h" === e && this.ul.classList.add(Vx); var t = this.ticks.smallStep; this.ticks.showSmallTicks ? t <= 0 && (t = parseFloat(v(this.step))) : t = this.ticks.largeStep > 0 ? this.ticks.largeStep : parseFloat(v(this.max)) - parseFloat(v(this.min)); var i = this.fractionalToInteger(this.min), n = this.fractionalToInteger(this.max), r = this.fractionalToInteger(t), o = !d(this.customValues) && this.customValues.length > 0 && this.customValues.length - 1, s = this.customTickCounter(o), a = !d(this.customValues) && this.customValues.length > 0 ? o * s + o : Math.abs((n - i) / r); this.element.appendChild(this.ul); var l, h = parseFloat(this.min.toString()); "v" === e && (h = parseFloat(this.max.toString())); var c, p = 0, u = 100 / a; u === 1 / 0 && (u = 5); for (var g = 0, m = !d(this.customValues) && this.customValues.length > 0 ? this.customValues.length - 1 : 0, f = 0; g <= a; g++) { if (l = this.createElement("li", { attrs: { class: mx, role: "presentation", tabIndex: "-1", "aria-hidden": "true" } }), !d(this.customValues) && this.customValues.length > 0) (c = g % (s + 1) == 0) && ("h" === e ? (h = this.customValues[f], f++) : (h = this.customValues[m], m--), l.setAttribute("title", h.toString())); else if (l.setAttribute("title", h.toString()), 0 === this.numberOfDecimals(this.max) && 0 === this.numberOfDecimals(this.min) && 0 === this.numberOfDecimals(this.step)) c = "h" === e ? (h - parseFloat(this.min.toString())) % this.ticks.largeStep == 0 : Math.abs(h - parseFloat(this.max.toString())) % this.ticks.largeStep == 0; else { var y = this.fractionalToInteger(this.ticks.largeStep); c = (this.fractionalToInteger(h) - i) % y == 0 } c && l.classList.add(fx), "h" === e ? l.style.width = u + "%" : l.style.height = u + "%"; var w = c ? "Both" === this.ticks.placement ? 2 : 1 : 0; if (c) for (var b = 0; b < w; b++)this.createTick(l, h); else d(this.customValues) && this.formatTicksValue(l, h); this.ul.appendChild(l), this.tickElementCollection.push(l); var C = void 0; d(this.customValues) && (C = this.numberOfDecimals(t) > this.numberOfDecimals(h) ? this.numberOfDecimals(t) : this.numberOfDecimals(h), h = "h" === e ? this.makeRoundNumber(h + t, C) : this.makeRoundNumber(h - t, C), p = this.makeRoundNumber(p + t, C)) } this.tickesAlignment(e, u) }, t.prototype.tickesAlignment = function (e, t) { this.firstChild = this.ul.firstElementChild, this.lastChild = this.ul.lastElementChild, this.firstChild.classList.add(Wx), this.lastChild.classList.add(Hx), this.sliderContainer.classList.add(gx + "-" + this.ticks.placement.toLowerCase()), "h" === e ? (this.firstChild.style.width = t / 2 + "%", this.lastChild.style.width = t / 2 + "%") : (this.firstChild.style.height = t / 2 + "%", this.lastChild.style.height = t / 2 + "%"); var i = { ticksWrapper: this.ul, tickElements: this.tickElementCollection }; this.trigger("renderedTicks", i), this.scaleAlignment() }, t.prototype.createTick = function (e, t) { var i = this.createElement("span", { className: yx + " " + mx + "-" + this.ticks.placement.toLowerCase(), attrs: { role: "presentation", tabIndex: "-1", "aria-hidden": "true" } }); e.appendChild(i), d(this.customValues) ? this.formatTicksValue(e, t, i) : i.innerHTML = t.toString() }, t.prototype.formatTicksValue = function (e, t, i) { var n = this.formatNumber(t), r = { value: t, text: d(this.ticks) || d(this.ticks.format) ? n : this.formatString(t, this.ticksFormatInfo).formatString, tickElement: e }; this.trigger("renderingTicks", r, function (t) { e.setAttribute("title", t.text.toString()), i && (i.innerHTML = t.text.toString()) }) }, t.prototype.scaleAlignment = function () { this.tickValuePosition(); this.orientation; "Vertical" === this.orientation ? this.element.getBoundingClientRect().width <= 15 ? this.sliderContainer.classList.add(Fx) : this.sliderContainer.classList.remove(Fx) : this.element.getBoundingClientRect().height <= 15 ? this.sliderContainer.classList.add(Fx) : this.sliderContainer.classList.remove(Fx) }, t.prototype.tickValuePosition = function () { var e, t = this.firstChild.getBoundingClientRect(), i = this.ticks.smallStep, n = Math.abs(parseFloat(v(this.max)) - parseFloat(v(this.min))) / i; this.firstChild.children.length > 0 && (e = this.firstChild.children[0].getBoundingClientRect()); var r, o = [this.sliderContainer.querySelectorAll("." + mx + "." + fx + " ." + yx)]; r = "Both" === this.ticks.placement ? [].slice.call(o[0], 2) : [].slice.call(o[0], 1); for (var s = "Vertical" === this.orientation ? 2 * t.height : 2 * t.width, a = 0; a < this.firstChild.children.length; a++)"Vertical" === this.orientation ? this.firstChild.children[a].style.top = -e.height / 2 + "px" : this.enableRtl ? this.firstChild.children[a].style.left = (s - this.firstChild.children[a].getBoundingClientRect().width) / 2 + "px" : this.firstChild.children[a].style.left = -e.width / 2 + "px"; for (a = 0; a < r.length; a++) { var l = r[a].getBoundingClientRect(); "Vertical" === this.orientation ? z(r[a], { top: (s - l.height) / 2 + "px" }) : z(r[a], { left: (s - l.width) / 2 + "px" }) } this.enableRtl && this.lastChild.children.length && 0 !== n && (this.lastChild.children[0].style.left = -this.lastChild.getBoundingClientRect().width / 2 + "px", "Both" === this.ticks.placement && (this.lastChild.children[1].style.left = -this.lastChild.getBoundingClientRect().width / 2 + "px")), 0 === n && ("Horizontal" === this.orientation && (this.enableRtl ? (this.firstChild.classList.remove(Hx), this.firstChild.style.right = this.firstHandle.style.right, this.firstChild.children[0].style.left = this.firstChild.getBoundingClientRect().width / 2 + 2 + "px", "Both" === this.ticks.placement && (this.firstChild.children[1].style.left = this.firstChild.getBoundingClientRect().width / 2 + 2 + "px")) : (this.firstChild.classList.remove(Hx), this.firstChild.style.left = this.firstHandle.style.left)), "Vertical" === this.orientation && this.firstChild.classList.remove(Hx)) }, t.prototype.setAriaAttrValue = function (e) { var t, i = !d(this.ticks) && !d(this.ticks.format), n = i ? this.formatContent(this.tooltipFormatInfo, !1) : this.formatContent(this.ticksFormatInfo, !1), r = i ? this.formatContent(this.ticksFormatInfo, !0) : this.formatContent(this.tooltipFormatInfo, !0); t = 2 === (n = this.customAriaText ? this.customAriaText : n).split(" - ").length ? n.split(" - ") : [n, n], this.setAriaAttributes(e), "Range" !== this.type ? P(e, { "aria-valuenow": r, "aria-valuetext": n }) : this.enableRtl ? e === this.firstHandle ? P(e, { "aria-valuenow": r.split(" - ")[1], "aria-valuetext": t[1] }) : P(e, { "aria-valuenow": r.split(" - ")[0], "aria-valuetext": t[0] }) : e === this.firstHandle ? P(e, { "aria-valuenow": r.split(" - ")[0], "aria-valuetext": t[0] }) : P(e, { "aria-valuenow": r.split(" - ")[1], "aria-valuetext": t[1] }) }, t.prototype.handleValueUpdate = function () { return "Range" === this.type ? 1 === this.activeHandle ? this.handleVal1 : this.handleVal2 : this.handleVal1 }, t.prototype.getLimitCorrectedValues = function (e) { return e = "MinRange" === this.type || "Default" === this.type ? this.getLimitValueAndPosition(e, this.limits.minStart, this.limits.minEnd)[0] : 1 === this.activeHandle ? this.getLimitValueAndPosition(e, this.limits.minStart, this.limits.minEnd)[0] : this.getLimitValueAndPosition(e, this.limits.maxStart, this.limits.maxEnd)[0] }, t.prototype.focusSliderElement = function () { this.isElementFocused || (this.element.focus(), this.isElementFocused = !0) }, t.prototype.buttonClick = function (e) { this.focusSliderElement(); var t, i = this.enableRtl && "Vertical" !== this.orientation, n = this.handleValueUpdate(); 40 === e.keyCode || 37 === e.keyCode || e.currentTarget.classList.contains(px) ? t = i ? this.add(n, parseFloat(this.step.toString()), !0) : this.add(n, parseFloat(this.step.toString()), !1) : 38 === e.keyCode || 39 === e.keyCode || e.currentTarget.classList.contains(ux) ? t = i ? this.add(n, parseFloat(this.step.toString()), !1) : this.add(n, parseFloat(this.step.toString()), !0) : 33 === e.keyCode || e.currentTarget.classList.contains(px) ? t = i ? this.add(n, parseFloat(this.ticks.largeStep.toString()), !1) : this.add(n, parseFloat(this.ticks.largeStep.toString()), !0) : 34 === e.keyCode || e.currentTarget.classList.contains(ux) ? t = i ? this.add(n, parseFloat(this.ticks.largeStep.toString()), !0) : this.add(n, parseFloat(this.ticks.largeStep.toString()), !1) : 36 === e.keyCode ? t = parseFloat(this.min.toString()) : 35 === e.keyCode && (t = parseFloat(this.max.toString())), this.limits.enabled && (t = this.getLimitCorrectedValues(t)), this.changeHandleValue(t), !this.isMaterial || this.tooltip.isVisible || this.getHandle().classList.contains(zx) || this.materialChange(), this.tooltipToggle(this.getHandle()), this.getHandle().focus(), e.currentTarget.classList.contains(px) && Kv.add(this.firstBtn, "mouseup touchend", this.buttonUp, this), e.currentTarget.classList.contains(ux) && Kv.add(this.secondBtn, "mouseup touchend", this.buttonUp, this) }, t.prototype.tooltipToggle = function (e) { this.isMaterialTooltip ? this.tooltipElement.classList.contains(Ax) ? this.refreshTooltip(this.firstHandle) : this.openMaterialTooltip() : this.tooltipElement ? this.refreshTooltip(e) : this.openTooltip(e) }, t.prototype.buttonUp = function (e) { e.currentTarget.classList.contains(px) && Kv.remove(this.firstBtn, "mouseup touchend", this.buttonUp), e.currentTarget.classList.contains(ux) && Kv.remove(this.secondBtn, "mouseup touchend", this.buttonUp) }, t.prototype.setRangeBar = function () { "Horizontal" === this.orientation ? "MinRange" === this.type ? (this.enableRtl ? this.rangeBar.style.right = "0px" : this.rangeBar.style.left = "0px", z(this.rangeBar, { width: d(this.handlePos1) ? 0 : this.handlePos1 + "px" })) : (this.enableRtl ? this.rangeBar.style.right = this.handlePos1 + "px" : this.rangeBar.style.left = this.handlePos1 + "px", z(this.rangeBar, { width: this.handlePos2 - this.handlePos1 + "px" })) : "MinRange" === this.type ? (this.rangeBar.style.bottom = "0px", z(this.rangeBar, { height: d(this.handlePos1) ? 0 : this.handlePos1 + "px" })) : (this.rangeBar.style.bottom = this.handlePos1 + "px", z(this.rangeBar, { height: this.handlePos2 - this.handlePos1 + "px" })) }, t.prototype.checkValidValueAndPos = function (e) { return e = this.checkHandleValue(e), e = this.checkHandlePosition(e) }, t.prototype.setLimitBarPositions = function (e, t, i, n) { "Horizontal" === this.orientation ? this.enableRtl ? (this.limitBarFirst.style.right = e + "px", this.limitBarFirst.style.width = t - e + "px") : (this.limitBarFirst.style.left = e + "px", this.limitBarFirst.style.width = t - e + "px") : (this.limitBarFirst.style.bottom = e + "px", this.limitBarFirst.style.height = t - e + "px"), "Range" === this.type && ("Horizontal" === this.orientation ? this.enableRtl ? (this.limitBarSecond.style.right = i + "px", this.limitBarSecond.style.width = n - i + "px") : (this.limitBarSecond.style.left = i + "px", this.limitBarSecond.style.width = n - i + "px") : (this.limitBarSecond.style.bottom = i + "px", this.limitBarSecond.style.height = n - i + "px")) }, t.prototype.setLimitBar = function () { if ("Default" === this.type || "MinRange" === this.type) { var e = this.getLimitValueAndPosition(this.limits.minStart, this.limits.minStart, this.limits.minEnd, !0)[0]; e = this.checkValidValueAndPos(e); var t = this.getLimitValueAndPosition(this.limits.minEnd, this.limits.minStart, this.limits.minEnd, !0)[0]; t = this.checkValidValueAndPos(t), this.setLimitBarPositions(e, t) } else if ("Range" === this.type) { var i = this.getLimitValueAndPosition(this.limits.minStart, this.limits.minStart, this.limits.minEnd, !0)[0]; i = this.checkValidValueAndPos(i); var n = this.getLimitValueAndPosition(this.limits.minEnd, this.limits.minStart, this.limits.minEnd, !0)[0]; n = this.checkValidValueAndPos(n); var r = this.getLimitValueAndPosition(this.limits.maxStart, this.limits.maxStart, this.limits.maxEnd, !0)[0]; r = this.checkValidValueAndPos(r); var o = this.getLimitValueAndPosition(this.limits.maxEnd, this.limits.maxStart, this.limits.maxEnd, !0)[0]; o = this.checkValidValueAndPos(o), this.setLimitBarPositions(i, n, r, o) } }, t.prototype.getLimitValueAndPosition = function (e, t, i, n) { return d(t) && (t = this.min, d(e) && n && (e = t)), d(i) && (i = this.max, d(e) && n && (e = i)), e < t && (e = t), e > i && (e = i), [e, this.checkHandlePosition(e)] }, t.prototype.setValue = function () { if (!d(this.customValues) && this.customValues.length > 0 && (this.min = 0, this.max = this.customValues.length - 1), this.setAriaAttributes(this.firstHandle), this.handleVal1 = d(this.value) ? this.checkHandleValue(parseFloat(this.min.toString())) : this.checkHandleValue(parseFloat(this.value.toString())), this.handlePos1 = this.checkHandlePosition(this.handleVal1), this.preHandlePos1 = this.handlePos1, d(this.activeHandle) ? "Range" === this.type ? this.activeHandle = 2 : this.activeHandle = 1 : this.activeHandle = this.activeHandle, "Default" === this.type || "MinRange" === this.type) { if (this.limits.enabled) { var e = this.getLimitValueAndPosition(this.handleVal1, this.limits.minStart, this.limits.minEnd); this.handleVal1 = e[0], this.handlePos1 = e[1], this.preHandlePos1 = this.handlePos1 } this.setHandlePosition(), this.handleStart(), this.value = this.handleVal1, this.setAriaAttrValue(this.firstHandle), this.changeEvent("changed") } else this.validateRangeValue(); "Default" !== this.type && this.setRangeBar(), this.limits.enabled && this.setLimitBar() }, t.prototype.rangeValueUpdate = function () { null !== this.value && "object" == typeof this.value || (this.value = [parseFloat(v(this.min)), parseFloat(v(this.max))]) }, t.prototype.validateRangeValue = function () { this.rangeValueUpdate(), this.setRangeValue() }, t.prototype.modifyZindex = function () { "Range" === this.type ? 1 === this.activeHandle ? (this.firstHandle.style.zIndex = this.zIndex + 4 + "", this.secondHandle.style.zIndex = this.zIndex + 3 + "") : (this.firstHandle.style.zIndex = this.zIndex + 3 + "", this.secondHandle.style.zIndex = this.zIndex + 4 + "") : this.isMaterialTooltip && this.tooltipElement && (this.tooltipElement.style.zIndex = this.zIndex + 4 + "") }, t.prototype.setHandlePosition = function () { var e, t = this, i = 1 === this.activeHandle ? this.handlePos1 : this.handlePos2; e = this.isMaterialTooltip ? [this.firstHandle, this.materialHandle] : [this.getHandle()], this.handleStart(), e.forEach(function (e) { "Horizontal" === t.orientation ? t.enableRtl ? e.style.right = i + "px" : e.style.left = i + "px" : e.style.bottom = i + "px" }), this.changeEvent("change") }, t.prototype.getHandle = function () { return 1 === this.activeHandle ? this.firstHandle : this.secondHandle }, t.prototype.setRangeValue = function () { this.updateRangeValue(), this.activeHandle = 1, this.setHandlePosition(), this.activeHandle = 2, this.setHandlePosition(), this.activeHandle = 1 }, t.prototype.changeEvent = function (e) { var t = "change" === e ? this.previousVal : this.previousChanged; if ("Range" !== this.type) this.setProperties({ value: this.handleVal1 }, !0), t !== this.value && (this.trigger(e, this.changeEventArgs(e)), this.setPreviousVal(e, this.value)), this.setAriaAttrValue(this.firstHandle); else { var i = this.value = [this.handleVal1, this.handleVal2]; this.setProperties({ value: i }, !0), (t.length === this.value.length && this.value[0] !== t[0] || this.value[1] !== t[1]) && (this.trigger(e, this.changeEventArgs(e)), this.setPreviousVal(e, this.value)), this.setAriaAttrValue(this.getHandle()) } this.hiddenInput.value = this.value.toString() }, t.prototype.changeEventArgs = function (e) { var t; return this.tooltip.isVisible && this.tooltipObj ? (this.tooltipValue(), t = { value: this.value, previousValue: "change" === e ? this.previousVal : this.previousChanged, action: e, text: this.tooltipObj.content }) : t = { value: this.value, previousValue: "change" === e ? this.previousVal : this.previousChanged, action: e, text: d(this.ticksFormatInfo.format) ? this.value.toString() : "Range" !== this.type ? this.formatString(this.value, this.ticksFormatInfo).formatString : this.formatString(this.value[0], this.ticksFormatInfo).formatString + " - " + this.formatString(this.value[1], this.ticksFormatInfo).formatString }, t }, t.prototype.setPreviousVal = function (e, t) { "change" === e ? this.previousVal = t : this.previousChanged = t }, t.prototype.updateRangeValue = function () { var e = this.value.toString().split(",").map(Number); if (this.enableRtl && "Vertical" !== this.orientation || this.rtl ? this.value = [e[1], e[0]] : this.value = [e[0], e[1]], this.enableRtl && "Vertical" !== this.orientation ? (this.handleVal1 = this.checkHandleValue(this.value[1]), this.handleVal2 = this.checkHandleValue(this.value[0])) : (this.handleVal1 = this.checkHandleValue(this.value[0]), this.handleVal2 = this.checkHandleValue(this.value[1])), this.handlePos1 = this.checkHandlePosition(this.handleVal1), this.handlePos2 = this.checkHandlePosition(this.handleVal2), this.handlePos1 > this.handlePos2 && (this.handlePos1 = this.handlePos2, this.handleVal1 = this.handleVal2), this.preHandlePos1 = this.handlePos1, this.preHandlePos2 = this.handlePos2, this.limits.enabled) { this.activeHandle = 1; var t = this.getLimitValueAndPosition(this.handleVal1, this.limits.minStart, this.limits.minEnd); this.handleVal1 = t[0], this.handlePos1 = t[1], this.preHandlePos1 = this.handlePos1, this.activeHandle = 2, t = this.getLimitValueAndPosition(this.handleVal2, this.limits.maxStart, this.limits.maxEnd), this.handleVal2 = t[0], this.handlePos2 = t[1], this.preHandlePos2 = this.handlePos2 } }, t.prototype.checkHandlePosition = function (e) { var t; return e = 100 * (e - parseFloat(v(this.min))) / (parseFloat(v(this.max)) - parseFloat(v(this.min))), t = "Horizontal" === this.orientation ? this.element.getBoundingClientRect().width * (e / 100) : this.element.getBoundingClientRect().height * (e / 100), parseFloat(v(this.max)) === parseFloat(v(this.min)) && (t = "Horizontal" === this.orientation ? this.element.getBoundingClientRect().width : this.element.getBoundingClientRect().height), t }, t.prototype.checkHandleValue = function (e) { if (this.min > this.max && (this.min = this.max), this.min === this.max) return parseFloat(v(this.max)); var t = this.tempStartEnd(); return e < t.start ? e = t.start : e > t.end && (e = t.end), e }, t.prototype.reposition = function () { var e = this; this.firstHandle.style.transition = "none", "Default" !== this.type && (this.rangeBar.style.transition = "none"), "Range" === this.type && (this.secondHandle.style.transition = "none"), this.handlePos1 = this.checkHandlePosition(this.handleVal1), this.handleVal2 && (this.handlePos2 = this.checkHandlePosition(this.handleVal2)), "Horizontal" === this.orientation ? (this.enableRtl ? this.firstHandle.style.right = this.handlePos1 + "px" : this.firstHandle.style.left = this.handlePos1 + "px", this.isMaterialTooltip && (this.enableRtl ? this.materialHandle.style.right = this.handlePos1 + "px" : this.materialHandle.style.left = this.handlePos1 + "px"), "MinRange" === this.type ? (this.enableRtl ? this.rangeBar.style.right = "0px" : this.rangeBar.style.left = "0px", z(this.rangeBar, { width: d(this.handlePos1) ? 0 : this.handlePos1 + "px" })) : "Range" === this.type && (this.enableRtl ? this.secondHandle.style.right = this.handlePos2 + "px" : this.secondHandle.style.left = this.handlePos2 + "px", this.enableRtl ? this.rangeBar.style.right = this.handlePos1 + "px" : this.rangeBar.style.left = this.handlePos1 + "px", z(this.rangeBar, { width: this.handlePos2 - this.handlePos1 + "px" }))) : (this.firstHandle.style.bottom = this.handlePos1 + "px", this.isMaterialTooltip && (this.materialHandle.style.bottom = this.handlePos1 + "px"), "MinRange" === this.type ? (this.rangeBar.style.bottom = "0px", z(this.rangeBar, { height: d(this.handlePos1) ? 0 : this.handlePos1 + "px" })) : "Range" === this.type && (this.secondHandle.style.bottom = this.handlePos2 + "px", this.rangeBar.style.bottom = this.handlePos1 + "px", z(this.rangeBar, { height: this.handlePos2 - this.handlePos1 + "px" }))), this.limits.enabled && this.setLimitBar(), "None" !== this.ticks.placement && this.ul && (this.removeElement(this.ul), this.ul = void 0, this.renderScale()), this.handleStart(), this.tooltip.isVisible || setTimeout(function () { e.firstHandle.style.transition = e.scaleTransform, "Range" === e.type && (e.secondHandle.style.transition = e.scaleTransform) }), this.refreshTooltip(this.tooltipTarget) }, t.prototype.changeHandleValue = function (e) { var t = null; 1 === this.activeHandle ? (this.limits.enabled && this.limits.startHandleFixed || (this.handleVal1 = this.checkHandleValue(e), this.handlePos1 = this.checkHandlePosition(this.handleVal1), "Range" === this.type && this.handlePos1 > this.handlePos2 && (this.handlePos1 = this.handlePos2, this.handleVal1 = this.handleVal2), this.handlePos1 !== this.preHandlePos1 && (t = this.preHandlePos1 = this.handlePos1)), this.modifyZindex()) : (this.limits.enabled && this.limits.endHandleFixed || (this.handleVal2 = this.checkHandleValue(e), this.handlePos2 = this.checkHandlePosition(this.handleVal2), "Range" === this.type && this.handlePos2 < this.handlePos1 && (this.handlePos2 = this.handlePos1, this.handleVal2 = this.handleVal1), this.handlePos2 !== this.preHandlePos2 && (t = this.preHandlePos2 = this.handlePos2)), this.modifyZindex()), null !== t && ("Default" !== this.type && this.setRangeBar(), this.setHandlePosition()) }, t.prototype.tempStartEnd = function () { return this.min > this.max ? { start: this.max, end: this.min } : { start: this.min, end: this.max } }, t.prototype.xyToPosition = function (e) { if (this.min === this.max) return 100; if ("Horizontal" === this.orientation) { var t = e.x - this.element.getBoundingClientRect().left, i = this.element.offsetWidth / 100; this.val = t / i } else { var n = e.y - this.element.getBoundingClientRect().top; i = this.element.offsetHeight / 100; this.val = 100 - n / i } var r = this.stepValueCalculation(this.val); return r < 0 ? r = 0 : r > 100 && (r = 100), this.enableRtl && "Vertical" !== this.orientation && (r = 100 - r), "Horizontal" === this.orientation ? this.element.getBoundingClientRect().width * (r / 100) : this.element.getBoundingClientRect().height * (r / 100) }, t.prototype.stepValueCalculation = function (e) { 0 === this.step && (this.step = 1); var t = parseFloat(v(this.step)) / ((parseFloat(v(this.max)) - parseFloat(v(this.min))) / 100), i = e % Math.abs(t); return 0 !== i && (t / 2 > i ? e -= i : e += Math.abs(t) - i), e }, t.prototype.add = function (e, t, i) { var n = Math.pow(10, 3); return i ? (Math.round(e * n) + Math.round(t * n)) / n : (Math.round(e * n) - Math.round(t * n)) / n }, t.prototype.positionToValue = function (e) { var t, i = parseFloat(v(this.max)) - parseFloat(v(this.min)); t = "Horizontal" === this.orientation ? e / this.element.getBoundingClientRect().width * i : e / this.element.getBoundingClientRect().height * i; return this.add(t, parseFloat(this.min.toString()), !0) }, t.prototype.sliderBarClick = function (e) { e.preventDefault(); var t; "mousedown" === e.type || "click" === e.type ? t = { x: e.clientX, y: e.clientY } : "touchstart" === e.type && (t = { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY }); var i = this.xyToPosition(t), n = this.positionToValue(i); if ("Range" === this.type && this.handlePos2 - i < i - this.handlePos1) { if (this.activeHandle = 2, !this.limits.enabled || !this.limits.endHandleFixed) { if (this.limits.enabled) { n = (r = this.getLimitValueAndPosition(n, this.limits.maxStart, this.limits.maxEnd))[0], i = r[1] } this.secondHandle.classList.add(qx), this.handlePos2 = this.preHandlePos2 = i, this.handleVal2 = n } this.modifyZindex(), this.secondHandle.focus() } else { if (this.activeHandle = 1, !this.limits.enabled || !this.limits.startHandleFixed) { if (this.limits.enabled) { var r; n = (r = this.getLimitValueAndPosition(n, this.limits.minStart, this.limits.minEnd))[0], i = r[1] } this.firstHandle.classList.add(qx), this.handlePos1 = this.preHandlePos1 = i, this.handleVal1 = n } this.modifyZindex(), this.firstHandle.focus() } this.isMaterialTooltip && this.tooltipElement.classList.add(Ex); var o = this.element.querySelector("." + zx); o && this.getHandle() !== o && o.classList.remove(zx); var s = 1 === this.activeHandle ? this.firstHandle : this.secondHandle; if (e.target === s) return !this.isMaterial || this.tooltip.isVisible || this.getHandle().classList.contains(zx) || this.materialChange(), void this.tooltipToggle(this.getHandle()); if (this.checkRepeatedValue(n)) { var a = this.isMaterial && this.tooltip.isVisible ? this.transitionOnMaterialTooltip : this.transition; this.getHandle().style.transition = a.handle, "Default" !== this.type && (this.rangeBar.style.transition = a.rangeBar), this.setHandlePosition(), "Default" !== this.type && this.setRangeBar() } }, t.prototype.sliderDown = function (e) { var t, i; if (e.preventDefault(), this.focusSliderElement(), "Range" === this.type && this.drag && e.target === this.rangeBar) { var n = void 0, r = void 0; "mousedown" === e.type ? (n = (t = [e.clientX, e.clientY])[0], r = t[1]) : "touchstart" === e.type && (n = (i = [e.changedTouches[0].clientX, e.changedTouches[0].clientY])[0], r = i[1]), "Horizontal" === this.orientation ? (this.firstPartRemain = n - this.rangeBar.getBoundingClientRect().left, this.secondPartRemain = this.rangeBar.getBoundingClientRect().right - n) : (this.firstPartRemain = r - this.rangeBar.getBoundingClientRect().top, this.secondPartRemain = this.rangeBar.getBoundingClientRect().bottom - r), this.minDiff = this.handleVal2 - this.handleVal1, this.tooltipToggle(this.rangeBar); var o = this.element.querySelector("." + zx); o && o.classList.remove(zx), Kv.add(document, "mousemove touchmove", this.dragRangeBarMove, this), Kv.add(document, "mouseup touchend", this.dragRangeBarUp, this) } else this.sliderBarClick(e), Kv.add(document, "mousemove touchmove", this.sliderBarMove, this), Kv.add(document, "mouseup touchend", this.sliderBarUp, this) }, t.prototype.handleValueAdjust = function (e, t, i) { 1 === i ? (this.handleVal1 = t, this.handleVal2 = this.handleVal1 + this.minDiff) : 2 === i && (this.handleVal2 = t, this.handleVal1 = this.handleVal2 - this.minDiff), this.handlePos1 = this.checkHandlePosition(this.handleVal1), this.handlePos2 = this.checkHandlePosition(this.handleVal2) }, t.prototype.dragRangeBarMove = function (e) { var t, i; "touchmove" !== e.type && e.preventDefault(); var n; this.rangeBar.style.transition = "none", this.firstHandle.style.transition = "none", this.secondHandle.style.transition = "none"; var r, o; if ("mousemove" === e.type ? (r = (t = [e.clientX, e.clientY])[0], o = t[1]) : (r = (i = [e.changedTouches[0].clientX, e.changedTouches[0].clientY])[0], o = i[1]), !(this.limits.enabled && this.limits.startHandleFixed || this.limits.enabled && this.limits.endHandleFixed)) { if (n = this.enableRtl ? { x: r + this.secondPartRemain, y: o + this.secondPartRemain } : { x: r - this.firstPartRemain, y: o + this.secondPartRemain }, this.handlePos1 = this.xyToPosition(n), this.handleVal1 = this.positionToValue(this.handlePos1), n = this.enableRtl ? { x: r - this.firstPartRemain, y: o - this.firstPartRemain } : { x: r + this.secondPartRemain, y: o - this.firstPartRemain }, this.handlePos2 = this.xyToPosition(n), this.handleVal2 = this.positionToValue(this.handlePos2), this.limits.enabled) { var s = this.getLimitValueAndPosition(this.handleVal1, this.limits.minStart, this.limits.minEnd); this.handleVal1 = s[0], this.handlePos1 = s[1], this.handleVal1 === this.limits.minEnd && this.handleValueAdjust(this.handleVal1, this.limits.minEnd, 1), this.handleVal1 === this.limits.minStart && this.handleValueAdjust(this.handleVal1, this.limits.minStart, 1), s = this.getLimitValueAndPosition(this.handleVal2, this.limits.maxStart, this.limits.maxEnd), this.handleVal2 = s[0], this.handlePos2 = s[1], this.handleVal2 === this.limits.maxStart && this.handleValueAdjust(this.handleVal2, this.limits.maxStart, 2), this.handleVal2 === this.limits.maxEnd && this.handleValueAdjust(this.handleVal2, this.limits.maxEnd, 2) } this.handleVal2 === this.max && this.handleValueAdjust(this.handleVal2, this.max, 2), this.handleVal1 === this.min && this.handleValueAdjust(this.handleVal1, this.min, 1) } this.activeHandle = 1, this.setHandlePosition(), this.activeHandle = 2, this.setHandlePosition(), this.tooltipToggle(this.rangeBar), this.setRangeBar() }, t.prototype.sliderBarUp = function () { this.changeEvent("changed"), this.handleFocusOut(), this.firstHandle.classList.remove(qx), "Range" === this.type && this.secondHandle.classList.remove(qx), this.closeTooltip(), this.isMaterial && (this.getHandle().classList.remove("e-large-thumb-size"), this.isMaterialTooltip && this.tooltipElement.classList.remove(Ex)), Kv.remove(document, "mousemove touchmove", this.sliderBarMove), Kv.remove(document, "mouseup touchend", this.sliderBarUp) }, t.prototype.sliderBarMove = function (e) { "touchmove" !== e.type && e.preventDefault(); var t; t = "mousemove" === e.type ? { x: e.clientX, y: e.clientY } : { x: e.changedTouches[0].clientX, y: e.changedTouches[0].clientY }; var i = this.xyToPosition(t), n = this.positionToValue(i); if (i = Math.round(i), "Range" !== this.type && 1 === this.activeHandle) { if (!this.limits.enabled || !this.limits.startHandleFixed) { if (this.limits.enabled) { var r = this.getLimitValueAndPosition(n, this.limits.minStart, this.limits.minEnd); i = r[1], n = r[0] } this.handlePos1 = i, this.handleVal1 = n } this.firstHandle.classList.add(qx) } if ("Range" === this.type) if (1 === this.activeHandle) { if (this.firstHandle.classList.add(qx), !(this.limits.enabled && this.limits.startHandleFixed || (i > this.handlePos2 && (i = this.handlePos2, n = this.handleVal2), i === this.preHandlePos1))) { if (this.limits.enabled) { n = (o = this.getLimitValueAndPosition(n, this.limits.minStart, this.limits.minEnd))[0], i = o[1] } this.handlePos1 = this.preHandlePos1 = i, this.handleVal1 = n, this.activeHandle = 1 } } else if (2 === this.activeHandle && (this.secondHandle.classList.add(qx), !(this.limits.enabled && this.limits.endHandleFixed || (i < this.handlePos1 && (i = this.handlePos1, n = this.handleVal1), i === this.preHandlePos2)))) { if (this.limits.enabled) { var o; n = (o = this.getLimitValueAndPosition(n, this.limits.maxStart, this.limits.maxEnd))[0], i = o[1] } this.handlePos2 = this.preHandlePos2 = i, this.handleVal2 = n, this.activeHandle = 2 } this.checkRepeatedValue(n) && (this.getHandle().style.transition = this.scaleTransform, "Default" !== this.type && (this.rangeBar.style.transition = "none"), this.setHandlePosition(), !this.isMaterial || this.tooltip.isVisible || this.getHandle().classList.contains(zx) || this.materialChange(), this.tooltipToggle(this.getHandle()), "Default" !== this.type && this.setRangeBar()) }, t.prototype.dragRangeBarUp = function (e) { this.changeEvent("changed"), this.closeTooltip(), Kv.remove(document, "mousemove touchmove", this.dragRangeBarMove), Kv.remove(document, "mouseup touchend", this.dragRangeBarUp) }, t.prototype.checkRepeatedValue = function (e) { if ("Range" === this.type) { if (e === (this.enableRtl && "Vertical" !== this.orientation ? 1 === this.activeHandle ? this.previousVal[1] : this.previousVal[0] : 1 === this.activeHandle ? this.previousVal[0] : this.previousVal[1])) return 0 } else if (e === this.previousVal) return 0; return 1 }, t.prototype.refreshTooltip = function (e) { this.tooltip.isVisible && this.tooltipObj && (this.tooltipValue(), e && (this.tooltipObj.refresh(e), this.tooltipTarget = e)) }, t.prototype.openTooltip = function (e) { this.tooltip.isVisible && this.tooltipObj && !this.isMaterialTooltip && (this.tooltipValue(), this.tooltipObj.open(e), this.tooltipTarget = e) }, t.prototype.closeTooltip = function () { this.tooltip.isVisible && this.tooltipObj && "Always" !== this.tooltip.showOn && !this.isMaterialTooltip && (this.tooltipValue(), this.tooltipObj.close(), this.tooltipTarget = void 0) }, t.prototype.keyDown = function (e) { switch (e.keyCode) { case 37: case 38: case 39: case 40: case 33: case 34: case 36: case 35: e.preventDefault(), this.buttonClick(e) } }, t.prototype.wireButtonEvt = function (e) { e ? (Kv.remove(this.firstBtn, "mouseleave touchleave", this.buttonFocusOut), Kv.remove(this.secondBtn, "mouseleave touchleave", this.buttonFocusOut), Kv.remove(this.firstBtn, "mousedown touchstart", this.repeatHandlerMouse), Kv.remove(this.firstBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp), Kv.remove(this.secondBtn, "mousedown touchstart", this.repeatHandlerMouse), Kv.remove(this.secondBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp), Kv.remove(this.firstBtn, "focusout", this.sliderFocusOut), Kv.remove(this.secondBtn, "focusout", this.sliderFocusOut)) : (Kv.add(this.firstBtn, "mouseleave touchleave", this.buttonFocusOut, this), Kv.add(this.secondBtn, "mouseleave touchleave", this.buttonFocusOut, this), Kv.add(this.firstBtn, "mousedown touchstart", this.repeatHandlerMouse, this), Kv.add(this.firstBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp, this), Kv.add(this.secondBtn, "mousedown touchstart", this.repeatHandlerMouse, this), Kv.add(this.secondBtn, "mouseup mouseleave touchup touchend", this.repeatHandlerUp, this), Kv.add(this.firstBtn, "focusout", this.sliderFocusOut, this), Kv.add(this.secondBtn, "focusout", this.sliderFocusOut, this)) }, t.prototype.wireEvents = function () { this.onresize = this.reposition.bind(this), window.addEventListener("resize", this.onresize), this.enabled && !this.readonly && (Kv.add(this.element, "mousedown touchstart", this.sliderDown, this), Kv.add(this.sliderContainer, "keydown", this.keyDown, this), Kv.add(this.sliderContainer, "keyup", this.keyUp, this), Kv.add(this.element, "focusout", this.sliderFocusOut, this), Kv.add(this.sliderContainer, "mouseover mouseout touchstart touchend", this.hover, this), this.wireFirstHandleEvt(!1), "Range" === this.type && this.wireSecondHandleEvt(!1), this.showButtons && this.wireButtonEvt(!1), this.wireMaterialTooltipEvent(!1), this.isForm && Kv.add(this.formElement, "reset", this.formResetHandler, this)) }, t.prototype.unwireEvents = function () { Kv.remove(this.element, "mousedown touchstart", this.sliderDown), Kv.remove(this.sliderContainer, "keydown", this.keyDown), Kv.remove(this.sliderContainer, "keyup", this.keyUp), Kv.remove(this.element, "focusout", this.sliderFocusOut), Kv.remove(this.sliderContainer, "mouseover mouseout touchstart touchend", this.hover), this.wireFirstHandleEvt(!0), "Range" === this.type && this.wireSecondHandleEvt(!0), this.showButtons && this.wireButtonEvt(!0), this.wireMaterialTooltipEvent(!0), Kv.remove(this.element, "reset", this.formResetHandler) }, t.prototype.formResetHandler = function () { this.setProperties({ value: this.formResetValue }, !0), this.setValue() }, t.prototype.keyUp = function (e) { if (9 === e.keyCode && e.target.classList.contains(hx) && (this.focusSliderElement(), !e.target.classList.contains(zx))) { this.element.querySelector("." + zx) && this.element.querySelector("." + zx).classList.remove(zx), e.target.classList.add(zx); var t = e.target.parentElement; t === this.element && (t.querySelector("." + Ix).classList.add(Yx), "Range" !== this.type && "MinRange" !== this.type || t.querySelector("." + dx).classList.add(Ux)), "Range" === this.type && (e.target.previousSibling.classList.contains(hx) ? this.activeHandle = 2 : this.activeHandle = 1), this.getHandle().focus(), this.tooltipToggle(this.getHandle()) } this.closeTooltip(), this.changeEvent("changed") }, t.prototype.hover = function (e) { d(e) || ("mouseover" === e.type || "touchmove" === e.type || "mousemove" === e.type || "pointermove" === e.type || "touchstart" === e.type ? this.sliderContainer.classList.add(wx) : this.sliderContainer.classList.remove(wx)) }, t.prototype.sliderFocusOut = function (e) { e.relatedTarget !== this.secondHandle && e.relatedTarget !== this.firstHandle && e.relatedTarget !== this.element && e.relatedTarget !== this.firstBtn && e.relatedTarget !== this.secondBtn && (this.closeMaterialTooltip(), this.element.querySelector("." + zx) && this.element.querySelector("." + zx).classList.remove(zx), this.element.querySelector("." + Yx) && (this.element.querySelector("." + Yx).classList.remove(Yx), "Range" !== this.type && "MinRange" !== this.type || !this.element.querySelector("." + Ux) || this.element.querySelector("." + Ux).classList.remove(Ux)), this.hiddenInput.focus(), this.hiddenInput.blur(), this.isElementFocused = !1) }, t.prototype.removeElement = function (e) { e.parentNode && e.parentNode.removeChild(e) }, t.prototype.changeSliderType = function (e) { this.isMaterialTooltip && this.materialHandle && (this.sliderContainer.classList.remove(jx), this.removeElement(this.materialHandle), this.materialHandle = void 0), this.removeElement(this.firstHandle), this.firstHandle = void 0, "Default" !== e && ("Range" === e && (this.removeElement(this.secondHandle), this.secondHandle = void 0), this.removeElement(this.rangeBar), this.rangeBar = void 0), this.tooltip.isVisible && !d(this.tooltipObj) && (this.tooltipObj.destroy(), this.tooltipElement = void 0, this.tooltipCollidedPosition = void 0), this.limits.enabled && ("MinRange" === e || "Default" === e ? d(this.limitBarFirst) || (this.removeElement(this.limitBarFirst), this.limitBarFirst = void 0) : d(this.limitBarSecond) || (this.removeElement(this.limitBarSecond), this.limitBarSecond = void 0)), this.activeHandle = 1, this.getThemeInitialization(), "Range" === this.type && this.rangeValueUpdate(), this.createRangeBar(), this.limits.enabled && this.createLimitBar(), this.setHandler(), this.setOrientClass(), this.wireFirstHandleEvt(!1), "Range" === this.type && this.wireSecondHandleEvt(!1), this.setValue(), this.tooltip.isVisible && (this.renderTooltip(), this.wireMaterialTooltipEvent(!1)), this.updateConfig() }, t.prototype.changeRtl = function () { if (this.enableRtl || "Range" !== this.type || (this.value = [this.handleVal2, this.handleVal1]), this.updateConfig(), this.tooltip.isVisible && this.tooltipObj.refresh(this.firstHandle), this.showButtons) { var e = this.enableRtl && "Vertical" !== this.orientation; P(e ? this.secondBtn : this.firstBtn, { "aria-label": "Decrease", title: "Decrease" }), P(e ? this.firstBtn : this.secondBtn, { "aria-label": "Increase", title: "Increase" }) } }, t.prototype.changeOrientation = function () { this.changeSliderType(this.type) }, t.prototype.updateConfig = function () { this.setEnableRTL(), this.setValue(), this.tooltip.isVisible && this.refreshTooltip(this.tooltipTarget), "None" !== this.ticks.placement && this.ul && (this.removeElement(this.ul), this.ul = void 0, this.renderScale()), this.limitsPropertyChange() }, t.prototype.limitsPropertyChange = function () { this.limits.enabled ? (d(this.limitBarFirst) && "Range" !== this.type && this.createLimitBar(), d(this.limitBarFirst) && d(this.limitBarSecond) && "Range" === this.type && this.createLimitBar(), this.setLimitBar(), this.setValue()) : (d(this.limitBarFirst) || I(this.limitBarFirst), d(this.limitBarSecond) || I(this.limitBarSecond)) }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.destroy = function () { e.prototype.destroy.call(this), this.unwireEvents(), window.removeEventListener("resize", this.onresize), x([this.sliderContainer], [Lx]), this.firstHandle.removeAttribute("aria-orientation"), "Range" === this.type && this.secondHandle.removeAttribute("aria-orientation"), this.sliderContainer.parentNode.insertBefore(this.element, this.sliderContainer), I(this.sliderContainer), this.tooltip.isVisible && this.tooltipObj.destroy(), this.element.innerHTML = "" }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this, n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "cssClass": this.setCSSClass(t.cssClass); break; case "value": if (e && t) { var o = d(e.value) ? "Range" === this.type ? [this.min, this.max] : this.min : e.value; this.setProperties({ value: o }, !0), d(t.value) || t.value.toString() === o.toString() || (this.setValue(), this.refreshTooltip(this.tooltipTarget), "Range" === this.type && (d(e.value) || t.value[1] === o[1] ? this.activeHandle = 1 : this.activeHandle = 2)) } break; case "min": case "step": case "max": this.setMinMaxValue(); break; case "tooltip": d(e.tooltip) || d(t.tooltip) || this.setTooltip(); break; case "type": d(t) || !Object.keys(t).length || d(t.type) || (this.changeSliderType(t.type), this.setZindex()); break; case "enableRtl": t.enableRtl !== e.enableRtl && "Vertical" !== this.orientation && (this.rtl = t.enableRtl, this.changeRtl()); break; case "limits": this.limitsPropertyChange(); break; case "orientation": this.changeOrientation(); break; case "ticks": d(this.sliderContainer.querySelector("." + gx)) || (I(this.ul), Array.prototype.forEach.call(this.sliderContainer.classList, function (e) { e.match(/e-scale-/) && i.sliderContainer.classList.remove(e) })), "None" !== this.ticks.placement && (this.renderScale(), this.setZindex()); break; case "locale": this.showButtons && this.buttonTitle(); break; case "showButtons": e.showButtons ? (this.setButtons(), this.reposition(), this.enabled && !this.readonly && this.wireButtonEvt(!1)) : this.firstBtn && this.secondBtn && (this.sliderContainer.removeChild(this.firstBtn), this.sliderContainer.removeChild(this.secondBtn), this.sliderContainer.classList.remove(_x), this.firstBtn = void 0, this.secondBtn = void 0); break; case "enabled": this.setEnabled(); break; case "readonly": this.setReadOnly(); break; case "customValues": this.setValue(), this.reposition() } } }, t.prototype.setReadOnly = function () { this.readonly ? (this.unwireEvents(), this.sliderContainer.classList.add(Kx)) : (this.wireEvents(), this.sliderContainer.classList.remove(Kx)) }, t.prototype.setMinMaxValue = function () { var e = this; this.setValue(), this.refreshTooltip(this.tooltipTarget), d(this.sliderContainer.querySelector("." + gx)) || this.ul && (I(this.ul), Array.prototype.forEach.call(this.sliderContainer.classList, function (t) { t.match(/e-scale-/) && e.sliderContainer.classList.remove(t) })), "None" !== this.ticks.placement && (this.renderScale(), this.setZindex()) }, t.prototype.setZindex = function () { this.zIndex = 6, d(this.ticks) || "None" === this.ticks.placement || (this.ul.style.zIndex = this.zIndex + -7 + "", this.element.style.zIndex = this.zIndex + 2 + ""), this.isMaterial || d(this.ticks) || "Both" !== this.ticks.placement || (this.element.style.zIndex = this.zIndex + 2 + ""), this.firstHandle.style.zIndex = this.zIndex + 3 + "", "Range" === this.type && (this.secondHandle.style.zIndex = this.zIndex + 4 + "") }, t.prototype.setTooltip = function () { this.changeSliderType(this.type) }, t.prototype.getModuleName = function () { return "slider" }, tx([Y(null)], t.prototype, "value", void 0), tx([Y(null)], t.prototype, "customValues", void 0), tx([Y(1)], t.prototype, "step", void 0), tx([Y(0)], t.prototype, "min", void 0), tx([Y(100)], t.prototype, "max", void 0), tx([Y(!1)], t.prototype, "readonly", void 0), tx([Y("Default")], t.prototype, "type", void 0), tx([U({}, ix)], t.prototype, "ticks", void 0), tx([U({}, nx)], t.prototype, "limits", void 0), tx([Y(!0)], t.prototype, "enabled", void 0), tx([U({}, rx)], t.prototype, "tooltip", void 0), tx([Y(!1)], t.prototype, "showButtons", void 0), tx([Y(!0)], t.prototype, "enableAnimation", void 0), tx([Y("Horizontal")], t.prototype, "orientation", void 0), tx([Y("")], t.prototype, "cssClass", void 0), tx([X()], t.prototype, "created", void 0), tx([X()], t.prototype, "change", void 0), tx([X()], t.prototype, "changed", void 0), tx([X()], t.prototype, "renderingTicks", void 0), tx([X()], t.prototype, "renderedTicks", void 0), tx([X()], t.prototype, "tooltipChange", void 0), t = tx([J], t) }(Kw), sT = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), aT = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, lT = { EMAIL: new RegExp("^[A-Za-z0-9._%+-]{1,}@[A-Za-z0-9._%+-]{1,}([.]{1}[a-zA-Z0-9]{2,5}|[.]{1}[a-zA-Z0-9]{2,4}[.]{1}[a-zA-Z0-9]{2,4})$"), URL: /^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/m, DATE_ISO: new RegExp("^([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])$"), DIGITS: new RegExp("^[0-9]*$"), PHONE: new RegExp("^[+]?[0-9]{9,13}$"), CREDITCARD: new RegExp("^\\d{13,16}$") }; !function (e) { e[e.Message = 0] = "Message", e[e.Label = 1] = "Label" }(PS || (PS = {})); var hT, dT = function (e) { function t(t, i) { var n = e.call(this, i, t) || this; if (n.validated = [], n.errorRules = [], n.allowSubmit = !1, n.required = "required", n.infoElement = null, n.inputElement = null, n.selectQuery = "input:not([type=reset]):not([type=button]), select, textarea", n.localyMessage = {}, n.defaultMessages = { required: "This field is required.", email: "Please enter a valid email address.", url: "Please enter a valid URL.", date: "Please enter a valid date.", dateIso: "Please enter a valid date ( ISO ).", creditcard: "Please enter valid card number", number: "Please enter a valid number.", digits: "Please enter only digits.", maxLength: "Please enter no more than {0} characters.", minLength: "Please enter at least {0} characters.", rangeLength: "Please enter a value between {0} and {1} characters long.", range: "Please enter a value between {0} and {1}.", max: "Please enter a value less than or equal to {0}.", min: "Please enter a value greater than or equal to {0}.", regex: "Please enter a correct value.", tel: "Please enter a valid phone number.", pattern: "Please enter a correct pattern value.", equalTo: "Please enter the valid match text" }, void 0 === n.rules && (n.rules = {}), n.l10n = new pb("formValidator", n.defaultMessages, n.locale), n.locale && n.localeFunc(), Ww.on("notifyExternalChange", n.afterLocalization, n), t = "string" == typeof t ? N(t, document) : t, null != n.element) return n.element.setAttribute("novalidate", ""), n.inputElements = O(n.selectQuery, n.element), n.createHTML5Rules(), n.wireEvents(), n } sT(t, e), i = t, t.prototype.addRules = function (e, t) { e && (this.rules.hasOwnProperty(e) ? h(this.rules[e], t, {}) : this.rules[e] = t) }, t.prototype.removeRules = function (e, t) { if (e || t) if (this.rules[e] && !t) delete this.rules[e]; else { if (d(this.rules[e] && t)) return; for (var i = 0; i < t.length; i++)delete this.rules[e][t[i]] } else this.rules = {} }, t.prototype.validate = function (e) { var t = Object.keys(this.rules); if (e && t.length) return this.validateRules(e), -1 !== t.indexOf(e) && 0 === this.errorRules.filter(function (t) { return t.name === e }).length; this.errorRules = []; for (var i = 0, n = t; i < n.length; i++) { var r = n[i]; this.validateRules(r) } return 0 === this.errorRules.length }, t.prototype.reset = function () { this.element.reset(), this.clearForm() }, t.prototype.getInputElement = function (e) { return this.inputElement = N('[name="' + e + '"]', this.element), this.inputElement }, t.prototype.destroy = function () { this.reset(), this.unwireEvents(), this.rules = {}; for (var t = 0, i = O("." + this.errorClass + ", ." + this.validClass, this.element); t < i.length; t++) { i[t].remove() } e.prototype.destroy.call(this), Ww.off("notifyExternalChange", this.afterLocalization) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "locale": this.localeFunc() } } }, t.prototype.localeFunc = function () { for (var e = 0, t = Object.keys(this.defaultMessages); e < t.length; e++) { var i = t[e]; this.l10n.setLocale(this.locale); var n = this.l10n.getConstant(i); this.localyMessage[i] = n } }, t.prototype.getModuleName = function () { return "formValidator" }, t.prototype.afterLocalization = function (e) { this.locale = e.locale, this.localeFunc() }, t.prototype.clearForm = function () { this.errorRules = [], this.validated = []; for (var e = 0, t = O(this.selectQuery, this.element); e < t.length; e++) { var i = t[e]; i.removeAttribute("aria-invalid"), i.classList.remove(this.errorClass), i.name.length > 0 && (this.getInputElement(i.name), this.getErrorElement(i.name), this.hideMessage(i.name)), i.classList.remove(this.validClass) } }, t.prototype.createHTML5Rules = function () { for (var e = ["required", "validateHidden", "regex", "rangeLength", "maxLength", "minLength", "dateIso", "digits", "pattern", "data-val-required", "type", "data-validation", "min", "max", "range", "equalTo", "data-val-minlength-min", "data-val-equalto-other", "data-val-maxlength-max", "data-val-range-min", "data-val-regex-pattern", "data-val-length-max", "data-val-creditcard", "data-val-phone"], t = ["hidden", "email", "url", "date", "number", "tel"], i = 0, n = this.inputElements; i < n.length; i++) { for (var r = n[i], o = {}, s = 0, a = e; s < a.length; s++) { var l = a[s]; if (null !== r.getAttribute(l)) switch (l) { case "required": this.defRule(r, o, l, r.required); break; case "data-validation": l = r.getAttribute(l), this.defRule(r, o, l, !0); break; case "type": -1 !== t.indexOf(r.type) && this.defRule(r, o, r.type, !0); break; case "rangeLength": case "range": this.defRule(r, o, l, JSON.parse(r.getAttribute(l))); break; case "equalTo": var h = r.getAttribute(l); this.defRule(r, o, l, h); break; default: "true" === r.getAttribute("data-val") ? this.annotationRule(r, o, l, r.getAttribute(l)) : this.defRule(r, o, l, r.getAttribute(l)) } } 0 !== Object.keys(o).length && this.addRules(r.name, o) } }, t.prototype.annotationRule = function (e, t, i, n) { var r = i.split("-"), o = ["required", "creditcard", "phone", "maxlength", "minlength", "range", "regex", "equalto"], s = r[r.length - 1], a = r[r.length - 2]; if (-1 !== o.indexOf(s)) switch (s) { case "required": this.defRule(e, t, "required", n); break; case "creditcard": this.defRule(e, t, "creditcard", n); break; case "phone": this.defRule(e, t, "tel", n) } else if (-1 !== o.indexOf(a)) switch (a) { case "maxlength": this.defRule(e, t, "maxLength", n); break; case "minlength": this.defRule(e, t, "minLength", n); break; case "range": var l = e.getAttribute("data-val-range-min"), h = e.getAttribute("data-val-range-max"); this.defRule(e, t, "range", [l, h]); break; case "equalto": var d = e.getAttribute(i).split("."); this.defRule(e, t, "equalTo", d[d.length - 1]); break; case "regex": this.defRule(e, t, "regex", n) } }, t.prototype.defRule = function (e, t, i, n) { var r, o = e.getAttribute("data-" + i + "-message"), s = e.getAttribute("data-val-" + i); this.rules[e.name] && "validateHidden" !== i && "hidden" !== i && (this.getInputElement(e.name), r = this.getErrorMessage(this.rules[e.name][i], i)), o ? n = [n, o] : s ? n = [n, s] : r && (n = [n, r]), t[i] = n }, t.prototype.wireEvents = function () { for (var e = 0, t = this.inputElements; e < t.length; e++) { var n = t[e]; i.isCheckable(n) ? Kv.add(n, "click", this.clickHandler, this) : "SELECT" === n.tagName ? Kv.add(n, "change", this.changeHandler, this) : (Kv.add(n, "focusout", this.focusOutHandler, this), Kv.add(n, "keyup", this.keyUpHandler, this)) } Kv.add(this.element, "submit", this.submitHandler, this), Kv.add(this.element, "reset", this.resetHandler, this) }, t.prototype.unwireEvents = function () { for (var e = 0, t = this.inputElements; e < t.length; e++) { var i = t[e]; Kv.clearEvents(i) } Kv.remove(this.element, "submit", this.submitHandler), Kv.remove(this.element, "reset", this.resetHandler) }, t.prototype.focusOutHandler = function (e) { this.trigger("focusout", e); var t = e.target; this.rules[t.name] && (this.rules[t.name][this.required] || t.value.length > 0 ? this.validate(t.name) : -1 === this.validated.indexOf(t.name) && this.validated.push(t.name)) }, t.prototype.keyUpHandler = function (e) { this.trigger("keyup", e); var t = e.target; (9 !== e.which || this.rules[t.name] && (!this.rules[t.name] || this.rules[t.name][this.required])) && -1 !== this.validated.indexOf(t.name) && this.rules[t.name] && -1 === [16, 17, 18, 20, 35, 36, 37, 38, 39, 40, 45, 144, 225].indexOf(e.which) && this.validate(t.name) }, t.prototype.clickHandler = function (e) { this.trigger("click", e); var t = e.target; "submit" !== t.type ? this.validate(t.name) : null !== t.getAttribute("formnovalidate") && (this.allowSubmit = !0) }, t.prototype.changeHandler = function (e) { this.trigger("change", e); var t = e.target; this.validate(t.name) }, t.prototype.submitHandler = function (e) { this.trigger("submit", e), this.allowSubmit || this.validate() ? this.allowSubmit = !1 : e.preventDefault() }, t.prototype.resetHandler = function () { this.clearForm() }, t.prototype.validateRules = function (e) { if (this.rules[e]) { var t = Object.keys(this.rules[e]), i = !1, n = !1, r = t.indexOf("validateHidden"), o = t.indexOf("hidden"); if (this.getInputElement(e), -1 !== o && (i = !0), -1 !== r && (n = !0), !i || i && n) { -1 !== r && t.splice(r, 1), -1 !== o && t.splice(o - 1, 1), this.getErrorElement(e); for (var s = 0, a = t; s < a.length; s++) { var l = a[s], h = this.getErrorMessage(this.rules[e][l], l), d = { name: e, message: h }, c = { inputName: e, element: this.inputElement, message: h }; if (!this.isValid(e, l) && !this.inputElement.classList.contains(this.ignore)) { this.removeErrorRules(e), this.errorRules.push(d), this.inputElement.setAttribute("aria-invalid", "true"), this.inputElement.setAttribute("aria-describedby", this.inputElement.id + "-info"), this.inputElement.classList.add(this.errorClass), this.inputElement.classList.remove(this.validClass), this.infoElement ? this.showMessage(d) : this.createErrorElement(e, d.message, this.inputElement), c.errorElement = this.infoElement, c.status = "failure", this.inputElement.classList.add(this.errorClass), this.inputElement.classList.remove(this.validClass), this.optionalValidationStatus(e, c), this.trigger("validationComplete", c), "required" === l && this.inputElement.setAttribute("aria-required", "true"); break } this.hideMessage(e), c.status = "success", this.trigger("validationComplete", c) } } } }, t.prototype.optionalValidationStatus = function (e, t) { this.rules[e][this.required] || this.inputElement.value.length || d(this.infoElement) || (this.infoElement.innerHTML = this.inputElement.value, this.infoElement.setAttribute("aria-invalid", "false"), t.status = "", this.hideMessage(e)) }, t.prototype.isValid = function (e, t) { var n = this.rules[e][t], r = n instanceof Array && "string" == typeof n[1] ? n[0] : n, o = this.rules[e][t], s = { value: this.inputElement.value, param: r, element: this.inputElement, formElement: this.element }; if (this.trigger("validationBegin", s), o && "function" == typeof o[0]) { return o[0].call(this, { element: this.inputElement, value: this.inputElement.value }) } return i.isCheckable(this.inputElement) ? "required" !== t || O("input[name=" + e + "]:checked", this.element).length > 0 : i.checkValidator[t](s) }, t.prototype.getErrorMessage = function (e, t) { var i = this.inputElement.getAttribute("data-" + t + "-message") ? this.inputElement.getAttribute("data-" + t + "-message") : e instanceof Array && "string" == typeof e[1] ? e[1] : 0 !== Object.keys(this.localyMessage).length ? this.localyMessage[t] : this.defaultMessages[t], n = i.match(/{(\d)}/g); if (!d(n)) for (var r = 0; r < n.length; r++) { var o = e instanceof Array ? e[r] : e; i = i.replace(n[r], o) } return i }, t.prototype.createErrorElement = function (e, t, i) { var n = M(this.errorElement, { className: this.errorClass, innerHTML: t, attrs: { for: e } }); if (this.errorOption === PS.Message && (n.classList.remove(this.errorClass), n.classList.add("e-message"), n = M(this.errorContainer, { className: this.errorClass, innerHTML: n.outerHTML })), n.id = this.inputElement.name + "-info", this.element.querySelector('[data-valmsg-for="' + i.id + '"]')) this.element.querySelector('[data-valmsg-for="' + i.id + '"]').appendChild(n); else if (!0 === i.hasAttribute("data-msg-containerid")) { var r = i.getAttribute("data-msg-containerid"); this.element.querySelector("#" + r).appendChild(n) } else null != this.customPlacement ? this.customPlacement.call(this, this.inputElement, n) : this.inputElement.parentNode.insertBefore(n, this.inputElement.nextSibling); n.style.display = "block", this.getErrorElement(e), this.validated.push(e), this.checkRequired(e) }, t.prototype.getErrorElement = function (e) { return this.infoElement = N(this.errorElement + "." + this.errorClass, this.inputElement.parentElement), this.infoElement || (this.infoElement = N(this.errorElement + "." + this.errorClass + '[for="' + e + '"]', this.element)), this.infoElement }, t.prototype.removeErrorRules = function (e) { for (var t = 0; t < this.errorRules.length; t++) { this.errorRules[t].name === e && this.errorRules.splice(t, 1) } }, t.prototype.showMessage = function (e) { this.infoElement.style.display = "block", this.infoElement.innerHTML = e.message, this.checkRequired(e.name) }, t.prototype.hideMessage = function (e) { this.infoElement && (this.infoElement.style.display = "none", this.removeErrorRules(e), this.inputElement.classList.add(this.validClass), this.inputElement.classList.remove(this.errorClass), this.inputElement.setAttribute("aria-invalid", "false")) }, t.prototype.checkRequired = function (e) { this.rules[e][this.required] || this.inputElement.value.length || d(this.infoElement) || (this.infoElement.innerHTML = this.inputElement.value, this.infoElement.setAttribute("aria-invalid", "false"), this.hideMessage(e)) }, t.isCheckable = function (e) { var t = e.getAttribute("type"); return t && ("checkbox" === t || "radio" === t || "submit" === t) }; var i; return t.checkValidator = { required: function (e) { return e.value.length > 0 }, email: function (e) { return lT.EMAIL.test(e.value) }, url: function (e) { return lT.URL.test(e.value) }, dateIso: function (e) { return lT.DATE_ISO.test(e.value) }, tel: function (e) { return lT.PHONE.test(e.value) }, creditcard: function (e) { return lT.CREDITCARD.test(e.value) }, number: function (e) { return !isNaN(Number(e.value)) && -1 === e.value.indexOf(" ") }, digits: function (e) { return lT.DIGITS.test(e.value) }, maxLength: function (e) { return e.value.length <= e.param }, minLength: function (e) { return e.value.length >= e.param }, rangeLength: function (e) { var t = e.param; return e.value.length >= t[0] && e.value.length <= t[1] }, range: function (e) { var t = e.param; return !isNaN(Number(e.value)) && Number(e.value) >= t[0] && Number(e.value) <= t[1] }, date: function (e) { return !isNaN(new Date(e.value).getTime()) }, max: function (e) { return isNaN(Number(e.value)) ? new Date(e.value).getTime() <= new Date(JSON.parse(JSON.stringify(e.param))).getTime() : +e.value <= e.param }, min: function (e) { if (isNaN(Number(e.value))) { if (-1 !== e.value.indexOf(",")) { var t = e.value.replace(/,/g, ""); return parseFloat(t) >= e.param } return new Date(e.value).getTime() >= new Date(JSON.parse(JSON.stringify(e.param))).getTime() } return +e.value >= e.param }, regex: function (e) { return new RegExp(e.param).test(e.value) }, equalTo: function (e) { var t = e.formElement.querySelector("#" + e.param); return e.param = t.value, e.param === e.value } }, aT([Y("")], t.prototype, "locale", void 0), aT([Y("e-hidden")], t.prototype, "ignore", void 0), aT([Y()], t.prototype, "rules", void 0), aT([Y("e-error")], t.prototype, "errorClass", void 0), aT([Y("e-valid")], t.prototype, "validClass", void 0), aT([Y("label")], t.prototype, "errorElement", void 0), aT([Y("div")], t.prototype, "errorContainer", void 0), aT([Y(PS.Label)], t.prototype, "errorOption", void 0), aT([X()], t.prototype, "focusout", void 0), aT([X()], t.prototype, "keyup", void 0), aT([X()], t.prototype, "click", void 0), aT([X()], t.prototype, "change", void 0), aT([X()], t.prototype, "submit", void 0), aT([X()], t.prototype, "validationBegin", void 0), aT([X()], t.prototype, "validationComplete", void 0), aT([X()], t.prototype, "customPlacement", void 0), t = i = aT([J], t) }(iw), cT = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pT = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, uT = function (e, t, i, n) { return new (i || (i = Promise))(function (r, o) { function s(e) { try { l(n.next(e)) } catch (e) { o(e) } } function a(e) { try { l(n.throw(e)) } catch (e) { o(e) } } function l(e) { e.done ? r(e.value) : new i(function (t) { t(e.value) }).then(s, a) } l((n = n.apply(e, t || [])).next()) }) }, gT = function (e, t) { function i(i) { return function (s) { return function (i) { if (n) throw new TypeError("Generator is already executing."); for (; a;)try { if (n = 1, r && (o = 2 & i[0] ? r.return : i[0] ? r.throw || ((o = r.return) && o.call(r), 0) : r.next) && !(o = o.call(r, i[1])).done) return o; switch (r = 0, o && (i = [2 & i[0], o.value]), i[0]) { case 0: case 1: o = i; break; case 4: return a.label++ , { value: i[1], done: !1 }; case 5: a.label++ , r = i[1], i = [0]; continue; case 7: i = a.ops.pop(), a.trys.pop(); continue; default: if (o = a.trys, !(o = o.length > 0 && o[o.length - 1]) && (6 === i[0] || 2 === i[0])) { a = 0; continue } if (3 === i[0] && (!o || i[1] > o[0] && i[1] < o[3])) { a.label = i[1]; break } if (6 === i[0] && a.label < o[1]) { a.label = o[1], o = i; break } if (o && a.label < o[2]) { a.label = o[2], a.ops.push(i); break } o[2] && a.ops.pop(), a.trys.pop(); continue }i = t.call(e, a) } catch (e) { i = [6, e], r = 0 } finally { n = o = 0 } if (5 & i[0]) throw i[1]; return { value: i[0] ? i[1] : void 0, done: !0 } }([i, s]) } } var n, r, o, s, a = { label: 0, sent: function () { if (1 & o[0]) throw o[1]; return o[1] }, trys: [], ops: [] }; return s = { next: i(0), throw: i(1), return: i(2) }, "function" == typeof Symbol && (s[Symbol.iterator] = function () { return this }), s }, mT = "e-upload-file-list", fT = "e-file-status", yT = "e-file-remove-btn", vT = "e-file-delete-btn", wT = "e-file-abort-btn", bT = "e-file-reload-btn", CT = "e-upload-drag-hover", LT = "e-upload-progress-wrap", MT = "e-upload-progress-bar", ST = "e-progress-bar-text", xT = "e-upload-progress", TT = "e-upload-success", DT = "e-upload-fails", AT = "e-file-container", ET = "e-validation-fails", jT = "e-disabled", IT = "e-clear-icon-focus", kT = "e-file-pause-btn", PT = "e-file-play-btn", NT = "e-restrict-retry", OT = ["title", "style", "class"], RT = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return cT(t, e), pT([Y("")], t.prototype, "name", void 0), pT([Y(null)], t.prototype, "size", void 0), pT([Y("")], t.prototype, "type", void 0), t }(ww), zT = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return cT(t, e), pT([Y("Browse...")], t.prototype, "browse", void 0), pT([Y("Upload")], t.prototype, "upload", void 0), pT([Y("Clear")], t.prototype, "clear", void 0), t }(ww), BT = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return cT(t, e), pT([Y("")], t.prototype, "saveUrl", void 0), pT([Y("")], t.prototype, "removeUrl", void 0), pT([Y(0)], t.prototype, "chunkSize", void 0), pT([Y(3)], t.prototype, "retryCount", void 0), pT([Y(500)], t.prototype, "retryAfterDelay", void 0), t }(ww), FT = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.initialAttr = { accept: null, multiple: !1, disabled: !1 }, n.fileList = [], n.filesData = [], n.uploadedFilesData = [], n.base64String = [], n.isForm = !1, n.allTypes = !1, n.pausedData = [], n.uploadMetaData = [], n.tabIndex = "0", n.btnTabIndex = "0", n.disableKeyboardNavigation = !1, n.count = -1, n.actionCompleteCount = 0, n.flag = !0, n.selectedFiles = [], n.uploaderOptions = t, n } return cT(t, e), t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, r = Object.keys(e); i < r.length; i++) { switch (r[i]) { case "allowedExtensions": this.setExtensions(this.allowedExtensions), this.clearAll(); break; case "enabled": this.setControlStatus(); break; case "multiple": this.setMultipleSelection(); break; case "enableRtl": this.setRTL(), this.reRenderFileList(); break; case "buttons": this.buttons.browse = d(this.buttons.browse) ? "" : this.buttons.browse, this.buttons.clear = d(this.buttons.clear) ? "" : this.buttons.clear, this.buttons.upload = d(this.buttons.upload) ? "" : this.buttons.upload, this.renderButtonTemplates(); break; case "dropArea": this.unBindDropEvents(), this.setDropArea(); break; case "htmlAttributes": this.updateHTMLAttrToElement(), this.updateHTMLAttrToWrapper(), this.checkHTMLAttributes(!0); break; case "files": this.renderPreLoadFiles(); break; case "directoryUpload": this.updateDirectoryAttributes(); break; case "minFileSize": case "maxFileSize": case "template": case "autoUpload": case "sequentialUpload": this.clearAll(); break; case "locale": this.l10n.setLocale(this.locale), this.setLocalizedTexts(), this.preLocaleObj = n("currentLocale", this.l10n); break; case "cssClass": this.setCSSClass(t.cssClass) } } }, t.prototype.setLocalizedTexts = function () { d(this.template) && ("string" == typeof this.buttons.browse && (this.browseButton.innerText = "Browse..." === this.buttons.browse ? this.localizedTexts("Browse") : this.buttons.browse, this.browseButton.setAttribute("title", this.browseButton.innerText), this.uploadWrapper.querySelector(".e-file-drop").innerHTML = this.localizedTexts("dropFilesHint")), this.updateFileList()) }, t.prototype.getKeyValue = function (e) { for (var t, i = 0, n = Object.keys(this.preLocaleObj); i < n.length; i++) { var r = n[i]; this.preLocaleObj[r] === e && (t = r) } return t }, t.prototype.updateFileList = function () { if (this.fileList.length > 0 && !d(this.uploadWrapper.querySelector(".e-upload-files"))) for (var e = 0; e < this.fileList.length; e++)this.fileList[e].querySelector(".e-file-status").innerHTML = this.localizedTexts(this.getKeyValue(this.filesData[e].status)), this.filesData[e].status = this.localizedTexts(this.getKeyValue(this.filesData[e].status)), this.fileList[e].classList.contains(TT) && this.fileList[e].querySelector(".e-icons").setAttribute("title", this.localizedTexts("delete")), this.fileList[e].querySelector(".e-file-play-btn") && this.fileList[e].querySelector(".e-icons").setAttribute("title", this.localizedTexts("resume")), this.fileList[e].querySelector(".e-file-remove-btn") && this.fileList[e].querySelector(".e-icons").setAttribute("title", this.localizedTexts("remove")), this.fileList[e].querySelector(".e-file-reload-btn") && this.fileList[e].querySelector(".e-icons").setAttribute("title", this.localizedTexts("retry")), this.autoUpload || (this.uploadButton.innerText = "Upload" === this.buttons.upload ? this.localizedTexts("Upload") : this.buttons.upload, this.uploadButton.setAttribute("title", this.localizedTexts("Upload")), this.clearButton.innerText = "Clear" === this.buttons.clear ? this.localizedTexts("Clear") : this.buttons.clear, this.clearButton.setAttribute("title", this.localizedTexts("Clear"))) }, t.prototype.reRenderFileList = function () { this.listParent && (I(this.listParent), this.listParent = null, this.fileList = [], this.createFileList(this.filesData), this.actionButtons && (this.removeActionButtons(), this.renderActionButtons(), this.checkActionButtonStatus())) }, t.prototype.preRender = function () { this.cloneElement = this.element.cloneNode(!0), this.localeText = { Browse: "Browse...", Clear: "Clear", Upload: "Upload", dropFilesHint: "Or drop files here", invalidMaxFileSize: "File size is too large", invalidMinFileSize: "File size is too small", invalidFileType: "File type is not allowed", uploadFailedMessage: "File failed to upload", uploadSuccessMessage: "File uploaded successfully", removedSuccessMessage: "File removed successfully", removedFailedMessage: "Unable to remove file", inProgress: "Uploading", readyToUploadMessage: "Ready to upload", abort: "Abort", remove: "Remove", cancel: "Cancel", delete: "Delete file", pauseUpload: "File upload paused", pause: "Pause", resume: "Resume", retry: "Retry", fileUploadCancel: "File upload canceled" }, this.l10n = new pb("uploader", this.localeText, this.locale), this.preLocaleObj = n("currentLocale", this.l10n), this.updateHTMLAttrToElement(), this.checkHTMLAttributes(!1); var e = R(this.element, "form"); if (!d(e)) for (; e && e !== document.documentElement; e = e.parentElement)"FORM" === e.tagName && (this.isForm = !0, this.formElement = e, e.setAttribute("enctype", "multipart/form-data"), e.setAttribute("encoding", "multipart/form-data")); var t = n("ej2_instances", this.element); if ("EJS-UPLOADER" === this.element.tagName) { for (var i = this.createElement("input", { attrs: { type: "file" } }), o = 0; o < this.element.attributes.length; o++)i.setAttribute(this.element.attributes[o].nodeName, this.element.attributes[o].nodeValue), i.innerHTML = this.element.innerHTML; i.hasAttribute("name") || i.setAttribute("name", "UploadFiles"), this.element.appendChild(i), this.element = i, r("ej2_instances", t, this.element) } t[0].isPureReactComponent && (d(t[0].props.name) ? !d(t[0].props.id) && d(t[0].props.name) ? this.element.setAttribute("name", t[0].props.id) : this.element.setAttribute("name", "UploadFiles") : this.element.setAttribute("name", t[0].props.name)), d(this.element.getAttribute("name")) && this.element.setAttribute("name", this.element.getAttribute("id")), this.element.hasAttribute("type") || this.element.setAttribute("type", "file"), this.updateDirectoryAttributes(), this.keyConfigs = { enter: "enter" }, this.element.hasAttribute("tabindex") && (this.tabIndex = this.element.getAttribute("tabindex")), this.browserName = uw.info.name }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.getModuleName = function () { return "uploader" }, t.prototype.updateDirectoryAttributes = function () { this.directoryUpload ? (this.element.setAttribute("directory", "true"), this.element.setAttribute("webkitdirectory", "true")) : (this.element.removeAttribute("directory"), this.element.removeAttribute("webkitdirectory")) }, t.prototype.render = function () { this.renderBrowseButton(), this.initializeUpload(), this.updateHTMLAttrToWrapper(), this.wireEvents(), this.setMultipleSelection(), this.setExtensions(this.allowedExtensions), this.setRTL(), this.renderPreLoadFiles(), this.setControlStatus(), this.setCSSClass() }, t.prototype.renderBrowseButton = function () { this.browseButton = this.createElement("button", { className: "e-css e-btn", attrs: { type: "button" } }), this.browseButton.setAttribute("tabindex", this.tabIndex), "string" == typeof this.buttons.browse ? (this.browseButton.textContent = "Browse..." === this.buttons.browse ? this.localizedTexts("Browse") : this.buttons.browse, this.browseButton.setAttribute("title", this.browseButton.innerText)) : this.browseButton.appendChild(this.buttons.browse), this.element.setAttribute("aria-label", "Uploader") }, t.prototype.renderActionButtons = function () { this.element.setAttribute("tabindex", "-1"), this.actionButtons = this.createElement("div", { className: "e-upload-actions" }), this.uploadButton = this.createElement("button", { className: "e-file-upload-btn e-css e-btn e-flat e-primary", attrs: { type: "button", tabindex: this.btnTabIndex } }), this.clearButton = this.createElement("button", { className: "e-file-clear-btn e-css e-btn e-flat", attrs: { type: "button", tabindex: this.btnTabIndex } }), this.actionButtons.appendChild(this.clearButton), this.actionButtons.appendChild(this.uploadButton), this.renderButtonTemplates(), this.uploadWrapper.appendChild(this.actionButtons), this.browseButton.blur(), this.uploadButton.focus(), this.wireActionButtonEvents() }, t.prototype.wireActionButtonEvents = function () { Kv.add(this.uploadButton, "click", this.uploadButtonClick, this), Kv.add(this.clearButton, "click", this.clearButtonClick, this) }, t.prototype.unwireActionButtonEvents = function () { Kv.remove(this.uploadButton, "click", this.uploadButtonClick), Kv.remove(this.clearButton, "click", this.clearButtonClick) }, t.prototype.removeActionButtons = function () { this.actionButtons && (this.unwireActionButtonEvents(), I(this.actionButtons), this.actionButtons = null) }, t.prototype.renderButtonTemplates = function () { if ("string" == typeof this.buttons.browse ? (this.browseButton.textContent = "Browse..." === this.buttons.browse ? this.localizedTexts("Browse") : this.buttons.browse, this.browseButton.setAttribute("title", this.browseButton.textContent)) : (this.browseButton.innerHTML = "", this.browseButton.appendChild(this.buttons.browse)), this.uploadButton) { var e = void 0; e = d(this.buttons.upload) ? "Upload" : this.buttons.upload, this.buttons.upload = e, "string" == typeof this.buttons.upload ? (this.uploadButton.textContent = "Upload" === this.buttons.upload ? this.localizedTexts("Upload") : this.buttons.upload, this.uploadButton.setAttribute("title", this.uploadButton.textContent)) : (this.uploadButton.innerHTML = "", this.uploadButton.appendChild(this.buttons.upload)) } if (this.clearButton) { var t = void 0; t = d(this.buttons.clear) ? "Clear" : this.buttons.clear, this.buttons.clear = t, "string" == typeof this.buttons.clear ? (this.clearButton.textContent = "Clear" === this.buttons.clear ? this.localizedTexts("Clear") : this.buttons.clear, this.clearButton.setAttribute("title", this.clearButton.textContent)) : (this.clearButton.innerHTML = "", this.clearButton.appendChild(this.buttons.clear)) } }, t.prototype.initializeUpload = function () { this.element.setAttribute("tabindex", "-1"); var e = this.createElement("span", { className: "e-file-select" }); this.element.parentElement.insertBefore(e, this.element), this.dropAreaWrapper = this.createElement("div", { className: "e-file-select-wrap" }), this.element.parentElement.insertBefore(this.dropAreaWrapper, this.element), e.appendChild(this.element), this.dropAreaWrapper.appendChild(this.browseButton), this.dropAreaWrapper.appendChild(e); var t = this.createElement("span", { className: "e-file-drop" }); t.innerHTML = this.localizedTexts("dropFilesHint"), this.dropAreaWrapper.appendChild(t), this.uploadWrapper = this.createElement("div", { className: "e-upload" }), this.dropAreaWrapper.parentElement.insertBefore(this.uploadWrapper, this.dropAreaWrapper), this.uploadWrapper.appendChild(this.dropAreaWrapper), this.setDropArea() }, t.prototype.renderPreLoadFiles = function () { if (this.files.length) { if (d(this.files[0].size)) return; var e = [].slice.call(this.files), t = []; this.multiple || (this.clearData(), e = [e[0]]); for (var i = 0, n = e; i < n.length; i++) { var r = n[i], o = { name: r.name + "." + r.type.split(".")[r.type.split(".").length - 1], rawFile: "", size: r.size, status: this.localizedTexts("uploadSuccessMessage"), type: r.type, validationMessages: { minSize: "", maxSize: "" }, statusCode: "2" }; t.push(o), this.filesData.push(o) } this.createFileList(t), this.autoUpload || !this.listParent || this.actionButtons || this.isForm && !this.allowUpload() || !this.showFileList || this.renderActionButtons(), this.checkActionButtonStatus() } }, t.prototype.checkActionButtonStatus = function () { if (this.actionButtons) { var e = this.uploadWrapper.querySelectorAll("." + ET).length + this.uploadWrapper.querySelectorAll(".e-upload-fails:not(.e-upload-progress)").length + this.uploadWrapper.querySelectorAll("span." + TT).length + this.uploadWrapper.querySelectorAll("span." + xT).length; e > 0 && e === this.uploadWrapper.querySelectorAll("li").length ? this.uploadButton.setAttribute("disabled", "disabled") : this.uploadButton.removeAttribute("disabled") } }, t.prototype.setDropArea = function () { var e = this.dropAreaWrapper.querySelector(".e-file-drop"); if (this.dropArea) { this.dropZoneElement = "string" != typeof this.dropArea ? this.dropArea : document.querySelector(this.dropArea); for (var t = this.element, i = !1; t.parentNode;)(t = t.parentNode) === this.dropZoneElement && (i = !0, e.textContent = this.localizedTexts("dropFilesHint")); i || (e.textContent = "") } else this.dropZoneElement = this.uploadWrapper, e.textContent = this.localizedTexts("dropFilesHint"); this.bindDropEvents() }, t.prototype.updateHTMLAttrToElement = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; OT.indexOf(i) < 0 && this.element.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHTMLAttrToWrapper = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (OT.indexOf(i) > -1) if ("class" === i) S([this.uploadWrapper], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.uploadWrapper.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.uploadWrapper.setAttribute(i, n) } else this.uploadWrapper.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.setMultipleSelection = function () { if (this.multiple && !this.element.hasAttribute("multiple")) { var e = document.createAttribute("multiple"); e.value = "multiple", this.element.setAttributeNode(e) } else this.multiple || this.element.removeAttribute("multiple") }, t.prototype.checkAutoUpload = function (e) { this.autoUpload ? (this.sequentialUpload ? this.sequenceUpload(e) : this.upload(e), this.removeActionButtons()) : this.actionButtons || this.renderActionButtons(), this.checkActionButtonStatus() }, t.prototype.sequenceUpload = function (e) { if (this.filesData.length - e.length == 0 || "1" !== this.filesData[this.filesData.length - e.length - 1].statusCode) { ++this.count; var t = !this.showFileList; "object" == typeof this.filesData[this.count] ? (this.upload(this.filesData[this.count], t), "0" === this.filesData[this.count].statusCode && this.sequenceUpload(e)) : --this.count } }, t.prototype.setCSSClass = function (e) { this.cssClass && S([this.uploadWrapper], this.cssClass.split(this.cssClass.indexOf(",") > -1 ? "," : " ")), e && x([this.uploadWrapper], e.split(" ")) }, t.prototype.wireEvents = function () { Kv.add(this.browseButton, "click", this.browseButtonClick, this), Kv.add(this.element, "change", this.onSelectFiles, this), Kv.add(document, "click", this.removeFocus, this), this.keyboardModule = new cb(this.uploadWrapper, { keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigs, eventName: "keydown" }), this.isForm && Kv.add(this.formElement, "reset", this.resetForm, this) }, t.prototype.unWireEvents = function () { Kv.remove(this.browseButton, "click", this.browseButtonClick), Kv.remove(this.element, "change", this.onSelectFiles), Kv.remove(document, "click", this.removeFocus), this.isForm && Kv.remove(this.formElement, "reset", this.resetForm), this.keyboardModule.destroy() }, t.prototype.resetForm = function () { this.clearAll() }, t.prototype.keyActionHandler = function (e) { var t = e.target; switch (e.action) { case "enter": if (e.target === this.clearButton) this.clearButtonClick(); else if (e.target === this.uploadButton) this.uploadButtonClick(); else if (e.target === this.browseButton) this.browseButtonClick(); else if (t.classList.contains(kT)) { (i = this.getCurrentMetaData(null, e)).file.statusCode = "4", i.file.status = this.localizedTexts("pauseUpload"), this.abortUpload(i, !1) } else if (t.classList.contains(PT)) this.resumeUpload(this.getCurrentMetaData(null, e), e); else if (t.classList.contains(bT)) { var i; if (d(i = this.getCurrentMetaData(null, e))) { var n = e.target.parentElement, r = this.filesData[this.fileList.indexOf(n)]; this.retry(r) } else i.file.statusCode = "1", i.file.status = this.localizedTexts("readyToUploadMessage"), this.chunkUpload(i.file) } else this.removeFiles(e), t.classList.contains(wT) || this.browseButton.focus(); e.preventDefault(), e.stopPropagation() } }, t.prototype.getCurrentMetaData = function (e, t) { var i, n; if (d(e)) { var r = t.target.parentElement; i = this.filesData[this.fileList.indexOf(r)] } else i = e; for (var o = 0; o < this.uploadMetaData.length; o++)this.uploadMetaData[o].file.name === i.name && (n = this.uploadMetaData[o]); return n }, t.prototype.removeFocus = function () { this.uploadWrapper && this.listParent && this.listParent.querySelector("." + IT) && (document.activeElement.blur(), this.listParent.querySelector("." + IT).classList.remove(IT)) }, t.prototype.browseButtonClick = function () { this.element.click() }, t.prototype.uploadButtonClick = function () { this.sequentialUpload ? this.sequenceUpload(this.filesData) : this.upload(this.filesData) }, t.prototype.clearButtonClick = function () { this.clearAll(), this.sequentialUpload && (this.count = -1), this.actionCompleteCount = 0 }, t.prototype.bindDropEvents = function () { this.dropZoneElement && (Kv.add(this.dropZoneElement, "drop", this.dropElement, this), Kv.add(this.dropZoneElement, "dragover", this.dragHover, this), Kv.add(this.dropZoneElement, "dragleave", this.onDragLeave, this), Kv.add(this.dropZoneElement, "paste", this.onPasteFile, this)) }, t.prototype.unBindDropEvents = function () { this.dropZoneElement && (Kv.remove(this.dropZoneElement, "drop", this.dropElement), Kv.remove(this.dropZoneElement, "dragover", this.dragHover), Kv.remove(this.dropZoneElement, "dragleave", this.onDragLeave)) }, t.prototype.onDragLeave = function (e) { this.dropZoneElement.classList.remove(CT) }, t.prototype.dragHover = function (e) { this.enabled && (this.dropZoneElement.classList.add(CT), e.preventDefault(), e.stopPropagation()) }, t.prototype.dropElement = function (e) { this.dropZoneElement.classList.remove(CT), this.onSelectFiles(e), e.preventDefault(), e.stopPropagation() }, t.prototype.onPasteFile = function (e) { var t = e.clipboardData.items; if (1 === t.length) { var i = [].slice.call(t)[0]; "file" === i.kind && i.type.match("^image/") && this.renderSelectedFiles(e, [i.getAsFile()], !1, !0) } }, t.prototype.removeFiles = function (e) { if (this.enabled) { var t = e.target.parentElement, i = this.fileList.indexOf(t), n = this.fileList[i], r = this.filesData[i]; if (!d(r)) { if (e.target.classList.contains(wT)) { if (r.statusCode = "5", !d(n)) { var o = n.querySelector("." + wT); St({ target: o, width: "20px" }), zt(o) } this.sequentialUpload && this.uploadSequential(), n.classList.contains(NT) || this.checkActionComplete(!0) } else this.remove(r, !1, !1, !0, e); this.element.value = "", this.checkActionButtonStatus() } } }, t.prototype.removeFilesData = function (e, t) { var i; if (t) this.showFileList || (i = this.filesData.indexOf(e), this.filesData.splice(i, 1)); else { var n = this.getLiElement(e); d(n) || (I(n), i = this.fileList.indexOf(n), this.fileList.splice(i, 1), this.filesData.splice(i, 1), 0 !== this.fileList.length || d(this.listParent) || (I(this.listParent), this.listParent = null, this.removeActionButtons()), this.sequentialUpload && i <= this.count && --this.count) } }, t.prototype.removeUploadedFile = function (e, t, i, n) { var r = this, o = e, s = new Zv(this.asyncSettings.removeUrl, "POST", !0, null); s.emitError = !1; var a = new FormData; s.beforeSend = function (n) { t.currentRequest = s.httpRequest, i ? r.removingEventCallback(t, a, o, e) : r.trigger("removing", t, function (t) { t.cancel ? n.cancel = !0 : r.removingEventCallback(t, a, o, e) }) }, s.onLoad = function (e) { return r.removeCompleted(e, o, n), {} }, s.onError = function (e) { return r.removeFailed(e, o, n), {} }, s.send(a) }, t.prototype.removingEventCallback = function (e, t, i, n) { var r = this.element.getAttribute("name"), o = this.getLiElement(n); if (!(d(o) || d(o.querySelector("." + vT)) && d(o.querySelector("." + yT)))) { var s = void 0; St({ target: s = o.querySelector("." + vT) ? o.querySelector("." + vT) : o.querySelector("." + yT), width: "20px" }), zt(s) } e.postRawFile && !d(i.rawFile) && "" !== i.rawFile ? t.append(r, i.rawFile) : t.append(r, i.name), this.updateFormData(t, e.customFormData) }, t.prototype.updateFormData = function (e, t) { if (t.length > 0 && t[0]) for (var i = function (i) { var n = t[i], r = Object.keys(n).map(function (e) { return n[e] }); e.append(Object.keys(n)[0], r) }, n = 0; n < t.length; n++)i(n) }, t.prototype.updateCustomheader = function (e, t) { if (t.length > 0 && t[0]) for (var i = function (i) { var n = t[i], r = Object.keys(n).map(function (e) { return n[e] }); e.setRequestHeader(Object.keys(n)[0], r) }, n = 0; n < t.length; n++)i(n) }, t.prototype.removeCompleted = function (e, t, i) { var n = { e: e, response: e && e.currentTarget ? this.getResponse(e) : null, operation: "remove", file: this.updateStatus(t, this.localizedTexts("removedSuccessMessage"), "2") }; this.trigger("success", n), this.removeFilesData(t, i); var r = this.uploadedFilesData.indexOf(t); this.uploadedFilesData.splice(r, 1), this.trigger("change", { files: this.uploadedFilesData }) }, t.prototype.removeFailed = function (e, t, i) { var n = { e: e, response: e && e.currentTarget ? this.getResponse(e) : null, operation: "remove", file: this.updateStatus(t, this.localizedTexts("removedFailedMessage"), "0") }; if (!i) { var r = this.filesData.indexOf(t), o = this.fileList[r]; if (o) { var s = o.querySelector("." + fT); o.classList.remove(TT), s.classList.remove(TT), o.classList.add(DT), s.classList.add(DT) } this.checkActionButtonStatus() } this.trigger("failure", n); var a = this.getLiElement(t); if (!d(a) && !d(a.querySelector("." + vT))) { Ft(a.querySelector("." + vT)), I(a.querySelector(".e-spinner-pane")) } }, t.prototype.getFilesFromFolder = function (e) { this.filesEntries = []; var t; t = this.multiple ? e.dataTransfer.items : [e.dataTransfer.items[0]]; if (this.checkDirectoryUpload(t)) for (var i = function (i) { var r = t[i].webkitGetAsEntry(); if (r.isFile) { var o = []; r.file(function (e) { var t = r.fullPath; o.push({ path: t, file: e }) }), n.renderSelectedFiles(e, o, !0) } else r.isDirectory && n.traverseFileTree(r, e) }, n = this, r = 0; r < t.length; r++)i(r) }, t.prototype.checkDirectoryUpload = function (e) { for (var t = 0; t < e.length; t++) { if (e[t].webkitGetAsEntry().isDirectory) return !0 } return !1 }, t.prototype.traverseFileTree = function (e, t) { var i = this; if ("boolean" == typeof e) { for (var n = [], r = function (e) { o.filesEntries[e].file(function (t) { var r = i.filesEntries[e].fullPath; n.push({ path: r, file: t }) }) }, o = this, s = 0; s < this.filesEntries.length; s++)r(s); this.renderSelectedFiles(t, n, !0) } else if (e.isFile) this.filesEntries.push(e); else if (e.isDirectory) { e.createReader().readEntries(function (e) { for (var t = 0; t < e.length; t++)i.traverseFileTree(e[t]); i.traverseFileTree(!0), i.filesEntries = [] }) } }, t.prototype.onSelectFiles = function (e) { if (this.enabled) { var t; if ("drop" === e.type) if (this.directoryUpload) this.getFilesFromFolder(e); else { var i = this.sortFilesList = e.dataTransfer.files; this.element.files = i, t = this.multiple ? this.sortFileList(i) : [i[0]], this.renderSelectedFiles(e, t) } else t = [].slice.call(e.target.files), this.renderSelectedFiles(e, t) } }, t.prototype.getBase64 = function (e) { return new Promise(function (t, i) { var n = new FileReader; n.readAsDataURL(e), n.onload = function () { return t(n.result) }, n.onerror = function (e) { return i(e) } }) }, t.prototype.renderSelectedFiles = function (e, t, i, n) { return uT(this, void 0, void 0, function () { var r, o, s, a, l, h, c, u = this; return gT(this, function (g) { switch (g.label) { case 0: if (r = { event: e, cancel: !1, filesData: [], isModified: !1, modifiedFilesData: [], progressInterval: "", isCanceled: !1, currentRequest: null, customFormData: null }, t.length < 1) return r.isCanceled = !0, this.trigger("selected", r), [2]; this.flag = !0, o = [], this.multiple || (this.clearData(!0), t = [t[0]]), s = 0, g.label = 1; case 1: return s < t.length ? (a = i ? t[s].file : t[s], w() ? [4, this.getBase64(a)] : [3, 3]) : [3, 5]; case 2: l = g.sent(), this.base64String.push(l), g.label = 3; case 3: h = i ? t[s].path.substring(1, t[s].path.length) : n ? p(a.name.substring(0, a.name.lastIndexOf("."))) + "." + this.getFileType(a.name) : this.directoryUpload ? t[s].webkitRelativePath : a.name, c = { name: h, rawFile: a, size: a.size, status: this.localizedTexts("readyToUploadMessage"), type: this.getFileType(a.name), validationMessages: this.validatedFileSize(a.size), statusCode: "1" }, n && (c.fileSource = "paste"), c.status = "" !== c.validationMessages.minSize ? this.localizedTexts("invalidMinFileSize") : "" !== c.validationMessages.maxSize ? this.localizedTexts("invalidMaxFileSize") : c.status, "" === c.validationMessages.minSize && "" === c.validationMessages.maxSize || (c.statusCode = "0", this.checkActionComplete(!0)), o.push(c), g.label = 4; case 4: return s++ , [3, 1]; case 5: return r.filesData = o, this.allowedExtensions.indexOf("*") > -1 && (this.allTypes = !0), this.allTypes || (o = this.checkExtension(o)), this.trigger("selected", r, function (e) { if (!e.cancel) { if (w() && (u.currentRequestHeader = e.currentRequest, u.customFormDatas = e.customFormData), u.selectedFiles = o, u.btnTabIndex = u.disableKeyboardNavigation ? "-1" : "0", u.showFileList) { if (e.isModified && e.modifiedFilesData.length > 0) { var t = u.allTypes ? e.modifiedFilesData : u.checkExtension(e.modifiedFilesData); u.updateSortedFileList(t), u.filesData = t, u.isForm && !u.allowUpload() || u.checkAutoUpload(t) } else u.createFileList(o), u.filesData = u.filesData.concat(o), u.isForm && !u.allowUpload() || u.checkAutoUpload(o); d(e.progressInterval) || "" === e.progressInterval || (u.progressInterval = e.progressInterval) } else u.filesData = u.filesData.concat(o), u.autoUpload && u.upload(u.filesData, !0); u.raiseActionComplete() } }), [2] } }) }) }, t.prototype.allowUpload = function () { var e = !1; return this.isForm && !d(this.asyncSettings.saveUrl) && "" !== this.asyncSettings.saveUrl && (e = !0), e }, t.prototype.clearData = function (e) { d(this.listParent) || (I(this.listParent), this.listParent = null), "msie" === this.browserName || e || (this.element.value = ""), this.fileList = [], this.filesData = [], this.removeActionButtons() }, t.prototype.updateSortedFileList = function (e) { var t = this.createElement("div", { id: "clonewrapper" }), i = -1; if (this.listParent) { for (var n = 0; n < this.listParent.querySelectorAll("li").length; n++) { var r = this.listParent.querySelectorAll("li")[n]; t.appendChild(r.cloneNode(!0)) } for (var o = 0, s = this.listParent.querySelectorAll("li"); o < s.length; o++) { I(s[o]) } this.removeActionButtons(); var a = [].slice.call(t.childNodes); I(this.listParent), this.listParent = null, this.fileList = [], this.createParentUL(); for (var l = 0; l < e.length; l++) { for (var h = 0; h < this.filesData.length; h++)this.filesData[h].name === e[l].name && (this.listParent.appendChild(a[h]), Kv.add(a[h].querySelector(".e-icons"), "click", this.removeFiles, this), this.fileList.push(a[h]), i = l); i !== l && this.createFileList([e[l]]) } } else this.createFileList(e) }, t.prototype.isBlank = function (e) { return !e || /^\s*$/.test(e) }, t.prototype.checkExtension = function (e) { var t = e; if (!this.isBlank(this.allowedExtensions)) { for (var i = [], n = 0, r = this.allowedExtensions.split(","); n < r.length; n++) { var o = r[n]; i.push(o.trim().toLocaleLowerCase()) } for (var s = 0; s < e.length; s++)-1 === i.indexOf(("." + e[s].type).toLocaleLowerCase()) && (e[s].status = this.localizedTexts("invalidFileType"), e[s].statusCode = "0") } return t }, t.prototype.validatedFileSize = function (e) { var t = "", i = ""; e < this.minFileSize ? t = this.localizedTexts("invalidMinFileSize") : e > this.maxFileSize ? i = this.localizedTexts("invalidMaxFileSize") : (t = "", i = ""); return { minSize: t, maxSize: i } }, t.prototype.isPreLoadFile = function (e) { for (var t = !1, i = 0; i < this.files.length; i++)this.files[i].name === e.name.slice(0, e.name.lastIndexOf(".")) && this.files[i].type === e.type && (t = !0); return t }, t.prototype.createCustomfileList = function (e) { this.createParentUL(), ue(this.element.id + "Template"); for (var t = 0, i = e; t < i.length; t++) { var n = i[t], r = this.createElement("li", { className: mT, attrs: { "data-file-name": n.name } }); this.uploadTemplateFn = this.templateComplier(this.template); var o = [].slice.call(this.uploadTemplateFn(n)), s = e.indexOf(n); E(o, r), pe(this.element.id + "Template", "Template"); var a = { element: r, fileInfo: n, index: s, isPreload: this.isPreLoadFile(n) }, l = { element: r, fileInfo: n, index: s, isPreload: this.isPreLoadFile(n) }; this.trigger("rendering", a), this.trigger("fileListRendering", l), this.listParent.appendChild(r), this.fileList.push(r) } }, t.prototype.createParentUL = function () { d(this.listParent) && (this.listParent = this.createElement("ul", { className: "e-upload-files" }), this.uploadWrapper.appendChild(this.listParent)) }, t.prototype.createFileList = function (e) { if (this.createParentUL(), "" === this.template || d(this.template)) for (var t = 0, i = e; t < i.length; t++) { var n = i[t], r = this.createElement("li", { className: mT, attrs: { "data-file-name": n.name } }), o = this.createElement("span", { className: AT }), s = this.createElement("span", { className: "e-file-name", attrs: { title: n.name } }); s.innerHTML = this.getFileNameOnly(n.name); var a = this.createElement("span", { className: "e-file-type" }); if (a.innerHTML = "." + this.getFileType(n.name), this.enableRtl) { var l = this.createElement("span", { className: "e-rtl-container" }); l.appendChild(a), l.appendChild(s), o.appendChild(l) } else o.appendChild(s), o.appendChild(a); var h = this.createElement("span", { className: "e-file-size" }); h.innerHTML = this.bytesToSize(n.size), o.appendChild(h); var c = this.createElement("span", { className: fT }); o.appendChild(c), c.innerHTML = n.status, r.appendChild(o); var p = this.createElement("span", { className: " e-icons", attrs: { tabindex: this.btnTabIndex } }); "msie" === this.browserName && p.classList.add("e-msie"), p.setAttribute("title", this.localizedTexts("remove")), r.appendChild(p), Kv.add(p, "click", this.removeFiles, this), "2" === n.statusCode ? (c.classList.add(TT), p.classList.add(vT), p.setAttribute("title", this.localizedTexts("delete"))) : "1" !== n.statusCode && (c.classList.remove(TT), c.classList.add(ET)), this.autoUpload && "1" === n.statusCode && "" !== this.asyncSettings.saveUrl && (c.innerHTML = ""), p.classList.contains(vT) || p.classList.add(yT); var u = e.indexOf(n), g = { element: r, fileInfo: n, index: u, isPreload: this.isPreLoadFile(n) }, m = { element: r, fileInfo: n, index: u, isPreload: this.isPreLoadFile(n) }; this.trigger("rendering", g), this.trigger("fileListRendering", m), this.listParent.appendChild(r), this.fileList.push(r), this.truncateName(s) } else this.createCustomfileList(e) }, t.prototype.getSlicedName = function (e) { var t; t = e.textContent, e.dataset.tail = t.slice(t.length - 10) }, t.prototype.truncateName = function (e) { var t = e; "edge" !== this.browserName && t.offsetWidth < t.scrollWidth ? this.getSlicedName(t) : t.offsetWidth + 1 < t.scrollWidth && this.getSlicedName(t) }, t.prototype.getFileType = function (e) { var t, i = e.lastIndexOf("."); return i >= 0 && (t = e.substring(i + 1)), t || "" }, t.prototype.getFileNameOnly = function (e) { var t = this.getFileType(e); return t = e.split("." + t)[0] }, t.prototype.setInitialAttributes = function () { if (this.initialAttr.accept && this.element.setAttribute("accept", this.initialAttr.accept), this.initialAttr.disabled && this.element.setAttribute("disabled", "disabled"), this.initialAttr.multiple) { var e = document.createAttribute("multiple"); this.element.setAttributeNode(e) } }, t.prototype.filterfileList = function (e) { for (var t = [], i = 0; i < e.length; i++)this.getLiElement(e[i]).classList.contains(TT) || t.push(e[i]); return t }, t.prototype.updateStatus = function (e, t, i, n) { if (void 0 === n && (n = !0), "" === t || d(t) || "" === i || d(i) || (e.status = t, e.statusCode = i), n) { var r = this.getLiElement(e); d(r) || d(r.querySelector("." + fT)) || "" === t || d(t) || (r.querySelector("." + fT).textContent = t) } return e }, t.prototype.getLiElement = function (e) { for (var t, i = 0; i < this.filesData.length; i++)this.filesData[i].name === e.name && (t = i); return this.fileList[t] }, t.prototype.createProgressBar = function (e) { var t = this.createElement("span", { className: LT }), i = this.createElement("progressbar", { className: MT, attrs: { value: "0", max: "100" } }), n = this.createElement("span", { className: "e-progress-inner-wrap" }); i.setAttribute("style", "width: 0%"); var r = this.createElement("span", { className: ST }); r.textContent = "0%", n.appendChild(i), t.appendChild(n), t.appendChild(r), e.querySelector("." + AT).appendChild(t) }, t.prototype.updateProgressbar = function (e, t) { if (!isNaN(Math.round(e.loaded / e.total * 100)) && !d(t.querySelector("." + MT))) if (d(this.progressInterval) || "" === this.progressInterval) this.changeProgressValue(t, Math.round(e.loaded / e.total * 100).toString() + "%"); else { var i = Math.round(e.loaded / e.total * 100) % parseInt(this.progressInterval, 10); 0 !== i && 100 !== i || this.changeProgressValue(t, Math.round(e.loaded / e.total * 100).toString() + "%") } }, t.prototype.changeProgressValue = function (e, t) { e.querySelector("." + MT).setAttribute("style", "width:" + t), e.querySelector("." + ST).textContent = t }, t.prototype.uploadInProgress = function (e, t, i, n) { var r = this.getLiElement(t); if (!d(r) || i) { if (d(r)) this.cancelUploadingFile(t, e, n); else { "5" === t.statusCode && this.cancelUploadingFile(t, e, n, r), r.querySelectorAll("." + LT).length > 0 || !r.querySelector("." + fT) || (r.querySelector("." + fT).classList.add(xT), this.createProgressBar(r), this.updateProgressBarClasses(r, xT), r.querySelector("." + fT).classList.remove(DT)), this.updateProgressbar(e, r); var o = r.querySelector("." + yT); d(o) || (o.classList.add(wT, xT), o.setAttribute("title", this.localizedTexts("abort")), o.classList.remove(yT)) } var s = { e: e, operation: "upload", file: this.updateStatus(t, this.localizedTexts("inProgress"), "3") }; this.trigger("progress", s) } }, t.prototype.cancelUploadingFile = function (e, t, i, n) { var r = this; if ("5" === e.statusCode) { var o = { event: t, fileData: e, cancel: !1 }; this.trigger("canceling", o, function (t) { if (t.cancel) { if (e.statusCode = "3", !d(n)) { var o = n.querySelector("." + wT); d(o) || (Ft(o), I(n.querySelector(".e-spinner-pane"))) } } else { i.emitError = !1, i.httpRequest.abort(); var s = new FormData; if ("5" === e.statusCode) { var a = r.element.getAttribute("name"); s.append(a, e.name), s.append("cancel-uploading", e.name); var l = new Zv(r.asyncSettings.removeUrl, "POST", !0, null); l.emitError = !1, l.onLoad = function (t) { return r.removecanceledFile(t, e), {} }, l.send(s) } } }) } }, t.prototype.removecanceledFile = function (e, t) { var i = this.getLiElement(t); if (!i.querySelector("." + bT) && !d(i.querySelector("." + wT))) { this.updateStatus(t, this.localizedTexts("fileUploadCancel"), "5"), this.renderFailureState(e, t, i); var n = i.querySelector("." + yT); d(i) || (Ft(n), I(i.querySelector(".e-spinner-pane"))); var r = { event: e, response: e && e.currentTarget ? this.getResponse(e) : null, operation: "cancel", file: t }; this.trigger("success", r) } }, t.prototype.renderFailureState = function (e, t, i) { var n = this; this.updateProgressBarClasses(i, DT), this.removeProgressbar(i, "failure"), d(i.querySelector(".e-file-status")) || i.querySelector(".e-file-status").classList.add(DT); var r = i.querySelector("." + wT); if (!d(r)) { r.classList.remove(wT, xT), r.classList.add(yT), r.setAttribute("title", this.localizedTexts("remove")), this.pauseButton = this.createElement("span", { className: "e-icons e-file-reload-btn", attrs: { tabindex: this.btnTabIndex } }), i.insertBefore(this.pauseButton, r), this.pauseButton.setAttribute("title", this.localizedTexts("retry")); i.querySelector("." + bT).addEventListener("click", function (e) { n.reloadcanceledFile(e, t, i, !1) }, !1) } }, t.prototype.reloadcanceledFile = function (e, t, i, n) { t.statusCode = "1", t.status = this.localizedTexts("readyToUploadMessage"), n || (i.querySelector("." + fT).classList.remove(DT), d(i.querySelector("." + bT)) || I(i.querySelector("." + bT)), this.pauseButton = null), i.classList.add(NT), this.upload([t]) }, t.prototype.uploadComplete = function (e, t, i) { var n = e.target; if (4 === n.readyState && n.status >= 200 && n.status <= 299) { var r = this.getLiElement(t); if (d(r) && (!i || d(i))) return; if (!d(r)) { this.updateProgressBarClasses(r, TT), this.removeProgressbar(r, "success"); var o = r.querySelector("." + wT); d(o) || (o.classList.add(vT), o.setAttribute("title", this.localizedTexts("delete")), o.classList.remove(wT), o.classList.remove(xT)) } this.raiseSuccessEvent(e, t) } else this.uploadFailed(e, t) }, t.prototype.getResponse = function (e) { var t = e.currentTarget; return { readyState: t.readyState, statusCode: t.status, statusText: t.statusText, headers: t.getAllResponseHeaders(), withCredentials: t.withCredentials } }, t.prototype.raiseSuccessEvent = function (e, t) { var i = this, n = e && e.currentTarget ? this.getResponse(e) : null, r = this.localizedTexts("uploadSuccessMessage"), o = { e: e, response: n, operation: "upload", file: this.updateStatus(t, r, "2", !1), statusText: r }; this.trigger("success", o, function (e) { i.updateStatus(t, e.statusText, "2"), i.uploadedFilesData.push(t), i.trigger("change", { file: i.uploadedFilesData }), i.checkActionButtonStatus(), i.fileList.length > 0 && (i.getLiElement(t).classList.contains(NT) ? i.getLiElement(t).classList.remove(NT) : (i.uploadSequential(), i.checkActionComplete(!0))) }) }, t.prototype.uploadFailed = function (e, t) { var i = this, n = this.getLiElement(t), r = e && e.currentTarget ? this.getResponse(e) : null, o = this.localizedTexts("uploadFailedMessage"), s = { e: e, response: r, operation: "upload", file: this.updateStatus(t, o, "0", !1), statusText: o }; d(n) || this.renderFailureState(e, t, n), this.trigger("failure", s, function (e) { i.updateStatus(t, e.statusText, "0"), i.checkActionButtonStatus(), i.uploadSequential(), i.checkActionComplete(!0) }) }, t.prototype.uploadSequential = function () { this.sequentialUpload && (this.autoUpload ? this.checkAutoUpload(this.filesData) : this.uploadButtonClick()) }, t.prototype.checkActionComplete = function (e) { e ? ++this.actionCompleteCount : --this.actionCompleteCount, this.raiseActionComplete() }, t.prototype.raiseActionComplete = function () { if (this.filesData.length === this.actionCompleteCount && this.flag) { this.flag = !1; var e = { fileData: [] }; e.fileData = this.getSelectedFileStatus(this.selectedFiles), this.trigger("actionComplete", e) } }, t.prototype.getSelectedFileStatus = function (e) { for (var t = [], i = 0, n = 0; n < e.length; n++)for (var r = e[n], o = 0; o < this.filesData.length; o++)this.filesData[o].name === r.name && (t[i] = this.filesData[o], ++i); return t }, t.prototype.updateProgressBarClasses = function (e, t) { var i = e.querySelector("." + MT); d(i) || i.classList.add(t) }, t.prototype.removeProgressbar = function (e, t) { var i = this; d(e.querySelector("." + LT)) || (this.progressAnimation = new fw({ duration: 1250 }), this.progressAnimation.animate(e.querySelector("." + LT), { name: "FadeOut" }), this.progressAnimation.animate(e.querySelector("." + ST), { name: "FadeOut" }), setTimeout(function () { i.animateProgressBar(e, t) }, 750)) }, t.prototype.animateProgressBar = function (e, t) { "success" === t ? (e.classList.add(TT), d(e.querySelector("." + fT)) || (e.querySelector("." + fT).classList.remove(xT), this.progressAnimation.animate(e.querySelector("." + fT), { name: "FadeIn" }), e.querySelector("." + fT).classList.add(TT))) : d(e.querySelector("." + fT)) || (e.querySelector("." + fT).classList.remove(xT), this.progressAnimation.animate(e.querySelector("." + fT), { name: "FadeIn" }), e.querySelector("." + fT).classList.add(DT)), e.querySelector("." + LT) && I(e.querySelector("." + LT)) }, t.prototype.setExtensions = function (e) { "" === e || d(e) ? this.element.removeAttribute("accept") : this.element.setAttribute("accept", e) }, t.prototype.templateComplier = function (e) { if (e) try { if (document.querySelectorAll(e).length) return ce(document.querySelector(e).innerHTML.trim()) } catch (t) { return ce(e) } }, t.prototype.setRTL = function () { this.enableRtl ? S([this.uploadWrapper], "e-rtl") : x([this.uploadWrapper], "e-rtl") }, t.prototype.localizedTexts = function (e) { return this.l10n.setLocale(this.locale), this.l10n.getConstant(e) }, t.prototype.setControlStatus = function () { this.enabled ? (this.uploadWrapper.classList.contains(jT) && this.uploadWrapper.classList.remove(jT), !d(this.browseButton) && this.element.hasAttribute("disabled") && (this.element.removeAttribute("disabled"), this.browseButton.removeAttribute("disabled")), !d(this.clearButton) && this.clearButton.hasAttribute("disabled") && this.clearButton.removeAttribute("disabled"), !d(this.uploadButton) && this.uploadButton.hasAttribute("disabled") && this.uploadButton.hasAttribute("disabled")) : (this.uploadWrapper.classList.add(jT), this.element.setAttribute("disabled", "disabled"), this.browseButton.setAttribute("disabled", "disabled"), d(this.clearButton) || this.clearButton.setAttribute("disabled", "disabled"), d(this.uploadButton) || this.uploadButton.setAttribute("disabled", "disabled")) }, t.prototype.checkHTMLAttributes = function (e) { for (var t = 0, i = e ? Object.keys(this.htmlAttributes) : ["accept", "multiple", "disabled"]; t < i.length; t++) { var n = i[t]; if (!d(this.element.getAttribute(n))) switch (n) { case "accept": (d(this.uploaderOptions) || void 0 === this.uploaderOptions.allowedExtensions || e) && (this.setProperties({ allowedExtensions: this.element.getAttribute("accept") }, !e), this.initialAttr.accept = this.allowedExtensions); break; case "multiple": if (d(this.uploaderOptions) || void 0 === this.uploaderOptions.multiple || e) { var r = "multiple" === this.element.getAttribute(n) || "" === this.element.getAttribute(n) || "true" === this.element.getAttribute(n); this.setProperties({ multiple: r }, !e), this.initialAttr.multiple = !0 } break; case "disabled": if (d(this.uploaderOptions) || void 0 === this.uploaderOptions.enabled || e) { var o = "disabled" !== this.element.getAttribute(n) && "" !== this.element.getAttribute(n) && "true" !== this.element.getAttribute(n); this.setProperties({ enabled: o }, !e), this.initialAttr.disabled = !0 } } } }, t.prototype.chunkUpload = function (e, t, i) { var n = Math.min(this.asyncSettings.chunkSize, e.size), r = { chunkIndex: 0, blob: e.rawFile.slice(0, n), file: e, start: 0, end: n, retryCount: 0, request: null }; this.sendRequest(e, r, t, i) }, t.prototype.sendRequest = function (e, t, i, n) { var r, o = this, s = new FormData, a = e.rawFile.slice(t.start, t.end); s.append("chunkFile", a, e.name), s.append("chunk-index", t.chunkIndex.toString()), s.append("chunkIndex", t.chunkIndex.toString()); var l = Math.max(Math.ceil(e.size / this.asyncSettings.chunkSize), 1); s.append("total-chunk", l.toString()), s.append("totalChunk", l.toString()); var h = new Zv({ url: this.asyncSettings.saveUrl, type: "POST", async: !0, contentType: null }); h.emitError = !1, h.onLoad = function (e) { return o.chunkUploadComplete(e, t, i), {} }, h.onUploadProgress = function (e) { return o.chunkUploadInProgress(e, t, i), {} }; var d = { fileData: e, customFormData: [], cancel: !1, chunkSize: 0 === this.asyncSettings.chunkSize ? null : this.asyncSettings.chunkSize }; h.beforeSend = function (i) { d.currentRequest = h.httpRequest, d.currentChunkIndex = t.chunkIndex, w() && (r = new File([e.rawFile], e.name), d.fileData.rawFile = n ? o.base64String[n] : null, o.currentRequestHeader && o.updateCustomheader(h.httpRequest, o.currentRequestHeader), o.customFormDatas && o.updateFormData(s, o.customFormDatas)), 0 === d.currentChunkIndex ? o.trigger("uploading", d, function (t) { w() && (t.fileData.rawFile = r), o.uploadingEventCallback(s, t, i, e) }) : o.trigger("chunkUploading", d, function (t) { w() && (t.fileData.rawFile = r), o.uploadingEventCallback(s, t, i, e) }) }, h.onError = function (e) { return o.chunkUploadFailed(e, t, i), {} }, h.send(s), t.request = h }, t.prototype.uploadingEventCallback = function (e, t, i, n) { t.cancel ? this.eventCancelByArgs(i, t, n) : this.updateFormData(e, t.customFormData) }, t.prototype.eventCancelByArgs = function (e, t, i) { var n = this; if (e.cancel = !0, "5" !== t.fileData.statusCode) { var r = this.getLiElement(t.fileData); r.querySelector("." + fT).innerHTML = this.localizedTexts("fileUploadCancel"), r.querySelector("." + fT).classList.add(DT), t.fileData.statusCode = "5", t.fileData.status = this.localizedTexts("fileUploadCancel"), this.pauseButton = this.createElement("span", { className: "e-icons e-file-reload-btn", attrs: { tabindex: this.btnTabIndex } }), r.insertBefore(this.pauseButton, r.querySelector("." + yT)), this.pauseButton.setAttribute("title", this.localizedTexts("retry")), this.pauseButton.addEventListener("click", function (e) { n.reloadcanceledFile(e, i, r) }, !1), this.checkActionButtonStatus() } }, t.prototype.checkChunkUpload = function () { return !(this.asyncSettings.chunkSize <= 0 || d(this.asyncSettings.chunkSize)) }, t.prototype.chunkUploadComplete = function (e, t, i) { var n, r = this, o = e.target; if (4 === o.readyState && o.status >= 200 && o.status < 300) { var s = e && e.currentTarget ? this.getResponse(e) : null, a = Math.max(Math.ceil(t.file.size / this.asyncSettings.chunkSize), 1), l = { event: e, file: t.file, chunkIndex: t.chunkIndex, totalChunk: a, chunkSize: this.asyncSettings.chunkSize, response: s }; if (this.trigger("chunkSuccess", l), !d(i) && i || (n = this.getLiElement(t.file)), this.updateMetaData(t), t.end === t.file.size && (t.file.statusCode = "3"), "5" === t.file.statusCode) { var h = { event: e, fileData: t.file, cancel: !1 }; this.trigger("canceling", h, function (e) { if (e.cancel) { t.file.statusCode = "3"; var s = n.querySelector("." + wT); d(n) || d(s) || (Ft(s), I(n.querySelector(".e-spinner-pane"))), r.sendNextRequest(t) } else { t.request.emitError = !1, o.abort(); var a = new FormData, l = r.element.getAttribute("name"); a.append(l, t.file.name), a.append("cancel-uploading", t.file.name), a.append("cancelUploading", t.file.name); var h = new Zv(r.asyncSettings.removeUrl, "POST", !0, null); h.emitError = !1, h.onLoad = function (e) { return r.removeChunkFile(e, t, i), {} }, h.send(a) } }) } else { if (a - 1 === t.chunkIndex && a > t.chunkIndex) { var c = this.pausedData.indexOf(t); return c >= 0 && this.pausedData.splice(c, 1), d(this.template) && (d(i) || !i) && n && (n && I(n.querySelector("." + kT)), this.removeChunkProgressBar(t)), void this.raiseSuccessEvent(e, t.file) } this.sendNextRequest(t) } } else this.chunkUploadFailed(e, t) }, t.prototype.sendNextRequest = function (e) { e.start = e.end, e.end += this.asyncSettings.chunkSize, e.end = Math.min(e.end, e.file.size), e.chunkIndex += 1, this.sendRequest(e.file, e) }, t.prototype.removeChunkFile = function (e, t, i) { if (d(this.template) && d(i) && !i) { var n = this.getLiElement(t.file), r = n.querySelector("." + wT), o = r; this.updateStatus(t.file, this.localizedTexts("fileUploadCancel"), "5"), this.updateProgressBarClasses(n, DT), this.removeProgressbar(n, "failure"), r.classList.remove(wT), r.classList.add(yT), r.setAttribute("title", this.localizedTexts("remove")); var s = n.querySelector("." + kT); s.classList.add(bT), s.classList.remove(kT), s.setAttribute("title", this.localizedTexts("retry")), d(n) || d(r) || (Ft(o), I(n.querySelector(".e-spinner-pane"))) } }, t.prototype.pauseUpload = function (e, t, i) { e.file.statusCode = "4", e.file.status = this.localizedTexts("pause"), this.updateMetaData(e); var n = { event: t || null, file: e.file, chunkIndex: e.chunkIndex, chunkCount: Math.round(e.file.size / this.asyncSettings.chunkSize), chunkSize: this.asyncSettings.chunkSize }; this.abortUpload(e, i, n) }, t.prototype.abortUpload = function (e, t, i) { e.request.emitError = !1, e.request.httpRequest.abort(); var n = this.getLiElement(e.file); if (d(this.template) && (d(t) || !t)) { var r = n.querySelector("." + kT); r.classList.remove(kT), r.classList.add(PT), r.setAttribute("title", this.localizedTexts("resume")), r.nextElementSibling.classList.add(yT), r.nextElementSibling.classList.remove(wT), r.nextElementSibling.setAttribute("title", this.localizedTexts("remove")) } for (var o = 0; o < this.pausedData.length; o++)this.pausedData[o].file.name === e.file.name && this.pausedData.splice(o, 1); this.pausedData.push(e), this.trigger("pausing", i) }, t.prototype.resumeUpload = function (e, t, i) { var n, r = this.getLiElement(e.file); d(r) || (n = r.querySelector("." + PT)), d(n) || !d(i) && i || (n.classList.remove(PT), n.classList.add(kT), n.setAttribute("title", this.localizedTexts("pause")), n.nextElementSibling.classList.remove(yT), n.nextElementSibling.classList.add(wT), n.nextElementSibling.setAttribute("title", this.localizedTexts("abort"))), e.file.status = this.localizedTexts("inProgress"), e.file.statusCode = "3", this.updateMetaData(e); var o = { event: t || null, file: e.file, chunkIndex: e.chunkIndex, chunkCount: Math.round(e.file.size / this.asyncSettings.chunkSize), chunkSize: this.asyncSettings.chunkSize }; this.trigger("resuming", o); for (var s = 0; s < this.pausedData.length; s++)this.pausedData[s].end === this.pausedData[s].file.size ? this.chunkUploadComplete(t, e, i) : this.pausedData[s].file.name === e.file.name && (this.pausedData[s].start = this.pausedData[s].end, this.pausedData[s].end = this.pausedData[s].end + this.asyncSettings.chunkSize, this.pausedData[s].end = Math.min(this.pausedData[s].end, this.pausedData[s].file.size), this.pausedData[s].chunkIndex = this.pausedData[s].chunkIndex + 1, this.sendRequest(this.pausedData[s].file, this.pausedData[s], i)) }, t.prototype.updateMetaData = function (e) { -1 === this.uploadMetaData.indexOf(e) ? this.uploadMetaData.push(e) : (this.uploadMetaData.splice(this.uploadMetaData.indexOf(e), 1), this.uploadMetaData.push(e)) }, t.prototype.removeChunkProgressBar = function (e) { var t = this.getLiElement(e.file); if (!d(t)) { this.updateProgressBarClasses(t, TT), this.removeProgressbar(t, "success"); var i = t.querySelector("." + wT); d(i) || (i.classList.add(vT), i.setAttribute("title", this.localizedTexts("delete")), i.classList.remove(wT, xT)) } }, t.prototype.chunkUploadFailed = function (e, t, i) { var n, r = this, o = Math.max(Math.ceil(t.file.size / this.asyncSettings.chunkSize), 1); !d(this.template) || !d(i) && i || (n = this.getLiElement(t.file)); var s = e && e.currentTarget ? this.getResponse(e) : null, a = { event: e, file: t.file, chunkIndex: t.chunkIndex, totalChunk: o, chunkSize: this.asyncSettings.chunkSize, cancel: !1, response: s }; this.trigger("chunkFailure", a, function (o) { if (!o.cancel) if (t.retryCount < r.asyncSettings.retryCount) setTimeout(function () { r.retryRequest(n, t, i) }, r.asyncSettings.retryAfterDelay); else { if (!d(n)) { var a = n.querySelector("." + kT) ? n.querySelector("." + kT) : n.querySelector("." + PT); d(a) || (a.classList.add(bT), a.classList.remove(kT, PT)), r.updateProgressBarClasses(n, DT), r.removeProgressbar(n, "failure"), n.querySelector(".e-icons").classList.remove(xT); var l = n.querySelector("." + wT) ? n.querySelector("." + wT) : n.querySelector("." + yT); l.classList.remove(wT), d(n.querySelector("." + kT)) || I(n.querySelector("." + kT)), t.start > 0 ? (l.classList.add(vT), l.setAttribute("title", r.localizedTexts("delete"))) : (l.classList.add(yT), l.setAttribute("title", r.localizedTexts("remove"))) } t.retryCount = 0; var h = t.file, c = r.localizedTexts("uploadFailedMessage"), p = { e: e, response: s, operation: "upload", file: r.updateStatus(h, c, "0", !1), statusText: c }; r.trigger("failure", p, function (e) { r.updateStatus(h, e.statusText, "0"), r.uploadSequential(), r.checkActionComplete(!0) }) } }) }, t.prototype.retryRequest = function (e, t, i) { d(this.template) && (d(i) || !i) && e && this.updateProgressBarClasses(e, DT), t.retryCount += 1, this.sendRequest(t.file, t) }, t.prototype.checkPausePlayAction = function (e) { var t = e.target, i = e.target.parentElement, n = this.fileList.indexOf(i), r = this.filesData[n], o = this.getCurrentMetaData(r); t.classList.contains(kT) ? this.pauseUpload(o, e) : t.classList.contains(PT) ? this.resumeUpload(o, e) : t.classList.contains(bT) && (o.file.status === this.localizedTexts("fileUploadCancel") ? this.retryUpload(o, !1) : this.retryUpload(o, !0)) }, t.prototype.retryUpload = function (e, t) { t ? (e.end = e.end + this.asyncSettings.chunkSize, e.start = e.start + this.asyncSettings.chunkSize, this.sendRequest(e.file, e)) : (e.file.statusCode = "1", e.file.status = this.localizedTexts("readyToUploadMessage"), this.chunkUpload(e.file)), this.getLiElement(e.file).classList.add(NT) }, t.prototype.chunkUploadInProgress = function (e, t, i) { var n = this; if ("4" !== t.file.statusCode) { "4" !== t.file.statusCode && "5" !== t.file.statusCode && (t.file.statusCode = "3", t.file.status = this.localizedTexts("inProgress")), this.updateMetaData(t); var r = this.getLiElement(t.file); if (!d(r)) { var o = r.querySelector("." + bT); if (d(o) || (o.classList.add(kT), o.setAttribute("title", this.localizedTexts("pause")), o.classList.remove(bT)), !d(r)) { if (!(r.querySelectorAll("." + LT).length > 0)) { var s = r.querySelector("." + fT); d(this.template) && (s.classList.add(xT), s.classList.remove(DT), this.createProgressBar(r), this.updateProgressBarClasses(r, xT)); var a = r.querySelector("." + yT) ? r.querySelector("." + yT) : r.querySelector("." + vT); d(a) || (a.classList.add(wT), a.setAttribute("title", this.localizedTexts("abort")), a.classList.remove(yT)) } if (!isNaN(Math.round(e.loaded / e.total * 100)) && d(this.template) && "4" !== t.file.statusCode) { var l = t.chunkIndex * this.asyncSettings.chunkSize, h = Math.min((l + e.loaded) / t.file.size * 100, 100); this.changeProgressValue(r, Math.round(h).toString() + "%") } 0 === t.chunkIndex && this.checkActionButtonStatus() } d(r.querySelector("." + kT)) && d(this.template) && (this.pauseButton = this.createElement("span", { className: "e-icons e-file-pause-btn", attrs: { tabindex: this.btnTabIndex } }), "msie" === this.browserName && this.pauseButton.classList.add("e-msie"), r.insertBefore(this.pauseButton, r.querySelector("." + wT)), this.pauseButton.setAttribute("title", this.localizedTexts("pause")), this.pauseButton.addEventListener("click", function (e) { n.checkPausePlayAction(e) }, !1)) } } }, t.prototype.bytesToSize = function (e) { var t = -1; if (!e) return "0.0 KB"; do { e /= 1024, t++ } while (e > 99); return t >= 2 && (e *= 1024, t = 1), Math.max(e, 0).toFixed(1) + " " + ["KB", "MB"][t] }, t.prototype.sortFileList = function (e) { for (var t = e = e || this.sortFilesList, i = [], n = 0; n < t.length; n++)i.push(t[n].name); for (var r = [], o = 0, s = i.sort(); o < s.length; o++) { var a = s[o]; for (n = 0; n < t.length; n++)a === t[n].name && r.push(t[n]) } return r }, t.prototype.destroy = function () { this.element.value = null, this.clearAll(), this.unWireEvents(), this.unBindDropEvents(), this.multiple && this.element.removeAttribute("multiple"), this.enabled || this.element.removeAttribute("disabled"), this.element.removeAttribute("accept"), this.setInitialAttributes(); for (var t = 0, i = ["aria-label", "directory", "webkitdirectory", "tabindex"]; t < i.length; t++) { var n = i[t]; this.element.removeAttribute(n) } this.uploadWrapper.parentElement.appendChild(this.element), I(this.uploadWrapper), this.uploadWrapper = null, e.prototype.destroy.call(this) }, t.prototype.upload = function (e, t) { e = e || this.filesData; var i = this.validateFileType(e); this.uploadFiles(i, t) }, t.prototype.validateFileType = function (e) { var t = []; return e instanceof Array ? t = e : t.push(e), t }, t.prototype.uploadFiles = function (e, t) { var i = this, n = [], r = []; if ("" !== this.asyncSettings.saveUrl && !d(this.asyncSettings.saveUrl)) { if (!t || d(t)) if (this.multiple) n = this.filterfileList(e); else { var o = []; o.push(e[0]), n = this.filterfileList(o) } else n = e; for (var s = this.checkChunkUpload(), a = function (e) { var o = new Zv(l.asyncSettings.saveUrl, "POST", !0, null); o.emitError = !1; var a = void 0; w() && (a = n.slice(0), r.push(new File([a[e].rawFile], a[e].name))); var h = { fileData: w() ? a[e] : n[e], customFormData: [], cancel: !1 }, d = new FormData; if (o.beforeSend = function (t) { h.currentRequest = o.httpRequest, w() && (h.fileData.rawFile = i.base64String[e], i.currentRequestHeader && i.updateCustomheader(o.httpRequest, i.currentRequestHeader), i.customFormDatas && i.updateFormData(d, i.customFormDatas)), i.trigger("uploading", h, function (o) { w() && (n[e].rawFile = o.fileData.rawFile = r[e]), o.cancel && i.eventCancelByArgs(t, o, n[e]), i.updateFormData(d, o.customFormData) }) }, "1" === n[e].statusCode) { var c = l.element.getAttribute("name"); d.append(c, n[e].rawFile, n[e].name), s && n[e].size > l.asyncSettings.chunkSize ? l.chunkUpload(n[e], t, e) : (o.onLoad = function (r) { return h.cancel && w() ? {} : (i.uploadComplete(r, n[e], t), {}) }, o.onUploadProgress = function (r) { return h.cancel && w() ? {} : (i.uploadInProgress(r, n[e], t, o), {}) }, o.onError = function (t) { return i.uploadFailed(t, n[e]), {} }, o.send(d)) } }, l = this, h = 0; h < n.length; h++)a(h) } }, t.prototype.remove = function (e, t, i, n, r) { var o = this; d(n) && (n = !0); var s, a = { event: r, cancel: !1, filesData: [], customFormData: [], postRawFile: n }; if (this.isForm && (d(this.asyncSettings.removeUrl) || "" === this.asyncSettings.removeUrl)) a.filesData = this.getFilesData(), this.trigger("removing", a, function (e) { e.cancel || o.clearAll() }); else { var l = []; (e = d(e) ? this.filesData : e) instanceof Array ? l = e : l.push(e), a.filesData = l; for (var h = this.asyncSettings.removeUrl, c = "" !== h && !d(h), p = function (e) { s = u.filesData.indexOf(e), "2" !== e.statusCode && "4" !== e.statusCode || !c ? i ? u.removeFilesData(e, t) : u.trigger("removing", a, function (i) { i.cancel || o.removeFilesData(e, t) }) : u.removeUploadedFile(e, a, i, t), u.sequentialUpload ? s <= u.actionCompleteCount && u.checkActionComplete(!1) : u.checkActionComplete(!1) }, u = this, g = 0, m = l; g < m.length; g++) { p(m[g]) } } }, t.prototype.clearAll = function () { var e = this; if (d(this.listParent)) return "msie" !== this.browserName && (this.element.value = ""), void (this.filesData = []); var t = { cancel: !1, filesData: this.filesData }; this.trigger("clearing", t, function (t) { t.cancel || (e.clearData(), e.actionCompleteCount = 0, e.count = -1) }) }, t.prototype.getFilesData = function () { if (w()) { for (var e = 0; e < this.filesData.length; e++)this.filesData[e].rawFile = this.base64String[e]; return this.filesData } return this.filesData }, t.prototype.pause = function (e, t) { e = e || this.filesData; var i = this.validateFileType(e); this.pauseUploading(i, t) }, t.prototype.pauseUploading = function (e, t) { for (var i = this.getFiles(e), n = 0; n < i.length; n++)"3" === i[n].statusCode && this.pauseUpload(this.getCurrentMetaData(i[n], null), null, t) }, t.prototype.getFiles = function (e) { var t = []; return d(e) || e instanceof Array ? t = e : t.push(e), t }, t.prototype.resume = function (e, t) { e = e || this.filesData; var i = this.validateFileType(e); this.resumeFiles(i, t) }, t.prototype.resumeFiles = function (e, t) { for (var i = this.getFiles(e), n = 0; n < i.length; n++)"4" === i[n].statusCode && this.resumeUpload(this.getCurrentMetaData(i[n], null), null, t) }, t.prototype.retry = function (e, t, i) { e = e || this.filesData; var n = this.validateFileType(e); this.retryFailedFiles(n, t, i) }, t.prototype.retryFailedFiles = function (e, t, i) { for (var n = this.getFiles(e), r = 0; r < n.length; r++)if ("5" === n[r].statusCode || "0" === n[r].statusCode) if (this.asyncSettings.chunkSize > 0) this.retryUpload(this.getCurrentMetaData(n[r], null), t); else { var o = void 0; i || (o = this.fileList[this.filesData.indexOf(n[r])]), this.reloadcanceledFile(null, n[r], o, i) } }, t.prototype.cancel = function (e) { e = e || this.filesData; var t = this.validateFileType(e); this.cancelUpload(t) }, t.prototype.cancelUpload = function (e) { var t = this.getFiles(e); if (this.asyncSettings.chunkSize > 0) { for (var i = 0; i < t.length; i++)if ("3" === t[i].statusCode) { var n = this.getCurrentMetaData(t[i], null); n.file.statusCode = "5", n.file.status = this.localizedTexts("fileUploadCancel"), this.updateMetaData(n), this.showHideUploadSpinner(t[i]) } } else for (i = 0; i < t.length; i++)"3" === t[i].statusCode && (t[i].statusCode = "5", t[i].status = this.localizedTexts("fileUploadCancel"), this.showHideUploadSpinner(t[i])) }, t.prototype.showHideUploadSpinner = function (e) { var t = this.getLiElement(e); if (!d(t) && d(this.template)) { var i = t.querySelector("." + wT); St({ target: i, width: "20px" }), zt(i) } }, pT([U({ saveUrl: "", removeUrl: "" }, BT)], t.prototype, "asyncSettings", void 0), pT([Y(!1)], t.prototype, "sequentialUpload", void 0), pT([Y({})], t.prototype, "htmlAttributes", void 0), pT([Y("")], t.prototype, "cssClass", void 0), pT([Y(!0)], t.prototype, "enabled", void 0), pT([Y(null)], t.prototype, "template", void 0), pT([Y(!0)], t.prototype, "multiple", void 0), pT([Y(!0)], t.prototype, "autoUpload", void 0), pT([U({}, zT)], t.prototype, "buttons", void 0), pT([Y("")], t.prototype, "allowedExtensions", void 0), pT([Y(0)], t.prototype, "minFileSize", void 0), pT([Y(3e7)], t.prototype, "maxFileSize", void 0), pT([Y(null)], t.prototype, "dropArea", void 0), pT([G([{}], RT)], t.prototype, "files", void 0), pT([Y(!0)], t.prototype, "showFileList", void 0), pT([Y(!1)], t.prototype, "directoryUpload", void 0), pT([X()], t.prototype, "created", void 0), pT([X()], t.prototype, "actionComplete", void 0), pT([X()], t.prototype, "rendering", void 0), pT([X()], t.prototype, "fileListRendering", void 0), pT([X()], t.prototype, "selected", void 0), pT([X()], t.prototype, "uploading", void 0), pT([X()], t.prototype, "success", void 0), pT([X()], t.prototype, "failure", void 0), pT([X()], t.prototype, "removing", void 0), pT([X()], t.prototype, "clearing", void 0), pT([X()], t.prototype, "progress", void 0), pT([X()], t.prototype, "change", void 0), pT([X()], t.prototype, "chunkSuccess", void 0), pT([X()], t.prototype, "chunkFailure", void 0), pT([X()], t.prototype, "chunkUploading", void 0), pT([X()], t.prototype, "canceling", void 0), pT([X()], t.prototype, "pausing", void 0), pT([X()], t.prototype, "resuming", void 0), t = pT([J], t) }(Kw), VT = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), WT = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, HT = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return VT(t, e), WT([Y("")], t.prototype, "iconCss", void 0), WT([Y("")], t.prototype, "id", void 0), WT([Y(!1)], t.prototype, "separator", void 0), WT([Y("")], t.prototype, "text", void 0), WT([Y("")], t.prototype, "url", void 0), t }(ww), _T = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), YT = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, UT = "e-disabled", qT = "e-focused", GT = "e-menu-icon", QT = "e-item", XT = "e-dropdown-popup", JT = "e-separator", ZT = "e-vertical", KT = function (e) { function t(t, i) { return e.call(this, t, i) || this } return _T(t, e), t.prototype.preRender = function () { }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.toggle = function () { this.canOpen() ? this.openPopUp() : this.closePopup() }, t.prototype.render = function () { this.initialize(), this.disabled || this.wireEvents() }, t.prototype.createPopup = function () { var e, t = this.createElement("div", { className: XT, id: this.element.id + "-popup" }); document.body.appendChild(t), this.dropDown = new yM(t, { relateTo: this.element, collision: { X: "fit", Y: "flip" }, position: { X: "left", Y: "bottom" }, targetType: "relative", content: this.target ? this.getTargetElement() : "", enableRtl: this.enableRtl }), "fixed" === this.dropDown.element.style.position && this.dropDown.refreshPosition(this.element), this.dropDown.hide(), P(this.element, (e = {}, e["aria-haspopup"] = this.items.length || this.target ? "true" : "false", e["aria-expanded"] = "false", e["aria-owns"] = this.getPopUpElement().id, e.type = "button", e)), this.cssClass && S([t], this.cssClass.split(" ")) }, t.prototype.getTargetElement = function () { return "string" == typeof this.target ? N(this.target) : this.target }, t.prototype.createItems = function (e) { for (var t, i, n, r, o = this.hasIcon(e, "iconCss"), s = this.createElement("ul", { attrs: { role: "menu", tabindex: "0" } }), a = 0; a < e.length; a++)i = e[a], n = this.createElement("li", { innerHTML: i.url ? "" : i.text, className: i.separator ? QT + " " + JT : QT, attrs: { role: "menuItem", tabindex: "-1" }, id: i.id ? i.id : p("e-" + this.getModuleName() + "-item") }), i.iconCss ? (t = this.createElement("span", { className: GT + " " + i.iconCss }), n.insertBefore(t, n.childNodes[0])) : o && !i.separator && n.classList.add("e-blank-icon"), i.url && n.appendChild(this.createAnchor(i)), r = { item: i, element: n }, this.trigger("beforeItemRender", r), s.appendChild(n); return s }, t.prototype.hasIcon = function (e, t) { for (var i = 0, n = e.length; i < n; i++)if (e[i][t]) return !0; return !1 }, t.prototype.createAnchor = function (e) { return this.createElement("a", { className: "e-menu-text e-menu-url", innerHTML: e.text, attrs: { href: e.url } }) }, t.prototype.initialize = function () { this.button = new yL({ iconCss: this.iconCss, iconPosition: this.iconPosition, cssClass: this.cssClass, content: this.content, disabled: this.disabled, enableRtl: this.enableRtl, enablePersistence: this.enablePersistence }), this.button.createElement = this.createElement, this.button.appendTo(this.element), this.element.id || (this.element.id = p("e-" + this.getModuleName())), this.appendArrowSpan(), this.createPopup(), this.setActiveElem([this.element]) }, t.prototype.appendArrowSpan = function () { this.element.appendChild(this.createElement("span", { className: "e-btn-icon e-icons e-icon-" + (this.cssClass.indexOf(ZT) > -1 ? "bottom" : "right") + " e-caret" })) }, t.prototype.setActiveElem = function (e) { this.activeElem = e }, t.prototype.getModuleName = function () { return "dropdown-btn" }, t.prototype.canOpen = function () { return this.getPopUpElement().classList.contains("e-popup-close") }, t.prototype.destroy = function () { var t = this; if (e.prototype.destroy.call(this), "dropdown-btn" === this.getModuleName()) { var i; this.element.querySelector("span.e-caret") && I(this.element.querySelector("span.e-caret")), this.cssClass && (i = this.cssClass.split(" ")), this.button.destroy(), i && x([this.element], i), x(this.activeElem, ["e-active"]), (this.element.getAttribute("class") ? ["aria-haspopup", "aria-expanded", "aria-owns", "type"] : ["aria-haspopup", "aria-expanded", "aria-owns", "type", "class"]).forEach(function (e) { t.element.removeAttribute(e) }), this.dropDown.destroy(); var n = document.getElementById(this.getPopUpElement().id); n && (x([n], ["e-popup-open", "e-popup-close"]), I(n)), this.disabled || this.unWireEvents() } }, t.prototype.getPopUpElement = function () { return this.dropDown.element }, t.prototype.getULElement = function () { return this.getPopUpElement().children[0] }, t.prototype.wireEvents = function () { var e = this.getPopUpElement(); this.delegateMousedownHandler = this.mousedownHandler.bind(this), Kv.add(document, "mousedown touchstart", this.delegateMousedownHandler, this), Kv.add(this.element, "click", this.clickHandler, this), Kv.add(e, "click", this.clickHandler, this), Kv.add(this.element, "keydown", this.keyBoardHandler, this), Kv.add(e, "keydown", this.keyBoardHandler, this), this.rippleFn = ee(e, { selector: "." + QT }) }, t.prototype.keyBoardHandler = function (e) { if (e.target !== this.element || 9 !== e.keyCode && (e.altKey || 40 !== e.keyCode) && 38 !== e.keyCode) switch (e.keyCode) { case 38: case 40: !e.altKey || 38 !== e.keyCode && 40 !== e.keyCode ? this.upDownKeyHandler(e) : this.keyEventHandler(e); break; case 9: case 13: case 27: case 32: this.keyEventHandler(e) } }, t.prototype.upDownKeyHandler = function (e) { if (!this.target || 38 !== e.keyCode && 40 !== e.keyCode) { e.preventDefault(); var t = this.getULElement(), i = 40 === e.keyCode ? 0 : t.childElementCount - 1, n = i, r = null; this.removeCustomSelection(); for (var o = 0, s = t.children.length; o < s; o++)t.children[o].classList.contains(qT) && (n = o, (r = t.children[o]).classList.remove(qT), 40 === e.keyCode ? n++ : n-- , n === (40 === e.keyCode ? t.childElementCount : -1) && (n = i)); r = t.children[n], -1 !== (n = this.isValidLI(r, n, e.keyCode)) && (S([t.children[n]], qT), t.children[n].focus()) } }, t.prototype.removeCustomSelection = function () { var e = this.getULElement().querySelector(".e-selected"); e && e.classList.remove("e-selected") }, t.prototype.isValidLI = function (e, t, i, n) { if (void 0 === n && (n = 0), (e.classList.contains(JT) || e.classList.contains(UT)) && (t === (40 === i ? this.items.length - 1 : 0) ? t = 40 === i ? 0 : this.items.length - 1 : 40 === i ? t++ : t--), (e = this.getULElement().children[t]).classList.contains(JT) || e.classList.contains(UT)) { if (++n === this.items.length) return t = -1; t = this.isValidLI(e, t, i, n) } return t }, t.prototype.keyEventHandler = function (e) { (!this.target || 13 !== e.keyCode && 9 !== e.keyCode) && (9 !== e.keyCode && e.preventDefault(), 27 === e.keyCode || 38 === e.keyCode || 9 === e.keyCode ? this.canOpen() || this.closePopup(e, this.element) : this.clickHandler(e)) }, t.prototype.getLI = function (e) { return "LI" === e.tagName ? e : R(e, "li") }, t.prototype.mousedownHandler = function (e) { var t = e.target; this.canOpen() || R(t, "#" + this.getPopUpElement().id) || R(t, "#" + this.element.id) || this.closePopup(e) }, t.prototype.clickHandler = function (e) { var t = e.target, i = this.canOpen(); if (R(t, "#" + this.element.id)) i ? this.openPopUp(e) : this.closePopup(e, this.activeElem[0]); else if (R(t, "#" + this.getPopUpElement().id)) { var n = void 0, r = void 0, o = void 0, s = this.getLI(t); s && (r = Array.prototype.indexOf.call(this.getULElement().children, s), (o = this.items[r]) && (n = { element: s, item: o }, this.trigger("select", n)), this.closePopup(e, this.activeElem[0])) } }, t.prototype.openPopUp = function (e) { var t = this; void 0 === e && (e = null), this.target || this.getPopUpElement().appendChild(this.createItems(this.items)); var i = { element: this.getULElement(), items: this.items, event: e, cancel: !1 }; this.trigger("beforeOpen", i, function (e) { if (!e.cancel) { var i = t.getULElement(); t.dropDown.show(null, t.element), S([t.element], "e-active"), t.element.setAttribute("aria-expanded", "true"), i.focus(); var n = { element: i, items: t.items }; t.trigger("open", n) } }) }, t.prototype.closePopup = function (e, t) { var i = this; void 0 === e && (e = null); var n = { element: this.getULElement(), items: this.items, event: e, cancel: !1 }; this.trigger("beforeClose", n, function (e) { if (!e.cancel) { var n = i.getULElement(); i.removeCustomSelection(), i.dropDown.hide(), x(i.activeElem, "e-active"), i.element.setAttribute("aria-expanded", "false"), t && t.focus(); var r = { element: n, items: i.items }; i.trigger("close", r), !i.target && n && I(n) } }) }, t.prototype.unWireEvents = function () { Kv.remove(document, "mousedown touchstart", this.delegateMousedownHandler), Kv.remove(this.element, "click", this.clickHandler), Kv.remove(this.getPopUpElement(), "click", this.clickHandler), Kv.remove(this.element, "keydown", this.keyBoardHandler), Kv.remove(this.getPopUpElement(), "keydown", this.keyBoardHandler), this.rippleFn() }, t.prototype.onPropertyChanged = function (e, t) { this.button.setProperties(vi(e, ["content", "cssClass", "iconCss", "iconPosition", "disabled", "enableRtl"])), this.dropDown.setProperties(vi(e, ["enableRtl"])); for (var i = this.getPopUpElement(), n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "content": this.element.querySelector("span.e-caret") || this.appendArrowSpan(); break; case "disabled": e.disabled ? (this.unWireEvents(), this.canOpen() || this.closePopup()) : this.wireEvents(); break; case "cssClass": if (e.cssClass.indexOf(ZT) > -1) { B(this.element.querySelector("span.e-caret"), ["e-icon-bottom"], ["e-icon-right"]) } t.cssClass && x([i], t.cssClass.split(" ")), e.cssClass && S([i], e.cssClass.split(" ")); break; case "target": this.dropDown.content = this.getTargetElement(), this.dropDown.dataBind(); break; case "items": this.dropDown.refresh(), i.classList.contains("e-popup-open") && B(i, ["e-popup-close"], ["e-popup-open"]) } } }, t.prototype.focusIn = function () { this.element.focus() }, YT([Y("")], t.prototype, "content", void 0), YT([Y("")], t.prototype, "cssClass", void 0), YT([Y(!1)], t.prototype, "disabled", void 0), YT([Y("")], t.prototype, "iconCss", void 0), YT([Y("Left")], t.prototype, "iconPosition", void 0), YT([G([], HT)], t.prototype, "items", void 0), YT([Y("")], t.prototype, "target", void 0), YT([X()], t.prototype, "beforeItemRender", void 0), YT([X()], t.prototype, "beforeOpen", void 0), YT([X()], t.prototype, "beforeClose", void 0), YT([X()], t.prototype, "close", void 0), YT([X()], t.prototype, "open", void 0), YT([X()], t.prototype, "select", void 0), YT([X()], t.prototype, "created", void 0), t = YT([J], t) }(Kw), $T = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), eD = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, tD = "EJS-SPLITBUTTON", iD = function (e) { function t(t, i) { return e.call(this, t, i) || this } return $T(t, e), t.prototype.preRender = function () { var e = this.element; if (e.tagName === tD) { for (var t = n("ej2_instances", e), i = this.createElement("button", { attrs: { type: "button" } }), o = this.createElement(tD, { className: "e-" + this.getModuleName() + "-wrapper" }), s = 0, a = e.attributes.length; s < a; s++)i.setAttribute(e.attributes[s].nodeName, e.attributes[s].nodeValue); e.parentNode.insertBefore(o, e), I(e), e = i, o.appendChild(e), r("ej2_instances", t, e), this.wrapper = o, this.element = e } this.element.id || (this.element.id = p("e-" + this.getModuleName())) }, t.prototype.render = function () { this.initWrapper(), this.createPrimaryButton(), this.createSecondaryButton(), this.setActiveElem([this.element, this.secondaryBtnObj.element]), this.setAria(), this.wireEvents() }, t.prototype.initWrapper = function () { this.wrapper || (this.wrapper = this.createElement("div", { className: "e-" + this.getModuleName() + "-wrapper" }), this.element.parentNode.insertBefore(this.wrapper, this.element)), this.element.classList.remove("e-" + this.getModuleName()), this.enableRtl && this.wrapper.classList.add("e-rtl"), this.cssClass && S([this.wrapper], this.cssClass.split(" ")) }, t.prototype.createPrimaryButton = function () { var e = { cssClass: this.cssClass, enableRtl: this.enableRtl, iconCss: this.iconCss, iconPosition: this.iconPosition, content: this.content, disabled: this.disabled }; this.primaryBtnObj = new yL(e), this.primaryBtnObj.createElement = this.createElement, this.primaryBtnObj.appendTo(this.element), this.element.classList.add("e-" + this.getModuleName()), this.element.type = "button", this.wrapper.appendChild(this.element) }, t.prototype.createSecondaryButton = function () { var e = this, t = this.createElement("button", { className: "e-icon-btn", attrs: { tabindex: "-1" }, id: this.element.id + "_dropdownbtn" }); this.wrapper.appendChild(t); var i = { cssClass: this.cssClass, disabled: this.disabled, enableRtl: this.enableRtl, items: this.items, target: this.target, beforeItemRender: function (t) { e.trigger("beforeItemRender", t) }, open: function (t) { e.trigger("open", t) }, close: function (t) { e.trigger("close", t) }, select: function (t) { e.trigger("select", t) } }; i.beforeOpen = function (t) { var i = new nD; return e.trigger("beforeOpen", t, function (e) { i.resolve(e) }), i }, i.beforeClose = function (t) { var i = new nD; return e.trigger("beforeClose", t, function (e) { i.resolve(e) }), i }, this.secondaryBtnObj = new KT(i), this.secondaryBtnObj.createElement = this.createElement, this.secondaryBtnObj.appendTo(t), this.secondaryBtnObj.dropDown.relateTo = this.wrapper, this.dropDown = this.secondaryBtnObj.dropDown, this.secondaryBtnObj.activeElem = [this.element, this.secondaryBtnObj.element], Kv.remove(this.getPopUpElement(), "keydown", this.secondaryBtnObj.keyBoardHandler), this.secondaryBtnObj.element.querySelector(".e-btn-icon").classList.remove("e-icon-right") }, t.prototype.setAria = function () { P(this.element, { "aria-expanded": "false", "aria-haspopup": "true", "aria-label": this.element.textContent + " splitbutton", "aria-owns": this.secondaryBtnObj.dropDown.element.id }) }, t.prototype.getModuleName = function () { return "split-btn" }, t.prototype.toggle = function () { this.secondaryBtnObj.toggle() }, t.prototype.destroy = function () { var t = this, i = ["e-rtl"], n = document.getElementById(this.element.id); this.cssClass && (i = i.concat(this.cssClass.split(" "))), n && n.parentElement === this.wrapper && (this.wrapper.tagName === tD ? (this.wrapper.innerHTML = "", x([this.wrapper], ["e-rtl", "e-" + this.getModuleName() + "-wrapper"]), x([this.wrapper], this.cssClass.split(" "))) : (x([this.element], i), ["aria-label", "aria-haspopup", "aria-expanded", "aria-owns", "type"].forEach(function (e) { t.element.removeAttribute(e) }), this.wrapper.parentNode.insertBefore(this.element, this.wrapper), k(this.wrapper)), this.unWireEvents()), this.primaryBtnObj.destroy(), this.secondaryBtnObj.destroy(), e.prototype.destroy.call(this), this.element.getAttribute("class") || this.element.removeAttribute("class") }, t.prototype.wireEvents = function () { Kv.add(this.element, "click", this.primaryBtnClickHandler, this), Kv.add(this.getPopUpElement(), "keydown", this.keyBoardHandler, this), new cb(this.element, { keyAction: this.btnKeyBoardHandler.bind(this), keyConfigs: { altdownarrow: "alt+downarrow" } }) }, t.prototype.unWireEvents = function () { Kv.remove(this.element, "click", this.primaryBtnClickHandler), C(this.element, cb).destroy() }, t.prototype.primaryBtnClickHandler = function () { this.trigger("click", { element: this.element }) }, t.prototype.btnKeyBoardHandler = function (e) { switch (e.action) { case "altdownarrow": this.clickHandler(e) } }, t.prototype.onPropertyChanged = function (e, t) { var i = ["content", "iconCss", "iconPosition", "cssClass", "disabled", "enableRtl"]; this.primaryBtnObj.setProperties(vi(e, i)), i = ["items", "beforeOpen", "beforeItemRender", "select", "open", "close", "cssClass", "disabled", "enableRtl"], this.secondaryBtnObj.setProperties(vi(e, i)); for (var n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "cssClass": t.cssClass && x([this.wrapper], t.cssClass.split(" ")), S([this.wrapper], e.cssClass.split(" ")); break; case "enableRtl": e.enableRtl ? S([this.wrapper], "e-rtl") : x([this.wrapper], "e-rtl") } } }, t.prototype.focusIn = function () { this.element.focus() }, eD([Y("")], t.prototype, "content", void 0), eD([Y("")], t.prototype, "cssClass", void 0), eD([Y(!1)], t.prototype, "disabled", void 0), eD([Y("")], t.prototype, "iconCss", void 0), eD([Y("Left")], t.prototype, "iconPosition", void 0), eD([G([], HT)], t.prototype, "items", void 0), eD([Y("")], t.prototype, "target", void 0), eD([X()], t.prototype, "beforeItemRender", void 0), eD([X()], t.prototype, "beforeOpen", void 0), eD([X()], t.prototype, "beforeClose", void 0), eD([X()], t.prototype, "click", void 0), eD([X()], t.prototype, "close", void 0), eD([X()], t.prototype, "open", void 0), eD([X()], t.prototype, "select", void 0), eD([X()], t.prototype, "created", void 0), t = eD([J], t) }(KT), nD = function () { return function () { var e = this; this.promise = new Promise(function (t, i) { e.resolve = t, e.reject = i }), this.then = this.promise.then.bind(this.promise), this.catch = this.promise.catch.bind(this.promise) } }(), rD = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), oD = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, sD = "e-hide-spinner", aD = "e-progress-active", lD = "e-btn-content", hD = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return rD(t, e), oD([Y(null)], t.prototype, "template", void 0), oD([Y(16)], t.prototype, "width", void 0), oD([Y("Left")], t.prototype, "position", void 0), t }(ww), dD = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return rD(t, e), oD([Y(400)], t.prototype, "duration", void 0), oD([Y("None")], t.prototype, "effect", void 0), oD([Y("ease")], t.prototype, "easing", void 0), t }(ww), cD = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.step = 1, n } return rD(t, e), t.prototype.preRender = function () { e.prototype.preRender.call(this) }, t.prototype.render = function () { e.prototype.render.call(this), this.init(), this.wireEvents(), this.setAria() }, t.prototype.start = function (e) { this.isPaused = !1, this.startProgress(e || this.percent, this.progressTime) }, t.prototype.stop = function () { this.isPaused = !0, cancelAnimationFrame(this.timerId) }, t.prototype.progressComplete = function () { this.isPaused = !1, this.finishProgress() }, t.prototype.getModuleName = function () { return "progress-btn" }, t.prototype.destroy = function () { var t = this, i = [sD, aD, "e-round-corner", "e-" + e.prototype.getModuleName.call(this), "e-spin-" + this.spinSettings.position.toLowerCase()]; e.prototype.destroy.call(this), this.unWireEvents(), this.element.innerHTML = "", this.cssClass && (i = i.concat(this.cssClass.split(" "))), x([this.element], i), (this.element.getAttribute("class") ? ["aria-label", "aria-valuemin", "aria-valuemax", "aria-valuenow"] : ["aria-label", "aria-valuemin", "aria-valuemax", "aria-valuenow", "class"]).forEach(function (e) { t.element.removeAttribute(e) }), this.disabled && this.element.removeAttribute("disabled") }, t.prototype.init = function () { this.element.classList.add("e-" + e.prototype.getModuleName.call(this)), this.setContent(), this.createSpinner(), this.enableProgress && this.createProgress() }, t.prototype.createSpinner = function () { var e = this.createElement("span", { className: "e-spinner" }); this.setSpinPosition(e), St({ target: e, width: this.spinSettings.width || 16, template: this.spinSettings.template }, this.createElement) }, t.prototype.getSpinner = function () { return this.element.getElementsByClassName("e-spinner")[0] }, t.prototype.getProgress = function () { return this.element.getElementsByClassName("e-progress")[0] }, t.prototype.setSpinPosition = function (e) { var t = this.spinSettings.position || "Left"; "Left" === t || "Top" === t ? this.element.insertBefore(e, this.element.getElementsByClassName(lD)[0]) : this.element.appendChild(e), this.element.classList.add("e-spin-" + t.toLowerCase()) }, t.prototype.createProgress = function () { this.element.appendChild(this.createElement("span", { className: "e-progress" })) }, t.prototype.setContent = function () { var e = this.element.innerHTML; this.element.innerHTML = "", this.element.appendChild(this.createElement("span", { className: lD, innerHTML: e })) }, t.prototype.clickHandler = function () { this.element.classList.contains(aD) || this.startProgress() }, t.prototype.startProgress = function (e, t) { var i = this.element.classList, n = i.contains("e-vertical"); i.add(aD), i.contains(sD) || zt(this.element), this.startAnimate(Date.now(), t || 0, t ? Date.now() - 1 * this.duration / 100 : Date.now(), e || 0, 0, this.step, 0, n), this.startContAnimate() }, t.prototype.startAnimate = function (e, t, i, n, r, o, s, a) { var l = this; try { var h = void 0, d = e - i, c = this.duration * o / 100, p = d ? d < c ? d - c : d % c : 0; this.progressTime = t = t + d - p, i = e - p, n += (d - p) / this.duration * 100, h = { percent: r = (t - s) % c == 0 || 100 === n ? n : r, currentDuration: t, step: o }, this.eIsVertical = a, 0 === n ? this.trigger("begin", h, function (e) { l.successCallback(e, n, r, t, s, p, i) }) : 100 === n || t === this.duration ? this.trigger("end", h, function (e) { l.successCallback(e, n, r, t, s, p, i) }) : this.trigger("progress", h, function (e) { l.successCallback(e, n, r, t, s, p, i) }) } catch (e) { cancelAnimationFrame(this.timerId), this.trigger("fail", e) } }, t.prototype.successCallback = function (e, t, i, n, r, o, s) { var a = this, l = t, h = i, d = o, c = n, p = r, u = s, g = this.eIsVertical; l !== e.percent && e.percent !== h && (l = e.percent), this.percent = l, this.step = e.step, (c - p) % (this.duration * e.step / 100) != 0 && 100 !== l || (this.timerId = requestAnimationFrame(function () { a.enableProgress && (a.getProgress().style[g ? "height" : "width"] = l + "%"), a.element.setAttribute("aria-valuenow", l.toString()) }), h = l, p = c), this.isPaused || (c < this.duration && l < 100 ? this.interval = window.setTimeout(function () { a.startAnimate(Date.now(), c, u, l, h, e.step, p, g) }, this.duration / 100 - d) : this.interval = window.setTimeout(function () { a.progressTime = a.percent = 0, a.enableProgress && (a.getProgress().style[g ? "height" : "width"] = "0%"), a.element.setAttribute("aria-valuenow", "0"), a.hideSpin() }, 100)) }, t.prototype.startContAnimate = function () { var e = this, t = this.element.getElementsByClassName(lD)[0]; "None" !== this.animationSettings.effect ? new fw({}).animate(t, { duration: this.animationSettings.duration, name: "Progress" + this.animationSettings.effect, timingFunction: this.animationSettings.easing, begin: function () { "Center" === e.spinSettings.position && e.setSpinnerSize() }, end: function () { t.classList.add("e-animate-end") } }) : "Center" === this.spinSettings.position && this.setSpinnerSize() }, t.prototype.finishProgress = function () { var e = this.element.classList, t = e.contains("e-vertical"); e.add(aD); for (var i, n = this.percent; n < 100; n++)(n += 10) > 100 && (n = 100), this.enableProgress && (this.getProgress().style[t ? "height" : "width"] = this.percent < 100 ? n + "%" : "100%"); this.element.setAttribute("aria-valuenow", "0"), this.hideSpin(), i = { step: this.step, currentDuration: this.progressTime, percent: 100 }, clearTimeout(this.interval), this.trigger("end", i), this.progressTime = this.percent = 0 }, t.prototype.setSpinnerSize = function () { var e = this.element.getElementsByClassName(lD)[0], t = this.getSpinner(); t.style.width = Math.max(t.offsetWidth, e.offsetWidth) + "px", t.style.height = Math.max(t.offsetHeight, e.offsetHeight) + "px", e.classList.add("e-cont-animate") }, t.prototype.hideSpin = function () { var e = this.element.getElementsByClassName(lD)[0]; if (this.element.classList.contains(sD) || Ft(this.element), this.element.classList.remove(aD), "None" !== this.animationSettings.effect && e.classList.remove("e-animate-end"), "Center" === this.spinSettings.position) { var t = this.getSpinner(); e.classList.remove("e-cont-animate"), t.style.width = "auto", t.style.height = "auto" } }, t.prototype.setIconSpan = function () { var e = this.element.getElementsByClassName(lD)[0], t = this.element.getElementsByClassName("e-btn-icon")[0]; !e.childNodes[0] || "Left" !== this.iconPosition && "Top" !== this.iconPosition ? e.appendChild(t) : e.insertBefore(t, e.childNodes[0]) }, t.prototype.setAria = function () { P(this.element, { "aria-label": this.element.textContent + " progress", "aria-valuemin": "0", "aria-valuemax": "100", "aria-valuenow": "0" }) }, t.prototype.wireEvents = function () { Kv.add(this.element, "click", this.clickHandler, this) }, t.prototype.unWireEvents = function () { Kv.remove(this.element, "click", this.clickHandler) }, t.prototype.onPropertyChanged = function (t, i) { var n = this.element; e.prototype.onPropertyChanged.call(this, t, i); for (var r = 0, o = Object.keys(t); r < o.length; r++) { switch (o[r]) { case "content": this.setContent(), this.createSpinner(), this.enableProgress && this.createProgress(), n.setAttribute("aria-label", n.textContent + " progress"); break; case "iconCss": i.iconCss || this.setIconSpan(); break; case "iconPosition": this.setIconSpan(); break; case "enableProgress": t.enableProgress ? this.createProgress() : k(this.getProgress()); break; case "spinSettings": t.spinSettings.position && (n.classList.remove("e-spin-" + i.spinSettings.position.toLowerCase()), this.setSpinPosition(this.getSpinner())), (t.spinSettings.template || t.spinSettings.width) && (n.removeChild(this.getSpinner()), this.createSpinner()) } } }, t.prototype.focusIn = function () { this.element.focus() }, oD([Y(!1)], t.prototype, "enableProgress", void 0), oD([Y(2e3)], t.prototype, "duration", void 0), oD([Y("Left")], t.prototype, "iconPosition", void 0), oD([Y("")], t.prototype, "iconCss", void 0), oD([Y(!1)], t.prototype, "disabled", void 0), oD([Y(!1)], t.prototype, "isPrimary", void 0), oD([Y("")], t.prototype, "cssClass", void 0), oD([Y("")], t.prototype, "content", void 0), oD([Y(!1)], t.prototype, "isToggle", void 0), oD([U({}, hD)], t.prototype, "spinSettings", void 0), oD([U({}, dD)], t.prototype, "animationSettings", void 0), oD([X()], t.prototype, "created", void 0), oD([X()], t.prototype, "begin", void 0), oD([X()], t.prototype, "progress", void 0), oD([X()], t.prototype, "end", void 0), oD([X()], t.prototype, "fail", void 0), t = oD([J], t) }(yL), pD = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), uD = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, gD = "e-ctrl-btn", mD = "e-switch-ctrl-btn", fD = "e-value-switch-btn", yD = "e-hide-hex-value", vD = "e-hide-opacity", wD = "e-hide-switchable-value", bD = "e-hide-value", CD = "e-hide-valueswitcher", LD = "e-hsv-color", MD = "e-selected-value", SD = "e-mode-switch-btn", xD = "e-nocolor-item", TD = "e-opacity-value", DD = "e-palette", AD = "e-color-palette", ED = "e-color-picker", jD = "e-preview-container", ID = "e-previous", kD = "e-show-value", PD = "e-selected", ND = "e-split-preview", OD = ["#000000", "#f44336", "#e91e63", "#9c27b0", "#673ab7", "#2196f3", "#03a9f4", "#00bcd4", "#009688", "#ffeb3b", "#ffffff", "#ffebee", "#fce4ec", "#f3e5f5", "#ede7f6", "#e3f2fd", "#e1f5fe", "#e0f7fa", "#e0f2f1", "#fffde7", "#f2f2f2", "#ffcdd2", "#f8bbd0", "#e1bee7", "#d1c4e9", "#bbdefb", "#b3e5fc", "#b2ebf2", "#b2dfdb", "#fff9c4", "#e6e6e6", "#ef9a9a", "#f48fb1", "#ce93d8", "#b39ddb", "#90caf9", "#81d4fa", "#80deea", "#80cbc4", "#fff59d", "#cccccc", "#e57373", "#f06292", "#ba68c8", "#9575cd", "#64b5f6", "#4fc3f7", "#4dd0e1", "#4db6ac", "#fff176", "#b3b3b3", "#ef5350", "#ec407a", "#ab47bc", "#7e57c2", "#42a5f5", "#29b6f6", "#26c6da", "#26a69a", "#ffee58", "#999999", "#e53935", "#d81b60", "#8e24aa", "#5e35b1", "#1e88e5", "#039be5", "#00acc1", "#00897b", "#fdd835", "#808080", "#d32f2f", "#c2185b", "#7b1fa2", "#512da8", "#1976d2", "#0288d1", "#0097a7", "#00796b", "#fbc02d", "#666666", "#c62828", "#ad1457", "#6a1b9a", "#4527a0", "#1565c0", "#0277bd", "#00838f", "#00695c", "#f9a825", "#4d4d4d", "#b71c1c", "#880e4f", "#4a148c", "#311b92", "#0d47a1", "#01579b", "#006064", "#004d40", "#f57f17"], RD = function (e) { function t(t, i) { return e.call(this, t, i) || this } return pD(t, e), t.prototype.preRender = function () { var e = this.element; this.formElement = R(this.element, "form"), this.formElement && Kv.add(this.formElement, "reset", this.formResetHandler, this); this.l10n = new pb("colorpicker", { Apply: "Apply", Cancel: "Cancel", ModeSwitcher: "Switch Mode" }, this.locale), e.getAttribute("ejs-for") && !e.getAttribute("name") && e.setAttribute("name", e.id) }, t.prototype.render = function () { this.initWrapper(), this.inline ? this.createWidget() : this.createSplitBtn(), this.enableOpacity || S([this.container.parentElement], vD) }, t.prototype.initWrapper = function () { var e = this.createElement("div", { className: "e-" + this.getModuleName() + "-wrapper" }); this.element.parentNode.insertBefore(e, this.element), e.appendChild(this.element), P(this.element, { tabindex: "-1", spellcheck: "false" }), this.container = this.createElement("div", { className: "e-container" }), this.getWrapper().appendChild(this.container); var t = this.value ? this.roundValue(this.value).toLowerCase() : "#008000ff", i = t.slice(0, 7); d(this.initialInputValue) && (this.initialInputValue = i), this.element.value = i, this.setProperties({ value: t }, !0), this.enableRtl && e.classList.add("e-rtl"), this.cssClass && S([e], this.cssClass.split(" ")), this.tileRipple = ee(this.container, { selector: ".e-tile" }), this.ctrlBtnRipple = ee(this.container, { selector: ".e-btn" }) }, t.prototype.getWrapper = function () { return this.element.parentElement }, t.prototype.createWidget = function () { "Palette" === this.mode ? (this.createPalette(), this.inline || this.firstPaletteFocus()) : (this.createPicker(), this.inline || this.getDragHandler().focus()), this.isRgb = !0, this.createInput(), this.createCtrlBtn(), this.disabled || this.wireEvents(), this.inline && this.disabled && this.toggleDisabled(!0), uw.isDevice && this.refreshPopupPos() }, t.prototype.createSplitBtn = function () { var e = this, t = this.createElement("button", { className: "e-split-colorpicker" }); this.getWrapper().appendChild(t), this.splitBtn = new iD({ iconCss: "e-selected-color", target: this.container, disabled: this.disabled, enableRtl: this.enableRtl, open: this.onOpen.bind(this), beforeOpen: this.beforeOpenFn.bind(this), beforeClose: this.beforePopupClose.bind(this), click: function (t) { e.trigger("change", { currentValue: { hex: e.value.slice(0, 7), rgba: e.convertToRgbString(e.hexToRgb(e.value)) }, previousValue: { hex: null, rgba: null }, value: e.value }) } }), this.splitBtn.createElement = this.createElement, this.splitBtn.appendTo(t); var i = this.createElement("span", { className: ND }); N(".e-selected-color", t).appendChild(i), i.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value)); var n = this.getPopupEle(); if (S([n], "e-colorpicker-popup"), this.cssClass && S([n], this.cssClass.split(" ")), uw.isDevice) { var r = this.getPopupInst(); r.relateTo = document.body, r.position = { X: "center", Y: "center" }, r.targetType = "container", r.collision = { X: "fit", Y: "fit" }, r.offsetY = 4, n.style.zIndex = ht(this.splitBtn.element).toString() } }, t.prototype.onOpen = function (e) { this.trigger("open", { element: this.container }) }, t.prototype.getPopupInst = function () { return C(this.getPopupEle(), yM) }, t.prototype.beforeOpenFn = function (e) { var t = this, i = { element: this.container, event: e.event, cancel: !1 }; this.trigger("beforeOpen", i, function (i) { if (e.cancel = i.cancel, !i.cancel) { var n = t.getPopupEle(); n.style.top = v(0 + pageYOffset), n.style.left = v(0 + pageXOffset), n.style.display = "block", t.createWidget(), n.style.display = "", uw.isDevice && (t.modal = t.createElement("div"), t.modal.className = "e-" + t.getModuleName() + " e-modal", t.modal.style.display = "none", document.body.insertBefore(t.modal, n), document.body.className += " e-colorpicker-overflow", t.modal.style.display = "block", t.modal.style.zIndex = (Number(n.style.zIndex) - 1).toString()) } }) }, t.prototype.beforePopupClose = function (e) { var t = this; if (!d(e.event)) { var i = { element: this.container, event: e.event, cancel: !1 }; this.trigger("beforeClose", i, function (i) { uw.isDevice && e.event.target === t.modal && (i.cancel = !0), e.cancel = i.cancel, i.cancel || t.onPopupClose() }) } }, t.prototype.onPopupClose = function () { this.unWireEvents(), this.destroyOtherComp(), this.container.style.width = "", N("." + ND, this.splitBtn.element).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value)), this.container.innerHTML = "", x([this.container], [ED, AD]), uw.isDevice && this.modal && (x([document.body], "e-colorpicker-overflow"), this.modal.style.display = "none", this.modal.outerHTML = "", this.modal = null) }, t.prototype.createPalette = function () { if (B(this.container, [AD], [ED]), this.presetColors) { var e = this.createElement("div", { className: "e-custom-palette" }); this.appendElement(e); var t = Object.keys(this.presetColors); if (1 === t.length) this.appendPalette(this.presetColors[t[0]], t[0], e); else for (var i = 0, n = t.length; i < n; i++)this.appendPalette(this.presetColors[t[i]], t[i], e); O(".e-row", e).length > 10 && S([e], "e-palette-group") } else this.appendPalette(OD, "default"); "Palette" === this.mode && !this.modeSwitcher && this.noColor && this.setNoColor(); var r = parseInt(getComputedStyle(this.container).borderBottomWidth, 10); this.container.style.width = v(this.container.children[0].offsetWidth + r + r), this.rgb = this.hexToRgb(this.roundValue(this.value)), this.hsv = this.rgbToHsv.apply(this, this.rgb) }, t.prototype.firstPaletteFocus = function () { N("." + PD, this.container.children[0]) || O("." + DD, this.container)[0].focus() }, t.prototype.appendPalette = function (e, t, i) { var n = this.createElement("div", { className: DD, attrs: { tabindex: "0" } }); i ? i.appendChild(n) : this.appendElement(n); for (var r, o, s, a = 0, l = e.length; a < l; a++)0 !== a && a % this.columns != 0 || (r = this.createElement("div", { className: "e-row", attrs: { role: "row" } }), n.appendChild(r)), s = this.roundValue(e[a]).toLowerCase(), o = this.createElement("span", { className: "e-tile", attrs: { role: "gridcell", "aria-label": s, "aria-selected": "false" } }), this.trigger("beforeTileRender", { element: o, presetName: t, value: e[a] }), r.appendChild(o), this.value === s && (this.addTileSelection(o), n.focus()), o.style.backgroundColor = this.convertToRgbString(this.hexToRgb(s)) }, t.prototype.setNoColor = function () { var e = this.container.querySelector(".e-row").children[0]; e.classList.add(xD), this.value || (e.classList.add(PD), R(e, "." + DD).focus()), ["aria-selected", "aria-label"].forEach(function (t) { e.removeAttribute(t) }), e.style.backgroundColor = "" }, t.prototype.appendElement = function (e, t) { void 0 === t && (t = 0); var i = this.container.children[t]; i ? this.container.insertBefore(e, i) : this.container.appendChild(e) }, t.prototype.addTileSelection = function (e) { e.classList.add(PD), e.setAttribute("aria-selected", "true") }, t.prototype.createPicker = function () { B(this.container, [ED], [AD]); var e = this.createElement("div", { className: "e-hsv-container" }); this.appendElement(e), e.appendChild(this.createElement("div", { className: LD })); var t = this.createElement("span", { className: "e-handler", attrs: { tabindex: "0" } }); e.appendChild(t), this.rgb = this.hexToRgb(this.value), this.hsv = this.rgbToHsv.apply(this, this.rgb), this.setHsvContainerBg(), this.setHandlerPosition(), this.createSlider(), this.createDragTooltip() }, t.prototype.setHsvContainerBg = function (e) { void 0 === e && (e = this.hsv[0]), this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(e, 100, 100, 1)) }, t.prototype.getHsvContainer = function () { return N(".e-hsv-container", this.container) }, t.prototype.setHandlerPosition = function () { var e = this.getDragHandler(), t = N("." + LD, this.container); this.enableRtl ? e.style.left = v(t.offsetWidth * Math.abs(100 - this.hsv[1]) / 100) : e.style.left = v(t.offsetWidth * this.hsv[1] / 100), e.style.top = v(t.offsetHeight * (100 - this.hsv[2]) / 100) }, t.prototype.createSlider = function () { var e = this.createElement("div", { className: "e-slider-preview" }); this.appendElement(e, 1), this.createPreview(e); var t = this.createElement("div", { className: "e-colorpicker-slider" }); e.insertBefore(t, e.children[0]); var i = this.createElement("div", { className: "e-hue-slider" }); t.appendChild(i), this.hueSlider = new oT({ value: this.hsv[0], min: 0, max: 359, enableRtl: this.enableRtl, enabled: !this.disabled, change: this.hueChange.bind(this) }), this.hueSlider.createElement = this.createElement, this.hueSlider.appendTo(i), this.enableOpacity && (i = this.createElement("div", { className: "e-opacity-slider" }), t.appendChild(i), this.createOpacitySlider(i)) }, t.prototype.createOpacitySlider = function (e) { this.opacitySlider = new oT({ value: 100 * this.rgb[3], min: 0, max: 100, enableRtl: this.enableRtl, enabled: !this.disabled, change: this.opacityChange.bind(this) }), this.opacitySlider.createElement = this.createElement, this.opacitySlider.appendTo(e); var t = this.createElement("div", { className: "e-opacity-empty-track" }); e.appendChild(t), this.updateOpacitySliderBg() }, t.prototype.updateOpacitySliderBg = function () { var e = this.enableRtl ? "to left" : "to right"; N(".e-slider-track", this.opacitySlider.element).style.background = "linear-gradient(" + e + ", rgba(" + this.rgb.slice(0, 3) + ", 0) 0%, " + this.convertToRgbString(this.rgb.slice(0, 3)) + " 100%)" }, t.prototype.hueChange = function (e) { this.hsv[0] = e.value, this.setHsvContainerBg(), this.convertToOtherFormat() }, t.prototype.opacityChange = function (e) { var t = e.value, i = this.rgbToHex(this.rgb); this.hsv[3] = t / 100, this.rgb[3] = t / 100; var n = this.rgbToHex(this.rgb); this.updateOpacityInput(t); var r = this.convertToRgbString(this.rgb); this.updatePreview(r), this.triggerEvent(n, i, r) }, t.prototype.updateOpacityInput = function (e) { if (!this.getWrapper().classList.contains(bD)) { var t = C(N("." + TD, this.container), WS); t.value = e, t.dataBind() } }, t.prototype.createPreview = function (e) { var t = this.createElement("div", { className: jD }); e.appendChild(t); var i = this.createElement("span", { className: "e-preview e-current" }); t.appendChild(i); var n = this.convertToRgbString(this.rgb); i.style.backgroundColor = n, i = this.createElement("span", { className: "e-preview " + ID }), t.appendChild(i), i.style.backgroundColor = n }, t.prototype.isPicker = function () { return !this.container.classList.contains(AD) }, t.prototype.getPopupEle = function () { return this.container.parentElement }, t.prototype.createNumericInput = function (e, t, i, n) { var r = this, o = new WS({ value: t, placeholder: i, min: 0, max: n, format: "###.##", showSpinButton: !1, floatLabelType: "Always", enableRtl: this.enableRtl, enabled: !this.disabled, readonly: !this.isPicker(), change: function (e) { e.event && r.inputHandler(e.event) } }); o.createElement = this.createElement, o.appendTo(e) }, t.prototype.createInput = function () { var e = this.isPicker(), t = this.getWrapper(); if (e && !t.classList.contains(bD) || !e && t.classList.contains(kD)) { var i = this.createElement("div", { className: MD }); e ? this.appendElement(i, 2) : this.appendElement(i, 1); var n = this.createElement("div", { className: "e-input-container" }); if (i.appendChild(n), t.classList.contains(CD) || this.appendValueSwitchBtn(i), !t.classList.contains(yD)) { var r = this.createElement("input", { className: "e-hex", attrs: { maxlength: "7", spellcheck: "false" } }); n.appendChild(r), eS.createInput({ element: r, floatLabelType: "Always", properties: { placeholder: "HEX", enableRtl: this.enableRtl, enabled: !this.disabled, readonly: !this.isPicker() } }, this.createElement), eS.setValue(this.value.slice(0, 7), r), r.addEventListener("input", this.inputHandler.bind(this)) } if (!t.classList.contains(wD)) { var o = void 0, s = void 0; this.isRgb ? (o = "RGB", s = this.rgb) : (o = "HSV", s = this.hsv); for (var a = ["rh", "gs", "bv"], l = 0; l < 3; l++)this.createNumericInput(n.appendChild(this.createElement("input", { className: "e-" + a[l] + "-value" })), s[l], o[l], 255); this.enableOpacity && this.appendOpacityValue(n) } } }, t.prototype.appendOpacityValue = function (e) { this.createNumericInput(e.appendChild(this.createElement("input", { className: TD })), 100 * this.rgb[3], "A", 100) }, t.prototype.appendValueSwitchBtn = function (e) { var t = this.createElement("button", { className: "e-icons e-css e-btn e-flat e-icon-btn " + fD }); e.appendChild(t), this.isPicker() && !this.getWrapper().classList.contains(wD) && t.addEventListener("click", this.formatSwitchHandler.bind(this)) }, t.prototype.createCtrlBtn = function () { if (this.modeSwitcher || this.showButtons) { this.l10n.setLocale(this.locale); var e = this.createElement("div", { className: mD }); if (this.container.appendChild(e), this.showButtons) { var t = this.createElement("div", { className: gD }); e.appendChild(t); var i = this.l10n.getConstant("Apply"); t.appendChild(this.createElement("button", { innerHTML: i, className: "e-btn e-css e-flat e-primary e-small e-apply", attrs: { title: i } })); var n = this.l10n.getConstant("Cancel"); t.appendChild(this.createElement("button", { innerHTML: n, className: "e-btn e-css e-flat e-small e-cancel", attrs: { title: n } })) } this.modeSwitcher && this.appendModeSwitchBtn() } }, t.prototype.appendModeSwitchBtn = function () { var e = this.createElement("button", { className: "e-icons e-btn e-flat e-icon-btn " + SD, attrs: { title: this.l10n.getConstant("ModeSwitcher") } }); N("." + mD, this.container).insertBefore(e, N("." + gD, this.container)) }, t.prototype.createDragTooltip = function () { var e = this, t = new cS({ opensOn: "Custom", showTipPointer: !1, cssClass: "e-color-picker-tooltip", beforeOpen: function (t) { e.tooltipEle = t.element }, animation: { open: { effect: "None" }, close: { effect: "None" } } }); t.createElement = this.createElement, t.appendTo(this.container), t.open(this.container), this.tooltipEle.style.zIndex = ht(this.tooltipEle).toString(), N(".e-tip-content", this.tooltipEle).appendChild(this.createElement("div", { className: "e-tip-transparent" })) }, t.prototype.getTooltipInst = function () { return C(this.container, cS) }, t.prototype.setTooltipOffset = function (e) { this.getTooltipInst().offsetY = e }, t.prototype.toggleDisabled = function (e) { e ? this.getWrapper().classList.add("e-disabled") : this.getWrapper().classList.remove("e-disabled"), this.showButtons && [].slice.call(O(".e-btn", this.container)).forEach(function (t) { e ? P(t, { disabled: "" }) : t.removeAttribute("disabled") }) }, t.prototype.convertToRgbString = function (e) { return e.length ? 4 === e.length ? "rgba(" + e.join() + ")" : "rgb(" + e.join() + ")" : "" }, t.prototype.convertToHsvString = function (e) { return 4 === e.length ? "hsva(" + e.join() + ")" : "hsv(" + e.join() + ")" }, t.prototype.updateHsv = function () { this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1], this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2], this.setHandlerPosition() }, t.prototype.convertToOtherFormat = function (e) { void 0 === e && (e = !1); var t = this.rgbToHex(this.rgb); this.rgb = this.hsvToRgb.apply(this, this.hsv); var i = this.rgbToHex(this.rgb), n = this.convertToRgbString(this.rgb); this.updatePreview(n), this.updateInput(i), this.triggerEvent(i, t, n, e) }, t.prototype.updateInput = function (e) { var t = this.getWrapper(); t.classList.contains(bD) || (t.classList.contains(yD) || eS.setValue(e.substr(0, 7), N(".e-hex", this.container)), t.classList.contains(wD) || (this.isRgb ? this.updateValue(this.rgb, !1) : this.updateValue(this.hsv, !1))) }, t.prototype.updatePreview = function (e) { this.enableOpacity && this.updateOpacitySliderBg(), N(".e-tip-transparent", this.tooltipEle).style.backgroundColor = e, N("." + jD + " .e-current", this.container).style.backgroundColor = e, N("." + jD + " ." + ID, this.container).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value)) }, t.prototype.getDragHandler = function () { return N(".e-handler", this.container) }, t.prototype.removeTileSelection = function () { [].slice.call(O("." + PD, this.container.children[0])).forEach(function (e) { e.classList.remove(PD), e.setAttribute("aria-selected", "false") }) }, t.prototype.convertRgbToNumberArray = function (e) { return e.slice(e.indexOf("(") + 1, e.indexOf(")")).split(",").map(function (e, t) { return 3 !== t ? parseInt(e, 10) : parseFloat(e) }) }, t.prototype.getValue = function (e, t) { if (e || (e = this.value), t = t ? t.toLowerCase() : "hex", "r" === e[0]) { var i = this.convertRgbToNumberArray(e); if ("hex" === t || "hexa" === t) { var n = this.rgbToHex(i); return "hex" === t ? n.slice(0, 7) : n } return "hsv" === t ? this.convertToHsvString(this.rgbToHsv.apply(this, i.slice(0, 3))) : "hsva" === t ? this.convertToHsvString(this.rgbToHsv.apply(this, i)) : "null" } if ("h" === e[0]) { i = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(e)); if ("rgba" === t) return this.convertToRgbString(i); if ("hex" === t || "hexa" === t) { n = this.rgbToHex(i); return "hex" === t ? n.slice(0, 7) : n } return "rgb" === t ? this.convertToRgbString(i.slice(0, 3)) : "null" } e = this.roundValue(e); var r = this.hexToRgb(e); return "rgb" !== t && "hsv" !== t || (r = r.slice(0, 3)), "rgba" === t || "rgb" === t ? this.convertToRgbString(r) : "hsva" === t || "hsv" === t ? this.convertToHsvString(this.rgbToHsv.apply(this, r)) : "hex" === t ? e.slice(0, 7) : "a" === t ? r[3].toString() : "null" }, t.prototype.toggle = function () { this.container.parentElement.classList.contains("e-popup-close") ? this.splitBtn.toggle() : this.closePopup(null) }, t.prototype.getModuleName = function () { return "colorpicker" }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.wireEvents = function () { if (this.isPicker()) { var e = this.getDragHandler(); Kv.add(e, "keydown", this.pickerKeyDown, this), Kv.add(this.getHsvContainer(), "mousedown touchstart", this.handlerDown, this), (this.modeSwitcher || this.showButtons) && this.addCtrlSwitchEvent(), Kv.add(N("." + ID, this.container), "click", this.previewHandler, this) } else Kv.add(this.container, "click", this.paletteClickHandler, this), Kv.add(this.container, "keydown", this.paletteKeyDown, this) }, t.prototype.formResetHandler = function () { this.value = this.initialInputValue, P(this.element, { value: this.initialInputValue }) }, t.prototype.addCtrlSwitchEvent = function () { Kv.add(N("." + mD, this.container), "click", this.btnClickHandler, this) }, t.prototype.pickerKeyDown = function (e) { switch (e.keyCode) { case 39: this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e); break; case 37: this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e); break; case 38: this.handlerDragPosition(2, 1, e); break; case 40: this.handlerDragPosition(2, -1, e); break; case 13: e.preventDefault(); var t = this.rgbToHex(this.rgb); this.enterKeyHandler(t, e) } }, t.prototype.enterKeyHandler = function (e, t) { this.triggerChangeEvent(e), this.inline || (this.closePopup(t), this.splitBtn.element.focus()) }, t.prototype.closePopup = function (e) { var t = this, i = { element: this.container, event: e, cancel: !1 }; this.trigger("beforeClose", i, function (e) { e.cancel || (t.splitBtn.toggle(), t.onPopupClose()) }) }, t.prototype.triggerChangeEvent = function (e) { var t = e.slice(0, 7); this.trigger("change", { currentValue: { hex: t, rgba: this.convertToRgbString(this.rgb) }, previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) }, value: e }), this.setProperties({ value: e }, !0), this.element.value = t || "#000000" }, t.prototype.handlerDragPosition = function (e, t, i) { i.preventDefault(), this.hsv[e] += t * (i.ctrlKey ? 1 : 3), this.hsv[e] < 0 && (this.hsv[e] = 0), this.updateHsv(), this.convertToOtherFormat(!0) }, t.prototype.handlerDown = function (e) { e.preventDefault(), "mousedown" === e.type ? (this.clientX = Math.abs(e.pageX - pageXOffset), this.clientY = Math.abs(e.pageY - pageYOffset), this.setTooltipOffset(8)) : (this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset), this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset), this.setTooltipOffset(-8)), this.setHsv(this.clientX, this.clientY), this.getDragHandler().style.transition = "left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)", this.updateHsv(), this.convertToOtherFormat(), this.getDragHandler().focus(), Kv.add(document, "mousemove touchmove", this.handlerMove, this), Kv.add(document, "mouseup touchend", this.handlerEnd, this) }, t.prototype.handlerMove = function (e) { "touchmove" !== e.type && e.preventDefault(); var t, i; "mousemove" === e.type ? (t = Math.abs(e.pageX - pageXOffset), i = Math.abs(e.pageY - pageYOffset)) : (t = Math.abs(e.changedTouches[0].pageX - pageXOffset), i = Math.abs(e.changedTouches[0].pageY - pageYOffset)), this.setHsv(t, i); var n = this.getDragHandler(); parseInt(n.style.left, 10), parseInt(n.style.top, 10); this.updateHsv(), this.convertToOtherFormat(), this.getTooltipInst().refresh(n), this.tooltipEle.style.transform || (Math.abs(this.clientX - t) > 8 || Math.abs(this.clientY - i) > 8) && (N("." + LD, this.container).style.cursor = "pointer", n.style.transition = "none", this.inline || (this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString()), this.tooltipEle.style.transform = "rotate(45deg)", n.classList.add("e-hide-handler")) }, t.prototype.setHsv = function (e, t) { var i = N("." + LD, this.container), n = i.getBoundingClientRect(); e = this.enableRtl ? e > n.right ? 0 : Math.abs(e - n.right) : e > n.left ? Math.abs(e - n.left) : 0, t = t > n.top ? Math.abs(t - n.top) : 0, this.hsv[2] = Math.round(10 * Number(100 * (i.offsetHeight - Math.max(0, Math.min(i.offsetHeight, t - i.offsetTop))) / i.offsetHeight)) / 10, this.hsv[1] = Math.round(10 * Number(100 * Math.max(0, Math.min(i.offsetWidth, e - i.offsetLeft)) / i.offsetWidth)) / 10 }, t.prototype.handlerEnd = function (e) { "touchend" !== e.type && e.preventDefault(), Kv.remove(document, "mousemove touchmove", this.handlerMove), Kv.remove(document, "mouseup touchend", this.handlerEnd); var t = this.getDragHandler(); N("." + LD, this.container).style.cursor = "", this.tooltipEle.style.transform && (this.tooltipEle.style.transform = "", t.classList.remove("e-hide-handler")), this.inline || this.showButtons || this.closePopup(e) }, t.prototype.btnClickHandler = function (e) { var t = e.target; R(t, "." + SD) ? (e.stopPropagation(), this.switchToPalette()) : (t.classList.contains("e-apply") || t.classList.contains("e-cancel")) && this.ctrlBtnClick(t, e) }, t.prototype.switchToPalette = function () { this.trigger("beforeModeSwitch", { element: this.container, mode: "Palette" }), this.unWireEvents(), this.destroyOtherComp(), I(N(".e-slider-preview", this.container)), this.getWrapper().classList.contains(bD) || k(N("." + MD, this.container)), I(this.getHsvContainer()), this.createPalette(), this.firstPaletteFocus(), this.createInput(), this.refreshPopupPos(), this.wireEvents() }, t.prototype.refreshPopupPos = function () { if (!this.inline) { var e = this.getPopupEle(); e.style.left = v(0 + pageXOffset), e.style.top = v(0 + pageYOffset), this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement) } }, t.prototype.formatSwitchHandler = function (e) { e.target.parentElement; this.isRgb ? (this.updateValue(this.hsv, !0, 3, [360, 100, 100]), this.isRgb = !1) : (this.updateValue(this.rgb, !0, 2), this.isRgb = !0) }, t.prototype.updateValue = function (e, t, i, n) { for (var r, o = ["e-rh-value", "e-gs-value", "e-bv-value"], s = 0, a = o.length; s < a; s++)(r = C(N("." + o[s], this.container), WS)).value = Math.round(e[s]), t && (r.placeholder = o[s].substr(i, 1).toUpperCase(), r.max = n ? n[s] : 255), r.dataBind() }, t.prototype.previewHandler = function (e) { var t = e.target, i = this.rgbToHex(this.rgb); this.rgb = this.convertRgbToNumberArray(t.style.backgroundColor), this.rgb[3] || (this.rgb[3] = 1); var n = this.rgbToHex(this.rgb), r = this.rgbToHsv.apply(this, this.rgb); r[0] !== this.hsv[0] && (this.hueSlider.setProperties({ value: r[0] }, !0), this.hueSlider.refresh()), this.setHsvContainerBg(r[0]), this.enableOpacity && r[3] !== this.hsv[3] && (this.opacitySlider.setProperties({ value: 100 * r[3] }, !0), this.opacitySlider.refresh(), this.updateOpacitySliderBg()), this.hsv = r, this.setHandlerPosition(), this.updateInput(n), N("." + jD + " .e-current", this.container).style.backgroundColor = this.convertToRgbString(this.rgb), this.triggerEvent(n, i, this.convertToRgbString(this.rgb)) }, t.prototype.paletteClickHandler = function (e) { e.preventDefault(); var t = e.target; if (t.classList.contains("e-tile")) { if (this.removeTileSelection(), this.addTileSelection(t), t.classList.contains(xD)) this.noColorTile(); else { var i = t.getAttribute("aria-label"), n = this.rgbToHex(this.rgb); this.rgb = this.hexToRgb(this.roundValue(i)), this.hsv = this.rgbToHsv.apply(this, this.rgb), this.getWrapper().classList.contains(kD) && this.updateInput(i), this.triggerEvent(i, n, this.convertToRgbString(this.rgb)) } this.inline || this.showButtons || this.closePopup(e) } else R(t, "." + SD) ? this.switchToPicker() : t.classList.contains("e-apply") || t.classList.contains("e-cancel") ? this.ctrlBtnClick(t, e) : this.getWrapper().classList.contains(kD) && R(t, "." + fD) && this.formatSwitchHandler(e) }, t.prototype.noColorTile = function (e) { void 0 === e && (e = !1); var t = this.rgbToHex(this.rgb); this.rgb = [], this.hsv = [], this.triggerEvent("", t, "", e) }, t.prototype.switchToPicker = function () { var e = this.getWrapper(); this.trigger("beforeModeSwitch", { element: this.container, mode: "Picker" }), this.unWireEvents(), [].slice.call(O("." + DD, this.container)).forEach(function (e) { I(e) }), e.classList.contains(kD) && I(N("." + MD, this.container)), this.container.style.width = ""; var t = N(".e-custom-palette", this.container); this.presetColors && k(t), this.createPicker(), this.getDragHandler().focus(), this.createInput(), this.refreshPopupPos(), this.wireEvents() }, t.prototype.ctrlBtnClick = function (e, t) { if (e.classList.contains("e-apply")) { var i = this.rgbToHex(this.rgb); this.triggerChangeEvent(i) } this.inline || (this.closePopup(t), this.splitBtn.element.focus()) }, t.prototype.paletteKeyDown = function (e) { var t = e.target; if (t.classList.contains(DD)) { var i, n, r = [].slice.call(O(".e-tile", t)), o = r.filter(function (e) { return e.classList.contains("e-selected") }).pop(); switch (!e.altKey && e.keyCode) { case 39: e.preventDefault(), i = o ? r[this.tilePosition(r, o, this.enableRtl ? -1 : 1)] : r[this.enableRtl ? r.length - 1 : 0], this.keySelectionChanges(i); break; case 37: e.preventDefault(), i = o ? r[this.tilePosition(r, o, this.enableRtl ? 1 : -1)] : r[this.enableRtl ? 0 : r.length - 1], this.keySelectionChanges(i); break; case 38: e.preventDefault(), i = r[n = o ? this.tilePosition(r, o, -this.columns) : 0] ? r[n] : r[n - this.columns], this.keySelectionChanges(i); break; case 40: e.preventDefault(), r[n = o ? this.tilePosition(r, o, this.columns) : r.length - 1] ? i = r[n] : (n %= r.length, i = r[n += r[r.length - 1].parentElement.childElementCount]), this.keySelectionChanges(i); break; case 13: if (e.preventDefault(), o) { var s = o.getAttribute("aria-label"); this.enterKeyHandler(s || "", e) } } } }, t.prototype.keySelectionChanges = function (e) { if (this.removeTileSelection(), this.addTileSelection(e), e.classList.contains(xD)) this.noColorTile(!0); else { var t = e.getAttribute("aria-label"), i = this.rgbToHex(this.rgb); this.rgb = this.hexToRgb(t), this.hsv = this.rgbToHsv.apply(this, this.rgb), this.getWrapper().classList.contains(kD) && this.updateInput(t), this.triggerEvent(t, i, this.convertToRgbString(this.rgb), !0) } }, t.prototype.tilePosition = function (e, t, i) { var n = (e = Array.prototype.slice.call(e)).length, r = this.columns - e[n - 1].parentElement.childElementCount, o = e.indexOf(t); return (o += i) < 0 ? o += n + r : o %= n + r, o }, t.prototype.inputHandler = function (e) { var t = e.target; if (t.value.length) { var i, n; switch (N(".e-float-text", t.parentElement).textContent) { case "HEX": var r = ""; if (("#" === t.value[0] && 5 !== t.value.length || "#" !== t.value[0] && 4 !== t.value.length) && (r = this.roundValue(t.value)), 9 !== r.length) return; n = this.rgbToHex(this.rgb), this.rgb = this.hexToRgb(r + r.substr(-2)), this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), n, t.value); break; case "R": this.rgb[0] !== Number(t.value) && (n = this.rgbToHex(this.rgb), this.rgb[0] = Number(t.value), i = this.rgbToHsv.apply(this, this.rgb), this.inputValueChange(i, n)); break; case "G": this.rgb[1] !== Number(t.value) && (n = this.rgbToHex(this.rgb), this.rgb[1] = Number(t.value), i = this.rgbToHsv.apply(this, this.rgb), this.inputValueChange(i, n)); break; case "B": this.rgb[2] !== Number(t.value) && (n = this.rgbToHex(this.rgb), this.rgb[2] = Number(t.value), i = this.rgbToHsv.apply(this, this.rgb), this.inputValueChange(i, n)); break; case "H": this.hueSlider.value = Number(t.value); break; case "S": this.hsv[1] !== Number(t.value) && (this.hsv[1] = Number(t.value), this.updateHsv(), this.convertToOtherFormat()); break; case "V": this.hsv[2] !== Number(t.value) && (this.hsv[2] = Number(t.value), this.updateHsv(), this.convertToOtherFormat()); break; case "A": this.opacitySlider.value = Number(t.value) } } }, t.prototype.inputValueChange = function (e, t, i) { e[0] !== this.hsv[0] && (this.hueSlider.setProperties({ value: e[0] }, !0), this.hueSlider.refresh(), this.setHsvContainerBg(e[0])), this.hsv = e; var n = this.rgbToHex(this.rgb); this.setHandlerPosition(), this.updateInput(i || n); var r = this.convertToRgbString(this.rgb); this.updatePreview(r), this.triggerEvent(n, t, r) }, t.prototype.triggerEvent = function (e, t, i, n) { void 0 === n && (n = !1); var r = e.slice(0, 7); this.showButtons || n ? this.trigger("select", { currentValue: { hex: r, rgba: i }, previousValue: { hex: t.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(t)) } }) : (this.trigger("change", { currentValue: { hex: r, rgba: i }, previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) }, value: e }), this.setProperties({ value: e }, !0), this.element.value = r || "#000000") }, t.prototype.destroy = function () { var t = this, i = this.getWrapper(); e.prototype.destroy.call(this), ["tabindex", "spellcheck"].forEach(function (e) { t.element.removeAttribute(e) }), this.inline ? (this.unWireEvents(), this.destroyOtherComp()) : (this.isPopupOpen() && (this.unWireEvents(), this.destroyOtherComp()), this.splitBtn.destroy(), this.splitBtn = null), this.tileRipple(), this.tileRipple = null, this.ctrlBtnRipple(), this.ctrlBtnRipple = null, I(this.element.nextElementSibling), i.parentElement.insertBefore(this.element, i), I(i), this.container = null, this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler) }, t.prototype.destroyOtherComp = function () { if (this.isPicker()) { this.hueSlider.destroy(), this.enableOpacity && (this.opacitySlider.destroy(), this.opacitySlider = null), this.hueSlider = null; var e = this.getTooltipInst(); e.close(), e.destroy(), this.tooltipEle = null } }, t.prototype.isPopupOpen = function () { return this.getPopupEle().classList.contains("e-popup-open") }, t.prototype.unWireEvents = function () { if (this.isPicker()) { this.getWrapper(); var e = this.getDragHandler(); Kv.remove(e, "keydown", this.pickerKeyDown), Kv.remove(this.getHsvContainer(), "mousedown touchstart", this.handlerDown), (this.modeSwitcher || this.showButtons) && Kv.remove(N("." + mD, this.container), "click", this.btnClickHandler), Kv.remove(N("." + ID, this.container), "click", this.previewHandler) } else Kv.remove(this.container, "click", this.paletteClickHandler), Kv.remove(this.container, "keydown", this.paletteKeyDown) }, t.prototype.roundValue = function (e) { if (!e) return ""; "#" !== e[0] && (e = "#" + e); var t = e.length; if (4 === t && (e += "f", t = 5), 5 === t) { for (var i = "", n = 1, r = e.length; n < r; n++)i += e.charAt(n) + e.charAt(n); e = "#" + i, t = 9 } return 7 === t && (e += "ff"), e }, t.prototype.hexToRgb = function (e) { if (!e) return []; 9 !== (e = e.trim()).length && (e = this.roundValue(e)); var t = Number((parseInt(e.slice(-2), 16) / 255).toFixed(2)); e = e.slice(1, 7); var i = parseInt(e, 16), n = []; return n.push(i >> 16 & 255), n.push(i >> 8 & 255), n.push(255 & i), n.push(t), n }, t.prototype.rgbToHsv = function (e, t, i, n) { if (this.rgb && !this.rgb.length) return []; e /= 255, t /= 255, i /= 255; var r, o, s = Math.max(e, t, i), a = Math.min(e, t, i), l = s, h = s - a; if (o = 0 === s ? 0 : h / s, s === a) r = 0; else { switch (s) { case e: r = (t - i) / h + (t < i ? 6 : 0); break; case t: r = (i - e) / h + 2; break; case i: r = (e - t) / h + 4 }r /= 6 } var c = [Math.round(360 * r), Math.round(1e3 * o) / 10, Math.round(1e3 * l) / 10]; return d(n) || c.push(n), c }, t.prototype.hsvToRgb = function (e, t, i, n) { var r, o, s, a, l, h, c, p; if (t /= 100, i /= 100, 0 === t) return r = o = s = i, [Math.round(255 * r), Math.round(255 * o), Math.round(255 * s), n]; switch (e /= 60, a = Math.floor(e), l = e - a, h = i * (1 - t), c = i * (1 - t * l), p = i * (1 - t * (1 - l)), a) { case 0: r = i, o = p, s = h; break; case 1: r = c, o = i, s = h; break; case 2: r = h, o = i, s = p; break; case 3: r = h, o = c, s = i; break; case 4: r = p, o = h, s = i; break; default: r = i, o = h, s = c }var u = [Math.round(255 * r), Math.round(255 * o), Math.round(255 * s)]; return d(n) || u.push(n), u }, t.prototype.rgbToHex = function (e) { return e.length ? "#" + this.hex(e[0]) + this.hex(e[1]) + this.hex(e[2]) + (d(e[3]) ? "" : 0 !== e[3] ? (Math.round(255 * e[3]) + 65536).toString(16).substr(-2) : "00") : "" }, t.prototype.hex = function (e) { return ("0" + e.toString(16)).slice(-2) }, t.prototype.changeModeSwitcherProp = function (e) { var t = N("." + mD, this.container); e ? t ? this.appendModeSwitchBtn() : (this.createCtrlBtn(), this.isPicker() && !this.disabled && this.addCtrlSwitchEvent()) : t && (this.showButtons ? I(N("." + SD, t)) : k(t)) }, t.prototype.changeShowBtnProps = function (e) { var t = N("." + mD, this.container); e ? (t && k(t), this.createCtrlBtn(), this.isPicker() && !this.disabled && this.addCtrlSwitchEvent()) : this.modeSwitcher ? I(N("." + gD, t)) : k(t) }, t.prototype.changeValueProp = function (e) { if (this.isPicker()) this.rgb = this.hexToRgb(e), this.hsv = this.rgbToHsv.apply(this, this.rgb), this.setHandlerPosition(), I(R(this.hueSlider.element, ".e-slider-preview")), this.createSlider(), this.setHsvContainerBg(), this.updateInput(e), 4 === this.rgb.length && this.updateOpacityInput(100 * this.rgb[3]); else { this.removeTileSelection(); var t = N('span[aria-label="' + this.roundValue(e) + '"]', this.container); t && this.addTileSelection(t) } }, t.prototype.setInputEleProps = function (e) { k(N("." + MD, this.container)), this.createInput() }, t.prototype.changeDisabledProp = function (e) { this.isPicker() && (this.hueSlider.enabled = !e, this.opacitySlider.enabled = !e, this.setInputEleProps(e)), e ? (this.toggleDisabled(!0), this.unWireEvents()) : (this.toggleDisabled(!1), this.wireEvents()) }, t.prototype.changeCssClassProps = function (e, t) { var i = this.getWrapper(), n = this.getPopupEle(); t && x([i, n], t.split(" ")), e && S([i, n], e.split(" ")) }, t.prototype.changeRtlProps = function (e) { e ? S([this.getWrapper()], "e-rtl") : x([this.getWrapper()], "e-rtl") }, t.prototype.changePaletteProps = function () { I(this.container.children[0]), this.container.style.width = "", this.createPalette() }, t.prototype.changeOpacityProps = function (e) { var t = this.getWrapper(); e ? (x([this.container.parentElement], vD), this.createOpacitySlider(N(".e-colorpicker-slider", this.container).appendChild(this.createElement("div", { className: "e-opacity-slider" }))), t.classList.contains(bD) || t.classList.contains(wD) || this.appendOpacityValue(N(".e-input-container", this.container))) : (S([this.container.parentElement], vD), this.opacitySlider.destroy(), k(this.opacitySlider.element), this.opacitySlider = null, t.classList.contains(bD) || t.classList.contains(wD) || k(N("." + TD, this.container).parentElement)) }, t.prototype.onPropertyChanged = function (e, t) { var i = this; if (!d(e.value)) { var n = this.roundValue(e.value); if (9 === n.length) { this.element.value = this.roundValue(n).slice(0, 7); var r = this.splitBtn && N("." + ND, this.splitBtn.element); r && (r.style.backgroundColor = e.value) } else this.value = t.value } if (!this.inline && d(e.inline)) { if (this.splitBtn.setProperties(vi(e, ["disabled", "enableRtl"])), !this.isPopupOpen()) return this.changeCssClassProps(e.cssClass, t.cssClass), void this.changeRtlProps(e.enableRtl) } for (var o = function (n) { switch (n) { case "inline": e.inline ? (s.getWrapper().appendChild(s.container), s.splitBtn.destroy(), I(s.element.nextElementSibling), s.container.children.length || s.createWidget()) : (s.destroyOtherComp(), s.unWireEvents(), s.container.innerHTML = "", s.createSplitBtn()); break; case "cssClass": s.changeCssClassProps(e.cssClass, t.cssClass); var r = e.cssClass.split(" ").concat(t.cssClass.split(" ")), o = 0; (r = r.reduce(function (e, t) { return e.indexOf(t) < 0 && e.push(t), e }, [])).forEach(function (e) { if (0 === o && (e === bD || e === CD || e === kD || e === yD || e === wD)) { N("." + MD, i.container) && k(N("." + MD, i.container)), i.createInput(), o++ } }); break; case "enableRtl": s.isPicker() && (s.hueSlider.enableRtl = e.enableRtl, s.enableOpacity && (s.opacitySlider.enableRtl = e.enableRtl), s.setInputEleProps(e.enableRtl)), s.changeRtlProps(e.enableRtl); break; case "disabled": s.changeDisabledProp(e.disabled); break; case "value": s.value !== t.value && s.changeValueProp(e.value); break; case "showButtons": s.changeShowBtnProps(e.showButtons); break; case "mode": "Picker" === e.mode ? s.switchToPicker() : s.switchToPalette(); break; case "modeSwitcher": s.changeModeSwitcherProp(e.modeSwitcher); break; case "columns": case "presetColors": s.isPicker() || s.changePaletteProps(); break; case "noColor": e.noColor ? "Palette" !== s.mode || s.modeSwitcher || s.setNoColor() : s.changePaletteProps(); break; case "enableOpacity": s.changeOpacityProps(e.enableOpacity) } }, s = this, a = 0, l = Object.keys(e); a < l.length; a++) { o(l[a]) } }, t.prototype.focusIn = function () { this.element.parentElement.focus() }, uD([Y("#008000ff")], t.prototype, "value", void 0), uD([Y("")], t.prototype, "cssClass", void 0), uD([Y(!1)], t.prototype, "disabled", void 0), uD([Y("Picker")], t.prototype, "mode", void 0), uD([Y(!0)], t.prototype, "modeSwitcher", void 0), uD([Y(null)], t.prototype, "presetColors", void 0), uD([Y(!0)], t.prototype, "showButtons", void 0), uD([Y(10)], t.prototype, "columns", void 0), uD([Y(!1)], t.prototype, "inline", void 0), uD([Y(!1)], t.prototype, "noColor", void 0), uD([Y(!1)], t.prototype, "enablePersistence", void 0), uD([Y(!0)], t.prototype, "enableOpacity", void 0), uD([X()], t.prototype, "select", void 0), uD([X()], t.prototype, "change", void 0), uD([X()], t.prototype, "beforeTileRender", void 0), uD([X()], t.prototype, "beforeOpen", void 0), uD([X()], t.prototype, "open", void 0), uD([X()], t.prototype, "beforeClose", void 0), uD([X()], t.prototype, "beforeModeSwitch", void 0), uD([X()], t.prototype, "created", void 0), t = uD([J], t) }(Kw), zD = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BD = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, FD = ["title", "style", "class"], VD = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.previousValue = null, n.isAngular = !1, n.isHiddenInput = !1, n.isForm = !1, n.inputPreviousValue = null, n.textboxOptions = t, n } return zD(t, e), t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "floatLabelType": eS.removeFloating(this.textboxWrapper), eS.addFloating(this.respectiveElement, this.floatLabelType, this.placeholder); break; case "enabled": eS.setEnabled(this.enabled, this.respectiveElement, this.floatLabelType, this.textboxWrapper.container); break; case "value": var r = this.isProtectedOnChange; this.isProtectedOnChange = !0, this.isBlank(this.value) || (this.value = this.value.toString()), this.isProtectedOnChange = r, eS.setValue(this.value, this.respectiveElement, this.floatLabelType, this.showClearButton), this.isHiddenInput && (this.element.value = this.respectiveElement.value), this.inputPreviousValue = this.respectiveElement.value, this.isAngular && !0 === this.preventChange ? (this.previousValue = this.value, this.preventChange = !1) : (d(this.isAngular) || !this.isAngular || this.isAngular && !this.preventChange || this.isAngular && d(this.preventChange)) && this.raiseChangeEvent(); break; case "htmlAttributes": this.updateHTMLAttrToElement(), this.updateHTMLAttrToWrapper(); this.element.attributes; this.checkAttributes(!0); break; case "readonly": eS.setReadonly(this.readonly, this.respectiveElement); break; case "type": "TEXTAREA" !== this.respectiveElement.tagName && (this.respectiveElement.setAttribute("type", this.type), this.raiseChangeEvent()); break; case "showClearButton": "TEXTAREA" !== this.respectiveElement.tagName && (eS.setClearButton(this.showClearButton, this.respectiveElement, this.textboxWrapper), this.bindClearEvent()); break; case "enableRtl": eS.setEnableRtl(this.enableRtl, [this.textboxWrapper.container]); break; case "placeholder": eS.setPlaceholder(this.placeholder, this.respectiveElement); break; case "cssClass": eS.setCssClass(e.cssClass, [this.textboxWrapper.container], t.cssClass); break; case "locale": this.globalize = new Gw(this.locale), this.l10n.setLocale(this.locale), this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, !0), eS.setPlaceholder(this.placeholder, this.respectiveElement) } } }, t.prototype.getModuleName = function () { return "textbox" }, t.prototype.isBlank = function (e) { return !e || /^\s*$/.test(e) }, t.prototype.preRender = function () { if (this.cloneElement = this.element.cloneNode(!0), this.formElement = R(this.element, "form"), d(this.formElement) || (this.isForm = !0), "EJS-TEXTBOX" === this.element.tagName) { for (var e = n("ej2_instances", this.element), t = this.multiline ? this.createElement("textarea") : this.createElement("input"), i = 0; i < this.element.attributes.length; i++) { var o = this.element.attributes[i].nodeName; "id" !== o && (t.setAttribute(o, this.element.attributes[i].nodeValue), t.innerHTML = this.element.innerHTML, "name" === o && this.element.removeAttribute("name")) } this.element.appendChild(t), this.element = t, r("ej2_instances", e, this.element) } this.updateHTMLAttrToElement(), this.checkAttributes(!1), "TEXTAREA" !== this.element.tagName && this.element.setAttribute("type", this.type), this.element.setAttribute("role", "textbox"), this.globalize = new Gw(this.locale); var s = { placeholder: this.placeholder }; if (this.l10n = new pb("textbox", s, this.locale), "" !== this.l10n.getConstant("placeholder") && this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, !0), this.element.hasAttribute("id") || this.element.setAttribute("id", p("textbox")), this.element.hasAttribute("name") || this.element.setAttribute("name", this.element.getAttribute("id")), "INPUT" === this.element.tagName && this.multiline) { this.isHiddenInput = !0, this.textarea = this.createElement("textarea"), this.element.parentNode.insertBefore(this.textarea, this.element), this.element.setAttribute("type", "hidden"), this.textarea.setAttribute("name", this.element.getAttribute("name")), this.element.removeAttribute("name"), this.textarea.setAttribute("role", this.element.getAttribute("role")), this.element.removeAttribute("role"); for (var a = ["required", "minlength", "maxlength"], l = 0; l < a.length; l++)if (this.element.hasAttribute(a[l])) { var h = this.element.getAttribute(a[l]); this.textarea.setAttribute(a[l], h), this.element.removeAttribute(a[l]) } } }, t.prototype.checkAttributes = function (e) { for (var t = 0, i = e ? Object.keys(this.htmlAttributes) : ["placeholder", "disabled", "value", "readonly", "type"]; t < i.length; t++) { var n = i[t]; if (!d(this.element.getAttribute(n))) switch (n) { case "disabled": if (d(this.textboxOptions) || void 0 === this.textboxOptions.enabled || e) { var r = "disabled" !== this.element.getAttribute(n) && "" !== this.element.getAttribute(n) && "true" !== this.element.getAttribute(n); this.setProperties({ enabled: r }, !e) } break; case "readonly": if (d(this.textboxOptions) || void 0 === this.textboxOptions.readonly || e) { var o = "readonly" === this.element.getAttribute(n) || "" === this.element.getAttribute(n) || "true" === this.element.getAttribute(n); this.setProperties({ readonly: o }, !e) } break; case "placeholder": (d(this.textboxOptions) || void 0 === this.textboxOptions.placeholder || e) && this.setProperties({ placeholder: this.element.placeholder }, !e); break; case "value": (d(this.textboxOptions) || void 0 === this.textboxOptions.value || e) && this.setProperties({ value: this.element.value }, !e); break; case "type": (d(this.textboxOptions) || void 0 === this.textboxOptions.type || e) && this.setProperties({ type: this.element.type }, !e) } } }, t.prototype.render = function () { this.respectiveElement = this.isHiddenInput ? this.textarea : this.element, this.textboxWrapper = eS.createInput({ element: this.respectiveElement, floatLabelType: this.floatLabelType, properties: { enabled: this.enabled, enableRtl: this.enableRtl, cssClass: this.cssClass, readonly: this.readonly, placeholder: this.placeholder, showClearButton: this.showClearButton } }), this.updateHTMLAttrToWrapper(), this.isHiddenInput && this.respectiveElement.parentNode.insertBefore(this.element, this.respectiveElement), this.wireEvents(), d(this.value) || (eS.setValue(this.value, this.respectiveElement, this.floatLabelType, this.showClearButton), this.isHiddenInput && (this.element.value = this.respectiveElement.value)), d(this.value) || (this.initialValue = this.value, this.setInitialValue()), this.previousValue = this.value, this.inputPreviousValue = this.value }, t.prototype.updateHTMLAttrToWrapper = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (FD.indexOf(i) > -1) if ("class" === i) S([this.textboxWrapper.container], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.textboxWrapper.container.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.textboxWrapper.container.setAttribute(i, n) } else this.textboxWrapper.container.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHTMLAttrToElement = function () { for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; FD.indexOf(i) < 0 && this.element.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.setInitialValue = function () { this.isAngular || this.respectiveElement.setAttribute("value", this.initialValue) }, t.prototype.wireEvents = function () { Kv.add(this.respectiveElement, "focus", this.focusHandler, this), Kv.add(this.respectiveElement, "blur", this.focusOutHandler, this), Kv.add(this.respectiveElement, "input", this.inputHandler, this), Kv.add(this.respectiveElement, "change", this.changeHandler, this), this.isForm && Kv.add(this.formElement, "reset", this.resetForm, this), this.enabled && this.bindClearEvent() }, t.prototype.resetValue = function (e) { var t = this.isProtectedOnChange; this.isProtectedOnChange = !0, this.value = e, this.isProtectedOnChange = t }, t.prototype.resetForm = function () { this.isAngular ? this.resetValue("") : this.resetValue(this.initialValue); var e = this.textboxWrapper.container.querySelector(".e-float-text"); d(e) || (d(this.initialValue) || "" === this.initialValue ? (e.classList.add("e-label-bottom"), e.classList.remove("e-label-top")) : "" !== this.initialValue && (e.classList.add("e-label-top"), e.classList.remove("e-label-bottom"))) }, t.prototype.focusHandler = function (e) { var t = { container: this.textboxWrapper.container, event: e, value: this.value }; this.trigger("focus", t) }, t.prototype.focusOutHandler = function (e) { null === this.previousValue && null === this.value && "" === this.respectiveElement.value || this.previousValue === this.respectiveElement.value || this.raiseChangeEvent(e, !0); var t = { container: this.textboxWrapper.container, event: e, value: this.value }; this.trigger("blur", t) }, t.prototype.inputHandler = function (e) { var t = { event: e, value: this.respectiveElement.value, previousValue: this.inputPreviousValue, container: this.textboxWrapper.container }; this.inputPreviousValue = this.respectiveElement.value, this.isAngular && (this.localChange({ value: this.respectiveElement.value }), this.preventChange = !0), this.trigger("input", t), e.stopPropagation() }, t.prototype.changeHandler = function (e) { this.setProperties({ value: this.respectiveElement.value }, !0), this.raiseChangeEvent(e, !0), e.stopPropagation() }, t.prototype.raiseChangeEvent = function (e, t) { var i = { event: e, value: this.value, previousValue: this.previousValue, container: this.textboxWrapper.container, isInteraction: t || !1, isInteracted: t || !1 }; this.preventChange = !1, this.trigger("change", i), this.previousValue = this.value }, t.prototype.bindClearEvent = function () { this.showClearButton && "TEXTAREA" !== this.respectiveElement.tagName && Kv.add(this.textboxWrapper.clearButton, "mousedown touchstart", this.resetInputHandler, this) }, t.prototype.resetInputHandler = function (e) { if (e.preventDefault(), !this.textboxWrapper.clearButton.classList.contains("e-clear-icon-hide")) { this.value; eS.setValue("", this.respectiveElement, this.floatLabelType, this.showClearButton), this.isHiddenInput && (this.element.value = this.respectiveElement.value), this.setProperties({ value: this.respectiveElement.value }, !0); var t = { event: e, value: this.respectiveElement.value, previousValue: this.inputPreviousValue, container: this.textboxWrapper.container }; this.trigger("input", t), this.inputPreviousValue = this.respectiveElement.value, this.raiseChangeEvent(e, !0) } }, t.prototype.unWireEvents = function () { Kv.remove(this.respectiveElement, "focus", this.focusHandler), Kv.remove(this.respectiveElement, "blur", this.focusOutHandler), Kv.remove(this.respectiveElement, "input", this.inputHandler), Kv.remove(this.respectiveElement, "change", this.changeHandler), this.isForm && Kv.remove(this.formElement, "reset", this.resetForm) }, t.prototype.destroy = function () { this.unWireEvents(), "INPUT" === this.element.tagName && this.multiline && (I(this.textboxWrapper.container.getElementsByTagName("textarea")[0]), this.respectiveElement = this.element, this.element.removeAttribute("type")), this.respectiveElement.classList.remove("e-input"), this.removeAttributes(["aria-placeholder", "aria-disabled", "aria-readonly", "aria-labelledby"]), this.textboxWrapper.container.insertAdjacentElement("afterend", this.respectiveElement), I(this.textboxWrapper.container), this.textboxWrapper = null, e.prototype.destroy.call(this) }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.addAttributes = function (e) { for (var t = 0, i = Object.keys(e); t < i.length; t++) { var n = i[t]; "disabled" === n ? (this.setProperties({ enabled: !1 }, !0), eS.setEnabled(this.enabled, this.respectiveElement, this.floatLabelType, this.textboxWrapper.container)) : "readonly" === n ? (this.setProperties({ readonly: !0 }, !0), eS.setReadonly(this.readonly, this.respectiveElement)) : "class" === n ? this.respectiveElement.classList.add(e[n]) : "placeholder" === n ? (this.setProperties({ placeholder: e[n] }, !0), eS.setPlaceholder(this.placeholder, this.respectiveElement)) : ("rows" === n && this.respectiveElement.tagName, this.respectiveElement.setAttribute(n, e[n])) } }, t.prototype.removeAttributes = function (e) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; "disabled" === n ? (this.setProperties({ enabled: !0 }, !0), eS.setEnabled(this.enabled, this.respectiveElement, this.floatLabelType, this.textboxWrapper.container)) : "readonly" === n ? (this.setProperties({ readonly: !1 }, !0), eS.setReadonly(this.readonly, this.respectiveElement)) : "placeholder" === n ? (this.setProperties({ placeholder: null }, !0), eS.setPlaceholder(this.placeholder, this.respectiveElement)) : this.respectiveElement.removeAttribute(n) } }, t.prototype.focusIn = function () { document.activeElement !== this.respectiveElement && this.enabled && (this.respectiveElement.focus(), S([this.textboxWrapper.container], ["e-input-focus"])) }, t.prototype.focusOut = function () { document.activeElement === this.respectiveElement && this.enabled && (this.respectiveElement.blur(), x([this.textboxWrapper.container], ["e-input-focus"])) }, BD([Y("text")], t.prototype, "type", void 0), BD([Y(!1)], t.prototype, "readonly", void 0), BD([Y(null)], t.prototype, "value", void 0), BD([Y("Never")], t.prototype, "floatLabelType", void 0), BD([Y("")], t.prototype, "cssClass", void 0), BD([Y(null)], t.prototype, "placeholder", void 0), BD([Y({})], t.prototype, "htmlAttributes", void 0), BD([Y(!1)], t.prototype, "multiline", void 0), BD([Y(!0)], t.prototype, "enabled", void 0), BD([Y(!1)], t.prototype, "showClearButton", void 0), BD([Y(!1)], t.prototype, "enablePersistence", void 0), BD([X()], t.prototype, "created", void 0), BD([X()], t.prototype, "destroyed", void 0), BD([X()], t.prototype, "change", void 0), BD([X()], t.prototype, "blur", void 0), BD([X()], t.prototype, "focus", void 0), BD([X()], t.prototype, "input", void 0), t = BD([J], t) }(Kw), WD = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), HD = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, _D = "e-datepicker", YD = "e-input-focus", UD = ["title", "class", "style"], qD = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.previousElementValue = "", n.isDateIconClicked = !1, n.isAltKeyPressed = !1, n.isInteracted = !0, n.invalidValueString = null, n.checkPreviousValue = null, n.defaultKeyConfigs = { altUpArrow: "alt+uparrow", altDownArrow: "alt+downarrow", escape: "escape", enter: "enter", controlUp: "ctrl+38", controlDown: "ctrl+40", moveDown: "downarrow", moveUp: "uparrow", moveLeft: "leftarrow", moveRight: "rightarrow", select: "enter", home: "home", end: "end", pageUp: "pageup", pageDown: "pagedown", shiftPageUp: "shift+pageup", shiftPageDown: "shift+pagedown", controlHome: "ctrl+home", controlEnd: "ctrl+end", tab: "tab" }, n.datepickerOptions = t, n } return WD(t, e), t.prototype.render = function () { this.initialize(), this.bindEvents() }, t.prototype.setAllowEdit = function () { this.allowEdit ? this.readonly || this.inputElement.removeAttribute("readonly") : P(this.inputElement, { readonly: "" }), this.updateIconState() }, t.prototype.updateIconState = function () { this.allowEdit || !this.inputWrapper || this.readonly ? this.inputWrapper && x([this.inputWrapper.container], ["e-non-edit"]) : "" === this.inputElement.value ? x([this.inputWrapper.container], ["e-non-edit"]) : S([this.inputWrapper.container], ["e-non-edit"]) }, t.prototype.initialize = function () { this.checkInvalidValue(this.value), this.createInput(), this.updateHtmlAttributeToWrapper(), this.setAllowEdit(), this.updateInput(), this.previousElementValue = this.inputElement.value, this.previousDate = new Date(+this.value), this.inputElement.setAttribute("value", this.inputElement.value), this.inputValueCopy = this.value }, t.prototype.createInput = function () { var e = { "aria-live": "assertive", "aria-atomic": "true", "aria-haspopup": "true", "aria-activedescendant": "null", "aria-owns": this.element.id + "_options", "aria-expanded": "false", role: "combobox", autocomplete: "off", autocorrect: "off", autocapitalize: "off", spellcheck: "false", "aria-invalid": "false" }; if ("datepicker" === this.getModuleName()) { this.globalize = new Gw(this.locale), this.l10n = new pb("datepicker", { placeholder: null }, this.locale), this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, !0) } this.inputWrapper = eS.createInput({ element: this.inputElement, floatLabelType: this.floatLabelType, properties: { readonly: this.readonly, placeholder: this.placeholder, cssClass: this.cssClass, enabled: this.enabled, enableRtl: this.enableRtl, showClearButton: this.showClearButton }, buttons: ["e-input-group-icon e-date-icon e-icons"] }, this.createElement), this.setWidth(this.width), "" !== this.inputElement.name ? this.inputElement.setAttribute("name", "" + this.inputElement.getAttribute("name")) : this.inputElement.setAttribute("name", "" + this.element.id), P(this.inputElement, e), this.enabled ? (this.inputElement.setAttribute("aria-disabled", "false"), this.inputElement.setAttribute("tabindex", this.tabIndex)) : (this.inputElement.setAttribute("aria-disabled", "true"), this.inputElement.tabIndex = -1), eS.addAttributes({ "aria-label": "select" }, this.inputWrapper.buttons[0]), S([this.inputWrapper.container], "e-date-wrapper") }, t.prototype.updateInput = function () { var t; if (this.value && !this.isCalendar() && this.disabledDates(), +new Date(this.checkValue(this.value)) || this.setProperties({ value: null }, !0), this.strictMode && (e.prototype.validateDate.call(this), this.minMaxUpdates(), e.prototype.minMaxUpdate.call(this)), !d(this.value)) { var i = this.value, n = void 0, r = d(this.formatString) ? this.dateTimeFormat : this.formatString; if ("datetimepicker" === this.getModuleName() ? n = "Gregorian" === this.calendarMode ? this.globalize.formatDate(this.value, { format: r, type: "dateTime", skeleton: "yMd" }) : this.globalize.formatDate(this.value, { format: r, type: "dateTime", skeleton: "yMd", calendar: "islamic" }) : (t = "Gregorian" === this.calendarMode ? { format: this.formatString, type: "dateTime", skeleton: "yMd" } : { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }, n = this.globalize.formatDate(this.value, t)), +i <= +this.max && +i >= +this.min) eS.setValue(n, this.inputElement, this.floatLabelType, this.showClearButton); else { var o = +i >= +this.max || !+this.value || !+this.value || +i <= +this.min; !this.strictMode && o && eS.setValue(n, this.inputElement, this.floatLabelType, this.showClearButton) } } d(this.value) && this.strictMode && eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), !this.strictMode && d(this.value) && this.invalidValueString && eS.setValue(this.invalidValueString, this.inputElement, this.floatLabelType, this.showClearButton), this.changedArgs = { value: this.value }, this.errorClass(), this.updateIconState() }, t.prototype.minMaxUpdates = function () { !d(this.value) && this.value < this.min && this.min <= this.max && this.strictMode ? (this.setProperties({ value: this.min }, !0), this.changedArgs = { value: this.value }) : !d(this.value) && this.value > this.max && this.min <= this.max && this.strictMode && (this.setProperties({ value: this.max }, !0), this.changedArgs = { value: this.value }) }, t.prototype.checkStringValue = function (e) { var t = null, i = null, n = null; if ("datetimepicker" === this.getModuleName()) { var r = new Gw(this.locale); "Gregorian" === this.calendarMode ? (i = { format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd" }, n = { format: r.getDatePattern({ skeleton: "yMd" }), type: "dateTime" }) : (i = { format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd", calendar: "islamic" }, n = { format: r.getDatePattern({ skeleton: "yMd" }), type: "dateTime", calendar: "islamic" }) } else i = "Gregorian" === this.calendarMode ? { format: this.formatString, type: "dateTime", skeleton: "yMd" } : { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }; return t = this.checkDateValue(this.globalize.parseDate(e, i)), d(t) && "datetimepicker" === this.getModuleName() && (t = this.checkDateValue(this.globalize.parseDate(e, n))), t }, t.prototype.checkInvalidValue = function (e) { if (!(e instanceof Date || d(e))) { var t = null, i = e; "number" == typeof e && (i = e.toString()); if ("datetimepicker" === this.getModuleName()) { var n = new Gw(this.locale); "Gregorian" === this.calendarMode ? ({ format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd" }, { format: n.getDatePattern({ skeleton: "yMd" }), type: "dateTime" }) : ({ format: this.dateTimeFormat, type: "dateTime", skeleton: "yMd", calendar: "islamic" }, { format: n.getDatePattern({ skeleton: "yMd" }), type: "dateTime", calendar: "islamic" }) } else "Gregorian" === this.calendarMode ? { format: this.formatString, type: "dateTime", skeleton: "yMd" } : { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }; var r = !1; if ("string" != typeof i) i = null, r = !0; else if ("string" == typeof i && (i = i.trim()), !(t = this.checkStringValue(i))) { var o = null; o = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, !/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i) && !o.test(i) || /^[a-zA-Z0-9- ]*$/.test(i) || isNaN(+new Date(this.checkValue(i))) ? r = !0 : t = new Date(i) } r ? (this.strictMode || (this.invalidValueString = i), this.setProperties({ value: null }, !0)) : this.setProperties({ value: t }, !0) } }, t.prototype.bindInputEvent = function () { d(this.formatString) || (-1 === this.formatString.indexOf("y") ? Kv.add(this.inputElement, "input", this.inputHandler, this) : Kv.remove(this.inputElement, "input", this.inputHandler)) }, t.prototype.bindEvents = function () { this.enabled ? (Kv.add(this.inputWrapper.buttons[0], "mousedown touchstart", this.dateIconHandler, this), Kv.add(this.inputElement, "focus", this.inputFocusHandler, this), Kv.add(this.inputElement, "blur", this.inputBlurHandler, this), this.bindInputEvent(), Kv.add(this.inputElement, "change", this.inputChangeHandler, this), this.showClearButton && this.inputWrapper.clearButton && Kv.add(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler, this), this.formElement && Kv.add(this.formElement, "reset", this.resetFormHandler, this)) : (Kv.remove(this.inputWrapper.buttons[0], "mousedown touchstart", this.dateIconHandler), Kv.remove(this.inputElement, "focus", this.inputFocusHandler), Kv.remove(this.inputElement, "blur", this.inputBlurHandler), Kv.remove(this.inputElement, "change", this.inputChangeHandler), this.showClearButton && this.inputWrapper.clearButton && Kv.remove(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler), this.formElement && Kv.remove(this.formElement, "reset", this.resetFormHandler)), this.defaultKeyConfigs = h(this.defaultKeyConfigs, this.keyConfigs), this.keyboardModules = new cb(this.inputElement, { eventName: "keydown", keyAction: this.inputKeyActionHandle.bind(this), keyConfigs: this.defaultKeyConfigs }) }, t.prototype.resetFormHandler = function () { if (!this.inputElement.disabled) { var e = this.inputElement.getAttribute("value"); "EJS-DATEPICKER" !== this.element.tagName && "EJS-DATETIMEPICKER" !== this.element.tagName || (e = "", this.inputValueCopy = null, this.inputElement.setAttribute("value", "")), this.setProperties({ value: this.inputValueCopy }, !0), this.restoreValue(), this.inputElement && (eS.setValue(e, this.inputElement, this.floatLabelType, this.showClearButton), this.errorClass()) } }, t.prototype.restoreValue = function () { this.currentDate = this.value ? this.value : new Date, this.previousDate = this.value, this.previousElementValue = d(this.inputValueCopy) ? "" : this.globalize.formatDate(this.inputValueCopy, { format: this.formatString, type: "dateTime", skeleton: "yMd" }) }, t.prototype.inputChangeHandler = function (e) { e.stopPropagation() }, t.prototype.bindClearEvent = function () { this.showClearButton && this.inputWrapper.clearButton && Kv.add(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler, this) }, t.prototype.resetHandler = function (e) { e.preventDefault(), this.clear(e) }, t.prototype.clear = function (e) { this.setProperties({ value: null }, !0), eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), this.invalidValueString = "", this.updateInput(), this.popupUpdate(), this.changeEvent(e) }, t.prototype.dateIconHandler = function (e) { uw.isDevice && (this.inputElement.setAttribute("readonly", ""), this.inputElement.blur()), e.preventDefault(), this.readonly || (this.isCalendar() ? this.hide(e) : (this.isDateIconClicked = !0, this.show(null, e), "datetimepicker" === this.getModuleName() && this.inputElement.focus(), this.inputElement.focus(), S([this.inputWrapper.container], [YD]), S(this.inputWrapper.buttons, "e-active"))) }, t.prototype.updateHtmlAttributeToWrapper = function () { if (!d(this.htmlAttributes)) for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (UD.indexOf(i) > -1) if ("class" === i) S([this.inputWrapper.container], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.inputWrapper.container.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.inputWrapper.container.setAttribute(i, n) } else this.inputWrapper.container.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHtmlAttributeToElement = function () { if (!d(this.htmlAttributes)) for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; UD.indexOf(i) < 0 && this.inputElement.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.CalendarKeyActionHandle = function (e) { switch (e.action) { case "escape": this.isCalendar() ? this.hide(e) : this.inputWrapper.container.children[this.index].blur(); break; case "enter": this.isCalendar() ? +this.value == +this.currentDate || this.isCalendar() || this.inputWrapper.container.children[this.index].focus() : this.show(null, e), "datetimepicker" === this.getModuleName() && this.inputElement.focus(); break; case "tab": this.hide(e) } }, t.prototype.inputFocusHandler = function () { var e = { model: this }; this.isDateIconClicked = !1, this.trigger("focus", e), this.updateIconState() }, t.prototype.inputHandler = function (e) { this.isPopupClicked = !1 }, t.prototype.inputBlurHandler = function (e) { if (this.strictModeUpdate(), "" === this.inputElement.value && d(this.value) && (this.invalidValueString = null, eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton)), this.updateInput(), this.popupUpdate(), this.changeTrigger(e), this.errorClass(), this.isCalendar() && document.activeElement === this.inputElement && this.hide(e), "datepicker" === this.getModuleName()) { var t = { model: this }; this.trigger("blur", t) } this.isCalendar() && (this.defaultKeyConfigs = h(this.defaultKeyConfigs, this.keyConfigs), this.calendarKeyboardModules = new cb(this.calendarElement.children[1].firstElementChild, { eventName: "keydown", keyAction: this.CalendarKeyActionHandle.bind(this), keyConfigs: this.defaultKeyConfigs })), this.isPopupClicked = !1 }, t.prototype.documentHandler = function (e) { "touchstart" !== e.type && e.preventDefault(); var t = e.target; R(t, ".e-datepicker.e-popup-wrapper") || R(t, ".e-input-group") === this.inputWrapper.container || t.classList.contains("e-day") || (this.hide(e), this.focusOut()) }, t.prototype.inputKeyActionHandle = function (e) { switch (e.action) { case "altUpArrow": this.isAltKeyPressed = !1, this.hide(e), this.inputElement.focus(); break; case "altDownArrow": this.isAltKeyPressed = !0, this.strictModeUpdate(), this.updateInput(), this.changeTrigger(e), "datepicker" === this.getModuleName() && this.show(null, e); break; case "escape": this.hide(e); break; case "enter": this.strictModeUpdate(), this.updateInput(), this.popupUpdate(), this.changeTrigger(e), this.errorClass(), this.isCalendar() || document.activeElement !== this.inputElement || this.hide(e), this.isCalendar() && (e.preventDefault(), e.stopPropagation()); break; case "tab": this.strictModeUpdate(), this.updateInput(), this.popupUpdate(), this.changeTrigger(e), this.errorClass(), this.hide(e); break; default: this.defaultAction(e) } }, t.prototype.defaultAction = function (t) { this.previousDate = !d(this.value) && new Date(+this.value) || null, this.isCalendar() && (e.prototype.keyActionHandle.call(this, t), P(this.inputElement, { "aria-activedescendant": "" + this.setActiveDescendant() })) }, t.prototype.popupUpdate = function () { if ((d(this.value) && !d(this.previousDate) || +this.value != +this.previousDate) && (this.popupObj && this.popupObj.element.querySelectorAll(".e-selected").length > 0 && x(this.popupObj.element.querySelectorAll(".e-selected"), ["e-selected"]), !d(this.value) && +this.value >= +this.min && +this.value <= +this.max)) { var t = new Date(this.checkValue(this.value)); e.prototype.navigateTo.call(this, "Month", t) } }, t.prototype.strictModeUpdate = function () { var e, t; if (e = "datetimepicker" === this.getModuleName() ? d(this.formatString) ? this.dateTimeFormat : this.formatString : d(this.formatString) ? this.formatString : this.formatString.replace("dd", "d"), !d(e)) { e.split("M").length - 1 < 3 && (e = e.replace("MM", "M")) } var i; i = "datetimepicker" === this.getModuleName() ? "Gregorian" === this.calendarMode ? { format: d(this.formatString) ? this.dateTimeFormat : this.formatString, type: "dateTime", skeleton: "yMd" } : { format: d(this.formatString) ? this.dateTimeFormat : this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" } : t = "Gregorian" === this.calendarMode ? { format: e, type: "dateTime", skeleton: "yMd" } : { format: e, type: "dateTime", skeleton: "yMd", calendar: "islamic" }; var n; "string" == typeof this.inputElement.value && (this.inputElement.value = this.inputElement.value.trim()), "datetimepicker" === this.getModuleName() ? this.checkDateValue(this.globalize.parseDate(this.inputElement.value, i)) ? n = this.globalize.parseDate(this.inputElement.value, i) : (t = "Gregorian" === this.calendarMode ? { type: "dateTime", skeleton: "yMd" } : { type: "dateTime", skeleton: "yMd", calendar: "islamic" }, n = this.globalize.parseDate(this.inputElement.value, t)) : (n = this.globalize.parseDate(this.inputElement.value, i), !d(this.formatString) && "" !== this.inputElement.value && this.strictMode && (this.isPopupClicked || !this.isPopupClicked && this.inputElement.value === this.previousElementValue) && -1 === this.formatString.indexOf("y") && n.setFullYear(this.value.getFullYear())), this.strictMode && n ? (eS.setValue(this.globalize.formatDate(n, i), this.inputElement, this.floatLabelType, this.showClearButton), this.inputElement.value !== this.previousElementValue && this.setProperties({ value: n }, !0)) : this.strictMode || this.inputElement.value !== this.previousElementValue && this.setProperties({ value: n }, !0), this.strictMode && !n && "" === this.inputElement.value && this.setProperties({ value: null }, !0), isNaN(+this.value) && this.setProperties({ value: null }, !0), d(this.value) && (this.currentDate = new Date((new Date).setHours(0, 0, 0, 0))) }, t.prototype.createCalendar = function () { var e = this; this.popupWrapper = this.createElement("div", { className: _D + " e-popup-wrapper" }), d(this.cssClass) || (this.popupWrapper.className += " " + this.cssClass), uw.isDevice && (this.modelHeader(), this.modal = this.createElement("div"), this.modal.className = _D + " e-date-modal", document.body.className += " e-date-overflow", this.modal.style.display = "block", document.body.appendChild(this.modal)), this.calendarElement.querySelector("table tbody").className = "", this.popupObj = new yM(this.popupWrapper, { content: this.calendarElement, relateTo: uw.isDevice ? document.body : this.inputWrapper.container, position: uw.isDevice ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" }, offsetY: 4, targetType: "container", enableRtl: this.enableRtl, zIndex: this.zIndex, collision: uw.isDevice ? { X: "fit", Y: "fit" } : { X: "flip", Y: "flip" }, open: function () { "datetimepicker" !== e.getModuleName() && document.activeElement !== e.inputElement && (e.defaultKeyConfigs = h(e.defaultKeyConfigs, e.keyConfigs), e.calendarElement.children[1].firstElementChild.focus(), e.calendarKeyboardModules = new cb(e.calendarElement.children[1].firstElementChild, { eventName: "keydown", keyAction: e.CalendarKeyActionHandle.bind(e), keyConfigs: e.defaultKeyConfigs }), e.calendarKeyboardModules = new cb(e.inputWrapper.container.children[e.index], { eventName: "keydown", keyAction: e.CalendarKeyActionHandle.bind(e), keyConfigs: e.defaultKeyConfigs })) }, close: function () { e.isDateIconClicked && e.inputWrapper.container.children[e.index].focus(), e.value && e.disabledDates(), e.popupObj && e.popupObj.destroy(), I(e.popupWrapper), e.popupObj = e.popupWrapper = null, e.setAriaAttributes() } }), this.popupObj.element.className += " " + this.cssClass, this.setAriaAttributes() }, t.prototype.setAriaDisabled = function () { this.enabled ? (this.inputElement.setAttribute("aria-disabled", "false"), this.inputElement.setAttribute("tabindex", this.tabIndex)) : (this.inputElement.setAttribute("aria-disabled", "true"), this.inputElement.tabIndex = -1) }, t.prototype.modelHeader = function () { var e, t = this.createElement("div", { className: "e-model-header" }), i = this.createElement("h1", { className: "e-model-year" }), n = this.createElement("div"), r = this.createElement("span", { className: "e-model-day" }), o = this.createElement("span", { className: "e-model-month" }); e = "Gregorian" === this.calendarMode ? { format: "y", skeleton: "dateTime" } : { format: "y", skeleton: "dateTime", calendar: "islamic" }, i.textContent = "" + this.globalize.formatDate(this.value || new Date, e), e = "Gregorian" === this.calendarMode ? { format: "E", skeleton: "dateTime" } : { format: "E", skeleton: "dateTime", calendar: "islamic" }, r.textContent = this.globalize.formatDate(this.value || new Date, e) + ", ", e = "Gregorian" === this.calendarMode ? { format: "MMM d", skeleton: "dateTime" } : { format: "MMM d", skeleton: "dateTime", calendar: "islamic" }, o.textContent = "" + this.globalize.formatDate(this.value || new Date, e), t.appendChild(i), n.appendChild(r), n.appendChild(o), t.appendChild(n), this.calendarElement.insertBefore(t, this.calendarElement.firstElementChild) }, t.prototype.changeTrigger = function (e) { this.inputElement.value !== this.previousElementValue && (this.previousDate && this.previousDate.valueOf()) !== (this.value && this.value.valueOf()) && (this.changedArgs.value = this.value, this.changedArgs.event = e || null, this.changedArgs.element = this.element, this.changedArgs.isInteracted = !d(e), this.trigger("change", this.changedArgs), this.previousElementValue = this.inputElement.value, this.previousDate = isNaN(+new Date(this.checkValue(this.value))) ? null : new Date(this.checkValue(this.value)), this.isInteracted = !0) }, t.prototype.navigatedEvent = function () { this.trigger("navigated", this.navigatedArgs) }, t.prototype.changeEvent = function (e) { (this.previousDate && this.previousDate.valueOf()) !== (this.value && this.value.valueOf()) && (this.selectCalendar(e), this.changedArgs.event = e || null, this.changedArgs.element = this.element, this.changedArgs.isInteracted = this.isInteracted, this.trigger("change", this.changedArgs), this.previousDate = this.value && new Date(+this.value), this.hide(e), this.previousElementValue = this.inputElement.value, this.errorClass()) }, t.prototype.requiredModules = function () { var e = []; return this && e.push({ args: [this], member: "islamic" }), e }, t.prototype.selectCalendar = function (e) { var t, i, n; i = "datetimepicker" === this.getModuleName() && d(this.formatString) ? this.dateTimeFormat : this.formatString, this.value && ("datetimepicker" === this.getModuleName() ? (n = "Gregorian" === this.calendarMode ? { format: i, type: "dateTime", skeleton: "yMd" } : { format: i, type: "dateTime", skeleton: "yMd", calendar: "islamic" }, t = this.globalize.formatDate(this.changedArgs.value, n)) : (n = "Gregorian" === this.calendarMode ? { format: this.formatString, type: "dateTime", skeleton: "yMd" } : { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }, t = this.globalize.formatDate(this.changedArgs.value, n))), d(t) || eS.setValue(t, this.inputElement, this.floatLabelType, this.showClearButton) }, t.prototype.isCalendar = function () { return !(!this.popupWrapper || !this.popupWrapper.classList.contains("e-popup-wrapper")) }, t.prototype.setWidth = function (e) { this.inputWrapper.container.style.width = "number" == typeof e ? v(this.width) : "string" == typeof e ? e.match(/px|%|em/) ? this.width : v(this.width) : "100%" }, t.prototype.show = function (t, i) { var n = this; if (!(this.enabled && this.readonly || !this.enabled || this.popupObj)) { var r = !0, o = void 0; d(this.value) || +this.value >= +this.min && +this.value <= +this.max ? o = this.value || null : (o = new Date(this.checkValue(this.value)), this.setProperties({ value: null }, !0)), this.isCalendar() || (e.prototype.render.call(this), this.setProperties({ value: o || null }, !0), this.previousDate = o, this.createCalendar()), uw.isDevice && (this.mobilePopupWrapper = this.createElement("div", { className: "e-datepick-mob-popup-wrap" }), document.body.appendChild(this.mobilePopupWrapper)), this.preventArgs = { preventDefault: function () { r = !1 }, popup: this.popupObj, event: i || null, cancel: !1, appendTo: uw.isDevice ? this.mobilePopupWrapper : document.body }; var s = this.preventArgs; this.trigger("open", s, function (t) { if (n.preventArgs = t, r && !n.preventArgs.cancel) { S(n.inputWrapper.buttons, "e-active"), n.preventArgs.appendTo.appendChild(n.popupWrapper), n.popupObj.refreshPosition(n.inputElement); var i = { name: "FadeIn", duration: uw.isDevice ? 0 : 300 }; 1e3 === n.zIndex ? n.popupObj.show(new fw(i), n.element) : n.popupObj.show(new fw(i), null), e.prototype.setOverlayIndex.call(n, n.mobilePopupWrapper, n.popupObj.element, n.modal, uw.isDevice), n.setAriaAttributes() } else n.popupObj.destroy(), n.popupWrapper = n.popupObj = null; Kv.add(document, "mousedown touchstart", n.documentHandler, n) }) } }, t.prototype.hide = function (e) { var t = this; if (d(this.popupWrapper)) uw.isDevice && this.allowEdit && !this.readonly && this.inputElement.removeAttribute("readonly"), this.setAllowEdit(); else { var i = !0; this.preventArgs = { preventDefault: function () { i = !1 }, popup: this.popupObj, event: e || null, cancel: !1 }, x(this.inputWrapper.buttons, "e-active"), x([document.body], "e-date-overflow"); var n = this.preventArgs; this.isCalendar() ? this.trigger("close", n, function (e) { t.closeEventCallback(i, e) }) : this.closeEventCallback(i, n) } }, t.prototype.closeEventCallback = function (e, t) { this.preventArgs = t, this.isCalendar() && e && !this.preventArgs.cancel && (this.popupObj.hide(), this.isAltKeyPressed = !1, this.keyboardModule.destroy(), x(this.inputWrapper.buttons, "e-active")), this.setAriaAttributes(), uw.isDevice && this.modal && (this.modal.style.display = "none", this.modal.outerHTML = "", this.modal = null), uw.isDevice && (d(this.mobilePopupWrapper) || (this.mobilePopupWrapper.remove(), this.mobilePopupWrapper = null)), Kv.remove(document, "mousedown touchstart", this.documentHandler), uw.isDevice && this.allowEdit && !this.readonly && this.inputElement.removeAttribute("readonly"), this.setAllowEdit() }, t.prototype.focusIn = function (e) { document.activeElement !== this.inputElement && this.enabled && (this.inputElement.focus(), S([this.inputWrapper.container], [YD])) }, t.prototype.focusOut = function () { document.activeElement === this.inputElement && (x([this.inputWrapper.container], [YD]), this.inputElement.blur()) }, t.prototype.currentView = function () { var t; return this.calendarElement && (t = e.prototype.currentView.call(this)), t }, t.prototype.navigateTo = function (t, i) { this.calendarElement && e.prototype.navigateTo.call(this, t, i) }, t.prototype.destroy = function () { e.prototype.destroy.call(this), this.keyboardModules.destroy(), this.popupObj && this.popupObj.element.classList.contains("e-popup") && e.prototype.destroy.call(this); var t = { "aria-live": "assertive", "aria-atomic": "true", "aria-disabled": "true", "aria-haspopup": "true", "aria-activedescendant": "null", "aria-owns": this.element.id + "_options", "aria-expanded": "false", role: "combobox", autocomplete: "off", autocorrect: "off", autocapitalize: "off", spellcheck: "false" }; this.inputElement && (eS.removeAttributes(t, this.inputElement), d(this.inputElementCopy.getAttribute("tabindex")) ? this.inputElement.removeAttribute("tabindex") : this.inputElement.setAttribute("tabindex", this.tabIndex), Kv.remove(this.inputElement, "blur", this.inputBlurHandler), Kv.remove(this.inputElement, "focus", this.inputFocusHandler), this.ensureInputAttribute()), this.isCalendar() && (this.popupWrapper && I(this.popupWrapper), this.popupObj = this.popupWrapper = null, this.keyboardModule.destroy()), null === this.ngTag && (this.inputElement && (this.inputWrapper.container.insertAdjacentElement("afterend", this.inputElement), x([this.inputElement], ["e-input"])), x([this.element], [_D]), I(this.inputWrapper.container)), this.formElement && Kv.remove(this.formElement, "reset", this.resetFormHandler) }, t.prototype.ensureInputAttribute = function () { for (var e = [], t = 0; t < this.inputElement.attributes.length; t++)e[t] = this.inputElement.attributes[t].name; for (t = 0; t < e.length; t++)d(this.inputElementCopy.getAttribute(e[t])) ? ("value" === e[t].toLowerCase() && (this.inputElement.value = ""), this.inputElement.removeAttribute(e[t])) : ("value" === e[t].toLowerCase() && (this.inputElement.value = this.inputElementCopy.getAttribute(e[t])), this.inputElement.setAttribute(e[t], this.inputElementCopy.getAttribute(e[t]))) }, t.prototype.preRender = function () { this.inputElementCopy = this.element.cloneNode(!0), x([this.inputElementCopy], [_D, "e-control", "e-lib"]), this.inputElement = this.element, this.formElement = R(this.inputElement, "form"), this.index = this.showClearButton ? 2 : 1, this.ngTag = null, "EJS-DATEPICKER" !== this.element.tagName && "EJS-DATETIMEPICKER" !== this.element.tagName || (this.ngTag = this.element.tagName, this.inputElement = this.createElement("input"), this.element.appendChild(this.inputElement)), this.element.getAttribute("id") ? null !== this.ngTag && (this.inputElement.id = this.element.getAttribute("id") + "_input") : "datetimepicker" === this.getModuleName() ? (this.element.id = p("ej2-datetimepicker"), null !== this.ngTag && P(this.inputElement, { id: this.element.id + "_input" })) : (this.element.id = p("ej2-datepicker"), null !== this.ngTag && P(this.inputElement, { id: this.element.id + "_input" })), null !== this.ngTag && this.validationAttribute(this.element, this.inputElement), this.updateHtmlAttributeToElement(), this.checkHtmlAttributes(!1), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.removeAttribute("tabindex"), e.prototype.preRender.call(this) }, t.prototype.validationAttribute = function (e, t) { var i = e.getAttribute("name") ? e.getAttribute("name") : e.getAttribute("id"); t.setAttribute("name", i), e.removeAttribute("name"); for (var n = ["required", "aria-required", "form"], r = 0; r < n.length; r++)if (!d(e.getAttribute(n[r]))) { var o = e.getAttribute(n[r]); t.setAttribute(n[r], o), e.removeAttribute(n[r]) } }, t.prototype.checkFormat = function () { var e = new Gw(this.locale); if (this.format) if ("string" == typeof this.format) this.formatString = this.format; else if ("" === this.format.skeleton || d(this.format.skeleton)) "datetimepicker" === this.getModuleName() ? this.formatString = this.dateTimeFormat : this.formatString = null; else { var t = this.format.skeleton; "datetimepicker" === this.getModuleName() ? this.formatString = e.getDatePattern({ skeleton: t, type: "dateTime" }) : this.formatString = e.getDatePattern({ skeleton: t, type: "date" }) } else this.formatString = null }, t.prototype.checkHtmlAttributes = function (e) { this.globalize = new Gw(this.locale), this.checkFormat(), this.checkView(); var t, i = e ? d(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["value", "min", "max", "disabled", "readonly", "style", "name", "placeholder", "type"]; t = "datetimepicker" === this.getModuleName() ? "Gregorian" === this.calendarMode ? { format: d(this.formatString) ? this.dateTimeFormat : this.formatString, type: "dateTime", skeleton: "yMd" } : { format: d(this.formatString) ? this.dateTimeFormat : this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" } : "Gregorian" === this.calendarMode ? { format: this.formatString, type: "dateTime", skeleton: "yMd" } : { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }; for (var n = 0, o = i; n < o.length; n++) { var s = o[n]; if (!d(this.inputElement.getAttribute(s))) switch (s) { case "disabled": if (d(this.datepickerOptions) || void 0 === this.datepickerOptions.enabled || e) { var a = "disabled" !== this.inputElement.getAttribute(s) && "" !== this.inputElement.getAttribute(s) && "true" !== this.inputElement.getAttribute(s); this.setProperties({ enabled: a }, !e) } break; case "readonly": if (d(this.datepickerOptions) || void 0 === this.datepickerOptions.readonly || e) { var l = "readonly" === this.inputElement.getAttribute(s) || "" === this.inputElement.getAttribute(s) || "true" === this.inputElement.getAttribute(s); this.setProperties({ readonly: l }, !e) } break; case "placeholder": if (d(this.datepickerOptions) || void 0 === this.datepickerOptions.placeholder || e) { this.inputElement.getAttribute(s); this.setProperties({ placeholder: this.inputElement.getAttribute(s) }, !e) } break; case "style": this.inputElement.setAttribute("style", "" + this.inputElement.getAttribute(s)); break; case "name": this.inputElement.setAttribute("name", "" + this.inputElement.getAttribute(s)); break; case "value": if (d(this.datepickerOptions) || void 0 === this.datepickerOptions.value || e) { var h = this.inputElement.getAttribute(s); this.setProperties(r(s, this.globalize.parseDate(h, t), {}), !e) } break; case "min": if (+this.min == +new Date(1900, 0, 1) || e) { var c = this.inputElement.getAttribute(s); this.setProperties(r(s, this.globalize.parseDate(c), {}), !e) } break; case "max": if (+this.max == +new Date(2099, 11, 31) || e) { var p = this.inputElement.getAttribute(s); this.setProperties(r(s, this.globalize.parseDate(p), {}), !e) } break; case "type": "text" !== this.inputElement.getAttribute(s) && this.inputElement.setAttribute("type", "text") } } }, t.prototype.getModuleName = function () { return "datepicker" }, t.prototype.disabledDates = function () { var t, i; t = this.checkDateValue(this.value) ? new Date(+this.value) : new Date(this.checkValue(this.value)); var n = this.previousDate; this.minMaxUpdates(), e.prototype.render.call(this), this.previousDate = n; var r = '*[id^="/id"]'.replace("/id", "" + (t && +t)); this.strictMode || ("string" == typeof this.value || "object" == typeof this.value && +this.value != +t) && this.setProperties({ value: t }, !0), d(this.calendarElement.querySelectorAll(r)[0]) || this.calendarElement.querySelectorAll(r)[0].classList.contains("e-disabled") && (this.strictMode || (this.currentDate = new Date((new Date).setHours(0, 0, 0, 0)))); var o; "datetimepicker" === this.getModuleName() ? o = "Gregorian" === this.calendarMode ? this.globalize.formatDate(t, { format: d(this.formatString) ? this.dateTimeFormat : this.formatString, type: "dateTime", skeleton: "yMd" }) : this.globalize.formatDate(t, { format: d(this.formatString) ? this.dateTimeFormat : this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }) : (i = "Gregorian" === this.calendarMode ? { format: this.formatString, type: "dateTime", skeleton: "yMd" } : { format: this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }, o = this.globalize.formatDate(t, i)), this.popupObj || eS.setValue(o, this.inputElement, this.floatLabelType, this.showClearButton) }, t.prototype.setAriaAttributes = function () { this.isCalendar() ? (eS.addAttributes({ "aria-expanded": "true" }, this.inputElement), P(this.inputElement, { "aria-activedescendant": "" + this.setActiveDescendant() })) : (eS.addAttributes({ "aria-expanded": "false" }, this.inputElement), P(this.inputElement, { "aria-activedescendant": "null" })) }, t.prototype.errorClass = function () { var e = '*[id^="/id"]'.replace("/id", "" + +this.value), t = this.calendarElement && this.calendarElement.querySelectorAll(e)[0] && this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled"); !d(this.value) && !(+new Date(+this.value).setMilliseconds(0) >= +this.min && +new Date(+this.value).setMilliseconds(0) <= +this.max) || !this.strictMode && "" !== this.inputElement.value && d(this.value) || t ? (S([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": "true" })) : (x([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": "false" })) }, t.prototype.onPropertyChanged = function (t, i) { "Gregorian" === this.calendarMode ? this.formatString : this.formatString; for (var n = 0, r = Object.keys(t); n < r.length; n++) { switch (r[n]) { case "value": this.isInteracted = !1, this.invalidValueString = null, this.checkInvalidValue(t.value), t.value = this.value, this.previousElementValue = this.inputElement.value, d(this.value) && (eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), this.currentDate = new Date((new Date).setHours(0, 0, 0, 0))), this.updateInput(), +this.previousDate != +this.value && this.changeTrigger(null); break; case "format": this.checkFormat(), this.bindInputEvent(), this.updateInput(); break; case "allowEdit": this.setAllowEdit(); break; case "placeholder": eS.setPlaceholder(this.placeholder, this.inputElement); break; case "readonly": eS.setReadonly(this.readonly, this.inputElement); break; case "enabled": eS.setEnabled(this.enabled, this.inputElement), this.setAriaDisabled(), this.bindEvents(); break; case "htmlAttributes": this.updateHtmlAttributeToElement(), this.updateHtmlAttributeToWrapper(), this.checkHtmlAttributes(!0); break; case "locale": this.globalize = new Gw(this.locale), this.l10n.setLocale(this.locale), this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, !0), eS.setPlaceholder(this.placeholder, this.inputElement), this.updateInput(); break; case "enableRtl": eS.setEnableRtl(this.enableRtl, [this.inputWrapper.container]); break; case "start": case "depth": this.checkView(), this.calendarElement && e.prototype.onPropertyChanged.call(this, t, i); break; case "zIndex": this.setProperties({ zIndex: t.zIndex }, !0); break; case "cssClass": eS.setCssClass(t.cssClass, [this.inputWrapper.container], i.cssClass), this.popupWrapper && eS.setCssClass(t.cssClass, [this.popupWrapper], i.cssClass); break; case "showClearButton": eS.setClearButton(this.showClearButton, this.inputElement, this.inputWrapper), this.bindClearEvent(); break; case "strictMode": this.invalidValueString = null, this.updateInput(); break; case "width": this.setWidth(t.width); break; case "floatLabelType": this.floatLabelType = t.floatLabelType, eS.removeFloating(this.inputWrapper), eS.addFloating(this.inputElement, this.floatLabelType, this.placeholder); break; default: this.calendarElement && e.prototype.onPropertyChanged.call(this, t, i) }this.hide(null) } }, HD([Y(null)], t.prototype, "width", void 0), HD([Y(null)], t.prototype, "cssClass", void 0), HD([Y(!1)], t.prototype, "strictMode", void 0), HD([Y(null)], t.prototype, "format", void 0), HD([Y(!0)], t.prototype, "enabled", void 0), HD([Y({})], t.prototype, "htmlAttributes", void 0), HD([Y(null)], t.prototype, "values", void 0), HD([Y(!1)], t.prototype, "isMultiSelection", void 0), HD([Y(!0)], t.prototype, "showClearButton", void 0), HD([Y(!0)], t.prototype, "allowEdit", void 0), HD([Y(null)], t.prototype, "keyConfigs", void 0), HD([Y(!1)], t.prototype, "enablePersistence", void 0), HD([Y(1e3)], t.prototype, "zIndex", void 0), HD([Y(!1)], t.prototype, "readonly", void 0), HD([Y(null)], t.prototype, "placeholder", void 0), HD([Y("Never")], t.prototype, "floatLabelType", void 0), HD([X()], t.prototype, "open", void 0), HD([X()], t.prototype, "close", void 0), HD([X()], t.prototype, "blur", void 0), HD([X()], t.prototype, "focus", void 0), HD([X()], t.prototype, "created", void 0), HD([X()], t.prototype, "destroyed", void 0), t = HD([J], t) }(nM), GD = function () { function e(e) { return this.subQuery = null, this.isChild = !1, this.distincts = [], this.queries = [], this.key = "", this.fKey = "", "string" == typeof e ? this.fromTable = e : e && e instanceof Array && (this.lookups = e), this.expands = [], this.sortedColumns = [], this.groupedColumns = [], this.subQuery = null, this.isChild = !1, this.params = [], this } return e.prototype.setKey = function (e) { return this.key = e, this }, e.prototype.using = function (e) { return this.dataManager = e, this }, e.prototype.execute = function (e, t, i, n) { return (e = e || this.dataManager) ? e.executeQuery(this, t, i, n) : JD.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument') }, e.prototype.executeLocal = function (e) { return (e = e || this.dataManager) ? e.executeLocal(this) : JD.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument') }, e.prototype.clone = function () { var t = new e; return t.queries = this.queries.slice(0), t.key = this.key, t.isChild = this.isChild, t.dataManager = this.dataManager, t.fromTable = this.fromTable, t.params = this.params.slice(0), t.expands = this.expands.slice(0), t.sortedColumns = this.sortedColumns.slice(0), t.groupedColumns = this.groupedColumns.slice(0), t.subQuerySelector = this.subQuerySelector, t.subQuery = this.subQuery, t.fKey = this.fKey, t.isCountRequired = this.isCountRequired, t.distincts = this.distincts.slice(0), t }, e.prototype.from = function (e) { return this.fromTable = e, this }, e.prototype.addParams = function (e, t) { return "function" == typeof t ? this.params.push({ key: e, fn: t }) : this.params.push({ key: e, value: t }), this }, e.prototype.distinct = function (e) { return this.distincts = "string" == typeof e ? [].slice.call([e], 0) : e.slice(0), this }, e.prototype.expand = function (e) { return this.expands = "string" == typeof e ? [].slice.call([e], 0) : e.slice(0), this }, e.prototype.where = function (e, t, i, n, r) { t = t ? t.toLowerCase() : null; var o = null; return "string" == typeof e ? o = new QD(e, t, i, n, r) : e instanceof QD && (o = e), this.queries.push({ fn: "onWhere", e: o }), this }, e.prototype.search = function (e, t, i, n, r) { "string" == typeof t && (t = [t]), i = i || "contains"; var o = JD.fnOperators[i]; return this.queries.push({ fn: "onSearch", e: { fieldNames: t, operator: i, searchKey: e, ignoreCase: n, ignoreAccent: r, comparer: o } }), this }, e.prototype.sortBy = function (t, i, n) { var r, o, s = "ascending"; if ("string" == typeof t && JD.endsWith(t.toLowerCase(), " desc") && (t = t.replace(/ desc$/i, ""), i = "descending"), i && "string" != typeof i || (s = i ? i.toLowerCase() : "ascending", i = JD.fnSort(i)), n) { r = e.filterQueries(this.queries, "onSortBy"); for (var a = 0; a < r.length; a++)if ("string" == typeof (o = r[a].e.fieldName)) { if (o === t) return this } else if (o instanceof Array) for (var l = 0; l < o.length; l++)if (o[l] === t || t.toLowerCase() === o[l] + " desc") return this } return this.queries.push({ fn: "onSortBy", e: { fieldName: t, comparer: i, direction: s } }), this }, e.prototype.sortByDesc = function (e) { return this.sortBy(e, "descending") }, e.prototype.group = function (e, t, i) { return this.sortBy(e, null, !0), this.queries.push({ fn: "onGroup", e: { fieldName: e, comparer: t || null, format: i || null } }), this }, e.prototype.page = function (e, t) { return this.queries.push({ fn: "onPage", e: { pageIndex: e, pageSize: t } }), this }, e.prototype.range = function (e, t) { return this.queries.push({ fn: "onRange", e: { start: e, end: t } }), this }, e.prototype.take = function (e) { return this.queries.push({ fn: "onTake", e: { nos: e } }), this }, e.prototype.skip = function (e) { return this.queries.push({ fn: "onSkip", e: { nos: e } }), this }, e.prototype.select = function (e) { return "string" == typeof e && (e = [].slice.call([e], 0)), this.queries.push({ fn: "onSelect", e: { fieldNames: e } }), this }, e.prototype.hierarchy = function (e, t) { return this.subQuerySelector = t, this.subQuery = e, this }, e.prototype.foreignKey = function (e) { return this.fKey = e, this }, e.prototype.requiresCount = function () { return this.isCountRequired = !0, this }, e.prototype.aggregate = function (e, t) { return this.queries.push({ fn: "onAggregates", e: { field: t, type: e } }), this }, e.filterQueries = function (e, t) { return e.filter(function (e) { return e.fn === t }) }, e.filterQueryLists = function (e, t) { for (var i = e.filter(function (e) { return -1 !== t.indexOf(e.fn) }), n = {}, r = 0; r < i.length; r++)n[i[r].fn] || (n[i[r].fn] = i[r].e); return n }, e }(), QD = function () { function e(t, i, n, r, o) { return void 0 === r && (r = !1), this.ignoreAccent = !1, this.isComplex = !1, "string" == typeof t ? (this.field = t, this.operator = i.toLowerCase(), this.value = n, this.ignoreCase = r, this.ignoreAccent = o, this.isComplex = !1, this.comparer = JD.fnOperators.processOperator(this.operator)) : (t instanceof e && n instanceof e || n instanceof Array) && (this.isComplex = !0, this.condition = i.toLowerCase(), this.predicates = [t], n instanceof Array ? [].push.apply(this.predicates, n) : this.predicates.push(n)), this } return e.and = function () { for (var t = [], i = 0; i < arguments.length; i++)t[i] = arguments[i]; return e.combinePredicates([].slice.call(t, 0), "and") }, e.prototype.and = function (t, i, n, r, o) { return e.combine(this, t, i, n, "and", r, o) }, e.or = function () { for (var t = [], i = 0; i < arguments.length; i++)t[i] = arguments[i]; return e.combinePredicates([].slice.call(t, 0), "or") }, e.prototype.or = function (t, i, n, r, o) { return e.combine(this, t, i, n, "or", r, o) }, e.fromJson = function (e) { if (e instanceof Array) { for (var t = [], i = 0, n = e.length; i < n; i++)t.push(this.fromJSONData(e[i])); return t } var r = e; return this.fromJSONData(r) }, e.prototype.validate = function (e) { var t, i, n = this.predicates ? this.predicates : []; if (!this.isComplex && this.comparer) return this.comparer.call(this, JD.getObject(this.field, e), this.value, this.ignoreCase, this.ignoreAccent); t = "and" === this.condition; for (var r = 0; r < n.length; r++)if (i = n[r].validate(e), t) { if (!i) return !1 } else if (i) return !0; return t }, e.prototype.toJson = function () { var e, t; if (this.isComplex) { e = [], t = this.predicates; for (var i = 0; i < t.length; i++)e.push(t[i].toJson()) } return { isComplex: this.isComplex, field: this.field, operator: this.operator, value: this.value, ignoreCase: this.ignoreCase, ignoreAccent: this.ignoreAccent, condition: this.condition, predicates: e } }, e.combinePredicates = function (t, i) { if (1 === t.length) { if (!(t[0] instanceof Array)) return t[0]; t = t[0] } return new e(t[0], i, t.slice(1)) }, e.combine = function (t, i, n, r, o, s, a) { return i instanceof e ? e[o](t, i) : "string" == typeof i ? e[o](t, new e(i, n, r, s, a)) : JD.throwError("Predicate - " + o + " : invalid arguments") }, e.fromJSONData = function (t) { for (var i = t.predicates || [], n = i.length, r = [], o = 0; o < n; o++)r.push(this.fromJSONData(i[o])); return t.isComplex ? new e(r[0], t.condition, r.slice(1)) : new e(t.field, t.operator, t.value, t.ignoreCase, t.ignoreAccent) }, e }(), XD = { GroupGuid: "{271bbba0-1ee7}" }, JD = function () { function e() { } return e.getValue = function (e, t) { return "function" == typeof e ? e.call(t || {}) : e }, e.endsWith = function (e, t) { return e.slice(-t.length) === t }, e.startsWith = function (e, t) { return e.slice(0, t.length) === t }, e.fnSort = function (t) { return "ascending" === (t = t ? e.toLowerCase(t) : "ascending") ? this.fnAscending : this.fnDescending }, e.fnAscending = function (e, t) { return null === t || void 0 === t ? -1 : "string" == typeof e ? e.localeCompare(t) : null === e || void 0 === e ? 1 : e - t }, e.fnDescending = function (e, t) { return null === t || void 0 === t ? 1 : "string" == typeof e ? -1 * e.localeCompare(t) : null === e || void 0 === e ? -1 : t - e }, e.extractFields = function (e, t) { for (var i = {}, n = 0; n < t.length; n++)i = this.setValue(t[n], this.getObject(t[n], e), i); return i }, e.select = function (e, t) { for (var i = [], n = 0; n < e.length; n++)i.push(this.extractFields(e[n], t)); return i }, e.group = function (t, i, n, r, o, s) { r = r || 1; var a = t; if (a.GroupGuid === XD.GroupGuid) { for (var l = function (e) { if (d(o)) a[e].items = h.group(a[e].items, i, n, a.level + 1, null, s), a[e].count = a[e].items.length; else { var t = -1, r = o.filter(function (t) { return t.key === a[e].key }); t = o.indexOf(r[0]), a[e].items = h.group(a[e].items, i, n, a.level + 1, o[t].items, s), a[e].count = o[t].count } }, h = this, c = 0; c < a.length; c++)l(c); return a.childLevels += 1, a } var p = {}, u = []; u.GroupGuid = XD.GroupGuid, u.level = r, u.childLevels = 0, u.records = a; for (var g = function (e) { var t = m.getVal(a, e, i); if (d(s) || (t = s(t, i)), !p[t] && (p[t] = { key: t, count: 0, items: [], aggregates: {}, field: i }, u.push(p[t]), !d(o))) { var n = o.filter(function (e) { return e.key === p[t].key }); p[t].count = n[0].count } p[t].count = d(o) ? p[t].count += 1 : p[t].count, p[t].items.push(a[e]) }, m = this, f = 0; f < a.length; f++)g(f); if (n && n.length) { var y = function (t) { for (var i = {}, r = void 0, s = n, a = 0; a < n.length; a++)if (r = e.aggregates[n[a].type], d(o)) r && (i[s[a].field + " - " + s[a].type] = r(u[t].items, s[a].field)); else { var l = o.filter(function (e) { return e.key === u[t].key }); r && (i[s[a].field + " - " + s[a].type] = r(l[0].items, s[a].field)) } u[t].aggregates = i }; for (f = 0; f < u.length; f++)y(f) } return a.length && u || a }, e.buildHierarchy = function (e, t, i, n, r) { var o, s = {}; for (n.result && (n = n.result), n.GroupGuid && this.throwError("DataManager: Do not have support Grouping in hierarchy"), o = 0; o < n.length; o++) { (s[a = this.getObject(e, n[o])] || (s[a] = [])).push(n[o]) } for (o = 0; o < i.length; o++) { var a = this.getObject(r || e, i[o]); i[o][t] = s[a] } }, e.getFieldList = function (e, t, i) { if (void 0 === i && (i = ""), void 0 === t || null === t) return this.getFieldList(e, [], i); for (var n = e, r = 0, o = Object.keys(e); r < o.length; r++) { var s = o[r]; "object" != typeof n[s] || n[s] instanceof Array ? t.push(i + s) : this.getFieldList(n[s], t, i + s + ".") } return t }, e.getObject = function (e, t) { if (!e) return t; if (t) { if (-1 === e.indexOf(".")) return t[e]; for (var i = t, n = e.split("."), r = 0; r < n.length && null != i; r++)i = i[n[r]]; return i } }, e.setValue = function (e, t, i) { var n, r, o = e.toString().split("."), s = i || {}, a = s, l = o.length; for (n = 0; n < l; n++)r = o[n], n + 1 === l ? a[r] = void 0 === t ? void 0 : t : d(a[r]) && (a[r] = {}), a = a[r]; return s }, e.sort = function (e, t, i) { if (e.length <= 1) return e; var n = parseInt((e.length / 2).toString(), 10), r = e.slice(0, n), o = e.slice(n); return r = this.sort(r, t, i), o = this.sort(o, t, i), this.merge(r, o, t, i) }, e.ignoreDiacritics = function (t) { if ("string" != typeof t) return t; return t.split("").map(function (t) { return t in e.diacritics ? e.diacritics[t] : t }).join("") }, e.merge = function (e, t, i, n) { for (var r, o = []; e.length > 0 || t.length > 0;)r = e.length > 0 && t.length > 0 ? n ? n(this.getVal(e, 0, i), this.getVal(t, 0, i), e[0], t[0]) <= 0 ? e : t : e[0][i] < e[0][i] ? e : t : e.length > 0 ? e : t, o.push(r.shift()); return o }, e.getVal = function (e, t, i) { return i ? this.getObject(i, e[t]) : e[t] }, e.toLowerCase = function (e) { return e ? "string" == typeof e ? e.toLowerCase() : e.toString() : 0 === e || !1 === e ? e.toString() : "" }, e.callAdaptorFunction = function (e, t, i, n) { if (t in e) { var r = e[t](i, n); d(r) || (i = r) } return i }, e.getAddParams = function (t, i, n) { var r = {}; return e.callAdaptorFunction(t, "addParams", { dm: i, query: n, params: n.params, reqParams: r }), r }, e.isPlainObject = function (e) { return !!e && e.constructor === Object }, e.isCors = function () { var e = null; try { e = new window.XMLHttpRequest } catch (e) { } return !!e && "withCredentials" in e }, e.getGuid = function (e) { var t; return (e || "") + "00000000-0000-4000-0000-000000000000".replace(/0/g, function (e, i) { if ("crypto" in window && "getRandomValues" in crypto) { var n = new Uint8Array(1); window.crypto.getRandomValues(n), t = n[0] % 16 | 0 } else t = 16 * Math.random() | 0; return "0123456789abcdef"[19 === i ? 3 & t | 8 : t] }) }, e.isNull = function (e) { return void 0 === e || null === e }, e.getItemFromComparer = function (t, i, n) { var r, o, s, a = 0, l = "string" == typeof e.getVal(t, 0, i); if (t.length) for (; d(r) && a < t.length;)r = e.getVal(t, a, i), s = t[a++]; for (; a < t.length; a++)d(o = e.getVal(t, a, i)) || (l && (r = +r, o = +o), n(r, o) > 0 && (r = o, s = t[a])); return s }, e.distinct = function (t, i, n) { n = !d(n) && n; var r, o = [], s = {}; return t.forEach(function (a, l) { (r = e.getVal(t, l, i)) in s || (o.push(n ? t[l] : r), s[r] = 1) }), o }, e.serverTimezoneOffset = null, e.timeZoneHandling = !0, e.throwError = function (e) { try { throw new Error(e) } catch (e) { throw e.message + "\n" + e.stack } }, e.aggregates = { sum: function (t, i) { for (var n, r = 0, o = "number" != typeof e.getVal(t, 0, i), s = 0; s < t.length; s++)n = e.getVal(t, s, i), isNaN(n) || null === n || (o && (n = +n), r += n); return r }, average: function (t, i) { return e.aggregates.sum(t, i) / t.length }, min: function (t, i) { var n; return "function" == typeof i && (n = i, i = null), e.getObject(i, e.getItemFromComparer(t, i, n || e.fnAscending)) }, max: function (t, i) { var n; return "function" == typeof i && (n = i, i = null), e.getObject(i, e.getItemFromComparer(t, i, n || e.fnDescending)) }, truecount: function (e, t) { return new aA(e).executeLocal((new GD).where(t, "equal", !0, !0)).length }, falsecount: function (e, t) { return new aA(e).executeLocal((new GD).where(t, "equal", !1, !0)).length }, count: function (e, t) { return e.length } }, e.operatorSymbols = { "<": "lessthan", ">": "greaterthan", "<=": "lessthanorequal", ">=": "greaterthanorequal", "==": "equal", "!=": "notequal", "*=": "contains", "$=": "endswith", "^=": "startswith" }, e.odBiOperator = { "<": " lt ", ">": " gt ", "<=": " le ", ">=": " ge ", "==": " eq ", "!=": " ne ", lessthan: " lt ", lessthanorequal: " le ", greaterthan: " gt ", greaterthanorequal: " ge ", equal: " eq ", notequal: " ne " }, e.odUniOperator = { "$=": "endswith", "^=": "startswith", "*=": "substringof", endswith: "endswith", startswith: "startswith", contains: "substringof" }, e.odv4UniOperator = { "$=": "endswith", "^=": "startswith", "*=": "contains", endswith: "endswith", startswith: "startswith", contains: "contains" }, e.diacritics = { "â’¶": "A", "ï¼¡": "A", "Ã€": "A", "Ã": "A", "Ã‚": "A", "áº¦": "A", "áº¤": "A", "áºª": "A", "áº¨": "A", "Ãƒ": "A", "Ä€": "A", "Ä‚": "A", "áº°": "A", "áº®": "A", "áº´": "A", "áº²": "A", "È¦": "A", "Ç ": "A", "Ã„": "A", "Çž": "A", "áº¢": "A", "Ã…": "A", "Çº": "A", "Ç": "A", "È€": "A", "È‚": "A", "áº ": "A", "áº¬": "A", "áº¶": "A", "á¸€": "A", "Ä„": "A", "Èº": "A", "â±¯": "A", "êœ²": "AA", "Ã†": "AE", "Ç¼": "AE", "Ç¢": "AE", "êœ´": "AO", "êœ¶": "AU", "êœ¸": "AV", "êœº": "AV", "êœ¼": "AY", "â’·": "B", "ï¼¢": "B", "á¸‚": "B", "á¸„": "B", "á¸†": "B", "Éƒ": "B", "Æ‚": "B", "Æ": "B", "â’¸": "C", "ï¼£": "C", "Ä†": "C", "Äˆ": "C", "ÄŠ": "C", "ÄŒ": "C", "Ã‡": "C", "á¸ˆ": "C", "Æ‡": "C", "È»": "C", "êœ¾": "C", "â’¹": "D", "ï¼¤": "D", "á¸Š": "D", "ÄŽ": "D", "á¸Œ": "D", "á¸": "D", "á¸’": "D", "á¸Ž": "D", "Ä": "D", "Æ‹": "D", "ÆŠ": "D", "Æ‰": "D", "ê¹": "D", "Ç±": "DZ", "Ç„": "DZ", "Ç²": "Dz", "Ç…": "Dz", "â’º": "E", "ï¼¥": "E", "Ãˆ": "E", "Ã‰": "E", "ÃŠ": "E", "á»€": "E", "áº¾": "E", "á»„": "E", "á»‚": "E", "áº¼": "E", "Ä’": "E", "á¸”": "E", "á¸–": "E", "Ä”": "E", "Ä–": "E", "Ã‹": "E", "áºº": "E", "Äš": "E", "È„": "E", "È†": "E", "áº¸": "E", "á»†": "E", "È¨": "E", "á¸œ": "E", "Ä˜": "E", "á¸˜": "E", "á¸š": "E", "Æ": "E", "ÆŽ": "E", "â’»": "F", "ï¼¦": "F", "á¸ž": "F", "Æ‘": "F", "ê»": "F", "â’¼": "G", "ï¼§": "G", "Ç´": "G", "Äœ": "G", "á¸ ": "G", "Äž": "G", "Ä ": "G", "Ç¦": "G", "Ä¢": "G", "Ç¤": "G", "Æ“": "G", "êž ": "G", "ê½": "G", "ê¾": "G", "â’½": "H", "ï¼¨": "H", "Ä¤": "H", "á¸¢": "H", "á¸¦": "H", "Èž": "H", "á¸¤": "H", "á¸¨": "H", "á¸ª": "H", "Ä¦": "H", "â±§": "H", "â±µ": "H", "êž": "H", "â’¾": "I", "ï¼©": "I", "ÃŒ": "I", "Ã": "I", "ÃŽ": "I", "Ä¨": "I", "Äª": "I", "Ä¬": "I", "Ä°": "I", "Ã": "I", "á¸®": "I", "á»ˆ": "I", "Ç": "I", "Èˆ": "I", "ÈŠ": "I", "á»Š": "I", "Ä®": "I", "á¸¬": "I", "Æ—": "I", "â’¿": "J", "ï¼ª": "J", "Ä´": "J", "Éˆ": "J", "â“€": "K", "ï¼«": "K", "á¸°": "K", "Ç¨": "K", "á¸²": "K", "Ä¶": "K", "á¸´": "K", "Æ˜": "K", "â±©": "K", "ê€": "K", "ê‚": "K", "ê„": "K", "êž¢": "K", "â“": "L", "ï¼¬": "L", "Ä¿": "L", "Ä¹": "L", "Ä½": "L", "á¸¶": "L", "á¸¸": "L", "Ä»": "L", "á¸¼": "L", "á¸º": "L", "Å": "L", "È½": "L", "â±¢": "L", "â± ": "L", "êˆ": "L", "ê†": "L", "êž€": "L", "Ç‡": "LJ", "Çˆ": "Lj", "â“‚": "M", "ï¼­": "M", "á¸¾": "M", "á¹€": "M", "á¹‚": "M", "â±®": "M", "Æœ": "M", "â“ƒ": "N", "ï¼®": "N", "Ç¸": "N", "Åƒ": "N", "Ã‘": "N", "á¹„": "N", "Å‡": "N", "á¹†": "N", "Å…": "N", "á¹Š": "N", "á¹ˆ": "N", "È ": "N", "Æ": "N", "êž": "N", "êž¤": "N", "ÇŠ": "NJ", "Ç‹": "Nj", "â“„": "O", "ï¼¯": "O", "Ã’": "O", "Ã“": "O", "Ã”": "O", "á»’": "O", "á»": "O", "á»–": "O", "á»”": "O", "Ã•": "O", "á¹Œ": "O", "È¬": "O", "á¹Ž": "O", "ÅŒ": "O", "á¹": "O", "á¹’": "O", "ÅŽ": "O", "È®": "O", "È°": "O", "Ã–": "O", "Èª": "O", "á»Ž": "O", "Å": "O", "Ç‘": "O", "ÈŒ": "O", "ÈŽ": "O", "Æ ": "O", "á»œ": "O", "á»š": "O", "á» ": "O", "á»ž": "O", "á»¢": "O", "á»Œ": "O", "á»˜": "O", "Çª": "O", "Ç¬": "O", "Ã˜": "O", "Ç¾": "O", "Æ†": "O", "ÆŸ": "O", "êŠ": "O", "êŒ": "O", "Æ¢": "OI", "êŽ": "OO", "È¢": "OU", "â“…": "P", "ï¼°": "P", "á¹”": "P", "á¹–": "P", "Æ¤": "P", "â±£": "P", "ê": "P", "ê’": "P", "ê”": "P", "â“†": "Q", "ï¼±": "Q", "ê–": "Q", "ê˜": "Q", "ÉŠ": "Q", "â“‡": "R", "ï¼²": "R", "Å”": "R", "á¹˜": "R", "Å˜": "R", "È": "R", "È’": "R", "á¹š": "R", "á¹œ": "R", "Å–": "R", "á¹ž": "R", "ÉŒ": "R", "â±¤": "R", "êš": "R", "êž¦": "R", "êž‚": "R", "â“ˆ": "S", "ï¼³": "S", "áºž": "S", "Åš": "S", "á¹¤": "S", "Åœ": "S", "á¹ ": "S", "Å ": "S", "á¹¦": "S", "á¹¢": "S", "á¹¨": "S", "È˜": "S", "Åž": "S", "â±¾": "S", "êž¨": "S", "êž„": "S", "â“‰": "T", "ï¼´": "T", "á¹ª": "T", "Å¤": "T", "á¹¬": "T", "Èš": "T", "Å¢": "T", "á¹°": "T", "á¹®": "T", "Å¦": "T", "Æ¬": "T", "Æ®": "T", "È¾": "T", "êž†": "T", "êœ¨": "TZ", "â“Š": "U", "ï¼µ": "U", "Ã™": "U", "Ãš": "U", "Ã›": "U", "Å¨": "U", "á¹¸": "U", "Åª": "U", "á¹º": "U", "Å¬": "U", "Ãœ": "U", "Ç›": "U", "Ç—": "U", "Ç•": "U", "Ç™": "U", "á»¦": "U", "Å®": "U", "Å°": "U", "Ç“": "U", "È”": "U", "È–": "U", "Æ¯": "U", "á»ª": "U", "á»¨": "U", "á»®": "U", "á»¬": "U", "á»°": "U", "á»¤": "U", "á¹²": "U", "Å²": "U", "á¹¶": "U", "á¹´": "U", "É„": "U", "â“‹": "V", "ï¼¶": "V", "á¹¼": "V", "á¹¾": "V", "Æ²": "V", "êž": "V", "É…": "V", "ê ": "VY", "â“Œ": "W", "ï¼·": "W", "áº€": "W", "áº‚": "W", "Å´": "W", "áº†": "W", "áº„": "W", "áºˆ": "W", "â±²": "W", "â“": "X", "ï¼¸": "X", "áºŠ": "X", "áºŒ": "X", "â“Ž": "Y", "ï¼¹": "Y", "á»²": "Y", "Ã": "Y", "Å¶": "Y", "á»¸": "Y", "È²": "Y", "áºŽ": "Y", "Å¸": "Y", "á»¶": "Y", "á»´": "Y", "Æ³": "Y", "ÉŽ": "Y", "á»¾": "Y", "â“": "Z", "ï¼º": "Z", "Å¹": "Z", "áº": "Z", "Å»": "Z", "Å½": "Z", "áº’": "Z", "áº”": "Z", "Æµ": "Z", "È¤": "Z", "â±¿": "Z", "â±«": "Z", "ê¢": "Z", "â“": "a", "ï½": "a", "áºš": "a", "Ã ": "a", "Ã¡": "a", "Ã¢": "a", "áº§": "a", "áº¥": "a", "áº«": "a", "áº©": "a", "Ã£": "a", "Ä": "a", "Äƒ": "a", "áº±": "a", "áº¯": "a", "áºµ": "a", "áº³": "a", "È§": "a", "Ç¡": "a", "Ã¤": "a", "ÇŸ": "a", "áº£": "a", "Ã¥": "a", "Ç»": "a", "ÇŽ": "a", "È": "a", "Èƒ": "a", "áº¡": "a", "áº­": "a", "áº·": "a", "á¸": "a", "Ä…": "a", "â±¥": "a", "É": "a", "êœ³": "aa", "Ã¦": "ae", "Ç½": "ae", "Ç£": "ae", "êœµ": "ao", "êœ·": "au", "êœ¹": "av", "êœ»": "av", "êœ½": "ay", "â“‘": "b", "ï½‚": "b", "á¸ƒ": "b", "á¸…": "b", "á¸‡": "b", "Æ€": "b", "Æƒ": "b", "É“": "b", "â“’": "c", "ï½ƒ": "c", "Ä‡": "c", "Ä‰": "c", "Ä‹": "c", "Ä": "c", "Ã§": "c", "á¸‰": "c", "Æˆ": "c", "È¼": "c", "êœ¿": "c", "â†„": "c", "â““": "d", "ï½„": "d", "á¸‹": "d", "Ä": "d", "á¸": "d", "á¸‘": "d", "á¸“": "d", "á¸": "d", "Ä‘": "d", "ÆŒ": "d", "É–": "d", "É—": "d", "êº": "d", "Ç³": "dz", "Ç†": "dz", "â“”": "e", "ï½…": "e", "Ã¨": "e", "Ã©": "e", "Ãª": "e", "á»": "e", "áº¿": "e", "á»…": "e", "á»ƒ": "e", "áº½": "e", "Ä“": "e", "á¸•": "e", "á¸—": "e", "Ä•": "e", "Ä—": "e", "Ã«": "e", "áº»": "e", "Ä›": "e", "È…": "e", "È‡": "e", "áº¹": "e", "á»‡": "e", "È©": "e", "á¸": "e", "Ä™": "e", "á¸™": "e", "á¸›": "e", "É‡": "e", "É›": "e", "Ç": "e", "â“•": "f", "ï½†": "f", "á¸Ÿ": "f", "Æ’": "f", "ê¼": "f", "â“–": "g", "ï½‡": "g", "Çµ": "g", "Ä": "g", "á¸¡": "g", "ÄŸ": "g", "Ä¡": "g", "Ç§": "g", "Ä£": "g", "Ç¥": "g", "É ": "g", "êž¡": "g", "áµ¹": "g", "ê¿": "g", "â“—": "h", "ï½ˆ": "h", "Ä¥": "h", "á¸£": "h", "á¸§": "h", "ÈŸ": "h", "á¸¥": "h", "á¸©": "h", "á¸«": "h", "áº–": "h", "Ä§": "h", "â±¨": "h", "â±¶": "h", "É¥": "h", "Æ•": "hv", "â“˜": "i", "ï½‰": "i", "Ã¬": "i", "Ã­": "i", "Ã®": "i", "Ä©": "i", "Ä«": "i", "Ä­": "i", "Ã¯": "i", "á¸¯": "i", "á»‰": "i", "Ç": "i", "È‰": "i", "È‹": "i", "á»‹": "i", "Ä¯": "i", "á¸­": "i", "É¨": "i", "Ä±": "i", "â“™": "j", "ï½Š": "j", "Äµ": "j", "Ç°": "j", "É‰": "j", "â“š": "k", "ï½‹": "k", "á¸±": "k", "Ç©": "k", "á¸³": "k", "Ä·": "k", "á¸µ": "k", "Æ™": "k", "â±ª": "k", "ê": "k", "êƒ": "k", "ê…": "k", "êž£": "k", "â“›": "l", "ï½Œ": "l", "Å€": "l", "Äº": "l", "Ä¾": "l", "á¸·": "l", "á¸¹": "l", "Ä¼": "l", "á¸½": "l", "á¸»": "l", "Å¿": "l", "Å‚": "l", "Æš": "l", "É«": "l", "â±¡": "l", "ê‰": "l", "êž": "l", "ê‡": "l", "Ç‰": "lj", "â“œ": "m", "ï½": "m", "á¸¿": "m", "á¹": "m", "á¹ƒ": "m", "É±": "m", "É¯": "m", "â“": "n", "ï½Ž": "n", "Ç¹": "n", "Å„": "n", "Ã±": "n", "á¹…": "n", "Åˆ": "n", "á¹‡": "n", "Å†": "n", "á¹‹": "n", "á¹‰": "n", "Æž": "n", "É²": "n", "Å‰": "n", "êž‘": "n", "êž¥": "n", "ÇŒ": "nj", "â“ž": "o", "ï½": "o", "Ã²": "o", "Ã³": "o", "Ã´": "o", "á»“": "o", "á»‘": "o", "á»—": "o", "á»•": "o", "Ãµ": "o", "á¹": "o", "È­": "o", "á¹": "o", "Å": "o", "á¹‘": "o", "á¹“": "o", "Å": "o", "È¯": "o", "È±": "o", "Ã¶": "o", "È«": "o", "á»": "o", "Å‘": "o", "Ç’": "o", "È": "o", "È": "o", "Æ¡": "o", "á»": "o", "á»›": "o", "á»¡": "o", "á»Ÿ": "o", "á»£": "o", "á»": "o", "á»™": "o", "Ç«": "o", "Ç­": "o", "Ã¸": "o", "Ç¿": "o", "É”": "o", "ê‹": "o", "ê": "o", "Éµ": "o", "Æ£": "oi", "È£": "ou", "ê": "oo", "â“Ÿ": "p", "ï½": "p", "á¹•": "p", "á¹—": "p", "Æ¥": "p", "áµ½": "p", "ê‘": "p", "ê“": "p", "ê•": "p", "â“ ": "q", "ï½‘": "q", "É‹": "q", "ê—": "q", "ê™": "q", "â“¡": "r", "ï½’": "r", "Å•": "r", "á¹™": "r", "Å™": "r", "È‘": "r", "È“": "r", "á¹›": "r", "á¹": "r", "Å—": "r", "á¹Ÿ": "r", "É": "r", "É½": "r", "ê›": "r", "êž§": "r", "êžƒ": "r", "â“¢": "s", "ï½“": "s", "ÃŸ": "s", "Å›": "s", "á¹¥": "s", "Å": "s", "á¹¡": "s", "Å¡": "s", "á¹§": "s", "á¹£": "s", "á¹©": "s", "È™": "s", "ÅŸ": "s", "È¿": "s", "êž©": "s", "êž…": "s", "áº›": "s", "â“£": "t", "ï½”": "t", "á¹«": "t", "áº—": "t", "Å¥": "t", "á¹­": "t", "È›": "t", "Å£": "t", "á¹±": "t", "á¹¯": "t", "Å§": "t", "Æ­": "t", "Êˆ": "t", "â±¦": "t", "êž‡": "t", "êœ©": "tz", "â“¤": "u", "ï½•": "u", "Ã¹": "u", "Ãº": "u", "Ã»": "u", "Å©": "u", "á¹¹": "u", "Å«": "u", "á¹»": "u", "Å­": "u", "Ã¼": "u", "Çœ": "u", "Ç˜": "u", "Ç–": "u", "Çš": "u", "á»§": "u", "Å¯": "u", "Å±": "u", "Ç”": "u", "È•": "u", "È—": "u", "Æ°": "u", "á»«": "u", "á»©": "u", "á»¯": "u", "á»­": "u", "á»±": "u", "á»¥": "u", "á¹³": "u", "Å³": "u", "á¹·": "u", "á¹µ": "u", "Ê‰": "u", "â“¥": "v", "ï½–": "v", "á¹½": "v", "á¹¿": "v", "Ê‹": "v", "êŸ": "v", "ÊŒ": "v", "ê¡": "vy", "â“¦": "w", "ï½—": "w", "áº": "w", "áºƒ": "w", "Åµ": "w", "áº‡": "w", "áº…": "w", "áº˜": "w", "áº‰": "w", "â±³": "w", "â“§": "x", "ï½˜": "x", "áº‹": "x", "áº": "x", "â“¨": "y", "ï½™": "y", "á»³": "y", "Ã½": "y", "Å·": "y", "á»¹": "y", "È³": "y", "áº": "y", "Ã¿": "y", "á»·": "y", "áº™": "y", "á»µ": "y", "Æ´": "y", "É": "y", "á»¿": "y", "â“©": "z", "ï½š": "z", "Åº": "z", "áº‘": "z", "Å¼": "z", "Å¾": "z", "áº“": "z", "áº•": "z", "Æ¶": "z", "È¥": "z", "É€": "z", "â±¬": "z", "ê£": "z", "Î†": "Î‘", "Îˆ": "Î•", "Î‰": "Î—", "ÎŠ": "Î™", "Îª": "Î™", "ÎŒ": "ÎŸ", "ÎŽ": "Î¥", "Î«": "Î¥", "Î": "Î©", "Î¬": "Î±", "Î­": "Îµ", "Î®": "Î·", "Î¯": "Î¹", "ÏŠ": "Î¹", "Î": "Î¹", "ÏŒ": "Î¿", "Ï": "Ï…", "Ï‹": "Ï…", "Î°": "Ï…", "Ï‰": "Ï‰", "Ï‚": "Ïƒ" }, e.fnOperators = { equal: function (t, i, n, r) { return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? e.toLowerCase(t) === e.toLowerCase(i) : t === i }, notequal: function (t, i, n, r) { return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), !e.fnOperators.equal(t, i, n) }, lessthan: function (t, i, n) { return n ? e.toLowerCase(t) < e.toLowerCase(i) : t < i }, greaterthan: function (t, i, n) { return n ? e.toLowerCase(t) > e.toLowerCase(i) : t > i }, lessthanorequal: function (t, i, n) { return n ? e.toLowerCase(t) <= e.toLowerCase(i) : t <= i }, greaterthanorequal: function (t, i, n) { return n ? e.toLowerCase(t) >= e.toLowerCase(i) : t >= i }, contains: function (t, i, n, r) { return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? !d(t) && !d(i) && -1 !== e.toLowerCase(t).indexOf(e.toLowerCase(i)) : !d(t) && !d(i) && -1 !== t.toString().indexOf(i) }, notnull: function (e) { return null !== e }, isnull: function (e) { return null === e }, startswith: function (t, i, n, r) { return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? t && i && e.startsWith(e.toLowerCase(t), e.toLowerCase(i)) : t && i && e.startsWith(t, i) }, endswith: function (t, i, n, r) { return r && (t = e.ignoreDiacritics(t), i = e.ignoreDiacritics(i)), n ? t && i && e.endsWith(e.toLowerCase(t), e.toLowerCase(i)) : t && i && e.endsWith(t, i) }, processSymbols: function (t) { var i = e.operatorSymbols[t]; if (i) { return e.fnOperators[i] } return e.throwError("Query - Process Operator : Invalid operator") }, processOperator: function (t) { var i = e.fnOperators[t]; return i || e.fnOperators.processSymbols(t) } }, e.parse = { parseJson: function (t) { return "string" == typeof t ? t = JSON.parse(t, e.parse.jsonReviver) : t instanceof Array ? e.parse.iterateAndReviveArray(t) : "object" == typeof t && null !== t && e.parse.iterateAndReviveJson(t), t }, iterateAndReviveArray: function (t) { for (var i = 0; i < t.length; i++)"object" == typeof t[i] && null !== t[i] ? e.parse.iterateAndReviveJson(t[i]) : "string" != typeof t[i] || /^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i]) ? t[i] = e.parse.parseJson(t[i]) : t[i] = e.parse.jsonReviver("", t[i]) }, iterateAndReviveJson: function (t) { for (var i, n = 0, r = Object.keys(t); n < r.length; n++) { var o = r[n]; e.startsWith(o, "__") || ("object" == typeof (i = t[o]) ? i instanceof Array ? e.parse.iterateAndReviveArray(i) : i && e.parse.iterateAndReviveJson(i) : t[o] = e.parse.jsonReviver(t[o], i)) } }, jsonReviver: function (t, i) { var n = i; if ("string" == typeof i) { var r = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i), o = e.timeZoneHandling ? e.serverTimezoneOffset : null; if (r) return e.dateParse.toTimeZone(new Date(parseInt(r[1], 10)), o, !0); if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)) { var s = n.split(/[^0-9]/); i = e.dateParse.toTimeZone(new Date(parseInt(s[0], 10), parseInt(s[1], 10) - 1, parseInt(s[2], 10), parseInt(s[3], 10), parseInt(s[4], 10), parseInt(s[5], 10)), o, !0) } } return i }, isJson: function (t) { return "string" == typeof t[0] ? t : e.parse.parseJson(t) }, isGuid: function (e) { return null != /[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i.exec(e) }, replacer: function (t, i) { return e.isPlainObject(t) ? e.parse.jsonReplacer(t, i) : t instanceof Array ? e.parse.arrayReplacer(t) : t instanceof Date ? e.parse.jsonReplacer({ val: t }, i).val : t }, jsonReplacer: function (t, i) { for (var n, r = 0, o = Object.keys(t); r < o.length; r++) { var s = o[r]; if ((n = t[s]) instanceof Date) { var a = n; t[s] = e.dateParse.toTimeZone(e.dateParse.addSelfOffset(a), e.serverTimezoneOffset).toJSON() } } return t }, arrayReplacer: function (t) { for (var i = 0; i < t.length; i++)e.isPlainObject(t[i]) ? t[i] = e.parse.jsonReplacer(t[i]) : t[i] instanceof Date && (t[i] = e.parse.jsonReplacer({ date: t[i] }).date); return t }, jsonDateReplacer: function (t, i) { if ("value" === t && i) { if ("string" == typeof i) { var n = /^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i); if (n) i = e.dateParse.toTimeZone(new Date(parseInt(n[1], 10)), null, !0); else if (/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)) { var r = i.split(/[^0-9]/); i = e.dateParse.toTimeZone(new Date(parseInt(r[0], 10), parseInt(r[1], 10) - 1, parseInt(r[2], 10), parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10)), null, !0) } } if (i instanceof Date) return i = e.dateParse.addSelfOffset(i), null === e.serverTimezoneOffset ? e.dateParse.toTimeZone(e.dateParse.addSelfOffset(i), null).toJSON() : (i = e.dateParse.toTimeZone(i, i.getTimezoneOffset() / 60 * 2 - e.serverTimezoneOffset, !1)).toJSON() } return i } }, e.dateParse = { addSelfOffset: function (e) { return new Date(+e - 6e4 * e.getTimezoneOffset()) }, toUTC: function (e) { return new Date(+e + 6e4 * e.getTimezoneOffset()) }, toTimeZone: function (t, i, n) { if (null === i) return t; var r = n ? e.dateParse.toUTC(t) : t; return new Date(+r - 36e5 * i) }, toLocalTime: function (e) { var t = e, i = -t.getTimezoneOffset(), n = i >= 0 ? "+" : "-", r = function (e) { var t = Math.floor(Math.abs(e)); return (t < 10 ? "0" : "") + t }; return t.getFullYear() + "-" + r(t.getMonth() + 1) + "-" + r(t.getDate()) + "T" + r(t.getHours()) + ":" + r(t.getMinutes()) + ":" + r(t.getSeconds()) + n + r(i / 60) + ":" + r(i % 60) } }, e }(), ZD = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), KD = function () { function e(t) { this.options = { from: "table", requestType: "json", sortBy: "sorted", select: "select", skip: "skip", group: "group", take: "take", search: "search", count: "requiresCounts", where: "where", aggregates: "aggregates" }, this.type = e, this.dataSource = t, this.pvt = {} } return e.prototype.processResponse = function (e, t, i, n) { return e }, e }(), $D = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZD(t, e), t.prototype.processQuery = function (e, t) { for (var i, n, r = e.dataSource.json.slice(0), o = r.length, s = !0, a = {}, l = 0; l < t.queries.length; l++)i = this[(n = t.queries[l]).fn].call(this, r, n.e, t), "onAggregates" === n.fn ? a[n.e.field + " - " + n.e.type] = i : r = void 0 !== i ? i : r, "onPage" !== n.fn && "onSkip" !== n.fn && "onTake" !== n.fn && "onRange" !== n.fn || (s = !1), s && (o = r.length); return t.isCountRequired && (r = { result: r, count: o, aggregates: a }), r }, t.prototype.batchRequest = function (e, t, i) { var n, r = t.deletedRecords.length; for (n = 0; n < t.addedRecords.length; n++)this.insert(e, t.addedRecords[n]); for (n = 0; n < t.changedRecords.length; n++)this.update(e, i.key, t.changedRecords[n]); for (n = 0; n < r; n++)this.remove(e, i.key, t.deletedRecords[n]); return t }, t.prototype.onWhere = function (e, t) { return e && e.length ? e.filter(function (e) { if (t) return t.validate(e) }) : e }, t.prototype.onAggregates = function (e, t) { var i = JD.aggregates[t.type]; return e && i && 0 !== e.length ? i(e, t.field) : null }, t.prototype.onSearch = function (e, t) { return e && e.length ? (0 === t.fieldNames.length && JD.getFieldList(e[0], t.fieldNames), e.filter(function (e) { for (var i = 0; i < t.fieldNames.length; i++)if (t.comparer.call(e, JD.getObject(t.fieldNames[i], e), t.searchKey, t.ignoreCase, t.ignoreAccent)) return !0; return !1 })) : e }, t.prototype.onSortBy = function (e, t, i) { if (!e || !e.length) return e; var n, r = JD.getValue(t.fieldName, i); if (!r) return e.sort(t.comparer); if (r instanceof Array) { for (var o = (r = r.slice(0)).length - 1; o >= 0; o--)r[o] && (n = t.comparer, JD.endsWith(r[o], " desc") && (n = JD.fnSort("descending"), r[o] = r[o].replace(" desc", "")), e = JD.sort(e, r[o], n)); return e } return JD.sort(e, r, t.comparer) }, t.prototype.onGroup = function (e, t, i) { if (!e || !e.length) return e; var n = GD.filterQueries(i.queries, "onAggregates"), r = []; if (n.length) for (var o = void 0, s = 0; s < n.length; s++)o = n[s].e, r.push({ type: o.type, field: JD.getValue(o.field, i) }); return JD.group(e, JD.getValue(t.fieldName, i), r, null, null, t.comparer) }, t.prototype.onPage = function (e, t, i) { var n = JD.getValue(t.pageSize, i), r = (JD.getValue(t.pageIndex, i) - 1) * n, o = r + n; return e && e.length ? e.slice(r, o) : e }, t.prototype.onRange = function (e, t) { return e && e.length ? e.slice(JD.getValue(t.start), JD.getValue(t.end)) : e }, t.prototype.onTake = function (e, t) { return e && e.length ? e.slice(0, JD.getValue(t.nos)) : e }, t.prototype.onSkip = function (e, t) { return e && e.length ? e.slice(JD.getValue(t.nos)) : e }, t.prototype.onSelect = function (e, t) { return e && e.length ? JD.select(e, JD.getValue(t.fieldNames)) : e }, t.prototype.insert = function (e, t, i, n, r) { return d(r) ? e.dataSource.json.push(t) : e.dataSource.json.splice(r, 0, t) }, t.prototype.remove = function (e, t, i, n) { var r, o = e.dataSource.json; for ("object" != typeof i || i instanceof Date || (i = i[t]), r = 0; r < o.length && o[r][t] !== i; r++); return r !== o.length ? o.splice(r, 1) : null }, t.prototype.update = function (e, t, i, n) { var r, o = e.dataSource.json, s = i[t]; for (r = 0; r < o.length && o[r][t] !== s; r++); return r < o.length ? l(o[r], i) : null }, t }(KD), eA = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZD(t, e), t.prototype.processQuery = function (e, t, i) { var n, r, o = this.getQueryRequest(t), s = GD.filterQueryLists(t.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]), a = t.params, l = e.dataSource.url, h = null, d = this.options, c = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] }; "onPage" in s ? (n = s.onPage, r = ((r = JD.getValue(n.pageIndex, t)) - 1) * (h = JD.getValue(n.pageSize, t))) : "onRange" in s && (r = (n = s.onRange).start, h = n.end - n.start); for (var p = 0; p < o.sorts.length; p++)n = JD.getValue(o.sorts[p].e.fieldName, t), c.sorts.push(JD.callAdaptorFunction(this, "onEachSort", { name: n, direction: o.sorts[p].e.direction }, t)); i && (n = this.getFiltersFrom(i, t)) && c.filters.push(JD.callAdaptorFunction(this, "onEachWhere", n.toJson(), t)); for (p = 0; p < o.filters.length; p++) { c.filters.push(JD.callAdaptorFunction(this, "onEachWhere", o.filters[p].e.toJson(), t)); for (var u = 0, g = "object" == typeof c.filters[p] ? Object.keys(c.filters[p]) : []; u < g.length; u++) { var m = g[u]; JD.isNull(c[m]) && delete c[m] } } for (p = 0; p < o.searches.length; p++)n = o.searches[p].e, c.searches.push(JD.callAdaptorFunction(this, "onEachSearch", { fields: n.fieldNames, operator: n.operator, key: n.searchKey, ignoreCase: n.ignoreCase }, t)); for (p = 0; p < o.groups.length; p++)c.groups.push(JD.getValue(o.groups[p].e.fieldName, t)); for (p = 0; p < o.aggregates.length; p++)n = o.aggregates[p].e, c.aggregates.push({ type: n.type, field: JD.getValue(n.field, t) }); var f = {}; this.getRequestQuery(d, t, s, c, f), JD.callAdaptorFunction(this, "addParams", { dm: e, query: t, params: a, reqParams: f }); for (var y = 0, v = Object.keys(f); y < v.length; y++) { m = v[y]; (JD.isNull(f[m]) || "" === f[m] || 0 === f[m].length) && delete f[m] } d.skip in f && d.take in f || null === h || (f[d.skip] = JD.callAdaptorFunction(this, "onSkip", r, t), f[d.take] = JD.callAdaptorFunction(this, "onTake", h, t)); var w = this.pvt; return this.pvt = {}, "json" === this.options.requestType ? { data: JSON.stringify(f, JD.parse.jsonDateReplacer), url: l, pvtData: w, type: "POST", contentType: "application/json; charset=utf-8" } : (n = this.convertToQueryString(f, t, e), n = (-1 !== e.dataSource.url.indexOf("?") ? "&" : "/") + n, { type: "GET", url: n.length ? l.replace(/\/*$/, n) : l, pvtData: w }) }, t.prototype.getRequestQuery = function (e, t, i, n, r) { var o = r; o[e.from] = t.fromTable, e.apply && t.distincts.length && (o[e.apply] = "onDistinct" in this ? JD.callAdaptorFunction(this, "onDistinct", t.distincts) : ""), !t.distincts.length && e.expand && (o[e.expand] = "onExpand" in this && "onSelect" in i ? JD.callAdaptorFunction(this, "onExpand", { selects: JD.getValue(i.onSelect.fieldNames, t), expands: t.expands }, t) : t.expands), o[e.select] = "onSelect" in i && !t.distincts.length ? JD.callAdaptorFunction(this, "onSelect", JD.getValue(i.onSelect.fieldNames, t), t) : "", o[e.count] = t.isCountRequired ? JD.callAdaptorFunction(this, "onCount", t.isCountRequired, t) : "", o[e.search] = n.searches.length ? JD.callAdaptorFunction(this, "onSearch", n.searches, t) : "", o[e.skip] = "onSkip" in i ? JD.callAdaptorFunction(this, "onSkip", JD.getValue(i.onSkip.nos, t), t) : "", o[e.take] = "onTake" in i ? JD.callAdaptorFunction(this, "onTake", JD.getValue(i.onTake.nos, t), t) : "", o[e.where] = n.filters.length || n.searches.length ? JD.callAdaptorFunction(this, "onWhere", n.filters, t) : "", o[e.sortBy] = n.sorts.length ? JD.callAdaptorFunction(this, "onSortBy", n.sorts, t) : "", o[e.group] = n.groups.length ? JD.callAdaptorFunction(this, "onGroup", n.groups, t) : "", o[e.aggregates] = n.aggregates.length ? JD.callAdaptorFunction(this, "onAggregates", n.aggregates, t) : "", o.param = [] }, t.prototype.convertToQueryString = function (e, t, i) { return "" }, t.prototype.processResponse = function (e, t, i, n, r, o) { if (n && n.getResponseHeader("Content-Type") && -1 !== n.getResponseHeader("Content-Type").indexOf("application/json")) { var s = JD.timeZoneHandling; t && !t.timeZoneHandling && (JD.timeZoneHandling = !1), e = JD.parse.parseJson(e), JD.timeZoneHandling = s } var a = r, l = a.pvtData || {}, h = e ? e.groupDs : []; if (n && n.getResponseHeader("Content-Type") && -1 !== n.getResponseHeader("Content-Type").indexOf("xml")) return i.isCountRequired ? { result: [], count: 0 } : []; var d = JSON.parse(a.data); if (d && "batch" === d.action && e && e.addedRecords) return o.addedRecords = e.addedRecords, o; e && e.d && (e = e.d); var c = {}; return e && "count" in e && (c.count = e.count), c.result = e && e.result ? e.result : e, this.getAggregateResult(l, e, c, h, i), JD.isNull(c.count) ? c.result : { result: c.result, count: c.count, aggregates: c.aggregates } }, t.prototype.onGroup = function (e) { return this.pvt.groups = e, e }, t.prototype.onAggregates = function (e) { this.pvt.aggregates = e }, t.prototype.batchRequest = function (e, t, i, n, r) { return { type: "POST", url: e.dataSource.batchUrl || e.dataSource.crudUrl || e.dataSource.removeUrl || e.dataSource.url, contentType: "application/json; charset=utf-8", dataType: "json", data: JSON.stringify(h({}, { changed: t.changedRecords, added: t.addedRecords, deleted: t.deletedRecords, action: "batch", table: i[void 0], key: i[void 0] }, JD.getAddParams(this, e, n))) } }, t.prototype.beforeSend = function (e, t) { }, t.prototype.insert = function (e, t, i, n) { return { url: e.dataSource.insertUrl || e.dataSource.crudUrl || e.dataSource.url, data: JSON.stringify(h({}, { value: t, table: i, action: "insert" }, JD.getAddParams(this, e, n))) } }, t.prototype.remove = function (e, t, i, n, r) { return { type: "POST", url: e.dataSource.removeUrl || e.dataSource.crudUrl || e.dataSource.url, data: JSON.stringify(h({}, { key: i, keyColumn: t, table: n, action: "remove" }, JD.getAddParams(this, e, r))) } }, t.prototype.update = function (e, t, i, n, r) { return { type: "POST", url: e.dataSource.updateUrl || e.dataSource.crudUrl || e.dataSource.url, data: JSON.stringify(h({}, { value: i, action: "update", keyColumn: t, key: i[t], table: n }, JD.getAddParams(this, e, r))) } }, t.prototype.getFiltersFrom = function (e, t) { var i, n = t.fKey, r = n, o = t.key, s = []; "object" != typeof e[0] && (r = null); for (var a = 0; a < e.length; a++)i = "object" == typeof e[0] ? JD.getObject(o || r, e[a]) : e[a], s.push(new QD(n, "equal", i)); return QD.or(s) }, t.prototype.getAggregateResult = function (e, t, i, n, r) { var o = t; if (t && t.result && (o = t.result), e && e.aggregates && e.aggregates.length) { var s = e.aggregates, a = void 0, l = o, h = {}; t.aggregate && (l = t.aggregate); for (var c = 0; c < s.length; c++)(a = JD.aggregates[s[c].type]) && (h[s[c].field + " - " + s[c].type] = a(l, s[c].field)); i.aggregates = h } if (e && e.groups && e.groups.length) { var p = e.groups; for (c = 0; c < p.length; c++) { d(n) || (n = JD.group(n, p[c])); var u = GD.filterQueries(r.queries, "onGroup")[c].e; o = JD.group(o, p[c], e.aggregates, null, n, u.comparer) } i.result = o } return i }, t.prototype.getQueryRequest = function (e) { var t = { sorts: [], groups: [], filters: [], searches: [], aggregates: [] }; return t.sorts = GD.filterQueries(e.queries, "onSortBy"), t.groups = GD.filterQueries(e.queries, "onGroup"), t.filters = GD.filterQueries(e.queries, "onWhere"), t.searches = GD.filterQueries(e.queries, "onSearch"), t.aggregates = GD.filterQueries(e.queries, "onAggregates"), t }, t.prototype.addParams = function (e) { var t = e.reqParams; e.params.length && (t.params = {}); for (var i = 0, n = e.params; i < n.length; i++) { var r = n[i]; if (t[r.key]) throw new Error("Query() - addParams: Custom Param is conflicting other request arguments"); t[r.key] = r.value, r.fn && (t[r.key] = r.fn.call(e.query, r.key, e.query, e.dm)), t.params[r.key] = t[r.key] } }, t }(KD), tA = function (e) { function t(t) { var i = e.call(this) || this; return i.options = h({}, i.options, { requestType: "get", accept: "application/json;odata=light;q=1,application/json;odata=verbose;q=0.5", multipartAccept: "multipart/mixed", sortBy: "$orderby", select: "$select", skip: "$skip", take: "$top", count: "$inlinecount", where: "$filter", expand: "$expand", batch: "$batch", changeSet: "--changeset_", batchPre: "batch_", contentId: "Content-Id: ", batchContent: "Content-Type: multipart/mixed; boundary=", changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ", batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ", updateType: "PUT" }), h(i.options, t || {}), i } return ZD(t, e), t.prototype.getModuleName = function () { return "ODataAdaptor" }, t.prototype.onPredicate = function (e, i, n) { var r, o, s = "", a = e.value, l = typeof a, h = e.field ? t.getField(e.field) : null; if (a instanceof Date && (a = "datetime'" + JD.parse.replacer(a) + "'"), "string" === l && (a = "'" + (a = encodeURIComponent(a)) + "'", n && (h = "cast(" + h + ", 'Edm.String')"), JD.parse.isGuid(a) && (o = "guid"), e.ignoreCase && (o || (h = "tolower(" + h + ")"), a = a.toLowerCase())), r = JD.odBiOperator[e.operator]) return s += h, s += r, o && (s += o), s + a; if ("substringof" === (r = d(this.getModuleName) || "ODataV4Adaptor" !== this.getModuleName() ? JD.odUniOperator[e.operator] : JD.odv4UniOperator[e.operator])) { var c = a; a = h, h = c } return s += r + "(", s += h + ",", o && (s += o), s += a + ")" }, t.prototype.addParams = function (t) { e.prototype.addParams.call(this, t), delete t.reqParams.params }, t.prototype.onComplexPredicate = function (e, t, i) { for (var n = [], r = 0; r < e.predicates.length; r++)n.push("(" + this.onEachWhere(e.predicates[r], t, i) + ")"); return n.join(" " + e.condition + " ") }, t.prototype.onEachWhere = function (e, t, i) { return e.isComplex ? this.onComplexPredicate(e, t, i) : this.onPredicate(e, t, i) }, t.prototype.onWhere = function (e) { return this.pvt.search && e.push(this.onEachWhere(this.pvt.search, null, !0)), e.join(" and ") }, t.prototype.onEachSearch = function (e) { e.fields && 0 === e.fields.length && JD.throwError("Query() - Search : oData search requires list of field names to search"); for (var t = this.pvt.search || [], i = 0; i < e.fields.length; i++)t.push(new QD(e.fields[i], e.operator, e.key, e.ignoreCase)); this.pvt.search = t }, t.prototype.onSearch = function (e) { return this.pvt.search = QD.or(this.pvt.search), "" }, t.prototype.onEachSort = function (e) { var i = []; if (e.name instanceof Array) for (var n = 0; n < e.name.length; n++)i.push(t.getField(e.name[n]) + ("descending" === e.direction ? " desc" : "")); else i.push(t.getField(e.name) + ("descending" === e.direction ? " desc" : "")); return i.join(",") }, t.prototype.onSortBy = function (e) { return e.reverse().join(",") }, t.prototype.onGroup = function (e) { return this.pvt.groups = e, [] }, t.prototype.onSelect = function (e) { for (var i = 0; i < e.length; i++)e[i] = t.getField(e[i]); return e.join(",") }, t.prototype.onAggregates = function (e) { return this.pvt.aggregates = e, "" }, t.prototype.onCount = function (e) { return !0 === e ? "allpages" : "" }, t.prototype.beforeSend = function (e, t, i) { JD.endsWith(i.url, this.options.batch) && "post" === i.type.toLowerCase() ? (t.setRequestHeader("Accept", this.options.multipartAccept), t.setRequestHeader("DataServiceVersion", "2.0"), t.overrideMimeType("text/plain; charset=x-user-defined")) : t.setRequestHeader("Accept", this.options.accept), t.setRequestHeader("DataServiceVersion", "2.0"), t.setRequestHeader("MaxDataServiceVersion", "2.0") }, t.prototype.processResponse = function (e, t, i, n, r, o) { if (r && "GET" === r.type && !this.rootUrl && e["odata.metadata"]) { var s = e["odata.metadata"].split("/$metadata#"); this.rootUrl = s[0], this.resourceTableName = s[1] } if (!d(e.d)) { var a = i && i.isCountRequired ? e.d.results : e.d; if (!d(a)) for (var l = 0; l < a.length; l++)d(a[l].__metadata) || delete a[l].__metadata } var h = r && r.pvtData, c = this.processBatchResponse(e, i, n, r, o); if (c) return c; var p = n && r.getResponseHeader("DataServiceVersion"), u = null, g = p && parseInt(p, 10) || 2; if (i && i.isCountRequired) { (e.__count || e["odata.count"]) && (u = e.__count || e["odata.count"]), e.d && (e = e.d), (e.__count || e["odata.count"]) && (u = e.__count || e["odata.count"]) } 3 === g && e.value && (e = e.value), e.d && (e = e.d), g < 3 && e.results && (e = e.results); var m = {}; return m.count = u, m.result = e, this.getAggregateResult(h, e, m, null, i), JD.isNull(u) ? m.result : { result: m.result, count: m.count, aggregates: m.aggregates } }, t.prototype.convertToQueryString = function (e, t, i) { var n = [], r = e.table || ""; delete e.table, i.dataSource.requiresFormat && (e.$format = "json"); for (var o = 0, s = Object.keys(e); o < s.length; o++) { var a = s[o]; n.push(a + "=" + e[a]) } return n = n.join("&"), i.dataSource.url && -1 !== i.dataSource.url.indexOf("?") && !r ? n : n.length ? r + "?" + n : r || "" }, t.prototype.localTimeReplacer = function (e, t) { for (var i = 0, n = d(t) ? [] : Object.keys(t); i < n.length; i++) { var r = n[i]; t[r] instanceof Date && (t[r] = JD.dateParse.toLocalTime(t[r])) } return t }, t.prototype.insert = function (e, t, i) { return { url: (e.dataSource.insertUrl || e.dataSource.url).replace(/\/*$/, i ? "/" + i : ""), data: JSON.stringify(t, this.options.localTime ? this.localTimeReplacer : null) } }, t.prototype.remove = function (e, t, i, n) { var r; return r = "string" != typeof i || JD.parse.isGuid(i) ? "(" + i + ")" : "('" + i + "')", { type: "DELETE", url: (e.dataSource.removeUrl || e.dataSource.url).replace(/\/*$/, n ? "/" + n : "") + r } }, t.prototype.update = function (e, t, i, n, r, o) { "PATCH" !== this.options.updateType || d(o) || (i = this.compareAndRemove(i, o, t)); var s; return s = "string" != typeof i[t] || JD.parse.isGuid(i[t]) ? "(" + i[t] + ")" : "('" + i[t] + "')", { type: this.options.updateType, url: (e.dataSource.updateUrl || e.dataSource.url).replace(/\/*$/, n ? "/" + n : "") + s, data: JSON.stringify(i, this.options.localTime ? this.localTimeReplacer : null), accept: this.options.accept } }, t.prototype.batchRequest = function (e, t, i, n, r) { var o = i.guid = JD.getGuid(this.options.batchPre), s = this.rootUrl ? this.rootUrl + "/" + this.options.batch : e.dataSource.url.replace(/\/*$/, "/" + this.options.batch); i.url = this.resourceTableName ? this.resourceTableName : i.url; var a = { url: i.url, key: i.key, cid: 1, cSet: JD.getGuid(this.options.changeSet) }, l = "--" + o + "\n"; return l += "Content-Type: multipart/mixed; boundary=" + a.cSet.replace("--", "") + "\n", this.pvt.changeSet = 0, l += this.generateInsertRequest(t.addedRecords, a, e), l += this.generateUpdateRequest(t.changedRecords, a, e, r ? r.changedRecords : []), l += this.generateDeleteRequest(t.deletedRecords, a, e), l += a.cSet + "--\n", l += "--" + o + "--", { type: "POST", url: s, dataType: "json", contentType: "multipart/mixed; charset=UTF-8;boundary=" + o, data: l } }, t.prototype.generateDeleteRequest = function (e, t, i) { if (!e) return ""; var n = { method: "DELETE ", url: function (e, t, i) { var n = JD.getObject(i, e[t]); if ("number" == typeof n || JD.parse.isGuid(n)) return "(" + n + ")"; if (n instanceof Date) { return "(" + e[t][i].toJSON() + ")" } return "('" + n + "')" }, data: function (e, t) { return "" } }; return this.generateBodyContent(e, t, n, i) + "\n" }, t.prototype.generateInsertRequest = function (e, t, i) { if (!e) return ""; var n = { method: "POST ", url: function (e, t, i) { return "" }, data: function (e, t) { return JSON.stringify(e[t]) + "\n\n" } }; return this.generateBodyContent(e, t, n, i) }, t.prototype.generateUpdateRequest = function (e, t, i, n) { var r = this; if (!e) return ""; e.forEach(function (e) { return e = r.compareAndRemove(e, n.filter(function (i) { return JD.getObject(t.key, i) === JD.getObject(t.key, e) })[0], t.key) }); var o = { method: this.options.updateType + " ", url: function (e, t, i) { if ("number" == typeof e[t][i] || JD.parse.isGuid(e[t][i])) return "(" + e[t][i] + ")"; if (e[t][i] instanceof Date) { return "(" + e[t][i].toJSON() + ")" } return "('" + e[t][i] + "')" }, data: function (e, t) { return JSON.stringify(e[t]) + "\n\n" } }; return this.generateBodyContent(e, t, o, i) }, t.getField = function (e) { return e.replace(/\./g, "/") }, t.prototype.generateBodyContent = function (e, t, i, n) { for (var r = "", o = 0; o < e.length; o++)r += "\n" + t.cSet + "\n", r += this.options.changeSetContent + "\n\n", r += i.method, "POST " === i.method ? r += (n.dataSource.insertUrl || n.dataSource.crudUrl || t.url) + i.url(e, o, t.key) + " HTTP/1.1\n" : "PUT " === i.method || "PATCH " === i.method ? r += (n.dataSource.updateUrl || n.dataSource.crudUrl || t.url) + i.url(e, o, t.key) + " HTTP/1.1\n" : "DELETE " === i.method && (r += (n.dataSource.removeUrl || n.dataSource.crudUrl || t.url) + i.url(e, o, t.key) + " HTTP/1.1\n"), r += "Accept: " + this.options.accept + "\n", r += "Content-Id: " + this.pvt.changeSet++ + "\n", r += this.options.batchChangeSetContentType + "\n", d(e[o]["@odata.etag"]) ? r += "\n" : (r += "If-Match: " + e[o]["@odata.etag"] + "\n\n", delete e[o]["@odata.etag"]), r += i.data(e, o); return r }, t.prototype.processBatchResponse = function (e, t, i, n, r) { if (i && i.getResponseHeader("Content-Type") && -1 !== i.getResponseHeader("Content-Type").indexOf("xml")) return t.isCountRequired ? { result: [], count: 0 } : []; if (n && this.options.batch && JD.endsWith(n.url, this.options.batch) && "post" === n.type.toLowerCase()) { var o = i.getResponseHeader("Content-Type"), s = void 0, a = void 0, l = e + ""; if (o = o.substring(o.indexOf("=batchresponse") + 1), (l = l.split(o)).length < 2) return {}; l = l[1]; var d = /(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(l); d && l.replace(d[0], ""); for (var c = d ? d[1] : "", p = (l = l.split(c)).length; p > -1; p--)/\bContent-ID:/i.test(l[p]) && /\bHTTP.+201/.test(l[p]) && (s = parseInt(/\bContent-ID: (\d+)/i.exec(l[p])[1], 10), r.addedRecords[s] && (a = JD.parse.parseJson(/^\{.+\}/m.exec(l[p])[0]), h({}, r.addedRecords[s], this.processResponse(a)))); return r } return null }, t.prototype.compareAndRemove = function (e, t, i) { var n = this; return d(t) ? e : (Object.keys(e).forEach(function (r) { if (r !== i && "@odata.etag" !== r) if (JD.isPlainObject(e[r])) { n.compareAndRemove(e[r], t[r]); 0 === Object.keys(e[r]).filter(function (e) { return "@odata.etag" !== e }).length && delete e[r] } else e[r] === t[r] ? delete e[r] : e[r] && t[r] && e[r].valueOf() === t[r].valueOf() && delete e[r] }), e) }, t }(eA), iA = function (e) { function t(t) { var i = e.call(this, t) || this; return i.options = h({}, i.options, { requestType: "get", accept: "application/json, text/javascript, */*; q=0.01", multipartAccept: "multipart/mixed", sortBy: "$orderby", select: "$select", skip: "$skip", take: "$top", count: "$count", search: "$search", where: "$filter", expand: "$expand", batch: "$batch", changeSet: "--changeset_", batchPre: "batch_", contentId: "Content-Id: ", batchContent: "Content-Type: multipart/mixed; boundary=", changeSetContent: "Content-Type: application/http\nContent-Transfer-Encoding: binary ", batchChangeSetContentType: "Content-Type: application/json; charset=utf-8 ", updateType: "PATCH", localTime: !1, apply: "$apply" }), h(i.options, t || {}), i } return ZD(t, e), t.prototype.getModuleName = function () { return "ODataV4Adaptor" }, t.prototype.onCount = function (e) { return !0 === e ? "true" : "" }, t.prototype.onPredicate = function (t, i, n) { var r = "", o = t.value instanceof Date; return r = e.prototype.onPredicate.call(this, t, i, n), o && (r = r.replace(/datetime'(.*)'$/, "$1")), r }, t.prototype.onEachSearch = function (e) { var t = this.pvt.searches || []; t.push(e.key), this.pvt.searches = t }, t.prototype.onSearch = function (e) { return this.pvt.searches.join(" OR ") }, t.prototype.onExpand = function (e) { var t = this, i = {}, n = {}, r = e.expands.slice(), o = []; return e.selects.filter(function (e) { return e.indexOf(".") > -1 }).forEach(function (e) { var t = e.split("."); t[0] in i || (i[t[0]] = []), i[t[0]].push(t[1]) }), Object.keys(i).forEach(function (e) { -1 === r.indexOf(e) && r.push(e) }), r.forEach(function (e) { n[e] = e in i ? e + "(" + t.options.select + "=" + i[e].join(",") + ")" : e }), Object.keys(n).forEach(function (e) { return o.push(n[e]) }), o.join(",") }, t.prototype.onDistinct = function (e) { return "groupby((" + e.map(function (e) { return tA.getField(e) }).join(",") + "))" }, t.prototype.onSelect = function (t) { return e.prototype.onSelect.call(this, t.filter(function (e) { return -1 === e.indexOf(".") })) }, t.prototype.beforeSend = function (e, t, i) { "POST" !== i.type && "PUT" !== i.type && "PATCH" !== i.type || t.setRequestHeader("Prefer", "return=representation"), t.setRequestHeader("Accept", this.options.accept) }, t.prototype.processResponse = function (t, i, n, r, o, s) { if (o && "GET" === o.type && !this.rootUrl && t["@odata.context"]) { var a = t["@odata.context"].split("/$metadata#"); this.rootUrl = a[0], this.resourceTableName = a[1] } var l = o && o.pvtData, h = e.prototype.processBatchResponse.call(this, t, n, r, o, s); if (h) return h; var c = null; n && n.isCountRequired && "@odata.count" in t && (c = t["@odata.count"]), t = d(t.value) ? t : t.value; var p = {}; return p.count = c, p.result = t, this.getAggregateResult(l, t, p, null, n), JD.isNull(c) ? p.result : { result: p.result, count: c, aggregates: p.aggregates } }, t }(tA), nA = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZD(t, e), t.prototype.getModuleName = function () { return "WebApiAdaptor" }, t.prototype.insert = function (e, t, i) { return { type: "POST", url: e.dataSource.url, data: JSON.stringify(t) } }, t.prototype.remove = function (e, t, i, n) { return { type: "DELETE", url: e.dataSource.url + "/" + i, data: JSON.stringify(i) } }, t.prototype.update = function (e, t, i, n) { return { type: "PUT", url: e.dataSource.url, data: JSON.stringify(i) } }, t.prototype.batchRequest = function (e, t, i) { var n = this, r = i.guid = JD.getGuid(this.options.batchPre), o = e.dataSource.url.replace(/\/*$/, "/" + this.options.batch); i.url = this.resourceTableName ? this.resourceTableName : i.url; for (var s = [], a = function (n, o) { t.addedRecords.forEach(function (o, a) { var l = function (e, t, i) { return "" }; s.push("--" + r), s.push("Content-Type: application/http; msgtype=request", ""), s.push("POST /api/" + (e.dataSource.insertUrl || e.dataSource.crudUrl || i.url) + l(t.addedRecords, n, i.key) + " HTTP/1.1"), s.push("Content-Type: application/json; charset=utf-8"), s.push("Host: " + location.host), s.push("", o ? JSON.stringify(o) : "") }) }, l = 0, h = t.addedRecords.length; l < h; l++)a(l); var d = function (o, a) { t.changedRecords.forEach(function (a, l) { n.options.updateType; var h = function (e, t, i) { return "" }; s.push("--" + r), s.push("Content-Type: application/http; msgtype=request", ""), s.push("PUT /api/" + (e.dataSource.updateUrl || e.dataSource.crudUrl || i.url) + h(t.changedRecords, o, i.key) + " HTTP/1.1"), s.push("Content-Type: application/json; charset=utf-8"), s.push("Host: " + location.host), s.push("", a ? JSON.stringify(a) : "") }) }; for (l = 0, h = t.changedRecords.length; l < h; l++)d(l); var c = function (n, o) { t.deletedRecords.forEach(function (o, a) { var l = function (e, t, i) { var n = JD.getObject(i, e[t]); if ("number" == typeof n || JD.parse.isGuid(n)) return "/" + n; if (n instanceof Date) { return "/" + e[t][i].toJSON() } return "/'" + n + "'" }; s.push("--" + r), s.push("Content-Type: application/http; msgtype=request", ""), s.push("DELETE /api/" + (e.dataSource.removeUrl || e.dataSource.crudUrl || i.url) + l(t.deletedRecords, n, i.key) + " HTTP/1.1"), s.push("Content-Type: application/json; charset=utf-8"), s.push("Host: " + location.host), s.push("", o ? JSON.stringify(o) : "") }) }; for (l = 0, h = t.deletedRecords.length; l < h; l++)c(l); return s.push("--" + r + "--", ""), { type: "POST", url: o, contentType: "multipart/mixed; boundary=" + r, data: s.join("\r\n") } }, t.prototype.beforeSend = function (e, t, i) { t.setRequestHeader("Accept", "application/json, text/javascript, */*; q=0.01") }, t.prototype.processResponse = function (e, t, i, n, r, o) { var s = r && r.pvtData, a = null, l = {}; if (r && "post" !== r.type.toLowerCase()) { var h = n && r.getResponseHeader("DataServiceVersion"), d = h && parseInt(h, 10) || 2; i && i.isCountRequired && (JD.isNull(e.Count) || (a = e.Count)), d < 3 && e.Items && (e = e.Items), l.count = a, l.result = e, this.getAggregateResult(s, e, l, null, i) } return l.result = l.result || e, JD.isNull(a) ? l.result : { result: l.result, count: l.count, aggregates: l.aggregates } }, t }(tA), rA = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZD(t, e), t.prototype.processQuery = function (e, t, i) { var n = (new eA).processQuery(e, t, i), r = JD.parse.parseJson(n.data), o = {}; if (r.param) for (var s = 0; s < r.param.length; s++) { var a = r.param[s], l = Object.keys(a)[0]; o[l] = a[l] } o.value = r; return { data: JSON.stringify(o), url: n.url, pvtData: n.pvtData, type: "POST", contentType: "application/json; charset=utf-8" } }, t }(eA), oA = function (e) { function t() { var t = e.call(this) || this; return r("beforeSend", eA.prototype.beforeSend, t), t } return ZD(t, e), t.prototype.insert = function (e, t, i, n, r) { return this.pvt.position = r, this.updateType = "add", { url: e.dataSource.insertUrl || e.dataSource.crudUrl || e.dataSource.url, data: JSON.stringify(h({}, { value: t, table: i, action: "insert" }, JD.getAddParams(this, e, n))) } }, t.prototype.remove = function (t, i, n, r, o) { return e.prototype.remove.call(this, t, i, n), { type: "POST", url: t.dataSource.removeUrl || t.dataSource.crudUrl || t.dataSource.url, data: JSON.stringify(h({}, { key: n, keyColumn: i, table: r, action: "remove" }, JD.getAddParams(this, t, o))) } }, t.prototype.update = function (e, t, i, n, r) { return this.updateType = "update", this.updateKey = t, { type: "POST", url: e.dataSource.updateUrl || e.dataSource.crudUrl || e.dataSource.url, data: JSON.stringify(h({}, { value: i, action: "update", keyColumn: t, key: i[t], table: n }, JD.getAddParams(this, e, r))) } }, t.prototype.processResponse = function (t, i, n, r, o, s, a) { var l; if ("add" === this.updateType && e.prototype.insert.call(this, i, t, null, null, this.pvt.position), "update" === this.updateType && e.prototype.update.call(this, i, this.updateKey, t), this.updateType = void 0, t.added) for (l = 0; l < t.added.length; l++)e.prototype.insert.call(this, i, t.added[l]); if (t.changed) for (l = 0; l < t.changed.length; l++)e.prototype.update.call(this, i, a.key, t.changed[l]); if (t.deleted) for (l = 0; l < t.deleted.length; l++)e.prototype.remove.call(this, i, a.key, t.deleted[l]); return t }, t.prototype.batchRequest = function (e, t, i) { return { type: "POST", url: e.dataSource.batchUrl || e.dataSource.crudUrl || e.dataSource.url, contentType: "application/json; charset=utf-8", dataType: "json", data: JSON.stringify({ changed: t.changedRecords, added: t.addedRecords, deleted: t.deletedRecords, action: "batch", table: i.url, key: i.key }) } }, t.prototype.addParams = function (e) { (new eA).addParams(e) }, t }($D), sA = function (e) { function t(t, i, n) { var r = e.call(this) || this; r.isCrudAction = !1, r.isInsertAction = !1, d(t) || (r.cacheAdaptor = t), r.pageSize = n, r.guidId = JD.getGuid("cacheAdaptor"); window.localStorage.setItem(r.guidId, JSON.stringify({ keys: [], results: [] })); var o = r.guidId; return d(i) || setInterval(function () { var e; e = JD.parse.parseJson(window.localStorage.getItem(o)); for (var t = [], n = 0; n < e.results.length; n++) { var r = +new Date, s = +new Date(e.results[n].timeStamp); e.results[n].timeStamp = r - s, r - s > i && t.push(n) } for (n = 0; n < t.length; n++)e.results.splice(t[n], 1), e.keys.splice(t[n], 1); window.localStorage.removeItem(o), window.localStorage.setItem(o, JSON.stringify(e)) }, i), r } return ZD(t, e), t.prototype.generateKey = function (e, t) { var i = this.getQueryRequest(t), n = GD.filterQueryLists(t.queries, ["onSelect", "onPage", "onSkip", "onTake", "onRange"]), r = e; "onPage" in n && (r += n.onPage.pageIndex), i.sorts.forEach(function (e) { r += e.e.direction + e.e.fieldName }), i.groups.forEach(function (e) { r += e.e.fieldName }), i.searches.forEach(function (e) { r += e.e.searchKey }); for (var o = 0; o < i.filters.length; o++) { var s = i.filters[o]; if (s.e.isComplex) { var a = t.clone(); a.queries = []; for (var l = 0; l < s.e.predicates.length; l++)a.queries.push({ fn: "onWhere", e: s.e.predicates[l], filter: t.queries.filter }); r += s.e.condition + this.generateKey(e, a) } else r += s.e.field + s.e.operator + s.e.value } return r }, t.prototype.processQuery = function (e, t, i) { var n, r = this.generateKey(e.dataSource.url, t), o = (n = JD.parse.parseJson(window.localStorage.getItem(this.guidId))) ? n.results[n.keys.indexOf(r)] : null; return null == o || this.isCrudAction || this.isInsertAction ? (this.isCrudAction = null, this.isInsertAction = null, this.cacheAdaptor.processQuery.apply(this.cacheAdaptor, [].slice.call(arguments, 0))) : o }, t.prototype.processResponse = function (e, t, i, n, r, o) { if (this.isInsertAction || r && this.cacheAdaptor.options.batch && JD.endsWith(r.url, this.cacheAdaptor.options.batch) && "post" === r.type.toLowerCase()) return this.cacheAdaptor.processResponse(e, t, i, n, r, o); e = this.cacheAdaptor.processResponse.apply(this.cacheAdaptor, [].slice.call(arguments, 0)); var s = i ? this.generateKey(t.dataSource.url, i) : t.dataSource.url, a = {}, l = (a = JD.parse.parseJson(window.localStorage.getItem(this.guidId))).keys.indexOf(s); for (-1 !== l && (a.results.splice(l, 1), a.keys.splice(l, 1)), a.results[a.keys.push(s) - 1] = { keys: s, result: e.result, timeStamp: new Date, count: e.count }; a.results.length > this.pageSize;)a.results.splice(0, 1), a.keys.splice(0, 1); return window.localStorage.setItem(this.guidId, JSON.stringify(a)), e }, t.prototype.beforeSend = function (e, t, i) { !d(this.cacheAdaptor.options.batch) && JD.endsWith(i.url, this.cacheAdaptor.options.batch) && "post" === i.type.toLowerCase() && t.setRequestHeader("Accept", this.cacheAdaptor.options.multipartAccept), e.dataSource.crossDomain || t.setRequestHeader("Accept", this.cacheAdaptor.options.accept) }, t.prototype.update = function (e, t, i, n) { return this.isCrudAction = !0, this.cacheAdaptor.update(e, t, i, n) }, t.prototype.insert = function (e, t, i) { return this.isInsertAction = !0, this.cacheAdaptor.insert(e, t, i) }, t.prototype.remove = function (e, t, i, n) { return this.isCrudAction = !0, this.cacheAdaptor.remove(e, t, i, n) }, t.prototype.batchRequest = function (e, t, i) { return this.cacheAdaptor.batchRequest(e, t, i) }, t }(eA), aA = function () { function e(e, t, i) { var n = this; this.dateParse = !0, this.timeZoneHandling = !0, this.requests = [], e || this.dataSource || (e = []), i = i || e.adaptor, e && !1 === e.timeZoneHandling && (this.timeZoneHandling = e.timeZoneHandling); var r; return e instanceof Array ? r = { json: e, offline: !0 } : "object" == typeof e ? (e.json || (e.json = []), r = { url: e.url, insertUrl: e.insertUrl, removeUrl: e.removeUrl, updateUrl: e.updateUrl, crudUrl: e.crudUrl, batchUrl: e.batchUrl, json: e.json, headers: e.headers, accept: e.accept, data: e.data, timeTillExpiration: e.timeTillExpiration, cachingPageSize: e.cachingPageSize, enableCaching: e.enableCaching, requestType: e.requestType, key: e.key, crossDomain: e.crossDomain, jsonp: e.jsonp, dataType: e.dataType, offline: void 0 !== e.offline ? e.offline : !(e.adaptor instanceof oA) && !e.url, requiresFormat: e.requiresFormat }) : JD.throwError("DataManager: Invalid arguments"), void 0 !== r.requiresFormat || JD.isCors() || (r.requiresFormat = !!d(r.crossDomain) || r.crossDomain), void 0 === r.dataType && (r.dataType = "json"), this.dataSource = r, this.defaultQuery = t, r.url && r.offline && !r.json.length ? (this.isDataAvailable = !1, this.adaptor = i || new tA, this.dataSource.offline = !1, this.ready = this.executeQuery(t || new GD), this.ready.then(function (e) { n.dataSource.offline = !0, n.isDataAvailable = !0, r.json = e.result, n.adaptor = new $D })) : this.adaptor = r.offline ? new $D : new tA, !r.jsonp && this.adaptor instanceof tA && (r.jsonp = "callback"), this.adaptor = i || this.adaptor, r.enableCaching && (this.adaptor = new sA(this.adaptor, r.timeTillExpiration, r.cachingPageSize)), this } return e.prototype.setDefaultQuery = function (e) { return this.defaultQuery = e, this }, e.prototype.executeLocal = function (t) { this.defaultQuery || t instanceof GD || JD.throwError("DataManager - executeLocal() : A query is required to execute"), this.dataSource.json || JD.throwError("DataManager - executeLocal() : Json data is required to execute"), t = t || this.defaultQuery; var i = this.adaptor.processQuery(this, t); if (t.subQuery) { var n = t.subQuery.fromTable, r = t.subQuery.lookups, o = t.isCountRequired ? i.result : i; r && r instanceof Array && JD.buildHierarchy(t.subQuery.fKey, n, o, r, t.subQuery.key); for (var s = 0; s < o.length; s++)o[s][n] instanceof Array && (o[s] = h({}, {}, o[s]), o[s][n] = this.adaptor.processResponse(t.subQuery.using(new e(o[s][n].slice(0))).executeLocal(), this, t)) } return this.adaptor.processResponse(i, this, t) }, e.prototype.executeQuery = function (t, i, n, r) { var o = this; "function" == typeof t && (r = n, n = i, i = t, t = null), t || (t = this.defaultQuery), t instanceof GD || JD.throwError("DataManager - executeQuery() : A query is required to execute"); var s = new lA, a = { query: t }; if (!this.dataSource.offline && void 0 !== this.dataSource.url && "" !== this.dataSource.url || !d(this.adaptor.makeRequest)) { var l = this.adaptor.processQuery(this, t); d(this.adaptor.makeRequest) ? d(l.url) ? (a = e.getDeferedArgs(t, l, a), s.resolve(a)) : this.makeRequest(l, s, a, t) : this.adaptor.makeRequest(l, s, a, t) } else e.nextTick(function () { var i = o.executeLocal(t); a = e.getDeferedArgs(t, i, a), s.resolve(a) }); return (i || n) && s.promise.then(i, n), r && s.promise.then(r, r), s.promise }, e.getDeferedArgs = function (e, t, i) { return e.isCountRequired ? (i.result = t.result, i.count = t.count, i.aggregates = t.aggregates) : i.result = t, i }, e.nextTick = function (e) { (window.setImmediate || window.setTimeout)(e, 0) }, e.prototype.extendRequest = function (e, t, i) { return h({}, { type: "GET", dataType: this.dataSource.dataType, crossDomain: this.dataSource.crossDomain, jsonp: this.dataSource.jsonp, cache: !0, processData: !1, onSuccess: t, onFailure: i }, e) }, e.prototype.makeRequest = function (e, t, i, n) { var r = this, o = !!n.subQuerySelector, s = function (e) { i.error = e, t.reject(i) }, a = function (e, n, r, o, s, a, l) { i.xhr = r, i.count = n ? parseInt(n.toString(), 10) : 0, i.result = e, i.request = o, i.aggregates = a, i.actual = s, i.virtualSelectRecords = l, t.resolve(i) }, l = function (e, t) { var l = new lA, h = { parent: i }; n.subQuery.isChild = !0; var d = r.adaptor.processQuery(r, n.subQuery, e ? r.adaptor.processResponse(e) : t), c = r.makeRequest(d, l, h, n.subQuery); return o || l.then(function (t) { e && (JD.buildHierarchy(n.subQuery.fKey, n.subQuery.fromTable, e, t, n.subQuery.key), a(e, t.count, t.xhr)) }, s), c }, h = this.extendRequest(e, function (e, t) { -1 === t.httpRequest.getResponseHeader("Content-Type").indexOf("xml") && r.dateParse && (e = JD.parse.parseJson(e)); var i = r.adaptor.processResponse(e, r, n, t.httpRequest, t), s = 0, h = null, d = e.virtualSelectRecords; n.isCountRequired && (s = i.count, h = i.aggregates, i = i.result), n.subQuery ? o || l(i, t) : a(i, s, t.httpRequest, t.type, e, h, d) }, s), d = new Zv(h); if (d.beforeSend = function () { r.beforeSend(d.httpRequest, d) }, (h = d.send()).catch(function (e) { return !0 }), this.requests.push(d), o) { var c = n.subQuerySelector.call(this, { query: n.subQuery, parent: n }); c && c.length ? Promise.all([h, l(null, c)]).then(function () { for (var e = [], t = 0; t < arguments.length; t++)e[t] = arguments[t]; var i = e[0], s = r.adaptor.processResponse(i[0], r, n, r.requests[0].httpRequest, r.requests[0]), l = 0; n.isCountRequired && (l = s.count, s = s.result); var h = r.adaptor.processResponse(i[1], r, n.subQuery, r.requests[1].httpRequest, r.requests[1]); l = 0, n.subQuery.isCountRequired && (l = h.count, h = h.result), JD.buildHierarchy(n.subQuery.fKey, n.subQuery.fromTable, s, h, n.subQuery.key), o = !1, a(s, l, r.requests[0].httpRequest) }) : o = !1 } return h }, e.prototype.beforeSend = function (e, t) { this.adaptor.beforeSend(this, e, t); for (var i, n = this.dataSource.headers, r = 0; n && r < n.length; r++) { i = []; for (var o = 0, s = Object.keys(n[r]); o < s.length; o++) { var a = s[o]; i.push(a), e.setRequestHeader(a, n[r][a]) } } }, e.prototype.saveChanges = function (e, t, i, n, r) { var o = this; i instanceof GD && (n = i, i = null); var s = { url: i, key: t || this.dataSource.key }, a = this.adaptor.batchRequest(this, e, s, n || new GD, r); if (this.dataSource.offline) return a; if (d(this.adaptor.doAjaxRequest)) { var l = new lA, h = new Zv(a); return h.beforeSend = function () { o.beforeSend(h.httpRequest, h) }, h.onSuccess = function (t, i) { l.resolve(o.adaptor.processResponse(t, o, null, i.httpRequest, i, e, s)) }, h.onFailure = function (e) { l.reject([{ error: e }]) }, h.send().catch(function (e) { return !0 }), l.promise } return this.adaptor.doAjaxRequest(a) }, e.prototype.insert = function (e, t, i, n) { t instanceof GD && (i = t, t = null); var r = this.adaptor.insert(this, e, t, i, n); return this.dataSource.offline ? r : d(this.adaptor.doAjaxRequest) ? this.doAjaxRequest(r) : this.adaptor.doAjaxRequest(r) }, e.prototype.remove = function (e, t, i, n) { "object" == typeof t && (t = t[e]), i instanceof GD && (n = i, i = null); var r = this.adaptor.remove(this, e, t, i, n); return this.dataSource.offline ? r : d(this.adaptor.doAjaxRequest) ? this.doAjaxRequest(r) : this.adaptor.doAjaxRequest(r) }, e.prototype.update = function (e, t, i, n, r) { i instanceof GD && (n = i, i = null); var o = this.adaptor.update(this, e, t, i, n, r); return this.dataSource.offline ? o : d(this.adaptor.doAjaxRequest) ? this.doAjaxRequest(o) : this.adaptor.doAjaxRequest(o) }, e.prototype.doAjaxRequest = function (e) { var t = this, i = new lA; e = h({}, { type: "POST", contentType: "application/json; charset=utf-8", processData: !1 }, e); var n = new Zv(e); return n.beforeSend = function () { t.beforeSend(n.httpRequest, n) }, n.onSuccess = function (e, n) { try { JD.parse.parseJson(e) } catch (t) { e = [] } e = t.adaptor.processResponse(JD.parse.parseJson(e), t, null, n.httpRequest, n), i.resolve(e) }, n.onFailure = function (e) { i.reject([{ error: e }]) }, n.send().catch(function (e) { return !0 }), i.promise }, e }(), lA = function () { return function () { var e = this; this.promise = new Promise(function (t, i) { e.resolve = t, e.reject = i }), this.then = this.promise.then.bind(this.promise), this.catch = this.promise.catch.bind(this.promise) } }(), hA = { li: "e-list-item", ul: "e-list-parent e-ul", group: "e-list-group-item", icon: "e-list-icon", text: "e-list-text", check: "e-list-check", checked: "e-checked", selected: "e-selected", expanded: "e-expanded", textContent: "e-text-content", hasChild: "e-has-child", level: "e-level", url: "e-list-url", collapsible: "e-icon-collapsible", disabled: "e-disabled", image: "e-list-img", iconWrapper: "e-icon-wrapper" }; !function (e) { function t(e, t, n, r) { return b(e, i(e, t, n, r), null, r) } function i(e, t, i, n) { var r = [], o = h({}, L, n); hA = y(o.moduleName); for (var s = m(), a = 0; a < t.length; a++)if (!d(t[a])) { var l = void 0; if (o.itemCreating && "function" == typeof o.itemCreating) { var c = { dataSource: t, curData: t[a], text: t[a], options: o }; o.itemCreating(c) } if (l = i ? f(e, t[a], void 0, null, null, [], null, s, a, n) : w(e, t[a], void 0, null, null, n), o.itemCreated && "function" == typeof o.itemCreated) { c = { dataSource: t, curData: t[a], text: t[a], item: l, options: o }; o.itemCreated(c) } r.push(l) } return r } function n(t, i, n, o, s) { var a = h({}, L, n); hA = y(a.moduleName); var c, g = h({}, e.defaultMappedFields, a.fields), v = h({}, C, a.ariaAttributes); o && (v.level = o); var b, M = []; i && i.length && !d(p(i).item) && !p(i).item.hasOwnProperty(g.id) && (c = m()); for (var S = 0; S < i.length; S++) { var x = wi(i[S], g); if (!d(i[S])) { if (a.itemCreating && "function" == typeof a.itemCreating) { var T = { dataSource: i, curData: i[S], text: x[g.text], options: a, fields: g }; a.itemCreating(T) } var D = i[S]; a.itemCreating && "function" == typeof a.itemCreating && (x = wi(i[S], g)), x.hasOwnProperty(g.id) && !d(x[g.id]) && (c = x[g.id]); var j = []; if (a.showCheckBox && j.push(t("input", { className: hA.check, attrs: { type: "checkbox" } })), !0 === s) a.showIcon && x.hasOwnProperty(g.iconCss) && !d(x[g.iconCss]) && j.push(t("span", { className: hA.icon + " " + x[g.iconCss] })), b = f(t, D, x, g, a.itemClass, j, !(!D.hasOwnProperty("isHeader") || !D.isHeader), c, S, n); else { if ((b = w(t, D, x, g, a.itemClass, n)).classList.add(hA.level + "-" + v.level), b.setAttribute("aria-level", v.level.toString()), x.hasOwnProperty(g.tooltip) && b.setAttribute("title", x[g.tooltip]), x.hasOwnProperty(g.htmlAttributes) && x[g.htmlAttributes] && u(b, x[g.htmlAttributes]), x.hasOwnProperty(g.enabled) && !1 === x[g.enabled] && b.classList.add(hA.disabled), x.hasOwnProperty(g.isVisible) && !1 === x[g.isVisible] && (b.style.display = "none"), x.hasOwnProperty(g.imageUrl) && !d(x[g.imageUrl]) && !a.template) { var I = { src: x[g.imageUrl] }; l(I, x[g.imageAttributes]), A([t("img", { className: hA.image, attrs: I })], b.firstElementChild) } a.showIcon && x.hasOwnProperty(g.iconCss) && !d(x[g.iconCss]) && !a.template && A([t("div", { className: hA.icon + " " + x[g.iconCss] })], b.firstElementChild), j.length && A(j, b.firstElementChild), function (e, t, i, n, o, s, a) { var l = t[i.child] || [], h = t[i.hasChildren]; if (l.length && (h = !0, s.classList.add(hA.hasChild), o.processSubChild)) { var d = r(e, l, o, ++a); s.appendChild(d) } if (o.expandCollapse && h && !o.template) { s.firstElementChild.classList.add(hA.iconWrapper); var c = "Left" === o.expandIconPosition ? A : E; c([e("div", { className: "e-icons " + o.expandIconClass })], s.querySelector("." + hA.textContent)) } }(t, x, g, 0, a, b, v.level) } if (a.itemCreated && "function" == typeof a.itemCreated) { T = { dataSource: i, curData: i[S], text: x[g.text], item: b, options: a, fields: g }; a.itemCreated(T) } M.push(b) } } return M } function r(e, t, i, r, o) { var s = h({}, L, i); return b(e, n(e, t, i, r, o), s.listClass, i) } function o(e, t) { if (t && e) { return Array.prototype.slice.call(t).indexOf(e) } } function s(e, t, i) { if (void 0 === i && (i = new GD), "Ascending" === e) i.sortBy(t, "ascending", !0); else if ("Descending" === e) i.sortBy(t, "descending", !0); else for (var n = 0; n < i.queries.length; n++)"onSortBy" === i.queries[n].fn && i.queries.splice(n, 1); return i } function a(e, t) { return new aA(e).executeLocal(t) } function c(t, i) { var n = h({}, L, i), r = h({}, e.defaultMappedFields, n.fields), o = t.cloneNode(!0), s = []; o.classList.add("json-parent"); var a = o.querySelectorAll(".json-parent>li"); o.classList.remove("json-parent"); for (var l = 0; l < a.length; l++) { for (var d = a[l], p = d.querySelector("a"), u = d.querySelector("ul"), f = {}, y = p ? p.childNodes : d.childNodes, v = Object.keys(y), w = 0; w < y.length; w++)y[Number(v[w])].hasChildNodes() || (f[r.text] = y[Number(v[w])].textContent); var b = g(d); b.id ? (f[r.id] = b.id, delete b.id) : f[r.id] = m(), Object.keys(b).length && (f[r.htmlAttributes] = b), p && (b = g(p), Object.keys(b).length && (f[r.urlAttributes] = b)), u && (f[r.child] = c(u, i)), s.push(f) } return s } function p(e) { for (var t = { typeof: null, item: null }, i = 0; i < e.length; i++)if (!d(e[i])) return t = { typeof: typeof e[i], item: e[i] }; return t } function u(e, t) { var i = {}; l(i, t), i.class && (S([e], i.class.split(" ")), delete i.class), P(e, i) } function g(e) { for (var t = {}, i = e.attributes, n = 0; n < i.length; n++)t[i[n].nodeName] = i[n].nodeValue; return t } function m() { return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1) } function f(e, t, i, n, r, o, s, a, l, c) { var p, g = h({}, L, c), m = h({}, C, g.ariaAttributes), f = t, y = t; "string" != typeof t && "number" != typeof t && "boolean" != typeof t && (p = t, f = "boolean" == typeof i[n.text] || "number" == typeof i[n.text] ? i[n.text] : i[n.text] || "", y = i[n.value]); var w; w = d(p) || d(i[n.id]) || "" === i[n.id] ? a + "-" + l : a; var b = e("li", { className: (!0 === s ? hA.group : hA.li) + " " + (d(r) ? "" : r), id: w, attrs: "" !== m.groupItemRole && "" !== m.itemRole ? { role: !0 === s ? m.groupItemRole : m.itemRole } : {} }); return p && i.hasOwnProperty(n.enabled) && "false" === i[n.enabled].toString() && b.classList.add(hA.disabled), s ? b.innerText = f : (d(y) || b.setAttribute("data-value", y), b.setAttribute("role", "option"), p && i.hasOwnProperty(n.htmlAttributes) && i[n.htmlAttributes] && u(b, i[n.htmlAttributes]), o.length && E(o, b), p && (i[n.url] || i[n.urlAttributes] && i[n.urlAttributes].href) ? b.appendChild(v(e, p, n, f)) : b.appendChild(document.createTextNode(f))), b } function y(e) { return { li: "e-" + e + "-item", ul: "e-" + e + "-parent e-ul", group: "e-" + e + "-group-item", icon: "e-" + e + "-icon", text: "e-" + e + "-text", check: "e-" + e + "-check", checked: "e-checked", selected: "e-selected", expanded: "e-expanded", textContent: "e-text-content", hasChild: "e-has-child", level: "e-level", url: "e-" + e + "-url", collapsible: "e-icon-collapsible", disabled: "e-disabled", image: "e-" + e + "-img", iconWrapper: "e-icon-wrapper" } } function v(e, t, i, n) { var r = wi(t, i), o = { href: r[i.url] }; r.hasOwnProperty(i.urlAttributes) && r[i.urlAttributes] && (l(o, r[i.urlAttributes]), o.href = r[i.url] ? r[i.url] : r[i.urlAttributes].href); var s = e("a", { className: hA.text + " " + hA.url, innerHTML: n }); return u(s, o), s } function w(e, t, i, n, r, o) { var s, a, l, c = h({}, L, o), p = h({}, C, c.ariaAttributes), u = t; "string" != typeof t && "number" != typeof t && (l = t, u = i[n.text] || "", s = i[n.id], a = !(!t.hasOwnProperty("isHeader") || !t.isHeader)); var g = e("li", { className: (!0 === a ? hA.group : hA.li) + " " + (d(r) ? "" : r), attrs: "" !== p.groupItemRole && "" !== p.itemRole ? { role: !0 === a ? p.groupItemRole : p.itemRole } : {} }); if (d(s) ? g.setAttribute("data-uid", m()) : g.setAttribute("data-uid", s), a && o && o.groupTemplate) { E(ce(o.groupTemplate)(t, null, null, c.groupTemplateID, !!c.isStringTemplate), g) } else if (!a && o && o.template) { E(ce(o.template)(t, null, null, c.templateID, !!c.isStringTemplate), g) } else { var f = e("div", { className: hA.textContent, attrs: "" !== p.wrapperRole ? { role: p.wrapperRole } : {} }); l && (i[n.url] || i[n.urlAttributes] && i[n.urlAttributes].href) ? f.appendChild(v(e, l, n, u)) : f.appendChild(e("span", { className: hA.text, innerHTML: u, attrs: "" !== p.itemText ? { role: p.itemText } : {} })), g.appendChild(f) } return g } function b(e, t, i, n) { var r = h({}, L, n), o = h({}, C, r.ariaAttributes), s = e("ul", { className: (hA = y(r.moduleName)).ul + " " + (d(i) ? "" : i), attrs: "" !== o.listRole ? { role: o.listRole } : {} }); return E(t, s), s } e.defaultMappedFields = { id: "id", text: "text", url: "url", value: "value", isChecked: "isChecked", enabled: "enabled", expanded: "expanded", selected: "selected", iconCss: "iconCss", child: "child", isVisible: "isVisible", hasChildren: "hasChildren", tooltip: "tooltip", htmlAttributes: "htmlAttributes", urlAttributes: "urlAttributes", imageAttributes: "imageAttributes", imageUrl: "imageUrl", groupBy: null }; var C = { level: 1, listRole: "presentation", itemRole: "presentation", groupItemRole: "group", itemText: "list-item", wrapperRole: "presentation" }, L = { showCheckBox: !1, showIcon: !1, expandCollapse: !1, fields: e.defaultMappedFields, ariaAttributes: C, listClass: "", itemClass: "", processSubChild: !1, sortOrder: "None", template: null, groupTemplate: null, headerTemplate: null, expandIconClass: "e-icon-collapsible", moduleName: "list", expandIconPosition: "Right" }; e.createList = function (e, i, n, o) { var s = h({}, L, n), a = h({}, C, s.ariaAttributes), l = p(i).typeof; return "string" === l || "number" === l ? t(e, i, o, n) : r(e, i, n, a.level, o) }, e.createListFromArray = t, e.createListItemFromArray = i, e.createListItemFromJson = n, e.createListFromJson = r, e.getSiblingLI = function (e, t, i) { if (hA = y(L.moduleName), e && e.length) { var n, r, s = Array.prototype.slice.call(e); for (n = s[(r = t ? o(t, s) : !0 === i ? s.length : -1) + (!0 === i ? -1 : 1)]; n && (!D(n) || n.classList.contains(hA.disabled));)n = s[r += !0 === i ? -1 : 1]; return n } }, e.indexOf = o, e.groupDataSource = function (t, i, n) { void 0 === n && (n = "None"); var r = h({}, e.defaultMappedFields, i), o = (new GD).group(r.groupBy), l = a(t, o = s(n, "key", o)); t = []; for (var d = 0; d < l.length; d++) { var c = l[d].items, p = {}; p[r.text] = l[d].key, p.isHeader = !0, p.id = "group-list-item-" + (l[d].key ? l[d].key.toString().trim() : "undefined"), p.items = c, t.push(p); for (var u = 0; u < c.length; u++)t.push(c[u]) } return t }, e.addSorting = s, e.getDataSource = a, e.createJsonFromElement = c, e.renderContentTemplate = function (t, i, n, r, o) { for (var s = t("ul", { className: (hA = y(L.moduleName)).ul, attrs: { role: "presentation" } }), a = h({}, L, o), l = h({}, e.defaultMappedFields, r), d = ce(i), c = [], p = m(), u = 0; u < n.length; u++) { var g = wi(n[u], l), f = n[u], v = f.isHeader, w = g[l.value]; if (a.itemCreating && "function" == typeof a.itemCreating) { var b = { dataSource: n, curData: f, text: w, options: a, fields: l }; a.itemCreating(b) } a.itemCreating && "function" == typeof a.itemCreating && (w = (g = wi(n[u], l))[l.value]); var C = t("li", { id: p + "-" + u, className: v ? hA.group : hA.li, attrs: { role: "presentation" } }); v ? C.innerText = g[l.text] : (E(d(f, null, null, v ? a.groupTemplateID : a.templateID, !!a.isStringTemplate), C), C.setAttribute("data-value", w), C.setAttribute("role", "option")), a.itemCreated && "function" == typeof a.itemCreated && (b = { dataSource: n, curData: f, text: w, item: C, options: a, fields: l }, a.itemCreated(b)), c.push(C) } return E(c, s), s }, e.renderGroupTemplate = function (t, i, n, r, o) { for (var s = ce(t), a = h({}, e.defaultMappedFields, n), l = h({}, L, o), d = a.groupBy, c = 0, p = r; c < p.length; c++) { var u = p[c], g = {}; g[d] = u.textContent, u.innerHTML = "", E(s(g, null, null, l.groupTemplateID, !!l.isStringTemplate), u) } return r }, e.generateId = m, e.generateUL = b, e.generateIcon = function (e, t, i, n) { var r = h({}, L, n); return hA = y(r.moduleName), ("Left" === r.expandIconPosition ? A : E)([e("div", { className: "e-icons " + r.expandIconClass + " " + (d(i) ? "" : i) })], t.querySelector("." + hA.textContent)), t } }(hT || (hT = {})); var dA, cA = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pA = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, uA = { None: [], SlideLeft: ["SlideRightOut", "SlideLeftOut", "SlideLeftIn", "SlideRightIn"], SlideDown: ["SlideTopOut", "SlideBottomOut", "SlideBottomIn", "SlideTopIn"], Zoom: ["FadeOut", "FadeZoomOut", "FadeZoomIn", "FadeIn"], Fade: ["FadeOut", "FadeOut", "FadeIn", "FadeIn"] }, gA = { None: [], SlideLeft: ["SlideLeftOut", "SlideRightOut", "SlideRightIn", "SlideLeftIn"], SlideDown: ["SlideBottomOut", "SlideTopOut", "SlideTopIn", "SlideBottomIn"], Zoom: ["FadeZoomOut", "FadeOut", "FadeIn", "FadeZoomIn"], Fade: ["FadeOut", "FadeOut", "FadeIn", "FadeIn"] }, mA = { root: "e-listview", hover: "e-hover", selected: "e-active", focused: "e-focused", parentItem: "e-list-parent", listItem: "e-list-item", listIcon: "e-list-icon", textContent: "e-text-content", listItemText: "e-list-text", groupListItem: "e-list-group-item", hasChild: "e-has-child", view: "e-view", header: "e-list-header", headerText: "e-headertext", headerTemplateText: "e-headertemplate-text", text: "e-text", disable: "e-disabled", content: "e-content", icon: "e-icons", backIcon: "e-icon-back", checkboxWrapper: "e-checkbox-wrapper", checkbox: "e-checkbox", checked: "e-check", checklist: "e-checklist", checkboxIcon: "e-frame", checkboxRight: "e-checkbox-right", checkboxLeft: "e-checkbox-left", listviewCheckbox: "e-listview-checkbox", itemCheckList: "e-checklist" }, fA = "GroupTemplate", yA = "HeaderTemplate", vA = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return cA(t, e), pA([Y("id")], t.prototype, "id", void 0), pA([Y("text")], t.prototype, "text", void 0), pA([Y("isChecked")], t.prototype, "isChecked", void 0), pA([Y("isVisible")], t.prototype, "isVisible", void 0), pA([Y("enabled")], t.prototype, "enabled", void 0), pA([Y("iconCss")], t.prototype, "iconCss", void 0), pA([Y("child")], t.prototype, "child", void 0), pA([Y("tooltip")], t.prototype, "tooltip", void 0), pA([Y("groupBy")], t.prototype, "groupBy", void 0), pA([Y("text")], t.prototype, "sortBy", void 0), pA([Y("htmlAttributes")], t.prototype, "htmlAttributes", void 0), pA([Y("tableName")], t.prototype, "tableName", void 0), t }(ww), wA = function (e) { function t(t, i) { return e.call(this, t, i) || this } return cA(t, e), t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "htmlAttributes": this.setHTMLAttribute(); break; case "cssClass": this.setCSSClass(t.cssClass); break; case "enable": this.setEnable(); break; case "width": case "height": this.setSize(); break; case "enableRtl": this.setEnableRTL(); break; case "fields": this.listBaseOption.fields = this.fields.properties, this.enableVirtualization ? this.virtualizationModule.reRenderUiVirtualization() : this.reRender(); break; case "headerTitle": this.curDSLevel.length || this.header(this.headerTitle, !1); break; case "showHeader": this.header(this.headerTitle, !1); break; case "enableVirtualization": d(this.contentContainer) || I(this.contentContainer), this.refresh(); break; case "showCheckBox": case "checkBoxPosition": this.enableVirtualization ? this.virtualizationModule.reRenderUiVirtualization() : this.setCheckbox(); break; case "dataSource": this.enableVirtualization ? this.virtualizationModule.reRenderUiVirtualization() : this.reRender(); break; case "sortOrder": case "showIcon": this.enableVirtualization ? this.virtualizationModule.reRenderUiVirtualization() : (this.listBaseOption.showIcon = this.showIcon, this.curViewDS = this.getSubDS(), this.resetCurrentList()) } } }, t.prototype.setHTMLAttribute = function () { Object.keys(this.htmlAttributes).length && P(this.element, this.htmlAttributes) }, t.prototype.setCSSClass = function (e) { this.cssClass && S([this.element], this.cssClass.split(" ").filter(function (e) { return e })), e && x([this.element], e.split(" ").filter(function (e) { return e })) }, t.prototype.setSize = function () { this.element.style.height = v(this.height), this.element.style.width = v(this.width), this.isWindow = !this.element.clientHeight }, t.prototype.setEnable = function () { this.enableElement(this.element, this.enable) }, t.prototype.setEnableRTL = function () { this.enableRtl ? this.element.classList.add("e-rtl") : this.element.classList.remove("e-rtl") }, t.prototype.enableElement = function (e, t) { t ? e.classList.remove(mA.disable) : e.classList.add(mA.disable) }, t.prototype.header = function (e, t) { if (void 0 === this.headerEle && this.showHeader) { this.headerEle = this.createElement("div", { className: mA.header }); var i = this.createElement("span", { className: mA.headerText, innerHTML: this.headerTitle }), n = this.createElement("div", { className: mA.text, innerHTML: i.outerHTML }), r = this.createElement("div", { className: mA.icon + " " + mA.backIcon + " e-but-back", attrs: { style: "display:none;" } }); if (this.headerEle.appendChild(r), this.headerEle.appendChild(n), this.headerTemplate) { var o = ce(this.headerTemplate), s = this.createElement("div", { className: mA.headerTemplateText }); E(o({}, null, null, this.LISTVIEW_HEADERTEMPLATE_ID), s), E([s], this.headerEle), this.updateBlazorTemplates(!1, !0, !0) } this.headerTemplate && this.headerTitle && n.classList.add("header"), this.element.classList.add("e-has-header"), A([this.headerEle], this.element) } else if (this.headerEle) if (this.showHeader) { this.headerEle.style.display = ""; n = this.headerEle.querySelector("." + mA.headerText), r = this.headerEle.querySelector("." + mA.backIcon); n.innerHTML = e, this.headerTemplate && t && (n.parentElement.classList.remove("header"), this.headerEle.querySelector("." + mA.headerTemplateText).classList.add("nested-header")), this.headerTemplate && !t && (n.parentElement.classList.add("header"), this.headerEle.querySelector("." + mA.headerTemplateText).classList.remove("nested-header"), this.headerEle.querySelector("." + mA.headerTemplateText).classList.add("header")), r.style.display = !0 === t ? "" : "none" } else this.headerEle.style.display = "none" }, t.prototype.switchView = function (e, t, i) { var n = this; if (e && t) { var r = e.style.position, o = "hidden" !== this.element.style.overflow ? this.element.style.overflow : ""; e.style.position = "absolute", e.classList.add("e-view"); var s = void 0, a = this.animation.duration; if (this.animation.effect) s = this.enableRtl ? gA[this.animation.effect] : uA[this.animation.effect]; else { s = uA.SlideLeft, i = this.enableRtl, a = 0 } this.element.style.overflow = "hidden", this.aniObj.animate(e, { name: !0 === i ? s[0] : s[1], duration: a, timingFunction: this.animation.easing, end: function (t) { e.style.display = "none", n.element.style.overflow = o, e.style.position = r, e.classList.remove("e-view") } }), t.style.display = "", this.aniObj.animate(t, { name: !0 === i ? s[2] : s[3], duration: a, timingFunction: this.animation.easing, end: function () { n.trigger("actionComplete") } }), this.curUL = t } }, t.prototype.preRender = function () { this.listBaseOption = { template: this.template, headerTemplate: this.headerTemplate, groupTemplate: this.groupTemplate, expandCollapse: !0, listClass: "", ariaAttributes: { itemRole: "listitem", listRole: "list", itemText: "", groupItemRole: "group", wrapperRole: "presentation" }, fields: this.fields.properties, sortOrder: this.sortOrder, showIcon: this.showIcon, itemCreated: this.renderCheckbox.bind(this), templateID: this.element.id + "Template", groupTemplateID: "" + this.element.id + fA }, this.initialization() }, t.prototype.initialization = function () { this.curDSLevel = [], this.animateOptions = {}, this.curViewDS = [], this.currentLiElements = [], this.isNestedList = !1, this.selectedData = [], this.selectedId = [], this.LISTVIEW_TEMPLATE_ID = this.element.id + "Template", this.LISTVIEW_GROUPTEMPLATE_ID = "" + this.element.id + fA, this.LISTVIEW_HEADERTEMPLATE_ID = "" + this.element.id + yA, this.aniObj = new fw(this.animateOptions) }, t.prototype.renderCheckbox = function (e) { if (e.item.classList.contains(mA.hasChild) && (this.isNestedList = !0), this.showCheckBox && this.isValidLI(e.item)) { var t = void 0; (t = De(this.createElement, !1, { checked: !1, enableRtl: this.enableRtl, cssClass: mA.listviewCheckbox })).setAttribute("role", "checkbox"); var i = t.querySelector("." + mA.checkboxIcon); e.item.classList.add(mA.itemCheckList), e.item.firstElementChild.classList.add(mA.checkbox), "string" != typeof this.dataSource[0] && "number" != typeof this.dataSource[0] ? wi(e.curData, this.listBaseOption.fields)[this.listBaseOption.fields.isChecked] && this.checkInternally(e, t) : "string" != typeof this.dataSource[0] && "number" != typeof this.dataSource[0] || -1 === this.selectedData.indexOf(e.text) || this.checkInternally(e, t), t.setAttribute("aria-checked", i.classList.contains(mA.checked) ? "true" : "false"), "Left" === this.checkBoxPosition ? (t.classList.add(mA.checkboxLeft), e.item.firstElementChild.classList.add(mA.checkboxLeft), e.item.firstElementChild.insertBefore(t, e.item.firstElementChild.childNodes[0])) : (t.classList.add(mA.checkboxRight), e.item.firstElementChild.classList.add(mA.checkboxRight), e.item.firstElementChild.appendChild(t)), this.currentLiElements.push(e.item) } }, t.prototype.checkInternally = function (e, t) { e.item.classList.add(mA.selected), e.item.setAttribute("aria-selected", "true"), t.querySelector("." + mA.checkboxIcon).classList.add(mA.checked), t.setAttribute("aria-checked", "true") }, t.prototype.checkItem = function (e) { this.toggleCheckBase(e, !0) }, t.prototype.toggleCheckBase = function (e, t) { if (this.showCheckBox) { var i = e; if (e instanceof Object && e.constructor !== HTMLLIElement && (i = this.getLiFromObjOrElement(e)), !d(i)) { var n = i.querySelector("." + mA.checkboxIcon); t ? i.classList.add(mA.selected) : i.classList.remove(mA.selected), i.setAttribute("aria-selected", t ? "true" : "false"), t ? n.classList.add(mA.checked) : n.classList.remove(mA.checked), n.parentElement.setAttribute("aria-checked", t ? "true" : "false") } this.setSelectedItemData(i) } }, t.prototype.uncheckItem = function (e) { this.toggleCheckBase(e, !1) }, t.prototype.checkAllItems = function () { this.toggleAllCheckBase(!0) }, t.prototype.uncheckAllItems = function () { this.toggleAllCheckBase(!1) }, t.prototype.toggleAllCheckBase = function (e) { if (this.showCheckBox) { for (var t = 0; t < this.liCollection.length; t++) { var i = this.liCollection[t].querySelector("." + mA.checkboxIcon); i && (e ? i.classList.contains(mA.checked) || this.checkItem(this.liCollection[t]) : i.classList.contains(mA.checked) && this.uncheckItem(this.liCollection[t])) } this.enableVirtualization && this.virtualizationModule.checkedItem(e) } }, t.prototype.setCheckbox = function () { var e = this; if (this.showCheckBox) { var t = { item: void 0, curData: void 0, dataSource: void 0, fields: void 0, options: void 0, text: "" }; Array.prototype.slice.call(this.element.querySelectorAll("." + mA.listItem)).forEach(function (i) { t.item = i, t.curData = e.getItemData(i), i.querySelector("." + mA.checkboxWrapper) && e.removeElement(i.querySelector("." + mA.checkboxWrapper)), e.renderCheckbox(t), t.item.classList.contains(mA.selected) && e.checkInternally(t, t.item.querySelector("." + mA.checkboxWrapper)) }) } else { Array.prototype.slice.call(this.element.querySelectorAll("." + mA.itemCheckList)).forEach(function (t) { t.classList.remove(mA.selected), t.firstElementChild.classList.remove(mA.checkbox), e.removeElement(t.querySelector("." + mA.checkboxWrapper)) }), this.selectedItems && this.selectedItems.item.classList.add(mA.selected) } }, t.prototype.refreshItemHeight = function () { this.virtualizationModule.refreshItemHeight() }, t.prototype.clickHandler = function (e) { var t = e.target, i = t.classList; if (i.contains(mA.backIcon) || i.contains(mA.headerText)) this.showCheckBox && this.curDSLevel[this.curDSLevel.length - 1] && this.uncheckAllItems(), this.back(); else { var n = R(t.parentNode, "." + mA.listItem); if (null === n && (n = t), this.removeFocus(), this.enable && this.showCheckBox && this.isValidLI(n)) if (e.target.classList.contains(mA.checkboxIcon)) { if (n.classList.add(mA.focused), d(n.querySelector("." + mA.checked))) { var r = { curData: void 0, dataSource: void 0, fields: void 0, options: void 0, text: void 0, item: n }; this.checkInternally(r, r.item.querySelector("." + mA.checkboxWrapper)) } else this.uncheckItem(n), n.classList.add(mA.focused); if (this.enableVirtualization && this.virtualizationModule.setCheckboxLI(n, e), e) { var o = this.selectEventData(n, e); l(o, { isChecked: n.querySelector("." + mA.checkboxIcon).classList.contains(mA.checked) }), this.trigger("select", o) } } else n.classList.contains(mA.hasChild) ? (this.removeHover(), this.removeSelect(), this.removeSelect(n), this.setSelectLI(n, e), n.classList.remove(mA.selected)) : this.setCheckboxLI(n, e); else this.setSelectLI(n, e) } }, t.prototype.removeElement = function (e) { return e && e.parentNode && e.parentNode.removeChild(e) }, t.prototype.hoverHandler = function (e) { var t = R(e.target.parentNode, "." + mA.listItem); this.setHoverLI(t) }, t.prototype.leaveHandler = function (e) { this.removeHover() }, t.prototype.homeKeyHandler = function (e, t) { if (Object.keys(this.dataSource).length && this.curUL) { var i = this.curUL.querySelectorAll("." + mA.listItem), n = this.curUL.querySelector("." + mA.focused) || this.curUL.querySelector("." + mA.selected); n && (n.classList.remove(mA.focused), this.showCheckBox || n.classList.remove(mA.selected)); var r = t ? i.length - 1 : 0; i[r].classList.contains(mA.hasChild) || this.showCheckBox ? i[r].classList.add(mA.focused) : this.setSelectLI(i[r], e) } }, t.prototype.onArrowKeyDown = function (e, t) { var i, n; return !d(this.curUL.querySelector("." + mA.hasChild)) || this.showCheckBox ? (n = this.curUL.querySelector("." + mA.focused) || this.curUL.querySelector("." + mA.selected), d(i = hT.getSiblingLI(this.curUL.querySelectorAll("." + mA.listItem), n, t)) || (n && (n.classList.remove(mA.focused), this.showCheckBox || n.classList.remove(mA.selected)), i.classList.contains(mA.hasChild) || this.showCheckBox ? i.classList.add(mA.focused) : this.setSelectLI(i, e))) : (n = this.curUL.querySelector("." + mA.selected), i = hT.getSiblingLI(this.curUL.querySelectorAll("." + mA.listItem), n, t), this.setSelectLI(i, e)), i }, t.prototype.arrowKeyHandler = function (e, t) { var i = this; if (e.preventDefault(), Object.keys(this.dataSource).length && this.curUL) { var n = this.onArrowKeyDown(e, t), r = this.element.getBoundingClientRect().top, o = this.element.getBoundingClientRect().height, s = this.curUL.querySelector("." + mA.listItem).getBoundingClientRect(), a = void 0, l = void 0; if (this.fields.groupBy && (l = this.curUL.querySelector("." + mA.groupListItem).getBoundingClientRect()), n) { var h = n.getBoundingClientRect().top, d = n.getBoundingClientRect().height; if (t) (a = this.isWindow ? h : h - r) < 0 && (this.isWindow ? window.scroll(0, pageYOffset + a) : this.element.scrollTop = this.element.scrollTop + a); else { var c = this.isWindow ? window.innerHeight : o; (a = this.isWindow ? h + d : h - r + d) > c && (this.isWindow ? window.scroll(0, pageYOffset + (a - c)) : this.element.scrollTop = this.element.scrollTop + (a - c)) } } else if (this.enableVirtualization && t && this.virtualizationModule.uiFirstIndex) this.onUIScrolled = function () { i.onArrowKeyDown(e, t), i.onUIScrolled = void 0 }, a = this.virtualizationModule.listItemHeight, this.isWindow ? window.scroll(0, pageYOffset - a) : this.element.scrollTop = this.element.scrollTop - a; else if (t) if (this.showHeader && this.headerEle) { var p = l ? l.top : s.top, u = this.headerEle.getBoundingClientRect(); a = u.top < 0 ? u.height - p : 0, this.isWindow ? window.scroll(0, pageYOffset - a) : this.element.scrollTop = 0 } else this.fields.groupBy && (a = this.isWindow ? l.top < 0 ? l.top : 0 : r - s.top + l.height, this.isWindow ? window.scroll(0, pageYOffset + a) : this.element.scrollTop = this.element.scrollTop - a) } }, t.prototype.enterKeyHandler = function (e) { if (Object.keys(this.dataSource).length && this.curUL) { var t = !d(this.curUL.querySelector("." + mA.hasChild)), i = this.curUL.querySelector("." + mA.focused); t && i && (i.classList.remove(mA.focused), this.showCheckBox && (this.removeSelect(), this.removeSelect(i), this.removeHover()), this.setSelectLI(i, e)) } }, t.prototype.spaceKeyHandler = function (e) { if (this.enable && this.showCheckBox && Object.keys(this.dataSource).length && this.curUL) { var t = this.curUL.querySelector("." + mA.focused); if (!d(t) && d(t.querySelector("." + mA.checked))) { var i = { curData: void 0, dataSource: void 0, fields: void 0, options: void 0, text: void 0, item: t }; this.checkInternally(i, i.item.querySelector("." + mA.checkboxWrapper)) } else this.uncheckItem(t) } }, t.prototype.keyActionHandler = function (e) { switch (e.keyCode) { case 36: this.homeKeyHandler(e); break; case 35: this.homeKeyHandler(e, !0); break; case 40: this.arrowKeyHandler(e); break; case 38: this.arrowKeyHandler(e, !0); break; case 13: this.enterKeyHandler(e); break; case 8: this.showCheckBox && this.curDSLevel[this.curDSLevel.length - 1] && this.uncheckAllItems(), this.back(); break; case 32: this.spaceKeyHandler(e) } }, t.prototype.swipeActionHandler = function (e) { "Right" === e.swipeDirection && (this.showCheckBox && this.curDSLevel[this.curDSLevel.length - 1] && this.uncheckAllItems(), this.back()) }, t.prototype.focusout = function () { if (Object.keys(this.dataSource).length && this.curUL) { var e = this.curUL.querySelector("." + mA.focused), t = this.curUL.querySelector("[aria-selected = true]"); e && (e.classList.remove(mA.focused), t && !this.showCheckBox && t.classList.add(mA.selected)) } }, t.prototype.wireEvents = function () { Kv.add(this.element, "keydown", this.keyActionHandler, this), Kv.add(this.element, "click", this.clickHandler, this), this.enableVirtualization || (Kv.add(this.element, "mouseover", this.hoverHandler, this), Kv.add(this.element, "mouseout", this.leaveHandler, this)), Kv.add(this.element, "focusout", this.focusout, this), this.touchModule = new yb(this.element, { swipe: this.swipeActionHandler.bind(this) }) }, t.prototype.unWireEvents = function () { Kv.remove(this.element, "click", this.clickHandler), this.enableVirtualization || (Kv.remove(this.element, "mouseover", this.hoverHandler), Kv.remove(this.element, "mouseout", this.leaveHandler)), Kv.remove(this.element, "mouseover", this.hoverHandler), Kv.remove(this.element, "mouseout", this.leaveHandler), this.touchModule.destroy() }, t.prototype.removeFocus = function () { for (var e = 0, t = this.element.querySelectorAll("." + mA.focused); e < t.length; e++) { t[e].classList.remove(mA.focused) } }, t.prototype.removeHover = function () { var e = this.element.querySelector("." + mA.hover); e && e.classList.remove(mA.hover) }, t.prototype.removeSelect = function (e) { if (d(e)) for (var t = 0, i = this.element.querySelectorAll("." + mA.selected); t < i.length; t++) { var n = i[t]; this.showCheckBox && n.querySelector("." + mA.checked) || (n.setAttribute("aria-selected", "false"), n.classList.remove(mA.selected)) } else e.classList.remove(mA.selected), e.setAttribute("aria-selected", "false") }, t.prototype.isValidLI = function (e) { return e && e.classList.contains(mA.listItem) && !e.classList.contains(mA.groupListItem) && !e.classList.contains(mA.disable) }, t.prototype.setCheckboxLI = function (e, t) { if (this.isValidLI(e) && this.enable && this.showCheckBox) { this.curUL.querySelector("." + mA.focused) && this.curUL.querySelector("." + mA.focused).classList.remove(mA.focused), e.classList.add(mA.focused); var i = e.querySelector("." + mA.checkboxWrapper), n = i.querySelector("." + mA.checkboxIcon + "." + mA.icon); this.removeHover(), n.classList.contains(mA.checked) ? (n.classList.remove(mA.checked), e.classList.remove(mA.selected), e.setAttribute("aria-selected", "false")) : (n.classList.add(mA.checked), e.classList.add(mA.selected), e.setAttribute("aria-selected", "true")), i.setAttribute("aria-checked", n.classList.contains(mA.checked) ? "true" : "false"); var r = this.selectEventData(e, t); l(r, { isChecked: n.classList.contains(mA.checked) }), this.enableVirtualization && this.virtualizationModule.setCheckboxLI(e, t), this.trigger("select", r), this.setSelectedItemData(e), this.renderSubList(e) } }, t.prototype.selectEventData = function (e, t) { var i = this.getItemData(e), n = wi(i, this.listBaseOption.fields), r = {}; return l(r, !d(i) && "string" == typeof this.dataSource[0] || "number" == typeof this.dataSource[0] ? { item: e, text: e && e.innerText.trim(), data: this.dataSource } : { item: e, text: n && n[this.listBaseOption.fields.text], data: i }), t && l(r, { isInteracted: !0, event: t, index: Array.prototype.indexOf.call(this.curUL.children, e) }), r }, t.prototype.setSelectedItemData = function (e) { var t = this.getItemData(e), i = wi(t, this.listBaseOption.fields); d(t) || "string" != typeof this.dataSource[0] && "number" != typeof this.dataSource[0] ? this.selectedItems = { item: e, text: i && i[this.listBaseOption.fields.text], data: t } : this.selectedItems = { item: e, text: e && e.innerText.trim(), data: this.dataSource } }, t.prototype.setSelectLI = function (e, t) { if (this.isValidLI(e) && !e.classList.contains(mA.selected) && this.enable) { this.showCheckBox || this.removeSelect(), e.classList.add(mA.selected), e.setAttribute("aria-selected", "true"), this.removeHover(), this.setSelectedItemData(e), this.enableVirtualization && this.virtualizationModule.setSelectLI(e, t); var i = this.selectEventData(e, t); this.trigger("select", i), this.selectedLI = e, this.renderSubList(e) } }, t.prototype.setHoverLI = function (e) { if (this.isValidLI(e) && !e.classList.contains(mA.hover) && this.enable) { var t = this.element.querySelectorAll("." + mA.hover); t && t.length && x(t, mA.hover), e.classList.contains(mA.selected) && !this.showCheckBox || e.classList.add(mA.hover) } }, t.prototype.getSubDS = function () { var e = this.curDSLevel; if (e.length) { for (var t = this.localData, i = 0, n = e; i < n.length; i++) { var r = n[i], o = {}; o[this.fields.id] = r, this.curDSJSON = this.findItemFromDS(t, o); var s = wi(this.curDSJSON, this.listBaseOption.fields); t = this.curDSJSON ? s[this.fields.child] : t } return t } return this.localData }, t.prototype.getItemData = function (e) { var t, i = this.dataSource instanceof aA ? this.localData : this.dataSource, n = this.getElementUID(e); return t = d(this.element.querySelector("." + mA.hasChild)) && this.fields.groupBy ? this.curViewDS : i, this.findItemFromDS(t, n) }, t.prototype.findItemFromDS = function (e, t, i) { var n, r = this; return e && e.length && t ? e.some(function (o) { var s = wi(o, r.listBaseOption.fields); if (!t[r.fields.id] && !t[r.fields.text] || t[r.fields.id] && (!d(s[r.fields.id]) && s[r.fields.id].toString()) !== t[r.fields.id].toString() || t[r.fields.text] && s[r.fields.text] !== t[r.fields.text]) if ("object" != typeof o && -1 !== e.indexOf(o)) n = i ? e : o; else if (!d(t[r.fields.id]) && d(s[r.fields.id])) { var a = r.element.querySelector('[data-uid="' + t[r.fields.id] + '"]'); a && a.innerText.trim() === s[r.fields.text] && (n = o) } else s.hasOwnProperty(r.fields.child) && s[r.fields.child].length && (n = r.findItemFromDS(s[r.fields.child], t, i)); else n = i ? e : o; return !!n }) : n = e, n }, t.prototype.getQuery = function () { var e = [], t = this.query ? this.query : new GD; if (!this.query) { for (var i = 0, n = Object.keys(this.fields.properties); i < n.length; i++) { var r = n[i]; "tableName" !== r && this.fields[r] && this.fields[r] !== hT.defaultMappedFields[r] && -1 === e.indexOf(this.fields[r]) && e.push(this.fields[r]) } t.select(e), this.fields.properties.hasOwnProperty("tableName") && t.from(this.fields.tableName) } return t }, t.prototype.setViewDataSource = function (e) { void 0 === e && (e = this.localData), e && this.fields.groupBy ? "None" !== this.sortOrder ? this.curViewDS = hT.groupDataSource(hT.getDataSource(e, hT.addSorting(this.sortOrder, this.fields.sortBy)), this.listBaseOption.fields, this.sortOrder) : this.curViewDS = hT.groupDataSource(e, this.listBaseOption.fields, this.sortOrder) : e && "None" !== this.sortOrder ? this.curViewDS = hT.getDataSource(e, hT.addSorting(this.sortOrder, this.fields.sortBy)) : this.curViewDS = e }, t.prototype.isInAnimation = function () { return this.curUL.classList.contains(".e-animate") }, t.prototype.setLocalData = function () { var e = this; if (this.trigger("actionBegin"), this.dataSource instanceof aA) this.dataSource.executeQuery(this.getQuery()).then(function (t) { e.isDestroyed || (e.localData = t.result, e.removeElement(e.contentContainer), e.renderList(), e.trigger("actionComplete", t)) }).catch(function (t) { e.isDestroyed || e.trigger("actionFailure", t) }); else if (this.dataSource && this.dataSource.length) this.localData = this.dataSource, this.renderList(), this.trigger("actionComplete", { data: this.localData }); else { var t = this.element.querySelector("ul"); t && (k(t), this.setProperties({ dataSource: hT.createJsonFromElement(t) }, !0), this.localData = this.dataSource, this.renderList(), this.trigger("actionComplete", { data: this.localData })) } }, t.prototype.reRender = function () { this.resetBlazorTemplates(), this.removeElement(this.headerEle), this.removeElement(this.ulElement), this.removeElement(this.contentContainer), -1 === Object.keys(window).indexOf("ejsInterop") && (this.element.innerHTML = ""), this.headerEle = this.ulElement = this.liCollection = void 0, this.setLocalData(), this.header() }, t.prototype.resetCurrentList = function () { this.resetBlazorTemplates(), this.setViewDataSource(this.curViewDS), this.contentContainer.innerHTML = "", this.createList(), this.renderIntoDom(this.curUL) }, t.prototype.createList = function () { this.currentLiElements = [], this.isNestedList = !1, this.ulElement = this.curUL = hT.createList(this.createElement, this.curViewDS, this.listBaseOption), this.liCollection = this.curUL.querySelectorAll("." + mA.listItem), this.updateBlazorTemplates(!0) }, t.prototype.resetBlazorTemplates = function () { this.template && ue(this.LISTVIEW_TEMPLATE_ID), this.groupTemplate && ue(this.LISTVIEW_GROUPTEMPLATE_ID), this.headerTemplate && ue(this.LISTVIEW_HEADERTEMPLATE_ID) }, t.prototype.updateBlazorTemplates = function (e, t, i) { void 0 === e && (e = !1), void 0 === t && (t = !1), void 0 === i && (i = !1), this.template && e && !this.enableVirtualization && pe(this.LISTVIEW_TEMPLATE_ID, "Template", this, i), this.groupTemplate && e && !this.enableVirtualization && pe(this.LISTVIEW_GROUPTEMPLATE_ID, fA, this, i), this.headerTemplate && t && pe(this.LISTVIEW_HEADERTEMPLATE_ID, yA, this, i) }, t.prototype.renderSubList = function (e) { var t = e.getAttribute("data-uid"); if (e.classList.contains(mA.hasChild) && t) { var i = R(e.parentNode, "." + mA.parentItem), n = this.element.querySelector("[pid='" + t + "']"); if (this.curDSLevel.push(t), this.setViewDataSource(this.getSubDS()), !n) { var r = this.curViewDS; (n = hT.createListFromJson(this.createElement, r, this.listBaseOption, this.curDSLevel.length)).setAttribute("pID", t), n.style.display = "none", this.renderIntoDom(n), this.updateBlazorTemplates(!0) } if (this.switchView(i, n), this.liCollection = this.curUL.querySelectorAll("." + mA.listItem), this.selectedItems) { var o = wi(this.selectedItems.data, this.listBaseOption.fields); this.header(o[this.listBaseOption.fields.text], !0) } this.selectedLI = void 0 } }, t.prototype.renderIntoDom = function (e) { this.contentContainer.appendChild(e) }, t.prototype.renderList = function (e) { this.setViewDataSource(e), this.enableVirtualization ? Object.keys(this.dataSource).length && (!this.template && !this.groupTemplate || this.virtualizationModule.isNgTemplate() || (this.listBaseOption.template = null, this.listBaseOption.groupTemplate = null, this.listBaseOption.itemCreated = this.virtualizationModule.createUIItem.bind(this.virtualizationModule)), this.virtualizationModule.uiVirtualization()) : (this.createList(), this.contentContainer = this.createElement("div", { className: mA.content }), this.element.appendChild(this.contentContainer), this.renderIntoDom(this.ulElement)) }, t.prototype.getElementUID = function (e) { var t = {}; return e instanceof Element ? t[this.fields.id] = e.getAttribute("data-uid") : t = e, t }, t.prototype.render = function () { this.element.classList.add(mA.root), P(this.element, { role: "list", tabindex: "0" }), this.setCSSClass(), this.setEnableRTL(), this.setEnable(), this.setSize(), this.wireEvents(), this.header(), this.setLocalData(), this.setHTMLAttribute(), this.rippleFn = ee(this.element, { selector: "." + mA.listItem }) }, t.prototype.destroy = function () { this.resetBlazorTemplates(), this.unWireEvents(); var t = [mA.root, mA.disable, "e-rtl", "e-has-header", "e-lib"].concat(this.cssClass.split(" ").filter(function (e) { return e })); x([this.element], t), this.rippleFn(), this.element.removeAttribute("role"), this.element.removeAttribute("tabindex"), this.element.innerHTML = "", this.curUL = this.ulElement = this.liCollection = this.headerEle = void 0, e.prototype.destroy.call(this) }, t.prototype.back = function () { var e = this.curDSLevel[this.curDSLevel.length - 1]; if (void 0 !== e && !this.isInAnimation()) { this.curDSLevel.pop(), this.setViewDataSource(this.getSubDS()); var t = this.element.querySelector("[data-uid='" + e + "']"), i = this.curUL; t ? t = t.parentElement : (this.createList(), this.renderIntoDom(this.ulElement), t = this.curUL); var n = wi(this.curDSJSON, this.listBaseOption.fields)[this.fields.text]; this.switchView(i, t, !0), this.removeFocus(); var r = this.element.querySelector("[data-uid='" + e + "']"); r.classList.add(mA.focused), this.showCheckBox && r.querySelector("." + mA.checkboxIcon).classList.contains(mA.checked) ? r.setAttribute("aria-selected", "true") : (r.classList.remove(mA.selected), r.setAttribute("aria-selected", "false")), this.liCollection = this.curUL.querySelectorAll("." + mA.listItem), this.header(this.curDSLevel.length ? n : this.headerTitle, !!this.curDSLevel.length) } }, t.prototype.selectItem = function (e) { this.enableVirtualization ? this.virtualizationModule.selectItem(e) : this.showCheckBox ? this.setCheckboxLI(this.getLiFromObjOrElement(e)) : d(e) ? this.removeSelect() : this.setSelectLI(this.getLiFromObjOrElement(e)) }, t.prototype.getLiFromObjOrElement = function (e) { var t, i = this.dataSource instanceof aA ? this.localData : this.dataSource; if (!d(e)) if ("string" == typeof i[0] || "number" == typeof i[0]) if (e instanceof Element) { for (var n = e.getAttribute("data-uid").toString(), r = 0; r < this.liCollection.length; r++)if (this.liCollection[r].getAttribute("data-uid").toString() === n) { t = this.liCollection[r]; break } } else Array.prototype.some.call(this.curUL.querySelectorAll("." + mA.listItem), function (i) { return i.innerText.trim() === e.toString() && (t = i, !0) }); else { var o = this.getItemData(e), s = wi(o, this.listBaseOption.fields); if (o && (t = this.element.querySelector('[data-uid="' + s[this.fields.id] + '"]'), !this.enableVirtualization && d(t))) { var a = this.element.querySelectorAll("." + mA.listItem); for (r = 0; r < a.length; r++)a[r].innerText.trim() === s[this.fields.text] && (t = a[r]) } } return t }, t.prototype.selectMultipleItems = function (e) { if (!d(e)) for (var t = 0; t < e.length; t++)d(e[t]) || this.selectItem(e[t]) }, t.prototype.getParentId = function () { var e = []; if (this.isNestedList) for (var t = this.curDSLevel.length - 1; t >= 0; t--)e.push(this.curDSLevel[t]); return e }, t.prototype.getSelectedItems = function () { var e, t = !1; this.selectedId = []; var i = this.dataSource instanceof aA ? this.localData : this.dataSource; if (this.enableVirtualization && !t) e = this.virtualizationModule.getSelectedItems(), t = !0; else if (this.showCheckBox && !t) { var n = this.curUL.getElementsByClassName(mA.selected), r = [], o = []; this.selectedId = []; for (var s = [], a = 0; a < n.length; a++)if ("string" == typeof i[0] || "number" == typeof i[0]) r.push(n[a].innerText.trim()); else { var l = this.getItemData(n[a]), h = wi(l, this.listBaseOption.fields); this.isNestedList ? s.push({ data: l, parentId: this.getParentId() }) : o.push(l), h ? (r.push(h[this.listBaseOption.fields.text]), this.selectedId.push(h[this.listBaseOption.fields.id])) : (r.push(void 0), this.selectedId.push(void 0)) } "string" != typeof i[0] && "number" != typeof i[0] || t || (e = { item: n, data: i, text: r }, t = !0), this.isNestedList && !t ? (e = { item: n, data: s, text: r }, t = !0) : t || (e = { item: n, data: o, text: r }, t = !0) } else if (!t) { var c = this.element.getElementsByClassName(mA.selected)[0]; h = wi(this.getItemData(c), this.listBaseOption.fields); "string" != typeof i[0] && "number" != typeof i[0] || t ? t || (d(h) || d(c) ? (e = void 0, t = !0) : (this.selectedId.push(h[this.listBaseOption.fields.id]), e = { text: h[this.listBaseOption.fields.text], item: c, data: this.getItemData(c) }, t = !0)) : (e = d(c) ? void 0 : { item: c, data: i, text: c.innerText.trim() }, t = !0) } return w() ? this.blazorGetSelectedItems(e) : e }, t.prototype.blazorGetSelectedItems = function (e) { var t = { data: [], index: [], parentId: [], text: [] }; return d(e) || (d(e.data) || (this.showCheckBox && this.isNestedList ? (e.data.forEach(function (e) { t.data.push(e.data) }), d(e.data[0]) || d(e.data[0].parentId) || (t.parentId = e.data[0].parentId)) : t.data = this.convertItemsToArray(e.data)), d(e.text) || (t.text = this.convertItemsToArray(e.text)), d(e.index) || (t.index = this.convertItemsToArray(e.index))), t }, t.prototype.convertItemsToArray = function (e) { return Array.isArray(e) ? e.slice() : [e] }, t.prototype.findItem = function (e) { return this.getItemData(e) }, t.prototype.enableItem = function (e) { this.setItemState(e, !0), this.enableVirtualization && this.virtualizationModule.enableItem(e) }, t.prototype.disableItem = function (e) { this.setItemState(e, !1), this.enableVirtualization && this.virtualizationModule.disableItem(e) }, t.prototype.setItemState = function (e, t) { var i = this.getItemData(e), n = wi(i, this.listBaseOption.fields); if (i) { var r = this.element.querySelector('[data-uid="' + n[this.fields.id] + '"]'); t ? (r && r.classList.remove(mA.disable), delete i[this.fields.enabled]) : t || (r && r.classList.add(mA.disable), i[this.fields.enabled] = !1) } }, t.prototype.showItem = function (e) { this.showHideItem(e, !1, ""), this.enableVirtualization && this.virtualizationModule.showItem(e) }, t.prototype.hideItem = function (e) { this.showHideItem(e, !0, "none"), this.enableVirtualization && this.virtualizationModule.hideItem(e) }, t.prototype.showHideItem = function (e, t, i) { var n = this.getItemData(e), r = wi(n, this.listBaseOption.fields); if (n) { var o = this.element.querySelector('[data-uid="' + r[this.fields.id] + '"]'); o && (o.style.display = i), t ? n[this.fields.isVisible] = !1 : delete n[this.fields.isVisible] } }, t.prototype.addItem = function (e, t) { var i = this; if (void 0 === t && (t = void 0), !(this.dataSource instanceof aA) && e instanceof Array) if (this.enableVirtualization) this.virtualizationModule.addItem(e, t); else { var n = this.findItemFromDS(this.dataSource, t), r = wi(n, this.listBaseOption.fields)[this.fields.child]; r || (r = []), r = r.concat(e), n instanceof Array ? (e.forEach(function (e) { if (i.dataSource.push(e), i.setViewDataSource(i.dataSource), i.ulElement) { var t = i.curViewDS.indexOf(e); i.addListItem(e, t); var n = i.curViewDS[t - 1]; n && n.isHeader && 1 === n.items.length && i.addListItem(n, t - 1) } else i.reRender() }), this.ulElement && this.updateBlazorTemplates(!0), this.liCollection = this.curUL.querySelectorAll("." + mA.listItem)) : (n[this.fields.child] = r, this.reRender()) } }, t.prototype.addListItem = function (e, t) { var i = this.getLiFromObjOrElement(this.curViewDS[t + 1]) || this.getLiFromObjOrElement(this.curViewDS[t + 2]) || null, n = hT.createListItemFromJson(this.createElement, [e], this.listBaseOption); this.ulElement.insertBefore(n[0], i) }, t.prototype.removeItem = function (e) { this.dataSource instanceof aA || (this.enableVirtualization ? this.virtualizationModule.removeItem(e) : (this.removeItemFromList(e), this.updateBlazorTemplates(!0))) }, t.prototype.removeItemFromList = function (e) { var t, i = e instanceof Element ? this.getElementUID(e) : e; if (t = this.findItemFromDS(this.dataSource, i, !0)) { var n = void 0; n = this.findItemFromDS(t, i); var r = this.curViewDS.indexOf(n), o = this.getLiFromObjOrElement(e), s = void 0; this.fields.groupBy && this.curViewDS[r - 1] && this.curViewDS[r - 1].isHeader && 1 === this.curViewDS[r - 1].items.length && o && o.previousElementSibling.classList.contains(mA.groupListItem) && (d(o.nextElementSibling) || o.nextElementSibling && o.nextElementSibling.classList.contains(mA.groupListItem)) && (s = o.previousElementSibling), o && I(o), s && I(s); var a = t.indexOf(n); t.splice(a, 1), this.setViewDataSource(this.dataSource), this.liCollection = Array.prototype.slice.call(this.element.querySelectorAll("." + mA.listItem)) } }, t.prototype.removeMultipleItems = function (e) { if (!(this.dataSource instanceof aA) && e.length) { for (var t = 0; t < e.length; t++)this.enableVirtualization ? this.removeItem(e[t]) : this.removeItemFromList(e[t]); this.updateBlazorTemplates(!0) } }, t.prototype.getModuleName = function () { return "listview" }, t.prototype.requiredModules = function () { var e = []; return this.enableVirtualization && e.push({ args: [this], member: "virtualization" }), e }, t.prototype.getPersistData = function () { return this.addOnPersist(["cssClass", "enableRtl", "htmlAttributes", "enable", "fields", "animation", "headerTitle", "sortOrder", "showIcon", "height", "width", "showCheckBox", "checkBoxPosition"]) }, pA([Y("")], t.prototype, "cssClass", void 0), pA([Y(!1)], t.prototype, "enableVirtualization", void 0), pA([Y({})], t.prototype, "htmlAttributes", void 0), pA([Y(!0)], t.prototype, "enable", void 0), pA([Y([])], t.prototype, "dataSource", void 0), pA([Y()], t.prototype, "query", void 0), pA([U(hT.defaultMappedFields, vA)], t.prototype, "fields", void 0), pA([Y({ effect: "SlideLeft", duration: 400, easing: "ease" })], t.prototype, "animation", void 0), pA([Y("None")], t.prototype, "sortOrder", void 0), pA([Y(!1)], t.prototype, "showIcon", void 0), pA([Y(!1)], t.prototype, "showCheckBox", void 0), pA([Y("Left")], t.prototype, "checkBoxPosition", void 0), pA([Y("")], t.prototype, "headerTitle", void 0), pA([Y(!1)], t.prototype, "showHeader", void 0), pA([Y("")], t.prototype, "height", void 0), pA([Y("")], t.prototype, "width", void 0), pA([Y(null)], t.prototype, "template", void 0), pA([Y(null)], t.prototype, "headerTemplate", void 0), pA([Y(null)], t.prototype, "groupTemplate", void 0), pA([X()], t.prototype, "select", void 0), pA([X()], t.prototype, "actionBegin", void 0), pA([X()], t.prototype, "actionComplete", void 0), pA([X()], t.prototype, "actionFailure", void 0), t = pA([J], t) }(Kw), bA = function () { function e(e) { this.listViewInstance = e } return e.prototype.isNgTemplate = function () { return !d(this.listViewInstance.templateRef) && "string" != typeof this.listViewInstance.templateRef && d(this.listViewInstance.fields.groupBy) }, e.prototype.uiVirtualization = function () { var e = this.listViewInstance.curViewDS, t = e.slice(0, 1); this.listViewInstance.ulElement = this.listViewInstance.curUL = hT.createList(this.listViewInstance.createElement, t, this.listViewInstance.listBaseOption), this.listViewInstance.contentContainer = this.listViewInstance.createElement("div", { className: mA.content }), this.listViewInstance.element.appendChild(this.listViewInstance.contentContainer), this.listViewInstance.contentContainer.appendChild(this.listViewInstance.ulElement), this.listItemHeight = this.listViewInstance.ulElement.firstElementChild.getBoundingClientRect().height, this.expectedDomItemCount = this.ValidateItemCount(1e4), this.domItemCount = this.ValidateItemCount(Object.keys(this.listViewInstance.curViewDS).length), this.uiFirstIndex = 0, this.uiLastIndex = this.domItemCount - 1, this.wireScrollEvent(!1); var i = e.slice(1, this.domItemCount); E(hT.createListItemFromJson(this.listViewInstance.createElement, i, this.listViewInstance.listBaseOption), this.listViewInstance.ulElement), this.listViewInstance.liCollection = this.listViewInstance.curUL.querySelectorAll("li"), this.topElement = this.listViewInstance.createElement("div"), this.listViewInstance.ulElement.insertBefore(this.topElement, this.listViewInstance.ulElement.firstElementChild), this.bottomElement = this.listViewInstance.createElement("div"), this.listViewInstance.ulElement.insertBefore(this.bottomElement, null), this.totalHeight = Object.keys(e).length * this.listItemHeight - this.domItemCount * this.listItemHeight, this.topElement.style.height = "0px", this.bottomElement.style.height = this.totalHeight + "px", this.topElementHeight = 0, this.bottomElementHeight = this.totalHeight, this.listDiff = 0, this.uiIndicesInitialization() }, e.prototype.wireScrollEvent = function (e) { e ? this.listViewInstance.isWindow ? window.removeEventListener("scroll", this.onVirtualScroll) : Kv.remove(this.listViewInstance.element, "scroll", this.onVirtualUiScroll) : this.listViewInstance.isWindow ? (this.onVirtualScroll = this.onVirtualUiScroll.bind(this), window.addEventListener("scroll", this.onVirtualScroll)) : Kv.add(this.listViewInstance.element, "scroll", this.onVirtualUiScroll, this) }, e.prototype.ValidateItemCount = function (e) { var t = this.listViewInstance.isWindow ? Math.round(window.innerHeight / this.listItemHeight * 3) : Math.round(this.listViewInstance.height / this.listItemHeight * 1.5); return t > e && (t = e), t }, e.prototype.uiIndicesInitialization = function () { var e = this; this.uiIndices = { activeIndices: [], disabledItemIndices: [], hiddenItemIndices: [] }, this.listViewInstance.curViewDS.forEach(function (t, i) { e.listViewInstance.showCheckBox && t[e.listViewInstance.fields.isChecked] && e.uiIndices.activeIndices.push(i), d(t[e.listViewInstance.fields.enabled]) || t[e.listViewInstance.fields.enabled] || e.uiIndices.disabledItemIndices.push(i) }), this.isNgTemplate() && Array.prototype.forEach.call(this.listViewInstance.element.querySelectorAll("." + mA.listItem), function (t, i) { t.context = e.listViewInstance.viewContainerRef._embeddedViews[i].context }) }, e.prototype.refreshItemHeight = function () { if (this.listViewInstance.curViewDS.length) { var e = this.listViewInstance.curViewDS; this.listItemHeight = this.topElement.nextSibling.getBoundingClientRect().height, this.totalHeight = Object.keys(e).length * this.listItemHeight - this.domItemCount * this.listItemHeight, this.bottomElementHeight = this.totalHeight, this.bottomElement.style.height = this.totalHeight + "px" } }, e.prototype.getscrollerHeight = function (e) { return this.listViewInstance.isWindow ? pageYOffset - e <= 0 ? 0 : pageYOffset - e : this.listViewInstance.element.scrollTop - e <= 0 ? 0 : this.listViewInstance.element.scrollTop - e }, e.prototype.onVirtualUiScroll = function () { var e, t; t = this.listViewInstance.isWindow ? this.listViewInstance.ulElement.getBoundingClientRect().top - document.documentElement.getBoundingClientRect().top : this.listViewInstance.headerEle ? this.listViewInstance.headerEle.getBoundingClientRect().height : 0, this.scrollPosition = d(this.scrollPosition) ? 0 : this.scrollPosition; var i = this.getscrollerHeight(t); if (this.topElementHeight = this.listItemHeight * Math.floor(i / this.listItemHeight), this.bottomElementHeight = this.totalHeight - this.topElementHeight, e = i <= this.totalHeight ? [this.topElementHeight, this.bottomElementHeight] : [this.totalHeight, 0], this.topElementHeight = e[0], this.bottomElementHeight = e[1], this.topElementHeight !== parseFloat(this.topElement.style.height)) { if (this.topElement.style.height = this.topElementHeight + "px", this.bottomElement.style.height = this.bottomElementHeight + "px", i > this.scrollPosition) { (n = Math.round(this.topElementHeight / this.listItemHeight - this.listDiff)) > this.expectedDomItemCount + 5 ? this.onLongScroll(n, !0) : this.onNormalScroll(n, !0) } else { var n; (n = Math.round(this.listDiff - this.topElementHeight / this.listItemHeight)) > this.expectedDomItemCount + 5 ? this.onLongScroll(n, !1) : this.onNormalScroll(n, !1) } this.listDiff = Math.round(this.topElementHeight / this.listItemHeight), "function" == typeof this.listViewInstance.onUIScrolled && this.listViewInstance.onUIScrolled() } this.scrollPosition = i }, e.prototype.onLongScroll = function (e, t) { var i = this, n = t ? this.uiFirstIndex + e : this.uiFirstIndex - e; Array.prototype.forEach.call(this.listViewInstance.ulElement.querySelectorAll("li"), function (e) { i.updateUI(e, n), n++ }), this.uiLastIndex = t ? this.uiLastIndex + e : this.uiLastIndex - e, this.uiFirstIndex = t ? this.uiFirstIndex + e : this.uiFirstIndex - e }, e.prototype.onNormalScroll = function (e, t) { if (t) for (var i = 0; i < e; i++) { var n = ++this.uiLastIndex; this.updateUI(this.topElement.nextElementSibling, n, this.bottomElement), this.uiFirstIndex++ } else for (i = 0; i < e; i++) { n = --this.uiFirstIndex; var r = this.topElement.nextSibling; this.updateUI(this.bottomElement.previousElementSibling, n, r), this.uiLastIndex-- } }, e.prototype.updateUiContent = function (e, t) { var i = this.listViewInstance.curViewDS; if ("string" == typeof this.listViewInstance.dataSource[0] || "number" == typeof this.listViewInstance.dataSource[0] ? (e.dataset.uid = hT.generateId(), e.getElementsByClassName(mA.listItemText)[0].innerHTML = this.listViewInstance.curViewDS[t].toString()) : (e.dataset.uid = i[t][this.listViewInstance.fields.id] ? i[t][this.listViewInstance.fields.id].toString() : hT.generateId(), e.getElementsByClassName(mA.listItemText)[0].innerHTML = i[t][this.listViewInstance.fields.text].toString()), this.listViewInstance.showIcon && (e.querySelector("." + mA.listIcon) && I(e.querySelector("." + mA.listIcon)), this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss])) { var n = e.querySelector("." + mA.textContent), r = this.listViewInstance.createElement("div", { className: mA.listIcon + " " + this.listViewInstance.curViewDS[t][this.listViewInstance.fields.iconCss] }); n.insertBefore(r, e.querySelector("." + mA.listItemText)) } if (this.listViewInstance.showCheckBox && this.listViewInstance.fields.groupBy) { this.checkListWrapper || (this.checkListWrapper = this.listViewInstance.curUL.querySelector("." + mA.checkboxWrapper).cloneNode(!0)); n = e.querySelector("." + mA.textContent); this.listViewInstance.curViewDS[t].isHeader ? e.querySelector("." + mA.checkboxWrapper) && (e.classList.remove(mA.checklist), n.classList.remove(mA.checkbox), I(e.querySelector("." + mA.checkboxWrapper))) : e.querySelector("." + mA.checkboxWrapper) || (e.classList.add(mA.checklist), n.classList.add(mA.checkbox), n.insertBefore(this.checkListWrapper.cloneNode(!0), e.querySelector("." + mA.listItemText))) } }, e.prototype.changeElementAttributes = function (e, t) { if (e.classList.remove(mA.disable), this.uiIndices.disabledItemIndices.length && -1 !== this.uiIndices.disabledItemIndices.indexOf(t) && e.classList.add(mA.disable), e.style.display = "", this.uiIndices.hiddenItemIndices.length && -1 !== this.uiIndices.hiddenItemIndices.indexOf(t) && (e.style.display = "none"), this.listViewInstance.showCheckBox) { var i = e.querySelector("." + mA.checkboxWrapper); e.classList.remove(mA.selected), e.classList.remove(mA.focused), i && (i.removeAttribute("aria-checked"), i.firstElementChild.classList.remove(mA.checked)), this.uiIndices.activeIndices.length && -1 !== this.uiIndices.activeIndices.indexOf(t) && !this.listViewInstance.curUL.querySelector(mA.selected) && (e.classList.add(mA.selected), i.firstElementChild.classList.add(mA.checked), i.setAttribute("aria-checked", "true"), this.activeIndex === t && e.classList.add(mA.focused)) } else e.classList.remove(mA.selected), e.removeAttribute("aria-selected"), d(this.activeIndex) || this.activeIndex !== t || this.listViewInstance.curUL.querySelector(mA.selected) || (e.classList.add(mA.selected), e.setAttribute("aria-selected", "true")); this.listViewInstance.fields.groupBy && (this.listViewInstance.curViewDS[t].isHeader ? e.classList.contains(mA.listItem) && (e.classList.remove(mA.listItem), e.setAttribute("role", "group"), e.classList.add(mA.groupListItem)) : e.classList.contains(mA.groupListItem) && (e.classList.remove(mA.groupListItem), e.setAttribute("role", "listitem"), e.classList.add(mA.listItem))) }, e.prototype.findDSAndIndexFromId = function (e, t) { var i = this, n = {}; return t = this.listViewInstance.getElementUID(t), d(t) || e.some(function (e, r) { return !!(t[i.listViewInstance.fields.id] && t[i.listViewInstance.fields.id].toString() === (e[i.listViewInstance.fields.id] && e[i.listViewInstance.fields.id].toString()) || t === e) && (n.index = r, n.data = e, !0) }), n }, e.prototype.getSelectedItems = function () { var e = this; if (!d(this.activeIndex) || this.listViewInstance.showCheckBox && this.uiIndices.activeIndices.length) { var t = [], i = []; if ("string" == typeof this.listViewInstance.dataSource[0] || "number" == typeof this.listViewInstance.dataSource[0]) { var n = this.listViewInstance.curViewDS; return this.listViewInstance.showCheckBox ? (this.uiIndices.activeIndices.forEach(function (e) { t.push(n[e]) }), { text: t, data: t, index: this.uiIndices.activeIndices.map(function (t) { return e.listViewInstance.dataSource.indexOf(n[t]) }) }) : { text: n[this.activeIndex], data: n[this.activeIndex], index: this.listViewInstance.dataSource.indexOf(n[this.activeIndex]) } } var r = this.listViewInstance.curViewDS, o = this.listViewInstance.fields.text; if (this.listViewInstance.showCheckBox) { this.uiIndices.activeIndices.forEach(function (e) { i.push(r[e][o]), t.push(r[e]) }); var s = this.listViewInstance.dataSource instanceof aA ? r : this.listViewInstance.dataSource; return { text: i, data: t, index: this.uiIndices.activeIndices.map(function (e) { return s.indexOf(r[e]) }) } } var a = this.listViewInstance.dataSource instanceof aA ? r : this.listViewInstance.dataSource; return { text: r[this.activeIndex][this.listViewInstance.fields.text], data: r[this.activeIndex], index: a.indexOf(r[this.activeIndex]) } } }, e.prototype.selectItem = function (e) { var t = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, e); if (Object.keys(t).length) { var i = this.activeIndex === t.index, n = void 0; if (this.activeIndex = t.index, this.listViewInstance.showCheckBox && (-1 === this.uiIndices.activeIndices.indexOf(t.index) ? (n = !0, this.uiIndices.activeIndices.push(t.index)) : (n = !1, this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(t.index), 1)), this.listViewInstance.curUL.querySelector("." + mA.focused) && this.listViewInstance.curUL.querySelector("." + mA.focused).classList.remove(mA.focused)), this.listViewInstance.getLiFromObjOrElement(e)) this.listViewInstance.showCheckBox ? this.listViewInstance.setCheckboxLI(this.listViewInstance.getLiFromObjOrElement(e)) : this.listViewInstance.setSelectLI(this.listViewInstance.getLiFromObjOrElement(e)); else { var r = void 0; if ("string" == typeof this.listViewInstance.dataSource[0] || "number" == typeof this.listViewInstance.dataSource[0]) r = { text: this.listViewInstance.curViewDS[this.activeIndex], data: this.listViewInstance.curViewDS[this.activeIndex], index: this.activeIndex }; else { var o = this.listViewInstance.curViewDS; r = { text: o[this.activeIndex][this.listViewInstance.fields.text], data: o[this.activeIndex], index: this.activeIndex } } this.listViewInstance.showCheckBox ? (r.isChecked = n, this.listViewInstance.trigger("select", r)) : i || (this.listViewInstance.removeSelect(), this.listViewInstance.trigger("select", r)) } } else d(e) && !this.listViewInstance.showCheckBox && (this.listViewInstance.removeSelect(), this.activeIndex = void 0) }, e.prototype.enableItem = function (e) { var t = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, e); Object.keys(t).length && this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(t.index), 1) }, e.prototype.disableItem = function (e) { var t = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, e); Object.keys(t).length && -1 === this.uiIndices.disabledItemIndices.indexOf(t.index) && this.uiIndices.disabledItemIndices.push(t.index) }, e.prototype.showItem = function (e) { var t = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, e); Object.keys(t).length && this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(t.index), 1) }, e.prototype.hideItem = function (e) { var t = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, e); Object.keys(t).length && -1 === this.uiIndices.hiddenItemIndices.indexOf(t.index) && this.uiIndices.hiddenItemIndices.push(t.index) }, e.prototype.removeItem = function (e) { var t, i = this.findDSAndIndexFromId(this.listViewInstance.curViewDS, e); Object.keys(i).length && (t = i.data, this.listViewInstance.curViewDS[i.index - 1] && this.listViewInstance.curViewDS[i.index - 1].isHeader && 1 === this.listViewInstance.curViewDS[i.index - 1].items.length ? (this.removeUiItem(i.index - 1), this.removeUiItem(i.index - 1)) : this.removeUiItem(i.index)); var n = this.listViewInstance.dataSource.indexOf(t); -1 !== n && (this.listViewInstance.dataSource.splice(n, 1), this.listViewInstance.setViewDataSource(this.listViewInstance.dataSource)), this.listViewInstance.liCollection = this.listViewInstance.curUL.querySelectorAll("li") }, e.prototype.setCheckboxLI = function (e, t) { var i = Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"), e) + this.uiFirstIndex; this.activeIndex = Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"), e) + this.uiFirstIndex, e.classList.contains(mA.selected) ? -1 === this.uiIndices.activeIndices.indexOf(i) && this.uiIndices.activeIndices.push(i) : this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(i), 1) }, e.prototype.setSelectLI = function (e, t) { this.activeIndex = Array.prototype.indexOf.call(this.listViewInstance.curUL.querySelectorAll("li"), e) + this.uiFirstIndex }, e.prototype.checkedItem = function (e) { var t = this; e ? (this.uiIndices.activeIndices = [], this.activeIndex = void 0, this.listViewInstance.curViewDS.forEach(function (e, i) { e.isHeader || t.uiIndices.activeIndices.push(i) })) : (this.activeIndex = void 0, this.uiIndices.activeIndices = []) }, e.prototype.addUiItem = function (e) { var t = this.listViewInstance.curViewDS; if (this.changeUiIndices(e, !0), this.activeIndex && this.activeIndex >= e && this.activeIndex++ , this.listViewInstance.showCheckBox && t[e][this.listViewInstance.fields.isChecked] && this.uiIndices.activeIndices.push(e), parseFloat(this.bottomElement.style.height) || parseFloat(this.topElement.style.height) || (this.bottomElement.style.height = parseFloat(this.bottomElement.style.height) + this.listItemHeight + "px"), parseFloat(this.bottomElement.style.height)) { var i = this.listViewInstance.curUL.lastElementChild.previousSibling; (n = this.listViewInstance.getLiFromObjOrElement(t[e + 1]) || this.listViewInstance.getLiFromObjOrElement(t[e + 2])) && (this.bottomElement.style.height = parseFloat(this.bottomElement.style.height) + this.listItemHeight + "px", this.updateUI(i, e, n)) } else { i = this.listViewInstance.curUL.firstElementChild.nextSibling; var n = void 0; n = Object.keys(this.listViewInstance.curViewDS).length - 1 === e ? this.listViewInstance.curUL.lastElementChild : this.listViewInstance.getLiFromObjOrElement(t[e + 1]) || this.listViewInstance.getLiFromObjOrElement(t[e + 2]), this.topElement.style.height = parseFloat(this.topElement.style.height) + this.listItemHeight + "px", this.uiFirstIndex++ , this.uiLastIndex++ , n && (this.updateUI(i, e, n), this.listViewInstance.isWindow ? window.scrollTo(0, pageYOffset + this.listItemHeight) : this.listViewInstance.element.scrollTop += this.listItemHeight) } this.totalHeight += this.listItemHeight, this.listDiff = Math.round(parseFloat(this.topElement.style.height) / this.listItemHeight) }, e.prototype.removeUiItem = function (e) { this.totalHeight -= this.listItemHeight; var t = this.listViewInstance.curViewDS[e], i = this.listViewInstance.getLiFromObjOrElement(t); if (this.listViewInstance.curViewDS.splice(e, 1), this.activeIndex && this.activeIndex >= e && this.activeIndex-- , i) if (this.domItemCount > Object.keys(this.listViewInstance.curViewDS).length) I(i), this.domItemCount-- , this.uiLastIndex-- , this.totalHeight = 0; else { if (i.classList.contains(mA.disable) && (i.classList.remove(mA.disable), this.uiIndices.disabledItemIndices.splice(this.uiIndices.disabledItemIndices.indexOf(e), 1)), "none" === i.style.display && (i.style.display = "", this.uiIndices.hiddenItemIndices.splice(this.uiIndices.hiddenItemIndices.indexOf(e), 1)), this.listViewInstance.showCheckBox && i.classList.contains(mA.selected)) { this.listViewInstance.removeSelect(), this.uiIndices.activeIndices.splice(this.uiIndices.activeIndices.indexOf(e), 1); var n = i.querySelector("." + mA.checkboxWrapper); n.removeAttribute("aria-checked"), n.firstElementChild.classList.remove(mA.checked), i.classList.contains(mA.focused) && (i.classList.remove(mA.focused), this.activeIndex = void 0) } else i.classList.contains(mA.selected) && (this.listViewInstance.removeSelect(), this.activeIndex = void 0); parseFloat(this.bottomElement.style.height) || parseFloat(this.topElement.style.height) ? parseFloat(this.bottomElement.style.height) ? (this.bottomElement.style.height = parseFloat(this.bottomElement.style.height) - this.listItemHeight + "px", this.updateUI(i, this.uiLastIndex, this.bottomElement)) : (this.topElement.style.height = parseFloat(this.topElement.style.height) - this.listItemHeight + "px", this.updateUI(i, this.uiFirstIndex - 1, this.topElement.nextSibling), this.uiLastIndex-- , this.uiFirstIndex--) : this.updateUI(i, this.uiLastIndex, this.bottomElement) } this.changeUiIndices(e, !1), this.listDiff = Math.round(parseFloat(this.topElement.style.height) / this.listItemHeight) }, e.prototype.changeUiIndices = function (e, t) { var i = this; Object.keys(this.uiIndices).forEach(function (n) { i.uiIndices[n] = i.uiIndices[n].map(function (i) { return i >= e ? t ? ++i : --i : i }) }) }, e.prototype.addItem = function (e, t) { var i = this; e.forEach(function (e) { if (i.listViewInstance.dataSource.push(e), i.listViewInstance.setViewDataSource(i.listViewInstance.dataSource), i.domItemCount) if (i.domItemCount < i.expectedDomItemCount) { if (i.listViewInstance.findItemFromDS(i.listViewInstance.dataSource, t) instanceof Array) { if (i.listViewInstance.ulElement) { var n = i.listViewInstance.curViewDS.indexOf(e); i.createAndInjectNewItem(e, n); (r = i.listViewInstance.curViewDS[n - 1]) && r.isHeader && 1 === r.items.length && (--n, i.createAndInjectNewItem(r, n)) } i.listViewInstance.liCollection = i.listViewInstance.curUL.querySelectorAll("li") } } else { n = i.listViewInstance.curViewDS.indexOf(e); i.addUiItem(n); var r; (r = i.listViewInstance.curViewDS[n - 1]) && r.isHeader && 1 === r.items.length && i.addUiItem(n - 1) } else !i.listViewInstance.template && !i.listViewInstance.groupTemplate || i.isNgTemplate() || (i.listViewInstance.listBaseOption.template = null, i.listViewInstance.listBaseOption.groupTemplate = null, i.listViewInstance.listBaseOption.itemCreated = i.createUIItem.bind(i)), i.uiVirtualization() }) }, e.prototype.createAndInjectNewItem = function (e, t) { var i, n = hT.createListItemFromJson(this.listViewInstance.createElement, [e], this.listViewInstance.listBaseOption); i = Object.keys(this.listViewInstance.curViewDS).length - 1 === t ? this.listViewInstance.curUL.lastElementChild : this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t + 1]) || this.listViewInstance.getLiFromObjOrElement(this.listViewInstance.curViewDS[t + 2]), this.listViewInstance.ulElement.insertBefore(n[0], i), this.domItemCount++ , this.bottomElementHeight <= 0 && this.uiLastIndex++ , this.refreshItemHeight() }, e.prototype.createUIItem = function (e) { var t = this.listViewInstance.createElement("div"), i = '<div class="e-text-content" role="presentation"> <span class="e-list-text"> ${' + this.listViewInstance.fields.text + "} </span></div>"; t.innerHTML = this.listViewInstance.template || i; var n = t.getElementsByTagName("*"), r = this.listViewInstance.createElement("div"); this.listViewInstance.fields.groupBy && (r.innerHTML = this.listViewInstance.groupTemplate || i); var o = r.getElementsByTagName("*"); e.curData.isHeader && (this.headerData = e.curData), this.templateData = e.curData.isHeader ? e.curData.items[0] : e.curData, e.item.innerHTML = "", e.item.context = { data: e.curData, nodes: { flatTemplateNodes: [], groupTemplateNodes: [] } }; for (var s = 0; s < n.length; s++)this.compileTemplate(n[s], e.item, !1); for (s = 0; s < o.length; s++)this.compileTemplate(o[s], e.item, !0); e.item.context.template = e.curData.isHeader ? t.firstElementChild : r.firstElementChild, e.item.context.type = e.curData.isHeader ? "flatList" : "groupList"; var a = e.curData.isHeader ? r : t; e.item.insertBefore(a.firstElementChild, null) }, e.prototype.compileTemplate = function (e, t, i) { this.textProperty(e, t, i), this.classProperty(e, t, i), this.attributeProperty(e, t, i) }, e.prototype.onChange = function (e, t) { t.context.data = e; var i = t.context.nodes.groupTemplateNodes, n = t.context.nodes.flatTemplateNodes; if (!d(e.isHeader) && e.isHeader && "groupList" === t.context.type) { var r = t.firstElementChild; I(t.firstElementChild), t.insertBefore(t.context.template, null), t.context.template = r, t.context.type = "flatList", i.forEach(function (t) { return t.onChange(e) }) } else if (e.isHeader || "flatList" !== t.context.type) e.isHeader ? i.forEach(function (t) { return t.onChange(e) }) : n.forEach(function (t) { return t.onChange(e) }); else { r = t.firstElementChild; I(t.firstElementChild), t.insertBefore(t.context.template, null), t.context.template = r, t.context.type = "groupList", n.forEach(function (t) { return t.onChange(e) }) } }, e.prototype.updateContextData = function (e, t, i) { i ? e.context.nodes.groupTemplateNodes.push(t) : e.context.nodes.flatTemplateNodes.push(t) }, e.prototype.classProperty = function (e, t, i) { for (var n, r = this, o = new RegExp("\\${([^}]*)}", "g"), s = []; null !== n;) { var a = o.exec(e.className); s.push(a), null === (n = a) && s.pop() } s && s.length && s.forEach(function (n) { var o; o = -1 !== n[1].indexOf("?") && -1 !== n[1].indexOf(":") ? new Function("data", "return " + n[1].replace(/\$/g, "data.")) : new Function("data", "return data." + n[1]); var s = {}; s.bindedvalue = o(i ? r.headerData : r.templateData), s.onChange = function (t) { s.bindedvalue && x([e], s.bindedvalue.split(" ").filter(function (e) { return e })); var i = o(t); i && S([e], i.split(" ").filter(function (e) { return e })), s.bindedvalue = i }, n[0].split(" ").forEach(function (t) { e.classList.remove(t) }), s.bindedvalue && S([e], s.bindedvalue.split(" ").filter(function (e) { return e })), r.updateContextData(t, s, i) }) }, e.prototype.attributeProperty = function (e, t, i) { for (var n = this, r = [], o = 0; o < e.attributes.length; o++)r.push(e.attributes[o].nodeName); -1 !== r.indexOf("class") && r.splice(r.indexOf("class"), 1), r.forEach(function (r) { var o, s, a = new RegExp("\\${([^}]*)}", "g").exec(r) || [], l = new RegExp("\\${([^}]*)}", "g").exec(e.getAttribute(r)) || []; if (a.length || l.length) { a[1] && (o = new Function("data", "return data." + a[1])), l[1] && (s = -1 !== l[1].indexOf("?") && -1 !== l[1].indexOf(":") ? new Function("data", "return " + l[1].replace(/\$/g, "data.")) : new Function("data", "return data." + l[1])); var h = {}; h.bindedvalue = i ? [void 0 === a[1] ? void 0 : o(n.headerData), void 0 === l[1] ? void 0 : s(n.headerData)] : [void 0 === a[1] ? void 0 : o(n.templateData), void 0 === l[1] ? void 0 : s(n.templateData)], h.attrName = void 0 === h.bindedvalue[0] ? r : h.bindedvalue[0], h.onChange = function (t) { var i = void 0 === h.bindedvalue[1] ? e.getAttribute(h.attrName) : s(t); e.removeAttribute(h.attrName), h.attrName = void 0 === h.bindedvalue[0] ? h.attrName : o(t), e.setAttribute(h.attrName, i), h.bindedvalue = [void 0 === h.bindedvalue[0] ? void 0 : o(t), void 0 === h.bindedvalue[1] ? void 0 : s(t)] }; var d = void 0 === h.bindedvalue[1] ? e.getAttribute(r) : h.bindedvalue[1]; e.removeAttribute(r), e.setAttribute(h.attrName, d), n.updateContextData(t, h, i) } }) }, e.prototype.textProperty = function (e, t, i) { for (var n, r = this, o = new RegExp("\\${([^}]*)}", "g"), s = []; null !== n;) { var a = o.exec(e.innerText); s.push(a), null === (n = a) && s.pop() } var l = Array.prototype.some.call(e.children, function (e) { return !!new RegExp("\\${([^}]*)}", "g").exec(e.innerText) }); s && s.length && !l && s.forEach(function (n) { var o, s = {}; o = -1 !== n[1].indexOf("?") && -1 !== n[1].indexOf(":") ? new Function("data", "return " + n[1].replace(/\$/g, "data.")) : new Function("data", "return data." + n[1]), s.bindedvalue = o(i ? r.headerData : r.templateData), s.onChange = function (t) { e.innerText = e.innerText.replace(s.bindedvalue, o(t)), s.bindedvalue = o(t) }, e.innerText = e.innerText.replace(n[0], s.bindedvalue), r.updateContextData(t, s, i) }) }, e.prototype.reRenderUiVirtualization = function () { this.wireScrollEvent(!0), this.listViewInstance.contentContainer && I(this.listViewInstance.contentContainer), this.listViewInstance.preRender(), this.domItemCount = 0, this.listViewInstance.setLocalData() }, e.prototype.updateUI = function (e, t, i) { var n = this.isNgTemplate() ? this.onNgChange : this.onChange; if (this.listViewInstance.template || this.listViewInstance.groupTemplate) { var r = this.listViewInstance.curViewDS[t]; e.dataset.uid = r[this.listViewInstance.fields.id] ? r[this.listViewInstance.fields.id].toString() : hT.generateId(), n(r, e, this) } else this.updateUiContent(e, t); this.changeElementAttributes(e, t), i && this.listViewInstance.ulElement.insertBefore(e, i) }, e.prototype.onNgChange = function (e, t, i) { for (var n = ce(i.listViewInstance.template)(e); t.lastChild;)t.removeChild(t.lastChild); t.appendChild(n[0]) }, e.prototype.getModuleName = function () { return "virtualization" }, e.prototype.destroy = function () { this.wireScrollEvent(!0) }, e }(), CA = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), LA = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, MA = function (e) { function t(t, i) { var n = e.call(this, i, t) || this; return n.getHelper = function (e) { var t = n.getSortableElement(e.sender.target); if (!n.isValidTarget(t, n)) return !1; var i; return n.helper ? i = n.helper({ sender: t, element: e.element }) : ((i = t.cloneNode(!0)).style.width = t.offsetWidth + "px", i.style.height = t.offsetHeight + "px"), S([i], ["e-sortableclone"]), n.element.appendChild(i), i }, n.onDrag = function (e) { n.trigger("drag", { event: e.event, element: n.element, target: e.target }); var t = n.getSortableInstance(e.target), i = n.getSortableElement(e.target, t); if (n.isValidTarget(i, t) && n.curTarget !== i && (!t.placeHolderElement || t.placeHolderElement !== e.target)) { n.curTarget = i; var r = n.getIndex(t.placeHolderElement, t); r = d(r) ? n.getIndex(n.target) : n.getIndex(i, t) < r || !r ? r : r - 1, t.placeHolderElement = n.getPlaceHolder(i, t); var o = n.getIndex(i, t), s = t.element !== n.element ? o : r < o ? o + 1 : o; t.placeHolderElement ? (t.element !== n.element && s === t.element.childElementCount - 1 ? t.element.appendChild(t.placeHolderElement) : t.element.insertBefore(t.placeHolderElement, t.element.children[s]), n.refreshDisabled(r, o, t)) : (n.updateItemClass(t), t.element.insertBefore(n.target, t.element.children[s]), n.refreshDisabled(r, o, t), n.curTarget = n.target, n.trigger("drop", { event: e.event, element: t.element, previousIndex: r, currentIndex: o, target: e.target, helper: t.element.lastChild, droppedElement: n.target, scope: n.scope })) } if (t = n.getSortableInstance(n.curTarget), d(i) && e.target !== t.placeHolderElement) n.isPlaceHolderPresent(t) && n.removePlaceHolder(t); else { var a;[].slice.call(document.getElementsByClassName("e-sortable-placeholder")).forEach(function (e) { (a = n.getSortableInstance(e)).element && a !== t && n.removePlaceHolder(a) }) } }, n.onDragStart = function (e) { n.target = n.getSortableElement(e.target), n.target.classList.add("e-grabbed"), n.curTarget = n.target, n.trigger("dragStart", { event: e.event, element: n.element, target: n.target }) }, n.onDragStop = function (e) { var t, i = n.getSortableInstance(n.curTarget); if (n.isPlaceHolderPresent(i)) { t = n.getIndex(n.target), n.updateItemClass(i), i.element.insertBefore(n.target, i.placeHolderElement); var r = n.getIndex(n.target, i); t = n === i && t - r > 1 ? t - 1 : t, n.trigger("drop", { event: e.event, element: i.element, previousIndex: t, currentIndex: r, target: e.target, helper: e.helper, droppedElement: n.target, scopeName: n.scope }), k(i.placeHolderElement) } (i = n.getSortableInstance(e.target)).element !== e.target || i.element.childElementCount || (t = n.getIndex(n.target), n.updateItemClass(i), i.element.appendChild(n.target), n.trigger("drop", { event: e.event, element: i.element, previousIndex: t, currentIndex: 0, target: e.target, helper: e.helper, droppedElement: n.target, scopeName: n.scope })), n.target.classList.remove("e-grabbed"), n.target = null, n.curTarget = null, k(e.helper) }, n.bind(), n } CA(t, e), i = t, t.prototype.bind = function () { this.element.id || (this.element.id = p("sortable")), this.itemClass || (this.itemClass = "e-sort-item", this.dataBind()), this.initializeDraggable() }, t.prototype.initializeDraggable = function () { new rb(this.element, { helper: this.getHelper, dragStart: this.onDragStart, drag: this.onDrag, dragStop: this.onDragStop, dragTarget: "." + this.itemClass, enableTapHold: !0, tapHoldThreshold: 200, queryPositionInfo: this.queryPositionInfo }) }, t.prototype.getPlaceHolder = function (e, t) { return t.placeHolder ? (this.isPlaceHolderPresent(t) && k(t.placeHolderElement), t.placeHolderElement = t.placeHolder({ element: t.element, grabbedElement: this.target, target: e }), t.placeHolderElement.classList.add("e-sortable-placeholder"), t.placeHolderElement) : null }, t.prototype.isValidTarget = function (e, t) { return e && m(e, t.element) && e.classList.contains(t.itemClass) && !e.classList.contains("e-disabled") }, t.prototype.removePlaceHolder = function (e) { k(e.placeHolderElement), e.placeHolderElement = null }, t.prototype.updateItemClass = function (e) { this !== e && (this.target.classList.remove(this.itemClass), this.target.classList.add(e.itemClass)) }, t.prototype.getSortableInstance = function (e) { if (e = R(e, ".e-" + this.getModuleName())) { var t = V(e, i); return t.scope && this.scope && t.scope === this.scope ? t : this } return this }, t.prototype.refreshDisabled = function (e, t, i) { if (i === this) for (var n = void 0, r = e < t, o = void 0, s = r ? e : t, a = r ? t : e; s <= a;)(n = this.element.children[s]).classList.contains("e-disabled") ? (o = this.getIndex(n), this.element.insertBefore(n, this.element.children[r ? o + 2 : o - 1]), s = r ? o + 2 : o + 1) : s++ }, t.prototype.getIndex = function (e, t) { void 0 === t && (t = this); var i; return [].slice.call(t.element.children).forEach(function (t, n) { t === e && (i = n) }), i }, t.prototype.getSortableElement = function (e, t) { return void 0 === t && (t = this), R(e, "." + t.itemClass) }, t.prototype.queryPositionInfo = function (e) { return e.left = pageXOffset ? parseFloat(e.left) - pageXOffset + "px" : e.left, e.top = pageYOffset ? parseFloat(e.top) - pageYOffset + "px" : e.top, e }, t.prototype.isPlaceHolderPresent = function (e) { return e.placeHolderElement && !!R(e.placeHolderElement, "#" + e.element.id) }, t.prototype.moveTo = function (e, t, i) { bi(this.element, e, t, i) }, t.prototype.destroy = function () { "e-sort-item" === this.itemClass && (this.itemClass = null, this.dataBind()), V(this.element, rb).destroy(), e.prototype.destroy.call(this) }, t.prototype.getModuleName = function () { return "sortable" }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "itemClass": [].slice.call(this.element.children).forEach(function (i) { i.classList.contains(t.itemClass) && i.classList.remove(t.itemClass), e.itemClass && i.classList.add(e.itemClass) }) } } }; var i; return LA([Y(!1)], t.prototype, "enableAnimation", void 0), LA([Y(null)], t.prototype, "itemClass", void 0), LA([Y(null)], t.prototype, "scope", void 0), LA([Y()], t.prototype, "helper", void 0), LA([Y()], t.prototype, "placeHolder", void 0), LA([X()], t.prototype, "drag", void 0), LA([X()], t.prototype, "dragStart", void 0), LA([X()], t.prototype, "drop", void 0), t = i = LA([J], t) }(iw), SA = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), xA = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, TA = "e-left-calendar", DA = "e-right-calendar", AA = "e-daterangepicker", EA = "e-active", jA = "e-start-date", IA = "e-end-date", kA = "e-input-focus", PA = "e-range-hover", NA = "e-other-month", OA = "e-start-label", RA = "e-end-label", zA = "e-disabled", BA = "e-selected", FA = "e-calendar", VA = "e-header", WA = "e-title", HA = "e-icon-container", _A = "e-date-range-container", YA = "e-presets", UA = "e-focused-date", qA = "e-content", GA = "e-day-span", QA = "e-week-number", XA = "e-date-disabled", JA = "e-icon-disabled", ZA = "e-overlay", KA = hA.li, $A = "e-hover", eE = ["title", "class", "style"], tE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return SA(t, e), xA([Y()], t.prototype, "label", void 0), xA([Y()], t.prototype, "start", void 0), xA([Y()], t.prototype, "end", void 0), t }(ww), iE = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.isCustomRange = !1, n.isCustomWindow = !1, n.presetsItem = [], n.liCollections = [], n.previousEleValue = "", n.isKeyPopup = !1, n.dateDisabled = !1, n.isRangeIconClicked = !1, n.isMaxDaysClicked = !1, n.disabledDays = [], n.preventBlur = !1, n.preventFocus = !1, n.invalidValueString = null, n.dateRangeOptions = t, n } return SA(t, e), t.prototype.render = function () { this.initialize(), this.setProperties({ startDate: this.startValue }, !0), this.setProperties({ endDate: this.endValue }, !0), this.setModelValue() }, t.prototype.preRender = function () { if (this.keyInputConfigs = { altDownArrow: "alt+downarrow", escape: "escape", enter: "enter", tab: "tab", altRightArrow: "alt+rightarrow", altLeftArrow: "alt+leftarrow", moveUp: "uparrow", moveDown: "downarrow", spacebar: "space" }, this.defaultConstant = { placeholder: "", startLabel: "Start Date", endLabel: "End Date", customRange: "Custom Range", applyText: "Apply", cancelText: "Cancel", selectedDays: "Selected Days", days: "days" }, this.isMobile = window.matchMedia("(max-width:550px)").matches, this.inputElement = this.element, this.angularTag = null, "EJS-DATERANGEPICKER" === this.element.tagName && (this.angularTag = this.element.tagName, this.inputElement = this.createElement("input"), this.element.appendChild(this.inputElement)), this.cloneElement = this.element.cloneNode(!0), x([this.cloneElement], [AA, "e-control", "e-lib"]), this.updateHtmlAttributeToElement(), this.element.getAttribute("id") ? null !== this.angularTag && (this.inputElement.id = this.element.getAttribute("id") + "_input") : (this.element.id = p("ej2-datetimepicker"), null !== this.angularTag && P(this.inputElement, { id: this.element.id + "_input" })), this.checkInvalidRange(this.value), !this.invalidValueString && "string" == typeof this.value) { var t = this.value.split(" " + this.separator + " "); this.value = [new Date(t[0]), new Date(t[1])] } this.initProperty(), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.removeAttribute("tabindex"), e.prototype.preRender.call(this), this.navNextFunction = this.navNextMonth.bind(this), this.navPrevFunction = this.navPrevMonth.bind(this), this.deviceNavNextFunction = this.deviceNavNext.bind(this), this.deviceNavPrevFunction = this.deviceNavPrevious.bind(this), this.initStartDate = this.checkDateValue(this.startValue), this.initEndDate = this.checkDateValue(this.endValue), this.formElement = R(this.element, "form") }, t.prototype.updateValue = function () { this.formatString; this.value && this.value.length > 0 ? (this.value[0] instanceof Date && !isNaN(+this.value[0]) ? (this.setProperties({ startDate: this.value[0] }, !0), this.startValue = this.value[0]) : "string" == typeof this.value[0] ? 0 == +this.value[0] || isNaN(+new Date(this.checkValue(this.value[0]))) ? (this.startValue = null, this.setValue()) : (this.setProperties({ startDate: new Date(this.checkValue(this.value[0])) }, !0), this.startValue = new Date(this.checkValue(this.value[0]))) : (this.startValue = null, this.setValue()), this.value[1] instanceof Date && !isNaN(+this.value[1]) ? (this.setProperties({ endDate: this.value[1] }, !0), this.endValue = this.value[1]) : "string" == typeof this.value[1] ? 0 == +this.value[0] || isNaN(+new Date(this.checkValue(this.value[0]))) ? (this.setProperties({ endDate: null }, !0), this.endValue = null, this.setValue()) : (this.setProperties({ endDate: new Date(this.checkValue(this.value[1])) }, !0), this.endValue = new Date(this.checkValue(this.value[1])), this.setValue()) : (this.setProperties({ endDate: null }, !0), this.endValue = null, this.setValue())) : this.value && this.value.start ? (this.value.start instanceof Date && !isNaN(+this.value.start) ? (this.setProperties({ startDate: this.value.start }, !0), this.startValue = this.value.start) : "string" == typeof this.value.start ? (this.setProperties({ startDate: new Date(this.checkValue(this.value.start)) }, !0), this.startValue = new Date(this.checkValue(this.value.start))) : (this.startValue = null, this.setValue()), this.value.end instanceof Date && !isNaN(+this.value.end) ? (this.setProperties({ endDate: this.value.end }, !0), this.endValue = this.value.end) : "string" == typeof this.value.end ? (this.setProperties({ endDate: new Date(this.checkValue(this.value.end)) }, !0), this.endValue = new Date(this.checkValue(this.value.end)), this.setValue()) : (this.setProperties({ endDate: null }, !0), this.endValue = null, this.setValue())) : d(this.value) && (this.endValue = this.checkDateValue(new Date(this.checkValue(this.endDate))), this.startValue = this.checkDateValue(new Date(this.checkValue(this.startDate))), this.setValue()) }, t.prototype.initProperty = function () { this.globalize = new Gw(this.locale), this.checkFormat(), this.checkView(), (d(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) && this.setProperties({ firstDayOfWeek: this.globalize.getFirstDayOfWeek() }, !0), this.updateValue() }, t.prototype.checkFormat = function () { if (this.format) if ("string" == typeof this.format) this.formatString = this.format; else if ("" === this.format.skeleton || d(this.format.skeleton)) this.formatString = null; else { var e = this.format.skeleton; this.formatString = this.globalize.getDatePattern({ skeleton: e, type: "date" }) } else this.formatString = null }, t.prototype.initialize = function () { null !== this.angularTag && this.validationAttribute(this.element, this.inputElement), this.checkHtmlAttributes(!1), l(this.defaultKeyConfigs, { shiftTab: "shift+tab" }); var e = this.checkDateValue(new Date(this.checkValue(this.startValue))); this.setProperties({ startDate: e }, !0), this.setProperties({ endValue: this.checkDateValue(new Date(this.checkValue(this.endValue))) }, !0), this.setValue(), this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(this.min))) }, !0), this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(this.max))) }, !0), this.l10n = new pb("daterangepicker", this.defaultConstant, this.locale), this.l10n.setLocale(this.locale), this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, !0), this.processPresets(), this.createInput(), this.updateHtmlAttributeToWrapper(), this.setRangeAllowEdit(), this.bindEvents() }, t.prototype.setRangeAllowEdit = function () { this.allowEdit ? this.readonly || this.inputElement.removeAttribute("readonly") : P(this.inputElement, { readonly: "" }), this.updateClearIconState() }, t.prototype.updateClearIconState = function () { this.allowEdit || !this.inputWrapper || this.readonly ? this.inputWrapper && x([this.inputWrapper.container], ["e-non-edit"]) : "" === this.inputElement.value ? x([this.inputWrapper.container], ["e-non-edit"]) : S([this.inputWrapper.container], ["e-non-edit"]) }, t.prototype.validationAttribute = function (e, t) { var i = e.getAttribute("name") ? e.getAttribute("name") : e.getAttribute("id"); t.setAttribute("name", i), e.removeAttribute("name"); for (var n = ["required", "aria-required", "form"], r = 0; r < n.length; r++)if (!d(e.getAttribute(n[r]))) { var o = e.getAttribute(n[r]); t.setAttribute(n[r], o), e.removeAttribute(n[r]) } }, t.prototype.updateHtmlAttributeToWrapper = function () { if (!d(this.htmlAttributes)) for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (eE.indexOf(i) > -1) if ("class" === i) S([this.inputWrapper.container], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.inputWrapper.container.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.inputWrapper.container.setAttribute(i, n) } else this.inputWrapper.container.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHtmlAttributeToElement = function () { if (!d(this.htmlAttributes)) for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; eE.indexOf(i) < 0 && this.inputElement.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.processPresets = function () { this.presetsItem = []; var e = 0; if (!c(this.presets[0].start && this.presets[0].end && this.presets[0].label)) { for (var t = 0, i = this.presets; t < i.length; t++) { var n = i[t], r = n.label.replace(/\s+/g, "") + "_" + ++e; "string" == typeof n.end ? this.presetsItem.push({ id: r, text: n.label, end: new Date(this.checkValue(n.end)), start: new Date(this.checkValue(n.start)) }) : this.presetsItem.push({ id: r, text: n.label, start: n.start, end: n.end }) } var o = d(this.startValue) ? null : new Date(+this.startValue), s = d(this.endValue) ? null : new Date(+this.endValue); this.presetsItem.push({ id: "custom_range", text: this.l10n.getConstant("customRange"), start: o, end: s }), d(this.startValue) || d(this.endValue) || (this.isCustomRange = !0, this.activeIndex = this.presetsItem.length - 1) } }, t.prototype.bindEvents = function () { this.enabled ? (Kv.add(this.inputWrapper.buttons[0], "mousedown", this.rangeIconHandler, this), Kv.add(this.inputElement, "focus", this.inputFocusHandler, this), Kv.add(this.inputElement, "blur", this.inputBlurHandler, this), Kv.add(this.inputElement, "change", this.inputChangeHandler, this), this.showClearButton && this.inputWrapper.clearButton && Kv.add(this.inputWrapper.clearButton, "mousedown", this.resetHandler, this), this.isMobile || (this.keyInputConfigs = h(this.keyInputConfigs, this.keyConfigs), this.inputKeyboardModule = new cb(this.inputElement, { eventName: "keydown", keyAction: this.inputHandler.bind(this), keyConfigs: this.keyInputConfigs })), this.formElement && Kv.add(this.formElement, "reset", this.formResetHandler, this), this.inputElement.setAttribute("tabindex", this.tabIndex)) : (Kv.remove(this.inputWrapper.buttons[0], "mousedown", this.rangeIconHandler), Kv.remove(this.inputElement, "blur", this.inputBlurHandler), Kv.remove(this.inputElement, "focus", this.inputFocusHandler), Kv.remove(this.inputElement, "change", this.inputChangeHandler), this.showClearButton && this.inputWrapper.clearButton && Kv.remove(this.inputWrapper.clearButton, "mousedown touchstart", this.resetHandler), this.isMobile || d(this.inputKeyboardModule) || this.inputKeyboardModule.destroy(), this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler), this.inputElement.tabIndex = -1) }, t.prototype.updateHiddenInput = function () { if (this.firstHiddenChild && this.secondHiddenChild) { var e = { type: "datetime", skeleton: "yMd" }; "string" == typeof this.startDate && (this.startDate = this.globalize.parseDate(this.startDate, e)), "string" == typeof this.endDate && (this.endDate = this.globalize.parseDate(this.endDate, e)), this.firstHiddenChild.value = this.startDate && this.globalize.formatDate(this.startDate, e) || this.inputElement.value, this.secondHiddenChild.value = this.endDate && this.globalize.formatDate(this.endDate, e) || this.inputElement.value, this.dispatchEvent(this.firstHiddenChild, "focusout"), this.dispatchEvent(this.firstHiddenChild, "change") } }, t.prototype.inputChangeHandler = function (e) { e.stopPropagation(), this.updateHiddenInput() }, t.prototype.bindClearEvent = function () { this.showClearButton && this.inputWrapper.clearButton && Kv.add(this.inputWrapper.clearButton, "mousedown", this.resetHandler, this) }, t.prototype.resetHandler = function (e) { this.valueType = this.value, e.preventDefault(), this.clear(), this.changeTrigger(e), this.clearRange(), this.hide(e) }, t.prototype.restoreValue = function () { this.previousEleValue = this.inputElement.value, this.previousStartValue = this.startValue, this.previousEndValue = this.endValue, this.valueType = null, this.initStartDate = this.checkDateValue(this.startValue), this.initEndDate = this.checkDateValue(this.endValue), this.setValue(), this.setModelValue() }, t.prototype.formResetHandler = function (e) { if (this.formElement && e.target === this.formElement && !this.inputElement.disabled) { var t = this.inputElement.getAttribute("value"); d(this.startCopy) ? (this.setProperties({ value: null, startDate: null, endDate: null }, !0), this.startValue = this.endValue = null) : (d(this.value) || d(this.value.start) ? (this.setProperties({ value: [this.startCopy, this.endCopy] }, !0), this.startValue = this.value[0], this.endValue = this.value[1]) : (this.setProperties({ value: { start: this.startCopy, end: this.endCopy } }, !0), this.startValue = this.value.start, this.endValue = this.value.end), this.setProperties({ startDate: this.startValue, endDate: this.endValue }, !0)), "EJS-DATERANGEPICKER" === this.element.tagName && (this.setProperties({ value: null, startDate: null, endDate: null }, !0), t = "", this.startValue = this.endValue = null, this.inputElement.setAttribute("value", "")), this.restoreValue(), this.inputElement && (eS.setValue(t, this.inputElement, this.floatLabelType, this.showClearButton), this.errorClass()) } }, t.prototype.clear = function () { null !== this.startValue && (this.startValue = null), null !== this.endValue && (this.endValue = null), this.value && this.value.start && this.setProperties({ value: { start: null, end: null } }, !0), null !== this.value && this.value.length > 0 && this.setProperties({ value: null }, !0), eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), d(this.applyButton) || (this.applyButton.disabled = this.applyButton.element.disabled = !0), this.removeSelection() }, t.prototype.rangeIconHandler = function (e) { this.isMobile && this.inputElement.setAttribute("readonly", ""), e.preventDefault(), this.targetElement = null, this.isPopupOpen() ? this.applyFunction(e) : (this.isRangeIconClicked = !0, this.inputWrapper.container.children[0].focus(), this.show(null, e), this.isMobile || d(this.leftCalendar) || (this.isRangeIconClicked = !1, this.calendarFocus(), this.isRangeIconClicked = !0), S([this.inputWrapper.container], [kA])) }, t.prototype.checkHtmlAttributes = function (e) { this.globalize = new Gw(this.locale); for (var t = e ? d(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["startDate", "endDate", "minDays", "maxDays", "min", "max", "disabled", "readonly", "style", "name", "placeholder", "type", "value"], i = { format: this.formatString, type: "date", skeleton: "yMd" }, n = 0, o = t; n < o.length; n++) { var s = o[n]; if (!d(this.inputElement.getAttribute(s))) switch (s) { case "disabled": if (d(this.dateRangeOptions) || void 0 === this.dateRangeOptions.enabled || e) { var a = "disabled" === this.inputElement.getAttribute(s) || "" === this.inputElement.getAttribute(s) || "true" === this.inputElement.getAttribute(s); this.setProperties({ enabled: !a }, !e) } break; case "readonly": if (d(this.dateRangeOptions) || void 0 === this.dateRangeOptions.readonly || e) { var l = "readonly" === this.inputElement.getAttribute(s) || "true" === this.inputElement.getAttribute(s) || "" === this.inputElement.getAttribute(s); this.setProperties({ readonly: l }, !e) } break; case "placeholder": (d(this.dateRangeOptions) || void 0 === this.dateRangeOptions.placeholder || e) && this.setProperties({ placeholder: this.inputElement.getAttribute(s) }, !e); break; case "value": if (d(this.dateRangeOptions) || void 0 === this.dateRangeOptions.value || e) { var h = this.inputElement.getAttribute(s); this.setProperties(r(s, h, {}), !e) } break; case "style": this.inputElement.setAttribute("style", "" + this.inputElement.getAttribute(s)); break; case "min": if (d(this.min) || +this.min == +new Date(1900, 0, 1) || e) { var c = this.globalize.parseDate(this.inputElement.getAttribute(s), i); this.setProperties(r(s, c, {}), !e) } break; case "name": this.inputElement.setAttribute("name", "" + this.inputElement.getAttribute(s)); break; case "max": if (d(this.max) || +this.max == +new Date(2099, 11, 31) || e) { c = this.globalize.parseDate(this.inputElement.getAttribute(s), i); this.setProperties(r(s, c, {}), !e) } break; case "startDate": if (d(this.startDate)) { c = this.globalize.parseDate(this.inputElement.getAttribute(s), i); this.startValue = c, this.setValue() } break; case "endDate": if (d(this.endDate)) { c = this.globalize.parseDate(this.inputElement.getAttribute(s), i); this.endValue = c, this.setValue() } break; case "minDays": d(this.minDays) && this.setProperties(r(s, parseInt(this.inputElement.getAttribute(s), 10), {}), !0); break; case "maxDays": d(this.maxDays) && this.setProperties(r(s, parseInt(this.inputElement.getAttribute(s), 10), {}), !0); break; case "type": "text" !== this.inputElement.getAttribute(s) && this.inputElement.setAttribute("type", "text") } } }, t.prototype.createPopup = function () { for (var e = 0; e < this.presetsItem.length; e++)e !== this.presetsItem.length - 1 && "custom_range" === this.presetsItem[e].id && this.presetsItem.splice(e, 1); this.activeIndex = this.presetsItem.length - 1, this.isCustomRange = !0; for (e = 0; e <= this.presetsItem.length - 2; e++) { var t = this.presetsItem[e].start, i = this.presetsItem[e].end; this.startValue && this.endValue && +t.setMilliseconds(0) == +this.startValue.setMilliseconds(0) && +i.setMilliseconds(0) == +this.endValue.setMilliseconds(0) && (this.activeIndex = e, this.isCustomRange = !1) } this.popupWrapper = M("div", { id: this.element.id + "_popup", className: AA + " e-popup" }), this.adjustLongHeaderWidth(); var n = !this.isCustomRange || this.isMobile; !c(this.presets[0].start && this.presets[0].end && this.presets[0].label) && n ? (this.isCustomWindow = !1, this.createPresets(), this.listRippleEffect(), this.renderPopup()) : (this.isCustomWindow = !0, this.renderControl()) }, t.prototype.renderControl = function () { this.createControl(), this.bindCalendarEvents(), this.updateRange(this.isMobile ? [this.calendarElement] : [this.leftCalendar, this.rightCalendar]), d(this.endValue) || d(this.startValue) || this.disabledDateRender(), this.updateHeader() }, t.prototype.clearCalendarEvents = function () { Kv.clearEvents(this.leftCalPrevIcon), Kv.clearEvents(this.leftCalNextIcon), Kv.clearEvents(this.rightCalPrevIcon), Kv.clearEvents(this.rightCalNextIcon) }, t.prototype.updateNavIcons = function () { if (this.isPopupOpen() && this.depth === this.currentView()) { var e = new Date(this.checkValue(this.leftCalCurrentDate)), t = !1; "Year" === this.currentView() ? t = this.compareYears(e, this.rightCalCurrentDate) < 1 : "Decade" === this.currentView() ? t = this.compareDecades(e, this.rightCalCurrentDate) < 1 : "Month" === this.currentView() && (t = this.compareMonths(e, this.rightCalCurrentDate) < 1), this.previousIcon = this.rightCalPrevIcon, this.nextIcon = this.leftCalNextIcon, this.nextIconHandler(t), this.previousIconHandler(t) } }, t.prototype.calendarIconEvent = function () { this.clearCalendarEvents(), this.leftCalPrevIcon && !this.leftCalPrevIcon.classList.contains(zA) && Kv.add(this.leftCalPrevIcon, "mousedown", this.navPrevFunction), this.leftCalNextIcon && !this.leftCalNextIcon.classList.contains(zA) && Kv.add(this.leftCalNextIcon, "mousedown", this.navNextFunction), this.rightCalPrevIcon && !this.rightCalPrevIcon.classList.contains(zA) && Kv.add(this.rightCalPrevIcon, "mousedown", this.navPrevFunction), this.rightCalNextIcon && !this.rightCalNextIcon.classList.contains(zA) && Kv.add(this.rightCalNextIcon, "mousedown", this.navNextFunction) }, t.prototype.bindCalendarEvents = function () { this.isMobile ? (this.deviceCalendarEvent(), Kv.add(this.startButton.element, "click", this.deviceHeaderClick, this), Kv.add(this.endButton.element, "click", this.deviceHeaderClick, this)) : (this.updateNavIcons(), this.calendarIconEvent(), this.calendarIconRipple(), this.headerTitleElement = this.popupObj.element.querySelector("." + DA + " ." + VA + " ." + WA), this.headerTitleElement = this.popupObj.element.querySelector("." + TA + " ." + VA + " ." + WA), this.defaultKeyConfigs = h(this.defaultKeyConfigs, this.keyConfigs), this.leftKeyboardModule = new cb(this.leftCalendar, { eventName: "keydown", keyAction: this.keyInputHandler.bind(this), keyConfigs: this.defaultKeyConfigs }), this.rightKeyboardModule = new cb(this.rightCalendar, { eventName: "keydown", keyAction: this.keyInputHandler.bind(this), keyConfigs: this.defaultKeyConfigs })), this.start === this.depth && this.bindCalendarCellEvents(), this.removeFocusedDate() }, t.prototype.calendarIconRipple = function () { ee(this.leftCalPrevIcon, { selector: ".e-prev", duration: 400, isCenterRipple: !0 }), ee(this.leftCalNextIcon, { selector: ".e-next", duration: 400, isCenterRipple: !0 }), ee(this.rightCalPrevIcon, { selector: ".e-prev", duration: 400, isCenterRipple: !0 }), ee(this.rightCalNextIcon, { selector: ".e-next", duration: 400, isCenterRipple: !0 }) }, t.prototype.deviceCalendarEvent = function () { Kv.clearEvents(this.nextIcon), Kv.clearEvents(this.previousIcon), ee(this.nextIcon, { selector: ".e-prev", duration: 400, isCenterRipple: !0 }), ee(this.previousIcon, { selector: ".e-next", duration: 400, isCenterRipple: !0 }), this.nextIcon && !this.nextIcon.classList.contains(zA) && Kv.add(this.nextIcon, "mousedown", this.deviceNavNextFunction), this.previousIcon && !this.previousIcon.classList.contains(zA) && Kv.add(this.previousIcon, "mousedown", this.deviceNavPrevFunction) }, t.prototype.deviceNavNext = function (e) { var t = R(e.target, "." + FA); this.updateDeviceCalendar(t), this.navigateNext(e), this.deviceNavigation() }, t.prototype.deviceNavPrevious = function (e) { var t = R(e.target, "." + FA); this.updateDeviceCalendar(t), this.navigatePrevious(e), this.deviceNavigation() }, t.prototype.updateDeviceCalendar = function (e) { e && (this.previousIcon = e.querySelector(".e-prev"), this.nextIcon = e.querySelector(".e-next"), this.calendarElement = e, this.deviceCalendar = e, this.contentElement = e.querySelector("." + qA), this.tableBodyElement = N(".e-content tbody", e), this.table = e.querySelector("." + qA).getElementsByTagName("table")[0], this.headerTitleElement = e.querySelector(".e-header .e-title"), this.headerElement = e.querySelector("." + VA)) }, t.prototype.deviceHeaderClick = function (e) { if (e.currentTarget.classList.contains("e-start-btn") && !d(this.startValue)) { this.endButton.element.classList.remove(EA), this.startButton.element.classList.add(EA); var t = this.popupObj.element.querySelector("." + FA); this.updateDeviceCalendar(t), d(this.calendarElement.querySelector("." + jA + ":not(.e-other-month)")) && (this.currentDate = new Date(+this.startValue), k(this.tableBodyElement), this.createContentBody(), this.deviceNavigation()), this.removeClassDisabled() } else if (!d(this.startValue) && !d(this.endValue)) { this.startButton.element.classList.remove(EA), this.endButton.element.classList.add(EA); t = this.popupObj.element.querySelector("." + FA); this.updateDeviceCalendar(t), d(this.calendarElement.querySelector(".e-end-date:not(.e-other-month)")) && (this.currentDate = new Date(+this.endValue), k(this.tableBodyElement), this.createContentBody(), this.deviceNavigation()), this.updateMinMaxDays(this.popupObj.element.querySelector("." + FA)), this.selectableDates() } }, t.prototype.inputFocusHandler = function () { this.preventBlur = !1; var e = { model: this }; this.preventFocus || (this.preventFocus = !0, this.trigger("focus", e)), this.updateClearIconState(), this.updateHiddenInput() }, t.prototype.inputBlurHandler = function (e) { if (!this.preventBlur) { var t = this.inputElement.value; if (d(this.presetsItem) || this.presetsItem.length > 0 && this.previousEleValue !== this.inputElement.value && (this.activeIndex = this.presetsItem.length - 1, this.isCustomRange = !0), !d(t) && "" !== t.trim()) { var i = t.split(" " + this.separator + " "); if (i.length > 1) { this.invalidValueString = null; var n = { format: this.formatString, type: "date", skeleton: "yMd" }, r = this.globalize.parseDate(i[0].trim(), n), o = this.globalize.parseDate(i[1].trim(), n); if (!(d(r) || isNaN(+r) || d(o) || isNaN(+o))) { if (this.startValue = r, this.endValue = o, this.setValue(), this.refreshControl(), t !== this.previousEleValue && this.changeTrigger(e), !this.preventBlur && document.activeElement !== this.inputElement) { this.preventFocus = !1; var s = { model: this }; this.trigger("blur", s) } return void this.updateHiddenInput() } this.strictMode || (this.startValue = null, this.endValue = null, this.setValue()) } else this.strictMode || (this.startValue = null, this.endValue = null, this.setValue()) } if (this.strictMode ? (d(t) || "" !== t.trim() || (this.startValue = null, this.endValue = null), eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), this.updateInput()) : (this.clearRange(), this.startValue = null, this.endValue = null, this.setValue()), this.errorClass(), this.changeTrigger(e), !this.preventBlur && document.activeElement !== this.inputElement) { this.preventFocus = !1; s = { model: this }; this.trigger("blur", s) } } this.updateHiddenInput() }, t.prototype.clearRange = function () { this.previousStartValue = this.previousEndValue = null, this.currentDate = null }, t.prototype.errorClass = function () { var e = this.inputElement.value.trim(); (d(this.endValue) && d(this.startValue) && "" !== e || !d(this.startValue) && +this.startValue < +this.min || !d(this.startValue) && !d(this.endValue) && +this.startValue > +this.endValue || !d(this.endValue) && +this.endValue > +this.max || this.startValue && this.isDateDisabled(this.startValue) || this.endValue && this.isDateDisabled(this.endValue)) && "" !== e ? (S([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": "true" })) : this.inputWrapper && (x([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": "false" })) }, t.prototype.keyCalendarUpdate = function (e, t) { return this.removeFocusedDate(), e ? (this.leftCalCurrentDate = new Date(+this.currentDate), t = this.leftCalendar) : (this.rightCalCurrentDate = new Date(+this.currentDate), t = this.rightCalendar), this.updateCalendarElement(t), this.table.focus(), t }, t.prototype.navInCalendar = function (e, t, i, n, r) { var o, s, a = this.getViewNumber(this.currentView()), l = this.min; switch (s = d(this.maxDays) || !this.isMaxDaysClicked || d(this.startValue) ? this.max : new Date(new Date(+this.startValue).setDate(this.startValue.getDate() + (this.maxDays - 1))), e.action) { case "moveRight": o = new Date(+this.currentDate), this.addDay(o, 1, e, s, l), t && +o == +n && (r = this.keyCalendarUpdate(!1, r)), this.KeyboardNavigate(1, a, e, s, l), this.keyNavigation(r, e); break; case "moveLeft": o = new Date(+this.currentDate), this.addDay(o, -1, e, s, l), t || +o == +i && (r = this.keyCalendarUpdate(!0, r)), this.KeyboardNavigate(-1, a, e, s, l), this.keyNavigation(r, e); break; case "moveUp": 0 === a ? (o = new Date(+this.currentDate), this.addDay(o, -7, e, s, l), +o <= +i && !t && (r = this.keyCalendarUpdate(!0, r)), this.KeyboardNavigate(-7, a, e, s, l)) : this.KeyboardNavigate(-4, a, e, this.max, this.min), this.keyNavigation(r, e); break; case "moveDown": 0 === a ? (o = new Date(+this.currentDate), this.addDay(o, 7, e, s, l), t && +o >= +n && (r = this.keyCalendarUpdate(!1, r)), this.KeyboardNavigate(7, a, e, s, l)) : this.KeyboardNavigate(4, a, e, this.max, this.min), this.keyNavigation(r, e); break; case "home": this.currentDate = this.firstDay(this.currentDate), k(this.tableBodyElement), 0 === a ? this.renderMonths(e) : 1 === a ? this.renderYears(e) : this.renderDecades(e), this.keyNavigation(r, e); break; case "end": this.currentDate = this.lastDay(this.currentDate, a), k(this.tableBodyElement), 0 === a ? this.renderMonths(e) : 1 === a ? this.renderYears(e) : this.renderDecades(e), this.keyNavigation(r, e) } }, t.prototype.keyInputHandler = function (t, i) { var n, r = this.getViewNumber(this.currentView()), o = new Date(this.rightCalCurrentDate.getFullYear(), this.rightCalCurrentDate.getMonth(), 1), s = new Date(this.leftCalCurrentDate.getFullYear(), this.leftCalCurrentDate.getMonth() + 1, 0), a = R(t.target, "." + DA), l = (a = d(a) ? this.leftCalendar : a).classList.contains(TA); this.updateCalendarElement(a); var h = this.tableBodyElement.querySelector("tr td.e-selected"), c = a.querySelector("tr td." + UA), p = a.querySelector("tr td." + jA), u = a.querySelector("tr td." + IA), g = this.getViewNumber(this.depth), m = r === g && this.getViewNumber(this.start) >= g, f = R(t.target, "." + TA), y = R(t.target, "." + DA), v = R(t.target, "." + YA); switch (d(c) ? d(u) || this.dateDisabled ? d(p) || this.dateDisabled ? this.dateDisabled || this.currentDate.setDate(1) : this.currentDate = new Date(+this.startValue) : this.currentDate = new Date(+this.endValue) : this.currentDate = this.currentDate, this.effect = "", t.action) { case "altUpArrow": this.isPopupOpen() && (this.hide(t), this.preventFocus = !0, this.inputElement.focus(), S([this.inputWrapper.container], [kA])); break; case "select": if (m) { var w = d(c) ? p : c; d(w) || w.classList.contains(zA) || this.selectRange(null, w) } else (d(h) || m) && d(c) || (d(this.value) || (i = this.calendarElement.classList.contains(TA) ? this.startDate : this.endDate), this.controlDown = t, this.contentClick(null, --r, c || h, i)); t.preventDefault(); break; case "controlHome": var b = new Date(this.currentDate.getFullYear(), 0, 1); !l && +b < +s && (a = this.keyCalendarUpdate(!0, a)), e.prototype.navigateTo.call(this, "Month", new Date(this.currentDate.getFullYear(), 0, 1)), this.keyNavigation(a, t); break; case "altRightArrow": d(f) ? d(y) ? d(v) || this.cancelButton.element.focus() : d(this.presetElement) ? this.cancelButton.element.focus() : (this.presetElement.focus(), this.removeFocusedDate()) : this.rightCalendar.children[1].firstElementChild.focus(), t.preventDefault(); break; case "altLeftArrow": d(f) ? d(y) || this.leftCalendar.children[1].firstElementChild.focus() : !0 !== this.applyButton.element.disabled ? this.applyButton.element.focus() : this.cancelButton.element.focus(), t.preventDefault(); break; case "controlUp": this.calendarElement.classList.contains(TA), this.calendarNavigation(t, this.calendarElement), t.preventDefault(); break; case "controlDown": d(h) && d(c) || m || (d(this.value) || (i = this.calendarElement.classList.contains(TA) ? this.startDate : this.endDate), this.controlDown = t, this.contentClick(null, --r, h || c, i)), t.preventDefault(); break; case "controlEnd": b = new Date(this.currentDate.getFullYear(), 11, 31), l && +b > +o && (a = this.keyCalendarUpdate(!1, a)), e.prototype.navigateTo.call(this, "Month", new Date(this.currentDate.getFullYear(), 11, 31)), this.keyNavigation(a, t); break; case "pageUp": n = new Date(+this.currentDate), this.addMonths(n, -1), !l && +n <= +s && (a = this.keyCalendarUpdate(!0, a)), this.addMonths(this.currentDate, -1), e.prototype.navigateTo.call(this, "Month", this.currentDate), this.keyNavigation(a, t); break; case "pageDown": n = new Date(+this.currentDate), this.addMonths(n, 1), l && +n >= +o && (a = this.keyCalendarUpdate(!1, a)), this.addMonths(this.currentDate, 1), e.prototype.navigateTo.call(this, "Month", this.currentDate), this.keyNavigation(a, t); break; case "shiftPageUp": n = new Date(+this.currentDate), this.addYears(n, -1), !l && +n <= +s && (a = this.keyCalendarUpdate(!0, a)), this.addYears(this.currentDate, -1), e.prototype.navigateTo.call(this, "Month", this.currentDate), this.keyNavigation(a, t); break; case "shiftPageDown": n = new Date(+this.currentDate), this.addYears(n, 1), l && +n >= +o && (a = this.keyCalendarUpdate(!1, a)), this.addYears(this.currentDate, 1), e.prototype.navigateTo.call(this, "Month", this.currentDate), this.keyNavigation(a, t); break; case "shiftTab": d(this.presetElement) || (this.presetElement.setAttribute("tabindex", "0"), this.presetElement.focus(), this.removeFocusedDate()), t.preventDefault(); break; case "spacebar": this.applyButton && !this.applyButton.disabled && this.applyFunction(t); break; default: this.navInCalendar(t, l, s, o, a), this.checkMinMaxDays() }this.presetHeight() }, t.prototype.keyNavigation = function (e, t) { this.bindCalendarCellEvents(e), e.classList.contains(TA) ? this.leftCalCurrentDate = new Date(+this.currentDate) : this.rightCalCurrentDate = new Date(+this.currentDate), this.updateNavIcons(), this.calendarIconEvent(), this.updateRange([e]), this.dateDisabled = this.isDateDisabled(this.currentDate), t.preventDefault() }, t.prototype.inputHandler = function (e) { switch (e.action) { case "altDownArrow": this.isPopupOpen() || ("" === this.inputElement.value && (this.clear(), this.changeTrigger(e), this.clearRange()), this.show(null, e), this.isRangeIconClicked = !1, this.isMobile || d(this.leftCalendar) || this.calendarFocus(), this.isKeyPopup = !0); break; case "escape": this.isPopupOpen() && this.hide(e); break; case "enter": document.activeElement === this.inputElement && (this.inputBlurHandler(e), this.hide(e)); break; case "tab": document.activeElement === this.inputElement && this.isPopupOpen() && (this.hide(e), e.preventDefault()) } }, t.prototype.bindCalendarCellEvents = function (e) { for (var t = 0, i = e ? e.querySelectorAll(".e-calendar td") : this.popupObj.element.querySelectorAll(".e-calendar td"); t < i.length; t++) { var n = i[t]; Kv.clearEvents(n); n.classList.contains(zA) || n.classList.contains(XA) || n.classList.contains(QA) || (this.isMobile || Kv.add(n, "mouseover", this.hoverSelection, this), Kv.add(n, "mousedown", this.selectRange, this)) } }, t.prototype.removeFocusedDate = function () { for (var e = !d(this.startValue) || !d(this.endValue), t = 0, i = this.popupObj.element.querySelectorAll(".e-calendar ." + UA); t < i.length; t++) { var n = i[t], r = new Date, o = this.getIdValue(null, n); ("Month" === this.depth && "Month" === this.currentView() && (!n.classList.contains("e-today") || n.classList.contains("e-today") && e) || "Year" === this.depth && "Year" === this.currentView() && (!this.isSameMonth(r, o) && !this.isSameYear(r, o) || e) || "Decade" === this.depth && "Decade" === this.currentView() && (!this.isSameYear(r, o) || e)) && (n.classList.remove(UA), n.classList.contains(jA) || n.classList.contains(IA) || n.removeAttribute("aria-label")) } }, t.prototype.hoverSelection = function (e, t) { var i = t || e.currentTarget, n = this.getIdValue(null, i); if (!d(this.startValue) && +this.startValue >= +this.min && +this.startValue <= +this.max && (!this.isDateDisabled(this.endValue) && !this.isDateDisabled(this.startValue) && d(this.endValue) && d(this.startValue) || !d(this.startValue) && d(this.endValue))) for (var r = 0, o = this.popupObj.element.querySelectorAll(".e-calendar td"); r < o.length; r++) { var s = o[r], a = !s.classList.contains(zA) || s.classList.contains(XA); if (!s.classList.contains(QA) && a) { var l = this.getIdValue(null, s), h = new Date(+this.startValue); new Date(+l).setHours(0, 0, 0, 0) >= h.setHours(0, 0, 0, 0) && +l <= +n ? S([s], PA) : x([s], [PA]) } } }, t.prototype.isSameStartEnd = function (e, t) { var i = !1; return "Month" === this.depth ? e.setHours(0, 0, 0, 0) === t.setHours(0, 0, 0, 0) && (i = !0) : "Year" === this.depth ? e.getFullYear() === t.getFullYear() && e.getMonth() === t.getMonth() && (i = !0) : "Decade" === this.depth && e.getFullYear() === t.getFullYear() && (i = !0), i }, t.prototype.updateRange = function (e) { if (!d(this.startValue)) for (var t = 0, i = e; t < i.length; t++)for (var n = 0, r = i[t].querySelectorAll(".e-calendar td"); n < r.length; n++) { var o = r[n]; if (!o.classList.contains(QA) && !o.classList.contains(zA)) { var s = this.getIdValue(null, o), a = this.getIdValue(null, o); if (d(this.endValue) ? x([o], [PA]) : this.currentView() === this.depth && +a.setHours(0, 0, 0, 0) >= +new Date(+this.startValue).setHours(0, 0, 0, 0) && +a.setHours(0, 0, 0, 0) <= +new Date(+this.endValue).setHours(0, 0, 0, 0) && !this.isSameStartEnd(new Date(+this.startValue), new Date(+this.endValue)) && +new Date(+this.startValue).setHours(0, 0, 0, 0) >= +this.min && +new Date(+this.endValue).setHours(0, 0, 0, 0) <= +this.max && !this.isDateDisabled(this.startValue) && !this.isDateDisabled(this.endValue) && S([o], PA), !o.classList.contains(NA)) { var l = new Date(+this.startValue), h = new Date(+s); this.currentView() === this.depth && +h.setHours(0, 0, 0, 0) == +l.setHours(0, 0, 0, 0) && +h.setHours(0, 0, 0, 0) >= +l.setHours(0, 0, 0, 0) && +this.startValue >= +this.min && !this.inputWrapper.container.classList.contains("e-error") && !this.isDateDisabled(this.startValue) && !this.isDateDisabled(this.endValue) && (S([o], [jA, BA]), this.addSelectedAttributes(o, this.startValue, !0)); var c = new Date(+this.endValue); "Year" === this.currentView() ? h = new Date(h.getFullYear(), h.getMonth() + 1, 0) : "Decade" === this.currentView() && (h = new Date(h.getFullYear(), 11, 31)), this.currentView() === this.depth && !d(this.endValue) && +h.setHours(0, 0, 0, 0) == +c.setHours(0, 0, 0, 0) && +h.setHours(0, 0, 0, 0) <= +c.setHours(0, 0, 0, 0) && +this.startValue >= +this.min && !this.inputWrapper.container.classList.contains("e-error") && !this.isDateDisabled(this.startValue) && !this.isDateDisabled(this.endValue) && (S([o], [IA, BA]), this.addSelectedAttributes(o, this.startValue, !1)), +s != +this.startValue || d(this.endValue) || +s != +this.endValue || this.addSelectedAttributes(o, this.endValue, !1, !0) } } } }, t.prototype.checkMinMaxDays = function () { (!d(this.minDays) && this.minDays > 0 || !d(this.maxDays) && this.maxDays > 0) && (this.isMobile ? this.updateMinMaxDays(this.popupObj.element.querySelector("." + FA)) : (this.updateMinMaxDays(this.popupObj.element.querySelector("." + TA)), this.updateMinMaxDays(this.popupObj.element.querySelector("." + DA)))) }, t.prototype.rangeArgs = function (e) { var t, i, n = d(this.startValue) ? null : this.globalize.formatDate(this.startValue, { format: this.formatString, type: "date", skeleton: "yMd" }), r = d(this.endValue) ? null : this.globalize.formatDate(this.endValue, { format: this.formatString, type: "date", skeleton: "yMd" }); d(this.endValue) || d(this.startValue) ? (t = "", i = 0) : (t = n + " " + this.separator + " " + r, i = Math.round(Math.abs((this.startValue.getTime() - this.endValue.getTime()) / 864e5)) + 1); return { value: this.value, startDate: this.startValue, endDate: this.endValue, daySpan: i, event: e || null, element: this.element, isInteracted: !d(e), text: t } }, t.prototype.otherMonthSelect = function (e, t, i) { var n = +this.getIdValue(null, e), r = '*[id^="/id"]:not(.e-other-month)'.replace("/id", "" + n), o = this.popupObj && this.popupObj.element.querySelector(r); d(o) || (t ? (S([o], [jA, BA]), this.addSelectedAttributes(o, this.startValue, !0)) : (S([o], [IA, BA]), this.addSelectedAttributes(o, this.endValue, !0)), i && this.addSelectedAttributes(e, this.endValue, !1, !0)) }, t.prototype.selectRange = function (e, t) { var i, n; e && e.preventDefault(); var r, o = (r = d(e) ? this.getIdValue(null, t) : this.getIdValue(e, null)).getFullYear(), s = r.getMonth(), a = new Date(o, s, 1), l = new Date(o, s + 1, 0), h = new Date(o, 0, 1), c = new Date(o, 11, 31); d(this.endValue) || d(this.startValue) ? this.isMobile && this.startButton.element.classList.contains(EA) && this.removeSelection() : (!this.isMobile || this.isMobile && !this.endButton.element.classList.contains(EA)) && this.removeSelection(); var p = t || e.currentTarget; if (d(this.startValue)) d(this.previousStartValue) || (r.setHours(this.previousStartValue.getHours()), r.setMinutes(this.previousStartValue.getMinutes()), r.setSeconds(this.previousStartValue.getSeconds())), this.startValue = "Month" === this.depth ? new Date(this.checkValue(r)) : "Year" === this.depth ? a : h, this.endValue = null, this.setValue(), S([p], jA), this.addSelectedAttributes(p, this.startValue, !0), p.classList.contains(NA) && this.otherMonthSelect(p, !0), this.checkMinMaxDays(), this.applyButton.disabled = !0, this.applyButton.element.disabled = !0, this.isMobile && (this.endButton.element.classList.add(EA), this.startButton.element.classList.remove(EA), this.endButton.element.removeAttribute("disabled"), this.selectableDates()), this.trigger("select", this.rangeArgs(e)); else if (+r == +this.startValue || +r > +this.startValue) { if (+r == +this.startValue && !d(this.minDays) && this.minDays > 1) return; this.endValue = null, this.setValue(), (this.isMobile || t) && this.hoverSelection(e, t), d(this.previousEndValue) || (r.setHours(this.previousEndValue.getHours()), r.setMinutes(this.previousEndValue.getMinutes()), r.setSeconds(this.previousEndValue.getSeconds())), this.endValue = "Month" === this.depth ? new Date(this.checkValue(r)) : "Year" === this.depth ? l : c, this.setValue(); var u = this.popupObj.element.querySelectorAll("." + IA); if (this.isMobile) { this.startButton.element.classList.remove(EA), this.endButton.element.classList.add(EA); for (var g = 0, m = u; g < m.length; g++) { var f = m[g]; f.removeAttribute("aria-label"), f.classList.contains(jA) ? (this.addSelectedAttributes(f, this.startValue, !0), x([f], [IA])) : (f.setAttribute("aria-selected", "false"), x([f], [IA, BA])) } } S([p], IA), +this.endValue == +this.startValue ? this.addSelectedAttributes(p, this.endValue, !1, !0) : this.addSelectedAttributes(p, this.endValue, !1), p.classList.contains(NA) && (+this.endValue == +this.startValue ? this.otherMonthSelect(p, !1, !0) : this.otherMonthSelect(p, !1)); for (var y = 0, v = u = this.popupObj.element.querySelectorAll("." + IA); y < v.length; y++) { var w = v[y]; w.classList.contains(jA) && x([w], [PA]) } this.applyButton.disabled = !1, this.applyButton.element.disabled = !1, this.isMobile || this.removeClassDisabled(), this.disabledDateRender(), this.trigger("select", this.rangeArgs(e)) } else +r < +this.startValue && (this.removeClassDisabled(), this.startValue = "Month" === this.depth ? new Date(this.checkValue(r)) : "Year" === this.depth ? a : h, this.setValue(), this.removeSelectedAttributes(), x(this.popupObj.element.querySelectorAll("." + jA), [jA, BA]), S([p], jA), this.addSelectedAttributes(p, this.startValue, !0), p.classList.contains(NA) && this.otherMonthSelect(p, !0), this.checkMinMaxDays()); e && (i = R(e.target, "." + TA)), d(i) ? (e && (n = e && R(e.target, "." + DA)), d(n) || this.rightCalendar.children[1].firstElementChild.focus()) : this.leftCalendar.children[1].firstElementChild.focus(), S([p], BA), this.updateHeader(), this.removeFocusedDate() }, t.prototype.selectableDates = function () { if (!d(this.startValue)) { var e = this.calendarElement.querySelectorAll(".e-calendar td"), t = !1; if (this.currentView() === this.depth) { for (var i = 0, n = e; i < n.length; i++) { if (!(s = n[i]).classList.contains(jA) && !s.classList.contains(QA) && !s.classList.contains(zA)) { if (+this.getIdValue(null, s) < +this.startValue) { S([s], [XA, zA, ZA]), Kv.clearEvents(s); continue } break } if (s.classList.contains(jA) && !s.classList.contains(NA)) { t = !0; break } } t && (this.previousIcon.classList.contains(zA) || S([this.previousIcon], [JA, zA, ZA])) } else { for (var r = 0, o = e; r < o.length; r++) { var s = o[r], a = this.startValue.getMonth(), l = this.startValue.getFullYear(), h = this.getIdValue(null, s); if (this.startButton.element.classList.contains(EA) || !("Year" === this.currentView() && h.getMonth() < a && h.getFullYear() <= l || "Decade" === this.currentView() && h.getMonth() <= a && h.getFullYear() < l)) break; S([s], [zA]) } e[0].classList.contains(zA) ? this.previousIconHandler(!0) : e[e.length - 1].classList.contains(zA) && this.nextIconHandler(!0) } } }, t.prototype.updateMinMaxDays = function (e) { if (!d(this.startValue) && d(this.endValue) || this.isMobile && this.endButton.element.classList.contains(EA)) { if (!d(this.minDays) && this.minDays > 0 || !d(this.maxDays) && this.maxDays > 0) { var t = new Date(new Date(+this.startValue).setDate(this.startValue.getDate() + (this.minDays - 1))), i = new Date(new Date(+this.startValue).setDate(this.startValue.getDate() + (this.maxDays - 1))); t = !d(this.minDays) && this.minDays > 0 ? t : null, i = !d(this.maxDays) && this.maxDays > 0 ? i : null, "Year" === this.currentView() ? (t = d(t) ? null : new Date(t.getFullYear(), t.getMonth(), 0), i = d(i) ? null : new Date(i.getFullYear(), i.getMonth(), 1)) : "Decade" === this.currentView() && (t = d(t) ? null : new Date(t.getFullYear() - 1, 11, 1), i = d(i) ? null : new Date(i.getFullYear(), 0, 1)); for (var n = void 0, r = 0, o = e.querySelectorAll(".e-calendar td"); r < o.length; r++) { var s = o[r]; if (!s.classList.contains(jA) && !s.classList.contains(QA)) { var a = this.getIdValue(null, s); if (!d(t) && +a == +t && s.classList.contains(zA) && t.setDate(t.getDate() + 1), !s.classList.contains(zA)) { if (+a <= +this.startValue) continue; !d(t) && +a < +t && (S([s], [XA, zA, ZA]), Kv.clearEvents(s)), !d(i) && +a > +i && (S([s], [XA, zA, ZA]), this.isMaxDaysClicked = !0, Kv.clearEvents(s), d(n) && !s.classList.contains(NA) && (n = s)) } } } if (!d(n)) if (this.isMobile) this.nextIcon.classList.contains(zA) || S([this.nextIcon], [JA, zA, ZA]); else { var l = R(n, "." + DA); (l = d(l) ? this.leftCalendar : l).classList.contains(TA) ? (this.rightCalNextIcon.classList.contains(zA) || S([this.rightCalNextIcon], [JA, zA, ZA]), this.leftCalNextIcon.classList.contains(zA) || S([this.leftCalNextIcon], [JA, zA, ZA]), this.rightCalPrevIcon.classList.contains(zA) || S([this.rightCalPrevIcon], [JA, zA, ZA])) : this.rightCalNextIcon.classList.contains(zA) || S([this.rightCalNextIcon], [JA, zA, ZA]) } } } else this.isMaxDaysClicked = !1 }, t.prototype.removeClassDisabled = function () { for (var e = 0, t = this.popupObj.element.querySelectorAll(".e-calendar td." + XA); e < t.length; e++) { var i = t[e]; i.classList.contains(XA) && (x([i], [XA, zA, ZA]), Kv.add(i, "click", this.selectRange, this), this.isMobile || Kv.add(i, "mouseover", this.hoverSelection, this)) } this.isMobile ? (this.nextIcon.classList.contains(JA) && x([this.nextIcon], [JA, zA, ZA]), this.previousIcon.classList.contains(JA) && x([this.previousIcon], [JA, zA, ZA])) : (this.rightCalNextIcon.classList.contains(JA) && x([this.rightCalNextIcon], [JA, zA, ZA]), this.rightCalPrevIcon.classList.contains(JA) && x([this.rightCalPrevIcon], [JA, zA, ZA]), this.leftCalNextIcon.classList.contains(JA) && x([this.leftCalNextIcon], [JA, zA, ZA])) }, t.prototype.updateHeader = function () { var e = { type: "date", skeleton: "yMMMd" }; if (d(this.endValue) || d(this.startValue)) this.popupObj.element.querySelector("." + GA).textContent = this.l10n.getConstant("selectedDays"); else { var t = Math.round(Math.abs((this.startValue.getTime() - this.endValue.getTime()) / 864e5)) + 1; d(this.disabledDayCnt) || (t -= this.disabledDayCnt, this.disabledDayCnt = null), this.popupObj.element.querySelector("." + GA).textContent = t.toString() + " " + this.l10n.getConstant("days") } this.isMobile ? (d(this.startValue) ? this.startButton.element.textContent = this.l10n.getConstant("startLabel") : this.startButton.element.textContent = this.globalize.formatDate(this.startValue, e), d(this.endValue) || d(this.startValue) ? this.endButton.element.textContent = this.l10n.getConstant("endLabel") : this.endButton.element.textContent = this.globalize.formatDate(this.endValue, e)) : (d(this.endValue) || d(this.startValue) ? this.popupObj.element.querySelector("." + RA).textContent = this.l10n.getConstant("endLabel") : this.popupObj.element.querySelector("." + RA).textContent = this.globalize.formatDate(this.endValue, e), d(this.startValue) ? this.popupObj.element.querySelector("." + OA).textContent = this.l10n.getConstant("startLabel") : this.popupObj.element.querySelector("." + OA).textContent = this.globalize.formatDate(this.startValue, e)), (this.isDateDisabled(this.startValue) || this.isDateDisabled(this.endValue) || !d(this.startValue) && +this.startValue < +this.min || !d(this.endValue) && +this.endValue > +this.max || !d(this.startValue) && !d(this.endValue) && +this.startValue > +this.endValue) && (this.isMobile ? (this.startButton.element.textContent = this.l10n.getConstant("startLabel"), this.endButton.element.textContent = this.l10n.getConstant("endLabel"), this.popupObj.element.querySelector("." + GA).textContent = this.l10n.getConstant("selectedDays")) : (this.popupObj.element.querySelector("." + GA).textContent = this.l10n.getConstant("selectedDays"), this.popupObj.element.querySelector("." + OA).textContent = this.l10n.getConstant("startLabel"), this.popupObj.element.querySelector("." + RA).textContent = this.l10n.getConstant("endLabel"))), this.popupObj.element.querySelector("#custom_range") && (this.popupObj.element.querySelector("#custom_range").textContent = "" !== this.l10n.getConstant("customRange") ? this.l10n.getConstant("customRange") : "Custom Range") }, t.prototype.removeSelection = function () { this.startValue = null, this.endValue = null, this.setValue(), this.removeSelectedAttributes(), this.popupObj && (this.popupObj.element.querySelectorAll("." + BA).length > 0 && x(this.popupObj.element.querySelectorAll("." + BA), [jA, IA, BA]), this.popupObj.element.querySelectorAll("." + UA).length > 0 && x(this.popupObj.element.querySelectorAll("." + UA), UA), this.popupObj.element.querySelectorAll("." + PA).length > 0 && x(this.popupObj.element.querySelectorAll("." + PA), [PA])) }, t.prototype.addSelectedAttributes = function (e, t, i, n) { if (e) { var r = this.globalize.formatDate(t, { type: "date", skeleton: "full" }); !d(n) && n ? e.setAttribute("aria-label", "The current start and end date is " + r) : e.setAttribute("aria-label", "The current " + (i ? "start" : "end") + " date is " + r), e.setAttribute("aria-selected", "true") } }, t.prototype.removeSelectedAttributes = function () { if (this.popupObj) { for (var e = 0, t = this.popupObj.element.querySelectorAll("." + jA); e < t.length; e++) { (r = t[e]).setAttribute("aria-selected", "false"), r.removeAttribute("aria-label") } for (var i = 0, n = this.popupObj.element.querySelectorAll("." + IA); i < n.length; i++) { var r; (r = n[i]).setAttribute("aria-selected", "false"), r.removeAttribute("aria-label") } } }, t.prototype.updateCalendarElement = function (e) { e.classList.contains(TA) ? (this.calendarElement = this.leftCalendar, this.currentDate = this.leftCalCurrentDate, this.previousIcon = this.leftCalPrevIcon, this.nextIcon = this.leftCalNextIcon) : (this.calendarElement = this.rightCalendar, this.currentDate = this.rightCalCurrentDate, this.previousIcon = this.rightCalPrevIcon, this.nextIcon = this.rightCalNextIcon), this.contentElement = e.querySelector("." + qA), this.tableBodyElement = N(".e-content tbody", e), this.table = e.querySelector("." + qA).getElementsByTagName("table")[0], this.headerTitleElement = e.querySelector(".e-header .e-title"), this.headerElement = e.querySelector("." + VA) }, t.prototype.navPrevMonth = function (e) { e.preventDefault(); var t = R(e.target, "." + TA); t = d(t) ? R(e.target, "." + DA) : t, this.updateCalendarElement(t), this.navigatePrevious(e), !d(this.startValue) && d(this.endValue) && this.updateMinMaxDays(t), this.updateControl(t) }, t.prototype.deviceNavigation = function (e) { this.deviceCalendarEvent(), this.updateRange([this.popupObj.element.querySelector("." + FA)]), this.endButton.element.classList.contains(EA) && this.updateMinMaxDays(this.popupObj.element.querySelector("." + FA)), this.endButton.element.classList.contains(EA) && this.selectableDates(), this.currentView() === this.depth && this.bindCalendarCellEvents(), this.removeFocusedDate() }, t.prototype.updateControl = function (e) { e.classList.contains(DA) ? this.rightCalCurrentDate = new Date(+this.currentDate) : this.leftCalCurrentDate = new Date(+this.currentDate), this.updateNavIcons(), this.calendarIconEvent(), ("Month" === this.depth && this.leftCalendar.querySelector(".e-content").classList.contains("e-month") && this.rightCalendar.querySelector(".e-content").classList.contains("e-month") || "Year" === this.depth && this.leftCalendar.querySelector(".e-content").classList.contains("e-year") && this.rightCalendar.querySelector(".e-content").classList.contains("e-year") || "Decade" === this.depth && this.leftCalendar.querySelector(".e-content").classList.contains("e-decade") && this.rightCalendar.querySelector(".e-content").classList.contains("e-decade") || this.isMobile) && this.bindCalendarCellEvents(), this.removeFocusedDate(), this.updateRange([e]) }, t.prototype.navNextMonth = function (e) { e.preventDefault(); var t = R(e.target, "." + TA); t = d(t) ? R(e.target, "." + DA) : t, this.updateCalendarElement(t), this.navigateNext(e), !d(this.startValue) && d(this.endValue) && this.updateMinMaxDays(t), this.updateControl(t) }, t.prototype.compareMonths = function (e, t) { return e.getFullYear() !== t.getFullYear() || "Year" !== this.currentView() && "Decade" !== this.currentView() ? e.getFullYear() > t.getFullYear() ? -1 : e.getFullYear() < t.getFullYear() ? e.getFullYear() + 1 === t.getFullYear() && 11 === e.getMonth() && 0 === t.getMonth() ? -1 : 1 : e.getMonth() === t.getMonth() ? 0 : e.getMonth() + 1 === t.getMonth() ? -1 : 1 : -1 }, t.prototype.compareYears = function (e, t) { return e.getFullYear() === t.getFullYear() ? -1 : e.getFullYear() > t.getFullYear() ? -1 : e.getFullYear() + 1 === t.getFullYear() ? -1 : 1 }, t.prototype.compareDecades = function (e, t) { var i; if (e.getFullYear() === t.getFullYear()) i = -1; else if (e.getFullYear() > t.getFullYear()) i = -1; else { var n = e.getFullYear(), r = t.getFullYear(); i = n - n % 10 + 10 == r - r % 10 ? -1 : 1 } return i }, t.prototype.isPopupOpen = function () { return !(d(this.popupObj) || !this.popupObj.element.classList.contains("e-popup")) }, t.prototype.createRangeHeader = function () { var e = this.createElement("div", { className: "e-start-end" }); if (this.isMobile) { var t = this.createElement("button", { className: "e-end-btn" }), i = this.createElement("button", { className: "e-start-btn" }); this.startButton = new yL({ content: this.l10n.getConstant("startLabel") }, i), this.endButton = new yL({ content: this.l10n.getConstant("endLabel") }, t), e.appendChild(i), e.appendChild(t) } else { var n = this.createElement("a", { className: OA }), r = this.createElement("a", { className: RA }), o = this.createElement("span", { className: "e-change-icon e-icons" }); P(n, { "aria-atomic": "true", "aria-live": "assertive", "aria-label": "Start Date", role: "button" }), P(r, { "aria-atomic": "true", "aria-live": "assertive", "aria-label": "End Date", role: "button" }), e.appendChild(n), e.appendChild(o), e.appendChild(r), n.textContent = this.l10n.getConstant("startLabel"), r.textContent = this.l10n.getConstant("endLabel") } return e }, t.prototype.disableInput = function () { this.strictMode ? d(this.previousStartValue) || d(this.previousEndValue) || (this.startValue = this.previousStartValue, this.endValue = this.previousEndValue, this.setValue(), this.updateInput()) : (this.updateInput(), this.clearRange(), this.setProperties({ startDate: null }, !0), this.setProperties({ endDate: null }, !0), this.startValue = null, this.endValue = null, this.setValue(), this.errorClass()), this.setProperties({ enabled: !1 }, !0), eS.setEnabled(this.enabled, this.inputElement), this.bindEvents() }, t.prototype.validateMinMax = function () { this.min = d(this.min) || !+this.min ? this.min = new Date(1900, 0, 1) : this.min, this.max = d(this.max) || !+this.max ? this.max = new Date(2099, 11, 31) : this.max, this.min <= this.max ? (d(this.minDays) || d(this.maxDays) || this.maxDays > 0 && this.minDays > 0 && this.minDays > this.maxDays && (this.maxDays = null), !d(this.minDays) && this.minDays < 0 && (this.minDays = null), !d(this.maxDays) && this.maxDays < 0 && (this.maxDays = null)) : this.disableInput() }, t.prototype.validateRangeStrict = function () { d(this.startValue) || (+this.startValue <= +this.min ? (this.startValue = this.min, this.setValue()) : +this.startValue >= +this.min && +this.startValue >= +this.max && (this.startValue = this.max)), d(this.endValue) || (+this.endValue > +this.max ? (this.endValue = this.max, this.setValue()) : +this.endValue < +this.min && (this.endValue = this.min, this.setValue())), this.validateMinMaxDays() }, t.prototype.validateRange = function () { this.validateMinMaxDays() }, t.prototype.validateMinMaxDays = function () { if (!d(this.startValue) && !d(this.endValue)) { var e = Math.round(Math.abs((this.startValue.getTime() - this.endValue.getTime()) / 864e5)) + 1; if (!d(this.minDays) && this.minDays > 0 && !(e >= this.minDays)) if (this.strictMode) { var t = new Date(+this.startValue); t.setDate(t.getDate() + (this.minDays - 1)), +t > +this.max ? (this.endValue = this.max, this.setValue()) : (this.endValue = t, this.setValue()) } else this.startValue = null, this.endValue = null, this.setValue(); d(this.maxDays) || !(this.maxDays > 0) || e <= this.maxDays || (this.strictMode ? (this.endValue = new Date(+this.startValue), this.endValue.setDate(this.endValue.getDate() + (this.maxDays - 1)), this.setValue()) : (this.startValue = null, this.endValue = null, this.setValue())) } }, t.prototype.renderCalendar = function () { this.calendarElement = this.createElement("div"), this.calendarElement.classList.add(FA), this.enableRtl && this.calendarElement.classList.add("e-rtl"), P(this.calendarElement, { role: "calendar" }), e.prototype.createHeader.call(this), e.prototype.createContent.call(this) }, t.prototype.isSameMonth = function (e, t) { return e.getMonth() === t.getMonth() && e.getFullYear() === t.getFullYear() }, t.prototype.isSameYear = function (e, t) { return e.getFullYear() === t.getFullYear() }, t.prototype.isSameDecade = function (e, t) { var i = e.getFullYear(), n = t.getFullYear(); return i - i % 10 == n - n % 10 }, t.prototype.startMonthCurrentDate = function () { this.isSameMonth(this.min, this.max) || +this.currentDate > +this.max || this.isSameMonth(this.currentDate, this.max) ? (this.currentDate = new Date(+this.max), this.currentDate.setDate(1), this.currentDate.setMonth(this.currentDate.getMonth() - 1)) : this.currentDate < this.min && (this.currentDate = new Date(this.checkValue(this.min))) }, t.prototype.selectNextMonth = function () { if (d(this.endValue) || d(this.startValue) || this.isSameMonth(this.endValue, this.currentDate) || this.isDateDisabled(this.endValue) || this.isDateDisabled(this.startValue)) return this.currentDate.setDate(1), void this.currentDate.setMonth(this.currentDate.getMonth() + 1); if (this.currentDate = new Date(+this.endValue), !d(this.startValue) && +this.startValue < +this.min || !d(this.endValue) && +this.endValue > +this.max || !d(this.startValue) && !d(this.endValue) && +this.startValue > +this.endValue) { this.currentDate = new Date((new Date).setHours(0, 0, 0, 0)), this.currentDate.setDate(1); var e = this.currentDate.getMonth() + 1; this.currentDate.setMonth(e) } }, t.prototype.selectNextYear = function () { if (d(this.endValue) || d(this.startValue) || this.isSameYear(this.endValue, this.currentDate) || this.isDateDisabled(this.endValue) || this.isDateDisabled(this.startValue)) { this.currentDate.setMonth(0); var e = this.currentDate.getFullYear() + 1; this.currentDate.setFullYear(e) } else this.currentDate = new Date(+this.endValue), (!d(this.endValue) && +this.endValue > +this.max || !d(this.startValue) && !d(this.endValue) && +this.startValue > +this.endValue || !d(this.startValue) && +this.startValue < +this.min) && (this.currentDate = new Date((new Date).setHours(0, 0, 0, 0)), this.currentDate.setMonth(0), this.currentDate.setFullYear(this.currentDate.getFullYear() + 1)) }, t.prototype.selectNextDecade = function () { if (d(this.endValue) || d(this.startValue) || this.isSameDecade(this.endValue, this.currentDate) || this.isDateDisabled(this.endValue) || this.isDateDisabled(this.startValue)) { var e = this.currentDate.getFullYear() + 10; this.currentDate.setFullYear(e) } else this.currentDate = new Date(+this.endValue), (!d(this.startValue) && !d(this.endValue) && +this.startValue > +this.endValue || !d(this.endValue) && +this.endValue > +this.max || !d(this.startValue) && +this.startValue < +this.min) && (this.currentDate = new Date((new Date).setHours(0, 0, 0, 0)), this.currentDate.setFullYear(this.currentDate.getFullYear() + 10)) }, t.prototype.selectStartMonth = function () { d(this.startValue) ? (this.currentDate = new Date((new Date).setHours(0, 0, 0, 0)), this.startMonthCurrentDate()) : !d(this.max) && this.isSameMonth(this.startValue, this.max) ? (this.currentDate = new Date(+this.max), this.currentDate.setDate(1), this.currentDate.setMonth(this.currentDate.getMonth() - 1)) : this.startValue >= this.min && this.startValue <= this.max && !this.isDateDisabled(this.startValue) ? this.currentDate = new Date(+this.startValue) : this.currentDate = new Date((new Date).setHours(0, 0, 0, 0)), (!d(this.endValue) && +this.endValue > +this.max || !d(this.startValue) && +this.startValue < +this.min || !d(this.startValue) && !d(this.endValue) && +this.startValue > +this.endValue) && (this.currentDate = new Date((new Date).setHours(0, 0, 0, 0))), this.startMonthCurrentDate() }, t.prototype.createCalendar = function () { var t = this.createElement("div", { className: "e-calendar-container" }); if (this.isMobile) { d(this.startValue) || (this.currentDate = new Date(+this.startValue)), e.prototype.validateDate.call(this), e.prototype.minMaxUpdate.call(this), e.prototype.render.call(this); var i = this.calendarElement.querySelector(".e-calendar .e-prev"), n = this.calendarElement.querySelector(".e-calendar .e-next"); k(this.calendarElement.querySelector(".e-calendar ." + HA)), this.calendarElement.querySelector(".e-calendar ." + VA).appendChild(n), this.calendarElement.querySelector(".e-calendar ." + VA).appendChild(i), A([i], this.calendarElement.querySelector(".e-calendar ." + VA)), this.deviceCalendar = this.calendarElement, t.appendChild(this.calendarElement), this.headerTitleElement = this.calendarElement.querySelector(".e-calendar .e-header .e-title") } else { this.selectStartMonth(), this.renderCalendar(), this.leftCalCurrentDate = new Date(+this.currentDate), this.calendarElement.classList.add(TA), this.leftCalPrevIcon = this.calendarElement.querySelector("." + TA + " .e-prev"), this.leftCalNextIcon = this.calendarElement.querySelector("." + TA + " .e-next"), this.leftTitle = this.calendarElement.querySelector("." + TA + " ." + WA), k(this.calendarElement.querySelector("." + TA + " ." + HA)), this.calendarElement.querySelector("." + TA + " ." + VA).appendChild(this.leftCalNextIcon), this.calendarElement.querySelector("." + TA + " ." + VA).appendChild(this.leftCalPrevIcon), A([this.leftCalPrevIcon], this.calendarElement.querySelector("." + TA + " ." + VA)), this.leftCalendar = this.calendarElement; var r = this.createElement("div", { className: "e-left-container" }), o = this.createElement("div", { className: "e-right-container" }); r.appendChild(this.leftCalendar), t.appendChild(r), this.isMobile || Kv.add(this.leftTitle, "click", this.leftNavTitle, this), "Month" === this.start && this.selectNextMonth(), "Year" === this.start && this.selectNextYear(), "Decade" === this.start && this.selectNextDecade(), this.renderCalendar(), this.rightCalCurrentDate = new Date(+this.currentDate), S([this.calendarElement], DA), this.rightCalendar = this.calendarElement, x([this.leftCalendar && this.leftCalendar.querySelector(".e-content tbody")], "e-zoomin"), x([this.rightCalendar && this.rightCalendar.querySelector(".e-content tbody")], "e-zoomin"), this.rightCalPrevIcon = this.calendarElement.querySelector("." + DA + " .e-prev"), this.rightCalNextIcon = this.calendarElement.querySelector("." + DA + " .e-next"), this.rightTitle = this.calendarElement.querySelector("." + DA + " ." + WA), k(this.calendarElement.querySelector("." + DA + " ." + HA)), this.calendarElement.querySelector("table").setAttribute("tabindex", "-1"), this.calendarElement.querySelector("." + DA + " ." + VA).appendChild(this.rightCalNextIcon), this.calendarElement.querySelector("." + DA + " ." + VA).appendChild(this.rightCalPrevIcon), A([this.rightCalPrevIcon], this.calendarElement.querySelector("." + DA + " ." + VA)), o.appendChild(this.rightCalendar), t.appendChild(o), this.isMobile || Kv.add(this.rightTitle, "click", this.rightNavTitle, this) } return t }, t.prototype.leftNavTitle = function (e) { this.isPopupOpen() && (this.calendarElement = this.leftCalendar, this.calendarNavigation(e, this.calendarElement)) }, t.prototype.calendarNavigation = function (t, i) { this.table = i.querySelector("table"), this.headerTitleElement = i.querySelector(".e-title"), this.tableBodyElement = i.querySelector("tbody"), this.tableHeadElement = i.querySelector("thead"), this.contentElement = i.querySelector(".e-content"), this.updateCalendarElement(i), e.prototype.navigateTitle.call(this, t), this.updateNavIcons() }, t.prototype.rightNavTitle = function (e) { this.isPopupOpen() && (this.calendarElement = this.rightCalendar, this.calendarNavigation(e, this.calendarElement)) }, t.prototype.clickEventEmitter = function (e) { this.isMobile || (R(e.target, ".e-calendar.e-left-calendar") ? (this.calendarElement = this.leftCalendar, this.updateCalendarElement(this.leftCalendar)) : (this.calendarElement = this.rightCalendar, this.updateCalendarElement(this.rightCalendar))) }, t.prototype.currentView = function () { return e.prototype.currentView.call(this) }, t.prototype.getCalendarView = function (e) { return "Year" === e ? "Year" : "Decade" === e ? "Decade" : "Month" }, t.prototype.navigatedEvent = function (t) { if (this.trigger("navigated", this.navigatedArgs), !d(this.popupObj)) { var i = this.getCalendarView(this.currentView()); if (this.isMobile) i === this.depth ? (this.bindCalendarCellEvents(), this.deviceNavigation(), this.removeFocusedDate(), this.checkMinMaxDays()) : this.selectableDates(); else if (this.isMobile || i !== this.depth) this.updateNavIcons(), this.calendarIconEvent(); else { if ((this.calendarElement.classList.contains("e-left-calendar") ? this.leftCalendar : this.rightCalendar) !== this.leftCalendar || (!t || t.currentTarget.children[0].classList.contains("e-icons")) && d(this.controlDown)) { if (t && !t.currentTarget.children[0].classList.contains("e-icons") || !d(this.controlDown)) { if (this.rightCalCurrentDate = new Date(+this.currentDate), "Year" === i) { var n = this.currentDate.getFullYear() - 1; this.leftCalCurrentDate = new Date(new Date(+this.currentDate).setFullYear(n)) } else if ("Decade" === i) { var r = this.currentDate.getFullYear() - 10; this.leftCalCurrentDate = new Date(new Date(+this.currentDate).setFullYear(r)) } else this.leftCalCurrentDate = new Date(new Date(+this.currentDate).setMonth(this.currentDate.getMonth() - 1)); this.currentDate = this.rightCalCurrentDate, this.updateCalendarElement(this.rightCalendar), this.updateControl(this.rightCalendar), this.updateCalendarElement(this.leftCalendar), this.startValue && d(this.endValue) ? "Month" === i && this.startValue.getMonth() < this.rightCalCurrentDate.getMonth() && this.startValue.getFullYear() <= this.rightCalCurrentDate.getFullYear() ? e.prototype.navigateTo.call(this, i, new Date(+this.startValue)) : "Year" === i && this.startValue.getFullYear() < this.rightCalCurrentDate.getFullYear() ? e.prototype.navigateTo.call(this, i, new Date(+this.startValue)) : e.prototype.navigateTo.call(this, i, this.leftCalCurrentDate) : e.prototype.navigateTo.call(this, i, this.leftCalCurrentDate), this.updateControl(this.leftCalendar), this.updateNavIcons(), this.calendarIconEvent(), this.calendarIconRipple(), this.controlDown = null } } else { if (this.leftCalCurrentDate = new Date(+this.currentDate), "Year" === i) { var o = this.currentDate.getFullYear() + 1; this.rightCalCurrentDate = new Date(new Date(+this.currentDate).setFullYear(o)) } else if ("Decade" === i) { var s = this.currentDate.getFullYear() + 10; this.rightCalCurrentDate = new Date(new Date(+this.currentDate).setFullYear(s)) } else this.rightCalCurrentDate = new Date(new Date(+this.currentDate).setMonth(this.currentDate.getMonth() + 1)); this.currentDate = this.leftCalCurrentDate, this.updateCalendarElement(this.leftCalendar), this.updateControl(this.leftCalendar), this.updateCalendarElement(this.rightCalendar), e.prototype.navigateTo.call(this, i, this.rightCalCurrentDate), this.updateControl(this.rightCalendar), this.updateNavIcons(), this.calendarIconEvent(), this.calendarIconRipple(), this.controlDown = null } this.checkMinMaxDays() } } }, t.prototype.createControl = function () { var e = this.createElement("div", { className: _A }), t = this.createElement("div", { className: "e-range-header" }), i = this.createRangeHeader(); t.appendChild(i); var n = this.createElement("div", { className: GA }); P(n, { "aria-label": "Selected Days" }), n.textContent = this.l10n.getConstant("selectedDays"), t.appendChild(n); var r = this.createElement("div", { className: "e-separator" }), o = this.createCalendar(); e.appendChild(t), e.appendChild(r), e.appendChild(o); var s = this.createElement("div", { className: "e-footer" }), a = this.createElement("button", { className: "e-cancel e-flat e-css" }), l = this.createElement("button"); S([l], ["e-apply", "e-flat", "e-primary", "e-css"]), s.appendChild(l), s.appendChild(a); var h = !d(this.startValue) && !d(this.endValue); if (this.cancelButton = new yL({ content: this.l10n.getConstant("cancelText") }, a), this.applyButton = new yL({ content: this.l10n.getConstant("applyText"), disabled: !h }, l), Kv.add(l, "click", this.applyFunction, this), Kv.add(a, "click", this.cancelFunction, this), this.popupWrapper.appendChild(e), !this.isMobile && !c(this.presets[0].start && this.presets[0].end && this.presets[0].label)) { this.createPresets(), this.listRippleEffect(), S([e], "e-range-border"), S([this.popupWrapper], "e-preset-wrapper"); this.popupWrapper.querySelector("." + YA).style.height = this.popupWrapper.querySelector("." + _A).getBoundingClientRect().height + "px" } this.popupWrapper.appendChild(s), this.isMobile && this.deviceHeaderUpdate(), this.renderPopup() }, t.prototype.cancelFunction = function (e) { document.activeElement !== this.inputElement && (this.preventFocus = !0, this.inputElement.focus(), S([this.inputWrapper.container], [kA])), e.preventDefault(), this.isKeyPopup && (this.inputElement.focus(), this.isKeyPopup = !1), this.startValue = null, this.endValue = null, this.removeSelection(), this.hide(e) }, t.prototype.deviceHeaderUpdate = function () { d(this.startValue) && d(this.endValue) ? (this.endButton.element.setAttribute("disabled", ""), this.startButton.element.classList.add(EA)) : d(this.startValue) || this.startButton.element.classList.add(EA) }, t.prototype.applyFunction = function (e) { var t = !1; e.preventDefault(), this.closeEventArgs && this.closeEventArgs.cancel && (this.startValue = this.popupWrapper.querySelector(".e-start-date") && this.getIdValue(null, this.popupWrapper.querySelector(".e-start-date")), this.endValue = this.popupWrapper.querySelector(".e-end-date") && this.getIdValue(null, this.popupWrapper.querySelector(".e-end-date")), this.setValue()), document.activeElement !== this.inputElement && (this.preventFocus = !0, this.inputElement.focus(), S([this.inputWrapper.container], [kA])), "touchstart" !== e.type && this.closeEventArgs && !this.closeEventArgs.cancel && e.preventDefault(), d(this.startValue) || d(this.endValue) ? this.hide(e || null) : (this.previousStartValue = new Date(+this.startValue), this.previousEndValue = new Date(+this.endValue), this.previousEleValue = this.inputElement.value, eS.setValue(this.rangeArgs(e).text, this.inputElement, this.floatLabelType, this.showClearButton), +this.initStartDate == +this.startValue && +this.initEndDate == +this.endValue || (t = !0), this.changeTrigger(e), this.hide(e || null), this.errorClass(), t = !0), R(e.target, ".e-input-group") || t || this.focusOut(), this.isMobile || (this.isKeyPopup = !1, this.isRangeIconClicked && (this.inputWrapper.container.children[1].focus(), this.keyInputConfigs = h(this.keyInputConfigs, this.keyConfigs), this.popupKeyboardModule = new cb(this.inputWrapper.container.children[1], { eventName: "keydown", keyConfigs: this.keyInputConfigs, keyAction: this.popupKeyActionHandle.bind(this) }))) }, t.prototype.onMouseClick = function (e, t) { if ("touchstart" !== e.type) { var i = R(t || e.target, "." + KA), n = i && i.classList.contains(EA); i && i.classList.contains(KA) && this.setListSelection(i, e), this.inputElement.focus(), this.isMobile || (this.preventFocus = !0, i && i.classList.contains(KA) && "custom_range" === i.getAttribute("id") ? this.leftCalendar.children[1].firstElementChild.focus() : n || "keydown" !== e.type || this.inputElement.focus()) } }, t.prototype.onMouseOver = function (e) { var t = R(e.target, "." + KA); t && t.classList.contains(KA) && !t.classList.contains($A) && S([t], $A) }, t.prototype.onMouseLeave = function (e) { var t = R(e.target, ".e-hover"); d(t) || x([t], $A) }, t.prototype.setListSelection = function (e, t) { if (e && (!e.classList.contains(EA) || this.isMobile && e.classList.contains(EA))) { if (this.isMobile && e.classList.contains(EA)) { this.activeIndex = Array.prototype.slice.call(this.liCollections).indexOf(e); if ("custom_range" === this.presetsItem[this.activeIndex].id) return void this.renderCustomPopup(); return } this.removeListSelection(), this.activeIndex = Array.prototype.slice.call(this.liCollections).indexOf(e), S([e], EA), e.setAttribute("aria-selected", "true"); var i = this.presetsItem[this.activeIndex]; "custom_range" === i.id ? this.renderCustomPopup() : this.applyPresetRange(i) } }, t.prototype.removeListSelection = function () { var e = this.presetElement.querySelector("." + EA); d(e) || (x([e], EA), e.removeAttribute("aria-selected")) }, t.prototype.setValue = function () { this.modelValue = [this.startValue, this.endValue] }, t.prototype.applyPresetRange = function (e) { this.hide(null), this.presetsItem[this.presetsItem.length - 1].start = null, this.presetsItem[this.presetsItem.length - 1].end = null, this.startValue = e.start, this.endValue = e.end, this.setValue(), this.refreshControl(), this.trigger("select", this.rangeArgs(null)), this.changeTrigger(), this.previousEleValue = this.inputElement.value, this.isCustomRange = !1, this.leftCalendar = this.rightCalendar = null, this.isKeyPopup && (this.isRangeIconClicked = !1, this.inputElement.focus()) }, t.prototype.showPopup = function (e, t) { this.presetHeight(), 1e3 === this.zIndex ? this.popupObj.show(null, this.element) : this.popupObj.show(null, null), this.isMobile && this.popupObj.refreshPosition() }, t.prototype.renderCustomPopup = function () { this.isCustomWindow = !0, this.popupObj.hide(), this.popupWrapper = this.createElement("div", { id: this.element.id + "_popup", className: AA + " e-popup" }), this.renderControl(), this.openEventArgs.appendTo.appendChild(this.popupWrapper), this.showPopup(), this.isCustomRange = !0, this.isMobile || this.calendarFocus() }, t.prototype.listRippleEffect = function () { for (var e = 0, t = this.liCollections; e < t.length; e++) { ee(t[e]) } }, t.prototype.createPresets = function () { if (!c(this.presets[0].start && this.presets[0].end && this.presets[0].label)) { this.presetElement = this.createElement("div", { className: YA, attrs: { tabindex: "0" } }); var e = hT.createList(this.createElement, this.presetsItem, null, !0); P(e, { role: "listbox", "aria-hidden": "false", id: this.element.id + "_options" }), this.presetElement.appendChild(e), this.popupWrapper.appendChild(this.presetElement); var t = this.presetElement.querySelector("#custom_range"); d(t) || (t.textContent = "" !== this.l10n.getConstant("customRange") ? this.l10n.getConstant("customRange") : "Custom Range"), this.liCollections = this.presetElement.querySelectorAll("." + KA), this.wireListEvents(), this.isMobile && (this.presetElement.style.width = this.inputWrapper.container.getBoundingClientRect().width + "px"), !d(this.activeIndex) && this.activeIndex > -1 && S([this.liCollections[this.activeIndex]], EA) } }, t.prototype.wireListEvents = function () { Kv.add(this.presetElement, "click", this.onMouseClick, this), this.isMobile || (Kv.add(this.presetElement, "mouseover", this.onMouseOver, this), Kv.add(this.presetElement, "mouseout", this.onMouseLeave, this)) }, t.prototype.unWireListEvents = function () { d(this.presetElement) || (Kv.remove(this.presetElement, "click touchstart", this.onMouseClick), this.isMobile || (Kv.remove(this.presetElement, "mouseover", this.onMouseOver), Kv.remove(this.presetElement, "mouseout", this.onMouseLeave))) }, t.prototype.renderPopup = function () { var e = this; this.popupWrapper.classList.add("e-control"); var t = this.popupWrapper.getBoundingClientRect().width; d(this.cssClass) || "" === this.cssClass.trim() || (this.popupWrapper.className += " " + this.cssClass), this.isMobile && this.isCustomWindow && (this.modal = this.createElement("div"), document.body.appendChild(this.modal)), this.popupObj = new yM(this.popupWrapper, { relateTo: this.isMobile && this.isCustomWindow ? document.body : d(this.targetElement) ? this.inputWrapper.container : this.targetElement, position: this.isMobile ? c(this.presets[0].start && this.presets[0].end && this.presets[0].label) || this.isCustomWindow ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" } : this.enableRtl ? { X: "left", Y: "bottom" } : { X: "right", Y: "bottom" }, offsetX: this.isMobile || this.enableRtl ? 0 : -t, offsetY: 4, collision: this.isMobile ? c(this.presets[0].start && this.presets[0].end && this.presets[0].label) || this.isCustomWindow ? { X: "fit", Y: "fit" } : { X: "fit" } : { X: "fit", Y: "flip" }, targetType: this.isMobile && this.isCustomWindow ? "container" : "relative", enableRtl: this.enableRtl, zIndex: this.zIndex, open: function () { P(e.inputElement, { "aria-expanded": "true" }), S([e.inputWrapper.buttons[0]], EA), e.isMobile || (e.cancelButton && (e.btnKeyboardModule = new cb(e.cancelButton.element, { eventName: "keydown", keyAction: e.popupKeyActionHandle.bind(e), keyConfigs: { tab: "tab", altRightArrow: "alt+rightarrow", altLeftArrow: "alt+leftarrow" } }), e.btnKeyboardModule = new cb(e.applyButton.element, { eventName: "keydown", keyAction: e.popupKeyActionHandle.bind(e), keyConfigs: { altRightArrow: "alt+rightarrow", altLeftArrow: "alt+leftarrow" } })), d(e.leftCalendar) || e.isRangeIconClicked || e.calendarFocus(), d(e.presetElement) || (e.keyInputConfigs = h(e.keyInputConfigs, e.keyConfigs), e.presetKeyboardModule = new cb(e.presetElement, { eventName: "keydown", keyAction: e.presetKeyActionHandler.bind(e), keyConfigs: e.keyInputConfigs }), e.presetKeyboardModule = new cb(e.presetElement, { eventName: "keydown", keyAction: e.popupKeyActionHandle.bind(e), keyConfigs: { altRightArrow: "alt+rightarrow", altLeftArrow: "alt+leftarrow" } }), d(e.leftCalendar) ? (e.preventBlur = !0, e.presetElement.focus()) : e.presetElement.setAttribute("tabindex", "-1")), e.popupKeyBoardHandler()), e.isMobile && !uw.isDevice && Kv.add(document, "keydown", e.popupCloseHandler, e) }, close: function () { P(e.inputElement, { "aria-expanded": "false" }), x([e.inputWrapper.buttons[0]], EA), e.isRangeIconClicked && e.inputWrapper.container.children[1].focus(), c(e.presets[0].start && e.presets[0].end && e.presets[0].label) || e.unWireListEvents(), d(e.popupObj) || (d(e.popupObj.element.parentElement) || I(e.popupObj.element), e.popupObj.destroy(), e.popupObj = null), e.isMobile && !uw.isDevice && Kv.remove(document, "keydown", e.popupCloseHandler) } }), this.isMobile && (this.popupObj.element.classList.add("e-device"), this.isMobile || this.popupObj.element.classList.add("e-bigger")), this.isMobile && this.isCustomWindow && (S([this.modal], ["e-device", AA, "e-range-modal"]), document.body.className += " e-range-overflow", this.modal.style.display = "block"), Kv.add(document, "mousedown touchstart", this.documentHandler, this) }, t.prototype.popupCloseHandler = function (e) { switch (e.keyCode) { case 27: this.hide(e) } }, t.prototype.calendarFocus = function () { var e = this.popupObj && this.popupObj.element.querySelector("." + jA); if (e) { var t = R(e, "." + DA); t = d(t) ? this.leftCalendar : t, this.isRangeIconClicked ? this.inputWrapper.container.focus() : (this.preventBlur = !0, t.children[1].firstElementChild.focus()), S([e], UA) } else this.isRangeIconClicked ? this.inputWrapper.container.focus() : (this.preventBlur = !0, this.leftCalendar.children[1].firstElementChild.focus()) }, t.prototype.presetHeight = function () { var e = this.popupObj && this.popupObj.element.querySelector("." + YA), t = this.popupObj && this.popupObj.element.querySelector("." + _A); d(e) || d(t) || (e.style.height = t.getBoundingClientRect().height + "px") }, t.prototype.presetKeyActionHandler = function (e) { switch (e.action) { case "moveDown": this.listMoveDown(e), this.setScrollPosition(), e.preventDefault(); break; case "moveUp": this.listMoveUp(e), this.setScrollPosition(), e.preventDefault(); break; case "enter": var t = this.getHoverLI(), i = this.getActiveLI(); if (!d(this.leftCalendar) && !d(i) && (d(t) || !d(i) && i === t)) { this.activeIndex = Array.prototype.slice.call(this.liCollections).indexOf(i); if ("custom_range" === this.presetsItem[this.activeIndex].id) return this.calendarFocus(), i.classList.remove($A), void e.preventDefault() } d(t) && d(i) || this.onMouseClick(e, t || i), e.preventDefault(); break; case "tab": if (this.leftCalendar) { var n = this.getHoverLI(); d(n) || n.classList.remove($A) } else this.hide(e), e.preventDefault() } }, t.prototype.listMoveDown = function (e) { var t = this.getHoverLI(), i = this.getActiveLI(); if (d(t)) if (d(i)) S([this.liCollections[0]], $A); else { !d(n = i.nextElementSibling) && n.classList.contains(KA) && S([n], $A) } else { var n; !d(n = t.nextElementSibling) && n.classList.contains(KA) && (x([t], $A), S([n], $A)) } }, t.prototype.listMoveUp = function (e) { var t = this.getHoverLI(), i = this.getActiveLI(); if (d(t)) { if (!d(i)) { !d(n = i.previousElementSibling) && n.classList.contains(KA) && S([n], $A) } } else { var n; !d(n = t.previousElementSibling) && n.classList.contains(KA) && (x([t], $A), S([n], $A)) } }, t.prototype.getHoverLI = function () { return this.presetElement.querySelector(".e-hover") }, t.prototype.getActiveLI = function () { return this.presetElement.querySelector("." + EA) }, t.prototype.popupKeyBoardHandler = function () { this.popupKeyboardModule = new cb(this.popupWrapper, { eventName: "keydown", keyAction: this.popupKeyActionHandle.bind(this), keyConfigs: { escape: "escape" } }), this.keyInputConfigs = h(this.keyInputConfigs, this.keyConfigs), this.popupKeyboardModule = new cb(this.inputWrapper.container.children[1], { eventName: "keydown", keyAction: this.popupKeyActionHandle.bind(this), keyConfigs: this.keyInputConfigs }) }, t.prototype.setScrollPosition = function () { var e = this.presetElement.getBoundingClientRect().height, t = this.presetElement.querySelector(".e-hover"), i = this.presetElement.querySelector("." + EA), n = d(t) ? i : t; if (!d(n)) { var r = n.nextElementSibling, o = r ? r.offsetTop : n.offsetTop, s = n.getBoundingClientRect().height; o + n.offsetTop > e ? this.presetElement.scrollTop = r ? o - (e / 2 + s / 2) : o : this.presetElement.scrollTop = 0 } }, t.prototype.popupKeyActionHandle = function (e) { var t = R(e.target, "." + YA); switch (e.action) { case "escape": this.isPopupOpen() ? (this.isKeyPopup && (this.inputElement.focus(), this.isKeyPopup = !1), this.hide(e)) : this.inputWrapper.container.children[1].blur(); break; case "enter": this.isPopupOpen() ? this.inputWrapper.container.children[1].focus() : this.show(null, e); break; case "tab": this.hide(e); break; case "altRightArrow": d(t) ? document.activeElement === this.cancelButton.element && !0 !== this.applyButton.element.disabled ? this.applyButton.element.focus() : this.leftCalendar.children[1].firstElementChild.focus() : this.cancelButton.element.focus(), e.preventDefault(); break; case "altLeftArrow": d(t) ? document.activeElement === this.applyButton.element && !0 !== this.applyButton.element.disabled ? this.cancelButton.element.focus() : d(this.presetElement) || document.activeElement !== this.cancelButton.element ? this.rightCalendar.children[1].firstElementChild.focus() : this.presetElement.focus() : this.rightCalendar.children[1].firstElementChild.focus(), e.preventDefault() } }, t.prototype.documentHandler = function (e) { if (!d(this.popupObj)) { var t = e.target; this.inputWrapper.container.contains(t) && (d(this.popupObj) || R(t, this.popupWrapper.id)) || ("touchstart" === e.type || "mousedown" === e.type || this.closeEventArgs && !this.closeEventArgs.cancel) && e.preventDefault(), !d(this.targetElement) && (d(this.targetElement) || t === this.targetElement) || R(t, "#" + this.popupObj.element.id) || R(t, ".e-input-group") === this.inputWrapper.container || R(t, ".e-daterangepicker.e-popup") && !t.classList.contains("e-day") || (this.preventBlur = !1, this.isPopupOpen() && (this.applyFunction(e), this.isMobile || (this.isRangeIconClicked = !1))) } }, t.prototype.createInput = function () { this.inputWrapper = eS.createInput({ floatLabelType: this.floatLabelType, element: this.inputElement, properties: { readonly: this.readonly, placeholder: this.placeholder, cssClass: this.cssClass, enabled: this.enabled, enableRtl: this.enableRtl, showClearButton: this.showClearButton }, buttons: ["e-input-group-icon e-range-icon e-icons"] }, this.createElement), P(this.inputElement, { "aria-readonly": this.readonly ? "true" : "false", tabindex: "0", "aria-haspopup": "true", "aria-activedescendant": "null", "aria-owns": this.element.id + "_popup", "aria-expanded": "false", role: "daterangepicker", autocomplete: "off", "aria-disabled": this.enabled ? "false" : "true", autocorrect: "off", autocapitalize: "off", spellcheck: "false" }), eS.addAttributes({ "aria-label": "select" }, this.inputWrapper.buttons[0]), d(this.placeholder) || "" === this.placeholder.trim() || eS.addAttributes({ "aria-placeholder": this.placeholder }, this.inputElement), this.setEleWidth(this.width), S([this.inputWrapper.container], "e-date-range-wrapper"), d(this.inputElement.getAttribute("name")) && P(this.inputElement, { name: this.element.id }), "hidden" === this.inputElement.type && (this.inputWrapper.container.style.display = "none"), this.refreshControl(), this.previousEleValue = this.inputElement.value, this.inputElement.setAttribute("value", this.inputElement.value), this.startCopy = this.startDate, this.endCopy = this.endDate }, t.prototype.setEleWidth = function (e) { this.inputWrapper.container.style.width = "string" == typeof e ? this.width : "number" == typeof e ? v(this.width) : "100%" }, t.prototype.adjustLongHeaderWidth = function () { "Wide" === this.dayHeaderFormat && S([this.popupWrapper], "e-daterange-day-header-lg") }, t.prototype.refreshControl = function () { this.validateMinMax(), this.strictMode && this.validateRangeStrict(); var e = this.disabledDates(); this.strictMode && e && (this.startValue = this.previousStartValue, this.setProperties({ startDate: this.startValue }, !0), this.endValue = this.previousEndValue, this.setProperties({ endDate: this.endValue }, !0), this.setValue()), this.updateInput(), this.strictMode || this.validateRange(), !this.strictMode && e && this.clearRange(), d(this.endValue) || d(this.startValue) || e || this.disabledDateRender(), this.errorClass(), this.previousStartValue = d(this.startValue) || isNaN(+this.startValue) ? null : new Date(+this.startValue), this.previousEndValue = d(this.endValue) || isNaN(+this.endValue) ? null : new Date(+this.endValue) }, t.prototype.updateInput = function () { if (!d(this.endValue) && !d(this.startValue)) { var e = { format: this.formatString, type: "date", skeleton: "yMd" }, t = this.globalize.formatDate(this.startValue, e), i = this.globalize.formatDate(this.endValue, e); eS.setValue(t + " " + this.separator + " " + i, this.inputElement, this.floatLabelType, this.showClearButton), this.previousStartValue = new Date(+this.startValue), this.previousEndValue = new Date(+this.endValue) } !this.strictMode && d(this.value) && this.invalidValueString && eS.setValue(this.invalidValueString, this.inputElement, this.floatLabelType, this.showClearButton) }, t.prototype.checkInvalidRange = function (e) { if (!d(e)) { var t = !1, i = void 0, n = void 0, r = null, o = null, s = null, a = !1, l = !1, h = !1; if ("string" == typeof e) { var c = e.split(" " + this.separator + " "); 2 === c.length ? (r = c[0], o = c[1]) : (t = !0, s = e) } else e.length > 0 ? (i = e[0], n = e[1]) : (i = e.start, n = e.end), i instanceof Date || "object" == typeof i ? i instanceof Date ? a = !0 : d(i) || (h = !0) : r = this.getstringvalue(i), n instanceof Date || "object" == typeof n ? n instanceof Date ? l = !0 : d(n) || (h = !0) : o = this.getstringvalue(n); (d(r) && !a && !d(o) || !d(r) && !l && d(o)) && (t = !0), h && (r = o = s = null, t = !0), r && (t = t || this.checkInvalidValue(r)), o && (t = t || this.checkInvalidValue(o)), t && (a && !h && (r = i.toLocaleDateString()), l && !h && (o = n.toLocaleDateString()), d(r) || d(o) ? d(r) ? d(o) || (s = o) : s = r : s = r + " " + this.separator + " " + o, this.invalidValueString = s, this.setProperties({ value: null }, !0), this.setProperties({ startValue: null }, !0), this.setProperties({ endValue: null }, !0), this.startDate = null, this.endDate = null) } }, t.prototype.getstringvalue = function (e) { var t = null; return d(e) || "number" != typeof e ? d(e) || "string" != typeof e || (t = "" + e) : t = e.toString(), t }, t.prototype.checkInvalidValue = function (e) { var t = e, i = !1, n = null; if (n = { format: this.formatString, type: "date", skeleton: "yMd" }, "string" != typeof t) i = !0; else { var r = new Gw(this.locale); if (!this.checkDateValue(r.parseDate(t, n))) { var o = null; o = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, (!/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(t) && !o.test(t) || /^[a-zA-Z0-9- ]*$/.test(t) || isNaN(+new Date(this.checkValue(t)))) && (i = !0) } } return i }, t.prototype.isDateDisabled = function (e) { if (d(e)) return !1; var t = new Date(+e); if (+t < +this.min || +t > +this.max) return !0; this.virtualRenderCellArgs = { date: t, isDisabled: !1 }; var i = this.virtualRenderCellArgs; return this.virtualRenderCellEvent(i), !!i.isDisabled }, t.prototype.disabledDateRender = function () { this.disabledDays = [], this.disabledDayCnt = null; for (var e = new Date(+this.startValue), t = 0; +e <= +this.endValue;) { this.virtualRenderCellArgs = { date: e, isDisabled: !1 }; var i = this.virtualRenderCellArgs; this.virtualRenderCellEvent(i), i.isDisabled && (this.disabledDays.push(new Date(+i.date)), +e > +this.startValue && +e < +this.endValue && t++), this.addDay(e, 1, null, this.max, this.min) } this.disabledDayCnt = t }, t.prototype.virtualRenderCellEvent = function (e) { h(this.virtualRenderCellArgs, { name: "renderDayCell" }), this.trigger("renderDayCell", e) }, t.prototype.disabledDates = function () { var e = !1, t = !1; return d(this.endValue) || d(this.startValue) || (e = this.isDateDisabled(this.startValue), t = this.isDateDisabled(this.endValue), this.currentDate = null, this.setValue()), e || t }, t.prototype.setModelValue = function () { this.value || null !== this.startDate || null !== this.endDate ? null === this.value || null === this.value.start ? null === this.value ? this.setProperties({ value: [this.startDate, this.endDate] }, !0) : null === this.value.start && this.setProperties({ value: { start: this.startDate, end: this.endDate } }, !0) : this.value && this.value.length > 0 || this.valueType && this.valueType.length > 0 ? (+this.startDate == +this.value[0] && +this.endDate == +this.value[1] || this.setProperties({ value: [this.startDate, this.endDate] }, !0), this.value && null == this.value[0] && null == this.value[1] && this.setProperties({ value: null }, !0)) : this.value && this.value.start && this.setProperties({ value: { start: this.startDate, end: this.endDate } }, !0) : this.setProperties({ value: null }, !0), this.createHiddenInput() }, t.prototype.dispatchEvent = function (e, t) { var i = document.createEvent("HTMLEvents"); i.initEvent(t, !1, !0), e.dispatchEvent(i), this.firstHiddenChild.dispatchEvent(i) }, t.prototype.changeTrigger = function (e) { +this.initStartDate == +this.startValue && +this.initEndDate == +this.endValue || (this.setProperties({ endDate: this.checkDateValue(this.endValue) }, !0), this.setProperties({ startDate: this.checkDateValue(this.startValue) }, !0), this.setModelValue(), this.trigger("change", this.rangeArgs(e))), this.previousEleValue = this.inputElement.value, this.initStartDate = this.checkDateValue(this.startValue), this.initEndDate = this.checkDateValue(this.endValue) }, t.prototype.navigateTo = function (t, i) { if (this.isPopupOpen()) { if ("month" === t.toLowerCase()) t = "Month"; else if ("year" === t.toLowerCase()) t = "Year"; else { if ("decade" !== t.toLowerCase()) return; t = "Decade" } this.getViewNumber(t) < this.getViewNumber(this.depth) && (t = this.depth), this.isMobile ? e.prototype.navigateTo.call(this, t, i) : (i < this.min ? i = new Date(+this.min) : i >= this.max && (i = new Date(+this.max)), "Month" === t && this.isSameMonth(i, this.max) ? i = new Date(this.max.getFullYear(), this.max.getMonth() - 1, this.min.getDate()) : "Year" === t && this.isSameYear(i, this.max) ? i = new Date(this.max.getFullYear() - 1, this.max.getMonth(), this.max.getDate()) : "Decade" === t && this.isSameDecade(i, this.max) && (i = new Date(this.max.getFullYear() - 10, this.max.getMonth(), this.max.getDate())), this.leftCalCurrentDate = i, this.navigate(this.leftCalendar, this.leftCalCurrentDate, t), i = "Month" === t ? new Date(this.currentDate.setMonth(this.currentDate.getMonth() + 1)) : "Year" === t ? new Date(this.currentDate.setFullYear(this.currentDate.getFullYear() + 1)) : new Date(this.currentDate.setFullYear(this.currentDate.getFullYear() + 10)), this.rightCalCurrentDate = i, this.navigate(this.rightCalendar, this.rightCalCurrentDate, t), this.leftKeyboardModule = this.rightKeyboardModule = null, this.updateNavIcons()), this.currentView() === this.depth && this.bindCalendarCellEvents(), this.removeFocusedDate(), this.updateRange(this.isMobile ? [this.calendarElement] : [this.leftCalendar, this.rightCalendar]) } }, t.prototype.navigate = function (t, i, n) { this.calendarElement = t, this.table = t.querySelector("table"), this.tableBodyElement = t.querySelector("tbody"), this.headerTitleElement = t.querySelector(".e-title"), this.tableHeadElement = t.querySelector("thead"), this.contentElement = t.querySelector(".e-content"), this.previousIcon = t.querySelector(".e-prev"), this.nextIcon = t.querySelector(".e-next"), this.effect = "e-zoomin", e.prototype.navigateTo.call(this, n, i) }, t.prototype.focusIn = function () { document.activeElement !== this.inputElement && this.enabled && (S([this.inputWrapper.container], [kA]), this.inputElement.focus()) }, t.prototype.focusOut = function () { var e = this.preventBlur; document.activeElement === this.inputElement && (x([this.inputWrapper.container], [kA]), this.preventBlur = !1, this.inputElement.blur(), this.preventBlur = e) }, t.prototype.destroy = function () { this.hide(null); var t = { "aria-readonly": this.readonly ? "true" : "false", tabindex: "0", "aria-haspopup": "true", "aria-activedescendant": "null", "aria-owns": this.element.id + "_popup", "aria-expanded": "false", role: "daterangepicker", autocomplete: "off", "aria-disabled": this.enabled ? "false" : "true", autocorrect: "off", autocapitalize: "off", "aria-invalid": "false", spellcheck: "false" }; this.inputElement && (x([this.inputElement], [AA]), Kv.remove(this.inputElement, "blur", this.inputBlurHandler), eS.removeAttributes(t, this.inputElement), d(this.cloneElement.getAttribute("tabindex")) ? this.inputElement.removeAttribute("tabindex") : this.inputElement.setAttribute("tabindex", this.tabIndex), this.ensureInputAttribute(), this.inputElement.classList.remove("e-input"), d(this.inputWrapper) || (Kv.remove(this.inputWrapper.buttons[0], "mousedown", this.rangeIconHandler), null === this.angularTag && this.inputWrapper.container.parentElement.appendChild(this.inputElement), I(this.inputWrapper.container))), d(this.inputKeyboardModule) || this.isMobile || this.inputKeyboardModule.destroy(), this.popupObj && (this.isMobile || this.clearCalendarEvents()), e.prototype.destroy.call(this), this.inputWrapper = this.popupWrapper = this.popupObj = this.cloneElement = this.presetElement = null, this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler), d(this.firstHiddenChild) || d(this.secondHiddenChild) || (I(this.firstHiddenChild), I(this.secondHiddenChild), this.firstHiddenChild = this.secondHiddenChild = null, this.inputElement.setAttribute("name", this.element.getAttribute("data-name")), this.inputElement.removeAttribute("data-name")) }, t.prototype.ensureInputAttribute = function () { for (var e = [], t = 0; t < this.inputElement.attributes.length; t++)e[t] = this.inputElement.attributes[t].name; for (t = 0; t < e.length; t++)d(this.cloneElement.getAttribute(e[t])) ? ("value" === e[t].toLowerCase() && (this.inputElement.value = ""), this.inputElement.removeAttribute(e[t])) : ("value" === e[t].toLowerCase() && (this.inputElement.value = this.cloneElement.getAttribute(e[t])), this.inputElement.setAttribute(e[t], this.cloneElement.getAttribute(e[t]))) }, t.prototype.getModuleName = function () { return "daterangepicker" }, t.prototype.getPersistData = function () { return this.addOnPersist(["startDate", "endDate", "value"]) }, t.prototype.getSelectedRange = function () { var e; return d(this.startValue) || d(this.endValue) ? e = 0 : (e = Math.round(Math.abs((this.startValue.getTime() - this.endValue.getTime()) / 864e5)) + 1, this.disabledDateRender(), d(this.disabledDayCnt) || (e -= this.disabledDayCnt, this.disabledDayCnt = null)), { startDate: this.startValue, endDate: this.endValue, daySpan: e } }, t.prototype.show = function (t, i) { var n = this; if (this.isMobile && this.popupObj && this.popupObj.refreshPosition(), !(this.enabled && this.readonly || !this.enabled || this.popupObj || this.isPopupOpen())) { t && (this.targetElement = t), this.createPopup(), (this.isMobile || uw.isDevice) && (this.mobileRangePopupWrap = this.createElement("div", { className: "e-daterangepick-mob-popup-wrap" }), document.body.appendChild(this.mobileRangePopupWrap)), this.openEventArgs = { popup: this.popupObj || null, cancel: !1, date: this.inputElement.value, model: this, event: i || null, appendTo: this.isMobile || uw.isDevice ? this.mobileRangePopupWrap : document.body }; var r = this.openEventArgs; this.trigger("open", r, function (r) { if (n.openEventArgs = r, !n.openEventArgs.cancel) { n.openEventArgs.appendTo.appendChild(n.popupWrapper), n.showPopup(t, i); var o = !n.isCustomRange || n.isMobile && n.isCustomRange; !c(n.presets[0].start && n.presets[0].end && n.presets[0].label) && o && n.setScrollPosition(), n.checkMinMaxDays(), n.isMobile && !d(n.startDate) && d(n.endDate) && (n.endButton.element.classList.add(EA), n.startButton.element.classList.remove(EA), n.endButton.element.removeAttribute("disabled"), n.selectableDates()), e.prototype.setOverlayIndex.call(n, n.mobileRangePopupWrap, n.popupObj.element, n.modal, n.isMobile || uw.isDevice) } }) } }, t.prototype.hide = function (e) { var t = this; if (this.popupObj) { if (d(this.previousEndValue) && d(this.previousStartValue) ? this.clearRange() : (d(this.previousStartValue) ? (this.startValue = null, this.setValue()) : (this.startValue = new Date(this.checkValue(this.previousStartValue)), this.setValue(), this.currentDate = new Date(this.checkValue(this.startValue))), d(this.previousEndValue) ? (this.endValue = null, this.setValue()) : (this.endValue = new Date(this.checkValue(this.previousEndValue)), this.setValue())), this.isPopupOpen()) { this.closeEventArgs = { cancel: !1, popup: this.popupObj, date: this.inputElement.value, model: this, event: e || null }; var i = this.closeEventArgs; this.trigger("close", i, function (e) { t.closeEventArgs = e, t.closeEventArgs.cancel ? x([t.inputWrapper.buttons[0]], EA) : (t.isMobile && (d(t.startButton) || d(t.endButton) || (Kv.remove(t.startButton.element, "click touchstart", t.deviceHeaderClick), Kv.remove(t.endButton.element, "click touchstart", t.deviceHeaderClick))), t.popupObj && (t.popupObj.hide(), t.preventBlur && (t.inputElement.focus(), S([t.inputWrapper.container], [kA]))), t.isMobile || (d(t.leftKeyboardModule) || d(t.rightKeyboardModule) || (t.leftKeyboardModule.destroy(), t.rightKeyboardModule.destroy()), d(t.presetElement) || t.presetKeyboardModule.destroy(), d(t.cancelButton) || t.btnKeyboardModule.destroy()), t.targetElement = null, x([document.body], "e-range-overflow"), Kv.remove(document, "mousedown touchstart", t.documentHandler), t.isMobile && t.modal && (t.modal.style.display = "none", t.modal.outerHTML = "", t.modal = null), (t.isMobile || uw.isDevice) && (d(t.mobileRangePopupWrap) || (t.mobileRangePopupWrap.remove(), t.mobileRangePopupWrap = null)), t.isKeyPopup = t.dateDisabled = !1), t.updateClearIconState(), t.updateHiddenInput(), t.isMobile && t.allowEdit && !t.readonly && t.inputElement.removeAttribute("readonly") }) } } else this.updateClearIconState(), this.updateHiddenInput(), this.isMobile && this.allowEdit && !this.readonly && this.inputElement.removeAttribute("readonly") }, t.prototype.setLocale = function () { this.globalize = new Gw(this.locale), this.l10n.setLocale(this.locale), this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, !0), eS.setPlaceholder(this.placeholder, this.inputElement), this.updateInput(), this.changeTrigger() }, t.prototype.refreshChange = function () { this.checkView(), this.refreshControl(), this.changeTrigger() }, t.prototype.setDate = function () { eS.setValue("", this.inputElement, this.floatLabelType, this.showClearButton), this.refreshChange() }, t.prototype.enableInput = function () { +this.min <= +this.max && (this.setProperties({ enabled: !0 }, !0), eS.setEnabled(this.enabled, this.inputElement), this.element.hasAttribute("disabled") && this.bindEvents()) }, t.prototype.clearModelvalue = function (e, t) { this.setProperties({ startDate: null }, !0), this.setProperties({ endDate: null }, !0), t.value && t.value.length > 0 ? this.setProperties({ value: null }, !0) : t.value && t.value.start ? this.setProperties({ value: { start: null, end: null } }, !0) : t.value && !t.value.start && this.setProperties({ value: { start: null, end: null } }, !0), this.updateValue(), this.setDate() }, t.prototype.createHiddenInput = function () { d(this.firstHiddenChild) && d(this.secondHiddenChild) && (this.firstHiddenChild = this.createElement("input"), this.secondHiddenChild = this.createElement("input")), d(this.inputElement.getAttribute("name")) || (this.inputElement.setAttribute("data-name", this.inputElement.getAttribute("name")), this.inputElement.removeAttribute("name")), P(this.firstHiddenChild, { type: "text", name: this.inputElement.getAttribute("data-name") }), P(this.secondHiddenChild, { type: "text", name: this.inputElement.getAttribute("data-name") }); var e = { type: "datetime", skeleton: "yMd" }; this.firstHiddenChild.value = this.startDate && this.globalize.formatDate(this.startDate, e), this.secondHiddenChild.value = this.endDate && this.globalize.formatDate(this.endDate, e), this.inputElement.parentElement.appendChild(this.firstHiddenChild), this.inputElement.parentElement.appendChild(this.secondHiddenChild), this.firstHiddenChild.style.display = "none", this.secondHiddenChild.style.display = "none" }, t.prototype.onPropertyChanged = function (e, t) { for (var i = { format: this.formatString, type: "date", skeleton: "yMd" }, n = 0, r = Object.keys(e); n < r.length; n++) { var o = r[n]; switch (this.hide(null), o) { case "width": this.setEleWidth(this.width); break; case "separator": this.previousEleValue = this.inputElement.value, this.setProperties({ separator: e.separator }, !0), this.updateInput(), this.changeTrigger(); break; case "placeholder": eS.setPlaceholder(e.placeholder, this.inputElement), this.setProperties({ placeholder: e.placeholder }, !0); break; case "readonly": eS.setReadonly(this.readonly, this.inputElement), this.inputElement.setAttribute("aria-readonly", "" + this.readonly), this.setRangeAllowEdit(); break; case "cssClass": eS.setCssClass(e.cssClass, [this.inputWrapper.container], t.cssClass), this.popupWrapper && eS.setCssClass(e.cssClass, [this.popupWrapper], t.cssClass); break; case "enabled": this.setProperties({ enabled: e.enabled }, !0), eS.setEnabled(this.enabled, this.inputElement), this.bindEvents(); break; case "allowEdit": this.setRangeAllowEdit(); break; case "enableRtl": this.setProperties({ enableRtl: e.enableRtl }, !0), eS.setEnableRtl(this.enableRtl, [this.inputWrapper.container]); break; case "zIndex": this.setProperties({ zIndex: e.zIndex }, !0); break; case "format": this.setProperties({ format: e.format }, !0), this.checkFormat(), this.updateInput(), this.changeTrigger(); break; case "locale": this.globalize = new Gw(this.locale), this.l10n.setLocale(this.locale), this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, !0), eS.setPlaceholder(this.placeholder, this.inputElement), this.setLocale(); break; case "htmlAttributes": this.updateHtmlAttributeToElement(), this.updateHtmlAttributeToWrapper(), this.checkHtmlAttributes(!0); break; case "showClearButton": eS.setClearButton(this.showClearButton, this.inputElement, this.inputWrapper), this.bindClearEvent(); break; case "startDate": "string" == typeof e.startDate && (e.startDate = this.globalize.parseDate(e.startDate, i)), +this.initStartDate != +e.startDate && (this.startValue = this.checkDateValue(new Date(this.checkValue(e.startDate))), this.setDate(), this.setValue()); break; case "endDate": "string" == typeof e.endDate && (e.endDate = this.globalize.parseDate(e.endDate, i)), +this.initEndDate != +e.endDate && (this.endValue = this.checkDateValue(new Date(this.checkValue(e.endDate))), this.setDate(), this.setValue()); break; case "value": if (this.invalidValueString = null, this.checkInvalidRange(e.value), "string" == typeof e.value) if (this.invalidValueString) this.clearModelvalue(e, t); else { var s = e.value.split(" " + this.separator + " "); this.value = [new Date(s[0]), new Date(s[1])], this.updateValue(), this.setDate() } else !d(e.value) && e.value.length > 0 || !d(e.value) && e.value.start ? (this.valueType = e.value, null === e.value[0] || null === e.value.start ? 1 === e.value.length || e.value.start ? this.clearModelvalue(e, t) : null !== e.value[1] && null !== e.value.start || this.clearModelvalue(e, t) : +this.initStartDate == +e.value[0] && +this.initEndDate == +e.value[1] && +this.initStartDate == +(e.value.start || +this.initEndDate != +e.value.start) || (1 === e.value.length ? this.modelValue = e.value : e.value.start && (this.modelValue = e.value), this.updateValue(), this.setDate())) : (d(this.value) || null == e.value.start) && (this.valueType = e.value, this.startValue = null, this.endValue = null, this.clearModelvalue(e, t)); break; case "minDays": this.setProperties({ minDays: e.minDays }, !0), this.refreshChange(); break; case "maxDays": this.setProperties({ maxDays: e.maxDays }, !0), this.refreshChange(); break; case "min": this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(e.min))) }, !0), this.previousEleValue = this.inputElement.value, this.enableInput(), this.refreshChange(); break; case "max": this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(e.max))) }, !0), this.enableInput(), this.refreshChange(); break; case "strictMode": this.invalidValueString = null, this.setProperties({ strictMode: e.strictMode }, !0), this.refreshChange(); break; case "presets": this.setProperties({ presets: e.presets }, !0), this.processPresets(); break; case "floatLabelType": this.floatLabelType = e.floatLabelType, eS.removeFloating(this.inputWrapper), eS.addFloating(this.inputElement, this.floatLabelType, this.placeholder); break; case "start": this.setProperties({ start: e.start }, !0), this.refreshChange(); break; case "depth": this.setProperties({ depth: e.depth }, !0), this.refreshChange() } } }, xA([Y(null)], t.prototype, "value", void 0), xA([Y(!1)], t.prototype, "enablePersistence", void 0), xA([Y(new Date(1900, 0, 1))], t.prototype, "min", void 0), xA([Y(new Date(2099, 11, 31))], t.prototype, "max", void 0), xA([Y(null)], t.prototype, "locale", void 0), xA([Y(null)], t.prototype, "firstDayOfWeek", void 0), xA([Y(!1)], t.prototype, "weekNumber", void 0), xA([Y("Gregorian")], t.prototype, "calendarMode", void 0), xA([X()], t.prototype, "created", void 0), xA([X()], t.prototype, "destroyed", void 0), xA([X()], t.prototype, "change", void 0), xA([X()], t.prototype, "navigated", void 0), xA([X()], t.prototype, "renderDayCell", void 0), xA([Y(null)], t.prototype, "startDate", void 0), xA([Y(null)], t.prototype, "endDate", void 0), xA([G([{}], tE)], t.prototype, "presets", void 0), xA([Y("")], t.prototype, "width", void 0), xA([Y(1e3)], t.prototype, "zIndex", void 0), xA([Y(!0)], t.prototype, "showClearButton", void 0), xA([Y(!0)], t.prototype, "showTodayButton", void 0), xA([Y("Month")], t.prototype, "start", void 0), xA([Y("Month")], t.prototype, "depth", void 0), xA([Y("")], t.prototype, "cssClass", void 0), xA([Y("-")], t.prototype, "separator", void 0), xA([Y(null)], t.prototype, "minDays", void 0), xA([Y(null)], t.prototype, "maxDays", void 0), xA([Y(!1)], t.prototype, "strictMode", void 0), xA([Y(null)], t.prototype, "keyConfigs", void 0), xA([Y(null)], t.prototype, "format", void 0), xA([Y(!0)], t.prototype, "enabled", void 0), xA([Y(!1)], t.prototype, "readonly", void 0), xA([Y(!0)], t.prototype, "allowEdit", void 0), xA([Y("Never")], t.prototype, "floatLabelType", void 0), xA([Y(null)], t.prototype, "placeholder", void 0), xA([Y({})], t.prototype, "htmlAttributes", void 0), xA([X()], t.prototype, "open", void 0), xA([X()], t.prototype, "close", void 0), xA([X()], t.prototype, "select", void 0), xA([X()], t.prototype, "focus", void 0), xA([X()], t.prototype, "blur", void 0), t = xA([J], t) }(iM), nE = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), rE = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, oE = (new Date).getDate(), sE = (new Date).getMonth(), aE = (new Date).getFullYear(), lE = "e-timepicker", hE = "e-active", dE = "e-navigation", cE = "e-disabled", pE = "e-input-focus", uE = hA.li, gE = ["title", "class", "style"]; !function (e) { (dA || (dA = {})).createListItems = function (e, t, i, n, r, o) { this.calendarMode; var s, a, l = 6e4 * o, h = [], d = []; for (s = +t.setMilliseconds(0), a = +i.setMilliseconds(0); a >= s;)d.push(s), h.push(n.formatDate(new Date(s), { format: r, type: "time" })), s += l; return { collection: d, list: hT.createList(e, h, null, !0) } } }(); var mE = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.liCollections = [], n.timeCollections = [], n.disableItemCollection = [], n.invalidValueString = null, n.timeOptions = t, n } return nE(t, e), t.prototype.preRender = function () { this.keyConfigure = { enter: "enter", escape: "escape", end: "end", tab: "tab", home: "home", down: "downarrow", up: "uparrow", left: "leftarrow", right: "rightarrow", open: "alt+downarrow", close: "alt+uparrow" }, this.cloneElement = this.element.cloneNode(!0), x([this.cloneElement], [lE, "e-control", "e-lib"]), this.inputElement = this.element, this.angularTag = null, this.formElement = R(this.element, "form"), "EJS-TIMEPICKER" === this.element.tagName && (this.angularTag = this.element.tagName, this.inputElement = this.createElement("input"), this.element.appendChild(this.inputElement)), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.removeAttribute("tabindex"), this.openPopupEventArgs = { appendTo: document.body } }, t.prototype.render = function () { this.initialize(), this.createInputElement(), this.updateHtmlAttributeToWrapper(), this.setTimeAllowEdit(), this.setEnable(), this.validateInterval(), this.bindEvents(), this.validateDisable(), this.setValue(this.getFormattedValue(this.value)), this.anchor = this.inputElement, this.inputElement.setAttribute("value", this.inputElement.value), this.inputEleValue = this.getDateObject(this.inputElement.value) }, t.prototype.setTimeAllowEdit = function () { this.allowEdit ? this.readonly || this.inputElement.removeAttribute("readonly") : P(this.inputElement, { readonly: "" }), this.clearIconState() }, t.prototype.clearIconState = function () { this.allowEdit || !this.inputWrapper || this.readonly ? this.inputWrapper && x([this.inputWrapper.container], ["e-non-edit"]) : "" === this.inputElement.value ? x([this.inputWrapper.container], ["e-non-edit"]) : S([this.inputWrapper.container], ["e-non-edit"]) }, t.prototype.validateDisable = function () { this.setMinMax(this.initMin, this.initMax), this.popupCreation(), this.popupObj.destroy(), this.popupWrapper = this.popupObj = null, isNaN(+this.value) || null === this.value || this.valueIsDisable(this.value) || (this.strictMode && this.resetState(), this.initValue = null, this.initMax = this.getDateObject(this.initMax), this.initMin = this.getDateObject(this.initMin), this.timeCollections = this.liCollections = [], this.setMinMax(this.initMin, this.initMax)) }, t.prototype.validationAttribute = function (e, t) { var i = e.getAttribute("name") ? e.getAttribute("name") : e.getAttribute("id"); t.setAttribute("name", i), e.removeAttribute("name"); for (var n = ["required", "aria-required", "form"], r = 0; r < n.length; r++)if (!d(e.getAttribute(n[r]))) { var o = e.getAttribute(n[r]); t.setAttribute(n[r], o), e.removeAttribute(n[r]) } }, t.prototype.initialize = function () { this.globalize = new Gw(this.locale), this.defaultCulture = new Gw("en"), this.checkTimeFormat(), this.checkInvalidValue(this.value), this.setProperties({ value: this.checkDateValue(new Date(this.checkInValue(this.value))) }, !0), this.setProperties({ min: this.checkDateValue(new Date(this.checkInValue(this.min))) }, !0), this.setProperties({ max: this.checkDateValue(new Date(this.checkInValue(this.max))) }, !0), null !== this.angularTag && this.validationAttribute(this.element, this.inputElement), this.updateHtmlAttributeToElement(), this.checkAttributes(!1); var e = { placeholder: this.placeholder }; this.l10n = new pb("timepicker", e, this.locale), this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, !0), this.initValue = this.checkDateValue(this.value), this.initMin = this.checkDateValue(this.min), this.initMax = this.checkDateValue(this.max), this.isNavigate = this.isPreventBlur = this.isTextSelected = !1, this.activeIndex = this.valueWithMinutes = this.prevDate = null, d(this.element.getAttribute("id")) ? (this.element.id = p("ej2_timepicker"), null !== this.angularTag && P(this.inputElement, { id: this.element.id + "_input" })) : null !== this.angularTag && (this.inputElement.id = this.element.getAttribute("id") + "_input"), d(this.inputElement.getAttribute("name")) && P(this.inputElement, { name: this.element.id }) }, t.prototype.checkTimeFormat = function () { if (this.format) if ("string" == typeof this.format) this.formatString = this.format; else if (d(this.format.skeleton) || "" === this.format.skeleton) this.formatString = this.globalize.getDatePattern({ type: "time", skeleton: "short" }); else { var e = this.format.skeleton; this.formatString = this.globalize.getDatePattern({ type: "time", skeleton: e }) } else this.formatString = null }, t.prototype.checkDateValue = function (e) { return !d(e) && e instanceof Date && !isNaN(+e) ? e : null }, t.prototype.createInputElement = function () { this.inputWrapper = eS.createInput({ element: this.inputElement, floatLabelType: this.floatLabelType, properties: { readonly: this.readonly, placeholder: this.placeholder, cssClass: this.cssClass, enabled: this.enabled, enableRtl: this.enableRtl, showClearButton: this.showClearButton }, buttons: [" e-input-group-icon e-time-icon e-icons"] }, this.createElement), this.inputWrapper.container.style.width = this.setWidth(this.width), P(this.inputElement, { "aria-haspopup": "true", "aria-autocomplete": "list", tabindex: "0", "aria-activedescendant": "null", "aria-owns": this.element.id + "_options", "aria-expanded": "false", role: "combobox", autocomplete: "off", autocorrect: "off", autocapitalize: "off", spellcheck: "false", "aria-disabled": "false", "aria-invalid": "false" }), this.isNullOrEmpty(this.inputStyle) || eS.addAttributes({ style: this.inputStyle }, this.inputElement), S([this.inputWrapper.container], "e-time-wrapper") }, t.prototype.getCldrDateTimeFormat = function () { var e = new Gw(this.locale).getDatePattern({ skeleton: "yMd" }); return this.isNullOrEmpty(this.formatString) ? e + " " + this.CldrFormat("time") : this.formatString }, t.prototype.checkInvalidValue = function (e) { var t = !1; if ("object" != typeof e && !d(e)) { var i = e; "string" == typeof i && (i = i.trim()); var n = null, r = null; if ("number" == typeof e ? i = e.toString() : "string" == typeof e && (/^[a-zA-Z0-9- ]*$/.test(e) || d(n = this.setCurrentDate(this.getDateObject(e))) && d(n = this.checkDateValue(this.globalize.parseDate(i, { format: this.getCldrDateTimeFormat(), type: "datetime" }))) && (n = this.checkDateValue(this.globalize.parseDate(i, { format: this.formatString, type: "dateTime", skeleton: "yMd" })))), r = this.globalize.parseDate(i, { format: this.getCldrDateTimeFormat(), type: "datetime" }), n = !d(r) && r instanceof Date && !isNaN(+r) ? r : null, d(n) && i.replace(/\s/g, "").length) { var o = null; o = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/, !/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/.test(i) && !o.test(i) || /^[a-zA-Z0-9- ]*$/.test(e) || isNaN(+new Date("" + i)) ? t = !0 : n = new Date("" + i) } t ? (this.strictMode || (this.invalidValueString = i), this.setProperties({ value: null }, !0), this.initValue = null) : (this.setProperties({ value: n }, !0), this.initValue = this.value) } }, t.prototype.CldrFormat = function (e) { return "en" === this.locale || "en-US" === this.locale ? n("timeFormats.short", ae()) : this.getCultureTimeObject(_w, "" + this.locale) }, t.prototype.destroy = function () { this.hide(), this.unBindEvents(); var t = { "aria-haspopup": "true", "aria-autocomplete": "list", tabindex: "0", "aria-activedescendant": "null", "aria-owns": this.element.id + "_options", "aria-expanded": "false", role: "combobox", autocomplete: "off", autocorrect: "off", autocapitalize: "off", spellcheck: "false", "aria-disabled": "true", "aria-invalid": "false" }; this.inputElement && (eS.removeAttributes(t, this.inputElement), null === this.angularTag && this.inputWrapper.container.parentElement.appendChild(this.inputElement), d(this.cloneElement.getAttribute("tabindex")) ? this.inputElement.removeAttribute("tabindex") : this.inputElement.setAttribute("tabindex", this.tabIndex), this.ensureInputAttribute(), this.enableElement([this.inputElement]), this.inputElement.classList.remove("e-input"), d(this.cloneElement.getAttribute("disabled")) && eS.setEnabled(!0, this.inputElement, this.floatLabelType)), this.inputWrapper.container && k(this.inputWrapper.container), this.inputWrapper = this.popupWrapper = this.cloneElement = void 0, this.liCollections = this.timeCollections = this.disableItemCollection = [], d(this.rippleFn) || this.rippleFn(), e.prototype.destroy.call(this), this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler) }, t.prototype.ensureInputAttribute = function () { for (var e = [], t = 0; t < this.inputElement.attributes.length; t++)e[t] = this.inputElement.attributes[t].name; for (t = 0; t < e.length; t++)d(this.cloneElement.getAttribute(e[t])) ? (this.inputElement.removeAttribute(e[t]), "value" === e[t].toLowerCase() && (this.inputElement.value = "")) : (this.inputElement.setAttribute(e[t], this.cloneElement.getAttribute(e[t])), "value" === e[t].toLowerCase() && (this.inputElement.value = this.cloneElement.getAttribute(e[t]))) }, t.prototype.popupCreation = function () { this.popupWrapper = this.createElement("div", { className: lE + " e-popup", attrs: { id: this.element.id + "_popup", style: "visibility:hidden" } }), d(this.cssClass) || (this.popupWrapper.className += " " + this.cssClass), !d(this.step) && this.step > 0 && (this.generateList(), E([this.listWrapper], this.popupWrapper)), this.openPopupEventArgs.appendTo.appendChild(this.popupWrapper), this.addSelection(), this.renderPopup(), I(this.popupWrapper) }, t.prototype.getPopupHeight = function () { var e = parseInt("240px", 10), t = this.popupWrapper.getBoundingClientRect().height; return t > e ? e : t }, t.prototype.generateList = function () { this.createListItems(), this.wireListEvents(); var e = { duration: 300, selector: "." + uE }; this.rippleFn = ee(this.listWrapper, e), this.liCollections = this.listWrapper.querySelectorAll("." + uE) }, t.prototype.renderPopup = function () { var e = this; this.containerStyle = this.inputWrapper.container.getBoundingClientRect(), this.popupObj = new yM(this.popupWrapper, { width: this.setPopupWidth(this.width), zIndex: this.zIndex, targetType: "relative", position: uw.isDevice ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" }, collision: uw.isDevice ? { X: "fit", Y: "fit" } : { X: "flip", Y: "flip" }, enableRtl: this.enableRtl, relateTo: uw.isDevice ? document.body : this.inputWrapper.container, offsetY: 4, open: function () { e.popupWrapper.style.visibility = "visible", S([e.inputWrapper.buttons[0]], hE) }, close: function () { x([e.inputWrapper.buttons[0]], hE), e.unWireListEvents(), e.inputElement.setAttribute("aria-activedescendant", "null"), k(e.popupObj.element), e.popupObj.destroy(), e.popupWrapper.innerHTML = "", e.listWrapper = e.popupWrapper = e.listTag = void 0 } }), uw.isDevice || (this.popupObj.collision = { X: "none", Y: "flip" }), this.popupObj.element.style.maxHeight = "240px" }, t.prototype.getFormattedValue = function (e) { return d(this.checkDateValue(e)) ? null : this.globalize.formatDate(e, { skeleton: "medium", type: "time" }) }, t.prototype.getDateObject = function (e) { if (!this.isNullOrEmpty(e)) { var t = this.createDateObj(e), i = !this.isNullOrEmpty(this.initValue); if (this.checkDateValue(t)) { var n = i ? this.initValue.getDate() : oE, r = i ? this.initValue.getMonth() : sE, o = i ? this.initValue.getFullYear() : aE; return new Date(o, r, n, t.getHours(), t.getMinutes(), t.getSeconds()) } } return null }, t.prototype.updateHtmlAttributeToWrapper = function () { if (!d(this.htmlAttributes)) for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; if (gE.indexOf(i) > -1) if ("class" === i) S([this.inputWrapper.container], this.htmlAttributes[i].split(" ")); else if ("style" === i) { var n = this.inputWrapper.container.getAttribute(i); n = d(n) ? this.htmlAttributes[i] : n + this.htmlAttributes[i], this.inputWrapper.container.setAttribute(i, n) } else this.inputWrapper.container.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.updateHtmlAttributeToElement = function () { if (!d(this.htmlAttributes)) for (var e = 0, t = Object.keys(this.htmlAttributes); e < t.length; e++) { var i = t[e]; gE.indexOf(i) < 0 && this.inputElement.setAttribute(i, this.htmlAttributes[i]) } }, t.prototype.removeErrorClass = function () { x([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": "false" }) }, t.prototype.checkErrorState = function (e) { var t = this.getDateObject(e); this.validateState(t) && !this.invalidValueString ? this.removeErrorClass() : (S([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": "true" })) }, t.prototype.validateInterval = function () { !d(this.step) && this.step > 0 ? this.enableElement([this.inputWrapper.buttons[0]]) : this.disableTimeIcon() }, t.prototype.disableTimeIcon = function () { this.disableElement([this.inputWrapper.buttons[0]]), this.hide() }, t.prototype.disableElement = function (e) { S(e, cE) }, t.prototype.enableElement = function (e) { x(e, cE) }, t.prototype.selectInputText = function () { this.inputElement.setSelectionRange(0, this.inputElement.value.length) }, t.prototype.getMeridianText = function () { return "en" === this.locale || "en-US" === this.locale ? n("dayPeriods.format.wide", ae()) : n("main." + this.locale + ".dates.calendars.gregorian.dayPeriods.format.abbreviated", _w) }, t.prototype.getCursorSelection = function () { var e = this.inputElement, t = 0, i = 0; return isNaN(e.selectionStart) || (t = e.selectionStart, i = e.selectionEnd), { start: Math.abs(t), end: Math.abs(i) } }, t.prototype.getActiveElement = function () { return d(this.popupWrapper) ? null : this.popupWrapper.querySelectorAll("." + hE) }, t.prototype.isNullOrEmpty = function (e) { return !!(d(e) || "string" == typeof e && "" === e.trim()) }, t.prototype.setWidth = function (e) { return e = "number" == typeof e ? v(e) : "string" == typeof e ? e.match(/px|%|em/) ? e : v(e) : "100%" }, t.prototype.setPopupWidth = function (e) { if ((e = this.setWidth(e)).indexOf("%") > -1) { e = (this.containerStyle.width * parseFloat(e) / 100).toString() + "px" } return e }, t.prototype.setScrollPosition = function () { var e; this.getPopupHeight(); d(e = this.selectedElement) ? this.popupWrapper && this.checkDateValue(this.scrollTo) && this.setScrollTo() : this.findScrollTop(e) }, t.prototype.findScrollTop = function (e) { var t = this.getPopupHeight(), i = e.nextElementSibling, n = i ? i.offsetTop : e.offsetTop, r = e.getBoundingClientRect().height; n + e.offsetTop > t ? this.popupWrapper.scrollTop = i ? n - (t / 2 + r / 2) : n : this.popupWrapper.scrollTop = 0 }, t.prototype.setScrollTo = function () { var e; if (d(this.popupWrapper)) this.popupWrapper.scrollTop = 0; else { var t = this.popupWrapper.querySelectorAll("." + uE); if (t.length) { var i = this.timeCollections[0], n = this.getDateObject(this.checkDateValue(this.scrollTo)).getTime(); e = t[Math.round((n - i) / (6e4 * this.step))] } } d(e) ? this.popupWrapper.scrollTop = 0 : this.findScrollTop(e) }, t.prototype.getText = function () { return d(this.checkDateValue(this.value)) ? "" : this.getValue(this.value) }, t.prototype.getValue = function (e) { return d(this.checkDateValue(e)) ? null : this.globalize.formatDate(e, { format: this.cldrTimeFormat(), type: "time" }) }, t.prototype.cldrDateFormat = function () { return "en" === this.locale || "en-US" === this.locale ? n("dateFormats.short", ae()) : this.getCultureDateObject(_w, "" + this.locale) }, t.prototype.cldrTimeFormat = function () { return this.isNullOrEmpty(this.formatString) ? "en" === this.locale || "en-US" === this.locale ? n("timeFormats.short", ae()) : this.getCultureTimeObject(_w, "" + this.locale) : this.formatString }, t.prototype.dateToNumeric = function () { return "en" === this.locale || "en-US" === this.locale ? n("timeFormats.medium", ae()) : n("main." + this.locale + ".dates.calendars.gregorian.timeFormats.medium", _w) }, t.prototype.getExactDateTime = function (e) { return d(this.checkDateValue(e)) ? null : this.globalize.formatDate(e, { format: this.dateToNumeric(), type: "time" }) }, t.prototype.setValue = function (e) { var t = this.checkValue(e); this.strictMode || this.validateState(t) ? this.isNullOrEmpty(t) ? (this.initValue = null, this.validateMinMax(this.value, this.min, this.max)) : this.initValue = this.compareFormatChange(t) : (null === this.checkDateValue(this.valueWithMinutes) && (this.initValue = this.valueWithMinutes = null), this.validateMinMax(this.value, this.min, this.max)), this.updateInput(!0, this.initValue) }, t.prototype.compareFormatChange = function (e) { return d(e) ? null : e !== this.getText() ? this.getDateObject(e) : this.getDateObject(this.value) }, t.prototype.updatePlaceHolder = function () { eS.setPlaceholder(this.l10n.getConstant("placeholder"), this.inputElement) }, t.prototype.popupHandler = function (e) { uw.isDevice && this.inputElement.setAttribute("readonly", ""), e.preventDefault(), this.isPopupOpen() ? this.closePopup(0, e) : (this.inputElement.focus(), this.show(e)) }, t.prototype.mouseDownHandler = function () { if (!this.readonly) { this.getCursorSelection(); this.inputElement.setSelectionRange(0, 0), Kv.add(this.inputElement, "mouseup", this.mouseUpHandler, this) } }, t.prototype.mouseUpHandler = function (e) { if (!this.readonly) { e.preventDefault(), Kv.remove(this.inputElement, "mouseup", this.mouseUpHandler); var t = this.getCursorSelection(); 0 === t.start && t.end === this.inputElement.value.length || (this.inputElement.value.length > 0 && (this.cursorDetails = this.focusSelection()), this.inputElement.setSelectionRange(this.cursorDetails.start, this.cursorDetails.end)) } }, t.prototype.focusSelection = function () { var e = new RegExp("^[a-zA-Z0-9]+$"), t = this.inputElement.value.split(""); t.push(" "); var i = this.getCursorSelection(), n = 0, r = 0, o = !1; if (this.isTextSelected) n = i.start, r = i.end, this.isTextSelected = !1; else for (var s = 0; s < t.length; s++)if (e.test(t[s]) || (r = s, o = !0), o) { if (i.start >= n && i.end <= r) { r = r, this.isTextSelected = !0; break } n = s + 1, o = !1 } return { start: n, end: r } }, t.prototype.inputHandler = function (e) { if (!this.readonly && this.enabled) switch ("right" !== e.action && "left" !== e.action && "tab" !== e.action && e.preventDefault(), e.action) { case "home": case "end": case "up": case "down": this.keyHandler(e); break; case "enter": this.isNavigate ? (this.selectedElement = this.liCollections[this.activeIndex], this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]), this.updateValue(this.valueWithMinutes, e)) : this.updateValue(this.inputElement.value, e), this.hide(), S([this.inputWrapper.container], pE), this.isNavigate = !1, this.isPopupOpen() && e.stopPropagation(); break; case "open": this.show(e); break; case "escape": eS.setValue(this.objToString(this.value), this.inputElement, this.floatLabelType, this.showClearButton), this.previousState(this.value), this.hide(); break; case "close": this.hide(); break; default: this.isNavigate = !1 } }, t.prototype.onMouseClick = function (e) { var t = e.target, i = this.selectedElement = R(t, "." + uE); this.setSelection(i, e), i && i.classList.contains(uE) && (this.hide(), S([this.inputWrapper.container], pE)) }, t.prototype.closePopup = function (e, t) { var i = this; if (this.isPopupOpen() && this.popupWrapper) { var n = { popup: this.popupObj, event: t || null, cancel: !1, name: "open" }; x([document.body], "e-time-overflow"), this.trigger("close", n, function (t) { if (!t.cancel) { var n = { name: "FadeOut", duration: 50, delay: e || 0 }; i.popupObj.hide(new fw(n)), x([i.inputWrapper.container], ["e-icon-anim"]), P(i.inputElement, { "aria-expanded": "false" }), Kv.remove(document, "mousedown touchstart", i.documentClickHandler) } uw.isDevice && i.modal && (i.modal.style.display = "none", i.modal.outerHTML = "", i.modal = null), uw.isDevice && i.allowEdit && !i.readonly && i.inputElement.removeAttribute("readonly") }) } else uw.isDevice && this.allowEdit && !this.readonly && this.inputElement.removeAttribute("readonly") }, t.prototype.checkValueChange = function (e, t) { if (this.strictMode || this.validateState(this.valueWithMinutes)) if (t) { var i = this.getDateObject(new Date(this.timeCollections[this.activeIndex])); +this.prevDate != +i && this.valueProcess(e, i) } else (this.prevValue !== this.inputElement.value || d(this.checkDateValue(this.value))) && this.valueProcess(e, this.compareFormatChange(this.inputElement.value)); else null === this.checkDateValue(this.valueWithMinutes) && (this.initValue = this.valueWithMinutes = null), this.setProperties({ value: this.compareFormatChange(this.inputElement.value) }, !0), this.initValue = this.valueWithMinutes = this.compareFormatChange(this.inputElement.value), this.prevValue = this.inputElement.value, +this.prevDate != +this.value && this.changeEvent(e) }, t.prototype.onMouseOver = function (e) { var t = R(e.target, "." + uE); this.setHover(t, "e-hover") }, t.prototype.setHover = function (e, t) { this.enabled && this.isValidLI(e) && !e.classList.contains(t) && (this.removeHover(t), S([e], t), t === dE && e.setAttribute("aria-selected", "true")) }, t.prototype.setSelection = function (e, t) { this.isValidLI(e) && !e.classList.contains(hE) && (this.checkValue(e.getAttribute("data-value")), this.selectedElement = e, this.activeIndex = Array.prototype.slice.call(this.liCollections).indexOf(e), this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]), S([this.selectedElement], hE), this.selectedElement.setAttribute("aria-selected", "true"), this.checkValueChange(t, !0)) }, t.prototype.onMouseLeave = function () { this.removeHover("e-hover") }, t.prototype.scrollHandler = function () { "timepicker" === this.getModuleName() && uw.isDevice || this.hide() }, t.prototype.setMinMax = function (e, t) { d(this.checkDateValue(e)) && (this.initMin = this.getDateObject("12:00:00 AM")), d(this.checkDateValue(t)) && (this.initMax = this.getDateObject("11:59:59 PM")) }, t.prototype.validateMinMax = function (e, t, i) { var n = e instanceof Date ? e : this.getDateObject(e); return d(this.checkDateValue(n)) ? +this.createDateObj(this.getFormattedValue(this.initMin)) > +this.createDateObj(this.getFormattedValue(this.initMax)) && this.disableTimeIcon() : e = this.strictOperation(this.initMin, this.initMax, e, n), this.strictMode && (e = this.valueIsDisable(e) ? e : null), this.checkErrorState(e), e }, t.prototype.valueIsDisable = function (e) { if (this.disableItemCollection.length > 0) { if (this.disableItemCollection.length === this.timeCollections.length) return !1; for (var t = e instanceof Date ? this.objToString(e) : e, i = 0; i < this.disableItemCollection.length; i++)if (t === this.disableItemCollection[i]) return !1 } return !0 }, t.prototype.validateState = function (e) { if (!this.strictMode) { if (!this.valueIsDisable(e)) return !1; var t = this.setCurrentDate(this.getDateObject(e)), i = this.setCurrentDate(this.getDateObject(this.initMax)), n = this.setCurrentDate(this.getDateObject(this.initMin)); if (d(this.checkDateValue(t))) { if (+i < +n || "" !== this.inputElement.value) return !1 } else if (+t > +i || +t < +n) return !1 } return !0 }, t.prototype.strictOperation = function (e, t, i, n) { var r = this.createDateObj(this.getFormattedValue(t)), o = this.createDateObj(this.getFormattedValue(e)), s = this.createDateObj(this.getFormattedValue(n)); if (this.strictMode) { if (+o > +r) return this.disableTimeIcon(), this.initValue = this.getDateObject(r), eS.setValue(this.getValue(this.initValue), this.inputElement, this.floatLabelType, this.showClearButton), this.inputElement.value; if (+o >= +s) return this.getDateObject(o); if (+s >= +r || +o == +r) return this.getDateObject(r) } else if (+o > +r && (this.disableTimeIcon(), !isNaN(+this.createDateObj(i)))) return i; return i }, t.prototype.bindEvents = function () { Kv.add(this.inputWrapper.buttons[0], "mousedown", this.popupHandler, this), Kv.add(this.inputElement, "blur", this.inputBlurHandler, this), Kv.add(this.inputElement, "focus", this.inputFocusHandler, this), Kv.add(this.inputElement, "change", this.inputChangeHandler, this), this.showClearButton && this.inputWrapper.clearButton && Kv.add(this.inputWrapper.clearButton, "mousedown", this.clearHandler, this), this.formElement && Kv.add(this.formElement, "reset", this.formResetHandler, this), uw.isDevice || (this.keyConfigure = h(this.keyConfigure, this.keyConfigs), this.inputEvent = new cb(this.inputWrapper.container, { keyAction: this.inputHandler.bind(this), keyConfigs: this.keyConfigure, eventName: "keydown" }), this.showClearButton && this.inputElement && Kv.add(this.inputElement, "mousedown", this.mouseDownHandler, this)) }, t.prototype.formResetHandler = function () { if (!this.inputElement.disabled) { var e = this.inputElement.getAttribute("value"), t = this.checkDateValue(this.inputEleValue); "EJS-TIMEPICKER" === this.element.tagName && (t = null, e = "", this.inputElement.setAttribute("value", "")), this.setProperties({ value: t }, !0), this.prevDate = this.value, this.valueWithMinutes = this.value, this.initValue = this.value, this.inputElement && (eS.setValue(e, this.inputElement, this.floatLabelType, this.showClearButton), this.checkErrorState(e), this.prevValue = this.inputElement.value) } }, t.prototype.inputChangeHandler = function (e) { e.stopPropagation() }, t.prototype.unBindEvents = function () { this.inputWrapper && Kv.remove(this.inputWrapper.buttons[0], "mousedown touchstart", this.popupHandler), Kv.remove(this.inputElement, "blur", this.inputBlurHandler), Kv.remove(this.inputElement, "focus", this.inputFocusHandler), Kv.remove(this.inputElement, "change", this.inputChangeHandler), this.inputEvent && this.inputEvent.destroy(), Kv.remove(this.inputElement, "mousedown touchstart", this.mouseDownHandler), this.showClearButton && !d(this.inputWrapper.clearButton) && Kv.remove(this.inputWrapper.clearButton, "mousedown touchstart", this.clearHandler), this.formElement && Kv.remove(this.formElement, "reset", this.formResetHandler) }, t.prototype.bindClearEvent = function () { this.showClearButton && this.inputWrapper.clearButton && Kv.add(this.inputWrapper.clearButton, "mousedown", this.clearHandler, this) }, t.prototype.clearHandler = function (e) { e.preventDefault(), d(this.value) || this.clear(e), this.popupWrapper && (this.popupWrapper.scrollTop = 0) }, t.prototype.clear = function (e) { this.setProperties({ value: null }, !0), this.initValue = null, this.resetState(), this.changeEvent(e) }, t.prototype.setZIndex = function () { this.popupObj && (this.popupObj.zIndex = this.zIndex, this.popupObj.dataBind()) }, t.prototype.checkAttributes = function (e) { for (var t, i = 0, n = e ? d(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["step", "disabled", "readonly", "style", "name", "value", "min", "max", "placeholder"]; i < n.length; i++) { var r = n[i]; if (!d(this.inputElement.getAttribute(r))) switch (r) { case "disabled": if (d(this.timeOptions) || void 0 === this.timeOptions.enabled || e) { var o = "disabled" !== this.inputElement.getAttribute(r) && "" !== this.inputElement.getAttribute(r) && "true" !== this.inputElement.getAttribute(r); this.setProperties({ enabled: o }, !e) } break; case "style": this.inputStyle = this.inputElement.getAttribute(r); break; case "readonly": if (d(this.timeOptions) || void 0 === this.timeOptions.readonly || e) { var s = "readonly" === this.inputElement.getAttribute(r) || "" === this.inputElement.getAttribute(r) || "true" === this.inputElement.getAttribute(r); this.setProperties({ readonly: s }, !e) } break; case "name": this.inputElement.setAttribute("name", this.inputElement.getAttribute(r)); break; case "step": this.step = parseInt(this.inputElement.getAttribute(r), 10); break; case "placeholder": (d(this.timeOptions) || void 0 === this.timeOptions.placeholder || e) && this.setProperties({ placeholder: this.inputElement.getAttribute(r) }, !e); break; case "min": (d(this.timeOptions) || void 0 === this.timeOptions.min || e) && (t = new Date(this.inputElement.getAttribute(r)), d(this.checkDateValue(t)) || this.setProperties({ min: t }, !e)); break; case "max": (d(this.timeOptions) || void 0 === this.timeOptions.max || e) && (t = new Date(this.inputElement.getAttribute(r)), d(this.checkDateValue(t)) || this.setProperties({ max: t }, !e)); break; case "value": (d(this.timeOptions) || void 0 === this.timeOptions.value || e) && (t = new Date(this.inputElement.getAttribute(r)), d(this.checkDateValue(t)) || (this.initValue = t, this.updateInput(!1, this.initValue), this.setProperties({ value: t }, !e))) } } }, t.prototype.setCurrentDate = function (e) { return d(this.checkDateValue(e)) ? null : new Date(aE, sE, oE, e.getHours(), e.getMinutes(), e.getSeconds()) }, t.prototype.getTextFormat = function () { var e = 0; if ("a" === this.cldrTimeFormat().split(" ")[0] || 0 === this.cldrTimeFormat().indexOf("a")) e = 1; else if (this.cldrTimeFormat().indexOf("a") < 0) for (var t = this.cldrTimeFormat().split(" "), i = 0; i < t.length; i++)if (t[i].toLowerCase().indexOf("h") >= 0) { e = i; break } return e }, t.prototype.updateValue = function (e, t) { var i; if (this.isNullOrEmpty(e)) this.resetState(); else if (i = this.checkValue(e), this.strictMode) { var n = null === i && e.trim().length > 0 ? this.previousState(this.prevDate) : this.inputElement.value; eS.setValue(n, this.inputElement, this.floatLabelType, this.showClearButton) } this.checkValueChange(t, "string" != typeof e) }, t.prototype.previousState = function (e) { for (var t = this.getDateObject(e), i = 0; i < this.timeCollections.length; i++)if (+t === this.timeCollections[i]) { this.activeIndex = i, this.selectedElement = this.liCollections[i], this.valueWithMinutes = new Date(this.timeCollections[i]); break } return this.prevValue }, t.prototype.resetState = function () { this.removeSelection(), eS.setValue("", this.inputElement, this.floatLabelType, !1), this.valueWithMinutes = this.activeIndex = null, this.strictMode || this.checkErrorState(null) }, t.prototype.objToString = function (e) { return d(this.checkDateValue(e)) ? null : this.globalize.formatDate(e, { format: this.cldrTimeFormat(), type: "time" }) }, t.prototype.checkValue = function (e) { if (!this.isNullOrEmpty(e)) { var t = e instanceof Date ? e : this.getDateObject(e); return this.validateValue(t, e) } return this.resetState(), this.valueWithMinutes = null }, t.prototype.validateValue = function (e, t) { var i, n = this.validateMinMax(t, this.min, this.max), r = this.createDateObj(n); if (this.getFormattedValue(r) !== this.getFormattedValue(this.value) ? (this.valueWithMinutes = d(r) ? null : r, i = this.objToString(this.valueWithMinutes)) : (this.strictMode && (e = r), this.valueWithMinutes = this.checkDateValue(e), i = this.objToString(this.valueWithMinutes)), !this.strictMode && d(i)) { var o = n.trim().length > 0 ? n : ""; eS.setValue(o, this.inputElement, this.floatLabelType, this.showClearButton) } else eS.setValue(i, this.inputElement, this.floatLabelType, this.showClearButton); return i }, t.prototype.findNextElement = function (e) { var t = this.inputElement.value, i = d(this.valueWithMinutes) ? this.createDateObj(t) : this.getDateObject(this.valueWithMinutes), n = null, r = this.liCollections.length; if (d(this.checkDateValue(i)) && d(this.activeIndex)) { o = this.validLiElement(0, "down" !== e.action); this.activeIndex = o, this.selectedElement = this.liCollections[o], this.elementValue(new Date(this.timeCollections[o])) } else { if ("home" === e.action) { var o = this.validLiElement(0); n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o } else if ("end" === e.action) { var o = this.validLiElement(this.timeCollections.length - 1, !0); n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o } else if ("down" === e.action) for (var s = 0; s < r; s++) { if (+i < this.timeCollections[s]) { o = this.validLiElement(s); n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o; break } if (s === r - 1) { o = this.validLiElement(0); n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o; break } } else for (s = r - 1; s >= 0; s--) { if (+i > this.timeCollections[s]) { o = this.validLiElement(s, !0); n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o; break } if (0 === s) { o = this.validLiElement(r - 1); n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o; break } } this.selectedElement = this.liCollections[this.activeIndex], this.elementValue(d(n) ? null : new Date(n)) } }, t.prototype.elementValue = function (e) { d(this.checkDateValue(e)) || this.checkValue(e) }, t.prototype.validLiElement = function (e, t) { var i = null, n = d(this.popupWrapper) ? this.liCollections : this.popupWrapper.querySelectorAll("." + uE), r = !0; if (n.length) if (t) for (var o = e; o >= 0; o--) { if (!n[o].classList.contains(cE)) { i = o; break } 0 === o && r && (e = o = n.length, r = !1) } else for (o = e; o <= n.length - 1; o++) { if (!n[o].classList.contains(cE)) { i = o; break } o === n.length - 1 && r && (e = o = -1, r = !1) } return i }, t.prototype.keyHandler = function (e) { if (!(d(this.step) || this.step <= 0 || this.inputWrapper.buttons[0].classList.contains(cE))) { var t = this.timeCollections.length; if (d(this.getActiveElement()) || 0 === this.getActiveElement().length) if (this.liCollections.length > 0) if (d(this.value) && d(this.activeIndex)) { var i = this.validLiElement(0, "down" !== e.action); this.activeIndex = i, this.selectedElement = this.liCollections[i], this.elementValue(new Date(this.timeCollections[i])) } else this.findNextElement(e); else this.findNextElement(e); else { var n = void 0; if (e.keyCode >= 37 && e.keyCode <= 40) { i = 40 === e.keyCode || 39 === e.keyCode ? ++this.activeIndex : --this.activeIndex; this.activeIndex = i = this.activeIndex === t ? 0 : this.activeIndex, this.activeIndex = i = this.activeIndex < 0 ? t - 1 : this.activeIndex, this.activeIndex = i = this.validLiElement(this.activeIndex, 40 !== e.keyCode && 39 !== e.keyCode), n = d(this.timeCollections[i]) ? this.timeCollections[0] : this.timeCollections[i] } else if ("home" === e.action) { i = this.validLiElement(0); this.activeIndex = i, n = this.timeCollections[i] } else if ("end" === e.action) { i = this.validLiElement(t - 1, !0); this.activeIndex = i, n = this.timeCollections[i] } this.selectedElement = this.liCollections[this.activeIndex], this.elementValue(new Date(n)) } this.isNavigate = !0, this.setHover(this.selectedElement, dE), this.setActiveDescendant(), this.selectInputText(), !this.isPopupOpen() || null === this.selectedElement || e && "click" === e.type || this.setScrollPosition() } }, t.prototype.getCultureTimeObject = function (e, t) { return n("main." + t + ".dates.calendars.gregorian.timeFormats.short", e) }, t.prototype.getCultureDateObject = function (e, t) { return n("main." + t + ".dates.calendars.gregorian.dateFormats.short", e) }, t.prototype.wireListEvents = function () { Kv.add(this.listWrapper, "click", this.onMouseClick, this), uw.isDevice || (Kv.add(this.listWrapper, "mouseover", this.onMouseOver, this), Kv.add(this.listWrapper, "mouseout", this.onMouseLeave, this)) }, t.prototype.unWireListEvents = function () { this.listWrapper && (Kv.remove(this.listWrapper, "click", this.onMouseClick), uw.isDevice || (Kv.remove(this.listWrapper, "mouseover", this.onMouseOver), Kv.remove(this.listWrapper, "mouseout", this.onMouseLeave))) }, t.prototype.valueProcess = function (e, t) { var i = d(this.checkDateValue(t)) ? null : t; +this.prevDate != +i && (this.initValue = i, this.changeEvent(e)) }, t.prototype.changeEvent = function (e) { this.addSelection(), this.updateInput(!0, this.initValue); var t = { event: e || null, value: this.value, text: this.inputElement.value, isInteracted: !d(e), element: this.element }; t.value = this.valueWithMinutes || this.getDateObject(this.inputElement.value), this.prevDate = this.valueWithMinutes || this.getDateObject(this.inputElement.value), this.trigger("change", t), this.invalidValueString = null, this.checkErrorState(this.value) }, t.prototype.updateInput = function (e, t) { e && (this.prevValue = this.getValue(t)), this.prevDate = this.valueWithMinutes = t, "number" == typeof t && (this.value && +new Date(+this.value).setMilliseconds(0)) === +t || this.setProperties({ value: t }, !0), !this.strictMode && d(this.value) && this.invalidValueString && (this.checkErrorState(this.invalidValueString), eS.setValue(this.invalidValueString, this.inputElement, this.floatLabelType, this.showClearButton)), this.clearIconState() }, t.prototype.setActiveDescendant = function () { d(this.selectedElement) ? P(this.inputElement, { "aria-activedescendant": "null" }) : P(this.inputElement, { "aria-activedescendant": this.selectedElement.getAttribute("id") }) }, t.prototype.removeSelection = function () { if (this.removeHover("e-hover"), !d(this.popupWrapper)) { var e = this.popupWrapper.querySelectorAll("." + hE); e.length && (x(e, hE), e[0].removeAttribute("aria-selected")) } }, t.prototype.removeHover = function (e) { var t = this.getHoverItem(e); t && t.length && (x(t, e), e === dE && t[0].removeAttribute("aria-selected")) }, t.prototype.getHoverItem = function (e) { var t; return d(this.popupWrapper) || (t = this.popupWrapper.querySelectorAll("." + e)), t }, t.prototype.setActiveClass = function () { if (!d(this.popupWrapper)) { var e = this.popupWrapper.querySelectorAll("." + uE); if (e.length) for (var t = 0; t < e.length; t++)if (this.timeCollections[t] === +this.getDateObject(this.valueWithMinutes)) { e[t].setAttribute("aria-selected", "true"), this.selectedElement = e[t], this.activeIndex = t; break } } }, t.prototype.addSelection = function () { this.selectedElement = null, this.removeSelection(), this.setActiveClass(), d(this.selectedElement) || (S([this.selectedElement], hE), this.selectedElement.setAttribute("aria-selected", "true")) }, t.prototype.isValidLI = function (e) { return e && e.classList.contains(uE) && !e.classList.contains(cE) }, t.prototype.createDateObj = function (e) { var t = this.globalize.formatDate(new Date, { skeleton: "short", type: "date" }), i = null; return "string" == typeof e ? e.toUpperCase().indexOf("AM") > -1 || e.toUpperCase().indexOf("PM") > -1 ? (t = this.defaultCulture.formatDate(new Date, { skeleton: "short", type: "date" }), d(i = isNaN(+new Date(t + " " + e)) ? null : new Date(new Date(t + " " + e).setMilliseconds(0))) && (i = this.TimeParse(t, e))) : i = this.TimeParse(t, e) : e instanceof Date && (i = e), i }, t.prototype.TimeParse = function (e, t) { var i; return i = this.globalize.parseDate(e + " " + t, { format: this.cldrDateFormat() + " " + this.cldrTimeFormat(), type: "datetime" }), i = d(i) ? this.globalize.parseDate(e + " " + t, { format: this.cldrDateFormat() + " " + this.dateToNumeric(), type: "datetime" }) : i, i = d(i) ? i : new Date(i.setMilliseconds(0)) }, t.prototype.createListItems = function () { var e = this; this.listWrapper = this.createElement("div", { className: "e-content", attrs: { tabindex: "0" } }); var t, i, n = 6e4 * this.step, r = []; for (this.timeCollections = [], this.disableItemCollection = [], t = +this.getDateObject(this.initMin).setMilliseconds(0), i = +this.getDateObject(this.initMax).setMilliseconds(0); i >= t;)this.timeCollections.push(t), r.push(this.globalize.formatDate(new Date(t), { format: this.cldrTimeFormat(), type: "time" })), t += n; var o = { itemCreated: function (t) { var i = { element: t.item, text: t.text, value: e.getDateObject(t.text), isDisabled: !1 }; e.trigger("itemRender", i, function (t) { t.isDisabled && t.element.classList.add(cE), t.element.classList.contains(cE) && e.disableItemCollection.push(t.element.getAttribute("data-value")) }) } }; this.listTag = hT.createList(this.createElement, r, o, !0), P(this.listTag, { role: "listbox", "aria-hidden": "false", id: this.element.id + "_options" }), E([this.listTag], this.listWrapper) }, t.prototype.documentClickHandler = function (e) { "touchstart" !== e.type && e.preventDefault(); var t = e.target; R(t, "#" + this.popupObj.element.id) || t === this.inputElement || t === (this.inputWrapper && this.inputWrapper.buttons[0]) || t === (this.inputWrapper && this.inputWrapper.clearButton) || t === (this.inputWrapper && this.inputWrapper.container) ? t !== this.inputElement && (uw.isDevice || (this.isPreventBlur = (uw.isIE || "edge" === uw.info.name) && document.activeElement === this.inputElement, e.preventDefault())) : this.isPopupOpen() && (this.hide(), this.focusOut()) }, t.prototype.setEnableRtl = function () { eS.setEnableRtl(this.enableRtl, [this.inputWrapper.container]), this.popupObj && (this.popupObj.enableRtl = this.enableRtl, this.popupObj.dataBind()) }, t.prototype.setEnable = function () { eS.setEnabled(this.enabled, this.inputElement, this.floatLabelType), this.enabled ? (x([this.inputWrapper.container], cE), P(this.inputElement, { "aria-disabled": "false" }), this.inputElement.setAttribute("tabindex", this.tabIndex)) : (this.hide(), S([this.inputWrapper.container], cE), P(this.inputElement, { "aria-disabled": "true" }), this.inputElement.tabIndex = -1) }, t.prototype.getProperty = function (e, t) { "min" === t ? (this.initMin = this.checkDateValue(new Date(this.checkInValue(e.min))), this.setProperties({ min: this.initMin }, !0)) : (this.initMax = this.checkDateValue(new Date(this.checkInValue(e.max))), this.setProperties({ max: this.initMax }, !0)), "" === this.inputElement.value ? this.validateMinMax(this.value, this.min, this.max) : this.checkValue(this.inputElement.value), this.checkValueChange(null, !1) }, t.prototype.inputBlurHandler = function (e) { if (this.isPreventBlur && this.isPopupOpen()) this.inputElement.focus(); else { this.closePopup(0, e), x([this.inputWrapper.container], [pE]); var t = { model: this }; this.trigger("blur", t), this.getText() !== this.inputElement.value ? this.updateValue(this.inputElement.value, e) : 0 === this.inputElement.value.trim().length && this.resetState(), this.cursorDetails = null, this.isNavigate = !1, "" === this.inputElement.value && (this.invalidValueString = null) } }, t.prototype.focusOut = function () { if (document.activeElement === this.inputElement) { this.inputElement.blur(); var e = { model: this }; this.trigger("blur", e) } }, t.prototype.isPopupOpen = function () { return !(!this.popupWrapper || !this.popupWrapper.classList.contains("" + lE)) }, t.prototype.inputFocusHandler = function () { var e = { model: this }; this.readonly || uw.isDevice || this.selectInputText(), this.trigger("focus", e), this.clearIconState() }, t.prototype.focusIn = function () { document.activeElement !== this.inputElement && this.enabled && this.inputElement.focus() }, t.prototype.hide = function () { this.closePopup(100, null), this.clearIconState() }, t.prototype.show = function (e) { var t = this; if (!(this.enabled && this.readonly || !this.enabled || this.popupWrapper)) { this.popupCreation(), uw.isDevice && this.listWrapper && (this.modal = this.createElement("div"), this.modal.className = lE + " e-time-modal", document.body.className += " e-time-overflow", document.body.appendChild(this.modal)), this.openPopupEventArgs = { popup: this.popupObj || null, cancel: !1, event: e || null, name: "open", appendTo: document.body }; var i = this.openPopupEventArgs; this.trigger("open", i, function (e) { if (t.openPopupEventArgs = e, t.openPopupEventArgs.cancel || t.inputWrapper.buttons[0].classList.contains(cE)) t.popupObj.destroy(), t.popupWrapper = t.listTag = void 0, t.liCollections = t.timeCollections = t.disableItemCollection = [], t.popupObj = null; else { t.openPopupEventArgs.appendTo.appendChild(t.popupWrapper), t.popupAlignment(t.openPopupEventArgs), t.setScrollPosition(), uw.isDevice || t.inputElement.focus(); var i = { name: "FadeIn", duration: 50 }; t.popupObj.refreshPosition(t.anchor), 1e3 === t.zIndex ? t.popupObj.show(new fw(i), t.element) : t.popupObj.show(new fw(i), null), t.setActiveDescendant(), P(t.inputElement, { "aria-expanded": "true" }), S([t.inputWrapper.container], pE), Kv.add(document, "mousedown touchstart", t.documentClickHandler, t) } }) } }, t.prototype.formatValues = function (e) { var t; return "number" == typeof e ? t = v(e) : "string" == typeof e && (t = e.match(/px|%|em/) ? e : isNaN(parseInt(e, 10)) ? e : v(e)), t }, t.prototype.popupAlignment = function (e) { if (e.popup.position.X = this.formatValues(e.popup.position.X), e.popup.position.Y = this.formatValues(e.popup.position.Y), isNaN(parseFloat(e.popup.position.X)) && isNaN(parseFloat(e.popup.position.Y)) || (this.popupObj.relateTo = this.anchor = document.body, this.popupObj.targetType = "container"), isNaN(parseFloat(e.popup.position.X)) || (this.popupObj.offsetX = parseFloat(e.popup.position.X)), isNaN(parseFloat(e.popup.position.Y)) || (this.popupObj.offsetY = parseFloat(e.popup.position.Y)), uw.isDevice) "center" === e.popup.position.X && "center" === e.popup.position.Y && (this.popupObj.relateTo = this.anchor = document.body, this.popupObj.offsetY = 0, this.popupObj.targetType = "container", this.popupObj.collision = { X: "fit", Y: "fit" }); else { switch (e.popup.position.X) { case "left": break; case "right": e.popup.offsetX = this.containerStyle.width; break; case "center": e.popup.offsetX = -this.containerStyle.width / 2 }switch (e.popup.position.Y) { case "top": case "bottom": break; case "center": e.popup.offsetY = -this.containerStyle.height / 2 }"center" === e.popup.position.X && "center" === e.popup.position.Y && (this.popupObj.relateTo = this.inputWrapper.container, this.anchor = this.inputElement, this.popupObj.targetType = "relative") } }, t.prototype.getPersistData = function () { return this.addOnPersist(["value"]) }, t.prototype.getModuleName = function () { return "timepicker" }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { var r = n[i]; switch (r) { case "placeholder": eS.setPlaceholder(e.placeholder, this.inputElement), this.inputElement.setAttribute("aria-placeholder", e.placeholder); break; case "readonly": eS.setReadonly(this.readonly, this.inputElement, this.floatLabelType), this.readonly && this.hide(), this.setTimeAllowEdit(); break; case "enabled": this.setProperties({ enabled: e.enabled }, !0), this.setEnable(); break; case "allowEdit": this.setTimeAllowEdit(); break; case "enableRtl": this.setProperties({ enableRtl: e.enableRtl }, !0), this.setEnableRtl(); break; case "cssClass": eS.setCssClass(e.cssClass, [this.inputWrapper.container], t.cssClass), this.popupWrapper && eS.setCssClass(e.cssClass, [this.popupWrapper], t.cssClass); break; case "zIndex": this.setProperties({ zIndex: e.zIndex }, !0), this.setZIndex(); break; case "htmlAttributes": this.updateHtmlAttributeToElement(), this.updateHtmlAttributeToWrapper(), this.checkAttributes(!0); break; case "min": case "max": this.getProperty(e, r); break; case "showClearButton": eS.setClearButton(this.showClearButton, this.inputElement, this.inputWrapper), this.bindClearEvent(); break; case "locale": this.setProperties({ locale: e.locale }, !0), this.globalize = new Gw(this.locale), this.l10n.setLocale(this.locale), this.updatePlaceHolder(), this.setValue(this.value); break; case "width": z(this.inputWrapper.container, { width: this.setWidth(e.width) }), this.containerStyle = this.inputWrapper.container.getBoundingClientRect(); break; case "format": this.setProperties({ format: e.format }, !0), this.checkTimeFormat(), this.setValue(this.value); break; case "value": this.invalidValueString = null, this.checkInvalidValue(e.value), e.value = this.value, this.invalidValueString ? (eS.setValue(this.invalidValueString, this.inputElement, this.floatLabelType, this.showClearButton), this.checkErrorState(this.invalidValueString)) : ("string" == typeof e.value ? (this.setProperties({ value: this.checkDateValue(new Date(e.value)) }, !0), e.value = this.value) : (e.value && +new Date(+e.value).setMilliseconds(0)) !== +this.value && (e.value = this.checkDateValue(new Date("" + e.value))), this.initValue = e.value, e.value = this.compareFormatChange(this.checkValue(e.value))), this.checkValueChange(null, !1); break; case "floatLabelType": this.floatLabelType = e.floatLabelType, eS.removeFloating(this.inputWrapper), eS.addFloating(this.inputElement, this.floatLabelType, this.placeholder); break; case "strictMode": this.invalidValueString = null, e.strictMode && this.checkErrorState(null), this.setProperties({ strictMode: e.strictMode }, !0), this.checkValue(this.inputElement.value), this.checkValueChange(null, !1); break; case "scrollTo": this.checkDateValue(new Date(this.checkInValue(e.scrollTo))) ? (this.popupWrapper && this.setScrollTo(), this.setProperties({ scrollTo: e.scrollTo }, !0)) : this.setProperties({ scrollTo: null }, !0) } } }, t.prototype.checkInValue = function (e) { return e instanceof Date ? e.toUTCString() : "" + e }, rE([Y(null)], t.prototype, "width", void 0), rE([Y(null)], t.prototype, "cssClass", void 0), rE([Y(!1)], t.prototype, "strictMode", void 0), rE([Y(null)], t.prototype, "keyConfigs", void 0), rE([Y(null)], t.prototype, "format", void 0), rE([Y(!0)], t.prototype, "enabled", void 0), rE([Y(!1)], t.prototype, "readonly", void 0), rE([Y({})], t.prototype, "htmlAttributes", void 0), rE([Y("Never")], t.prototype, "floatLabelType", void 0), rE([Y(null)], t.prototype, "placeholder", void 0), rE([Y(1e3)], t.prototype, "zIndex", void 0), rE([Y(!1)], t.prototype, "enablePersistence", void 0), rE([Y(!0)], t.prototype, "showClearButton", void 0), rE([Y(30)], t.prototype, "step", void 0), rE([Y(null)], t.prototype, "scrollTo", void 0), rE([Y(null)], t.prototype, "value", void 0), rE([Y(null)], t.prototype, "min", void 0), rE([Y(null)], t.prototype, "max", void 0), rE([Y(!0)], t.prototype, "allowEdit", void 0), rE([X()], t.prototype, "change", void 0), rE([X()], t.prototype, "created", void 0), rE([X()], t.prototype, "destroyed", void 0), rE([X()], t.prototype, "open", void 0), rE([X()], t.prototype, "itemRender", void 0), rE([X()], t.prototype, "close", void 0), rE([X()], t.prototype, "blur", void 0), rE([X()], t.prototype, "focus", void 0), t = rE([J], t) }(Kw), fE = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), yE = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, vE = (new Date).getDate(), wE = (new Date).getMonth(), bE = (new Date).getFullYear(), CE = (new Date).getHours(), LE = (new Date).getMinutes(), ME = (new Date).getSeconds(), SE = (new Date).getMilliseconds(), xE = "e-datetimepicker", TE = "e-datetimepopup-wrapper", DE = "e-input-focus", AE = "e-active", EE = hA.li, jE = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.valueWithMinutes = null, n.previousDateTime = null, n.dateTimeOptions = t, n } return fE(t, e), t.prototype.focusHandler = function () { S([this.inputWrapper.container], DE) }, t.prototype.focusIn = function () { e.prototype.focusIn.call(this) }, t.prototype.focusOut = function () { document.activeElement === this.inputElement && (this.inputElement.blur(), x([this.inputWrapper.container], [DE])) }, t.prototype.blurHandler = function (e) { if (this.isTimePopupOpen() && this.isPreventBlur) this.inputElement.focus(); else { x([this.inputWrapper.container], DE); var t = { model: this }; this.isTimePopupOpen() && this.hide(e), this.trigger("blur", t) } }, t.prototype.destroy = function () { this.popupObject && this.popupObject.element.classList.contains("e-popup") && (this.dateTimeWrapper = void 0, this.liCollections = this.timeCollections = [], d(this.rippleFn) || this.rippleFn()); var t = { "aria-live": "assertive", "aria-atomic": "true", "aria-invalid": "false", "aria-haspopup": "true", "aria-activedescendant": "null", autocorrect: "off", autocapitalize: "off", spellcheck: "false", "aria-owns": this.element.id + "_options", "aria-expanded": "false", role: "combobox", autocomplete: "off" }; this.inputElement && (eS.removeAttributes(t, this.inputElement), this.inputElement.removeAttribute("aria-placeholder")), this.isCalendar() && (this.popupWrapper && I(this.popupWrapper), this.popupObject = this.popupWrapper = null, this.keyboardHandler.destroy()), this.unBindInputEvents(), e.prototype.destroy.call(this) }, t.prototype.render = function () { this.timekeyConfigure = { enter: "enter", escape: "escape", end: "end", tab: "tab", home: "home", down: "downarrow", up: "uparrow", left: "leftarrow", right: "rightarrow", open: "alt+downarrow", close: "alt+uparrow" }, this.valueWithMinutes = null, this.previousDateTime = null, this.isPreventBlur = !1, this.cloneElement = this.element.cloneNode(!0), this.dateTimeFormat = this.cldrDateTimeFormat(), this.initValue = this.value, e.prototype.updateHtmlAttributeToElement.call(this), this.checkAttributes(!1); var t = { placeholder: this.placeholder }; this.l10n = new pb("datetimepicker", t, this.locale), this.setProperties({ placeholder: this.placeholder || this.l10n.getConstant("placeholder") }, !0), e.prototype.render.call(this), this.createInputElement(), e.prototype.updateHtmlAttributeToWrapper.call(this), this.bindInputEvents(), this.setValue(), this.previousDateTime = this.value && new Date(+this.value), "EJS-DATETIMEPICKER" === this.element.tagName && (this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.removeAttribute("tabindex"), this.enabled || (this.inputElement.tabIndex = -1)) }, t.prototype.setValue = function () { if (this.initValue = this.validateMinMaxRange(this.value), !this.strictMode && this.isDateObject(this.initValue)) { var t = this.validateMinMaxRange(this.initValue); eS.setValue(this.getFormattedValue(t), this.inputElement, this.floatLabelType, this.showClearButton), this.setProperties({ value: t }, !0) } else d(this.value) && (this.initValue = null, this.setProperties({ value: null }, !0)); this.valueWithMinutes = this.value, e.prototype.updateInput.call(this) }, t.prototype.validateMinMaxRange = function (e) { var t = e; return this.isDateObject(e) ? t = this.validateValue(e) : +this.min > +this.max && this.disablePopupButton(!0), this.checkValidState(t), t }, t.prototype.checkValidState = function (e) { this.isValidState = !0, this.strictMode || (+e > +this.max || +e < +this.min) && (this.isValidState = !1), this.checkErrorState() }, t.prototype.checkErrorState = function () { this.isValidState ? x([this.inputWrapper.container], "e-error") : S([this.inputWrapper.container], "e-error"), P(this.inputElement, { "aria-invalid": this.isValidState ? "false" : "true" }) }, t.prototype.validateValue = function (e) { var t = e; return this.strictMode ? +this.min > +this.max ? (this.disablePopupButton(!0), t = this.max) : +e < +this.min ? t = this.min : +e > +this.max && (t = this.max) : +this.min > +this.max && (this.disablePopupButton(!0), t = e), t }, t.prototype.disablePopupButton = function (e) { e ? (S([this.inputWrapper.buttons[0], this.timeIcon], "e-disabled"), this.hide()) : x([this.inputWrapper.buttons[0], this.timeIcon], "e-disabled") }, t.prototype.getFormattedValue = function (e) { var t; return d(e) ? null : (t = "Gregorian" === this.calendarMode ? { format: this.cldrDateTimeFormat(), type: "dateTime", skeleton: "yMd" } : { format: this.cldrDateTimeFormat(), type: "dateTime", skeleton: "yMd", calendar: "islamic" }, this.globalize.formatDate(e, t)) }, t.prototype.isDateObject = function (e) { return !d(e) && !isNaN(+e) }, t.prototype.createInputElement = function () { x([this.inputElement], "e-datepicker"), x([this.inputWrapper.container], "e-date-wrapper"), S([this.inputWrapper.container], "e-datetime-wrapper"), S([this.inputElement], xE), this.renderTimeIcon() }, t.prototype.renderTimeIcon = function () { this.timeIcon = eS.appendSpan("e-input-group-icon e-time-icon e-icons", this.inputWrapper.container) }, t.prototype.bindInputEvents = function () { Kv.add(this.timeIcon, "mousedown", this.timeHandler, this), Kv.add(this.inputWrapper.buttons[0], "mousedown", this.dateHandler, this), Kv.add(this.inputElement, "blur", this.blurHandler, this), Kv.add(this.inputElement, "focus", this.focusHandler, this), this.defaultKeyConfigs = h(this.defaultKeyConfigs, this.keyConfigs), this.keyboardHandler = new cb(this.inputElement, { eventName: "keydown", keyAction: this.inputKeyAction.bind(this), keyConfigs: this.defaultKeyConfigs }) }, t.prototype.unBindInputEvents = function () { Kv.remove(this.timeIcon, "mousedown touchstart", this.timeHandler), Kv.remove(this.inputWrapper.buttons[0], "mousedown touchstart", this.dateHandler), this.inputElement && (Kv.remove(this.inputElement, "blur", this.blurHandler), Kv.remove(this.inputElement, "focus", this.focusHandler)), this.keyboardHandler && this.keyboardHandler.destroy() }, t.prototype.cldrTimeFormat = function () { return this.isNullOrEmpty(this.timeFormat) ? "en" === this.locale || "en-US" === this.locale ? n("timeFormats.short", ae()) : this.getCultureTimeObject(_w, "" + this.locale) : this.timeFormat }, t.prototype.cldrDateTimeFormat = function () { var e = new Gw(this.locale).getDatePattern({ skeleton: "yMd" }); return this.isNullOrEmpty(this.formatString) ? e + " " + this.getCldrFormat("time") : this.formatString }, t.prototype.getCldrFormat = function (e) { return "en" === this.locale || "en-US" === this.locale ? n("timeFormats.short", ae()) : this.getCultureTimeObject(_w, "" + this.locale) }, t.prototype.isNullOrEmpty = function (e) { return !!(d(e) || "string" == typeof e && "" === e.trim()) }, t.prototype.getCultureTimeObject = function (e, t) { return "Gregorian" === this.calendarMode ? n("main." + this.locale + ".dates.calendars.gregorian.timeFormats.short", e) : n("main." + this.locale + ".dates.calendars.islamic.timeFormats.short", e) }, t.prototype.timeHandler = function (t) { uw.isDevice && this.inputElement.setAttribute("readonly", ""), t.currentTarget === this.timeIcon && t.preventDefault(), this.enabled && !this.readonly && (this.isDatePopupOpen() && e.prototype.hide.call(this, t), this.isTimePopupOpen() ? this.closePopup(t) : (this.inputElement.focus(), this.popupCreation("time", t), S([this.inputWrapper.container], [DE]))) }, t.prototype.dateHandler = function (e) { e.currentTarget === this.inputWrapper.buttons[0] && e.preventDefault(), this.enabled && !this.readonly && (this.isTimePopupOpen() && this.closePopup(e), d(this.popupWrapper) || this.popupCreation("date", e)) }, t.prototype.show = function (t, i) { this.enabled && this.readonly || !this.enabled || ("time" !== t || this.dateTimeWrapper ? this.popupObj || (this.isTimePopupOpen() && this.hide(i), e.prototype.show.call(this), this.popupCreation("date", i)) : (this.isDatePopupOpen() && this.hide(i), this.popupCreation("time", i))) }, t.prototype.toggle = function (t) { this.isDatePopupOpen() ? (e.prototype.hide.call(this, t), this.show("time", null)) : this.isTimePopupOpen() ? (this.hide(t), e.prototype.show.call(this, null, t), this.popupCreation("date", null)) : this.show(null, t) }, t.prototype.listCreation = function () { var e; e = "Gregorian" === this.calendarMode ? this.globalize.parseDate(this.inputElement.value, { format: this.cldrDateTimeFormat(), type: "datetime" }) : this.globalize.parseDate(this.inputElement.value, { format: this.cldrDateTimeFormat(), type: "datetime", calendar: "islamic" }); var t = d(this.value) ? "" !== this.inputElement.value ? e : new Date : this.value; this.valueWithMinutes = t, this.listWrapper = M("div", { className: "e-content", attrs: { tabindex: "0" } }); var i = this.startTime(t), n = this.endTime(t), r = dA.createListItems(this.createElement, i, n, this.globalize, this.cldrTimeFormat(), this.step); this.timeCollections = r.collection, this.listTag = r.list, P(this.listTag, { role: "listbox", "aria-hidden": "false", id: this.element.id + "_options" }), E([r.list], this.listWrapper), this.wireTimeListEvents(); var o = { duration: 300, selector: "." + EE }; this.rippleFn = ee(this.listWrapper, o), this.liCollections = this.listWrapper.querySelectorAll("." + EE) }, t.prototype.popupCreation = function (e, t) { uw.isDevice && this.element.setAttribute("readonly", "readonly"), "date" === e ? !this.readonly && this.popupWrapper && (S([this.popupWrapper], TE), P(this.popupWrapper, { id: this.element.id + "_datepopup" })) : this.readonly || (this.dateTimeWrapper = M("div", { className: xE + " e-popup", attrs: { id: this.element.id + "_timepopup", style: "visibility:hidden ; display:block" } }), d(this.cssClass) || (this.dateTimeWrapper.className += " " + this.cssClass), !d(this.step) && this.step > 0 && (this.listCreation(), E([this.listWrapper], this.dateTimeWrapper)), document.body.appendChild(this.dateTimeWrapper), this.addTimeSelection(), this.renderPopup(), this.setTimeScrollPosition(), this.openPopup(t), this.popupObject.refreshPosition(this.inputElement)) }, t.prototype.openPopup = function (e) { var t = this; this.preventArgs = { cancel: !1, popup: this.popupObject, event: e || null }; var i = this.preventArgs; this.trigger("open", i, function (e) { if (t.preventArgs = e, !t.preventArgs.cancel && !t.readonly) { var i = { name: "FadeIn", duration: 100 }; 1e3 === t.zIndex ? t.popupObject.show(new fw(i), t.element) : t.popupObject.show(new fw(i), null), S([t.inputWrapper.container], ["e-icon-anim"]), P(t.inputElement, { "aria-expanded": "true" }), Kv.add(document, "mousedown touchstart", t.documentClickHandler, t) } }) }, t.prototype.documentClickHandler = function (e) { "touchstart" !== e.type && e.preventDefault(); var t = e.target; R(t, "#" + (this.popupObject && this.popupObject.element.id)) || t === this.inputElement || t === this.timeIcon || t === this.inputWrapper.container ? t !== this.inputElement && (uw.isDevice || (this.isPreventBlur = document.activeElement === this.inputElement && (uw.isIE || "edge" === uw.info.name) && t === this.popupObject.element, e.preventDefault())) : this.isTimePopupOpen() && (this.hide(e), this.focusOut()) }, t.prototype.isTimePopupOpen = function () { return !(!this.dateTimeWrapper || !this.dateTimeWrapper.classList.contains("" + xE)) }, t.prototype.isDatePopupOpen = function () { return !(!this.popupWrapper || !this.popupWrapper.classList.contains("" + TE)) }, t.prototype.renderPopup = function () { var e = this; this.containerStyle = this.inputWrapper.container.getBoundingClientRect(), uw.isDevice && (this.timeModal = M("div"), this.timeModal.className = xE + " e-time-modal", document.body.className += " e-time-overflow", this.timeModal.style.display = "block", document.body.appendChild(this.timeModal)); this.popupObject = new yM(this.dateTimeWrapper, { width: this.setPopupWidth(), zIndex: this.zIndex, targetType: "container", collision: uw.isDevice ? { X: "fit", Y: "fit" } : { X: "flip", Y: "flip" }, relateTo: uw.isDevice ? document.body : this.inputWrapper.container, position: uw.isDevice ? { X: "center", Y: "center" } : { X: "left", Y: "bottom" }, enableRtl: this.enableRtl, offsetY: 4, open: function () { e.dateTimeWrapper.style.visibility = "visible", S([e.timeIcon], AE), uw.isDevice || (e.timekeyConfigure = h(e.timekeyConfigure, e.keyConfigs), e.inputEvent = new cb(e.inputWrapper.container, { keyAction: e.TimeKeyActionHandle.bind(e), keyConfigs: e.timekeyConfigure, eventName: "keydown" })) }, close: function () { x([e.timeIcon], AE), e.unWireTimeListEvents(), e.inputElement.setAttribute("aria-activedescendant", "null"), k(e.popupObject.element), e.popupObject.destroy(), e.dateTimeWrapper.innerHTML = "", e.listWrapper = e.dateTimeWrapper = void 0, e.inputEvent && e.inputEvent.destroy() } }), this.popupObject.element.style.maxHeight = "250px" }, t.prototype.setDimension = function (e) { return e = "number" == typeof e ? v(e) : "string" == typeof e ? e : "100%" }, t.prototype.setPopupWidth = function () { var e = this.setDimension(this.width); if (e.indexOf("%") > -1) { e = (this.containerStyle.width * parseFloat(e) / 100).toString() + "px" } return e }, t.prototype.wireTimeListEvents = function () { Kv.add(this.listWrapper, "click", this.onMouseClick, this), uw.isDevice || (Kv.add(this.listWrapper, "mouseover", this.onMouseOver, this), Kv.add(this.listWrapper, "mouseout", this.onMouseLeave, this)) }, t.prototype.unWireTimeListEvents = function () { this.listWrapper && (Kv.remove(this.listWrapper, "click", this.onMouseClick), Kv.remove(document, "mousedown touchstart", this.documentClickHandler), uw.isDevice || (Kv.add(this.listWrapper, "mouseover", this.onMouseOver, this), Kv.add(this.listWrapper, "mouseout", this.onMouseLeave, this))) }, t.prototype.onMouseOver = function (e) { var t = R(e.target, "." + EE); this.setTimeHover(t, "e-hover") }, t.prototype.onMouseLeave = function () { this.removeTimeHover("e-hover") }, t.prototype.setTimeHover = function (e, t) { this.enabled && this.isValidLI(e) && !e.classList.contains(t) && (this.removeTimeHover(t), S([e], t)) }, t.prototype.getPopupHeight = function () { var e = parseInt("250px", 10), t = this.dateTimeWrapper.getBoundingClientRect().height; return t > e ? e : t }, t.prototype.changeEvent = function (t) { +this.previousDateTime != +this.value && (e.prototype.changeEvent.call(this, t), this.inputElement.focus(), this.valueWithMinutes = this.value, this.setInputValue("date"), this.previousDateTime = this.value && new Date(+this.value)) }, t.prototype.updateValue = function (e) { this.setInputValue("time"), +this.previousDateTime != +this.value && (this.changedArgs = { value: this.value, event: e || null, isInteracted: !d(e), element: this.element }, this.addTimeSelection(), this.trigger("change", this.changedArgs), this.previousDateTime = this.value) }, t.prototype.setTimeScrollPosition = function () { var e; d(e = this.selectedElement) ? this.dateTimeWrapper && this.checkDateValue(this.scrollTo) && this.setScrollTo() : this.findScrollTop(e) }, t.prototype.findScrollTop = function (e) { var t = this.getPopupHeight(), i = e.nextElementSibling, n = i ? i.offsetTop : e.offsetTop, r = e.getBoundingClientRect().height; n + e.offsetTop > t ? this.dateTimeWrapper.scrollTop = i ? n - (t / 2 + r / 2) : n : this.dateTimeWrapper.scrollTop = 0 }, t.prototype.setScrollTo = function () { var e, t = this.dateTimeWrapper.querySelectorAll("." + EE); if (t.length >= 0) { var i = this.timeCollections[0], n = this.getDateObject(this.checkDateValue(this.scrollTo)).getTime(); e = t[Math.round((n - i) / (6e4 * this.step))] } else this.dateTimeWrapper.scrollTop = 0; d(e) ? this.dateTimeWrapper.scrollTop = 0 : this.findScrollTop(e) }, t.prototype.setInputValue = function (e) { if ("date" === e) this.inputElement.value = this.previousElementValue = this.getFormattedValue(this.getFullDateTime()), this.setProperties({ value: this.getFullDateTime() }, !0); else { var t = this.getFormattedValue(new Date(this.timeCollections[this.activeIndex])); eS.setValue(t, this.inputElement, this.floatLabelType, this.showClearButton), this.previousElementValue = this.inputElement.value, this.setProperties({ value: new Date(this.timeCollections[this.activeIndex]) }, !0) } this.updateIconState() }, t.prototype.getFullDateTime = function () { var e = null; return e = this.isDateObject(this.valueWithMinutes) ? this.combineDateTime(this.valueWithMinutes) : this.previousDate, this.validateMinMaxRange(e) }, t.prototype.combineDateTime = function (e) { if (this.isDateObject(e)) { var t = this.previousDate.getDate(), i = this.previousDate.getMonth(), n = this.previousDate.getFullYear(), r = e.getHours(), o = e.getMinutes(), s = e.getSeconds(); return new Date(n, i, t, r, o, s) } return this.previousDate }, t.prototype.onMouseClick = function (e) { var t = e.target, i = this.selectedElement = R(t, "." + EE); i && i.classList.contains(EE) && (this.timeValue = i.getAttribute("data-value"), this.hide(e)), this.setSelection(i, e) }, t.prototype.setSelection = function (e, t) { if (this.isValidLI(e) && !e.classList.contains(AE)) { e.getAttribute("data-value"); this.selectedElement = e; var i = Array.prototype.slice.call(this.liCollections).indexOf(e); this.activeIndex = i, this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]), S([this.selectedElement], AE), this.selectedElement.setAttribute("aria-selected", "true"), this.updateValue(t) } }, t.prototype.setTimeActiveClass = function () { var e = d(this.dateTimeWrapper) ? this.listWrapper : this.dateTimeWrapper; if (!d(e)) { var t = e.querySelectorAll("." + EE); if (t.length) for (var i = 0; i < t.length; i++)if (this.timeCollections[i] === +this.valueWithMinutes) { t[i].setAttribute("aria-selected", "true"), this.selectedElement = t[i], this.activeIndex = i, this.setTimeActiveDescendant(); break } } }, t.prototype.setTimeActiveDescendant = function () { d(this.selectedElement) ? P(this.inputElement, { "aria-activedescendant": "null" }) : P(this.inputElement, { "aria-activedescendant": this.selectedElement.getAttribute("id") }) }, t.prototype.addTimeSelection = function () { this.selectedElement = null, this.removeTimeSelection(), this.setTimeActiveClass(), d(this.selectedElement) || (S([this.selectedElement], AE), this.selectedElement.setAttribute("aria-selected", "true")) }, t.prototype.removeTimeSelection = function () { if (this.removeTimeHover("e-hover"), !d(this.dateTimeWrapper)) { var e = this.dateTimeWrapper.querySelectorAll("." + AE); e.length && (x(e, AE), e[0].removeAttribute("aria-selected")) } }, t.prototype.removeTimeHover = function (e) { var t = this.getTimeHoverItem(e); t && t.length && x(t, e) }, t.prototype.getTimeHoverItem = function (e) { var t, i = d(this.dateTimeWrapper) ? this.listWrapper : this.dateTimeWrapper; return d(i) || (t = i.querySelectorAll("." + e)), t }, t.prototype.isValidLI = function (e) { return e && e.classList.contains(EE) && !e.classList.contains("e-disabled") }, t.prototype.calculateStartEnd = function (e, t, i) { var n = e.getDate(), r = e.getMonth(), o = e.getFullYear(), s = e.getHours(), a = e.getMinutes(), l = e.getSeconds(), h = e.getMilliseconds(); return t ? "starttime" === i ? new Date(o, r, n, 0, 0, 0) : new Date(o, r, n, 23, 59, 59) : new Date(o, r, n, s, a, l, h) }, t.prototype.startTime = function (e) { var t, i, n, r = this.min; return +(n = null === e ? new Date : e).getDate() == +r.getDate() && +n.getMonth() == +r.getMonth() && +n.getFullYear() == +r.getFullYear() || +new Date(n.getFullYear(), n.getMonth(), n.getDate()) <= +new Date(r.getFullYear(), r.getMonth(), r.getDate()) ? (i = !1, t = this.min) : +n < +this.max && +n > +this.min ? (i = !0, t = n) : +n >= +this.max && (i = !0, t = this.max), this.calculateStartEnd(t, i, "starttime") }, t.prototype.endTime = function (e) { var t, i, n, r = this.max; return +(n = null === e ? new Date : e).getDate() == +r.getDate() && +n.getMonth() == +r.getMonth() && +n.getFullYear() == +r.getFullYear() || +new Date(n.getUTCFullYear(), n.getMonth(), n.getDate()) >= +new Date(r.getFullYear(), r.getMonth(), r.getDate()) ? (i = !1, t = this.max) : +n < +this.max && +n > +this.min ? (i = !0, t = n) : +n <= +this.min && (i = !0, t = this.min), this.calculateStartEnd(t, i, "endtime") }, t.prototype.hide = function (e) { var t = this; if (this.popupObj || this.dateTimeWrapper) { this.preventArgs = { cancel: !1, popup: this.popupObj || this.popupObject, event: e || null }; var i = this.preventArgs; d(this.popupObj) ? this.trigger("close", i, function (i) { t.dateTimeCloseEventCallback(e, i) }) : this.dateTimeCloseEventCallback(e, i) } else uw.isDevice && this.allowEdit && !this.readonly && this.inputElement.removeAttribute("readonly"), this.setAllowEdit() }, t.prototype.dateTimeCloseEventCallback = function (t, i) { this.preventArgs = i, this.preventArgs.cancel || (this.isDatePopupOpen() ? e.prototype.hide.call(this, t) : this.isTimePopupOpen() && (this.closePopup(t), x([document.body], "e-time-overflow"), uw.isDevice && this.timeModal && (this.timeModal.style.display = "none", this.timeModal.outerHTML = "", this.timeModal = null), this.setTimeActiveDescendant())), uw.isDevice && this.allowEdit && !this.readonly && this.inputElement.removeAttribute("readonly"), this.setAllowEdit() }, t.prototype.closePopup = function (e) { if (this.isTimePopupOpen() && this.popupObject) { var t = { name: "FadeOut", duration: 100, delay: 0 }; this.popupObject.hide(new fw(t)), this.inputWrapper.container.classList.remove("e-icon-anim"), P(this.inputElement, { "aria-expanded": "false" }), Kv.remove(document, "mousedown touchstart", this.documentClickHandler) } }, t.prototype.preRender = function () { this.checkFormat(), this.dateTimeFormat = this.cldrDateTimeFormat(), e.prototype.preRender.call(this), x([this.inputElementCopy], [xE]) }, t.prototype.getProperty = function (e, t) { "min" === t ? this.setProperties({ min: this.validateValue(e.min) }, !0) : this.setProperties({ max: this.validateValue(e.max) }, !0) }, t.prototype.checkAttributes = function (e) { for (var t, i = 0, n = e ? d(this.htmlAttributes) ? [] : Object.keys(this.htmlAttributes) : ["style", "name", "step", "disabled", "readonly", "value", "min", "max", "placeholder", "type"]; i < n.length; i++) { var r = n[i]; if (!d(this.inputElement.getAttribute(r))) switch (r) { case "name": this.inputElement.setAttribute("name", this.inputElement.getAttribute(r)); break; case "step": this.step = parseInt(this.inputElement.getAttribute(r), 10); break; case "readonly": if (d(this.dateTimeOptions) || void 0 === this.dateTimeOptions.readonly || e) { var o = "disabled" === this.inputElement.getAttribute(r) || "" === this.inputElement.getAttribute(r) || "true" === this.inputElement.getAttribute(r); this.setProperties({ readonly: o }, !e) } break; case "placeholder": (d(this.dateTimeOptions) || void 0 === this.dateTimeOptions.placeholder || e) && this.setProperties({ placeholder: this.inputElement.getAttribute(r) }, !e); break; case "min": (d(this.dateTimeOptions) || void 0 === this.dateTimeOptions.min || e) && (t = new Date(this.inputElement.getAttribute(r)), this.isNullOrEmpty(t) || isNaN(+t) || this.setProperties({ min: t }, !e)); break; case "disabled": if (d(this.dateTimeOptions) || void 0 === this.dateTimeOptions.enabled || e) { var s = "disabled" !== this.inputElement.getAttribute(r) && "true" !== this.inputElement.getAttribute(r) && "" !== this.inputElement.getAttribute(r); this.setProperties({ enabled: s }, !e) } break; case "value": (d(this.dateTimeOptions) || void 0 === this.dateTimeOptions.value || e) && (t = new Date(this.inputElement.getAttribute(r)), this.isNullOrEmpty(t) || isNaN(+t) || this.setProperties({ value: t }, !e)); break; case "max": (d(this.dateTimeOptions) || void 0 === this.dateTimeOptions.max || e) && (t = new Date(this.inputElement.getAttribute(r)), this.isNullOrEmpty(t) || isNaN(+t) || this.setProperties({ max: t }, !e)) } } }, t.prototype.requiredModules = function () { var e = []; return this && e.push({ args: [this], member: "islamic" }), e }, t.prototype.getTimeActiveElement = function () { return d(this.dateTimeWrapper) ? null : this.dateTimeWrapper.querySelectorAll("." + AE) }, t.prototype.createDateObj = function (e) { return e instanceof Date ? e : null }, t.prototype.getDateObject = function (e) { if (!this.isNullOrEmpty(e)) { var t = this.createDateObj(e), i = this.valueWithMinutes, n = !d(i); if (this.checkDateValue(t)) { var r = n ? i.getDate() : vE, o = n ? i.getMonth() : wE, s = n ? i.getFullYear() : bE, a = n ? i.getHours() : CE, l = n ? i.getMinutes() : LE, h = n ? i.getSeconds() : ME, c = n ? i.getMilliseconds() : SE; return new Date(s, o, r, a, l, h, c) } } return null }, t.prototype.findNextTimeElement = function (e) { var t = this.inputElement.value, i = d(this.valueWithMinutes) ? this.createDateObj(t) : this.getDateObject(this.valueWithMinutes), n = null, r = this.liCollections.length; if (!d(this.activeIndex) || !d(this.checkDateValue(i))) { if ("home" === e.action) n = +this.createDateObj(new Date(this.timeCollections[0])), this.activeIndex = 0; else if ("end" === e.action) n = +this.createDateObj(new Date(this.timeCollections[this.timeCollections.length - 1])), this.activeIndex = this.timeCollections.length - 1; else if ("down" === e.action) { for (var o = 0; o < r; o++)if (+i < this.timeCollections[o]) { n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o; break } } else for (o = r - 1; o >= 0; o--)if (+i > this.timeCollections[o]) { n = +this.createDateObj(new Date(this.timeCollections[o])), this.activeIndex = o; break } this.selectedElement = this.liCollections[this.activeIndex], this.timeElementValue(d(n) ? null : new Date(n)) } }, t.prototype.setTimeValue = function (e, t) { var i, n, r = this.validateMinMaxRange(t), o = this.createDateObj(r); return this.getFormattedValue(o) !== (d(this.value) ? null : this.getFormattedValue(this.value)) ? (this.valueWithMinutes = d(o) ? null : o, n = new Date(+this.valueWithMinutes)) : (this.strictMode && (e = o), this.valueWithMinutes = this.checkDateValue(e), n = new Date(+this.valueWithMinutes)), i = "Gregorian" === this.calendarMode ? this.globalize.formatDate(n, { format: d(this.formatString) ? this.cldrDateTimeFormat() : this.formatString, type: "dateTime", skeleton: "yMd" }) : this.globalize.formatDate(n, { format: d(this.formatString) ? this.cldrDateTimeFormat() : this.formatString, type: "dateTime", skeleton: "yMd", calendar: "islamic" }), !this.strictMode && d(n), eS.setValue(i, this.inputElement, this.floatLabelType, this.showClearButton), n }, t.prototype.timeElementValue = function (e) { if (!d(this.checkDateValue(e)) && !this.isNullOrEmpty(e)) { var t = e instanceof Date ? e : this.getDateObject(e); return this.setTimeValue(t, e) } return null }, t.prototype.timeKeyHandler = function (e) { if (!(d(this.step) || this.step <= 0)) { var t = this.timeCollections.length; if (d(this.getTimeActiveElement()) || 0 === this.getTimeActiveElement().length) this.liCollections.length > 0 && (d(this.value) && d(this.activeIndex) ? (this.activeIndex = 0, this.selectedElement = this.liCollections[0], this.timeElementValue(new Date(this.timeCollections[0]))) : this.findNextTimeElement(e)); else { var i = void 0; if (e.keyCode >= 37 && e.keyCode <= 40) { var n = 40 === e.keyCode || 39 === e.keyCode ? ++this.activeIndex : --this.activeIndex; this.activeIndex = n = this.activeIndex === t ? 0 : this.activeIndex, this.activeIndex = n = this.activeIndex < 0 ? t - 1 : this.activeIndex, i = d(this.timeCollections[n]) ? this.timeCollections[0] : this.timeCollections[n] } else "home" === e.action ? (this.activeIndex = 0, i = this.timeCollections[0]) : "end" === e.action && (this.activeIndex = t - 1, i = this.timeCollections[t - 1]); this.selectedElement = this.liCollections[this.activeIndex], this.timeElementValue(new Date(i)) } this.isNavigate = !0, this.setTimeHover(this.selectedElement, "e-navigation"), this.setTimeActiveDescendant(), !this.isTimePopupOpen() || null === this.selectedElement || e && "click" === e.type || this.setTimeScrollPosition() } }, t.prototype.TimeKeyActionHandle = function (e) { if (this.enabled) switch ("right" !== e.action && "left" !== e.action && "tab" !== e.action && e.preventDefault(), e.action) { case "up": case "down": case "home": case "end": this.timeKeyHandler(e); break; case "enter": this.isNavigate ? (this.selectedElement = this.liCollections[this.activeIndex], this.valueWithMinutes = new Date(this.timeCollections[this.activeIndex]), this.setInputValue("time"), +this.previousDateTime != +this.value && (this.changedArgs.value = this.value, this.addTimeSelection(), this.previousDateTime = this.value)) : this.updateValue(e), this.hide(e), S([this.inputWrapper.container], DE), this.isNavigate = !1, e.stopPropagation(); break; case "escape": this.hide(e); break; default: this.isNavigate = !1 } }, t.prototype.inputKeyAction = function (e) { switch (e.action) { case "altDownArrow": this.strictModeUpdate(), this.updateInput(), this.toggle(e) } }, t.prototype.onPropertyChanged = function (t, i) { for (var n = 0, r = Object.keys(t); n < r.length; n++) { var o = r[n]; switch (o) { case "value": this.cldrDateTimeFormat(); this.invalidValueString = null, this.checkInvalidValue(t.value), t.value = this.value, t.value = this.validateValue(t.value), eS.setValue(this.getFormattedValue(t.value), this.inputElement, this.floatLabelType, this.showClearButton), this.valueWithMinutes = t.value, this.setProperties({ value: t.value }, !0), this.previousDateTime = new Date(this.inputElement.value), this.updateInput(), this.changeTrigger(null); break; case "min": case "max": this.getProperty(t, o), this.updateInput(); break; case "enableRtl": eS.setEnableRtl(this.enableRtl, [this.inputWrapper.container]); break; case "cssClass": eS.setCssClass(t.cssClass, [this.inputWrapper.container], i.cssClass), this.dateTimeWrapper && eS.setCssClass(t.cssClass, [this.dateTimeWrapper], i.cssClass); break; case "locale": this.globalize = new Gw(this.locale), this.l10n.setLocale(this.locale), this.setProperties({ placeholder: this.l10n.getConstant("placeholder") }, !0), eS.setPlaceholder(this.l10n.getConstant("placeholder"), this.inputElement), this.dateTimeFormat = this.cldrDateTimeFormat(), e.prototype.updateInput.call(this); break; case "htmlAttributes": this.updateHtmlAttributeToElement(), this.updateHtmlAttributeToWrapper(), this.checkAttributes(!0); break; case "format": this.setProperties({ format: t.format }, !0), this.checkFormat(), this.dateTimeFormat = this.formatString, this.setValue(); break; case "placeholder": eS.setPlaceholder(t.placeholder, this.inputElement), this.inputElement.setAttribute("aria-placeholder", t.placeholder); break; case "enabled": eS.setEnabled(this.enabled, this.inputElement), this.enabled || (this.inputElement.tabIndex = -1), this.bindEvents(); break; case "strictMode": this.invalidValueString = null, this.updateInput(); break; case "width": this.setWidth(t.width); break; case "readonly": eS.setReadonly(this.readonly, this.inputElement); break; case "floatLabelType": this.floatLabelType = t.floatLabelType, eS.removeFloating(this.inputWrapper), eS.addFloating(this.inputElement, this.floatLabelType, this.placeholder); break; case "scrollTo": this.checkDateValue(new Date(this.checkValue(t.scrollTo))) ? (this.dateTimeWrapper && this.setScrollTo(), this.setProperties({ scrollTo: t.scrollTo }, !0)) : this.setProperties({ scrollTo: null }, !0); break; default: e.prototype.onPropertyChanged.call(this, t, i) }this.hide(null) } }, t.prototype.getModuleName = function () { return "datetimepicker" }, t.prototype.restoreValue = function () { this.previousDateTime = this.previousDate, this.currentDate = this.value ? this.value : new Date, this.valueWithMinutes = this.value, this.previousDate = this.value, this.previousElementValue = this.previousElementValue = d(this.inputValueCopy) ? "" : this.getFormattedValue(this.inputValueCopy) }, yE([Y(null)], t.prototype, "timeFormat", void 0), yE([Y(30)], t.prototype, "step", void 0), yE([Y(null)], t.prototype, "scrollTo", void 0), yE([Y(1e3)], t.prototype, "zIndex", void 0), yE([Y(null)], t.prototype, "keyConfigs", void 0), yE([Y({})], t.prototype, "htmlAttributes", void 0), yE([Y(!1)], t.prototype, "enablePersistence", void 0), yE([Y(!0)], t.prototype, "allowEdit", void 0), yE([Y(!1)], t.prototype, "isMultiSelection", void 0), yE([Y(null)], t.prototype, "values", void 0), yE([Y(!0)], t.prototype, "showClearButton", void 0), yE([Y(null)], t.prototype, "placeholder", void 0), yE([Y(!1)], t.prototype, "strictMode", void 0), yE([X()], t.prototype, "open", void 0), yE([X()], t.prototype, "close", void 0), yE([X()], t.prototype, "blur", void 0), yE([X()], t.prototype, "focus", void 0), yE([X()], t.prototype, "created", void 0), yE([X()], t.prototype, "destroyed", void 0), t = yE([J], t) }(qD); nM.Inject(lM), qD.Inject(lM), jE.Inject(lM); var IE, kE = Object.freeze({ CalendarBase: iM, Calendar: nM, Islamic: lM, DatePicker: qD, Presets: tE, DateRangePicker: iE, get TimePickerBase() { return dA }, TimePicker: mE, DateTimePicker: jE }); !function (e) { e.axisLabelFont = { size: "12px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.axisTitleFont = { size: "14px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.chartTitleFont = { size: "15px", fontWeight: "500", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.chartSubTitleFont = { size: "11px", fontWeight: "500", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.crosshairLabelFont = { size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.tooltipLabelFont = { size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.legendLabelFont = { size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.stripLineLabelFont = { size: "12px", fontWeight: "Regular", color: "#353535", fontStyle: "Normal", fontFamily: "Segoe UI" }, e.stockEventFont = { size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" } }(IE || (IE = {})); var PE, NE = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), OE = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, RE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y("Line")], t.prototype, "type", void 0), OE([Y(null)], t.prototype, "color", void 0), OE([Y(1)], t.prototype, "width", void 0), OE([Y(null)], t.prototype, "length", void 0), OE([Y("")], t.prototype, "dashArray", void 0), t }(ww), zE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y("Normal")], t.prototype, "fontStyle", void 0), OE([Y("16px")], t.prototype, "size", void 0), OE([Y("Normal")], t.prototype, "fontWeight", void 0), OE([Y("")], t.prototype, "color", void 0), OE([Y("Center")], t.prototype, "textAlignment", void 0), OE([Y("Segoe UI")], t.prototype, "fontFamily", void 0), OE([Y(1)], t.prototype, "opacity", void 0), OE([Y("Trim")], t.prototype, "textOverflow", void 0), t }(ww), BE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y("")], t.prototype, "color", void 0), OE([Y(1)], t.prototype, "width", void 0), t }(ww), FE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([U({}, BE)], t.prototype, "border", void 0), OE([Y("transparent")], t.prototype, "background", void 0), OE([Y(1)], t.prototype, "opacity", void 0), t }(ww), VE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(10)], t.prototype, "left", void 0), OE([Y(10)], t.prototype, "right", void 0), OE([Y(10)], t.prototype, "top", void 0), OE([Y(10)], t.prototype, "bottom", void 0), t }(ww), WE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(!0)], t.prototype, "enable", void 0), OE([Y(1e3)], t.prototype, "duration", void 0), OE([Y(0)], t.prototype, "delay", void 0), t }(ww), HE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(0)], t.prototype, "series", void 0), OE([Y(0)], t.prototype, "point", void 0), t }(ww), _E = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(0)], t.prototype, "topLeft", void 0), OE([Y(0)], t.prototype, "topRight", void 0), OE([Y(0)], t.prototype, "bottomLeft", void 0), OE([Y(0)], t.prototype, "bottomRight", void 0), t }(ww), YE = function () { return function (e, t) { this.series = e, this.point = t } }(), UE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(null)], t.prototype, "fill", void 0), OE([U({ color: "transparent", width: 0 }, BE)], t.prototype, "border", void 0), OE([Y("Gap")], t.prototype, "mode", void 0), t }(ww), qE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(!1)], t.prototype, "enable", void 0), OE([Y(null)], t.prototype, "minY", void 0), OE([Y(null)], t.prototype, "maxY", void 0), OE([Y(null)], t.prototype, "fill", void 0), t }(ww), GE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(!1)], t.prototype, "enable", void 0), OE([Y(!0)], t.prototype, "enableMarker", void 0), OE([Y(!1)], t.prototype, "shared", void 0), OE([Y(null)], t.prototype, "fill", void 0), OE([Y(null)], t.prototype, "header", void 0), OE([Y(.75)], t.prototype, "opacity", void 0), OE([U(IE.tooltipLabelFont, zE)], t.prototype, "textStyle", void 0), OE([Y(null)], t.prototype, "format", void 0), OE([Y(null)], t.prototype, "template", void 0), OE([Y(!0)], t.prototype, "enableAnimation", void 0), OE([U({ color: "#cccccc", width: .5 }, BE)], t.prototype, "border", void 0), t }(ww), QE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y("Years")], t.prototype, "intervalType", void 0), OE([Y(1)], t.prototype, "interval", void 0), OE([Y(null)], t.prototype, "text", void 0), OE([Y(!1)], t.prototype, "selected", void 0), t }(ww), XE = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NE(t, e), OE([Y(43)], t.prototype, "height", void 0), OE([Y("Bottom")], t.prototype, "position", void 0), OE([G([], QE)], t.prototype, "periods", void 0), t }(ww), JE = function () { function e(e) { this.svgLink = "http://www.w3.org/2000/svg", this.rootId = e } return e.prototype.getOptionValue = function (e, t) { return e[t] }, e.prototype.createSvg = function (e) { return d(e.id) && (e.id = this.rootId + "_svg"), this.svgObj = document.getElementById(e.id), d(document.getElementById(e.id)) && (this.svgObj = document.createElementNS(this.svgLink, "svg")), this.svgObj = this.setElementAttributes(e, this.svgObj), this.setSVGSize(e.width, e.height), this.svgObj }, e.prototype.setSVGSize = function (e, t) { var i = document.getElementById(this.rootId), n = d(i) ? null : i.getBoundingClientRect(); d(this.width) || this.width <= 0 ? this.svgObj.setAttribute("width", e ? e.toString() : n.width.toString()) : this.svgObj.setAttribute("width", this.width.toString()), d(this.height) || this.height <= 0 ? this.svgObj.setAttribute("height", t ? t.toString() : "450") : this.svgObj.setAttribute("height", this.height.toString()) }, e.prototype.drawPath = function (e, t) { var i = document.getElementById(e.id); return null === i && (i = document.createElementNS(this.svgLink, "path")), i = this.setElementAttributes(e, i) }, e.prototype.drawLine = function (e) { var t = document.getElementById(e.id); return null === t && (t = document.createElementNS(this.svgLink, "line")), t = this.setElementAttributes(e, t) }, e.prototype.drawRectangle = function (e, t) { var i = document.getElementById(e.id); return null === i && (i = document.createElementNS(this.svgLink, "rect")), i = this.setElementAttributes(e, i) }, e.prototype.drawCircle = function (e) { var t = document.getElementById(e.id); return null === t && (t = document.createElementNS(this.svgLink, "circle")), t = this.setElementAttributes(e, t) }, e.prototype.drawPolyline = function (e) { var t = document.getElementById(e.id); return null === t && (t = document.createElementNS(this.svgLink, "polyline")), t = this.setElementAttributes(e, t) }, e.prototype.drawEllipse = function (e) { var t = document.getElementById(e.id); return null === t && (t = document.createElementNS(this.svgLink, "ellipse")), t = this.setElementAttributes(e, t) }, e.prototype.drawPolygon = function (e) { var t = document.getElementById(e.id); return null === t && (t = document.createElementNS(this.svgLink, "polygon")), t = this.setElementAttributes(e, t) }, e.prototype.drawImage = function (e) { var t = document.createElementNS(this.svgLink, "image"); return t.setAttributeNS(null, "height", e.height.toString()), t.setAttributeNS(null, "width", e.width.toString()), t.setAttributeNS("http://www.w3.org/1999/xlink", "href", e.href), t.setAttributeNS(null, "x", e.x.toString()), t.setAttributeNS(null, "y", e.y.toString()), t.setAttributeNS(null, "id", e.id), t.setAttributeNS(null, "visibility", e.visibility), d(this.getOptionValue(e, "clip-path")) || t.setAttributeNS(null, "clip-path", this.getOptionValue(e, "clip-path")), d(e.preserveAspectRatio) || t.setAttributeNS(null, "preserveAspectRatio", e.preserveAspectRatio), t }, e.prototype.createText = function (e, t, i, n) { var r = document.createElementNS(this.svgLink, "text"); return r = this.setElementAttributes(e, r), d(t) || (r.textContent = t), r }, e.prototype.createTSpan = function (e, t) { var i = document.createElementNS(this.svgLink, "tspan"); return i = this.setElementAttributes(e, i), d(t) || (i.textContent = t), i }, e.prototype.createTitle = function (e) { var t = document.createElementNS(this.svgLink, "title"); return t.textContent = e, t }, e.prototype.createDefs = function () { return document.createElementNS(this.svgLink, "defs") }, e.prototype.createClipPath = function (e) { var t = document.createElementNS(this.svgLink, "clipPath"); return t = this.setElementAttributes(e, t) }, e.prototype.createForeignObject = function (e) { var t = document.createElementNS(this.svgLink, "foreignObject"); return t = this.setElementAttributes(e, t) }, e.prototype.createGroup = function (e) { var t = document.createElementNS(this.svgLink, "g"); return t = this.setElementAttributes(e, t) }, e.prototype.createPattern = function (e, t) { var i = document.createElementNS(this.svgLink, t); return i = this.setElementAttributes(e, i) }, e.prototype.createRadialGradient = function (e, t, i) { var n; if (d(e[0].colorStop)) n = e[0].color.toString(); else { var r = { id: this.rootId + "_" + t + "radialGradient", cx: i.cx + "%", cy: i.cy + "%", r: i.r + "%", fx: i.fx + "%", fy: i.fy + "%" }; this.drawGradient("radialGradient", r, e), n = "url(#" + this.rootId + "_" + t + "radialGradient)" } return n }, e.prototype.createLinearGradient = function (e, t, i) { var n; if (d(e[0].colorStop)) n = e[0].color.toString(); else { var r = { id: this.rootId + "_" + t + "linearGradient", x1: i.x1 + "%", y1: i.y1 + "%", x2: i.x2 + "%", y2: i.y2 + "%" }; this.drawGradient("linearGradient", r, e), n = "url(#" + this.rootId + "_" + t + "linearGradient)" } return n }, e.prototype.drawGradient = function (e, t, i) { var n = this.createDefs(), r = document.createElementNS(this.svgLink, e); r = this.setElementAttributes(t, r); for (var o = 0; o < i.length; o++) { var s = document.createElementNS(this.svgLink, "stop"); s.setAttribute("offset", i[o].colorStop), s.setAttribute("stop-color", i[o].color), s.setAttribute("stop-opacity", "1"), r.appendChild(s) } return n.appendChild(r), n }, e.prototype.drawClipPath = function (e) { var t = this.createDefs(), i = this.createClipPath({ id: e.id }); e.id = e.id + "_Rect"; var n = this.drawRectangle(e); return i.appendChild(n), t.appendChild(i), t }, e.prototype.drawCircularClipPath = function (e) { var t = this.createDefs(), i = this.createClipPath({ id: e.id }); e.id = e.id + "_Circle"; var n = this.drawCircle(e); return i.appendChild(n), t.appendChild(i), t }, e.prototype.setElementAttributes = function (e, t) { for (var i = Object.keys(e), n = 0; n < i.length; n++)t.setAttribute(i[n], e[i[n]]); return t }, e.prototype.createCanvas = function (e) { return null }, e }(), ZE = function () { function e(e) { this.rootId = e } return e.prototype.getOptionValue = function (e, t) { return e[t] }, e.prototype.createCanvas = function (e) { var t = document.createElement("canvas"); return t.setAttribute("id", this.rootId + "_canvas"), this.ctx = t.getContext("2d"), this.canvasObj = t, this.setCanvasSize(e.width, e.height), this.canvasObj }, e.prototype.setCanvasSize = function (e, t) { var i = document.getElementById(this.rootId), n = d(i) ? null : i.getBoundingClientRect(); d(this.width) ? this.canvasObj.setAttribute("width", e ? e.toString() : n.width.toString()) : this.canvasObj.setAttribute("width", this.width.toString()), d(this.height) ? this.canvasObj.setAttribute("height", t ? t.toString() : "450") : this.canvasObj.setAttribute("height", this.height.toString()) }, e.prototype.setAttributes = function (e) { this.ctx.lineWidth = this.getOptionValue(e, "stroke-width"); var t = this.getOptionValue(e, "stroke-dasharray"); if (!d(t)) { var i = t.split(","); this.ctx.setLineDash([parseInt(i[0], 10), parseInt(i[1], 10)]) } this.ctx.strokeStyle = this.getOptionValue(e, "stroke") }, e.prototype.drawLine = function (e) { this.ctx.save(), this.ctx.beginPath(), this.ctx.lineWidth = this.getOptionValue(e, "stroke-width"), this.ctx.strokeStyle = e.stroke, this.ctx.moveTo(e.x1, e.y1), this.ctx.lineTo(e.x2, e.y2), this.ctx.stroke(), this.ctx.restore() }, e.prototype.drawRectangle = function (e, t) { var i = this.ctx, n = e.rx; return this.ctx.save(), this.ctx.beginPath(), t && this.ctx.translate(t[0], t[1]), this.ctx.globalAlpha = this.getOptionValue(e, "opacity"), this.setAttributes(e), this.ctx.rect(e.x, e.y, e.width, e.height), null !== n && n >= 0 ? this.drawCornerRadius(e) : ("none" === e.fill && (e.fill = "transparent"), this.ctx.fillStyle = e.fill, this.ctx.fillRect(e.x, e.y, e.width, e.height), this.ctx.stroke()), this.ctx.restore(), this.ctx = i, this.canvasObj }, e.prototype.drawCornerRadius = function (e) { var t = e.rx, i = e.x, n = e.y, r = e.width, o = e.height; "none" === e.fill && (e.fill = "transparent"), this.ctx.fillStyle = e.fill, r < 2 * t && (t = r / 2), o < 2 * t && (t = o / 2), this.ctx.beginPath(), this.ctx.moveTo(i + r - t, n), this.ctx.arcTo(i + r, n, i + r, n + o, t), this.ctx.arcTo(i + r, n + o, i, n + o, t), this.ctx.arcTo(i, n + o, i, n, t), this.ctx.arcTo(i, n, i + r, n, t), this.ctx.closePath(), this.ctx.fill(), this.ctx.stroke() }, e.prototype.drawPath = function (e, t) { var i = e.d.split(" "), n = this.getOptionValue(e, "stroke-width"), r = this.ctx, o = !0; this.ctx.save(), this.ctx.beginPath(), t && this.ctx.translate(t[0], t[1]), this.ctx.globalAlpha = e.opacity ? e.opacity : this.getOptionValue(e, "fill-opacity"), this.setAttributes(e); for (var s = 0; s < i.length; s += 3) { var a = parseFloat(i[s + 1]), l = parseFloat(i[s + 2]); switch (i[s]) { case "M": e.innerR || e.cx || this.ctx.moveTo(a, l); break; case "L": e.innerR || this.ctx.lineTo(a, l); break; case "Q": var h = parseFloat(i[s + 3]), d = parseFloat(i[s + 4]); this.ctx.quadraticCurveTo(a, l, h, d), s += 2; break; case "C": var c = parseFloat(i[s + 3]), p = parseFloat(i[s + 4]), u = parseFloat(i[s + 5]), g = parseFloat(i[s + 6]); this.ctx.bezierCurveTo(a, l, c, p, u, g), s += 4; break; case "A": e.innerR ? o && (this.ctx.arc(e.x, e.y, e.radius, e.start, e.end, e.counterClockWise), this.ctx.arc(e.x, e.y, e.innerR, e.end, e.start, !e.counterClockWise), o = !1) : e.cx ? this.ctx.arc(e.cx, e.cy, e.radius, 0, 2 * Math.PI, e.counterClockWise) : (this.ctx.moveTo(e.x, e.y), this.ctx.arc(e.x, e.y, e.radius, e.start, e.end, e.counterClockWise), this.ctx.lineTo(e.x, e.y)), s += 5; break; case "z": case "Z": this.ctx.closePath(), s -= 2 } } return "none" !== e.fill && void 0 !== e.fill && (this.ctx.fillStyle = e.fill, this.ctx.fill()), n > 0 && this.ctx.stroke(), this.ctx.restore(), this.ctx = r, this.canvasObj }, e.prototype.createText = function (e, t, i, n) { var r = this.getOptionValue(e, "font-weight"); d(r) || "regular" !== r.toLowerCase() || (r = "normal"); var o = this.getOptionValue(e, "font-size"), s = this.getOptionValue(e, "font-family"), a = this.getOptionValue(e, "font-style").toLowerCase() + " " + r + " " + o + " " + s, l = this.getOptionValue(e, "text-anchor"), h = void 0 !== e.opacity ? e.opacity : 1; "middle" === l && (l = "center"), this.ctx.save(), this.ctx.fillStyle = e.fill, this.ctx.font = a, this.ctx.textAlign = l, this.ctx.globalAlpha = h, e.baseline && (this.ctx.textBaseline = e.baseline); return this.ctx.translate(e.x + 0 + (i || 0), e.y + (n || 0)), this.ctx.rotate(e.labelRotation * Math.PI / 180), this.ctx.fillText(t, 0, 0), this.ctx.restore(), this.canvasObj }, e.prototype.drawCircle = function (e, t) { var i = this.ctx; return this.ctx.save(), this.ctx.beginPath(), this.ctx.arc(e.cx, e.cy, e.r, 0, 2 * Math.PI), this.ctx.fillStyle = e.fill, this.ctx.globalAlpha = e.opacity, this.ctx.fill(), t && this.ctx.translate(t[0], t[1]), this.setAttributes(e), this.ctx.stroke(), this.ctx.restore(), this.ctx = i, this.canvasObj }, e.prototype.drawPolyline = function (e) { this.ctx.save(), this.ctx.beginPath(); for (var t = e.points.split(" "), i = 0; i < t.length - 1; i++) { var n = t[i].split(","), r = parseFloat(n[0]), o = parseFloat(n[1]); 0 === i ? this.ctx.moveTo(r, o) : this.ctx.lineTo(r, o) } this.ctx.lineWidth = this.getOptionValue(e, "stroke-width"), this.ctx.strokeStyle = e.stroke, this.ctx.stroke(), this.ctx.restore() }, e.prototype.drawEllipse = function (e, t) { var i = this.ctx, n = Math.max(e.rx, e.ry), r = e.rx / n, o = e.ry / n; this.ctx.save(), this.ctx.beginPath(), this.ctx.translate(e.cx, e.cy), t && this.ctx.translate(t[0], t[1]), this.ctx.save(), this.ctx.scale(r, o), this.ctx.arc(0, 0, n, 0, 2 * Math.PI, !1), this.ctx.fillStyle = e.fill, this.ctx.fill(), this.ctx.restore(), this.ctx.lineWidth = this.getOptionValue(e, "stroke-width"), this.ctx.strokeStyle = e.stroke, this.ctx.stroke(), this.ctx.restore(), this.ctx = i }, e.prototype.drawImage = function (e) { this.ctx.save(); var t = new Image; d(e.href) || (t.src = e.href, this.ctx.drawImage(t, e.x, e.y, e.width, e.height)), this.ctx.restore() }, e.prototype.createLinearGradient = function (e) { var t; d(e[0].colorStop) || (t = this.ctx.createLinearGradient(0, 0, 0, this.canvasObj.height)); return this.setGradientValues(e, t) }, e.prototype.createRadialGradient = function (e) { var t; d(e[0].colorStop) || (t = this.ctx.createRadialGradient(0, 0, 0, 0, 0, this.canvasObj.height)); return this.setGradientValues(e, t) }, e.prototype.setGradientValues = function (e, t) { var i; if (d(e[0].colorStop)) i = e[0].color.toString(); else { for (var n = 0; n <= e.length - 1; n++) { var r = e[n].color, o = e[n].colorStop.slice(0, -1), s = parseInt(o, 10) / 100; t.addColorStop(s, r) } i = t.toString() } return i }, e.prototype.setElementAttributes = function (e, t) { for (var i = Object.keys(e), n = Object.keys(e).map(function (t) { return e[t] }), r = 0; r < i.length; r++)t.setAttribute(i[r], n[r]); return null }, e.prototype.updateCanvasAttributes = function (e) { this.setElementAttributes(e, this.canvasObj); var t = this.ctx; if (!d(this.dataUrl)) { var i = new Image; i.onload = function () { t.drawImage(i, 0, 0) }, i.src = this.dataUrl } }, e.prototype.clearRect = function (e) { this.ctx.restore(), this.ctx.clearRect(e.x, e.y, e.width, e.height) }, e.prototype.createGroup = function (e) { return null }, e.prototype.drawClipPath = function (e) { return null }, e.prototype.canvasClip = function (e) { this.ctx.save(), this.ctx.fillStyle = "transparent", this.ctx.rect(e.x, e.y, e.width, e.height), this.ctx.fill(), this.ctx.clip() }, e.prototype.canvasRestore = function () { this.ctx.restore() }, e.prototype.drawPolygon = function (e) { return null }, e.prototype.createDefs = function () { return null }, e.prototype.createClipPath = function (e) { return null }, e.prototype.createSvg = function (e) { return null }, e }(), KE = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), $E = function () { return function (e, t) { this.width = e, this.height = t } }(), ej = function () { return function (e, t, i, n) { this.x = e, this.y = t, this.width = i, this.height = n } }(), tj = function () { return function (e, t) { this.isRight = t, this.isBottom = e } }(), ij = function () { return function (e) { this.id = e } }(), nj = function (e) { function t(t, i, n, r, o, s, a, l) { void 0 === s && (s = ""); var h = e.call(this, t) || this; return h.transform = "", h.baseLine = "auto", h.labelRotation = 0, h.x = i, h.y = n, h.anchor = r, h.text = o, h.transform = s, h.baseLine = a, h.labelRotation = l, h } return KE(t, e), t }(ij), rj = function (e) { function t(t, i, n, r, o, s, a) { var l = e.call(this, t) || this; return l.opacity = o, l.fill = i, l.stroke = r, l["stroke-width"] = n, l["stroke-dasharray"] = s, l.d = a, l } return KE(t, e), t }(ij), oj = function () { return function (e, t) { this.x = e, this.y = t } }(), sj = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), aj = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, lj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return sj(t, e), aj([Y(null)], t.prototype, "size", void 0), aj([Y("")], t.prototype, "color", void 0), aj([Y("Segoe UI")], t.prototype, "fontFamily", void 0), aj([Y("Normal")], t.prototype, "fontWeight", void 0), aj([Y("Normal")], t.prototype, "fontStyle", void 0), aj([Y(1)], t.prototype, "opacity", void 0), t }(ww), hj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return sj(t, e), aj([Y("")], t.prototype, "color", void 0), aj([Y(1)], t.prototype, "width", void 0), t }(ww), dj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return sj(t, e), aj([Y(0)], t.prototype, "x", void 0), aj([Y(0)], t.prototype, "y", void 0), aj([Y(0)], t.prototype, "width", void 0), aj([Y(0)], t.prototype, "height", void 0), t }(ww), cj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return sj(t, e), aj([Y(0)], t.prototype, "x", void 0), aj([Y(0)], t.prototype, "y", void 0), t }(ww), pj = function (e) { function t(t, i) { return e.call(this, t, i) || this } return sj(t, e), t.prototype.preRender = function () { this.initPrivateVariable(), this.isCanvas || this.removeSVG(), this.createTooltipElement() }, t.prototype.initPrivateVariable = function () { this.renderer = new JE(this.element.id), this.themeStyle = Si(this.theme), this.formattedText = [], this.padding = 5, this.isFirst = !0, this.markerPoint = [] }, t.prototype.removeSVG = function () { var e = document.getElementById(this.element.id + "_svg"), t = document.getElementById(this.element.id + "parent_template"); e && e.parentNode && k(e), t && t.parentNode && k(t) }, t.prototype.render = function () { if (this.fadeOuted = !1, this.template) this.updateTemplateFn(), this.createTemplate(this.areaBounds, this.location); else { this.renderText(this.isFirst); var e = { cancel: !1, name: "tooltipRender", tooltip: this }; this.trigger("tooltipRender", e); var t = this.renderTooltipElement(this.areaBounds, this.location); this.drawMarker(t.isBottom, t.isRight, this.markerSize) } this.trigger("loaded", { tooltip: this }); var i = document.getElementById("chartmeasuretext"); i && k(i) }, t.prototype.createTooltipElement = function () { if (this.textElements = [], !this.template || this.shared) { var e = this.renderer.createSvg({ id: this.element.id + "_svg" }); this.element.appendChild(e); var t = document.getElementById(this.element.id + "_group"); t || (t = this.renderer.createGroup({ id: this.element.id + "_group" })).setAttribute("transform", "translate(0,0)"), e.appendChild(t); var i = this.renderer.drawPath({ id: this.element.id + "_path", "stroke-width": "Bootstrap4" === this.theme ? 0 : this.border.width, fill: this.fill || this.themeStyle.tooltipFill, opacity: "Bootstrap4" === this.theme ? .9 : this.opacity, stroke: this.border.color }); t.appendChild(i) } }, t.prototype.drawMarker = function (e, t, i) { if (this.shapes.length <= 0) return null; for (var n, r = 0, o = this.renderer.createGroup({ id: this.element.id + "_trackball_group" }), s = Di(this.element.id + "_group"), a = 2 * this.marginX + i / 2 + (t ? this.arrowPadding : 0), l = 0, h = this.shapes; l < h.length; l++) { var d = h[l]; n = new rj(this.element.id + "_Trackball_" + r, this.palette[r], 1, "#cccccc", 1, null), this.markerPoint[r] && o.appendChild(Ei(new oj(a, this.markerPoint[r] - this.padding + (e ? this.arrowPadding : 0)), d, new $E(i, i), "", n, null)), r++ } s.appendChild(o) }, t.prototype.renderTooltipElement = function (e, t) { var i, n = Di(this.element.id), r = new oj(0, 0), o = new oj(0, 0), s = Di(this.element.id + "_svg"), a = Di(this.element.id + "_group"), l = Di(this.element.id + "_path"), h = !1, d = !1, c = !1, p = 0, u = 0; if (this.tipRadius = 1, "" !== this.header && (this.elementSize.height += this.marginY), this.content.length > 1 ? (i = this.sharedTooltipLocation(e, this.location.x, this.location.y), h = !0) : (i = this.tooltipLocation(e, t, r, o), this.inverted ? p = (d = i.x < t.x + this.clipBounds.x) ? 0 : this.arrowPadding : (c = !(h = i.y < t.y + this.clipBounds.y), u = h ? 0 : this.arrowPadding)), "" !== this.header) { var g = xi(this.header, this.textStyle).height + 2 * this.marginY + (c ? this.arrowPadding : 0), m = "M " + (3 * this.marginX + (d || h || c ? 0 : this.arrowPadding)) + " " + g + "L " + (i.width + (d || h || c ? 0 : this.arrowPadding) - 2 * this.marginX) + " " + g, f = this.renderer.drawPath({ id: this.element.id + "_header_path", "stroke-width": 1, fill: null, opacity: .8, stroke: this.themeStyle.tooltipHeaderLine, d: m }); a.appendChild(f) } var y = this.border.width / 2, v = new ej(y + p, y + u, i.width - y, i.height - y); if (a.setAttribute("opacity", "1"), !this.enableAnimation || this.shared || this.isFirst ? this.updateDiv(n, i.x, i.y) : this.animateTooltipDiv(n, i), s.setAttribute("height", (i.height + this.border.width + (this.inverted ? 0 : this.arrowPadding) + 5).toString()), s.setAttribute("width", (i.width + this.border.width + (this.inverted ? this.arrowPadding : 0) + 5).toString()), s.setAttribute("opacity", "1"), l.setAttribute("d", Ti(this.rx, this.ry, v, r, this.arrowPadding, h, c, d, o.x, o.y, this.tipRadius)), this.enableShadow && "Bootstrap4" !== this.theme) { var w = this.element.id + "_shadow"; l.setAttribute("filter", uw.isIE ? "" : "url(#" + w + ")"); var b = '<filter id="' + w + '" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="3"/>'; b += '<feOffset dx="3" dy="3" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="0.5"/>', b += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>'; var C = this.renderer.createDefs(); C.setAttribute("id", this.element.id + "SVG_tooltip_definition"), a.appendChild(C), C.innerHTML = b } return l.setAttribute("stroke", this.border.color), this.changeText(new oj(p, u), c, !d && !h && !c, i), new tj(c, !d && !h && !c) }, t.prototype.changeText = function (e, t, i, n) { var r = document.getElementById(this.element.id + "_text"); t && r.setAttribute("transform", "translate(0," + this.arrowPadding + ")"), i && r.setAttribute("transform", "translate(" + this.arrowPadding + " 0)") }, t.prototype.findFormattedText = function () { this.formattedText = [], "" !== this.header.replace(/<b>/g, "").replace(/<\/b>/g, "").trim() && (this.formattedText = this.formattedText.concat(this.header)), this.formattedText = this.formattedText.concat(this.content) }, t.prototype.renderText = function (e) { var t, i, n, r, o = 0, s = 0, a = 0, l = h({}, this.textStyle, null, !0).properties, d = Di(this.element.id + "_group"), c = ""; this.findFormattedText(); var p = this.header.replace(/<b>/g, "").replace(/<\/b>/g, "").trim(), u = "" !== p ? this.marginY : 0, g = !0, m = !0; this.markerPoint = []; var f = this.shapes.length > 0 ? 10 : 0, y = this.shapes.length > 0 ? 5 : 0, v = "Normal", w = this.themeStyle.tooltipLightLabel, b = 22 / parseFloat("13px") * parseFloat(l.size); e && !this.isCanvas || (Ai(this.element.id + "_text"), Ai(this.element.id + "_header_path"), Ai(this.element.id + "_trackball_group"), Ai(this.element.id + "SVG_tooltip_definition")); for (var C = new nj(this.element.id + "_text", 2 * this.marginX, 2 * this.marginY + 2 * this.padding + (2 === this.marginY ? 3 : 0), "start", ""), L = Ii(C, l, null, d), M = 0, S = this.formattedText.length; M < S; M++) { var x = this.formattedText[M].replace(/<(b|strong)>/g, "<b>").replace(/<\/(b|strong)>/g, "</b>").split(/<br.*?>/g); if ("" !== x[0]) { xi(this.formattedText[M], l), 0 === M && "" !== p || this.markerPoint.push(("" !== p ? this.marginY : 0) + C.y + o); for (var T = 0, D = x.length; T < D; T++) { a = 0, m = !0, o += b; for (var A = 0, E = (t = x[T].replace(/<b>/g, "<br><b>").replace(/<\/b>/g, "</b><br>").replace(/:/g, "<br>â€Ž:<br>").split("<br>")).length; A < E; A++)n = t[A], /\S/.test(n) || "" === n || (n = " "), (!m && " " === n || "" !== n.replace(/<b>/g, "").replace(/<\/b>/g, "").trim()) && (a += " " !== n ? 4 : 0, m && !g ? (r = { x: 2 * this.marginX + (f + y), dy: b + (m ? u : 0), fill: "" }, u = null) : r = g && m ? { x: "" === p ? 2 * this.marginX + (f + y) : 2 * this.marginX } : {}, m = !1, i = this.renderer.createTSpan(r, ""), L.appendChild(i), n.indexOf("<b>") > -1 ? (v = "bold", w = this.themeStyle.tooltipBoldLabel, c = "font-weight:" + v, l.fontWeight = v, i.setAttribute("fill", this.textStyle.color || w)) : (c = "bold" === v ? "font-weight:" + v : "", l.fontWeight = v, i.setAttribute("fill", this.textStyle.color || w)), n.indexOf("</b>") > -1 && (v = "Normal", w = this.themeStyle.tooltipLightLabel), i.textContent = n = n.replace(/<[a-zA-Z\/](.|\n)*?>/g, ""), a += xi(n, l).width, "" !== c && i.setAttribute("style", c), g = !1); a -= 4, s = Math.max(s, a) } } } this.elementSize = new $E(s + (s > 0 ? 2 * this.marginX : 0), o), this.elementSize.width += f + y; var j = L.childNodes[0]; if ("" !== p && j) { l.fontWeight = "bold"; var I = (this.elementSize.width + 2 * this.padding) / 2 - xi(p, l).width / 2; j.setAttribute("x", I.toString()) } }, t.prototype.createTemplate = function (e, t) { var i = { cancel: !1, name: "tooltipRender", tooltip: this }; this.trigger("tooltipRender", i); var n = document.getElementById(this.element.id); this.isCanvas && this.removeSVG(); var r = n.firstElementChild; if (r && k(r), i.cancel) k(Di(this.element.id + "_tooltip")); else { for (var o = this.templateFn(this.data), s = M("div", { id: this.element.id + "parent_template" }); o && o.length > 0;)s.appendChild(o[0]); n.appendChild(s); var a = this.isCanvas ? s : this.element, l = a.getBoundingClientRect(); this.padding = 0, this.elementSize = new $E(l.width, l.height); var h = this.tooltipLocation(e, t, new oj(0, 0), new oj(0, 0)); !this.enableAnimation || this.shared || this.isFirst ? this.updateDiv(a, h.x, h.y) : this.animateTooltipDiv(this.element, h) } }, t.prototype.sharedTooltipLocation = function (e, t, i) { var n = this.elementSize.width + 2 * this.marginX, r = this.elementSize.height + 2 * this.marginY, o = new ej(t + 2 * this.padding, i - r - this.padding, n, r); return o.y < e.y && (o.y += o.height + 2 * this.padding), o.x + o.width > e.x + e.width && (o.x -= o.width + 4 * this.padding), o }, t.prototype.tooltipLocation = function (e, t, i, n) { var r = new oj(t.x, t.y), o = this.elementSize.width + 2 * this.marginX, s = this.elementSize.height + 2 * this.marginY, a = this.offset, l = this.clipBounds.x, h = this.clipBounds.y, d = e.x, c = e.y; return this.inverted ? (r = new oj(r.x + l + a, r.y + h - this.elementSize.height / 2 - this.padding), i.y = n.y = s / 2, (r.x + o + this.arrowPadding > d + e.width || this.isNegative) && (r.x = (t.x > e.width ? e.width : t.x) + l - a - (o + this.arrowPadding)), r.x < d && (r.x = (t.x < 0 ? 0 : t.x) + l + a), r.y <= c && (i.y -= c - r.y, n.y -= c - r.y, r.y = c), r.y + s >= c + e.height && (i.y += r.y + s - (c + e.height), n.y += r.y + s - (c + e.height), r.y -= r.y + s - (c + e.height)), i.y + this.arrowPadding / 2 > s - this.ry && (i.y = s - this.ry - this.arrowPadding / 2, n.y = s, this.tipRadius = 0), i.y - this.arrowPadding / 2 < this.ry && (i.y = this.ry + this.arrowPadding / 2, n.y = 0, this.tipRadius = 0)) : (r = new oj(r.x + l - this.elementSize.width / 2 - this.padding, r.y + h - this.elementSize.height - 2 * this.padding - this.arrowPadding - a), i.x = n.x = o / 2, (r.y < c || this.isNegative) && (r.y = (t.y < 0 ? 0 : t.y) + h + a), r.y + s + this.arrowPadding > c + e.height && (r.y = (t.y > e.height ? e.height : t.y) + h - this.elementSize.height - 2 * this.padding - this.arrowPadding - a), n.x = o / 2, r.x < d && (i.x -= d - r.x, n.x -= d - r.x, r.x = d), r.x + o > d + e.width && (i.x += r.x + o - (d + e.width), n.x += r.x + o - (d + e.width), r.x -= r.x + o - (d + e.width)), i.x + this.arrowPadding / 2 > o - this.rx && (i.x = o - this.rx - this.arrowPadding / 2, n.x = o, this.tipRadius = 0), i.x - this.arrowPadding / 2 < this.rx && (i.x = this.rx + this.arrowPadding / 2, n.x = 0, this.tipRadius = 0)), new ej(r.x, r.y, o, s) }, t.prototype.animateTooltipDiv = function (e, t) { var i, n = this, r = parseFloat(e.style.left), o = parseFloat(e.style.top); new fw({}).animate(e, { duration: 300, progress: function (n) { i = n.timeStamp / n.duration, e.style.animation = null, e.style.left = r + i * (t.x - r) + "px", e.style.top = o + i * (t.y - o) + "px" }, end: function (i) { n.updateDiv(e, t.x, t.y), n.trigger("animationComplete", { tooltip: n }) } }) }, t.prototype.updateDiv = function (e, t, i) { e.style.left = t + "px", e.style.top = i + "px" }, t.prototype.updateTemplateFn = function () { if (this.template) try { document.querySelectorAll(this.template).length && (this.templateFn = ce(document.querySelector(this.template).innerHTML.trim())) } catch (e) { this.templateFn = ce(this.template) } }, t.prototype.fadeOut = function () { var e = this, t = this.isCanvas && !this.template ? Di(this.element.id + "_svg") : Di(this.element.id); if (t) { var i = t.firstChild; this.isCanvas && !this.template && (i = document.getElementById(this.element.id + "_group") ? document.getElementById(this.element.id + "_group") : i); var n; i && (n = parseFloat(i.getAttribute("opacity")) || 1), new fw({}).animate(i, { duration: 200, progress: function (t) { e.progressAnimation(i, n, t.timeStamp / t.duration) }, end: function (t) { e.fadeOuted = !0, e.endAnimation(i) } }) } }, t.prototype.progressAnimation = function (e, t, i) { e.style.animation = "", e.setAttribute("opacity", (t - i).toString()) }, t.prototype.endAnimation = function (e) { e.setAttribute("opacity", "0"), this.template && !this.shared && (e.style.display = "none"), this.trigger("animationComplete", { tooltip: this }) }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.getModuleName = function () { return "tooltip" }, t.prototype.destroy = function () { e.prototype.destroy.call(this), this.element.classList.remove("e-tooltip") }, t.prototype.onPropertyChanged = function (e, t) { this.isFirst = !1, this.render() }, aj([Y(!1)], t.prototype, "enable", void 0), aj([Y(!1)], t.prototype, "shared", void 0), aj([Y(!0)], t.prototype, "enableShadow", void 0), aj([Y(null)], t.prototype, "fill", void 0), aj([Y("")], t.prototype, "header", void 0), aj([Y(.75)], t.prototype, "opacity", void 0), aj([U({ size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, lj)], t.prototype, "textStyle", void 0), aj([Y(null)], t.prototype, "template", void 0), aj([Y(!0)], t.prototype, "enableAnimation", void 0), aj([Y(!1)], t.prototype, "inverted", void 0), aj([Y(!1)], t.prototype, "isNegative", void 0), aj([U({ color: "#cccccc", width: .5 }, hj)], t.prototype, "border", void 0), aj([Y([])], t.prototype, "content", void 0), aj([Y(10)], t.prototype, "markerSize", void 0), aj([U({ x: 0, y: 0 }, cj)], t.prototype, "clipBounds", void 0), aj([Y([])], t.prototype, "palette", void 0), aj([Y([])], t.prototype, "shapes", void 0), aj([U({ x: 0, y: 0 }, cj)], t.prototype, "location", void 0), aj([Y(0)], t.prototype, "offset", void 0), aj([Y(2)], t.prototype, "rx", void 0), aj([Y(2)], t.prototype, "ry", void 0), aj([Y(5)], t.prototype, "marginX", void 0), aj([Y(5)], t.prototype, "marginY", void 0), aj([Y(12)], t.prototype, "arrowPadding", void 0), aj([Y(null)], t.prototype, "data", void 0), aj([Y("Material")], t.prototype, "theme", void 0), aj([U({ x: 0, y: 0, width: 0, height: 0 }, dj)], t.prototype, "areaBounds", void 0), aj([Y(null)], t.prototype, "availableSize", void 0), aj([Y(!1)], t.prototype, "isCanvas", void 0), aj([X()], t.prototype, "tooltipRender", void 0), aj([X()], t.prototype, "loaded", void 0), aj([X()], t.prototype, "animationComplete", void 0), t = aj([J], t) }(Kw), uj = function () { function e(e, t) { e < t ? (this.mStart = e, this.mEnd = t) : (this.mStart = t, this.mEnd = e) } return Object.defineProperty(e.prototype, "start", { get: function () { return this.mStart }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "end", { get: function () { return this.mEnd }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "delta", { get: function () { return this.mEnd - this.mStart }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "median", { get: function () { return this.mStart + (this.mEnd - this.mStart) / 2 }, enumerable: !0, configurable: !0 }), e }(), gj = function () { function e(e) { this.chart = e } return e.prototype.calculateNumericNiceInterval = function (e, t, i) { var n = vn(i, e), r = t / n; if (!d(e.desiredIntervals)) return r; for (var o = Math.pow(10, Math.floor(Ri(r, 10))), s = 0, a = e.intervalDivs; s < a.length; s++) { var l = o * a[s]; if (n < t / l) break; r = l } return r }, e.prototype.getActualRange = function (e, t) { this.initializeDoubleRange(e), e.actualRange.interval = e.interval || this.calculateNumericNiceInterval(e, e.doubleRange.delta, t), e.actualRange.min = e.doubleRange.start, e.actualRange.max = e.doubleRange.end }, e.prototype.initializeDoubleRange = function (e) { null !== e.minimum ? this.min = e.minimum : null !== this.min && this.min !== Number.POSITIVE_INFINITY || (this.min = 0), null !== e.maximum ? this.max = e.maximum : null !== this.max && this.max !== Number.NEGATIVE_INFINITY || (this.max = 5), this.min === this.max && (this.max = e.valueType.indexOf("Category") > -1 ? this.max : this.min + 1), e.doubleRange = new uj(this.min, this.max), e.actualRange = {} }, e.prototype.calculateRangeAndInterval = function (e, t) { this.calculateRange(t, e), this.getActualRange(t, e), this.applyRangePadding(t, e), this.calculateVisibleLabels(t, this.chart) }, e.prototype.calculateRange = function (e, t) { if (this.min = null, this.max = null, !yn(e)) for (var i = 0, n = e.series; i < n.length; i++) { var r = n[i]; r.visible && (this.paddingInterval = 0, e.maxPointLength = r.points.length, ((r.type.indexOf("Column") > -1 || r.type.indexOf("Histogram") > -1) && "Horizontal" === e.orientation || r.type.indexOf("Bar") > -1 && "Vertical" === e.orientation) && ("Double" !== r.xAxis.valueType && "DateTime" !== r.xAxis.valueType || "Auto" !== r.xAxis.rangePadding || (this.paddingInterval = .5 * hn(r.xAxis, e.series))), "Horizontal" === e.orientation && (this.chart.requireInvertedAxis ? this.yAxisRange(e, r) : this.findMinMax(r.xMin - this.paddingInterval, r.xMax + this.paddingInterval)), "Vertical" === e.orientation && (this.chart.requireInvertedAxis ? this.findMinMax(r.xMin - this.paddingInterval, r.xMax + this.paddingInterval) : this.yAxisRange(e, r))) } }, e.prototype.yAxisRange = function (e, t) { t.dragSettings.enable && this.chart.dragY && (this.chart.dragY >= e.visibleRange.max && (t.yMax = this.chart.dragY + e.visibleRange.interval), this.chart.dragY <= e.visibleRange.min && (t.yMin = this.chart.dragY - e.visibleRange.interval)), this.findMinMax(t.yMin, t.yMax) }, e.prototype.findMinMax = function (e, t) { (null === this.min || this.min > e) && (this.min = e), (null === this.max || this.max < t) && (this.max = t) }, e.prototype.applyRangePadding = function (e, t) { var i = e.actualRange.min, n = e.actualRange.max; if (!yn(e)) { var r = e.actualRange.interval, o = e.getRangePadding(this.chart); "Additional" === o || "Round" === o ? this.findAdditional(e, i, n, r) : "Normal" === o ? this.findNormal(e, i, n, r, t) : this.updateActualRange(e, i, n, r) } e.actualRange.delta = e.actualRange.max - e.actualRange.min, this.calculateVisibleRange(t, e) }, e.prototype.updateActualRange = function (e, t, i, n) { e.actualRange = { min: null != e.minimum ? e.minimum : t, max: null != e.maximum ? e.maximum : i, interval: null != e.interval ? e.interval : n, delta: e.actualRange.delta } }, e.prototype.findAdditional = function (e, t, i, n) { var r, o; r = Math.floor(t / n) * n, o = Math.ceil(i / n) * n, "Additional" === e.rangePadding && (r -= n, o += n), this.updateActualRange(e, r, o, n) }, e.prototype.findNormal = function (e, t, i, n, r) { var o, s, a = t; t < 0 ? (a = 0, .365 * n >= n + (o = t + .05 * t) % n && (o -= n), o % n < 0 && (o = o - n - o % n)) : (o = t < 5 / 6 * i ? 0 : t - .5 * (i - t)) % n > 0 && (o -= o % n), .365 * n >= n - (s = i > 0 ? i + .05 * (i - a) : i - .05 * (i - a)) % n && (s += n), s % n > 0 && (s = s + n - s % n), e.doubleRange = new uj(o, s), 0 === o && (n = this.calculateNumericNiceInterval(e, e.doubleRange.delta, r), s = Math.ceil(s / n) * n), this.updateActualRange(e, o, s, n) }, e.prototype.calculateVisibleRange = function (e, t) { t.visibleRange = { max: t.actualRange.max, min: t.actualRange.min, delta: t.actualRange.delta, interval: t.actualRange.interval }; var i = !d(t.zoomingScrollBar) && t.zoomingScrollBar.isLazyLoad; (t.zoomFactor < 1 || t.zoomPosition > 0) && !i && (t.calculateVisibleRange(e), t.visibleRange.interval = t.enableAutoIntervalOnZooming && "Category" !== t.valueType ? this.calculateNumericNiceInterval(t, t.doubleRange.delta, e) : t.visibleRange.interval), t.triggerRangeRender(this.chart, t.visibleRange.min, t.visibleRange.max, t.visibleRange.interval) }, e.prototype.calculateVisibleLabels = function (e, t) { e.visibleLabels = []; var i, r = e.visibleRange.min; (e.zoomFactor < 1 || e.zoomPosition > 0 || this.paddingInterval) && (r = e.visibleRange.min - e.visibleRange.min % e.visibleRange.interval); var o = this.getFormat(e), s = null !== o.match("{value}"), a = 0, l = 0; for (e.labelFormat && e.labelFormat.indexOf("n") > -1 && (l = parseInt(e.labelFormat.substring(1, e.labelFormat.length), 10)), e.format = t.intl.getNumberFormat({ format: s ? "" : o, useGrouping: t.useGroupingSeparator }), e.startLabel = e.format(e.visibleRange.min), e.endLabel = e.format(e.visibleRange.max), e.visibleRange.interval && (e.visibleRange.interval + "").indexOf(".") >= 0 && (a = (e.visibleRange.interval + "").split(".")[1].length), i = h({}, n("properties", e.labelStyle), null, !0); r <= e.visibleRange.max; r += e.visibleRange.interval)Fi(r, e.visibleRange) && fn(t, r, this.formatValue(e, s, o, r), i, e); r && (r + "").indexOf(".") >= 0 && (r + "").split(".")[1].length > 10 && (r = (r + "").split(".")[1].length > (l || a) ? +r.toFixed(l || a) : r) <= e.visibleRange.max && fn(t, r, this.formatValue(e, s, o, r), i, e), e.getMaxLabelWidth && e.getMaxLabelWidth(this.chart) }, e.prototype.getFormat = function (e) { return e.labelFormat ? e.labelFormat : e.isStack100 ? "{value}%" : "" }, e.prototype.formatValue = function (e, t, i, n) { return t ? i.replace("{value}", e.format(n)) : e.format(n) }, e }(), mj = "legendRender", fj = "textRender", yj = "pointRender", vj = "seriesRender", wj = "axisLabelRender", bj = "axisRangeCalculated", Cj = "axisMultiLabelRender", Lj = "tooltipRender", Mj = "chartMouseMove", Sj = "chartMouseClick", xj = "chartMouseLeave", Tj = "chartMouseDown", Dj = "chartMouseUp", Aj = "zoomComplete", Ej = "dragComplete", jj = "annotationRender", Ij = "scrollEnd", kj = "scrollChanged", Pj = "stockEventRender", Nj = "multiLevelLabelClick", Oj = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Rj = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, zj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y("0")], t.prototype, "x", void 0), Rj([Y("0")], t.prototype, "y", void 0), Rj([Y(null)], t.prototype, "content", void 0), Rj([Y("Center")], t.prototype, "horizontalAlignment", void 0), Rj([Y("Pixel")], t.prototype, "coordinateUnits", void 0), Rj([Y("Chart")], t.prototype, "region", void 0), Rj([Y("Middle")], t.prototype, "verticalAlignment", void 0), Rj([Y(null)], t.prototype, "xAxisName", void 0), Rj([Y(null)], t.prototype, "yAxisName", void 0), Rj([Y(null)], t.prototype, "description", void 0), t }(ww), Bj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y("")], t.prototype, "color", void 0), Rj([Y(1)], t.prototype, "width", void 0), Rj([Y("Rectangle")], t.prototype, "type", void 0), t }(ww), Fj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y(null)], t.prototype, "start", void 0), Rj([Y(null)], t.prototype, "end", void 0), Rj([Y("")], t.prototype, "text", void 0), Rj([Y(null)], t.prototype, "maximumTextWidth", void 0), Rj([Y(null)], t.prototype, "customAttributes", void 0), Rj([Y("")], t.prototype, "type", void 0), t }(ww), Vj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y(!0)], t.prototype, "visible", void 0), Rj([Y(!1)], t.prototype, "startFromAxis", void 0), Rj([Y(null)], t.prototype, "start", void 0), Rj([Y(null)], t.prototype, "end", void 0), Rj([Y(null)], t.prototype, "size", void 0), Rj([Y("#808080")], t.prototype, "color", void 0), Rj([Y(null)], t.prototype, "dashArray", void 0), Rj([Y("Auto")], t.prototype, "sizeType", void 0), Rj([Y(!1)], t.prototype, "isRepeat", void 0), Rj([Y(null)], t.prototype, "repeatEvery", void 0), Rj([Y(null)], t.prototype, "repeatUntil", void 0), Rj([Y(!1)], t.prototype, "isSegmented", void 0), Rj([Y(null)], t.prototype, "segmentStart", void 0), Rj([Y(null)], t.prototype, "segmentEnd", void 0), Rj([Y(null)], t.prototype, "segmentAxisName", void 0), Rj([U({ color: "transparent", width: 1 }, BE)], t.prototype, "border", void 0), Rj([Y("")], t.prototype, "text", void 0), Rj([Y(null)], t.prototype, "rotation", void 0), Rj([Y("Middle")], t.prototype, "horizontalAlignment", void 0), Rj([Y("Middle")], t.prototype, "verticalAlignment", void 0), Rj([U(IE.stripLineLabelFont, zE)], t.prototype, "textStyle", void 0), Rj([Y("Behind")], t.prototype, "zIndex", void 0), Rj([Y(1)], t.prototype, "opacity", void 0), t }(ww), Wj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y("Center")], t.prototype, "alignment", void 0), Rj([Y("Wrap")], t.prototype, "overflow", void 0), Rj([U(IE.axisLabelFont, zE)], t.prototype, "textStyle", void 0), Rj([U({ color: null, width: 1, type: "Rectangle" }, Bj)], t.prototype, "border", void 0), Rj([G([], Fj)], t.prototype, "categories", void 0), t }(ww), Hj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y(null)], t.prototype, "minimum", void 0), Rj([Y(null)], t.prototype, "maximum", void 0), t }(ww), _j = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oj(t, e), Rj([Y(!1)], t.prototype, "enable", void 0), Rj([Y(null)], t.prototype, "pointsLength", void 0), Rj([U({}, Hj)], t.prototype, "range", void 0), t }(ww), Yj = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Uj = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, qj = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.axes = [], t.nearSizes = [], t.farSizes = [], t } return Yj(t, e), t.prototype.computeSize = function (e, t, i) { var n = 0; e.visible && (n += e.findTickSize(e.crossInAxis) + i + e.findLabelSize(e.crossInAxis, 5) + .5 * e.lineStyle.width), e.opposedPosition ? this.farSizes.push(n) : this.nearSizes.push(n) }, Uj([Y("100%")], t.prototype, "height", void 0), Uj([U({}, BE)], t.prototype, "border", void 0), t }(ww), Gj = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.axes = [], t.nearSizes = [], t.farSizes = [], t.padding = 0, t } return Yj(t, e), t.prototype.computeSize = function (e, t, i) { var n = 0; e.visible && (n += e.findTickSize(e.crossInAxis) + i + e.findLabelSize(e.crossInAxis, 5) + .5 * e.lineStyle.width), e.opposedPosition ? this.farSizes.push(n) : this.nearSizes.push(n) }, Uj([Y("100%")], t.prototype, "width", void 0), Uj([U({}, BE)], t.prototype, "border", void 0), t }(ww), Qj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Yj(t, e), Uj([Y(1)], t.prototype, "width", void 0), Uj([Y("")], t.prototype, "dashArray", void 0), Uj([Y(null)], t.prototype, "color", void 0), t }(ww), Xj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Yj(t, e), Uj([Y(.7)], t.prototype, "width", void 0), Uj([Y("")], t.prototype, "dashArray", void 0), Uj([Y(null)], t.prototype, "color", void 0), t }(ww), Jj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Yj(t, e), Uj([Y(1)], t.prototype, "width", void 0), Uj([Y("")], t.prototype, "dashArray", void 0), Uj([Y(null)], t.prototype, "color", void 0), t }(ww), Zj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Yj(t, e), Uj([Y(1)], t.prototype, "width", void 0), Uj([Y(5)], t.prototype, "height", void 0), Uj([Y(null)], t.prototype, "color", void 0), t }(ww), Kj = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Yj(t, e), Uj([Y(.7)], t.prototype, "width", void 0), Uj([Y(5)], t.prototype, "height", void 0), Uj([Y(null)], t.prototype, "color", void 0), t }(ww), $j = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Yj(t, e), Uj([Y(!1)], t.prototype, "enable", void 0), Uj([Y(null)], t.prototype, "fill", void 0), Uj([U(IE.crosshairLabelFont, zE)], t.prototype, "textStyle", void 0), t }(ww), eI = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i, n, r) || this; return o.visibleLabels = [], o.series = [], o.rect = new ej(void 0, void 0, 0, 0), o.axisBottomLine = null, o.intervalDivs = [10, 5, 2, 1], o.angle = o.labelRotation, o.isStack100 = !1, o.crossAt = null, o.updatedRect = null, o.multiLevelLabelHeight = 0, o.isChart = !0, o } return Yj(t, e), t.prototype.findTickSize = function (e) { return "Inside" === this.tickPosition ? 0 : !e || e.visibleRange && !this.isInside(e.visibleRange) ? this.majorTickLines.height : 0 }, t.prototype.isInside = function (e) { return Bi(this.crossAt, e) || !this.opposedPosition && this.crossAt >= e.max || this.opposedPosition && this.crossAt <= e.min }, t.prototype.findLabelSize = function (e, t) { var i = 0; if (this.title && (i = xi(this.title, this.titleStyle).height + t), "Inside" === this.labelPosition) return i + t; var n, r, o = i + t + 10 + ("Vertical" === this.orientation ? this.maxLabelSize.width : this.maxLabelSize.height) + this.multiLevelLabelHeight; if (e && this.placeNextToAxisLine) { var s = e.visibleRange, a = "Horizontal" === e.orientation ? e.rect.width : e.rect.height; if (!s || !a) return 0; this.isInside(s) && (o = (n = (r = this.findDifference(e)) * ((a - ((n = r * (a / s.delta)) < o ? o - n : 0)) / s.delta)) < o ? o - n : 0) } return o }, t.prototype.updateCrossValue = function (e) { var t = this.crossAt; if (null === t || !this.isInside(this.crossInAxis.visibleRange)) return this.updatedRect = this.rect, null; var i = this.crossInAxis.visibleRange; this.opposedPosition ? this.crossAt < i.min && (t = i.min) : this.crossAt > i.max && (t = i.max), this.updatedRect = h({}, this.rect, null, !0), "Horizontal" === this.orientation ? (t = this.crossInAxis.rect.height - Xi(t, this.crossInAxis) * this.crossInAxis.rect.height, this.updatedRect.y = this.crossInAxis.rect.y + t) : (t = Xi(t, this.crossInAxis) * this.crossInAxis.rect.width, this.updatedRect.x = this.crossInAxis.rect.x + t) }, t.prototype.findDifference = function (e) { var t = 0; return t = this.opposedPosition ? e.isInversed ? e.visibleRange.min : e.visibleRange.max : e.isInversed ? e.visibleRange.max : e.visibleRange.min, Math.abs(this.crossAt - t) }, t.prototype.calculateVisibleRange = function (e) { if (this.zoomFactor < 1 || this.zoomPosition > 0) { var t = this.actualRange, i = void 0, n = void 0; n = this.isInversed ? (i = this.actualRange.max - this.zoomPosition * this.actualRange.delta) - this.zoomFactor * this.actualRange.delta : (i = this.actualRange.min + this.zoomPosition * this.actualRange.delta) + this.zoomFactor * this.actualRange.delta, i < t.min && (n += t.min - i, i = t.min), n > t.max && (i -= n - t.max, n = t.max), this.doubleRange = new uj(i, n), this.visibleRange = { min: this.doubleRange.start, max: this.doubleRange.end, delta: this.doubleRange.delta, interval: this.visibleRange.interval } } }, t.prototype.triggerRangeRender = function (e, t, i, n) { var r; r = { cancel: !1, name: bj, axis: this, minimum: t, maximum: i, interval: n }, e.trigger(bj, r), r.cancel || (this.visibleRange = { min: r.minimum, max: r.maximum, interval: r.interval, delta: r.maximum - r.minimum }) }, t.prototype.getRangePadding = function (e) { var t = this.rangePadding; if ("Auto" !== t) return t; switch (this.orientation) { case "Horizontal": t = e.requireInvertedAxis ? this.isStack100 || this.baseModule.chart.stockChart ? "Round" : "Normal" : "None"; break; case "Vertical": t = e.requireInvertedAxis ? "None" : this.isStack100 || this.baseModule.chart.stockChart ? "Round" : "Normal" }return t }, t.prototype.getMaxLabelWidth = function (e) { var t, i, n = 0, r = !1; this.angle = this.labelRotation, this.maxLabelSize = new $E(0, 0); for (var o, s = this.labelIntersectAction, a = 0, l = this.visibleLabels.length; a < l; a++) { (i = Pi((o = this.visibleLabels[a]).originalText)) ? (o.size = xi(o.originalText.replace(/<br>/g, " "), this.labelStyle), o.breakLabelSize = xi(this.enableTrim ? o.text.join("<br>") : o.originalText, this.labelStyle)) : o.size = xi(o.text, this.labelStyle); var h = i ? o.breakLabelSize.width : o.size.width; h > this.maxLabelSize.width && (this.maxLabelSize.width = h, this.rotatedLabel = o.text); var d = i ? o.breakLabelSize.height : o.size.height; if (d > this.maxLabelSize.height && (this.maxLabelSize.height = d), i && (o.text = this.enableTrim ? o.text : o.originalText.split("<br>")), "None" !== s && "Hide" !== s && "Trim" !== s && ("None" !== s || this.angle % 360 == 0) && "Horizontal" === this.orientation && this.rect.width > 0 && !r) { var c = i ? o.breakLabelSize.width : o.size.width, p = i ? o.breakLabelSize.height : o.size.height; switch (t = Xi(o.value, this) * this.rect.width + this.rect.x, t -= c / 2, "Shift" === this.edgeLabelPlacement && (0 === a && t < this.rect.x && (t = this.rect.x), a === this.visibleLabels.length - 1 && t + c > this.rect.x + this.rect.width && (t = this.rect.x + this.rect.width - c)), s) { case "MultipleRows": a > 0 && this.findMultiRows(a, t, o, i); break; case "Rotate45": case "Rotate90": a > 0 && (this.isInversed ? t + c >= n : t <= n) && (this.angle = "Rotate45" === s ? 45 : 90, r = !0); break; default: if (i) { for (var u = void 0, g = [], m = void 0, f = 0; f < o.text.length; f++)if ((u = rr(o.text[f], this.rect.width / this.visibleLabels.length, this.labelStyle)).length > 1) for (var y = 0; y < u.length; y++)m = u[y], g.push(m); else g.push(u[0]); o.text = g } else o.text = rr(o.text, this.rect.width / this.visibleLabels.length, this.labelStyle); var v = p * o.text.length; v > this.maxLabelSize.height && (this.maxLabelSize.height = v) }n = this.isInversed ? t : t + c } } 0 !== this.angle && "Horizontal" === this.orientation && (Pi(this.rotatedLabel) ? this.maxLabelSize = xi(this.rotatedLabel, this.labelStyle) : this.maxLabelSize = Ni(this.labelStyle, this.rotatedLabel, this.angle, e)), e.multiLevelLabelModule && this.multiLevelLabels.length > 0 && e.multiLevelLabelModule.getMultilevelLabelsHeight(this) }, t.prototype.findMultiRows = function (e, t, i, n) { for (var r, o, s, a = [], l = e - 1; l >= 0; l--)r = this.visibleLabels[l], s = n ? r.breakLabelSize.width : r.size.width, o = Xi(r.value, this) * this.rect.width + this.rect.x, (this.isInversed ? t + i.size.width > o - .5 * s : t < o + .5 * s) ? (a.push(r.index), i.index = i.index > r.index ? i.index : r.index + 1) : i.index = a.indexOf(r.index) > -1 ? i.index : r.index; var h = (n ? i.breakLabelSize.height : i.size.height) * i.index + 5 * (i.index - 1); h > this.maxLabelSize.height && (this.maxLabelSize.height = h) }, t.prototype.getModule = function (e) { "Double" === this.valueType ? this.baseModule = new gj(e) : this.baseModule = e[an(this.valueType) + "Module"] }, Uj([U(IE.axisLabelFont, zE)], t.prototype, "labelStyle", void 0), Uj([U({}, $j)], t.prototype, "crosshairTooltip", void 0), Uj([Y("")], t.prototype, "title", void 0), Uj([U(IE.axisTitleFont, zE)], t.prototype, "titleStyle", void 0), Uj([Y("")], t.prototype, "labelFormat", void 0), Uj([Y("")], t.prototype, "skeleton", void 0), Uj([Y("DateTime")], t.prototype, "skeletonType", void 0), Uj([Y(0)], t.prototype, "plotOffset", void 0), Uj([Y(!1)], t.prototype, "isIndexed", void 0), Uj([Y(10)], t.prototype, "logBase", void 0), Uj([Y(0)], t.prototype, "columnIndex", void 0), Uj([Y(0)], t.prototype, "rowIndex", void 0), Uj([Y(1)], t.prototype, "span", void 0), Uj([Y(null)], t.prototype, "desiredIntervals", void 0), Uj([Y(3)], t.prototype, "maximumLabels", void 0), Uj([Y(1)], t.prototype, "zoomFactor", void 0), Uj([Y(0)], t.prototype, "zoomPosition", void 0), Uj([Y(!1)], t.prototype, "opposedPosition", void 0), Uj([Y(!0)], t.prototype, "enableAutoIntervalOnZooming", void 0), Uj([Y("Auto")], t.prototype, "rangePadding", void 0), Uj([Y("Double")], t.prototype, "valueType", void 0), Uj([Y("None")], t.prototype, "edgeLabelPlacement", void 0), Uj([Y("Auto")], t.prototype, "intervalType", void 0), Uj([Y("BetweenTicks")], t.prototype, "labelPlacement", void 0), Uj([Y("Outside")], t.prototype, "tickPosition", void 0), Uj([Y("Outside")], t.prototype, "labelPosition", void 0), Uj([Y("")], t.prototype, "name", void 0), Uj([Y(!0)], t.prototype, "visible", void 0), Uj([Y(0)], t.prototype, "minorTicksPerInterval", void 0), Uj([Y(0)], t.prototype, "labelRotation", void 0), Uj([Y(null)], t.prototype, "crossesAt", void 0), Uj([Y(!0)], t.prototype, "placeNextToAxisLine", void 0), Uj([Y(null)], t.prototype, "crossesInAxis", void 0), Uj([Y(null)], t.prototype, "minimum", void 0), Uj([Y(null)], t.prototype, "maximum", void 0), Uj([Y(null)], t.prototype, "interval", void 0), Uj([Y(34)], t.prototype, "maximumLabelWidth", void 0), Uj([Y(!1)], t.prototype, "enableTrim", void 0), Uj([U({}, Zj)], t.prototype, "majorTickLines", void 0), Uj([U({}, Kj)], t.prototype, "minorTickLines", void 0), Uj([U({}, Qj)], t.prototype, "majorGridLines", void 0), Uj([U({}, Xj)], t.prototype, "minorGridLines", void 0), Uj([U({}, Jj)], t.prototype, "lineStyle", void 0), Uj([Y("Trim")], t.prototype, "labelIntersectAction", void 0), Uj([Y(!1)], t.prototype, "isInversed", void 0), Uj([Y(100)], t.prototype, "coefficient", void 0), Uj([Y(0)], t.prototype, "startAngle", void 0), Uj([Y(null)], t.prototype, "description", void 0), Uj([Y(2)], t.prototype, "tabIndex", void 0), Uj([G([], Vj)], t.prototype, "stripLines", void 0), Uj([G([], Wj)], t.prototype, "multiLevelLabels", void 0), Uj([U({ color: null, width: 0, type: "Rectangle" }, Bj)], t.prototype, "border", void 0), Uj([U({}, _j)], t.prototype, "scrollbarSettings", void 0), t }(ww), tI = function () { return function (e, t, i, n, r, o, s) { void 0 === r && (r = new $E(0, 0)), void 0 === o && (o = new $E(0, 0)), void 0 === s && (s = 1), this.text = e, this.originalText = n, this.value = t, this.labelStyle = i, this.size = r, this.breakLabelSize = o, this.index = 1 } }(), iI = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), nI = function () { return function (e, t, i, n, r, o) { this.verticalStandardMean = e, this.horizontalStandardMean = i, this.verticalSquareRoot = t, this.horizontalSquareRoot = n, this.verticalMean = r, this.horizontalMean = o } }(), rI = function () { return function (e, t, i, n, r) { this.startAngle = e, this.endAngle = t, this.innerRadius = i, this.radius = n, this.currentXPosition = r } }(), oI = function () { return function (e) { this.id = e } }(), sI = function () { return function (e, t) { this.startValues = e, this.endValues = t } }(), aI = function (e) { function t(t, i, n, r, o, s, a, l, h) { var d = e.call(this, t, i, n.width, n.color, r, h) || this; return d.y = o.y, d.x = o.x, d.height = o.height, d.width = o.width, d.rx = s || 0, d.ry = a || 0, d.transform = l || "", d.stroke = 0 !== n.width && "" !== d.stroke ? n.color : "transparent", d } return iI(t, e), t }(rj), lI = function (e) { function t(t, i, n, r, o, s, a) { var l = e.call(this, t, i, n.width, n.color, r) || this; return l.cy = s, l.cx = o, l.r = a, l } return iI(t, e), t }(rj), hI = function () { return function (e, t, i) { this.id = e, this.points = t, this.fill = i } }(), dI = function () { return function (e, t) { this.x = e, this.y = t } }(), cI = function () { return function (e, t, i, n) { this.left = e, this.right = t, this.top = i, this.bottom = n } }(), pI = function () { return function (e, t, i) { this.r = e, this.g = t, this.b = i } }(), uI = function () { return function (e, t, i) { void 0 === i && (i = 0), this.point = e, this.series = t, this.lierIndex = i } }(), gI = function () { return function (e, t, i) { void 0 === i && (i = 0), this.point = e, this.series = t } }(), mI = function () { return function (e, t) { this.controlPoint1 = e, this.controlPoint2 = t } }(), fI = function () { function e(e) { this.chart = e, this.padding = 5 } return e.prototype.measureAxis = function (e) { var t = this.chart; this.crossAt(t), this.seriesClipRect = new ej(e.x, e.y, e.width, e.height), this.initialClipRect = e, this.leftSize = 0, this.rightSize = 0, this.topSize = 0, this.bottomSize = 0, this.measureRowAxis(t, this.initialClipRect), this.initialClipRect = Yi(this.initialClipRect, new cI(this.leftSize, this.rightSize, 0, 0)), this.measureColumnAxis(t, this.initialClipRect), this.initialClipRect = Yi(this.initialClipRect, new cI(0, 0, this.topSize, this.bottomSize)), this.chart.delayRedraw || this.calculateAxisSize(this.initialClipRect), this.leftSize = 0, this.rightSize = 0, this.topSize = 0, this.bottomSize = 0, this.measureRowAxis(t, this.initialClipRect), this.seriesClipRect = Yi(this.seriesClipRect, new cI(this.leftSize, this.rightSize, 0, 0)), this.measureColumnAxis(t, this.initialClipRect), this.seriesClipRect = Yi(this.seriesClipRect, new cI(0, 0, this.topSize, this.bottomSize)), this.chart.delayRedraw || (t.refreshAxis(), this.calculateAxisSize(this.seriesClipRect)) }, e.prototype.measureRowAxis = function (e, t) { var i; this.calculateRowSize(t); for (var n = 0, r = e.rows; n < r.length; n++) { (i = r[n]).nearSizes = [], i.farSizes = [], this.arrangeAxis(i), this.measureDefinition(i, e, new $E(e.availableSize.width, i.computedHeight), t), this.leftSize < Hi(i.nearSizes) && (this.leftSize = Hi(i.nearSizes)), this.rightSize < Hi(i.farSizes) && (this.rightSize = Hi(i.farSizes)) } }, e.prototype.measureColumnAxis = function (e, t) { var i; this.calculateColumnSize(t); for (var n = 0, r = e.columns; n < r.length; n++) { (i = r[n]).farSizes = [], i.nearSizes = [], this.arrangeAxis(i), this.measureDefinition(i, e, new $E(i.computedWidth, e.availableSize.height), t), this.bottomSize < Hi(i.nearSizes) && (this.bottomSize = Hi(i.nearSizes)), this.topSize < Hi(i.farSizes) && (this.topSize = Hi(i.farSizes)) } }, e.prototype.measureDefinition = function (e, t, i, n) { for (var r = 0, o = e.axes; r < o.length; r++) { var s = o[r]; s.scrollBarHeight = t.scrollBarModule && t.zoomSettings.enableScrollbar && t.zoomModule.isZoomed && (s.zoomFactor < 1 || s.zoomPosition > 0) ? 16 : 0, s.scrollBarHeight = t.scrollBarModule && (t.zoomModule && t.zoomSettings.enableScrollbar && t.zoomModule.isZoomed && (s.zoomFactor < 1 || s.zoomPosition > 0) || s.scrollbarSettings.enable) ? 16 : 0, s.getModule(t), s.baseModule.calculateRangeAndInterval(i, s), e.computeSize(s, n, s.scrollBarHeight) } e.farSizes.length > 0 && (e.farSizes[e.farSizes.length - 1] -= 10), e.nearSizes.length > 0 && (e.nearSizes[e.nearSizes.length - 1] -= 10) }, e.prototype.calculateAxisSize = function (e) { var t, i, n, r, o, s, a = this.chart, l = 0, h = 0, d = 0; this.calculateRowSize(e); for (var c = 0, p = a.rows.length; c < p; c++) { l = 0, h = 0; for (var u = 0, g = (t = a.rows[c]).axes.length; u < g; u++) { if (0 === (r = t.axes[u]).rect.height) { r.rect.height = t.computedHeight, d = 0; for (var m = c + 1, f = c + r.span; m < f; m++)d += (n = a.rows[m]).computedHeight; r.rect.y = t.computedTop - d + r.plotOffset, r.rect.height = r.rect.height + d - 2 * r.plotOffset, r.rect.width = 0 } r.opposedPosition ? (o = e.x + e.width + Hi(Qi(t.farSizes, h)), r.rect.x = r.rect.x >= o ? r.rect.x : o, h++) : (o = e.x - Hi(Qi(t.nearSizes, l)), r.rect.x = r.rect.x <= o ? r.rect.x : o, l++) } } this.calculateColumnSize(e); for (c = 0, p = a.columns.length; c < p; c++) { l = 0, h = 0; u = 0; for (var y = (i = a.columns[c]).axes.length; u < y; u++) { if (0 === (r = i.axes[u]).rect.width) { m = c; for (var v = c + r.span; m < v; m++)n = a.columns[m], r.rect.width += n.computedWidth; r.rect.x = i.computedLeft + r.plotOffset, r.rect.width -= 2 * r.plotOffset, r.rect.height = 0 } r.opposedPosition ? (s = e.y - Hi(Qi(i.farSizes, h)), r.rect.y = r.rect.y <= s ? r.rect.y : s, h++) : (s = e.y + e.height + Hi(Qi(i.nearSizes, l)), r.rect.y = r.rect.y >= s ? r.rect.y : s, l++) } } }, e.prototype.measure = function () { for (var e, t, i, n, r, o = this.chart, s = 0, a = o.axisCollections; s < a.length; s++) { var l = a[s]; if ("Vertical" === l.orientation) { o.verticalAxes.push(l), n = this.getActualRow(l), e = o.rows[n], this.pushAxis(e, l), r = n + l.span > o.rows.length ? o.rows.length : n + l.span; for (var h = n + 1; h < r; h++)(i = o.rows[h]).axes[e.axes.length - 1] = l, o.rows[h] = i; o.rows[n] = e } else { o.horizontalAxes.push(l), n = this.getActualColumn(l), t = o.columns[n], this.pushAxis(t, l), r = n + l.span > o.columns.length ? o.columns.length : n + l.span; for (h = n + 1; h < r; h++)(i = o.columns[h]).axes[t.axes.length - 1] = l, o.columns[h] = i; o.columns[n] = t } } }, e.prototype.crossAt = function (e) { for (var t = 0, i = e.axisCollections; t < i.length; t++) { var n = i[t]; if (null !== n.crossesAt) if (n.crossesInAxis) for (var r = 2, o = e.axisCollections.length; r < o; r++)n.crossesInAxis !== e.axisCollections[r].name || (n.crossInAxis = e.axisCollections[r], n.crossAt = this.updateCrossAt(n.crossInAxis, n.crossesAt)); else e.requireInvertedAxis ? n.crossInAxis = "Horizontal" === n.orientation ? e.primaryXAxis : e.primaryYAxis : n.crossInAxis = "Horizontal" === n.orientation ? e.primaryYAxis : e.primaryXAxis, n.crossAt = this.updateCrossAt(n.crossInAxis, n.crossesAt) } }, e.prototype.updateCrossAt = function (e, t) { switch (e.valueType) { case "DateTime": var i = { skeleton: "full", type: "dateTime" }, n = this.chart.intl.getDateParser(i), r = this.chart.intl.getDateFormat(i); return Date.parse(n(r(new Date(JD.parse.parseJson({ val: t }).val)))); case "Category": return parseFloat(t) ? parseFloat(t) : e.labels.indexOf(t); case "Logarithmic": return Ri(t, e.logBase); default: return t } }, e.prototype.pushAxis = function (e, t) { for (var i = 0, n = e.axes.length; i <= n; i++)if (!e.axes[i]) { e.axes[i] = t; break } }, e.prototype.arrangeAxis = function (e) { for (var t = [], i = 0, n = e.axes.length; i <= n; i++)e.axes[i] && t.push(e.axes[i]); e.axes = t }, e.prototype.getActualColumn = function (e) { var t = this.chart.columns.length, i = e.columnIndex; return i >= t ? t - 1 : i < 0 ? 0 : i }, e.prototype.getActualRow = function (e) { var t = this.chart.rows.length, i = e.rowIndex; return i >= t ? t - 1 : i < 0 ? 0 : i }, e.prototype.calculateRowSize = function (e) { for (var t, i = this.chart, n = e.y + e.height, r = 0, o = Math.max(0, e.height), s = 0, a = i.rows.length; s < a; s++)r = -1 !== (t = i.rows[s]).height.indexOf("%") ? Math.min(o, e.height * parseInt(t.height, 10) / 100) : Math.min(o, parseInt(t.height, 10)), r = s !== a - 1 ? r : o, t.computedHeight = r, n -= r, t.computedTop = n, o -= r }, e.prototype.calculateColumnSize = function (e) { for (var t, i = this.chart, n = e.x, r = 0, o = Math.max(0, e.width), s = 0, a = i.columns.length; s < a; s++)r = -1 !== (t = i.columns[s]).width.indexOf("%") ? Math.min(o, e.width * parseInt(t.width, 10) / 100) : Math.min(o, parseInt(t.width, 10)), r = s !== a - 1 ? r : o, t.computedWidth = r, t.computedLeft = n, n += r, o -= r }, e.prototype.renderAxes = function () { for (var e, t, i, n = this.chart, r = n.renderer.createGroup({ id: n.element.id + "AxisInsideCollection" }), o = n.renderer.createGroup({ id: n.element.id + "AxisOutsideCollection" }), s = 0, a = n.axisCollections.length; s < a; s++)e = n.axisCollections[s], this.element = n.renderer.createGroup({ id: n.element.id + "AxisGroup" + s + "Inside" }), t = n.renderer.createGroup({ id: n.element.id + "AxisGroup" + s + "Outside" }), i = this.findAxisPosition(e), "Horizontal" === e.orientation ? (e.updateCrossValue(n), e.visible && e.lineStyle.width > 0 && this.drawAxisLine(e, s, e.plotOffset, 0, i ? t : this.element, e.updatedRect), (e.majorGridLines.width > 0 || e.majorTickLines.width > 0) && this.drawXAxisGridLine(e, s, i || "Inside" === e.tickPosition ? t : this.element, e.updatedRect), e.visible && (this.drawXAxisLabels(e, s, i || "Inside" === e.labelPosition ? t : this.element, e.placeNextToAxisLine ? e.updatedRect : e.rect), this.drawXAxisBorder(e, s, i || "Inside" === e.labelPosition ? t : this.element, e.placeNextToAxisLine ? e.updatedRect : e.rect), this.drawXAxisTitle(e, s, i ? t : this.element, e.placeNextToAxisLine ? e.updatedRect : e.rect))) : (e.updateCrossValue(n), e.visible && e.lineStyle.width > 0 && this.drawAxisLine(e, s, 0, e.plotOffset, i ? t : this.element, e.updatedRect), (e.majorGridLines.width > 0 || e.majorTickLines.width > 0) && this.drawYAxisGridLine(e, s, i || "Inside" === e.tickPosition ? t : this.element, e.updatedRect), e.visible && (this.drawYAxisLabels(e, s, i || "Inside" === e.labelPosition ? t : this.element, e.placeNextToAxisLine ? e.updatedRect : e.rect), this.drawYAxisBorder(e, s, i || "Inside" === e.labelPosition ? t : this.element, e.placeNextToAxisLine ? e.updatedRect : e.rect), this.drawYAxisTitle(e, s, i ? t : this.element, e.placeNextToAxisLine ? e.updatedRect : e.rect))), this.chart.enableCanvas || (r.appendChild(this.element), t && t.childNodes.length > 0 && o.appendChild(t)), n.scrollBarModule && (n.zoomSettings.enableScrollbar || e.scrollbarSettings.enable) && this.renderScrollbar(n, e); this.element = n.renderer.createGroup({ id: n.element.id + "DefinitionLine" }); var l = 0; for (a = n.rows.length; l < a; l++) { var h = n.rows[l]; h.border.color && this.drawBottomLine(h, l, !0) } for (l = 0, a = n.columns.length; l < a; l++) { var d = n.columns[l]; d.border.color && this.drawBottomLine(d, l, !1) } return this.chart.enableCanvas || r.appendChild(this.element), kn(n.enableCanvas, n.svgObject, r, n.redraw), o }, e.prototype.renderScrollbar = function (e, t) { (!d(e.zoomModule) && e.zoomModule.isZoomed && (t.zoomFactor < 1 || t.zoomPosition > 0) || t.scrollbarSettings.enable && (t.zoomFactor <= 1 || t.zoomPosition >= 0)) && !t.zoomingScrollBar.isScrollUI ? (e.scrollElement || (e.scrollElement = Zn(e.redraw, e.element.id + "_scrollElement") || M("div", { id: e.element.id + "_scrollElement" })), kn(!1, e.scrollElement, t.zoomingScrollBar.render(!0), !0)) : 1 === t.zoomFactor && 0 === t.zoomPosition && t.zoomingScrollBar.svgObject && !t.scrollbarSettings.enable && t.zoomingScrollBar.destroy(), t.zoomingScrollBar.isScrollUI && (t.zoomingScrollBar.isScrollUI = !1) }, e.prototype.findAxisPosition = function (e) { return null !== e.crossAt && e.isInside(e.crossInAxis.visibleRange) }, e.prototype.drawBottomLine = function (e, t, i) { var n, r, o, s, a, l = this.chart, h = {}; i ? (o = s = (e = e).computedTop + e.computedHeight, r = (n = this.seriesClipRect.x) + this.seriesClipRect.width, a = "Row") : (n = r = (e = e).computedLeft, s = (o = this.seriesClipRect.y) + this.seriesClipRect.height, a = "Column"), h = { id: l.element.id + "_AxisBottom_" + a + t, x1: n, y1: o, x2: r, y2: s, "stroke-width": e.border.width, stroke: e.border.color }, this.htmlObject = l.renderer.drawLine(h), this.element.appendChild(this.htmlObject) }, e.prototype.drawAxisLine = function (e, t, i, n, r, o) { var s = this.chart, a = {}, l = Sn(s.element.id + "AxisLine_" + t), h = l ? l.getAttribute("d") : ""; l = null, a = { id: s.element.id + "AxisLine_" + t, d: "M " + (o.x - i) + " " + (o.y - n) + " L " + (o.x + o.width + i) + " " + (o.y + o.height + n), "stroke-dasharray": e.lineStyle.dashArray, "stroke-width": e.lineStyle.width, stroke: e.lineStyle.color || s.themeStyle.axisLine }, this.htmlObject = s.renderer.drawPath(a), kn(s.enableCanvas, r, this.htmlObject, s.redraw, !0, "x", "y", null, h) }, e.prototype.drawYAxisGridLine = function (e, t, i, n) { var r, o, s = 0, a = "", l = "", h = e.opposedPosition ? e.majorTickLines.height : -e.majorTickLines.height, c = e.opposedPosition ? .5 * e.lineStyle.width : .5 * -e.lineStyle.width, p = "Category" === e.valueType && "BetweenTicks" === e.labelPlacement ? .5 : 0, u = d(e.crossesAt) ? e.opposedPosition ? e.scrollBarHeight : -e.scrollBarHeight : 0, g = "Inside" === e.tickPosition, m = g ? n.x - h - c : n.x + h + c + u, f = e.visibleLabels.length, y = this.chart.themeStyle; e.valueType.indexOf("Category") && "BetweenTicks" === e.labelPlacement && f > 0 && (f += 1); for (var v = e.minorGridLines, w = e.minorTickLines, b = 0; b < f; b++)(s = -1 * (s = Xi(r = e.visibleLabels[b] ? e.visibleLabels[b].value - p : e.visibleLabels[b - 1].value + e.visibleRange.interval - p, e) * n.height) + (n.y + n.height)) >= n.y && n.y + n.height >= s && ((Bi(r, e.visibleRange) || this.isBorder(e, b, s)) && (a = "M " + this.seriesClipRect.x + " " + s + " L " + (this.seriesClipRect.x + this.seriesClipRect.width) + " " + s, this.renderGridLine(e, t, a, e.majorGridLines, "_MajorGridLine_", b, this.element, y.majorGridLine, e.majorGridLines.dashArray)), l = "M " + (n.x + c + (g ? u : 0)) + " " + s + " L " + m + " " + s, this.renderGridLine(e, t, l, e.majorTickLines, "_MajorTickLine_", b, i, y.majorTickLine), (v.width > 0 || w.width > 0) && e.minorTicksPerInterval > 0 && (o = this.drawAxisMinorLine(e, r, n, b), this.renderGridLine(e, t, o[0], v, "_MinorGridLine_", b, this.element, y.minorGridLine, v.dashArray), this.renderGridLine(e, t, o[1], w, "_MinorTickLine_", b, i, y.minorTickLine))) }, e.prototype.isBorder = function (e, t, i) { var n = this.chart.chartArea.border, r = this.seriesClipRect, o = e.orientation, s = "Horizontal" === o ? r.x : r.y, a = "Horizontal" === o ? r.width : r.height, l = "Horizontal" === o ? 0 : e.visibleLabels.length - 1, h = "Horizontal" === o ? e.visibleLabels.length - 1 : 0; return e.plotOffset > 0 || ((i === s || i === s + a) && (n.width <= 0 || "transparent" === n.color) || (i !== s && t === l || i !== s + a && t === h)) }, e.prototype.drawYAxisLabels = function (e, t, i, n) { var r, o, s, a = this.chart, l = 0, h = 0, c = "Inside" === e.labelPosition, p = e.opposedPosition, u = (e.labelPosition === e.tickPosition ? e.majorTickLines.height : 0) + this.padding + .5 * e.lineStyle.width; u = e.opposedPosition ? u : -u; for (var g = p && c || !p && !c ? "end" : "start", m = a.renderer.createGroup({ id: a.element.id + "AxisLabels" + t }), f = d(e.crossesAt) ? e.scrollBarHeight * (p ? 1 : -1) : 0, y = 0, v = e.visibleLabels.length; y < v; y++) { if (s = Pi(e.visibleLabels[y].originalText), l = c ? n.x - u : n.x + u + f, r = s ? e.visibleLabels[y].breakLabelSize : e.visibleLabels[y].size, h = Xi(e.visibleLabels[y].value, e) * n.height + (a.stockChart ? 7 : 0), h = Math.floor(-1 * h + (n.y + n.height)), h = s ? h - r.height / 8 * e.visibleLabels[y].text.length / 2 : h + r.height / 4, o = new nj(a.element.id + t + "_AxisLabel_" + y, l, h, g, e.visibleLabels[y].text), e.edgeLabelPlacement) switch (e.edgeLabelPlacement) { case "None": break; case "Hide": ((0 === y || e.isInversed && y === v - 1) && o.y > n.y + n.height || (y === v - 1 || e.isInversed && 0 === y) && o.y - .5 * r.height < n.y) && (o.text = ""); break; case "Shift": (0 === y || e.isInversed && y === v - 1) && o.y > n.y + n.height ? o.y = h = n.y + n.height : (y === v - 1 || e.isInversed && 0 === y) && o.y - .5 * r.height < n.y && (o.y = h = n.y + .5 * r.height) }$n(a.renderer, o, e.labelStyle, e.labelStyle.color || a.themeStyle.axisLabel, m, !1, a.redraw, !0, !0) } this.chart.enableCanvas || (a.delayRedraw ? e.visible && this.createZoomingLabel(this.chart, m, e, t, n) : kn(a.enableCanvas, i, m, a.redraw)) }, e.prototype.drawYAxisBorder = function (e, t, i, n) { if (e.border.width > 0) { var r = void 0, o = void 0, s = "Outside" === e.labelPosition ? e.scrollBarHeight : 0; s = (e.opposedPosition ? 1 : -1) * s; for (var a = n.height / e.visibleRange.delta * ("DateTime" === e.valueType ? e.dateTimeInterval : e.visibleRange.interval), l = void 0, h = e.maxLabelSize.width + 10 + (e.tickPosition === e.labelPosition ? e.majorTickLines.height : 0), d = "", c = "Category" === e.valueType && "BetweenTicks" === e.labelPlacement ? -.5 : 0, p = e.opposedPosition && "Inside" === e.labelPosition || !e.opposedPosition && "Outside" === e.labelPosition ? n.x - h + s : n.x + h + s, u = 0, g = e.visibleLabels.length; u < g; u++)switch (o = Xi(e.visibleLabels[u].value + c, e), o = (e.isInversed ? 1 - o : o) * n.height, "Category" === e.valueType && "BetweenTicks" === e.labelPlacement ? (r = -1 * o + (n.y + n.height), l = -1 * o - a + (n.y + n.height)) : (r = -1 * o + a / 2 + (n.y + n.height), l = -1 * o - a / 2 + (n.y + n.height)), e.border.type) { case "Rectangle": case "WithoutTopBorder": r > n.y + n.height ? d += "M " + p + " " + (n.y + n.height) + " L " + p + " " + l + " " : Math.floor(n.y) > l ? d += "M " + (n.x + s) + " " + r + " L " + p + " " + r + " L " + p + " " + n.y + " " : (d += "M " + (n.x + s) + " " + r + " L " + p + " " + r + " L " + p + " " + l + " ", u === e.visibleLabels.length - 1 && (d += "M " + (n.x + s) + " " + l + " L " + p + " " + l + " ")); break; case "WithoutTopandBottomBorder": r > n.y + n.height || l < Math.floor(n.y) || (d += "M " + (n.x + s) + " " + r + " L " + p + " " + r + " M " + p + " " + l + " L " + (n.x + s) + " " + l) }"" !== (d += "Rectangle" === e.border.type ? "M " + (n.x + s) + " " + n.y + " L " + (n.x + s) + " " + (n.y + n.height) + " " : "") && this.createAxisBorderElement(e, t, d, i) } e.multiLevelLabels.length > 0 && this.chart.multiLevelLabelModule && this.chart.multiLevelLabelModule.renderYAxisMultiLevelLabels(e, t, i, n) }, e.prototype.drawYAxisTitle = function (e, t, i, n) { var r = this.chart, o = e.opposedPosition ? 90 : -90, s = ("Inside" === e.tickPosition ? 0 : e.majorTickLines.height + this.padding) + ("Inside" === e.labelPosition ? 0 : e.maxLabelSize.width + e.multiLevelLabelHeight + this.padding); s = e.opposedPosition ? s + e.scrollBarHeight : -s - e.scrollBarHeight; var a = n.x + s, l = n.y + .5 * n.height, h = new nj(r.element.id + "_AxisTitle_" + t, a, l - this.padding, "middle", e.title, "rotate(" + o + "," + a + "," + l + ")", null, o), d = $n(r.renderer, h, e.titleStyle, e.titleStyle.color || r.themeStyle.axisTitle, i); d.setAttribute("tabindex", e.tabIndex.toString()), d.setAttribute("aria-label", e.description || e.title) }, e.prototype.drawXAxisGridLine = function (e, t, i, n) { var r, o, s = 0, a = "", l = "", h = e.opposedPosition ? -e.majorTickLines.height : e.majorTickLines.height, c = e.opposedPosition ? .5 * -e.lineStyle.width : .5 * e.lineStyle.width, p = d(e.crossesAt) ? e.opposedPosition ? -e.scrollBarHeight : e.scrollBarHeight : 0, u = e.valueType.indexOf("Category") > -1 && "BetweenTicks" === e.labelPlacement ? .5 : 0, g = e.visibleLabels.length, m = "Inside" === e.tickPosition, f = m ? n.y - h - c : n.y + h + c + p, y = this.chart.themeStyle; e.valueType.indexOf("Category") > -1 && g > 0 && "BetweenTicks" === e.labelPlacement && (g += 1); for (var v = 0; v < g; v++)(s = Xi(r = "DateTimeCategory" !== e.valueType ? e.visibleLabels[v] ? e.visibleLabels[v].value - u : e.visibleLabels[v - 1].value + e.visibleRange.interval - u : e.visibleLabels[v] ? e.visibleLabels[v].value - u : e.visibleRange.max, e) * n.width + n.x) >= n.x && n.x + n.width >= s && ((Bi(r, e.visibleRange) || this.isBorder(e, v, s)) && (a = "M " + s + " " + (this.seriesClipRect.y + this.seriesClipRect.height) + " L " + s + " " + this.seriesClipRect.y, this.renderGridLine(e, t, a, e.majorGridLines, "_MajorGridLine_", v, this.element, y.majorGridLine, e.majorGridLines.dashArray)), l = "M " + s + " " + (n.y + c + (m ? p : 0)) + " L " + s + " " + f, this.renderGridLine(e, t, l, e.majorTickLines, "_MajorTickLine_", v, i, y.majorTickLine), e.minorTicksPerInterval > 0 && (e.minorGridLines.width > 0 || e.minorTickLines.width > 0) && (o = this.drawAxisMinorLine(e, r, n, v), this.renderGridLine(e, t, o[0], e.minorGridLines, "_MinorGridLine_", v, this.element, y.minorGridLine, e.minorGridLines.dashArray), this.renderGridLine(e, t, o[1], e.minorTickLines, "_MinorTickLine_", v, i, y.minorTickLine))) }, e.prototype.drawAxisMinorLine = function (e, t, i, n) { var r, o = t, s = 0, a = 0, l = e.visibleRange, h = "Inside" === e.tickPosition, d = [], c = e.opposedPosition ? -e.minorTickLines.height : e.minorTickLines.height, p = 1, u = 1, g = h ? i.y - c : i.y + c, m = h ? i.x + c : i.x - c, f = "", y = ""; if ("Logarithmic" === e.valueType && (u = (r = Math.pow(e.logBase, o - l.interval)) + (p = (Math.pow(e.logBase, o) - r) / (e.minorTicksPerInterval + 1))), "Horizontal" === e.orientation) for (var v = 0; v < e.minorTicksPerInterval; v++)o = this.findLogNumeric(e, u, p, o, n), u += p, Bi(o, l) && (a = (o - l.min) / (l.max - l.min), a = Math.ceil((e.isInversed ? 1 - a : a) * i.width), s = Math.floor(a + i.x), f = f.concat("M " + s + " " + this.seriesClipRect.y + "L " + s + " " + (this.seriesClipRect.y + this.seriesClipRect.height)), s = Math.floor(a + i.x), y = y.concat("M " + s + " " + i.y + "L " + s + " " + (g + e.scrollBarHeight))); else { c = e.opposedPosition ? e.minorTickLines.height : -e.minorTickLines.height; for (v = 0; v < e.minorTicksPerInterval; v++)Bi(o = this.findLogNumeric(e, u, p, o, n), l) && (a = -1 * Math.ceil((o - l.min) / (l.max - l.min) * i.height), s = Math.floor(a + i.y + i.height), f = f.concat("M " + this.seriesClipRect.x + " " + s + "L " + (this.seriesClipRect.x + this.seriesClipRect.width) + " " + s + " "), s = Math.floor(a + i.y + i.height), y = y.concat("M " + i.x + " " + s + "L " + (m - e.scrollBarHeight) + " " + s + " ")), u += p } return d.push(f), d.push(y), d }, e.prototype.findLogNumeric = function (e, t, i, n, r) { var o = e.visibleRange; if ("Logarithmic" === e.valueType) n = Ri(t, e.logBase); else if ("DateTime" === e.valueType) n += e.dateTimeInterval / (e.minorTicksPerInterval + 1); else if ("DateTimeCategory" === e.valueType) { var s = "BetweenTicks" === e.labelPlacement ? .5 : 0; n += ((e.visibleLabels[r + 1] ? e.visibleLabels[r + 1].value - s : e.visibleRange.max) - (e.visibleLabels[r] ? e.visibleLabels[r].value - s : e.visibleRange.min)) / (e.minorTicksPerInterval + 1) } else n += o.interval / (e.minorTicksPerInterval + 1); return n }, e.prototype.drawXAxisLabels = function (e, t, i, n) { for (var r, o, s, a, l, h, c, p, u, g, m = this.chart, f = 0, y = 0, v = m.renderer.createGroup({ id: m.element.id + "AxisLabels" + t }), w = "Inside" === e.labelPosition, b = e.opposedPosition, C = (e.labelPosition === e.tickPosition ? e.majorTickLines.height : 0) + this.padding + .5 * e.lineStyle.width, L = e.angle % 360, M = 90 === L || -90 === L ? -2 : 0, S = e.isInversed ? n.x + n.width : n.x, x = 0, T = e.visibleLabels.length, D = e.scrollbarSettings.enable || !w && d(e.crossesAt) && (e.zoomFactor < 1 || e.zoomPosition > 0) ? e.scrollBarHeight : 0, A = 0, E = T; A < E; A++) { if (u = e.visibleLabels[A], g = Pi(u.originalText), f = Xi(u.value, e) * n.width + n.x, r = u.size, p = n.width / T, c = g ? u.breakLabelSize.width : r.width, x = ("Trim" === e.labelIntersectAction || "Wrap" === e.labelIntersectAction) && 0 === L && c > p ? p : c, f -= x / 2, w && L ? y = b ? n.y + C : n.y - C : (o = b && !w || !b && w ? -(C + D + (L ? .5 * r.height + 2 * e.maxLabelSize.height / 5 : u.index > 1 ? r.height / 4 * 2 : 0)) : C + D + (L ? .5 * e.maxLabelSize.height : r.height / 4 * 3), y = n.y + o * u.index), l = new nj(m.element.id + t + "_AxisLabel_" + A, f, y, ""), e.edgeLabelPlacement) switch (e.edgeLabelPlacement) { case "None": break; case "Hide": if ((0 === A || e.isInversed && A === E - 1) && l.x < n.x || (A === E - 1 || e.isInversed && 0 === A) && l.x + x > n.x + n.width) continue; break; case "Shift": (0 === A || e.isInversed && A === E - 1) && l.x < n.x ? (p -= n.x - l.x, l.x = f = n.x) : (A === E - 1 || e.isInversed && 0 === A) && l.x + x > n.x + n.width && (r.width > p && "Trim" === e.labelIntersectAction ? p -= l.x + x - (n.x + n.width) : p = x, l.x = f = n.x + n.width - p) }l.text = this.getLabelText(u, e, p), 0 === L && "Hide" === e.labelIntersectAction && 0 !== A && (e.isInversed ? l.x + x >= S : l.x <= S) || (S = e.isInversed ? l.x : l.x + x, 0 !== L && (s = this.getRotateText(g, e, u, L, m), a = w ? s.height : e.maxLabelSize.height - Math.ceil(s.height), h = e.opposedPosition ? .5 * a : .5 * -a, l.transform = "rotate(" + L + "," + (f + .5 * x + M) + "," + (y + h) + ")", l.y = g ? l.y + (b ? 4 * u.text.length : -4 * u.text.length) : l.y + h), $n(m.renderer, l, u.labelStyle, u.labelStyle.color || m.themeStyle.axisLabel, v, e.opposedPosition !== ("Inside" === e.labelPosition), m.redraw, !0)) } this.chart.enableCanvas || (m.delayRedraw ? e.visible && this.createZoomingLabel(this.chart, v, e, t, n) : i.appendChild(v)) }, e.prototype.getLabelText = function (e, t, i) { if (Pi(e.originalText)) { for (var n = [], r = void 0, o = 0; o < e.text.length; o++)r = this.findAxisLabel(t, e.text[o], i), n.push(r); return n } return this.findAxisLabel(t, e.text, i) }, e.prototype.drawXAxisBorder = function (e, t, i, n) { if (e.border.width > 0) { for (var r = "Outside" === e.labelPosition ? e.scrollBarHeight : 0, o = void 0, s = n.y + (e.opposedPosition ? -1 : 1) * r, a = void 0, l = n.width / e.visibleRange.delta * ("DateTime" === e.valueType ? e.dateTimeInterval : e.visibleRange.interval), h = void 0, d = e.maxLabelSize.height + (e.tickPosition === e.labelPosition ? e.majorTickLines.height : 0), c = "", p = "Category" === e.valueType && "BetweenTicks" === e.labelPlacement ? -.5 : 0, u = e.opposedPosition && "Inside" === e.labelPosition || !e.opposedPosition && "Outside" === e.labelPosition ? n.y + d + 10 + r : n.y - d - 10 - r, g = 0, m = e.visibleLabels.length; g < m; g++)switch (a = Xi(e.visibleLabels[g].value + p, e), a = (e.isInversed ? 1 - a : a) * n.width, "Category" === e.valueType && "BetweenTicks" === e.labelPlacement ? (o = a + n.x, h = a + l + n.x) : (o = a - .5 * l + n.x, h = a + .5 * l + n.x), e.border.type) { case "Rectangle": case "WithoutTopBorder": o < n.x ? c += "M " + n.x + " " + u + " L " + h + " " + u + " " : Math.floor(h) > n.width + n.x && 1 !== e.visibleLabels.length ? c += "M " + o + " " + s + " L " + o + " " + u + " L " + (n.width + n.x) + " " + u + " " : (c += "M " + o + " " + s + " L " + o + " " + u + " L " + h + " " + u + " ", 0 === g && (c += "M " + o + " " + s + " L " + o + " " + u + " M " + o + " " + u + " L " + n.x + " " + u), g === e.visibleLabels.length - 1 && (c += "M " + h + " " + s + " L " + h + " " + u + " M " + h + " " + u + " L " + (n.width + n.x) + " " + u)); break; case "WithoutTopandBottomBorder": o < n.x || Math.floor(h) > n.width + n.x || (c += "M " + o + " " + s + " L " + o + " " + u + " M " + h + " " + s + " L " + h + " " + u) }"" !== (c += "Rectangle" === e.border.type ? "M  " + n.x + " " + s + "L " + (n.x + n.width) + " " + s : "") && this.createAxisBorderElement(e, t, c, i) } this.chart.multiLevelLabelModule && e.multiLevelLabels.length > 0 && this.chart.multiLevelLabelModule.renderXAxisMultiLevelLabels(e, t, i, n) }, e.prototype.createAxisBorderElement = function (e, t, i, n) { var r = Sn(this.chart.element.id + "_BorderLine_" + t), o = r ? r.getAttribute("d") : "", s = this.chart.renderer.drawPath(new rj(this.chart.element.id + "_BorderLine_" + t, "transparent", e.border.width, e.border.color || this.chart.themeStyle.axisLine, 1, "", i)); s.setAttribute("style", "pointer-events: none"), kn(this.chart.enableCanvas, n, s, this.chart.redraw, !0, "x", "y", null, o, !0) }, e.prototype.findAxisLabel = function (e, t, i) { return "Trim" === e.labelIntersectAction ? 0 !== e.angle || e.enableTrim ? t : Qn(i, t, e.labelStyle) : t }, e.prototype.drawXAxisTitle = function (e, t, i, n) { var r = this.chart, o = xi(e.title, e.titleStyle), s = d(e.crossesAt) ? e.scrollBarHeight : 0, a = ("Inside" === e.tickPosition ? 0 : e.majorTickLines.height + this.padding) + ("Inside" === e.labelPosition ? 0 : e.maxLabelSize.height + e.multiLevelLabelHeight + this.padding); a = e.opposedPosition ? -(a + o.height / 4 + s) : a + 3 * o.height / 4 + s; var l = new nj(r.element.id + "_AxisTitle_" + t, n.x + .5 * n.width, n.y + a, "middle", e.title), h = $n(r.renderer, l, e.titleStyle, e.titleStyle.color || r.themeStyle.axisTitle, i); h.setAttribute("aria-label", e.description || e.title), h.setAttribute("tabindex", e.tabIndex.toString()) }, e.prototype.renderGridLine = function (e, t, i, n, r, o, s, a, l) { void 0 === l && (l = null); var h, d, c = this.chart; n.width > 0 && e.visible && i && (h = (d = Sn(c.element.id + r + t + "_" + o)) ? d.getAttribute("d") : null, d = null, this.htmlObject = c.renderer.drawPath(new rj(c.element.id + r + t + "_" + o, "transparent", n.width, n.color || a, null, l, i)), kn(c.enableCanvas, s, this.htmlObject, c.redraw, !0, "x", "y", null, h, !0)) }, e.prototype.findParentNode = function (e, t, i, n) { return null === i.crossAt ? document.getElementById(e + "AxisGroup" + n + "Inside") : document.getElementById(e + "AxisGroup" + n + "Inside").contains(document.getElementById(t.id)) ? document.getElementById(e + "AxisGroup" + n + "Inside") : document.getElementById(e + "AxisGroup" + n + "Outside") }, e.prototype.createZoomingLabel = function (e, t, i, n, r) { var o = this.findParentNode(e.element.id, t, i, n); t.setAttribute("opacity", "0.3"); var s = e.renderer.createGroup({ id: e.element.id + "AxisLabels_Zoom" + n }); s = tn(e, i, s, n, "Vertical" === i.orientation, r), o.replaceChild(t, document.getElementById(t.id)), Sn(e.element.id + "AxisLabels_Zoom" + n) ? o.replaceChild(s, document.getElementById(s.id)) : o.appendChild(s) }, e.prototype.getRotateText = function (e, t, i, n, r) { return e ? new $E(xi(i.originalText, t.labelStyle).height, xi(i.originalText, t.labelStyle).width) : Ni(t.labelStyle, i.text, n, r) }, e }(), yI = function () { function e(e) { this.currentPoints = [], this.previousPoints = [], this.insideRegion = !1, this.chart = e, this.lierIndex = 0 } return e.prototype.getData = function () { for (var e, t, i, n, r = this.chart, o = null, s = null, a = r.visibleSeries.length - 1; a >= 0; a--) { if (s = r.visibleSeries[a], e = "Scatter" === s.type || "Scatter" === s.drawType || !s.isRectSeries && s.marker.visible ? (s.marker.height + 5) / 2 : 0, t = "Scatter" === s.type || "Scatter" === s.drawType || !s.isRectSeries && s.marker.visible ? (s.marker.width + 5) / 2 : 0, i = r.mouseX, n = r.mouseY, s.dragSettings.enable && s.isRectSeries) if ("Bar" === s.type && r.isTransposed || !r.isTransposed && "Bar" !== s.type) { var l = s.marker.height / 2; n = s.yAxis.isInversed ? n - l : n + l } else { var h = s.marker.width / 2; i = s.yAxis.isInversed ? i + h : i - h } if (s.visible && nn(i, n, s.clipRect, e, t) && (o = this.getRectPoint(s, s.clipRect, i, n)), o) return new uI(o, s) } return new uI(o, s) }, e.prototype.isSelected = function (e) { return e.selectionMode.indexOf("Drag") > -1 && e.selectionModule && null !== e.selectionModule.rectPoints }, e.prototype.getRectPoint = function (e, t, i, n) { var r, o, s, a, l, h, d = 0; if (this.chart.isScrolling) return null; for (var c = 0, p = e.points; c < p.length; c++) { var u = p[c]; if (u.regionData || u.regions && u.regions.length) { if (u.regionData && "PolarRadar" === this.chart.chartAreaType && e.drawType.indexOf("Column") > -1 && (r = i - (e.clipRect.width / 2 + e.clipRect.x), o = n - (e.clipRect.height / 2 + e.clipRect.y), d = 2 * Math.PI * (u.regionData.currentXPosition < 0 ? 1 + u.regionData.currentXPosition : u.regionData.currentXPosition), s = (Math.atan2(o, r) + .5 * Math.PI - d) % (2 * Math.PI), s = s < 0 ? 2 * Math.PI + s : s, s += 2 * Math.PI * e.chart.primaryXAxis.startAngle, a = u.regionData.startAngle, a -= d, a = a < 0 ? 2 * Math.PI + a : a, l = u.regionData.endAngle, l -= d, l = l < 0 ? 2 * Math.PI + l : l, h = Math.sqrt(Math.pow(Math.abs(r), 2) + Math.pow(Math.abs(o), 2)), s >= a && s <= l && (h >= u.regionData.innerRadius && h <= u.regionData.radius || h <= u.regionData.innerRadius && h >= u.regionData.radius) && h <= e.chart.radius)) return u; if (e.dragSettings.enable && e.isRectSeries && this.rectRegion(i, n, u, t, e)) return this.insideRegion = !0, u; if (!this.insideRegion && this.checkRegionContainsPoint(u.regions, t, i, n)) return u; if (this.insideRegion && this.checkRegionContainsPoint(u.regions, t, i, n)) return u } } return null }, e.prototype.checkRegionContainsPoint = function (e, t, i, n) { var r = this; return e.some(function (e, o) { return r.lierIndex = o, nn(i, n, new ej(("Cartesian" === r.chart.chartAreaType ? t.x : 0) + e.x, ("Cartesian" === r.chart.chartAreaType ? t.y : 0) + e.y, e.width, e.height)) }) }, e.prototype.rectRegion = function (e, t, i, n, r) { var o, s = this, a = "Bar" === r.type, l = r.yAxis.isInversed, h = r.chart.isTransposed, d = 0, c = 0, p = o = 20; return l && h ? a ? (d = i.regions[0].height - 10, o = i.regions[0].width) : (c = -10, p = i.regions[0].height) : l || i.yValue < 0 ? a ? (c = -10, p = i.regions[0].height) : (d = i.regions[0].height - 10, o = i.regions[0].width) : h ? a ? (d = -10, o = i.regions[0].width) : (c = i.regions[0].width - 10, p = i.regions[0].height) : a ? (c = i.regions[0].width - 10, p = i.regions[0].height) : (d = -10, o = i.regions[0].width), i.regions.some(function (i) { return nn(e, t, new ej(("Cartesian" === s.chart.chartAreaType ? n.x : 0) + i.x + c, ("Cartesian" === s.chart.chartAreaType ? n.y : 0) + i.y + d, o, p)) }) }, e.prototype.getClosest = function (e, t) { var i, n = e.xData; if (t >= e.xMin - .5 && t <= e.xMax + .5) for (var r = 0, o = n; r < o.length; r++) { var s = o[r]; (null == i || Math.abs(s - t) < Math.abs(i - t)) && (i = s) } return i }, e.prototype.getClosestX = function (e, t) { var i, n = t.clipRect; i = e.requireInvertedAxis ? on(e.mouseY - n.y, n.height, t.xAxis) : rn(e.mouseX - n.x, n.width, t.xAxis); for (var r = this.getClosest(t, i), o = 0, s = t.points; o < s.length; o++) { var a = s[o]; if (r === a.xValue && a.visible) return new uI(a, t) } return null }, e }(), vI = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), wI = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, bI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return vI(t, e), wI([Y(!1)], t.prototype, "visible", void 0), wI([Y(null)], t.prototype, "name", void 0), wI([Y("transparent")], t.prototype, "fill", void 0), wI([Y(1)], t.prototype, "opacity", void 0), wI([Y("Auto")], t.prototype, "position", void 0), wI([Y(5)], t.prototype, "rx", void 0), wI([Y(5)], t.prototype, "ry", void 0), wI([Y("Center")], t.prototype, "alignment", void 0), wI([U({ width: null, color: null }, BE)], t.prototype, "border", void 0), wI([U({ left: 5, right: 5, top: 5, bottom: 5 }, VE)], t.prototype, "margin", void 0), wI([U({ size: "11px", color: "", fontStyle: "Normal", fontWeight: "Normal", fontFamily: "Segoe UI" }, zE)], t.prototype, "font", void 0), wI([Y(null)], t.prototype, "template", void 0), t }(ww), CI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return vI(t, e), wI([Y(!1)], t.prototype, "visible", void 0), wI([Y("Circle")], t.prototype, "shape", void 0), wI([Y("")], t.prototype, "imageUrl", void 0), wI([Y(5)], t.prototype, "height", void 0), wI([Y(5)], t.prototype, "width", void 0), wI([U({ width: 2, color: null }, BE)], t.prototype, "border", void 0), wI([Y(null)], t.prototype, "fill", void 0), wI([Y(1)], t.prototype, "opacity", void 0), wI([U({}, bI)], t.prototype, "dataLabel", void 0), t }(ww), LI = function () { return function () { this.symbolLocations = null, this.regions = null, this.percentage = null, this.regionData = null, this.marker = { visible: !1 } } }(), MI = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.clipRect = new ej(0, 0, 0, 0), t } return vI(t, e), t.prototype.setDataSource = function (e, t) { e && (this.points = e.points); an(this.type); t.trendLineModule.initDataSource(this, t), t.visibleSeriesCount++ }, wI([Y("")], t.prototype, "name", void 0), wI([Y("Linear")], t.prototype, "type", void 0), wI([Y(2)], t.prototype, "period", void 0), wI([Y(2)], t.prototype, "polynomialOrder", void 0), wI([Y(0)], t.prototype, "backwardForecast", void 0), wI([Y(0)], t.prototype, "forwardForecast", void 0), wI([U({}, WE)], t.prototype, "animation", void 0), wI([U({}, CI)], t.prototype, "marker", void 0), wI([Y(!0)], t.prototype, "enableTooltip", void 0), wI([Y(null)], t.prototype, "intercept", void 0), wI([Y("")], t.prototype, "fill", void 0), wI([Y(1)], t.prototype, "width", void 0), wI([Y("SeriesType")], t.prototype, "legendShape", void 0), t }(ww), SI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return vI(t, e), wI([Y(1)], t.prototype, "width", void 0), wI([Y(10)], t.prototype, "length", void 0), wI([Y(null)], t.prototype, "color", void 0), wI([Y(1)], t.prototype, "opacity", void 0), t }(ww), xI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return vI(t, e), wI([Y(null)], t.prototype, "value", void 0), wI([Y(null)], t.prototype, "color", void 0), wI([Y("0")], t.prototype, "dashArray", void 0), t }(ww), TI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return vI(t, e), wI([Y(!1)], t.prototype, "visible", void 0), wI([Y("Fixed")], t.prototype, "type", void 0), wI([Y("Both")], t.prototype, "direction", void 0), wI([Y("Vertical")], t.prototype, "mode", void 0), wI([Y(null)], t.prototype, "color", void 0), wI([Y(1)], t.prototype, "verticalError", void 0), wI([Y(1)], t.prototype, "width", void 0), wI([Y(1)], t.prototype, "horizontalError", void 0), wI([Y(3)], t.prototype, "verticalPositiveError", void 0), wI([Y(3)], t.prototype, "verticalNegativeError", void 0), wI([Y(1)], t.prototype, "horizontalPositiveError", void 0), wI([Y(1)], t.prototype, "horizontalNegativeError", void 0), wI([U(null, SI)], t.prototype, "errorBarCap", void 0), t }(ww), DI = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.currentViewData = [], t.clipRect = new ej(0, 0, 0, 0), t.seriesType = "XY", t } return vI(t, e), t.prototype.processJsonData = function () { var e = 0, t = new LI, i = this instanceof AI && "Histogram" === this.type ? "x" : this.xName, n = this instanceof AI && this.marker.dataLabel.name ? this.marker.dataLabel.name : ""; this instanceof AI && ("Waterfall" !== this.type && "Histogram" !== this.type || (this.currentViewData = this.chart[an(this.type) + "SeriesModule"].processInternalData(h([], this.currentViewData, null, !0), this)), "Pareto" === this.category && (this.currentViewData = ki(h([], this.currentViewData, null, !0), [this.yName], !0), "Line" === this.type && (this.currentViewData = this.chart.paretoSeriesModule.performCumulativeCalculation(this.currentViewData, this)))); var r = Object.keys(this.currentViewData).length; if (this.points = [], this.xMin = 1 / 0, this.xMax = -1 / 0, this.yMin = 1 / 0, this.yMax = -1 / 0, this.sizeMax = -1 / 0, this.getSeriesType(), "Category" === this.xAxis.valueType) for (; e < r;)t = this.dataPoint(e, n, i), this.pushCategoryData(t, e, t.x), this.pushData(t, e), this.setEmptyPoint(t, e), e++; else if (this.xAxis.valueType.indexOf("DateTime") > -1) for (var o = { skeleton: "full", type: "dateTime" }, s = this.chart.intl.getDateParser(o), a = this.chart.intl.getDateFormat(o); e < r;)(t = this.dataPoint(e, n, i)).x = new Date(JD.parse.parseJson({ val: t.x }).val), "DateTime" === this.xAxis.valueType ? t.xValue = Date.parse(s(a(t.x))) : this.pushCategoryData(t, e, Date.parse(s(a(t.x))).toString()), this.pushData(t, e), this.setEmptyPoint(t, e), e++; else for (; e < r;)(t = this.dataPoint(e, n, i)).xValue = t.x, this.pushData(t, e), this.setEmptyPoint(t, e), e++; if (this instanceof AI && (this.type.indexOf("Spline") > -1 || this.drawType.indexOf("Spline") > -1 && "PolarRadar" === this.chart.chartAreaType)) { var l = this.type.indexOf("Area") > -1 || "Area" === this.drawType; this.chart["spline" + (l ? "Area" : "") + "SeriesModule"].findSplinePoint(this) } }, t.prototype.pushData = function (e, t) { e.index = t, e.yValue = e.y, this.xMin = Math.min(this.xMin, e.xValue), this.xMax = Math.max(this.xMax, e.xValue), this.xData.push(e.xValue) }, t.prototype.dataPoint = function (e, t, i) { var r; this.points[e] = new LI, r = this.points[e]; var o = this.currentViewData, s = this.enableComplexProperty ? n : this.getObjectValue; return r.x = s(i, o[e]), r.high = s(this.high, o[e]), r.low = s(this.low, o[e]), r.open = s(this.open, o[e]), r.close = s(this.close, o[e]), r.volume = s(this.volume, o[e]), r.interior = s(this.pointColorMapping, o[e]), this instanceof AI && (r.y = s(this.yName, o[e]), r.size = s(this.size, o[e]), r.text = s(t, o[e]), r.tooltip = s(this.tooltipMappingName, o[e])), r }, t.prototype.getObjectValue = function (e, t) { return t[e] }, t.prototype.setEmptyPoint = function (e, t) { if (!this.findVisibility(e)) return e.visible = !0, null; e.isEmpty = !0; switch (this instanceof AI ? this.emptyPointSettings.mode : "Drop") { case "Zero": e.visible = !0, this instanceof AI && this.seriesType.indexOf("HighLow") > -1 ? (e.high = e.low = 0, this.seriesType.indexOf("HighLowOpenClose") > -1 && (e.open = e.close = 0)) : e.y = e.yValue = this.yData[t] = 0; break; case "Average": this instanceof AI && (this.seriesType.indexOf("HighLow") > -1 ? (e.high = d(e.high) || isNaN(+e.high) ? this.getAverage(this.high, t) : e.high, e.low = d(e.low) || isNaN(+e.low) ? this.getAverage(this.low, t) : e.low, this.seriesType.indexOf("HighLowOpenClose") > -1 && (e.open = d(e.open) || isNaN(+e.open) ? this.getAverage(this.open, t) : e.open, e.close = d(e.close) || isNaN(+e.close) ? this.getAverage(this.close, t) : e.close)) : e.y = e.yValue = this.yData[t] = this.getAverage(this.yName, t)), e.visible = !0; break; case "Drop": case "Gap": this.yData[t] = null, e.visible = !1 } }, t.prototype.findVisibility = function (e) { var t; switch (this instanceof AI ? this.seriesType : "HighLowOpenClose") { case "XY": return this.setXYMinMax(e.yValue), this.yData.push(e.yValue), this instanceof AI && "Bubble" === this.type && (this.sizeMax = Math.max(this.sizeMax, d(e.size) || isNaN(+e.size) ? this.sizeMax : e.size)), d(e.x) || d(e.y) || isNaN(+e.y); case "HighLow": return this.setHiloMinMax(e.high, e.low), d(e.x) || d(e.low) || isNaN(+e.low) || d(e.high) || isNaN(+e.high); case "HighLowOpenClose": return this.setHiloMinMax(e.high, e.low), d(e.x) || d(e.low) || isNaN(+e.low) || d(e.open) || isNaN(+e.open) || d(e.close) || isNaN(+e.close) || d(e.high) || isNaN(+e.high); case "BoxPlot": return t = (e.y || [null]).filter(function (e) { return !d(e) && !isNaN(e) }).sort(function (e, t) { return e - t }), e.y = t, this.yMin = Math.min(this.yMin, Math.min.apply(Math, t)), this.yMax = Math.max(this.yMax, Math.max.apply(Math, t)), !t.length } }, t.prototype.setXYMinMax = function (e) { this.yMin = Math.min(this.yMin, d(e) || isNaN(e) ? this.yMin : e), this.yMax = Math.max(this.yMax, d(e) || isNaN(e) ? this.yMax : e) }, t.prototype.setHiloMinMax = function (e, t) { this.yMin = Math.min(this.yMin, Math.min(d(t) || isNaN(t) ? this.yMin : t, d(e) || isNaN(e) ? this.yMin : e)), this.yMax = Math.max(this.yMax, Math.max(d(t) || isNaN(t) ? this.yMax : t, d(e) || isNaN(e) ? this.yMax : e)) }, t.prototype.getSeriesType = function () { var e; if (this instanceof AI) { var t = "PolarRadar" === this.chart.chartAreaType ? this.drawType : this.type; if (t) switch (t) { case "RangeColumn": case "RangeArea": case "Hilo": e = "HighLow"; break; case "HiloOpenClose": case "Candle": e = "HighLowOpenClose"; break; case "BoxAndWhisker": e = "BoxPlot"; break; default: e = "XY" } } this.seriesType = e }, t.prototype.pushCategoryData = function (e, t, i) { this.xAxis.isIndexed ? (this.xAxis.labels[t] ? this.xAxis.labels[t] += ", " + i : this.xAxis.labels.push(i), e.xValue = t) : (this.xAxis.labels.indexOf(i) < 0 && this.xAxis.labels.push(i), e.xValue = this.xAxis.labels.indexOf(i)) }, t.prototype.getAverage = function (e, t, i) { void 0 === i && (i = this.currentViewData); return ((i[t - 1] ? i[t - 1][e] || 0 : 0) + (i[t + 1] ? i[t + 1][e] || 0 : 0)) / 2 }, t.prototype.refreshDataManager = function (e) { var t = this; this.chart = e; var i = this.dataSource || e.dataSource; if (i instanceof aA || !d(this.query)) { this.dataModule.getData(this.dataModule.generateQuery().requiresCount()).then(function (e) { return t.dataManagerSuccess(e) }) } else this.dataManagerSuccess({ result: i, count: i.length }, !1) }, t.prototype.dataManagerSuccess = function (e, t) { if (void 0 === t && (t = !0), this.currentViewData = e.count ? e.result : [], this instanceof AI) { this.chart.stockChart && (this.chart.stockChart.series[this.index].localData = this.currentViewData); var i = { name: vj, series: this, data: this.currentViewData, fill: this.interior }; this.chart.trigger(vj, i), this.interior = i.fill, this.currentViewData = i.data } !this.chart.stockChart || this instanceof AI || (this.currentViewData = this.chart.stockChart.findCurrentData(this.chart.stockChart.series[0].localData, this.chart.stockChart.series[0].xName)), this.processJsonData(), this.recordsCount = e.count, this.refreshChart(t), this.currentViewData = null }, t.prototype.refreshChart = function (e) { var t = this.chart; if (this instanceof AI && (t.visibleSeriesCount += e ? 1 : 0), t.refreshTechnicalIndicator(this), this instanceof AI && "TrendLine" !== this.category) for (var i = 0, n = this.trendlines; i < n.length; i++) { n[i].setDataSource(this, t) } t.visibleSeries.length === t.visibleSeriesCount && (t.refreshBound(), t.trigger("loaded", { chart: t.isBlazor ? {} : t }), this.chart.stockChart && this.chart.stockChart.initialRender && (this.chart.stockChart.stockChartDataManagerSuccess(), this.chart.stockChart.initialRender = !1)), this instanceof AI && (t.visibleSeriesCount += e ? 0 : 1) }, wI([Y("")], t.prototype, "xName", void 0), wI([Y("")], t.prototype, "high", void 0), wI([Y("")], t.prototype, "low", void 0), wI([Y("")], t.prototype, "open", void 0), wI([Y("")], t.prototype, "close", void 0), wI([Y("")], t.prototype, "volume", void 0), wI([Y("")], t.prototype, "pointColorMapping", void 0), wI([Y(null)], t.prototype, "xAxisName", void 0), wI([Y(null)], t.prototype, "yAxisName", void 0), wI([U(null, WE)], t.prototype, "animation", void 0), wI([Y(null)], t.prototype, "fill", void 0), wI([Y(1)], t.prototype, "width", void 0), wI([Y("0")], t.prototype, "dashArray", void 0), wI([Y("")], t.prototype, "dataSource", void 0), wI([Y()], t.prototype, "query", void 0), wI([G([], xI)], t.prototype, "segments", void 0), wI([Y("X")], t.prototype, "segmentAxis", void 0), wI([Y(!1)], t.prototype, "enableComplexProperty", void 0), t }(ww), AI = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i, n, r) || this; return o.visibleSeriesCount = 0, o.category = "Series", o.isRectSeries = !1, o.drawPoints = [], o.delayedAnimation = !1, o } return vI(t, e), t.prototype.refreshAxisLabel = function () { if ("Category" !== this.xAxis.valueType) return null; this.xAxis.labels = []; for (var e = 0, t = this.xAxis.series; e < t.length; e++) { var i = t[e]; if (i.visible) { i.xMin = 1 / 0, i.xMax = -1 / 0; for (var n = 0, r = i.points; n < r.length; n++) { var o = r[n]; i.pushCategoryData(o, o.index, o.x), i.xMin = Math.min(i.xMin, o.xValue), i.xMax = Math.max(i.xMax, o.xValue) } } } }, t.prototype.findSeriesCollection = function (e, t, i) { for (var n = [], r = 0, o = t.axes; r < o.length; r++)for (var s = 0, a = o[r].series; s < a.length; s++)for (var l = a[s], h = 0, d = e.axes; h < d.length; h++)for (var c = 0, p = d[h].series; c < p.length; c++) { var u = p[c]; u === l && u.visible && this.rectSeriesInChart(u, i) && n.push(u) } return n }, t.prototype.rectSeriesInChart = function (e, t) { var i = e.type.toLowerCase(); return -1 !== i.indexOf("column") || -1 !== i.indexOf("bar") || -1 !== i.indexOf("histogram") || -1 !== i.indexOf("hiloopenclose") || -1 !== i.indexOf("candle") || -1 !== i.indexOf("pareto") || -1 !== i.indexOf("hilo") || -1 !== e.drawType.indexOf("Column") || -1 !== i.indexOf("waterfall") || -1 !== i.indexOf("boxandwhisker") || t }, t.prototype.calculateStackedValue = function (e, t) { for (var i = 0, n = t.columns; i < n.length; i++)for (var r = n[i], o = 0, s = t.rows; o < s.length; o++) { var a = s[o]; this.calculateStackingValues(this.findSeriesCollection(r, a, !0), e) } }, t.prototype.calculateStackingValues = function (e, t) { var i, n, r, o, s, a = [], l = [], h = [], d = []; t && (d = this.findFrequencies(e)); for (var c = [], p = [], u = 0, g = e; u < g.length; u++) { var m = g[u]; if (-1 !== m.type.indexOf("Stacking") || -1 !== m.drawType.indexOf("Stacking") && "PolarRadar" === m.chart.chartAreaType) { l[r = -1 !== m.type.indexOf("StackingArea") ? "StackingArea100" : m.stackingGroup] || (l[r] = [], h[r] = []), a = m.yData, i = [], n = [], c.push(m); for (var f = 0, y = m.points.length; f < y; f++)o = 0, s = +a[f], void 0 === l[r][m.points[f].xValue] && (l[r][m.points[f].xValue] = 0), void 0 === h[r][m.points[f].xValue] && (h[r][m.points[f].xValue] = 0), t ? (s = s / d[r][m.points[f].xValue] * 100, s = isNaN(s) ? 0 : s, m.points[f].percentage = +s.toFixed(2)) : p[f] = p[f] ? p[f] + Math.abs(s) : Math.abs(s), s >= 0 ? (o = l[r][m.points[f].xValue], l[r][m.points[f].xValue] += s) : (o = h[r][m.points[f].xValue], h[r][m.points[f].xValue] += s), i.push(o), n.push(s + o), t && n[f] > 100 && (n[f] = 100); m.stackedValues = new sI(i, n), m.yMin = Math.min.apply(0, i), m.yMax = Math.max.apply(0, n), m.yMin > Math.min.apply(0, n) && (m.yMin = t ? -100 : Math.min.apply(0, n)), m.yMax < Math.max.apply(0, i) && (m.yMax = 0) } } this.findPercentageOfStacking(c, p, t) }, t.prototype.findPercentageOfStacking = function (e, t, i) { for (var n = 0, r = e; n < r.length; n++) { var o = r[n]; if (i) return null; for (var s = 0, a = o.points; s < a.length; s++) { var l = a[s]; l.percentage = Math.abs(+(l.y / t[l.index] * 100).toFixed(2)) } } }, t.prototype.findFrequencies = function (e) { for (var t, i = [], n = 0, r = e; n < r.length; n++) { var o = r[n]; if (o.yAxis.isStack100 = -1 !== o.type.indexOf("100"), -1 !== o.type.indexOf("Stacking")) { i[t = -1 !== o.type.indexOf("StackingArea") ? "StackingArea100" : o.stackingGroup] || (i[t] = []); for (var s = 0, a = o.points.length; s < a; s++)void 0 === i[t][o.points[s].xValue] && (i[t][o.points[s].xValue] = 0), o.yData[s] > 0 ? i[t][o.points[s].xValue] += o.yData[s] : i[t][o.points[s].xValue] -= o.yData[s] } } return i }, t.prototype.renderSeries = function (e) { var t = an(this.type); e[(t = t.replace("100", "")) + "SeriesModule"] && ("Indicator" !== this.category && "TrendLine" !== this.category && this.createSeriesElements(e), e[t + "SeriesModule"].render(this, this.xAxis, this.yAxis, e.requireInvertedAxis), "Indicator" !== this.category && (this.errorBar.visible && this.chart.errorBarModule.render(this), this.marker.dataLabel.visible && e.dataLabelModule.render(this, this.chart, this.marker.dataLabel), this.appendSeriesElement(e.seriesElements, e)), this.chart.enableCanvas || this.performAnimation(e, t, this.errorBar, this.marker, this.marker.dataLabel)) }, t.prototype.createSeriesElements = function (e) { if ("Indicator" !== this.category) { var t = e.element.id, i = this.marker.border.width + 8 + 5, n = "Scatter" === this.type || "Bubble" === this.type ? e.svgRenderer : e.renderer, r = void 0 === this.index ? this.category : this.index, o = "Scatter" === this.type ? (this.marker.height + i) / 2 : 0, s = "Scatter" === this.type ? (this.marker.width + i) / 2 : 0, a = void 0; if ("PolarRadar" === e.chartAreaType) { var l = "Scatter" === this.drawType ? Math.max(this.marker.width, this.marker.height) : 0; a = new lI(t + "_ChartSeriesClipRect_" + r, "transparent", { width: 1, color: "Gray" }, 1, this.clipRect.width / 2 + this.clipRect.x, this.clipRect.height / 2 + this.clipRect.y, e.radius + l), this.clipRectElement = mn(e.redraw, a, n, "drawCircularClipPath") } else a = new aI(t + "_ChartSeriesClipRect_" + r, "transparent", { width: 1, color: "Gray" }, 1, { x: -s, y: -o, width: this.clipRect.width + 2 * s, height: this.clipRect.height + 2 * o }), this.clipRectElement = mn(e.redraw, a, n); var h = void 0; h = "Cartesian" === e.chartAreaType ? "translate(" + this.clipRect.x + "," + this.clipRect.y + ")" : "", this.symbolElement = null, this.seriesElement = n.createGroup({ id: t + "SeriesGroup" + r, transform: h, "clip-path": "url(#" + t + "_ChartSeriesClipRect_" + r + ")" }), this.chart.enableCanvas && "Scatter" !== this.type && "Bubble" !== this.type || this.seriesElement.appendChild(this.clipRectElement) } }, t.prototype.appendSeriesElement = function (e, t) { var i = this.marker, n = i.dataLabel, r = t.redraw; if ("TrendLine" !== this.category) { kn(t.enableCanvas, t.seriesElements, this.seriesElement, r); this.errorBar.visible && ("PolarRadar" === t.chartAreaType ? kn(t.enableCanvas, t.seriesElements, this.seriesElement, r) : kn(t.enableCanvas, t.seriesElements, this.errorBarElement, r)), "Scatter" !== this.type && "Bubble" !== this.type || kn(!1, t.seriesElements, this.seriesElement, r) } i.visible && ("Cartesian" === t.chartAreaType || "Scatter" !== this.drawType && "PolarRadar" === t.chartAreaType) && "Scatter" !== this.type && "Bubble" !== this.type && "Candle" !== this.type && "Hilo" !== this.type && "HiloOpenClose" !== this.type && kn(t.enableCanvas, t.seriesElements, this.symbolElement, r), n.visible && (kn(t.enableCanvas, t.dataLabelElements, this.shapeElement, r), kn(t.enableCanvas, t.dataLabelElements, this.textElement, r)), !t.enableCanvas && t.dataLabelElements.hasChildNodes() && t.seriesElements.appendChild(t.dataLabelElements) }, t.prototype.performAnimation = function (e, t, i, n, r) { this.animation.enable && e.animateSeries && (e[t + "SeriesModule"].doAnimation(this), i.visible && e.errorBarModule.doErrorBarAnimation(this), n.visible && e.markerRender.doMarkerAnimation(this), r.visible && "edge" !== uw.info.name && !uw.isIE && e.dataLabelModule.doDataLabelAnimation(this)) }, t.prototype.setPointColor = function (e, t) { return t = e.interior || t, e.isEmpty ? this.emptyPointSettings.fill || t : t }, t.prototype.setBorderColor = function (e, t) { return t.width = e.isEmpty ? this.emptyPointSettings.border.width || t.width : t.width, t.color = e.isEmpty ? this.emptyPointSettings.border.color || t.color : t.color, t }, wI([Y("")], t.prototype, "name", void 0), wI([Y("")], t.prototype, "yName", void 0), wI([Y("Line")], t.prototype, "drawType", void 0), wI([Y(!0)], t.prototype, "isClosed", void 0), wI([Y("#2ecd71")], t.prototype, "bearFillColor", void 0), wI([Y("#e74c3d")], t.prototype, "bullFillColor", void 0), wI([Y(!1)], t.prototype, "enableSolidCandles", void 0), wI([Y("")], t.prototype, "size", void 0), wI([Y(null)], t.prototype, "binInterval", void 0), wI([Y(!1)], t.prototype, "showNormalDistribution", void 0), wI([Y("")], t.prototype, "stackingGroup", void 0), wI([Y(!0)], t.prototype, "visible", void 0), wI([U({ color: "transparent", width: 0 }, BE)], t.prototype, "border", void 0), wI([Y(1)], t.prototype, "opacity", void 0), wI([Y(0)], t.prototype, "zOrder", void 0), wI([Y("Line")], t.prototype, "type", void 0), wI([U(null, TI)], t.prototype, "errorBar", void 0), wI([U(null, CI)], t.prototype, "marker", void 0), wI([U({}, qE)], t.prototype, "dragSettings", void 0), wI([G([], MI)], t.prototype, "trendlines", void 0), wI([Y(!0)], t.prototype, "enableTooltip", void 0), wI([Y("")], t.prototype, "tooltipMappingName", void 0), wI([Y("SeriesType")], t.prototype, "legendShape", void 0), wI([Y(null)], t.prototype, "selectionStyle", void 0), wI([Y(1)], t.prototype, "minRadius", void 0), wI([Y(3)], t.prototype, "maxRadius", void 0), wI([Y("Natural")], t.prototype, "splineType", void 0), wI([Y(.5)], t.prototype, "cardinalSplineTension", void 0), wI([U(null, UE)], t.prototype, "emptyPointSettings", void 0), wI([Y(!0)], t.prototype, "showMean", void 0), wI([Y("Normal")], t.prototype, "boxPlotMode", void 0), wI([Y(null)], t.prototype, "columnWidth", void 0), wI([Y(0)], t.prototype, "columnSpacing", void 0), wI([Y("#C64E4A")], t.prototype, "negativeFillColor", void 0), wI([Y("#4E81BC")], t.prototype, "summaryFillColor", void 0), wI([Y()], t.prototype, "intermediateSumIndexes", void 0), wI([Y()], t.prototype, "sumIndexes", void 0), wI([U({ color: "black", width: 2 }, RE)], t.prototype, "connector", void 0), wI([U(null, _E)], t.prototype, "cornerRadius", void 0), t }(DI), EI = function () { function e(e, t) { this.initDataManager(e, t) } return e.prototype.initDataManager = function (e, t) { this.dataManager = e instanceof aA ? e : new aA(e), this.query = t instanceof GD ? t : new GD }, e.prototype.generateQuery = function () { return this.query.clone() }, e.prototype.getData = function (e) { return this.dataManager.executeQuery(e) }, e }(), jI = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), II = function (e) { function t(t) { var i = e.call(this, t) || this; return i.elementId = t.element.id, i } return jI(t, e), t.prototype.addEventListener = function () { this.chart.isDestroyed || (this.chart.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.chart.on(uw.touchEndEvent, this.mouseUpHandler, this)) }, t.prototype.removeEventListener = function () { this.chart.isDestroyed || (this.chart.off(uw.touchMoveEvent, this.mouseMoveHandler), this.chart.off(uw.touchEndEvent, this.mouseUpHandler)) }, t.prototype.mouseUpHandler = function () { var e = this.chart; !e.isTouch || e.crosshair.enable || this.isSelected(e) || this.markerMove(!0) }, t.prototype.mouseMoveHandler = function () { var e = this.chart; e.crosshair.enable && !e.tooltip.enable || e.isTouch && !e.startMove || this.isSelected(e) || this.markerMove(!1) }, t.prototype.markerMove = function (e) { var t = this, i = this.chart; this.currentPoints = []; var n, r, o, s; if (i.tooltip.shared && i.tooltip.enable) { if (!nn(i.mouseX, i.mouseY, i.chartAxisLayoutPanel.seriesClipRect)) return null; if (i.tooltip.enable) for (var a = "PolarRadar" === i.chartAreaType ? this.getData() : null, l = 0, d = i.visibleSeries; l < d.length; l++) { var c = d[l]; c.enableTooltip && "Indicator" !== c.category && ("Cartesian" === i.chartAreaType && c.visible ? n = this.getClosestX(i, c) : "PolarRadar" === i.chartAreaType && c.visible && null !== a.point && (n = new uI(c.points[a.point.index], c)), n && (this.currentPoints.push(n), n = null)) } } else n = this.getData(), s = n.series, r = this.previousPoints[0], o = s && ("Bubble" === s.type || "Scatter" === s.drawType || "Scatter" === s.type || "Candle" !== s.type && "Hilo" !== s.type && "HiloOpenClose" !== s.type && s.marker.visible && 0 !== s.marker.width && 0 !== s.marker.height), n.lierIndex = this.lierIndex, n.point && o && (!r || r.point !== n.point || r && r.lierIndex > 3 && r.lierIndex !== this.lierIndex) && this.currentPoints.push(n), n.point && o && i.isPointMouseDown && this.currentPoints.push(n); var p = this.previousPoints.length; if (this.currentPoints.length > 0 && (0 === p || i.isPointMouseDown || p > 0 && this.previousPoints[0].point !== this.currentPoints[0].point)) { this.previousPoints.length > 0 && this.removeHighlightedMarker(); for (var u = function (e) { (e && e.point || "Candle" !== s.type && "Hilo" !== s.type && "HiloOpenClose" !== s.type) && (Rn(g.markerExplode), g.isRemove = !0, e.point.symbolLocations.map(function (i, n) { e.series.isRectSeries && !e.point.marker.visible || t.drawTrackBall(e.series, e.point, i, n) })) }, g = this, m = 0, f = this.currentPoints; m < f.length; m++) { u(f[m]) } this.previousPoints = h([], this.currentPoints, null, !0) } i.tooltip.enable || !(0 === this.currentPoints.length && this.isRemove || e && this.isRemove) && nn(i.mouseX, i.mouseY, i.chartAxisLayoutPanel.seriesClipRect) || (this.isRemove = !1, this.markerExplode = setTimeout(function () { t.removeHighlightedMarker() }, 2e3)), this.currentPoints = [] }, t.prototype.drawTrackBall = function (e, t, i, n) { for (var r = t.marker, o = e.marker, s = r.shape || o.shape, a = e.symbolElement || e.seriesElement, l = this.elementId + "_Series_" + e.index + "_Point_" + t.index + "_Trackball" + (n || ""), h = new $E((r.width || o.width) + 5, (r.height || o.height) + 5), d = r.border || e.border, c = "BoxAndWhisker" === e.type || "Bubble" === e.type || "Scatter" === e.type, p = d.color && "transparent" !== d.color ? d.color : r.fill || t.interior || (c ? t.color : e.interior), u = _n(Yn(p)), g = r.border ? r.border.width : o.border.width, m = e.chart.themeStyle.markerShadow || "rgba(" + u.r + "," + u.g + "," + u.b + ",0.2)", f = 0; f < 2; f++) { var y = new rj(l + "_" + f, f ? r.fill || t.color || (c ? e.interior : "#ffffff") : "transparent", g + (f ? 0 : 8), f ? p : m, r.opacity || o.opacity, null, null), v = bn(i, s, h, o.imageUrl, y, 0, this.chart.svgRenderer, e.clipRect); v.setAttribute("style", "pointer-events:none"), v.setAttribute("class", "EJ2-Trackball"), a.appendChild(v) } }, t.prototype.removeHighlightedMarker = function () { for (var e = document.getElementsByClassName("EJ2-Trackball"), t = 0, i = e.length; t < i; t++)k(e[0]); this.previousPoints = [] }, t }(yI), kI = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), PI = function (e) { function t(t) { var i = e.call(this, t) || this; return i.addEventListener(), i } return kI(t, e), t.prototype.render = function (e) { var t = this, i = e.chart.redraw; this.createElement(e, i); for (var n = function (n) { n.visible && n.symbolLocations.length && n.symbolLocations.map(function (r, o) { t.renderMarker(e, n, r, o, i) }) }, r = 0, o = e.points; r < o.length; r++) { n(o[r]) } }, t.prototype.renderMarker = function (e, t, i, n, r) { var o, s, a, l, h, c, p, u = void 0 === e.index ? e.category : e.index, g = e.marker, m = { color: g.border.color, width: g.border.width }, f = g.border.color, y = "BoxAndWhisker" === e.type, v = g.fill || (y ? t.interior || e.interior : "#ffffff"), w = y ? En(e.seriesElement.childNodes, "Series_" + e.index + "_Point_" + t.index) : e.symbolElement; if (m.color = f || e.setPointColor(t, e.interior), o = this.elementId + "_Series_" + u + "_Point_" + t.index + "_Symbol" + (n || ""), c = { cancel: !1, name: yj, series: e, point: t, fill: t.isEmpty ? e.emptyPointSettings.fill || v : v, border: { color: "BoxAndWhisker" === e.type ? d(f) || "transparent" === f ? Un(v, -.6) : f : m.color, width: m.width }, height: g.height, width: g.width, shape: g.shape }, c.border = e.setBorderColor(t, { width: c.border.width, color: c.border.color }), e.isRectSeries && "BoxAndWhisker" !== e.type || (this.chart.trigger(yj, c), t.color = c.fill), t.color = c.fill, c.cancel) i = null, t.marker = { visible: !1 }; else { var b = void 0; b = "RangeArea" === e.type || "RangeColumn" === e.type ? n ? t.low : t.high : y ? t.outliers[n] : t.y, h = new rj(o, c.fill, c.border.width, c.border.color, g.opacity, null), (void 0 !== w && null !== w || this.chart.enableCanvas) && (r && Sn(h.id) && (p = Sn(h.id), l = "Circle" === c.shape ? "c" : "", s = { x: +p.getAttribute(l + "x"), y: +p.getAttribute(l + "y") }, a = p.getAttribute("d")), p = bn(i, c.shape, new $E(c.width, c.height), g.imageUrl, h, (t.x.toString(), b.toString()), this.chart.renderer, e.clipRect), kn(this.chart.enableCanvas, w, p, r, !0, l + "x", l + "y", s, a, !1, !1, null, e.chart.duration)), t.marker = { border: c.border, fill: c.fill, height: c.height, visible: !0, shape: c.shape, width: c.width } } }, t.prototype.createElement = function (e, t) { var i, n, r, o = e.marker, s = o.border.width + 8 + 5, a = e.chart.svgRenderer, l = void 0 === e.index ? e.category : e.index; if (n = "Cartesian" === e.chart.chartAreaType ? "translate(" + e.clipRect.x + "," + e.clipRect.y + ")" : "", o.visible) { var h = (o.height + s) / 2, d = (o.width + s) / 2; if (i = "Cartesian" === e.chart.chartAreaType ? mn(t, r = new aI(this.elementId + "_ChartMarkerClipRect_" + l, "transparent", { width: 1, color: "Gray" }, 1, { x: -d, y: -h, width: e.clipRect.width + 2 * d, height: e.clipRect.height + 2 * h }), a) : mn(t, r = new lI(this.elementId + "_ChartMarkerClipRect_" + l, "transparent", { width: 1, color: "Gray" }, 1, e.clipRect.width / 2 + e.clipRect.x, e.clipRect.height / 2 + e.clipRect.y, e.chart.radius + Math.max(h, d)), a, "drawCircularClipPath"), r = { id: this.elementId + "SymbolGroup" + l, transform: n, "clip-path": "url(#" + this.elementId + "_ChartMarkerClipRect_" + l + ")" }, e.symbolElement = a.createGroup(r), e.symbolElement.appendChild(i), this.chart.enableCanvas) { document.getElementById(this.chart.element.id + "_tooltip_svg").appendChild(e.symbolElement) } } }, t.prototype.getRangeLowPoint = function (e, t) { var i = e.x, n = e.y; return t.chart.requireInvertedAxis ? (n += e.height / 2, i += t.yAxis.isInversed ? e.width : 0) : (n += t.yAxis.isInversed ? 0 : e.height, i += e.width / 2), { x: i, y: n } }, t.prototype.doMarkerAnimation = function (e) { if ("Scatter" !== e.type && "Bubble" !== e.type && "Candle" !== e.type && "Hilo" !== e.type && "HiloOpenClose" !== e.type && ("PolarRadar" !== e.chart.chartAreaType || "Scatter" !== e.drawType)) for (var t = e.symbolElement.childNodes, i = e.animation.delay + e.animation.duration, n = e.chart.animated ? e.chart.duration : 200, r = 1, o = "RangeArea" === e.type || "RangeColumn" === e.type ? 2 : 1, s = 0; s < e.points.length; s++)if (e.points[s].symbolLocations.length && t[r]) { if (pn(t[r], i, n, e, s, e.points[s].symbolLocations[0], !1), 2 === o) { var a = this.getRangeLowPoint(e.points[s].regions[0], e); pn(t[r + 1], i, n, e, s, a, !1) } r += o } }, t }(II), NI = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), OI = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, RI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NI(t, e), OI([Y(0)], t.prototype, "x", void 0), OI([Y(0)], t.prototype, "y", void 0), t }(ww), zI = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return NI(t, e), OI([Y(!0)], t.prototype, "visible", void 0), OI([Y(null)], t.prototype, "height", void 0), OI([Y(null)], t.prototype, "width", void 0), OI([U({ x: 0, y: 0 }, RI)], t.prototype, "location", void 0), OI([Y("Auto")], t.prototype, "position", void 0), OI([Y(8)], t.prototype, "padding", void 0), OI([Y("Center")], t.prototype, "alignment", void 0), OI([U(IE.legendLabelFont, zE)], t.prototype, "textStyle", void 0), OI([Y(10)], t.prototype, "shapeHeight", void 0), OI([Y(10)], t.prototype, "shapeWidth", void 0), OI([U({}, BE)], t.prototype, "border", void 0), OI([U({ left: 0, right: 0, top: 0, bottom: 0 }, VE)], t.prototype, "margin", void 0), OI([Y(5)], t.prototype, "shapePadding", void 0), OI([Y("transparent")], t.prototype, "background", void 0), OI([Y(1)], t.prototype, "opacity", void 0), OI([Y(!0)], t.prototype, "toggleVisibility", void 0), OI([Y(null)], t.prototype, "description", void 0), OI([Y(3)], t.prototype, "tabIndex", void 0), t }(ww), BI = function () { function e(e) { this.rowCount = 0, this.columnCount = 0, this.pageButtonSize = 8, this.pageXCollections = [], this.maxColumns = 0, this.isTrimmed = !1, this.maxWidth = 0, this.currentPage = 1, this.currentPageNumber = 1, this.legendRegions = [], this.pagingRegions = [], this.chart = e, this.legend = e.legendSettings, this.legendID = e.element.id + "_chart_legend", this.isChartControl = "chart" === e.getModuleName() } return e.prototype.calculateLegendBounds = function (e, t) { var i = this.legend; this.getPosition(i.position, t), this.legendBounds = new ej(e.x, e.y, 0, 0), this.isVertical = "Left" === this.position || "Right" === this.position, this.isVertical ? (this.legendBounds.height = Jn(i.height, t.height - (e.y - this.chart.margin.top)) || e.height, this.legendBounds.width = Jn(i.width || "20%", t.width)) : (this.legendBounds.width = Jn(i.width, t.width) || e.width, this.legendBounds.height = Jn(i.height || "20%", t.height)), this.library.getLegendBounds(t, this.legendBounds, i), this.getLocation(this.position, i.alignment, this.legendBounds, e, t) }, e.prototype.getPosition = function (e, t) { this.isChartControl ? this.position = "Auto" !== e ? e : "Bottom" : ("Auto" !== e || !this.chart.visibleSeries || "Funnel" !== this.chart.visibleSeries[0].type && "Pyramid" !== this.chart.visibleSeries[0].type || (e = "Top"), this.position = "Auto" !== e ? e : t.width > t.height ? "Right" : "Bottom") }, e.prototype.setBounds = function (e, t, i, n) { e = e < n.width ? e : n.width, t = t < n.height ? t : n.height, n.width = i.width ? n.width : e, n.height = i.height ? n.height : t, this.rowCount = Math.max(1, Math.ceil((n.height - i.padding) / (this.maxItemHeight + i.padding))) }, e.prototype.getLocation = function (e, t, i, n, r) { var o = this.legend.border.width, s = i.height + o + this.legend.margin.top + this.legend.margin.bottom, a = i.width + o + this.legend.margin.left + this.legend.margin.right, l = this.chart.margin.bottom; "Bottom" === e ? (i.x = this.alignLegend(i.x, r.width, i.width, t), i.y = n.y + (n.height - s) + o + this.legend.margin.top, Yi(n, new cI(0, 0, 0, s))) : "Top" === e ? (i.x = this.alignLegend(i.x, r.width, i.width, t), i.y = n.y + o + this.legend.margin.top, Yi(n, new cI(0, 0, s, 0))) : "Right" === e ? (i.x = n.x + (n.width - i.width) - this.legend.margin.right, i.y = n.y + this.alignLegend(0, r.height - (n.y + l), i.height, t), Yi(n, new cI(0, a, 0, 0))) : "Left" === e ? (i.x = i.x + this.legend.margin.left, i.y = n.y + this.alignLegend(0, r.height - (n.y + l), i.height, t), Yi(n, new cI(a, 0, 0, 0))) : (i.x = this.legend.location.x, i.y = this.legend.location.y, Yi(n, new cI(0, 0, 0, 0))) }, e.prototype.alignLegend = function (e, t, i, n) { switch (n) { case "Far": e = t - i - e; break; case "Center": e = (t - i) / 2 }return e }, e.prototype.renderLegend = function (e, t, i, n) { var r = this.findFirstLegendPosition(this.legendCollections), o = t.padding; this.legendRegions = [], this.maxItemHeight = Math.max(this.legendCollections[0].textSize.height, t.shapeHeight); var s = e.renderer.createGroup({ id: this.legendID + "_g" }), a = this.createLegendElements(e, i, s, t, this.legendID, n); if (r !== this.legendCollections.length) { var l = void 0, h = void 0; h = new dI(i.x + o + t.shapeWidth / 2, i.y + o + this.maxItemHeight / 2); var d = new nj("", h.x, h.y, "start"); this.totalPages = this.isChartControl ? this.totalPages : 0; var c = t.shapePadding + o + t.shapeWidth, p = 0; this.pageXCollections = [], this.legendCollections[r].location = h; for (var u = this.legendCollections[r], g = 0, m = this.legendCollections; g < m.length; g++) { var f = m[g]; "accumulationchart" === this.chart.getModuleName() && (f.fill = this.chart.visibleSeries[0].points[f.pointIndex].color), f.render && "" !== f.text && ((l = e.renderer.createGroup({ id: this.legendID + this.generateId(f, "_g_", p) })) && (l.setAttribute("tabindex", t.tabIndex.toString()), l.setAttribute("aria-label", t.description || "Click to show or hide the " + f.text + " series")), this.library.getRenderPoint(f, h, c, u, i, p, r), this.renderSymbol(f, l, p), this.renderText(e, f, l, d, p), l && l.setAttribute("style", "cursor: " + (t.toggleVisibility || "None" !== e.selectionMode ? "pointer" : "auto")), a && a.appendChild(l), u = f), p++ } this.isPaging ? this.renderPagingElements(e, i, d, s) : this.totalPages = 1 } kn(e.enableCanvas, e.svgObject, s, n) }, e.prototype.findFirstLegendPosition = function (e) { for (var t = 0, i = 0, n = e; i < n.length; i++) { var r = n[i]; if (r.render && "" !== r.text) break; t++ } return t }, e.prototype.createLegendElements = function (e, t, i, n, r, o) { var s = n.padding, a = new aI(r + "_element", n.background, n.border, n.opacity, t); i ? i.appendChild(e.renderer.drawRectangle(a)) : e.renderer.drawRectangle(a); var l = e.renderer.createGroup({ id: r + "_collections" }), h = e.enableCanvas; h || i.appendChild(l), this.legendTranslateGroup = e.renderer.createGroup({ id: r + "_translate_g" }), h || l.appendChild(this.legendTranslateGroup); var d = e.renderer.createClipPath({ id: r + "_clipPath" }); return a.y += s, a.id += "_clipPath_rect", a.width = !this.isChartControl && this.isVertical ? this.maxWidth - s : t.width, h ? this.pagingClipRect = a : (this.clipRect = e.renderer.drawRectangle(a), d.appendChild(this.clipRect)), kn(h, e.svgObject, d, o), h || l.setAttribute("style", "clip-path:url(#" + d.id + ")"), this.legendTranslateGroup }, e.prototype.renderSymbol = function (e, t, i) { var n = e.visible ? e.fill : "#D3D3D3", r = "SeriesType" === e.shape ? e.type : e.shape; r = "Scatter" === r ? e.markerShape : r; var o, s = "chart" === this.chart.getModuleName() && "SeriesType" === e.shape && e.type.toLowerCase().indexOf("line") > -1 && -1 === e.type.toLowerCase().indexOf("area") ? this.chart.visibleSeries[i].width : 1, a = new rj(this.legendID + this.generateId(e, "_shape_", i), n, s, n, 1, "", ""), l = this.chart.enableCanvas; l ? (o = -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), bn(e.location, r, new $E(this.legend.shapeWidth, this.legend.shapeHeight), "", a, e.text, this.chart.renderer, this.currentPageNumber ? new ej(0, o, 0, 0) : null), this.legendRegions.push({ rect: new ej(e.location.x, e.location.y, this.legend.shapeWidth, this.legend.shapeHeight + o), index: i })) : t.appendChild(bn(e.location, r, new $E(this.legend.shapeWidth, this.legend.shapeHeight), "", a, e.text, this.chart.renderer)), ("Line" === r && e.markerVisibility && "Image" !== e.markerShape || "Doughnut" === e.type) && (a.id = this.legendID + this.generateId(e, "_shape_marker_", i), r = "Doughnut" === e.type ? "Circle" : e.markerShape, a.fill = "Doughnut" === e.type ? "#FFFFFF" : a.fill, l ? bn(e.location, r, new $E(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), "", a, e.text, this.chart.renderer, this.currentPageNumber ? new ej(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null) : t.appendChild(bn(e.location, r, new $E(this.legend.shapeWidth / 2, this.legend.shapeHeight / 2), "", a, e.text))) }, e.prototype.renderText = function (e, t, i, n, r) { var o = e.legendSettings; n.id = this.legendID + this.generateId(t, "_text_", r); var s = t.visible ? o.textStyle.color || e.themeStyle.legendLabel : "#D3D3D3"; n.text = t.text, n.x = t.location.x + o.shapeWidth / 2 + o.shapePadding, n.y = t.location.y + this.maxItemHeight / 4; var a = this.chart.enableCanvas, l = $n(e.renderer, n, o.textStyle, s, i, !1, !1, !1, !1, null, this.currentPageNumber && a ? new ej(0, -this.translatePage(null, this.currentPageNumber - 1, this.currentPageNumber), 0, 0) : null); if (l && l.setAttribute("aria-label", o.description || "Click to show or hide the " + t.text + " series"), a) { var h = xi(n.text, o.textStyle); this.legendRegions[r].rect.y = n.y < this.legendRegions[r].rect.y ? n.y : this.legendRegions[r].rect.y, this.legendRegions[r].rect.width += h.width, this.legendRegions[r].rect.height = h.height, this.legendRegions[r].rect.y -= .5 * h.height } }, e.prototype.renderPagingElements = function (e, t, i, n) { var r = e.renderer.createGroup({ id: this.legendID + "_navigation" }); this.pagingRegions = []; var o = e.enableCanvas; o || n.appendChild(r); var s = e.legendSettings; this.isChartControl || !this.isVertical ? this.totalPages = Math.ceil(this.totalPages / Math.max(1, this.rowCount - 1)) : this.totalPages = Math.ceil(this.totalPages / this.maxColumns); var a = new rj(this.legendID + "_pageup", "transparent", 5, "#545454", 1, "", ""), l = this.pageButtonSize; r && r.setAttribute("style", "cursor: pointer"), this.clipPathHeight = (this.rowCount - 1) * (this.maxItemHeight + s.padding), o ? (this.pagingClipRect.height = this.legendBounds.height - this.clipPathHeight - (this.pagingClipRect.y - this.legendBounds.y) - s.border.width, this.pagingClipRect.y = this.pagingClipRect.y + this.clipPathHeight, this.pagingClipRect.x += s.border.width, this.pagingClipRect.width -= s.border.width + s.border.width / 2, this.chart.renderer.clearRect(new ej(this.pagingClipRect.x, this.pagingClipRect.y, this.pagingClipRect.width, this.pagingClipRect.height))) : this.clipRect.setAttribute("height", this.clipPathHeight.toString()); var h = t.x + l / 2, d = t.y + this.clipPathHeight + (t.height - this.clipPathHeight) / 2, c = xi(this.totalPages + "/" + this.totalPages, s.textStyle); o ? bn({ x: h, y: d }, "LeftArrow", new $E(l, l), "", a, 0, this.chart.renderer, new ej(t.width - (2 * (l + 8) + 8 + c.width), 0, 0, 0)) : r.appendChild(bn({ x: h, y: d }, "LeftArrow", new $E(l, l), "", a)), this.pagingRegions.push(new ej(h + t.width - (2 * (l + 8) + 8 + c.width) - .5 * l, d - .5 * l, l, l)), i.x = h + l / 2 + 8, i.y = d + c.height / 4, i.id = this.legendID + "_pagenumber", i.text = "1/" + this.totalPages, o && this.totalNoOfPages && (i.text = this.currentPageNumber + "/" + this.totalNoOfPages); var p = $n(e.renderer, i, s.textStyle, s.textStyle.color, r, !1, !1, !1, !1, null, new ej(t.width - (2 * (l + 8) + 8 + c.width), 0, 0, 0)); h = i.x + 8 + l / 2 + c.width, a.id = this.legendID + "_pagedown", o ? bn({ x: h, y: d }, "RightArrow", new $E(l, l), "", a, 0, this.chart.renderer, new ej(t.width - (2 * (l + 8) + 8 + c.width), 0, 0, 0)) : r.appendChild(bn({ x: h, y: d }, "RightArrow", new $E(l, l), "", a)), this.pagingRegions.push(new ej(h + (t.width - (2 * (l + 8) + 8 + c.width) - .5 * l), d - .5 * l, l, l)), o ? 1 === this.currentPageNumber && this.calTotalPage && (this.totalNoOfPages = this.totalPages, this.calTotalPage = !1) : r.setAttribute("transform", "translate(" + (t.width - (2 * (l + 8) + 8 + c.width)) + ", 0)"), this.translatePage(p, this.currentPage - 1, this.currentPage) }, e.prototype.translatePage = function (e, t, i) { var n = this.clipPathHeight * t, r = "translate(0,-" + n + ")"; if (!this.isChartControl && this.isVertical) { this.maxColumns; r = "translate(-" + (n = (n = this.pageXCollections[t * this.maxColumns] - this.legendBounds.x) < 0 ? 0 : n) + ",0)" } return this.chart.enableCanvas || this.legendTranslateGroup.setAttribute("transform", r), this.chart.enableCanvas || (e.textContent = i + "/" + this.totalPages), this.currentPage = i, n }, e.prototype.changePage = function (e, t) { var i = document.getElementById(this.legendID + "_pagenumber"), n = parseInt(i.textContent.split("/")[0], 10); t && n > 1 ? this.translatePage(i, n - 2, n - 1) : !t && n < this.totalPages && this.translatePage(i, n, n + 1) }, e.prototype.generateId = function (e, t, i) { return this.isChartControl ? t + i : t + e.pointIndex }, e.prototype.move = function (e) { var t = this, i = this.chart.mouseX, n = this.chart.mouseY; if (e.target.textContent.indexOf("...") > -1) { var r = e.target.id.split(this.legendID + "_text_"); if (2 === r.length) { var o = parseInt(r[1], 10), s = this.chart.element; isNaN(o) || (this.chart.isTouch && Oi(this.chart.element.id + "_EJ2_Legend_Tooltip"), this.isChartControl ? zi(this.chart.series[o].name, i, n, s.offsetWidth, s.id + "_EJ2_Legend_Tooltip", Sn(this.chart.element.id + "_Secondary_Element")) : zi(this.chart.visibleSeries[0].points[o].x.toString(), i + 10, n + 10, s.offsetWidth, s.id + "_EJ2_Legend_Tooltip", Sn(this.chart.element.id + "_Secondary_Element"))) } } else Oi(this.chart.element.id + "_EJ2_Legend_Tooltip"); this.chart.isTouch && (clearTimeout(this.clearTooltip), this.clearTooltip = setTimeout(function () { Oi(t.chart.element.id + "_EJ2_Legend_Tooltip") }, 1e3)) }, e }(), FI = function () { return function (e, t, i, n, r, o, s, a, l) { this.location = { x: 0, y: 0 }, this.text = e, this.fill = t, this.shape = i, this.visible = n, this.type = r, this.markerVisibility = s, this.markerShape = o, this.pointIndex = a, this.seriesIndex = l } }(), VI = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), WI = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, HI = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.clipRect = new ej(0, 0, 0, 0), t } return VI(t, e), t.prototype.setDataSource = function (e, t) { e && (this.xData = e.xData, this.yData = e.yData, this.points = e.points); t[an(this.type) + "IndicatorModule"].initDataSource(this, t), t.visibleSeriesCount += this.targetSeries.length }, WI([Y("Sma")], t.prototype, "type", void 0), WI([Y(14)], t.prototype, "period", void 0), WI([Y(14)], t.prototype, "kPeriod", void 0), WI([Y(3)], t.prototype, "dPeriod", void 0), WI([Y(80)], t.prototype, "overBought", void 0), WI([Y(20)], t.prototype, "overSold", void 0), WI([Y(2)], t.prototype, "standardDeviation", void 0), WI([Y("Close")], t.prototype, "field", void 0), WI([Y(12)], t.prototype, "slowPeriod", void 0), WI([Y(26)], t.prototype, "fastPeriod", void 0), WI([Y(!0)], t.prototype, "showZones", void 0), WI([U({ color: "#ff9933", width: 2 }, RE)], t.prototype, "macdLine", void 0), WI([Y("Both")], t.prototype, "macdType", void 0), WI([Y("#2ecd71")], t.prototype, "macdPositiveColor", void 0), WI([Y("#e74c3d")], t.prototype, "macdNegativeColor", void 0), WI([Y("rgba(211,211,211,0.25)")], t.prototype, "bandColor", void 0), WI([U({ color: "#ffb735", width: 1 }, RE)], t.prototype, "upperLine", void 0), WI([U({ color: "#f2ec2f", width: 1 }, RE)], t.prototype, "lowerLine", void 0), WI([U({ color: "#f2ec2f", width: 1 }, RE)], t.prototype, "periodLine", void 0), WI([Y("")], t.prototype, "seriesName", void 0), t }(DI), _I = function () { function e(e) { this.table = {}, this.nElements = 0, this.toStr = e || sr } return e.prototype.getValue = function (e) { var t = this.table["$" + this.toStr(e)]; if (void 0 !== t) return t.value }, e.prototype.setValue = function (e, t) { var i = "$" + this.toStr(e); this.table[i]; this.nElements++ , this.table[i] = { key: e, value: t } }, e.prototype.remove = function (e) { var t = "$" + this.toStr(e), i = this.table[t]; return delete this.table[t], this.nElements-- , i.value }, e.prototype.keys = function () { for (var e = [], t = Object.keys(this.table), i = 0; i < t.length; i++) { var n = this.table[t[i]]; e.push(n.key) } return e }, e.prototype.values = function () { for (var e = [], t = Object.keys(this.table), i = 0; i < t.length; i++) { var n = this.table[t[i]]; e.push(n.value) } return e }, e.prototype.containsKey = function (e) { return !(void 0 === this.getValue(e)) }, e.prototype.clear = function () { this.table = {}, this.nElements = 0 }, e.prototype.size = function () { return this.nElements }, e }(), YI = function () { function e(e) { this.stringStartMark = "/", this.internalValue = "", this.isSaving6 = !1, this.position6 = -1, this.internalValue = this.normalizeValue(e) } return Object.defineProperty(e.prototype, "status", { get: function () { return this.status6 }, set: function (e) { this.status6 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving6 }, set: function (e) { this.isSaving6 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index6 }, set: function (e) { this.index6 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position6 }, set: function (e) { this.position6 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return null }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { return this.internalValue }, set: function (e) { var t = e; null !== e && e.length > 0 ? (t = e, this.internalValue = this.normalizeValue(t)) : this.internalValue = t }, enumerable: !0, configurable: !0 }), e.prototype.save = function (e) { e.write(this.toString()) }, e.prototype.toString = function () { return this.stringStartMark + this.escapeString(this.value) }, e.prototype.clone = function (t) { var i = new e; return i.value = this.internalValue, i }, e.prototype.escapeString = function (t) { for (var i = "", n = 0, r = t.length; n < r; n++) { var o = t[n]; e.delimiters.indexOf(o); i += o } return i }, e.prototype.normalizeValue = function (e, t) { return e }, e.delimiters = "()<>[]{}/%}", e.replacements = [" ", "\t", "\n", "\r"], e }(), UI = function () { function e() { this.forTest = "test", this.forTest = e.obj } return e.obj = "obj", e.endObj = "endobj", e.r = "R", e.whiteSpace = " ", e.slash = "/", e.newLine = "\r\n", e.stream = "stream", e.endStream = "endstream", e.xref = "xref", e.f = "f", e.n = "n", e.trailer = "trailer", e.startxref = "startxref", e.eof = "%%EOF", e.header = "%PDF-1.5", e.beginText = "BT", e.endText = "ET", e.beginPath = "m", e.appendLineSegment = "l", e.stroke = "S", e.fill = "f", e.fillEvenOdd = "f*", e.fillStroke = "B", e.fillStrokeEvenOdd = "B*", e.appendbeziercurve = "c", e.appendRectangle = "re", e.saveState = "q", e.restoreState = "Q", e.paintXObject = "Do", e.modifyCtm = "cm", e.modifyTM = "Tm", e.setLineWidth = "w", e.setLineCapStyle = "J", e.setLineJoinStyle = "j", e.setDashPattern = "d", e.setFlatnessTolerance = "i", e.closePath = "h", e.closeStrokePath = "s", e.closeFillStrokePath = "b", e.setCharacterSpace = "Tc", e.setWordSpace = "Tw", e.setHorizontalScaling = "Tz", e.setTextLeading = "TL", e.setFont = "Tf", e.setRenderingMode = "Tr", e.setTextRise = "Ts", e.setTextScaling = "Tz", e.setCoords = "Td", e.goToNextLine = "T*", e.setText = "Tj", e.setTextWithFormatting = "TJ", e.setTextOnNewLine = "'", e.selectcolorspaceforstroking = "CS", e.selectcolorspacefornonstroking = "cs", e.setrbgcolorforstroking = "RG", e.setrbgcolorfornonstroking = "rg", e.setcmykcolorforstroking = "K", e.setcmykcolorfornonstroking = "k", e.setgraycolorforstroking = "G", e.setgraycolorfornonstroking = "g", e.clipPath = "W", e.clipPathEvenOdd = "W*", e.endPath = "n", e.setGraphicsState = "gs", e.comment = "%", e.evenOdd = "*", e.setMiterLimit = "M", e }(), qI = function () { return function () { this.pages = "Pages", this.kids = "Kids", this.count = "Count", this.resources = "Resources", this.type = "Type", this.size = "Size", this.mediaBox = "MediaBox", this.parent = "Parent", this.root = "Root", this.decodeParms = "DecodeParms", this.filter = "Filter", this.font = "Font", this.type1 = "Type1", this.baseFont = "BaseFont", this.encoding = "Encoding", this.subtype = "Subtype", this.contents = "Contents", this.procset = "ProcSet", this.colorSpace = "ColorSpace", this.extGState = "ExtGState", this.pattern = "Pattern", this.xObject = "XObject", this.length = "Length", this.width = "Width", this.height = "Height", this.bitsPerComponent = "BitsPerComponent", this.image = "Image", this.dctdecode = "DCTDecode", this.columns = "Columns", this.blackIs1 = "BlackIs1", this.k = "K", this.s = "S", this.predictor = "Predictor", this.deviceRgb = "DeviceRGB", this.next = "Next", this.action = "Action", this.link = "Link", this.a = "A", this.annot = "Annot", this.p = "P", this.c = "C", this.rect = "Rect", this.uri = "URI", this.annots = "Annots", this.ca = "ca", this.CA = "CA", this.xyz = "XYZ", this.fit = "Fit", this.dest = "Dest", this.BM = "BM", this.flatedecode = "FlateDecode", this.rotate = "Rotate", this.bBox = "BBox", this.form = "Form", this.w = "W", this.cIDFontType2 = "CIDFontType2", this.cIDToGIDMap = "CIDToGIDMap", this.identity = "Identity", this.dw = "DW", this.fontDescriptor = "FontDescriptor", this.cIDSystemInfo = "CIDSystemInfo", this.fontName = "FontName", this.flags = "Flags", this.fontBBox = "FontBBox", this.missingWidth = "MissingWidth", this.stemV = "StemV", this.italicAngle = "ItalicAngle", this.capHeight = "CapHeight", this.ascent = "Ascent", this.descent = "Descent", this.leading = "Leading", this.avgWidth = "AvgWidth", this.fontFile2 = "FontFile2", this.maxWidth = "MaxWidth", this.xHeight = "XHeight", this.stemH = "StemH", this.registry = "Registry", this.ordering = "Ordering", this.supplement = "Supplement", this.type0 = "Type0", this.identityH = "Identity-H", this.toUnicode = "ToUnicode", this.descendantFonts = "DescendantFonts" } }(), GI = function () { function e(e) { if (this.position7 = -1, this.primitiveItems = new _I, this.prefix = "<<", this.suffix = ">>", this.resources = [], this.object = null, this.archive = !0, this.isFont = !1, void 0 === e) this.primitiveItems = new _I, this.encrypt = !0, this.dictionaryProperties = new qI; else { this.primitiveItems = new _I; for (var t = e.items.keys(), i = e.items.values(), n = 0; n < e.items.size(); n++)this.primitiveItems.setValue(t[n], i[n]); this.status = e.status, this.freezeChanges(this), this.encrypt = !0, this.dictionaryProperties = new qI } } return Object.defineProperty(e.prototype, "items", { get: function () { return this.primitiveItems }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "status", { get: function () { return this.status7 }, set: function (e) { this.status7 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving7 }, set: function (e) { this.isSaving7 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index7 }, set: function (e) { this.index7 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return this.object }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position7 }, set: function (e) { this.position7 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "Count", { get: function () { return this.primitiveItems.size() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "Dictionary", { get: function () { return this }, enumerable: !0, configurable: !0 }), e.prototype.getArchive = function () { return this.archive }, e.prototype.setArchive = function (e) { this.archive = e }, e.prototype.setEncrypt = function (e) { this.encrypt = e, this.modify() }, e.prototype.getEncrypt = function () { return this.encrypt }, e.prototype.freezeChanges = function (e) { this.bChanged = !1 }, e.prototype.clone = function (t) { return new e }, e.prototype.modify = function () { this.bChanged = !0 }, e.prototype.remove = function (e) { "string" != typeof e ? (this.primitiveItems.remove(e.value), this.modify()) : this.remove(new YI(e)) }, e.prototype.containsKey = function (e) { return this.primitiveItems.containsKey(e.toString()) }, e.prototype.onBeginSave = function () { this.beginSave.sender.beginSave() }, e.prototype.onFontDictionaryBeginSave = function () { this.fontDictionaryBeginSave.sender.fontDictionaryBeginSave() }, e.prototype.onDescendantFontBeginSave = function () { this.descendantFontBeginSave.sender.descendantFontBeginSave() }, e.prototype.onTemplateBeginSave = function () { this.pageBeginDrawTemplate.sender.pageBeginSave() }, e.prototype.onBeginAnnotationSave = function () { this.annotationBeginSave.sender.beginSave() }, e.prototype.onSectionBeginSave = function (e) { var t = this.sectionBeginSave; t.sender.beginSave(t.state, e) }, e.prototype.save = function (e, t) { void 0 === t ? this.save(e, !0) : (e.write(this.prefix), void 0 !== this.beginSave && this.onBeginSave(), void 0 !== this.descendantFontBeginSave && this.onDescendantFontBeginSave(), void 0 !== this.fontDictionaryBeginSave && this.onFontDictionaryBeginSave(), void 0 !== this.annotationBeginSave && this.onBeginAnnotationSave(), void 0 !== this.sectionBeginSave && this.onSectionBeginSave(e), void 0 !== this.pageBeginDrawTemplate && this.onTemplateBeginSave(), this.Count > 0 && this.saveItems(e), e.write(this.suffix), e.write(UI.newLine)) }, e.prototype.saveItems = function (e) { e.write(UI.newLine); for (var t = this.primitiveItems.keys(), i = this.primitiveItems.values(), n = 0; n < t.length; n++) { var r = t[n]; new YI(r).save(e), e.write(UI.whiteSpace); i[n].save(e), e.write(UI.newLine) } }, e }(), QI = function () { return function (e) { this.sender = e } }(), XI = function () { return function (e) { this.sender = e } }(), JI = function () { return function (e) { this.sender = e } }(), ZI = function () { return function (e) { this.sender = e } }(), KI = function () { return function (e, t) { this.sender = e, this.state = t } }(), $I = function () { return function (e) { this.sender = e } }(), ek = function () { function e(e) { this.position5 = -1, this.value = e } return Object.defineProperty(e.prototype, "intValue", { get: function () { return this.value }, set: function (e) { this.value = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isInteger", { get: function () { return this.integer }, set: function (e) { this.integer = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "status", { get: function () { return this.status5 }, set: function (e) { this.status5 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving5 }, set: function (e) { this.isSaving5 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index5 }, set: function (e) { this.index5 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position5 }, set: function (e) { this.position5 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return null }, enumerable: !0, configurable: !0 }), e.prototype.save = function (e) { e.write(this.intValue.toString()) }, e.prototype.clone = function (t) { return new e(this.value) }, e.floatToString = function (e) { var t = e.toFixed(2); return "0.00" === t && (t = ".00"), t }, e.min = function (e, t, i) { var n = Math.min(e, t); return Math.min(i, n) }, e }(), tk = function () { function e(t) { if (this.startMark = "[", this.endMark = "]", this.position9 = -1, this.clonedObject9 = null, this.isFont = !1, void 0 === t) this.internalElements = []; else if (void 0 === t || t instanceof e) { var i = t; this.internalElements = []; for (r = 0; r < i.elements.length; r++)this.internalElements.push(i.elements[r]) } else for (var n = t, r = 0; r < n.length; r++) { var o = new ek(n[r]); this.add(o) } } return e.prototype.items = function (e) { return this.internalElements[e] }, Object.defineProperty(e.prototype, "count", { get: function () { return this.internalElements.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "status", { get: function () { return this.status9 }, set: function (e) { this.status9 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving9 }, set: function (e) { this.isSaving9 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return this.clonedObject9 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position9 }, set: function (e) { this.position9 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index9 }, set: function (e) { this.index9 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "CrossTable", { get: function () { return this.pdfCrossTable }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "elements", { get: function () { return this.internalElements }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { void 0 === this.internalElements && (this.internalElements = []), this.internalElements.push(e), this.markedChange() }, e.prototype.markedChange = function () { this.bChanged = !0 }, e.prototype.contains = function (e) { for (var t = 0; t < this.internalElements.length; t++) { var i = this.internalElements[t], n = e; if (null != i && void 0 !== i && null != n && void 0 !== n && i.value === n.value) return !0 } return !1 }, e.prototype.getItems = function (e) { return this.internalElements[e] }, e.prototype.save = function (e) { e.write(this.startMark); for (var t = 0, i = this.count; t < i; t++)this.getItems(t).save(e), t + 1 !== i && e.write(UI.whiteSpace); e.write(this.endMark) }, e.prototype.clone = function (t) { this.clonedObject9 = null; for (var i = new e, n = 0; n < this.internalElements.length; n++) { var r = this.internalElements[n]; i.add(r.clone(t)) } return i.pdfCrossTable = t, this.clonedObject9 = i, i }, e.fromRectangle = function (t) { return new e([t.x, t.y, t.width, t.height]) }, e.prototype.insert = function (e, t) { if (e < this.internalElements.length && e > 0) { for (var i = [], n = 0; n < e; n++)i.push(this.internalElements[n]); i.push(t); for (n = e; n < this.internalElements.length; n++)i.push(this.internalElements[n]); this.internalElements = i } else this.internalElements.push(t); this.markChanged() }, e.prototype.indexOf = function (e) { return this.internalElements.indexOf(e) }, e.prototype.remove = function (e) { var t = this.internalElements.indexOf(e); this.internalElements[t] = null, this.markChanged() }, e.prototype.removeAt = function (e) { if (this.internalElements.length > e) { for (var t = [], i = 0; i < e; i++)t.push(this.internalElements[i]); for (i = e + 1; i < this.internalElements.length; i++)t.push(this.internalElements[i]); this.internalElements = t } this.markChanged() }, e.prototype.clear = function () { this.internalElements = [], this.markChanged() }, e.prototype.markChanged = function () { this.bChanged = !0 }, e }(), ik = function () { function e() { } return e.save = function (e, t) { if (null === e || void 0 === e || "" === e) throw new Error("ArgumentException: fileName cannot be undefined, null or empty"); var i = e.substring(e.lastIndexOf(".") + 1, e.length), n = this.getMimeType(i); if ("" !== n && (t = new Blob([t], { type: n })), this.isMicrosoftBrowser) navigator.msSaveBlob(t, e); else { var r = document.createElementNS("http://www.w3.org/1999/xhtml", "a"); this.saveInternal(e, i, t, r, "download" in r) } }, e.saveInternal = function (e, t, i, n, r) { if (r) { n.download = e; var o = window.URL.createObjectURL(i); n.href = o; var s = document.createEvent("MouseEvent"); s.initEvent("click", !0, !0), n.dispatchEvent(s), setTimeout(function () { window.URL.revokeObjectURL(o), o = void 0 }) } else if ("docx" !== t && "xlsx" !== t) { var a = window.URL.createObjectURL(i); window.open(a, "_blank") || (window.location.href = a) } else { var l = new FileReader; l.onloadend = function () { window.open(l.result, "_blank") || (window.location.href = l.result) }, l.readAsDataURL(i) } }, e.getMimeType = function (e) { var t = ""; switch (e) { case "html": t = "text/html"; break; case "pdf": t = "application/pdf"; break; case "docx": t = "application/vnd.openxmlformats-officedocument.wordprocessingml.document"; break; case "xlsx": t = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"; break; case "txt": t = "text/plain" }return t }, e }(), nk = function () { function e() { this.contentPos = 0, this.bufferText = "", this.bufferBlob = new Blob([""], { type: "text/plain" }), this.currentState = "Initial", this.namespaceStack = [], this.namespaceStack.push(new rk), this.namespaceStack[0].set("xmlns", "http://www.w3.org/2000/xmlns/", "Special"), this.namespaceStack.push(new rk), this.namespaceStack[1].set("xml", "http://www.w3.org/XML/1998/namespace", "Special"), this.namespaceStack.push(new rk), this.namespaceStack[2].set("", "", "Implied"), this.elementStack = [], this.elementStack.push(new ok), this.elementStack[0].set("", "", "", this.namespaceStack.length - 1), this.attributeStack = [], ik.isMicrosoftBrowser = !!navigator.msSaveBlob } return Object.defineProperty(e.prototype, "buffer", { get: function () { return this.flush(), this.bufferBlob }, enumerable: !0, configurable: !0 }), e.prototype.writeProcessingInstruction = function (e, t) { if (void 0 === e || null === e || 0 === e.length) throw new Error("ArgumentException: name should not be undefined, null or empty"); if (this.checkName(e), void 0 !== t && null !== t || (t = ""), 3 === e.length && "xml" === e && "Initial" !== this.currentState) throw new Error("InvalidArgumentException: Cannot write XML declaration.WriteStartDocument method has already written it"); if ("Initial" !== this.currentState || void 0 === this.bufferBlob) throw new Error("InvalidOperationException: Wrong Token"); this.writeStartDocument(), this.writeProcessingInstructionInternal(e, t) }, e.prototype.writeStartDocument = function (e) { if ("Initial" !== this.currentState || void 0 === this.bufferBlob) throw new Error("InvalidOperationException: Wrong Token"); this.currentState = "StartDocument", this.rawText('<?xml version="1.0" encoding="utf-8'), null !== e && void 0 !== e && (this.rawText('" standalone="'), this.rawText(e ? "yes" : "no")), this.rawText('"?>') }, e.prototype.writeEndDocument = function () { for (; this.elementStack.length - 1 > 0;)this.writeEndElement(); this.currentState = "EndDocument", this.flush() }, e.prototype.writeStartElement = function (e, t, i) { if (void 0 === this.bufferBlob) throw new Error("InvalidOperationException: Wrong Token"); if (void 0 === t || null === t || 0 === t.length) throw new Error("ArgumentException: localName cannot be undefined, null or empty"); if (this.checkName(t), "Initial" === this.currentState && this.writeStartDocument(), "StartElement" === this.currentState && this.startElementContent(), this.currentState = "StartElement", void 0 === e || null === e) void 0 !== i && null !== i && (e = this.lookupPrefix(i)), void 0 !== e && null !== e || (e = ""); else if (e.length > 0 && (void 0 !== i && null !== i || (i = this.lookupNamespace(e)), void 0 === i || null === i || void 0 !== i && 0 === i.length)) throw new Error("ArgumentException: Cannot use a prefix with an empty namespace"); void 0 !== i && null !== i || (i = this.lookupNamespace(e)), this.writeStartElementInternal(e, t, i) }, e.prototype.writeEndElement = function () { "StartElement" === this.currentState ? (this.startElementContent(), this.currentState = "ElementContent") : "ElementContent" === this.currentState && (this.currentState = "ElementContent"), this.currentState = "EndElement"; var e = this.elementStack.length - 1; this.writeEndElementInternal(this.elementStack[e].prefix, this.elementStack[e].localName), this.namespaceStack.splice(this.elementStack[e].previousTop + 1), this.elementStack.splice(e), this.bufferText.length > 10240 && this.flush() }, e.prototype.writeElementString = function (e, t, i, n) { this.writeStartElement(e, t, i), void 0 !== n && null !== n && 0 !== n.length && this.writeString(n), this.writeEndElement() }, e.prototype.writeAttributeString = function (e, t, i, n) { this.writeStartAttribute(e, t, i, n), this.writeStringInternal(n, !0), this.writeEndAttribute() }, e.prototype.writeString = function (e) { this.writeInternal(e, !1) }, e.prototype.writeRaw = function (e) { this.writeInternal(e, !0) }, e.prototype.writeInternal = function (e, t) { if (void 0 !== e && null !== e) { if ("StartElement" !== this.currentState && "ElementContent" !== this.currentState) throw new Error("InvalidOperationException: Wrong Token"); "StartElement" === this.currentState && this.startElementContent(), this.currentState = "ElementContent", t ? this.rawText(e) : this.writeStringInternal(e, !1) } }, e.prototype.save = function (e) { for (; this.elementStack.length - 1 > 0;)this.writeEndElement(); "" !== this.bufferText && this.flush(), ik.save(e, this.buffer) }, e.prototype.destroy = function () { this.bufferBlob = void 0; for (var e = 0; e < this.namespaceStack.length; e++)this.namespaceStack[e].destroy(); this.namespaceStack = []; for (e = 0; e < this.elementStack.length; e++)this.elementStack[e].destroy(); this.elementStack = [], this.bufferText = "", this.contentPos = 0 }, e.prototype.flush = function () { void 0 !== this.bufferBlob && (this.bufferBlob = new Blob([this.bufferBlob, this.bufferText], { type: "text/plain" }), this.bufferText = "") }, e.prototype.writeProcessingInstructionInternal = function (e, t) { this.bufferText += "<?", this.rawText(e), t.length > 0 && (this.bufferText += " ", t = t.replace(/\?\>/g, "? >"), this.bufferText += t), this.bufferText += "?", this.bufferText += ">" }, e.prototype.writeStartAttribute = function (e, t, i, n) { if (void 0 === t || null === t || 0 === t.length) { if ("xmlns" !== e) throw new Error("ArgumentException: localName cannot be undefined, null or empty"); t = "xmlns", e = "" } if ("StartElement" !== this.currentState) throw new Error("InvalidOperationException: Wrong Token"); this.checkName(t), this.writeStartAttributePrefixAndNameSpace(e, t, i, n) }, e.prototype.writeStartAttributePrefixAndNameSpace = function (e, t, i, n) { void 0 !== e && null !== e || (void 0 !== i && null !== i && ("xmlns" === t && "http://www.w3.org/2000/xmlns/" === i || (e = this.lookupPrefix(i))), void 0 !== e && null !== e || (e = "")), void 0 !== i && null !== i || (void 0 !== e && null !== e && e.length > 0 && (i = this.lookupNamespace(e)), void 0 !== i && null !== i || (i = "")), this.writeStartAttributeSpecialAttribute(e, t, i, n) }, e.prototype.writeStartAttributeSpecialAttribute = function (e, t, i, n) { if (0 === e.length) { if ("x" === t[0] && "xmlns" === t) return this.skipPushAndWrite(e, t, i), void this.pushNamespaceExplicit("", n); i.length > 0 && (e = this.lookupPrefix(i)) } else { if ("x" === e[0]) { if ("xmlns" === e) return this.skipPushAndWrite(e, t, i), void this.pushNamespaceExplicit(t, n); if ("xml" === e && ("space" === t || "lang" === t)) return void this.skipPushAndWrite(e, t, i) } 0 === i.length && (e = "") } void 0 !== e && null !== e && 0 !== e.length && this.pushNamespaceImplicit(e, i), this.skipPushAndWrite(e, t, i) }, e.prototype.writeEndAttribute = function () { this.currentState = "StartElement", this.bufferText += '"' }, e.prototype.writeStartElementInternal = function (e, t, i) { this.bufferText += "<", e.length > 0 && (this.rawText(e), this.bufferText += ":"), this.rawText(t); var n = this.elementStack.length; this.elementStack.push(new ok), this.elementStack[n].set(e, t, i, this.namespaceStack.length - 1), this.pushNamespaceImplicit(e, i); for (var r = 0; r < this.attributeStack.length; r++)this.attributeStack[r].destroy(); this.attributeStack = [] }, e.prototype.writeEndElementInternal = function (e, t) { this.contentPos !== this.bufferText.length + 1 ? (this.bufferText += "</", void 0 !== e && null !== e && 0 !== e.length && (this.rawText(e), this.bufferText += ":"), this.rawText(t), this.bufferText += ">") : (this.bufferText = this.bufferText.substring(0, this.bufferText.length - 1), this.bufferText += " />") }, e.prototype.writeStartAttributeInternal = function (e, t, i) { this.bufferText += " ", void 0 !== e && null !== e && e.length > 0 && (this.rawText(e), this.bufferText += ":"), this.rawText(t), this.bufferText += "=", this.bufferText += '"' }, e.prototype.writeNamespaceDeclaration = function (e, t) { this.writeStartNamespaceDeclaration(e), this.writeStringInternal(t, !0), this.bufferText += '"' }, e.prototype.writeStartNamespaceDeclaration = function (e) { void 0 === e || null === e || 0 === e.length ? this.rawText(' xmlns="') : (this.rawText(" xmlns:"), this.rawText(e), this.bufferText += "=", this.bufferText += '"') }, e.prototype.writeStringInternal = function (e, t) { null !== e && void 0 !== e || (e = ""), e = (e = (e = e.replace(/\&/g, "&amp;")).replace(/\</g, "&lt;")).replace(/\>/g, "&gt;"), t && (e = e.replace(/\"/g, "&quot;")), this.bufferText += e, t || (this.contentPos = 0) }, e.prototype.startElementContent = function () { for (var e = this.elementStack[this.elementStack.length - 1].previousTop, t = this.namespaceStack.length - 1; t > e; t--)"NeedToWrite" === this.namespaceStack[t].kind && this.writeNamespaceDeclaration(this.namespaceStack[t].prefix, this.namespaceStack[t].namespaceUri); this.bufferText += ">", this.contentPos = this.bufferText.length + 1 }, e.prototype.rawText = function (e) { this.bufferText += e }, e.prototype.addNamespace = function (e, t, i) { var n = this.namespaceStack.length; this.namespaceStack.push(new rk), this.namespaceStack[n].set(e, t, i) }, e.prototype.lookupPrefix = function (e) { for (var t = this.namespaceStack.length - 1; t >= 0; t--)if (this.namespaceStack[t].namespaceUri === e) return this.namespaceStack[t].prefix }, e.prototype.lookupNamespace = function (e) { for (var t = this.namespaceStack.length - 1; t >= 0; t--)if (this.namespaceStack[t].prefix === e) return this.namespaceStack[t].namespaceUri }, e.prototype.lookupNamespaceIndex = function (e) { for (var t = this.namespaceStack.length - 1; t >= 0; t--)if (this.namespaceStack[t].prefix === e) return t; return -1 }, e.prototype.pushNamespaceImplicit = function (e, t) { var i, n = this.lookupNamespaceIndex(e); if (-1 !== n) { if (n > this.elementStack[this.elementStack.length - 1].previousTop) { if (this.namespaceStack[n].namespaceUri !== t) throw new Error("XmlException namespace Uri needs to be the same as the one that is already declared"); return } if ("Special" === this.namespaceStack[n].kind) { if ("xml" !== e) throw new Error('InvalidArgumentException: Prefix "xmlns" is reserved for use by XML.'); if (t !== this.namespaceStack[n].namespaceUri) throw new Error("InvalidArgumentException: Xml String"); i = "Implied" } else i = this.namespaceStack[n].namespaceUri === t ? "Implied" : "NeedToWrite" } else { if ("http://www.w3.org/XML/1998/namespace" === t && "xml" !== e || "http://www.w3.org/2000/xmlns/" === t && "xmlns" !== e) throw new Error("InvalidArgumentException"); i = "NeedToWrite" } this.addNamespace(e, t, i) }, e.prototype.pushNamespaceExplicit = function (e, t) { var i = this.lookupNamespaceIndex(e); -1 !== i && i > this.elementStack[this.elementStack.length - 1].previousTop ? this.namespaceStack[i].kind = "Written" : this.addNamespace(e, t, "Written") }, e.prototype.addAttribute = function (e, t, i) { var n = this.attributeStack.length; this.attributeStack.push(new sk), this.attributeStack[n].set(e, t, i); for (var r = 0; r < n; r++)if (this.attributeStack[r].isDuplicate(e, t, i)) throw new Error("XmlException: duplicate attribute name") }, e.prototype.skipPushAndWrite = function (e, t, i) { this.addAttribute(e, t, i), this.writeStartAttributeInternal(e, t, i) }, e.prototype.checkName = function (e) { if (/[ !@#$%^&*()+\=\[\]{};':"\\|,<>\/?]/.test(e)) throw new Error("InvalidArgumentException: invalid name character") }, e }(), rk = function () { function e() { } return e.prototype.set = function (e, t, i) { this.prefix = e, this.namespaceUri = t, this.kind = i }, e.prototype.destroy = function () { this.prefix = void 0, this.namespaceUri = void 0, this.kind = void 0 }, e }(), ok = function () { function e() { } return e.prototype.set = function (e, t, i, n) { this.previousTop = n, this.prefix = e, this.namespaceUri = i, this.localName = t }, e.prototype.destroy = function () { this.previousTop = void 0, this.prefix = void 0, this.localName = void 0, this.namespaceUri = void 0 }, e }(), sk = function () { function e() { } return e.prototype.set = function (e, t, i) { this.prefix = e, this.namespaceUri = i, this.localName = t }, e.prototype.isDuplicate = function (e, t, i) { return this.localName === t && (this.prefix === e || this.namespaceUri === i) }, e.prototype.destroy = function () { this.prefix = void 0, this.namespaceUri = void 0, this.localName = void 0 }, e }(), ak = function () { function e(e) { this.emitBOM = !0, this.encodingType = "Ansi", this.initBOM(e) } return Object.defineProperty(e.prototype, "includeBom", { get: function () { return this.emitBOM }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "type", { get: function () { return this.encodingType }, set: function (e) { this.encodingType = e }, enumerable: !0, configurable: !0 }), e.prototype.initBOM = function (e) { this.emitBOM = void 0 === e || null === e || e }, e.prototype.getByteCount = function (e) { if (ar(e, "string"), "" === e) { return this.utf8Len(e.charCodeAt(0)) } return null !== this.type && void 0 !== this.type || (this.type = "Ansi"), this.getByteCountInternal(e, 0, e.length) }, e.prototype.utf8Len = function (e) { return e <= 127 ? 1 : e <= 2047 ? 2 : e <= 65535 ? 3 : e <= 2097151 ? 4 : 0 }, e.prototype.isHighSurrogate = function (e) { return e >= 55296 && e <= 56319 }, e.prototype.toCodepoint = function (e, t) { return ((e = (1023 & e) << 10) | 1023 & t) + 65536 }, e.prototype.getByteCountInternal = function (e, t, i) { var n = 0; if ("Utf8" === this.encodingType || "Unicode" === this.encodingType) { for (var r = "Utf8" === this.encodingType, o = 0; o < i; o++) { var s = e.charCodeAt(r ? t : t++); if (this.isHighSurrogate(s)) if (r) { var a = s, l = e.charCodeAt(++t); n += this.utf8Len(this.toCodepoint(a, l)) } else n += 4, ++o; else n += r ? this.utf8Len(s) : 2; r && t++ } return n } return n = i }, e.prototype.getBytes = function (e, t, i) { if (ar(e, "string"), ar(t, "charIndex"), ar(i, "charCount"), t < 0 || i < 0) throw new RangeError("Argument Out Of Range Exception: charIndex or charCount is less than zero"); if (e.length - t < i) throw new RangeError("Argument Out Of Range Exception: charIndex and charCount do not denote a valid range in string"); if ("" === e) return new ArrayBuffer(0); null !== this.type && void 0 !== this.type || (this.type = "Ansi"); var n = this.getByteCountInternal(e, t, i); switch (this.type) { case "Utf8": return this.getBytesOfUtf8Encoding(n, e, t, i); case "Unicode": return this.getBytesOfUnicodeEncoding(n, e, t, i); default: return this.getBytesOfAnsiEncoding(n, e, t, i) } }, e.prototype.getString = function (e, t, i) { if (ar(e, "bytes"), ar(t, "index"), ar(i, "count"), t < 0 || i < 0) throw new RangeError("Argument Out Of Range Exception: index or count is less than zero"); if (e.byteLength - t < i) throw new RangeError("Argument Out Of Range Exception: index and count do not denote a valid range in bytes"); if (0 === e.byteLength || 0 === i) return ""; null !== this.type && void 0 !== this.type || (this.type = "Ansi"); var n = "", r = new Uint8Array(e); switch (this.type) { case "Utf8": return this.getStringOfUtf8Encoding(r, t, i); case "Unicode": var o = new Uint16Array(e); return n = this.getStringofUnicodeEncoding(o, t, i); default: for (var s = t, a = 0; a < i; a++) { var l = r[s]; n += String.fromCharCode(l), s++ } return n } }, e.prototype.getBytesOfAnsiEncoding = function (e, t, i, n) { for (var r = new ArrayBuffer(e), o = new Uint8Array(r), s = 0, a = 0; a < n; a++) { var l = t.charCodeAt(i++); o[s] = l < 2048 ? l : 63, s++ } return r }, e.prototype.getBytesOfUtf8Encoding = function (e, t, i, n) { for (var r = new ArrayBuffer(e), o = new Uint8Array(r), s = i, a = 0, l = 0; l < n; l++) { var h = t.charCodeAt(s); h <= 127 ? o[a] = h : h < 2048 ? (o[a] = 192 | h >> 6, o[++a] = 128 | 63 & h) : h < 55296 || h >= 57344 ? (o[a] = 224 | h >> 12, o[++a] = 128 | h >> 6 & 63, o[++a] = 128 | 63 & h) : (o[a] = 239, o[++a] = 191, o[++a] = 189), ++a, ++s } return r }, e.prototype.getBytesOfUnicodeEncoding = function (e, t, i, n) { for (var r = new ArrayBuffer(e), o = new Uint16Array(r), s = 0; s < n; s++) { var a = t.charCodeAt(s); o[s] = a } return r }, e.prototype.getStringOfUtf8Encoding = function (e, t, i) { for (var n = 0, r = t, o = ""; n < i; n++) { for (var s = e[r++]; r > e.length;)return o; s > 127 && (s > 191 && s < 224 && r < i ? s = (31 & s) << 6 | 63 & e[r] : s > 223 && s < 240 && r < e.byteLength ? s = (15 & s) << 12 | (63 & e[r]) << 6 | 63 & e[++r] : s > 239 && s < 248 && r < e.byteLength && (s = (7 & s) << 18 | (63 & e[r]) << 12 | (63 & e[++r]) << 6 | 63 & e[++r]), ++r), o += String.fromCharCode(s) } return o }, e.prototype.getStringofUnicodeEncoding = function (e, t, i) { if (i > e.length) throw new RangeError("ArgumentOutOfRange_Count"); for (var n = new Uint16Array(i), r = 0; r < i && r < e.length; r++)n[r] = e[t++]; return String.fromCharCode.apply(null, n) }, e.prototype.destroy = function () { this.emitBOM = void 0, this.encodingType = void 0 }, e }(), lk = function () { function e(e) { this.bufferBlob = new Blob([""]), this.bufferText = "", this.init(e), ik.isMicrosoftBrowser = !!navigator.msSaveBlob } return Object.defineProperty(e.prototype, "buffer", { get: function () { return this.flush(), this.bufferBlob }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "encoding", { get: function () { return this.enc }, enumerable: !0, configurable: !0 }), e.prototype.init = function (e) { null === e || void 0 === e ? (this.enc = new ak(!1), this.enc.type = "Utf8") : (this.enc = e, this.setBomByte()) }, e.prototype.setBomByte = function () { if (this.encoding.includeBom) switch (this.encoding.type) { case "Unicode": var e = new ArrayBuffer(2), t = new Uint8Array(e); t[0] = 255, t[1] = 254, this.bufferBlob = new Blob([e]); break; case "Utf8": var i = new ArrayBuffer(3), n = new Uint8Array(i); n[0] = 239, n[1] = 187, n[2] = 191, this.bufferBlob = new Blob([i]); break; default: this.bufferBlob = new Blob([""]) } }, e.prototype.save = function (e) { "" !== this.bufferText && this.flush(), ik.save(e, this.buffer) }, e.prototype.write = function (e) { if (void 0 === this.encoding) throw new Error("Object Disposed Exception: current writer is disposed"); ar(e, "string"), this.bufferText += e, this.bufferText.length >= 10240 && this.flush() }, e.prototype.flush = function () { if (void 0 !== this.bufferText && null !== this.bufferText && 0 !== this.bufferText.length) { var e = this.encoding.getBytes(this.bufferText, 0, this.bufferText.length); this.bufferText = "", this.bufferBlob = new Blob([this.bufferBlob, e]) } }, e.prototype.writeLine = function (e) { if (void 0 === this.encoding) throw new Error("Object Disposed Exception: current writer is disposed"); ar(e, "string"), this.bufferText = this.bufferText + e + "\r\n", this.bufferText.length >= 10240 && this.flush() }, e.prototype.destroy = function () { this.bufferBlob = void 0, this.bufferText = void 0, this.enc instanceof ak && this.enc.destroy(), this.enc = void 0 }, e }(), hk = new Int16Array(286), dk = new Uint8Array(286), ck = new Int16Array(30), pk = new Uint8Array(30), uk = function () { function e(t) { this.pendingBuffer = new Uint8Array(65536), this.pendingBufLength = 0, this.pendingBufCache = 0, this.pendingBufBitsInCache = 0, this.bufferPosition = 0, this.extraBits = 0, this.currentHash = 0, this.matchStart = 0, this.matchLength = 0, this.matchPrevAvail = !1, this.blockStart = 0, this.stringStart = 0, this.lookAhead = 0, this.totalBytesIn = 0, this.inputOffset = 0, this.inputEnd = 0, this.windowSize = 32768, this.windowMask = this.windowSize - 1, this.hashSize = 32768, this.hashMask = this.hashSize - 1, this.hashShift = Math.floor(17 / 3), this.maxDist = this.windowSize - 262, this.checkSum = 1, this.noWrap = !1, e.isHuffmanTreeInitiated || (e.initHuffmanTree(), e.isHuffmanTreeInitiated = !0), this.treeLiteral = new gk(this, 286, 257, 15), this.treeDistances = new gk(this, 30, 1, 15), this.treeCodeLengths = new gk(this, 19, 4, 7), this.arrDistances = new Uint16Array(16384), this.arrLiterals = new Uint8Array(16384), this.stream = [], this.dataWindow = new Uint8Array(2 * this.windowSize), this.hashHead = new Int16Array(this.hashSize), this.hashPrevious = new Int16Array(this.windowSize), this.blockStart = this.stringStart = 1, this.noWrap = t, t || this.writeZLibHeader() } return Object.defineProperty(e.prototype, "compressedData", { get: function () { return this.stream }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "getCompressedString", { get: function () { var e = ""; if (void 0 !== this.stream) for (var t = 0; t < this.stream.length; t++)e += String.fromCharCode.apply(null, this.stream[t]); return e }, enumerable: !0, configurable: !0 }), e.prototype.write = function (e, t, i) { if (void 0 === e || null === e) throw new Error("ArgumentException: data cannot null or undefined"); var n = t + i; if (0 > t || t > n || n > e.length) throw new Error("ArgumentOutOfRangeException: Offset or length is incorrect"); if ("string" == typeof e) { var r = new ak(!1); r.type = "Utf8", n = t + (e = new Uint8Array(r.getBytes(e, 0, e.length))).length } for (this.inputBuffer = e, this.inputOffset = t, this.inputEnd = n, this.noWrap || (this.checkSum = mk.checksumUpdate(this.checkSum, this.inputBuffer, this.inputOffset, n)); this.inputEnd !== this.inputOffset || 0 !== this.pendingBufLength;)this.pendingBufferFlush(), this.compressData(!1) }, e.prototype.writeZLibHeader = function () { var e = 30720; e |= 64, e += 31 - e % 31, this.pendingBufferWriteShortBytes(e) }, e.prototype.pendingBufferWriteShortBytes = function (e) { this.pendingBuffer[this.pendingBufLength++] = e >> 8, this.pendingBuffer[this.pendingBufLength++] = e }, e.prototype.compressData = function (e) { var t; do { this.fillWindow(); var i = e && this.inputEnd === this.inputOffset; t = this.compressSlow(i, e) } while (0 === this.pendingBufLength && t); return t }, e.prototype.compressSlow = function (e, t) { if (this.lookAhead < 262 && !e) return !1; for (; this.lookAhead >= 262 || e;) { if (0 === this.lookAhead) return this.lookAheadCompleted(t); this.stringStart >= 2 * this.windowSize - 262 && this.slideWindow(); var i = this.matchStart, n = this.matchLength; if (this.lookAhead >= 3 && this.discardMatch(), n >= 3 && this.matchLength <= n ? n = this.matchPreviousBest(i, n) : this.matchPreviousAvailable(), this.bufferPosition >= 16384) return this.huffmanIsFull(t) } return !0 }, e.prototype.discardMatch = function () { var e = this.insertString(); 0 !== e && this.stringStart - e <= this.maxDist && this.findLongestMatch(e) && this.matchLength <= 5 && 3 === this.matchLength && this.stringStart - this.matchStart > 4096 && (this.matchLength = 2) }, e.prototype.matchPreviousAvailable = function () { this.matchPrevAvail && this.huffmanTallyLit(255 & this.dataWindow[this.stringStart - 1]), this.matchPrevAvail = !0, this.stringStart++ , this.lookAhead-- }, e.prototype.matchPreviousBest = function (e, t) { this.huffmanTallyDist(this.stringStart - 1 - e, t), t -= 2; do { this.stringStart++ , this.lookAhead-- , this.lookAhead >= 3 && this.insertString() } while (--t > 0); return this.stringStart++ , this.lookAhead-- , this.matchPrevAvail = !1, this.matchLength = 2, t }, e.prototype.lookAheadCompleted = function (e) { return this.matchPrevAvail && this.huffmanTallyLit(255 & this.dataWindow[this.stringStart - 1]), this.matchPrevAvail = !1, this.huffmanFlushBlock(this.dataWindow, this.blockStart, this.stringStart - this.blockStart, e), this.blockStart = this.stringStart, !1 }, e.prototype.huffmanIsFull = function (e) { var t = this.stringStart - this.blockStart; this.matchPrevAvail && t--; var i = e && 0 === this.lookAhead && !this.matchPrevAvail; return this.huffmanFlushBlock(this.dataWindow, this.blockStart, t, i), this.blockStart += t, !i }, e.prototype.fillWindow = function () { for (this.stringStart >= this.windowSize + this.maxDist && this.slideWindow(); this.lookAhead < 262 && this.inputOffset < this.inputEnd;) { var e = 2 * this.windowSize - this.lookAhead - this.stringStart; e > this.inputEnd - this.inputOffset && (e = this.inputEnd - this.inputOffset), this.dataWindow.set(this.inputBuffer.subarray(this.inputOffset, this.inputOffset + e), this.stringStart + this.lookAhead), this.inputOffset += e, this.totalBytesIn += e, this.lookAhead += e } this.lookAhead >= 3 && this.updateHash() }, e.prototype.slideWindow = function () { this.dataWindow.set(this.dataWindow.subarray(this.windowSize, this.windowSize + this.windowSize), 0), this.matchStart -= this.windowSize, this.stringStart -= this.windowSize, this.blockStart -= this.windowSize; for (var e = 0; e < this.hashSize; ++e) { var t = 65535 & this.hashHead[e]; this.hashHead[e] = t >= this.windowSize ? t - this.windowSize : 0 } for (e = 0; e < this.windowSize; e++) { t = 65535 & this.hashPrevious[e]; this.hashPrevious[e] = t >= this.windowSize ? t - this.windowSize : 0 } }, e.prototype.insertString = function () { var e, t = (this.currentHash << this.hashShift ^ this.dataWindow[this.stringStart + 2]) & this.hashMask; return this.hashPrevious[this.stringStart & this.windowMask] = e = this.hashHead[t], this.hashHead[t] = this.stringStart, this.currentHash = t, 65535 & e }, e.prototype.findLongestMatch = function (e) { var t, i = 4096, n = 258, r = this.stringStart, o = this.stringStart + this.matchLength, s = Math.max(this.matchLength, 2), a = Math.max(this.stringStart - this.maxDist, 0), l = this.stringStart + 258 - 1, h = this.dataWindow[o - 1], d = this.dataWindow[o], c = this.dataWindow; s >= 32 && (i >>= 2), n > this.lookAhead && (n = this.lookAhead); do { if (c[e + s] === d && c[e + s - 1] === h && c[e] === c[r] && c[e + 1] === c[r + 1]) { for (t = e + 2, r += 2; c[++r] === c[++t] && c[++r] === c[++t] && c[++r] === c[++t] && c[++r] === c[++t] && c[++r] === c[++t] && c[++r] === c[++t] && c[++r] === c[++t] && c[++r] === c[++t] && r < l;); if (r > o) { if (this.matchStart = e, o = r, (s = r - this.stringStart) >= n) break; h = c[o - 1], d = c[o] } r = this.stringStart } } while ((e = 65535 & this.hashPrevious[e & this.windowMask]) > a && 0 != --i); return this.matchLength = Math.min(s, this.lookAhead), this.matchLength >= 3 }, e.prototype.updateHash = function () { this.currentHash = this.dataWindow[this.stringStart] << this.hashShift ^ this.dataWindow[this.stringStart + 1] }, e.prototype.huffmanTallyLit = function (e) { return this.arrDistances[this.bufferPosition] = 0, this.arrLiterals[this.bufferPosition++] = e, this.treeLiteral.codeFrequencies[e]++ , this.bufferPosition >= 16384 }, e.prototype.huffmanTallyDist = function (e, t) { this.arrDistances[this.bufferPosition] = e, this.arrLiterals[this.bufferPosition++] = t - 3; var i = this.huffmanLengthCode(t - 3); this.treeLiteral.codeFrequencies[i]++ , i >= 265 && i < 285 && (this.extraBits += Math.floor((i - 261) / 4)); var n = this.huffmanDistanceCode(e - 1); return this.treeDistances.codeFrequencies[n]++ , n >= 4 && (this.extraBits += Math.floor(n / 2 - 1)), this.bufferPosition >= 16384 }, e.prototype.huffmanFlushBlock = function (e, t, i, n) { this.treeLiteral.codeFrequencies[256]++ , this.treeLiteral.buildTree(), this.treeDistances.buildTree(), this.treeLiteral.calculateBLFreq(this.treeCodeLengths), this.treeDistances.calculateBLFreq(this.treeCodeLengths), this.treeCodeLengths.buildTree(); for (var r = 4, o = 18; o > r; o--)this.treeCodeLengths.codeLengths[gk.huffCodeLengthOrders[o]] > 0 && (r = o + 1); var s = 14 + 3 * r + this.treeCodeLengths.getEncodedLength() + this.treeLiteral.getEncodedLength() + this.treeDistances.getEncodedLength() + this.extraBits, a = this.extraBits; for (o = 0; o < 286; o++)a += this.treeLiteral.codeFrequencies[o] * dk[o]; for (o = 0; o < 30; o++)a += this.treeDistances.codeFrequencies[o] * pk[o]; s >= a && (s = a), t >= 0 && i + 4 < s >> 3 ? this.huffmanFlushStoredBlock(e, t, i, n) : s == a ? (this.pendingBufferWriteBits(2 + (n ? 1 : 0), 3), this.treeLiteral.setStaticCodes(hk, dk), this.treeDistances.setStaticCodes(ck, pk), this.huffmanCompressBlock(), this.huffmanReset()) : (this.pendingBufferWriteBits(4 + (n ? 1 : 0), 3), this.huffmanSendAllTrees(r), this.huffmanCompressBlock(), this.huffmanReset()) }, e.prototype.huffmanFlushStoredBlock = function (e, t, i, n) { this.pendingBufferWriteBits(0 + (n ? 1 : 0), 3), this.pendingBufferAlignToByte(), this.pendingBufferWriteShort(i), this.pendingBufferWriteShort(~i), this.pendingBufferWriteByteBlock(e, t, i), this.huffmanReset() }, e.prototype.huffmanLengthCode = function (e) { if (255 === e) return 285; for (var t = 257; e >= 8;)t += 4, e >>= 1; return t + e }, e.prototype.huffmanDistanceCode = function (e) { for (var t = 0; e >= 4;)t += 2, e >>= 1; return t + e }, e.prototype.huffmanSendAllTrees = function (e) { this.treeCodeLengths.buildCodes(), this.treeLiteral.buildCodes(), this.treeDistances.buildCodes(), this.pendingBufferWriteBits(this.treeLiteral.treeLength - 257, 5), this.pendingBufferWriteBits(this.treeDistances.treeLength - 1, 5), this.pendingBufferWriteBits(e - 4, 4); for (var t = 0; t < e; t++)this.pendingBufferWriteBits(this.treeCodeLengths.codeLengths[gk.huffCodeLengthOrders[t]], 3); this.treeLiteral.writeTree(this.treeCodeLengths), this.treeDistances.writeTree(this.treeCodeLengths) }, e.prototype.huffmanReset = function () { this.bufferPosition = 0, this.extraBits = 0, this.treeLiteral.reset(), this.treeDistances.reset(), this.treeCodeLengths.reset() }, e.prototype.huffmanCompressBlock = function () { for (var e = 0; e < this.bufferPosition; e++) { var t = 255 & this.arrLiterals[e], i = this.arrDistances[e]; if (0 != i--) { var n = this.huffmanLengthCode(t); this.treeLiteral.writeCodeToStream(n); var r = Math.floor((n - 261) / 4); r > 0 && r <= 5 && this.pendingBufferWriteBits(t & (1 << r) - 1, r); var o = this.huffmanDistanceCode(i); this.treeDistances.writeCodeToStream(o), (r = Math.floor(o / 2 - 1)) > 0 && this.pendingBufferWriteBits(i & (1 << r) - 1, r) } else this.treeLiteral.writeCodeToStream(t) } this.treeLiteral.writeCodeToStream(256) }, e.prototype.pendingBufferWriteBits = function (e, t) { var i = new Uint32Array(1); i[0] = this.pendingBufCache | e << this.pendingBufBitsInCache, this.pendingBufCache = i[0], this.pendingBufBitsInCache += t, this.pendingBufferFlushBits() }, e.prototype.pendingBufferFlush = function (e) { if (this.pendingBufferFlushBits(), this.pendingBufLength > 0) { var t = new Uint8Array(this.pendingBufLength); t.set(this.pendingBuffer.subarray(0, this.pendingBufLength), 0), this.stream.push(t) } this.pendingBufLength = 0 }, e.prototype.pendingBufferFlushBits = function () { for (var e = 0; this.pendingBufBitsInCache >= 8 && this.pendingBufLength < 65536;)this.pendingBuffer[this.pendingBufLength++] = this.pendingBufCache, this.pendingBufCache >>= 8, this.pendingBufBitsInCache -= 8, e++; return e }, e.prototype.pendingBufferWriteByteBlock = function (e, t, i) { var n = e.subarray(t, t + i); this.pendingBuffer.set(n, this.pendingBufLength), this.pendingBufLength += i }, e.prototype.pendingBufferWriteShort = function (e) { this.pendingBuffer[this.pendingBufLength++] = e, this.pendingBuffer[this.pendingBufLength++] = e >> 8 }, e.prototype.pendingBufferAlignToByte = function () { this.pendingBufBitsInCache > 0 && (this.pendingBuffer[this.pendingBufLength++] = this.pendingBufCache), this.pendingBufCache = 0, this.pendingBufBitsInCache = 0 }, e.initHuffmanTree = function () { for (var e = 0; e < 144;)hk[e] = gk.bitReverse(48 + e << 8), dk[e++] = 8; for (; e < 256;)hk[e] = gk.bitReverse(256 + e << 7), dk[e++] = 9; for (; e < 280;)hk[e] = gk.bitReverse(-256 + e << 9), dk[e++] = 7; for (; e < 286;)hk[e] = gk.bitReverse(-88 + e << 8), dk[e++] = 8; for (e = 0; e < 30; e++)ck[e] = gk.bitReverse(e << 11), pk[e] = 5 }, e.prototype.close = function () { do { this.pendingBufferFlush(!0), this.compressData(!0) || (this.pendingBufferFlush(!0), this.pendingBufferAlignToByte(), this.noWrap || (this.pendingBufferWriteShortBytes(this.checkSum >> 16), this.pendingBufferWriteShortBytes(65535 & this.checkSum)), this.pendingBufferFlush(!0)) } while (this.inputEnd !== this.inputOffset || 0 !== this.pendingBufLength) }, e.prototype.destroy = function () { this.stream = [], this.stream = void 0, this.pendingBuffer = void 0, this.treeLiteral = void 0, this.treeDistances = void 0, this.treeCodeLengths = void 0, this.arrLiterals = void 0, this.arrDistances = void 0, this.hashHead = void 0, this.hashPrevious = void 0, this.dataWindow = void 0, this.inputBuffer = void 0, this.pendingBufLength = void 0, this.pendingBufCache = void 0, this.pendingBufBitsInCache = void 0, this.bufferPosition = void 0, this.extraBits = void 0, this.currentHash = void 0, this.matchStart = void 0, this.matchLength = void 0, this.matchPrevAvail = void 0, this.blockStart = void 0, this.stringStart = void 0, this.lookAhead = void 0, this.totalBytesIn = void 0, this.inputOffset = void 0, this.inputEnd = void 0, this.windowSize = void 0, this.windowMask = void 0, this.hashSize = void 0, this.hashMask = void 0, this.hashShift = void 0, this.maxDist = void 0, this.checkSum = void 0, this.noWrap = void 0 }, e.isHuffmanTreeInitiated = !1, e }(), gk = function () { function e(e, t, i, n) { this.writer = e, this.codeMinCount = i, this.maxLength = n, this.codeFrequency = new Uint16Array(t), this.lengthCount = new Int32Array(n) } return Object.defineProperty(e.prototype, "treeLength", { get: function () { return this.codeCount }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "codeLengths", { get: function () { return this.codeLength }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "codeFrequencies", { get: function () { return this.codeFrequency }, enumerable: !0, configurable: !0 }), e.prototype.setStaticCodes = function (e, t) { var i = new Int16Array(e.length); i.set(e, 0), this.codes = i; var n = new Uint8Array(t.length); n.set(t, 0), this.codeLength = n }, e.prototype.reset = function () { for (var e = 0; e < this.codeFrequency.length; e++)this.codeFrequency[e] = 0; this.codes = void 0, this.codeLength = void 0 }, e.prototype.writeCodeToStream = function (e) { this.writer.pendingBufferWriteBits(65535 & this.codes[e], this.codeLength[e]) }, e.prototype.buildCodes = function () { var t = new Int32Array(this.maxLength); this.codes = new Int16Array(this.codeCount); for (var i = 0, n = 0; n < this.maxLength; n++)t[n] = i, i += this.lengthCount[n] << 15 - n; for (var r = 0; r < this.codeCount; r++) { var o = this.codeLength[r]; o > 0 && (this.codes[r] = e.bitReverse(t[o - 1]), t[o - 1] += 1 << 16 - o) } }, e.bitReverse = function (t) { return e.reverseBits[15 & t] << 12 | e.reverseBits[t >> 4 & 15] << 8 | e.reverseBits[t >> 8 & 15] << 4 | e.reverseBits[t >> 12] }, e.prototype.getEncodedLength = function () { for (var e = 0, t = 0; t < this.codeFrequency.length; t++)e += this.codeFrequency[t] * this.codeLength[t]; return e }, e.prototype.calculateBLFreq = function (e) { for (var t, i, n, r = -1, o = 0; o < this.codeCount;) { n = 1; var s = this.codeLength[o]; for (0 === s ? (t = 138, i = 3) : (t = 6, i = 3, r !== s && (e.codeFrequency[s]++ , n = 0)), r = s, o++; o < this.codeCount && r === this.codeLength[o] && (o++ , !(++n >= t));); n < i ? e.codeFrequency[r] += n : 0 !== r ? e.codeFrequency[16]++ : n <= 10 ? e.codeFrequency[17]++ : e.codeFrequency[18]++ } }, e.prototype.writeTree = function (e) { for (var t, i, n, r = -1, o = 0; o < this.codeCount;) { n = 1; var s = this.codeLength[o]; for (0 === s ? (t = 138, i = 3) : (t = 6, i = 3, r !== s && (e.writeCodeToStream(s), n = 0)), r = s, o++; o < this.codeCount && r === this.codeLength[o] && (o++ , !(++n >= t));); if (n < i) for (; n-- > 0;)e.writeCodeToStream(r); else 0 !== r ? (e.writeCodeToStream(16), this.writer.pendingBufferWriteBits(n - 3, 2)) : n <= 10 ? (e.writeCodeToStream(17), this.writer.pendingBufferWriteBits(n - 3, 3)) : (e.writeCodeToStream(18), this.writer.pendingBufferWriteBits(n - 11, 7)) } }, e.prototype.buildTree = function () { for (var e = this.codeFrequency.length, t = new Int32Array(e), i = 0, n = 0, r = 0; r < e; r++) { var o = this.codeFrequency[r]; if (0 !== o) { for (var s = i++, a = 0; s > 0 && this.codeFrequency[t[a = Math.floor((s - 1) / 2)]] > o;)t[s] = t[a], s = a; t[s] = r, n = r } } for (; i < 2;)t[i++] = n < 2 ? ++n : 0; this.codeCount = Math.max(n + 1, this.codeMinCount); for (var l = i, h = new Int32Array(4 * i - 2), d = new Int32Array(2 * i - 1), c = 0; c < i; c++) { var p = t[c], u = 2 * c; h[u] = p, h[u + 1] = -1, d[c] = this.codeFrequency[p] << 8, t[c] = c } this.constructHuffmanTree(t, i, d, l, h), this.buildLength(h) }, e.prototype.constructHuffmanTree = function (e, t, i, n, r) { do { for (var o = e[0], s = e[--t], a = i[s], l = 0, h = 1; h < t;)h + 1 < t && i[e[h]] > i[e[h + 1]] && h++ , e[l] = e[h], h = 2 * (l = h) + 1; for (; (h = l) > 0 && i[e[l = Math.floor((h - 1) / 2)]] > a;)e[h] = e[l]; e[h] = s; var d = e[0]; r[2 * (s = n++)] = o, r[2 * s + 1] = d; var c = Math.min(255 & i[o], 255 & i[d]); for (i[s] = a = i[o] + i[d] - c + 1, l = 0, h = 1; h < t;)h + 1 < t && i[e[h]] > i[e[h + 1]] && h++ , e[l] = e[h], h = 2 * (l = h) + 1; for (; (h = l) > 0 && i[e[l = Math.floor((h - 1) / 2)]] > a;)e[h] = e[l]; e[h] = s } while (t > 1) }, e.prototype.buildLength = function (e) { this.codeLength = new Uint8Array(this.codeFrequency.length); for (var t = Math.floor(e.length / 2), i = Math.floor((t + 1) / 2), n = 0, r = 0; r < this.maxLength; r++)this.lengthCount[r] = 0; if (0 !== (n = this.calculateOptimalCodeLength(e, n, t))) { var o = this.maxLength - 1; do { for (; 0 === this.lengthCount[--o];); do { this.lengthCount[o]-- , this.lengthCount[++o]++ , n -= 1 << this.maxLength - 1 - o } while (n > 0 && o < this.maxLength - 1) } while (n > 0); this.recreateTree(e, n, i) } }, e.prototype.recreateTree = function (e, t, i) { this.lengthCount[this.maxLength - 1] += t, this.lengthCount[this.maxLength - 2] -= t; for (var n = 2 * i, r = this.maxLength; 0 !== r; r--)for (var o = this.lengthCount[r - 1]; o > 0;) { var s = 2 * e[n++]; -1 === e[s + 1] && (this.codeLength[e[s]] = r, o--) } }, e.prototype.calculateOptimalCodeLength = function (e, t, i) { var n = new Int32Array(i); n[i - 1] = 0; for (var r = i - 1; r >= 0; r--) { var o = 2 * r + 1; if (-1 !== e[o]) { (s = n[r] + 1) > this.maxLength && (s = this.maxLength, t++), n[e[o - 1]] = n[e[o]] = s } else { var s = n[r]; this.lengthCount[s - 1]++ , this.codeLength[e[o - 1]] = n[r] } } return t }, e.reverseBits = [0, 8, 4, 12, 2, 10, 6, 14, 1, 9, 5, 13, 3, 11, 7, 15], e.huffCodeLengthOrders = [16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15], e }(), mk = function () { function e() { } return e.checksumUpdate = function (t, i, n, r) { var o = new Uint32Array(1); o[0] = t; for (var s = o[0], a = o[0] = 65535 & s, l = o[0] = s >> e.checkSumBitOffset; r > 0;) { var h = Math.min(r, e.checksumIterationCount); for (r -= h; --h >= 0;)l += a += o[0] = 255 & i[n++]; a %= e.checksumBase, l %= e.checksumBase } return s = l << e.checkSumBitOffset | a }, e.checkSumBitOffset = 16, e.checksumBase = 65521, e.checksumIterationCount = 3800, e }(), fk = [], yk = function () { function e() { 0 === fk.length && e.initCrc32Table(), this.files = [], this.level = "Normal", ik.isMicrosoftBrowser = !!navigator.msSaveBlob } return Object.defineProperty(e.prototype, "compressionLevel", { get: function () { return this.level }, set: function (e) { this.level = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "length", { get: function () { return void 0 === this.files ? 0 : this.files.length }, enumerable: !0, configurable: !0 }), e.prototype.addItem = function (e) { if (null === e || void 0 === e) throw new Error("ArgumentException: item cannot be null or undefined"); for (var t = 0; t < this.files.length; t++) { var i = this.files[t]; if (i instanceof vk && i.name === e.name) throw new Error("item with same name already exist") } this.files.push(e) }, e.prototype.addDirectory = function (e) { if (null === e || void 0 === e) throw new Error("ArgumentException: string cannot be null or undefined"); if (0 === e.length) throw new Error("ArgumentException: string cannot be empty"); if ("/" !== e.slice(-1) && (e += "/"), -1 !== this.files.indexOf(e)) throw new Error("item with same name already exist"); this.files.push(e) }, e.prototype.getItem = function (e) { if (e >= 0 && e < this.files.length) return this.files[e] }, e.prototype.contains = function (e) { return -1 !== this.files.indexOf(e) }, e.prototype.save = function (e) { if (null === e || void 0 === e || 0 === e.length) throw new Error("ArgumentException: fileName cannot be null or undefined"); if (0 === this.files.length) throw new Error("InvalidOperation"); var t = this; return new Promise(function (i, n) { t.saveInternal(e, !1).then(function () { i(t) }) }) }, e.prototype.saveAsBlob = function () { var e = this; return new Promise(function (t, i) { e.saveInternal("", !0).then(function (e) { t(e) }) }) }, e.prototype.saveInternal = function (e, t) { var i = this, n = this; return new Promise(function (r, o) { for (var s = [], a = 0, l = 0; l < n.files.length; l++) { i.getCompressedData(i.files[l]).then(function (i) { if (a = n.constructZippedObject(s, i, a, i.isDirectory), s.length === n.files.length) { var o = n.writeZippedContent(e, s, a, t); r(o) } }) } }) }, e.prototype.destroy = function () { if (void 0 !== this.files && this.files.length > 0) { for (var e = 0; e < this.files.length; e++) { var t = this.files[e]; t instanceof vk && t.destroy(), t = void 0 } this.files = [] } this.files = void 0, this.level = void 0 }, e.prototype.getCompressedData = function (e) { var t = this; return new Promise(function (i, n) { if (e instanceof vk) { var r = new FileReader; r.onload = function () { var n = new Uint8Array(r.result), o = { fileName: e.name, crc32Value: 0, compressedData: [], compressedSize: void 0, uncompressedDataSize: n.length, compressionType: void 0, isDirectory: !1 }; if ("Normal" === t.level) { t.compressData(n, o, fk); for (var s = 0, a = 0; a < o.compressedData.length; a++)s += o.compressedData[a].length; o.compressedSize = s, o.compressionType = "\b\0" } else o.compressedSize = n.length, o.crc32Value = t.calculateCrc32Value(0, n, fk), o.compressionType = "\0\0", o.compressedData.push(n); i(o) }, r.readAsArrayBuffer(e.data) } else { i({ fileName: e, crc32Value: 0, compressedData: "", compressedSize: 0, uncompressedDataSize: 0, compressionType: "\0\0", isDirectory: !0 }) } }) }, e.prototype.compressData = function (e, t, i) { var n = new uk(!0), r = 0, o = 0; do { if (r >= e.length) { n.close(); break } o = Math.min(e.length, r + 16384); var s = e.subarray(r, o); t.crc32Value = this.calculateCrc32Value(t.crc32Value, s, i), n.write(s, 0, o - r), r = o } while (r <= e.length); t.compressedData = n.compressedData, n.destroy() }, e.prototype.constructZippedObject = function (e, t, i, n) { var r = 0, o = new Date; n && (r |= 16), r |= 0; var s = this.writeHeader(t, o), a = "PK" + s + t.fileName, l = this.writeCentralDirectory(t, s, i, r); return e.push({ localHeader: a, centralDir: l, compressedData: t }), i + a.length + t.compressedSize }, e.prototype.writeHeader = function (e, t) { var i = ""; return i += "\n\0\0\0", i += e.compressionType, i += this.getBytes(this.getModifiedTime(t), 2), i += this.getBytes(this.getModifiedDate(t), 2), i += this.getBytes(e.crc32Value, 4), i += this.getBytes(e.compressedSize, 4), i += this.getBytes(e.uncompressedDataSize, 4), i += this.getBytes(e.fileName.length, 2), i += this.getBytes(0, 2) }, e.prototype.writeZippedContent = function (e, t, i, n) { for (var r = 0, o = [], s = 0; s < t.length; s++) { var a = t[s]; for (r += a.centralDir.length, o.push(this.getArrayBuffer(a.localHeader)); a.compressedData.compressedData.length;)o.push(a.compressedData.compressedData.shift().buffer) } for (s = 0; s < t.length; s++)o.push(this.getArrayBuffer(t[s].centralDir)); o.push(this.getArrayBuffer(this.writeFooter(t, r, i))); var l = new Blob(o, { type: "application/zip" }); return n || ik.save(e, l), l }, e.prototype.writeCentralDirectory = function (e, t, i, n) { return "PK" + this.getBytes(20, 2) + t + this.getBytes(0, 2) + "\0\0\0\0" + this.getBytes(n, 4) + this.getBytes(i, 4) + e.fileName }, e.prototype.writeFooter = function (e, t, i) { return "PK\0\0\0\0" + this.getBytes(e.length, 2) + this.getBytes(e.length, 2) + this.getBytes(t, 4) + this.getBytes(i, 4) + this.getBytes(0, 2) }, e.prototype.getArrayBuffer = function (e) { for (var t = new Uint8Array(e.length), i = 0; i < e.length; ++i)t[i] = 255 & e.charCodeAt(i); return t.buffer }, e.prototype.getBytes = function (e, t) { for (var i = "", n = 0; n < t; n++)i += String.fromCharCode(255 & e), e >>>= 8; return i }, e.prototype.getModifiedTime = function (e) { var t = e.getHours(); return t <<= 6, t |= e.getMinutes(), t <<= 5, t |= e.getSeconds() / 2 }, e.prototype.getModifiedDate = function (e) { var t = e.getFullYear() - 1980; return t <<= 4, t |= e.getMonth() + 1, t <<= 5, t |= e.getDate() }, e.prototype.calculateCrc32Value = function (e, t, i) { e ^= -1; for (var n = 0; n < t.length; n++)e = e >>> 8 ^ i[255 & (e ^ t[n])]; return -1 ^ e }, e.initCrc32Table = function () { for (var e, t = 0; t < 256; t++) { e = t; for (var i = 0; i < 8; i++)e = 1 & e ? 3988292384 ^ e >>> 1 : e >>> 1; fk[t] = e } }, e }(), vk = function () { function e(e, t) { if (null === e || void 0 === e) throw new Error("ArgumentException: data cannot be null or undefined"); if (null === t || void 0 === t) throw new Error("ArgumentException: string cannot be null or undefined"); if (0 === t.length) throw new Error("string cannot be empty"); this.data = e, this.name = t } return Object.defineProperty(e.prototype, "name", { get: function () { return this.fileName }, set: function (e) { this.fileName = e }, enumerable: !0, configurable: !0 }), e.prototype.destroy = function () { this.fileName = void 0, this.data = void 0 }, e }(), wk = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), bk = function (e) { function t(t, i) { var n = e.call(this, t) || this; return n.dicPrefix = "stream", n.dicSuffix = "endstream", n.clonedObject2 = null, n.bCompress = !0, n.isImageStream = !1, n.isFontStream = !1, void 0 !== t || void 0 !== i ? (n.dataStream2 = [], n.dataStream2 = i, n.bCompress2 = !1) : (n.dataStream2 = [], n.bCompress2 = !0), n } return wk(t, e), Object.defineProperty(t.prototype, "internalStream", { get: function () { return this.dataStream2 }, set: function (e) { this.dataStream2 = [], this.dataStream2 = e, this.modify() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isImage", { get: function () { return this.isImageStream }, set: function (e) { this.isImageStream = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isFont", { get: function () { return this.isFontStream }, set: function (e) { this.isFontStream = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "compress", { get: function () { return this.bCompress }, set: function (e) { this.bCompress = e, this.modify() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "data", { get: function () { return this.dataStream2 }, set: function (e) { this.dataStream2 = [], this.dataStream2 = e, this.modify() }, enumerable: !0, configurable: !0 }), t.prototype.clearStream = function () { this.internalStream = [], this.items.containsKey(this.dictionaryProperties.filter) && this.remove(this.dictionaryProperties.filter), this.bCompress = !0, this.modify() }, t.prototype.write = function (e) { if (null == e) throw new Error("ArgumentNullException:text"); if (e.length <= 0) throw new Error("ArgumentException: Can not write an empty string, text"); this.dataStream2.push(e), this.modify() }, t.prototype.writeBytes = function (e) { if (null === e) throw new Error("ArgumentNullException:data"); if (e.length <= 0) throw new Error("ArgumentException: Can not write an empty bytes, data"); for (var t = "", i = 0; i < e.length; i++)t += String.fromCharCode(e[i]); this.dataStream2.push(t), this.modify() }, t.prototype.onCmapBeginSave = function () { this.cmapBeginSave.sender.cmapBeginSave() }, t.prototype.onFontProgramBeginSave = function () { this.fontProgramBeginSave.sender.fontProgramBeginSave() }, t.prototype.compressContent = function (e, t) { if (this.bCompress) { for (var i = [], n = 0; n < e.length; n++)i.push(e.charCodeAt(n)); var r = new Uint8Array(i), o = new uk; o.write(r, 0, r.length), o.close(), e = o.getCompressedString, this.addFilter(this.dictionaryProperties.flatedecode) } return e }, t.prototype.addFilter = function (e) { var t = this.items.getValue(this.dictionaryProperties.filter); if (t instanceof Tk) { t = t.object } var i = t, n = t; null != n && ((i = new tk).insert(0, n), this.items.setValue(this.dictionaryProperties.filter, i)), n = new YI(e), null == i ? this.items.setValue(this.dictionaryProperties.filter, n) : i.insert(0, n) }, t.prototype.save = function (t) { void 0 !== this.cmapBeginSave && this.onCmapBeginSave(), void 0 !== this.fontProgramBeginSave && this.onFontProgramBeginSave(); for (var i = "", n = 0; n < this.data.length; n++)i += this.data[n]; i.length > 1 && !this.isImage && !this.isFont && (i = "q\r\n" + i + "Q\r\n"); var r = (i = this.compressContent(i, t)).length; this.items.setValue(this.dictionaryProperties.length, new ek(r)), e.prototype.save.call(this, t, !1), t.write(this.dicPrefix), t.write(UI.newLine), i.length > 0 && t.write(i), t.write(UI.newLine), t.write(this.dicSuffix), t.write(UI.newLine) }, t.bytesToString = function (e) { for (var t = "", i = 0; i < e.length; i++)t += String.fromCharCode(e[i]); return t }, t }(GI), Ck = function () { return function (e) { this.sender = e } }(), Lk = function () { return function (e) { this.sender = e } }(); !function (e) { !function (e) { e[e.None = 0] = "None", e[e.Ascii = 1] = "Ascii", e[e.Unicode = 2] = "Unicode" }(e.ForceEncoding || (e.ForceEncoding = {})); var t; !function (e) { e[e.StringValue = 0] = "StringValue", e[e.ByteBuffer = 1] = "ByteBuffer" }(t || (t = {})) }(PE || (PE = {})); var Mk, Sk = function () { function e(e) { if (this.bHex = !1, this.position1 = -1, this.clonedObject1 = null, this.bDecrypted = !1, this.isParentDecrypted = !1, this.isPacked = !1, this.isFormField = !1, this.isColorSpace = !1, this.isHexString = !0, void 0 === e) this.bHex = !1; else if (!(e.length > 0 && "0xfeff" === e[0])) { this.stringValue = e, this.data = []; for (var t = 0; t < e.length; ++t)this.data.push(e.charCodeAt(t)) } } return Object.defineProperty(e.prototype, "hex", { get: function () { return this.bHex }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { return this.stringValue }, set: function (e) { this.stringValue = e, this.data = null }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "status", { get: function () { return this.status1 }, set: function (e) { this.status1 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving1 }, set: function (e) { this.isSaving1 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index1 }, set: function (e) { this.index1 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return this.clonedObject1 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position1 }, set: function (e) { this.position1 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "CrossTable", { get: function () { return this.crossTable }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "converted", { get: function () { return this.bConverted }, set: function (e) { this.bConverted = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "encode", { get: function () { return this.bForceEncoding }, set: function (e) { this.bForceEncoding = e }, enumerable: !0, configurable: !0 }), e.bytesToHex = function (e) { if (null == e) return ""; return "" }, e.prototype.save = function (t) { if (null === t) throw new Error("ArgumentNullException : writer"); void 0 !== this.encode && this.encode === PE.ForceEncoding.Ascii ? t.write(this.pdfEncode()) : t.write(e.stringMark[0] + this.value + e.stringMark[1]) }, e.prototype.pdfEncode = function () { var t = ""; if (void 0 !== this.encode && this.encode === PE.ForceEncoding.Ascii) { for (var i = this.escapeSymbols(this.value), n = 0; n < i.length; n++)t += String.fromCharCode(i[n]); t = e.stringMark[0] + t + e.stringMark[1] } else t = this.value; return t }, e.prototype.escapeSymbols = function (e) { for (var t = [], i = 0; i < e.length; i++) { var n = e.charCodeAt(i); switch (n) { case 40: case 41: t.push(92), t.push(n); break; case 13: t.push(92), t.push(114); break; case 92: t.push(92), t.push(n); break; default: t.push(n) } } return t }, e.prototype.clone = function (t) { if (null !== this.clonedObject1 && this.clonedObject1.CrossTable === t) return this.clonedObject1; this.clonedObject1 = null; var i = new e(this.stringValue); return i.bHex = this.bHex, i.crossTable = t, i.isColorSpace = this.isColorSpace, this.clonedObject1 = i, i }, e.toUnicodeArray = function (e, t) { if (null == e) throw new Error("Argument Null Exception : value"); for (var i = [], n = 0; n < e.length; n++) { var r = e.charCodeAt(n); i.push(r / 256 >>> 0), i.push(255 & r) } return i }, e.byteToString = function (e) { if (null == e) throw new Error("Argument Null Exception : stream"); for (var t = "", i = 0; i < e.length; ++i)t += String.fromCharCode(e[i]); return t }, e.stringMark = "()", e.hexStringMark = "<>", e.hexFormatPattern = "{0:X2}", e }(), xk = function () { function e(e, t) { this.index3 = -1, this.position3 = -1, this.objNumber = 0, this.genNumber = 0, "number" == typeof e && "number" == typeof t ? (this.objNumber = e, this.genNumber = t) : (this.objNumber = Number(e), this.genNumber = Number(t)) } return Object.defineProperty(e.prototype, "status", { get: function () { return this.status3 }, set: function (e) { this.status3 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving3 }, set: function (e) { this.isSaving3 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index3 }, set: function (e) { this.index3 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position3 }, set: function (e) { this.position3 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return null }, enumerable: !0, configurable: !0 }), e.prototype.save = function (e) { e.write(this.toString()) }, e.prototype.toString = function () { return this.objNumber.toString() + " " + this.genNumber.toString() + " R" }, e.prototype.clone = function (e) { return null }, e }(), Tk = function () { function e(e, t) { this.index4 = -1, this.position4 = -1, this.objectIndex = -1, this.dictionaryProperties = new qI, this.initialize(e) } return Object.defineProperty(e.prototype, "status", { get: function () { return this.status4 }, set: function (e) { this.status4 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.isSaving4 }, set: function (e) { this.isSaving4 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index4 }, set: function (e) { this.index4 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.position4 }, set: function (e) { this.position4 = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return null }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "object", { get: function () { return this.primitiveObject }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "reference", { get: function () { return this.pdfReference }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "index", { get: function () { return this.objectIndex }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.primitiveObject }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function (e) { if (e instanceof tk || e instanceof GI || e instanceof YI || e instanceof ek || e instanceof bk || e instanceof xk || e instanceof Sk) this.primitiveObject = e; else { var t = e; this.initialize(t.element) } }, e.prototype.save = function (e) { e.position; var t = e.document.crossTable; this.object.isSaving = !0; t.getReference(this.object).save(e) }, e.prototype.clone = function (e) { return null }, e }(), Dk = function () { function e() { this.action = null, this.dictionaryProperties = new qI, this.initialize() } return Object.defineProperty(e.prototype, "next", { get: function () { return this.action }, set: function (e) { this.action = e, this.dictionary.items.setValue(this.dictionaryProperties.next, new Tk(this.action)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dictionary", { get: function () { return void 0 === this.pdfDictionary && (this.pdfDictionary = new GI), this.pdfDictionary }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { this.dictionary.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.action)) }, Object.defineProperty(e.prototype, "element", { get: function () { return this.dictionary }, enumerable: !0, configurable: !0 }), e }(), Ak = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Ek = function (e) { function t(t) { var i = e.call(this) || this; return i.uniformResourceIdentifier = "", i } return Ak(t, e), Object.defineProperty(t.prototype, "uri", { get: function () { return this.uniformResourceIdentifier }, set: function (e) { this.uniformResourceIdentifier = e, this.dictionary.items.setValue(this.dictionaryProperties.uri, new Sk(this.uniformResourceIdentifier)) }, enumerable: !0, configurable: !0 }), t.prototype.initialize = function () { e.prototype.initialize.call(this), this.dictionary.items.setValue(this.dictionaryProperties.s, new YI(this.dictionaryProperties.uri)) }, t }(Dk); !function (e) { e[e.Left = 0] = "Left", e[e.Center = 1] = "Center", e[e.Right = 2] = "Right" }(Mk || (Mk = {})); var jk; !function (e) { e[e.Top = 0] = "Top", e[e.Middle = 1] = "Middle", e[e.Bottom = 2] = "Bottom" }(jk || (jk = {})); var Ik; !function (e) { e[e.Left = 0] = "Left", e[e.Center = 1] = "Center", e[e.Right = 2] = "Right", e[e.Justify = 3] = "Justify" }(Ik || (Ik = {})); var kk; !function (e) { e[e.Fill = 0] = "Fill", e[e.Stroke = 1] = "Stroke", e[e.FillStroke = 2] = "FillStroke", e[e.None = 3] = "None", e[e.ClipFlag = 4] = "ClipFlag", e[e.ClipFill = 4] = "ClipFill", e[e.ClipStroke = 5] = "ClipStroke", e[e.ClipFillStroke = 6] = "ClipFillStroke", e[e.Clip = 7] = "Clip" }(kk || (kk = {})); var Pk; !function (e) { e[e.Miter = 0] = "Miter", e[e.Round = 1] = "Round", e[e.Bevel = 2] = "Bevel" }(Pk || (Pk = {})); var Nk; !function (e) { e[e.Flat = 0] = "Flat", e[e.Round = 1] = "Round", e[e.Square = 2] = "Square" }(Nk || (Nk = {})); var Ok; !function (e) { e[e.Solid = 0] = "Solid", e[e.Dash = 1] = "Dash", e[e.Dot = 2] = "Dot", e[e.DashDot = 3] = "DashDot", e[e.DashDotDot = 4] = "DashDotDot", e[e.Custom = 5] = "Custom" }(Ok || (Ok = {})); var Rk; !function (e) { e[e.Winding = 0] = "Winding", e[e.Alternate = 1] = "Alternate" }(Rk || (Rk = {})); var zk; !function (e) { e[e.Rgb = 0] = "Rgb", e[e.Cmyk = 1] = "Cmyk", e[e.GrayScale = 2] = "GrayScale", e[e.Indexed = 3] = "Indexed" }(zk || (zk = {})); var Bk; !function (e) { e[e.Normal = 0] = "Normal", e[e.Multiply = 1] = "Multiply", e[e.Screen = 2] = "Screen", e[e.Overlay = 3] = "Overlay", e[e.Darken = 4] = "Darken", e[e.Lighten = 5] = "Lighten", e[e.ColorDodge = 6] = "ColorDodge", e[e.ColorBurn = 7] = "ColorBurn", e[e.HardLight = 8] = "HardLight", e[e.SoftLight = 9] = "SoftLight", e[e.Difference = 10] = "Difference", e[e.Exclusion = 11] = "Exclusion", e[e.Hue = 12] = "Hue", e[e.Saturation = 13] = "Saturation", e[e.Color = 14] = "Color", e[e.Luminosity = 15] = "Luminosity" }(Bk || (Bk = {})); var Fk; !function (e) { e[e.Centimeter = 0] = "Centimeter", e[e.Pica = 1] = "Pica", e[e.Pixel = 2] = "Pixel", e[e.Point = 3] = "Point", e[e.Inch = 4] = "Inch", e[e.Document = 5] = "Document", e[e.Millimeter = 6] = "Millimeter" }(Fk || (Fk = {})); var Vk; !function (e) { e[e.Fit = 0] = "Fit", e[e.Center = 1] = "Center", e[e.Stretch = 2] = "Stretch", e[e.Tile = 3] = "Tile" }(Vk || (Vk = {})); var Wk; !function (e) { e[e.None = 0] = "None", e[e.LeftToRight = 1] = "LeftToRight", e[e.RightToLeft = 2] = "RightToLeft" }(Wk || (Wk = {})); var Hk, _k = function () { function e(t, i, n, r) { t instanceof e ? (this.redColor = t.r, this.greenColor = t.g, this.blueColor = t.b, this.grayColor = t.gray, this.alpha = t.alpha, this.filled = 0 !== this.alpha) : (this.cyanColor = 0, this.magentaColor = 0, this.yellowColor = 0, this.blackColor = 0, this.grayColor = 0, void 0 === r ? (this.redColor = t, this.greenColor = i, this.blueColor = n, this.alpha = e.maxColourChannelValue, this.filled = !0, this.assignCMYK(t, i, n)) : (this.redColor = i, this.greenColor = n, this.blueColor = r, this.alpha = t, this.filled = !0, this.assignCMYK(i, n, r))) } return e.prototype.assignCMYK = function (t, i, n) { var r = t / e.maxColourChannelValue, o = i / e.maxColourChannelValue, s = n / e.maxColourChannelValue, a = ek.min(1 - r, 1 - o, 1 - s), l = 1 === a ? 0 : (1 - r - a) / (1 - a), h = 1 === a ? 0 : (1 - o - a) / (1 - a), d = 1 === a ? 0 : (1 - s - a) / (1 - a); this.blackColor = a, this.cyanColor = l, this.magentaColor = h, this.yellowColor = d }, Object.defineProperty(e.prototype, "r", { get: function () { return this.redColor }, set: function (e) { this.redColor = e, this.assignCMYK(this.redColor, this.greenColor, this.blueColor), this.filled = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "red", { get: function () { return this.r / e.maxColourChannelValue }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "b", { get: function () { return this.blueColor }, set: function (e) { this.blueColor = e, this.assignCMYK(this.redColor, this.greenColor, this.blueColor), this.filled = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "blue", { get: function () { return this.b / e.maxColourChannelValue }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "g", { get: function () { return this.greenColor }, set: function (e) { this.greenColor = e, this.assignCMYK(this.redColor, this.greenColor, this.blueColor), this.filled = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "green", { get: function () { return this.g / e.maxColourChannelValue }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "gray", { get: function () { return (this.redColor + this.greenColor + this.blueColor) / (3 * e.maxColourChannelValue) }, set: function (t) { this.grayColor = t < 0 ? 0 : t > 1 ? 1 : t, this.r = this.grayColor * e.maxColourChannelValue, this.g = this.grayColor * e.maxColourChannelValue, this.b = this.grayColor * e.maxColourChannelValue, this.assignCMYK(this.redColor, this.greenColor, this.blueColor), this.filled = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isEmpty", { get: function () { return !this.filled }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "a", { get: function () { return this.alpha }, set: function (e) { this.alpha = e < 0 ? 0 : e, this.filled = !0 }, enumerable: !0, configurable: !0 }), e.prototype.toString = function (e, t) { return this.isEmpty ? "" : this.rgbToString(t) }, e.prototype.rgbToString = function (t) { var i = this.r, n = this.g, r = this.b, o = (i << 16) + (n << 8) + r; t && (o += 1 << 24); var s = "", a = null; if (e.rgbStrings.containsKey(o) && (a = e.rgbStrings.getValue(o)), null == a) { var l = i / e.maxColourChannelValue, h = n / e.maxColourChannelValue, d = r / e.maxColourChannelValue; s = t ? l.toString() + " " + h.toString() + " " + d.toString() + " RG" : l.toString() + " " + h.toString() + " " + d.toString() + " rg", e.rgbStrings.setValue(o, s) } else s = a.toString(); return s + UI.newLine }, e.prototype.toArray = function (e) { var t = new tk; switch (e) { case zk.Rgb: t.add(new ek(this.red)), t.add(new ek(this.green)), t.add(new ek(this.blue)); break; default: throw new Error("NotSupportedException : Unsupported colour space.") }return t }, e.rgbStrings = new _I, e.grayStringsSroke = new _I, e.grayStringsFill = new _I, e.maxColourChannelValue = 255, e }(), Yk = function () { return function (e, t) { void 0 === e ? (this.x = 0, this.y = 0) : (this.x = null !== e ? e : 0, this.y = null !== t ? t : 0) } }(), Uk = function () { return function (e, t) { void 0 === t ? (this.height = 0, this.width = 0) : (this.height = null !== t ? t : 0, this.width = null !== e ? e : 0) } }(), qk = function () { return function (e, t, i, n) { if (typeof e == typeof e && void 0 === e) this.x = 0, this.y = 0, this.height = 0, this.width = 0; else if (e instanceof Yk && t instanceof Uk && void 0 === i) { var r = e; this.x = r.x, this.y = r.y; var o = t; this.height = o.height, this.width = o.width } else { var s = e, a = t, l = i, h = n; this.x = s, this.y = a, this.height = h, this.width = l } } }(), Gk = function () { function e(e, t, i, n) { this.left = e, this.top = t, this.right = i, this.bottom = n } return Object.defineProperty(e.prototype, "width", { get: function () { return this.right - this.left }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.bottom - this.top }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "topLeft", { get: function () { return new Yk(this.left, this.top) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return new Uk(this.width, this.height) }, enumerable: !0, configurable: !0 }), e.prototype.toString = function () { return this.topLeft + "x" + this.size }, e }(), Qk = function () { return function () { } }(), Xk = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Jk = function (e) { function t(t) { var i = e.call(this) || this; return i.pdfColor = t, i } return Xk(t, e), Object.defineProperty(t.prototype, "color", { get: function () { return this.pdfColor }, set: function (e) { this.pdfColor = e }, enumerable: !0, configurable: !0 }), t.prototype.monitorChanges = function (e, t, i, n, r) { if (null == t) throw new Error("ArgumentNullException:streamWriter"); var o = !1; return o = !0, t.setColorAndSpace(this.pdfColor, r, !1), o }, t.prototype.resetChanges = function (e) { e.setColorAndSpace(new _k(0, 0, 0), zk.Rgb, !1) }, t }(Qk); !function (e) { e[e.Regular = 0] = "Regular", e[e.Bold = 1] = "Bold", e[e.Italic = 2] = "Italic", e[e.Underline = 4] = "Underline", e[e.Strikeout = 8] = "Strikeout" }(Hk || (Hk = {})); var Zk; !function (e) { e[e.Helvetica = 0] = "Helvetica", e[e.Courier = 1] = "Courier", e[e.TimesRoman = 2] = "TimesRoman", e[e.Symbol = 3] = "Symbol", e[e.ZapfDingbats = 4] = "ZapfDingbats" }(Zk || (Zk = {})); var Kk; !function (e) { e[e.Standard = 0] = "Standard", e[e.TrueType = 1] = "TrueType", e[e.TrueTypeEmbedded = 2] = "TrueTypeEmbedded" }(Kk || (Kk = {})); var $k; !function (e) { e[e.None = 0] = "None", e[e.Word = 1] = "Word", e[e.WordOnly = 2] = "WordOnly", e[e.Character = 3] = "Character" }($k || ($k = {})); var eP; !function (e) { e[e.None = 0] = "None", e[e.SuperScript = 1] = "SuperScript", e[e.SubScript = 2] = "SubScript" }(eP || (eP = {})); var tP; !function (e) { e[e.Unknown = 0] = "Unknown", e[e.StandardEncoding = 1] = "StandardEncoding", e[e.MacRomanEncoding = 2] = "MacRomanEncoding", e[e.MacExpertEncoding = 3] = "MacExpertEncoding", e[e.WinAnsiEncoding = 4] = "WinAnsiEncoding", e[e.PdfDocEncoding = 5] = "PdfDocEncoding", e[e.IdentityH = 6] = "IdentityH" }(tP || (tP = {})); var iP; !function (e) { e[e.Apple = 0] = "Apple", e[e.Microsoft = 4] = "Microsoft", e[e.Trimmed = 6] = "Trimmed" }(iP || (iP = {})); var nP; !function (e) { e[e.Unknown = 0] = "Unknown", e[e.Symbol = 1] = "Symbol", e[e.Unicode = 2] = "Unicode", e[e.Macintosh = 3] = "Macintosh" }(nP || (nP = {})); var rP; !function (e) { e[e.AppleUnicode = 0] = "AppleUnicode", e[e.Macintosh = 1] = "Macintosh", e[e.Iso = 2] = "Iso", e[e.Microsoft = 3] = "Microsoft" }(rP || (rP = {})); var oP; !function (e) { e[e.Undefined = 0] = "Undefined", e[e.Unicode = 1] = "Unicode" }(oP || (oP = {})); var sP; !function (e) { e[e.Roman = 0] = "Roman", e[e.Japanese = 1] = "Japanese", e[e.Chinese = 2] = "Chinese" }(sP || (sP = {})); var aP; !function (e) { e[e.FixedPitch = 1] = "FixedPitch", e[e.Serif = 2] = "Serif", e[e.Symbolic = 4] = "Symbolic", e[e.Script = 8] = "Script", e[e.Nonsymbolic = 32] = "Nonsymbolic", e[e.Italic = 64] = "Italic", e[e.ForceBold = 262144] = "ForceBold" }(aP || (aP = {})); var lP; !function (e) { e[e.Arg1And2AreWords = 1] = "Arg1And2AreWords", e[e.ArgsAreXyValues = 2] = "ArgsAreXyValues", e[e.RoundXyToGrid = 4] = "RoundXyToGrid", e[e.WeHaveScale = 8] = "WeHaveScale", e[e.Reserved = 16] = "Reserved", e[e.MoreComponents = 32] = "MoreComponents", e[e.WeHaveAnXyScale = 64] = "WeHaveAnXyScale", e[e.WeHaveTwoByTwo = 128] = "WeHaveTwoByTwo", e[e.WeHaveInstructions = 256] = "WeHaveInstructions", e[e.UseMyMetrics = 512] = "UseMyMetrics" }(lP || (lP = {})); var hP, dP = function () { function e(e, t) { this.scalingFactor = 100, this.wordWrapType = $k.Word, this.internalLineLimit = !0, this.wordWrapType = $k.Word, void 0 !== e && "string" != typeof e && (this.textAlignment = e), void 0 !== t && (this.verticalAlignment = t) } return Object.defineProperty(e.prototype, "alignment", { get: function () { return this.textAlignment }, set: function (e) { this.textAlignment = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "textDirection", { get: function () { return this.direction }, set: function (e) { this.direction = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineAlignment", { get: function () { return void 0 === this.verticalAlignment || null == this.verticalAlignment ? jk.Top : this.verticalAlignment }, set: function (e) { this.verticalAlignment = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rightToLeft", { get: function () { return void 0 !== this.isRightToLeft && null != this.isRightToLeft && this.isRightToLeft }, set: function (e) { this.isRightToLeft = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "characterSpacing", { get: function () { return void 0 === this.internalCharacterSpacing || null == this.internalCharacterSpacing ? 0 : this.internalCharacterSpacing }, set: function (e) { this.internalCharacterSpacing = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wordSpacing", { get: function () { return void 0 === this.internalWordSpacing || null == this.internalWordSpacing ? 0 : this.internalWordSpacing }, set: function (e) { this.internalWordSpacing = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineSpacing", { get: function () { return void 0 === this.leading || null == this.leading ? 0 : this.leading }, set: function (e) { this.leading = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clipPath", { get: function () { return void 0 !== this.clip && null != this.clip && this.clip }, set: function (e) { this.clip = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "subSuperScript", { get: function () { return void 0 === this.pdfSubSuperScript || null == this.pdfSubSuperScript ? eP.None : this.pdfSubSuperScript }, set: function (e) { this.pdfSubSuperScript = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paragraphIndent", { get: function () { return void 0 === this.internalParagraphIndent || null == this.internalParagraphIndent ? 0 : this.internalParagraphIndent }, set: function (e) { this.internalParagraphIndent = e, this.firstLineIndent = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineLimit", { get: function () { return this.internalLineLimit }, set: function (e) { this.internalLineLimit = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "measureTrailingSpaces", { get: function () { return void 0 !== this.trailingSpaces && null != this.trailingSpaces && this.trailingSpaces }, set: function (e) { this.trailingSpaces = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "noClip", { get: function () { return void 0 !== this.isNoClip && null != this.isNoClip && this.isNoClip }, set: function (e) { this.isNoClip = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wordWrap", { get: function () { return this.wordWrapType }, set: function (e) { this.wordWrapType = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "horizontalScalingFactor", { get: function () { return this.scalingFactor }, set: function (e) { if (e <= 0) throw new Error("ArgumentOutOfRangeException:The scaling factor cant be less of equal to zero, ScalingFactor"); this.scalingFactor = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "firstLineIndent", { get: function () { return void 0 === this.initialLineIndent || null == this.initialLineIndent ? 0 : this.initialLineIndent }, set: function (e) { this.initialLineIndent = e }, enumerable: !0, configurable: !0 }), e.prototype.clone = function () { return this }, e }(), cP = function () { function e(e) { if (this.currentPosition = 0, null == e) throw new Error("ArgumentNullException:text"); this.text = e } return Object.defineProperty(e.prototype, "length", { get: function () { return this.text.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "end", { get: function () { return this.currentPosition === this.text.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.currentPosition }, set: function (e) { this.currentPosition = e }, enumerable: !0, configurable: !0 }), e.getCharsCount = function (e, t) { if ("string" == typeof t) { if (null == e) throw new Error("ArgumentNullException:wholeText"); for (var i = 0, n = 0; -1 !== (n = e.indexOf(t, n));)i++ , n++; return i } if (null == e) throw new Error("ArgumentNullException:text"); if (null == t) throw new Error("ArgumentNullException:symbols"); for (var r = 0, o = 0, s = e.length; o < s; o++) { var a = e[o]; this.contains(t, a) && r++ } return r }, e.prototype.readLine = function () { for (var e = this.currentPosition; e < this.length;) { switch (this.text[e]) { case "\r": case "\n": var t = this.text.substring(this.currentPosition, e - this.currentPosition); return this.currentPosition = e + 1, this.currentPosition++ , t }e++ } if (e > this.currentPosition) { var i = this.text.substring(this.currentPosition, e - this.currentPosition); return this.currentPosition = e, i } return null }, e.prototype.peekLine = function () { var e = this.currentPosition, t = this.readLine(); return this.currentPosition = e, t }, e.prototype.readWord = function () { for (var e = this.currentPosition; e < this.length;) { var t = this.text[e]; switch (t) { case "\r": case "\n": var i = this.text.substr(this.currentPosition, e - this.currentPosition); return this.currentPosition = e + 1, "\r" === t && this.currentPosition < this.length && "\n" === this.text[this.currentPosition] && this.currentPosition++ , i; case " ": case "\t": e === this.currentPosition && e++; var n = this.text.substr(this.currentPosition, e - this.currentPosition); return this.currentPosition = e, n }e++ } if (e > this.currentPosition) { var r = this.text.substr(this.currentPosition, e - this.currentPosition); return this.currentPosition = e, r } return null }, e.prototype.peekWord = function () { var e = this.currentPosition, t = this.readWord(); return this.currentPosition = e, t }, e.prototype.read = function (e) { if (void 0 === e) { var t = "0"; return this.end || (t = this.text[this.currentPosition], this.currentPosition++), t } for (var i = 0, n = ""; !this.end && i < e;) { n += t = this.read(), i++ } return n }, e.prototype.peek = function () { var e = "0"; return this.end || (e = this.text[this.currentPosition]), e }, e.prototype.close = function () { this.text = null }, e.prototype.readToEnd = function () { var e; return e = 0 === this.currentPosition ? this.text : this.text.substring(this.length, this.currentPosition), this.currentPosition = this.length, e }, e.contains = function (e, t) { for (var i = !1, n = 0; n < e.length; n++)if (e[n] === t) { i = !0; break } return i }, e.whiteSpace = " ", e.tab = "\t", e.spaces = [e.whiteSpace, e.tab], e.whiteSpacePattern = "^[ \t]+$", e }(), pP = function () { function e() { this.isOverloadWithPosition = !1 } return e.prototype.layout = function (e, t, i, n, r, o, s) { if (n instanceof qk) { this.initialize(e, t, i, n, r), this.isOverloadWithPosition = o, this.clientSize = s; var a = this.doLayout(); return this.clear(), a } this.initialize(e, t, i, n), this.isOverloadWithPosition = r, this.clientSize = o; a = this.doLayout(); return this.clear(), a }, e.prototype.initialize = function (e, t, i, n, r) { if ("number" == typeof r) { if (null == e) throw new Error("ArgumentNullException:text"); if (null == t) throw new Error("ArgumentNullException:font"); this.text = e, this.font = t, this.format = i, this.size = new Uk(n.width, n.height), this.rectangle = n, this.pageHeight = r, this.reader = new cP(e) } else this.initialize(e, t, i, new qk(new Yk(0, 0), n), 0) }, e.prototype.clear = function () { this.font = null, this.format = null, this.reader.close(), this.reader = null, this.text = null }, e.prototype.doLayout = function () { for (var e = new uP, t = new uP, i = [], n = this.reader.peekLine(), r = this.getLineIndent(!0); null != n;) { if (null !== (t = this.layoutLine(n, r)) || void 0 !== t) { var o = 0, s = this.copyToResult(e, t, i, o), a = s.success; if (o = s.numInserted, !a) { this.reader.read(o); break } } this.reader.readLine(), n = this.reader.peekLine(), r = this.getLineIndent(!1) } return this.finalizeResult(e, i), e }, e.prototype.getLineIndent = function (e) { var t = 0; return null != this.format && (t = e ? this.format.firstLineIndent : this.format.paragraphIndent, t = this.size.width > 0 ? Math.min(this.size.width, t) : t), t }, e.prototype.getLineHeight = function () { var e = this.font.height; return null != this.format && 0 !== this.format.lineSpacing && (e = this.format.lineSpacing + this.font.height), e }, e.prototype.getLineWidth = function (e) { return this.font.getLineWidth(e, this.format) }, e.prototype.layoutLine = function (e, t) { var i = new uP; i.layoutLineHeight = this.getLineHeight(); var n = [], r = this.size.width, o = this.getLineWidth(e) + t, s = hP.FirstParagraphLine, a = !0; if (r <= 0 || Math.round(o) <= Math.round(r)) this.addToLineResult(i, n, e, o, hP.NewLineBreak | s); else { var l = "", h = ""; o = t; var d = t, c = new cP(e), p = c.peekWord(); for (p.length !== c.length && " " === p && (h += p, l += p, c.position += 1, p = c.peekWord()); null != p;) { h += p; var u = this.getLineWidth(h.toString()) + d; if (" " === h.toString() && (h = "", u = 0), u > r) { if (this.getWrapType() === $k.None) break; if (h.length === p.length) { if (this.getWrapType() === $k.WordOnly) { i.textRemainder = e.substring(c.position); break } if (1 === h.length) { l += p; break } a = !1, h = "", p = c.peek().toString(); continue } if (this.getLineWidth(p.toString()) > r ? this.format.wordWrap = $k.Character : void 0 !== this.format && null !== this.format && (this.format.wordWrap = $k.Word), this.getWrapType() === $k.Character && a) a = !1, h = "", h += l.toString(), p = c.peek().toString(); else { " " !== (g = l.toString()) && this.addToLineResult(i, n, g, o, hP.LayoutBreak | s), this.isOverloadWithPosition && (r = this.clientSize.width), h = "", l = "", o = 0, d = 0, u = 0, s = hP.None, p = a ? p : c.peekWord(), a = !0 } } else l += p, o = u, a ? (c.readWord(), p = c.peekWord()) : (c.read(), p = c.peek().toString()) } if (l.length > 0) { var g = l.toString(); this.addToLineResult(i, n, g, o, hP.NewLineBreak | hP.LastParagraphLine) } c.close() } i.layoutLines = []; for (var m = 0; m < n.length; m++)i.layoutLines.push(n[m]); return n = [], i }, e.prototype.addToLineResult = function (e, t, i, n, r) { var o = new gP; o.text = i, o.width = n, o.lineType = r, t.push(o); var s = e.actualSize; s.height += this.getLineHeight(), s.width = Math.max(s.width, n), e.size = s }, e.prototype.copyToResult = function (e, t, i, n) { var r = !0, o = null != this.format && !this.format.lineLimit, s = e.actualSize.height, a = this.size.height; if (this.pageHeight > 0 && a + this.rectangle.y > this.pageHeight && (a = this.rectangle.y - this.pageHeight, a = Math.max(a, -a)), n = 0, null != t.lines) for (var l = 0, h = t.lines.length; l < h; l++) { var d = s + t.lineHeight; if (!(d <= a || a <= 0 || o)) { r = !1; break } var c = t.lines[l]; n += c.text.length, c = this.trimLine(c, 0 === i.length), i.push(c); var p = e.actualSize; p.width = Math.max(p.width, c.width), e.size = p, s = d } if (s != e.size.height) { var u = e.actualSize; u.height = s, e.size = u } return { success: r, numInserted: n } }, e.prototype.finalizeResult = function (e, t) { e.layoutLines = []; for (var i = 0; i < t.length; i++)e.layoutLines.push(t[i]); e.layoutLineHeight = this.getLineHeight(), this.reader.end || (e.textRemainder = this.reader.readToEnd()), t = [] }, e.prototype.trimLine = function (e, t) { var i = e.text, n = e.width; e.lineType, hP.FirstParagraphLine, null == this.format || this.format.rightToLeft; return (i = i.trim()).length !== e.text.length && (n = this.getLineWidth(i), (e.lineType & hP.FirstParagraphLine) > 0 && (n += this.getLineIndent(t))), e.text = i, e.width = n, e }, e.prototype.getWrapType = function () { return null != this.format ? this.format.wordWrap : $k.Word }, e }(), uP = function () { function e() { } return Object.defineProperty(e.prototype, "remainder", { get: function () { return this.textRemainder }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "actualSize", { get: function () { return void 0 === this.size && (this.size = new Uk(0, 0)), this.size }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lines", { get: function () { return this.layoutLines }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineHeight", { get: function () { return this.layoutLineHeight }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "empty", { get: function () { return null == this.layoutLines || 0 === this.layoutLines.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineCount", { get: function () { return this.empty ? 0 : this.layoutLines.length }, enumerable: !0, configurable: !0 }), e }(), gP = function () { function e() { } return Object.defineProperty(e.prototype, "lineType", { get: function () { return this.type }, set: function (e) { this.type = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "text", { get: function () { return this.content }, set: function (e) { this.content = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this.lineWidth }, set: function (e) { this.lineWidth = e }, enumerable: !0, configurable: !0 }), e }(); !function (e) { e[e.None = 0] = "None", e[e.NewLineBreak = 1] = "NewLineBreak", e[e.LayoutBreak = 2] = "LayoutBreak", e[e.FirstParagraphLine = 4] = "FirstParagraphLine", e[e.LastParagraphLine = 8] = "LastParagraphLine" }(hP || (hP = {})); var mP, fP = function () { function e(e, t) { this.fontStyle = Hk.Regular, "number" == typeof e && void 0 === t ? this.fontSize = e : (this.fontSize = e, this.setStyle(t)) } return Object.defineProperty(e.prototype, "name", { get: function () { return this.metrics.name }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return this.fontSize }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.metrics.getHeight(null) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "style", { get: function () { return this.fontStyle }, set: function (e) { this.fontStyle = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bold", { get: function () { return (this.style & Hk.Bold) > 0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "italic", { get: function () { return (this.style & Hk.Italic) > 0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "strikeout", { get: function () { return (this.style & Hk.Strikeout) > 0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "underline", { get: function () { return (this.style & Hk.Underline) > 0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "metrics", { get: function () { return this.fontMetrics }, set: function (e) { this.fontMetrics = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.pdfFontInternals }, enumerable: !0, configurable: !0 }), e.prototype.measureString = function (e, t, i, n, r) { if ("string" == typeof e && void 0 === t) return this.measureString(e, null); if ("string" == typeof e && (t instanceof dP || null == t) && void 0 === i && void 0 === n) { var o = t; return this.measureString(e, o, 0, 0) } if ("string" == typeof e && (t instanceof dP || null == t) && "number" == typeof i && "number" == typeof n) { o = t; return this.measureString(e, 0, o, i, n) } if ("string" == typeof e && "number" == typeof t && (i instanceof dP || null == i) && "number" == typeof n && "number" == typeof r) { var s = new Uk(t, 0), a = i; return this.measureString(e, s, a, n, r) } if (null == e) throw Error('ArgumentNullException("text")'); o = t, a = i; var l = (new pP).layout(e, this, a, o, !1, new Uk(0, 0)); return n = e.length, r = l.empty ? 0 : l.lines.length, l.actualSize }, e.prototype.equalsTo = function (e) { return this.equalsToFont(e) }, e.prototype.getInternals = function () { return this.pdfFontInternals }, e.prototype.setInternals = function (e) { if (null == e) throw new Error("ArgumentNullException:internals"); this.pdfFontInternals = e }, e.prototype.setStyle = function (e) { this.fontStyle = e }, e.prototype.applyFormatSettings = function (e, t, i) { var n = i; if (null != t && i > 0 && (0 !== t.characterSpacing && (n += (e.length - 1) * t.characterSpacing), 0 !== t.wordSpacing)) { var r = cP.spaces; n += cP.getCharsCount(e, r) * t.wordSpacing } return n }, e.charSizeMultiplier = .001, e.syncObject = new Object, e }(), yP = function () { function e(e) { this.streamWriter = e } return Object.defineProperty(e.prototype, "document", { get: function () { return this.pdfDocument }, set: function (e) { this.pdfDocument = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.streamWriter.buffer.size }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "length", { get: function () { return this.streamWriter.buffer.size }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "stream", { get: function () { return this.streamWriter }, enumerable: !0, configurable: !0 }), e.prototype.write = function (e) { var t = e; this.streamWriter.write(t) }, e }(); !function (e) { e[e.None = 0] = "None", e[e.Registered = 1] = "Registered" }(mP || (mP = {})); var vP, wP = function () { function e() { this.objectCollections = [], this.mainObjectCollection = new _I, this.primitiveObjectCollection = new _I } return Object.defineProperty(e.prototype, "count", { get: function () { return this.objectCollections.length }, enumerable: !0, configurable: !0 }), e.prototype.items = function (e) { return this.objectCollections[e] }, Object.defineProperty(e.prototype, "outIsNew", { get: function () { return this.isNew }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { var t = new bP(e); this.objectCollections.push(t), this.primitiveObjectCollection.containsKey(e) || this.primitiveObjectCollection.setValue(e, this.objectCollections.length - 1), e.position = this.index = this.objectCollections.length - 1, e.status = mP.Registered }, e.prototype.lookFor = function (e) { var t = -1; if (-1 !== e.position) return e.position; if (this.primitiveObjectCollection.containsKey(e) && this.count === this.primitiveObjectCollection.size()) t = this.primitiveObjectCollection.getValue(e); else for (var i = this.count - 1; i >= 0; i--) { if (this.objectCollections[i].object === e) { t = i; break } } return t }, e.prototype.getReference = function (e, t) { this.index = this.lookFor(e); this.isNew = !1; return { reference: this.objectCollections[this.index].reference, wasNew: t } }, e.prototype.trySetReference = function (e, t, i) { this.index = this.lookFor(e); return this.objectCollections[this.index].setReference(t), !0 }, e.prototype.destroy = function () { for (var e = 0, t = this.objectCollections; e < t.length; e++) { var i = t[e]; void 0 !== i && (i.pdfObject.position = -1, i.pdfObject.isSaving = void 0, i.pdfObject.objectCollectionIndex = void 0, i.pdfObject.position = void 0) } this.objectCollections = [], this.mainObjectCollection = new _I, this.primitiveObjectCollection = new _I }, e }(), bP = function () { function e(e, t) { this.pdfObject = e, this.pdfReference = t } return Object.defineProperty(e.prototype, "object", { get: function () { return this.pdfObject }, set: function (e) { this.pdfObject = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "reference", { get: function () { return this.pdfReference }, enumerable: !0, configurable: !0 }), e.prototype.setReference = function (e) { this.pdfReference = e }, e }(), CP = function () { function e(e) { this.isStreamCopied = !1, e instanceof rO && (this.document = e) } return Object.defineProperty(e.prototype, "pdfObjects", { get: function () { return this.objects }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "crossTable", { get: function () { return this.pdfCrossTable }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "currentSavingObj", { get: function () { return this.currentSavingObject }, set: function (e) { this.currentSavingObject = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "catalog", { get: function () { return this.pdfCatalog }, set: function (e) { this.pdfCatalog = e }, enumerable: !0, configurable: !0 }), e.prototype.setMainObjectCollection = function (e) { this.objects = e }, e.prototype.setCrossTable = function (e) { this.pdfCrossTable = e }, e.prototype.setCatalog = function (e) { this.pdfCatalog = e }, e.prototype.save = function (e) { var t = this, i = new ak(!0), n = new lk(i); if (void 0 === e) { var r = new ak(!0), o = new lk(r); return new Promise(function (e, i) { var n = {}; n.blobData = new Blob([t.document.docSave(o, !0)], { type: "application/pdf" }), e(n) }) } this.document.docSave(n, e, !0) }, e.prototype.clone = function () { return this.document }, e }(); !function (e) { e[e.Free = 0] = "Free", e[e.Normal = 1] = "Normal", e[e.Packed = 2] = "Packed" }(vP || (vP = {})); var LP, MP = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SP = function (e) { function t() { var t = e.call(this) || this; return t.sections = null, t.tempDictionaryProperties = new qI, t.items.setValue((new qI).type, new YI("Catalog")), t } return MP(t, e), Object.defineProperty(t.prototype, "pages", { get: function () { return this.sections }, set: function (e) { e.element; this.sections = e, this.items.setValue(this.tempDictionaryProperties.pages, new Tk(e)) }, enumerable: !0, configurable: !0 }), t }(GI), xP = function () { function e() { this.objects = new _I, this.maxGenNumIndex = 0, this.objectCount = 0, this.dictionaryProperties = new qI } return Object.defineProperty(e.prototype, "isMerging", { get: function () { return this.merging }, set: function (e) { this.merging = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "trailer", { get: function () { return null == this.internalTrailer && (this.internalTrailer = new bk), this.internalTrailer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "document", { get: function () { return this.pdfDocument }, set: function (e) { this.pdfDocument = e, this.items = this.pdfDocument.pdfObjects }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "pdfObjects", { get: function () { return this.items }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollection", { get: function () { return this.pdfDocument.pdfObjects }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "count", { get: function () { return this.objectCount }, set: function (e) { this.objectCount = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "nextObjNumber", { get: function () { return this.count = this.count + 1, this.count }, enumerable: !0, configurable: !0 }), e.prototype.save = function (e, t) { this.saveHead(e), this.mappedReferences = null, this.objects.clear(), this.markTrailerReferences(), this.saveObjects(e); var i = this.count, n = e.position; this.registerObject(0, new xk(0, -1), !0); e.write(UI.xref), e.write(UI.newLine), this.saveSections(e), this.saveTrailer(e, this.count, 0), this.saveTheEndess(e, n), this.count = i; for (var r = 0; r < this.objectCollection.count; ++r) { this.objectCollection.items(r).object.isSaving = !1 } if (void 0 === t) return e.stream.buffer; e.stream.save(t) }, e.prototype.saveTheEndess = function (e, t) { e.write(UI.newLine + UI.startxref + UI.newLine), e.write(t.toString() + UI.newLine), e.write(UI.eof + UI.newLine) }, e.prototype.saveTrailer = function (e, t, i) { e.write(UI.trailer + UI.newLine); var n = this.trailer; n.items.setValue(this.dictionaryProperties.size, new ek(this.objectCount + 1)), (n = new GI(n)).setEncrypt(!1), n.save(e) }, e.prototype.saveSections = function (e) { var t = 0, i = 0; do { i = this.prepareSubsection(t), this.saveSubsection(e, t, i), t += i } while (0 !== i) }, e.prototype.saveSubsection = function (e, t, i) { if (!(i <= 0 || t >= this.count)) { e.write(t + " " + (i + 1) + UI.newLine); for (var n = t; n <= t + i; ++n) { var r = this.objects.getValue(n), o = ""; o = r.type === vP.Free ? this.getItem(r.offset, 65535, !0) : this.getItem(r.offset, r.generation, !1), e.write(o) } } }, e.prototype.getItem = function (e, t, i) { var n = "", r = 10 - e.toString().length; t <= 0 && (t = 0); for (var o = 5 - t.toString().length <= 0 ? 0 : 5 - t.toString().length, s = 0; s < r; s++)n += "0"; n = n + e.toString() + " "; for (s = 0; s < o; s++)n += "0"; return n = n + t.toString() + " ", n = n + (i ? UI.f : UI.n) + UI.newLine }, e.prototype.prepareSubsection = function (e) { for (var t, i = 0, n = this.count, r = 0; r < this.document.pdfObjects.count; r++)this.document.pdfObjects.items(r).reference.toString().split(" "); if (e >= n) return i; for (t = e; t < n; ++t)break; for (e = t; t < n; ++t)++i; return i }, e.prototype.markTrailerReferences = function () { this.trailer.items.keys(), this.trailer.items.values() }, e.prototype.saveHead = function (e) { var t = this.generateFileVersion(e.document); e.write("%PDF-" + t), e.write(UI.newLine) }, e.prototype.generateFileVersion = function (e) { return "1." + 4..toString() }, e.prototype.getReference = function (e, t) { if (void 0 === t) { return this.getReference(e, !1) } return this.getSubReference(e, t) }, e.prototype.getSubReference = function (e, t) { var i, n = !1, r = null; if (this.items.count > 0 && e.objectCollectionIndex > 0 && this.items.count > e.objectCollectionIndex - 1) { var o = this.document.pdfObjects.getReference(e, i); r = o.reference, i = o.wasNew } if (i = null == r && e.status !== mP.Registered, null == r) { var s = this.nextObjNumber; r = new xk(s, 0); if (i) { this.document.pdfObjects.add(e), this.document.pdfObjects.trySetReference(e, r, void 0); var a = this.document.pdfObjects.count - 1, l = this.document.pdfObjects.objectCollections[a].reference.objNumber, h = this.document.pdfObjects.objectCollections[this.document.pdfObjects.count - 1]; this.document.pdfObjects.mainObjectCollection.setValue(l, h), e.position = -1 } else this.document.pdfObjects.trySetReference(e, r, void 0); e.objectCollectionIndex = r.objNumber, e.status = mP.None, n = !0 } return n || this.bForceNew, r }, e.prototype.saveObjects = function (e) { for (var t = this.objectCollection, i = 0; i < t.count; ++i) { var n = t.items(i).object; n.isSaving = !0, this.saveIndirectObject(n, e) } }, e.prototype.saveIndirectObject = function (e, t) { var i = this.getReference(e); e instanceof SP && this.trailer.items.setValue(this.dictionaryProperties.root, i), this.pdfDocument.currentSavingObj = i; e.getArchive(), this.registerObject(t.position, i), this.doSaveObject(e, i, t) }, e.prototype.doSaveObject = function (e, t, i) { i.length; i.write(t.objNumber.toString()), i.write(UI.whiteSpace), i.write(t.genNumber.toString()), i.write(UI.whiteSpace), i.write(UI.obj), i.write(UI.newLine), e.save(i); i.stream; i.write(UI.endObj), i.write(UI.newLine) }, e.prototype.registerObject = function (e, t, i) { "boolean" == typeof i ? (this.objects.setValue(t.objNumber, new TP(e, t, i)), this.maxGenNumIndex = Math.max(this.maxGenNumIndex, t.genNumber)) : void 0 === i && (this.objects.setValue(t.objNumber, new TP(e, t)), this.maxGenNumIndex = Math.max(this.maxGenNumIndex, t.genNumber)) }, e.dereference = function (e) { return null != e && (e = e.object), e }, e }(), TP = function () { function e(e, t, i) { var n = e; this.offsetNumber = n; var r = t; this.generation = r.genNumber, this.object = r.objNumber, this.type = void 0 === i ? vP.Normal : vP.Free } return Object.defineProperty(e.prototype, "objectNumber", { get: function () { return this.object }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "offset", { get: function () { return this.offsetNumber }, enumerable: !0, configurable: !0 }), e }(), DP = function () { function e() { } return e.letter = new Uk(612, 792), e.note = new Uk(540, 720), e.legal = new Uk(612, 1008), e.a0 = new Uk(2380, 3368), e.a1 = new Uk(1684, 2380), e.a2 = new Uk(1190, 1684), e.a3 = new Uk(842, 1190), e.a4 = new Uk(595, 842), e.a5 = new Uk(421, 595), e.a6 = new Uk(297, 421), e.a7 = new Uk(210, 297), e.a8 = new Uk(148, 210), e.a9 = new Uk(105, 148), e.a10 = new Uk(74, 105), e.b0 = new Uk(2836, 4008), e.b1 = new Uk(2004, 2836), e.b2 = new Uk(1418, 2004), e.b3 = new Uk(1002, 1418), e.b4 = new Uk(709, 1002), e.b5 = new Uk(501, 709), e.archE = new Uk(2592, 3456), e.archD = new Uk(1728, 2592), e.archC = new Uk(1296, 1728), e.archB = new Uk(864, 1296), e.archA = new Uk(648, 864), e.flsa = new Uk(612, 936), e.halfLetter = new Uk(396, 612), e.letter11x17 = new Uk(792, 1224), e.ledger = new Uk(1224, 792), e }(); !function (e) { e[e.Portrait = 0] = "Portrait", e[e.Landscape = 1] = "Landscape" }(LP || (LP = {})); var AP; !function (e) { e[e.RotateAngle0 = 0] = "RotateAngle0", e[e.RotateAngle90 = 1] = "RotateAngle90", e[e.RotateAngle180 = 2] = "RotateAngle180", e[e.RotateAngle270 = 3] = "RotateAngle270" }(AP || (AP = {})); var EP; !function (e) { e[e.None = 0] = "None", e[e.Numeric = 1] = "Numeric", e[e.LowerLatin = 2] = "LowerLatin", e[e.LowerRoman = 3] = "LowerRoman", e[e.UpperLatin = 4] = "UpperLatin", e[e.UpperRoman = 5] = "UpperRoman" }(EP || (EP = {})); var jP; !function (e) { e[e.None = 0] = "None", e[e.Bottom = 1] = "Bottom", e[e.Top = 2] = "Top", e[e.Left = 3] = "Left", e[e.Right = 4] = "Right", e[e.Fill = 5] = "Fill" }(jP || (jP = {})); var IP; !function (e) { e[e.None = 0] = "None", e[e.TopLeft = 1] = "TopLeft", e[e.TopCenter = 2] = "TopCenter", e[e.TopRight = 3] = "TopRight", e[e.MiddleLeft = 4] = "MiddleLeft", e[e.MiddleCenter = 5] = "MiddleCenter", e[e.MiddleRight = 6] = "MiddleRight", e[e.BottomLeft = 7] = "BottomLeft", e[e.BottomCenter = 8] = "BottomCenter", e[e.BottomRight = 9] = "BottomRight" }(IP || (IP = {})); var kP; !function (e) { e[e.None = 0] = "None", e[e.Top = 1] = "Top", e[e.Bottom = 2] = "Bottom", e[e.Left = 3] = "Left", e[e.Right = 4] = "Right" }(kP || (kP = {})); var PP, NP = function () { function e() { this.pdfMargin = 40, this.setMargins(this.pdfMargin) } return Object.defineProperty(e.prototype, "left", { get: function () { return this.leftMargin }, set: function (e) { this.leftMargin = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "top", { get: function () { return this.topMargin }, set: function (e) { this.topMargin = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "right", { get: function () { return this.rightMargin }, set: function (e) { this.rightMargin = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottom", { get: function () { return this.bottomMargin }, set: function (e) { this.bottomMargin = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "all", { set: function (e) { this.setMargins(e) }, enumerable: !0, configurable: !0 }), e.prototype.setMargins = function (e, t, i, n) { void 0 === t ? this.leftMargin = this.topMargin = this.rightMargin = this.bottomMargin = e : void 0 === i ? (this.leftMargin = this.rightMargin = e, this.bottomMargin = this.topMargin = t) : (this.leftMargin = e, this.topMargin = t, this.rightMargin = i, this.bottomMargin = n) }, e.prototype.clone = function () { return this }, e }(), OP = function () { function e(e) { this.pageMargins = new NP, this.pageSize = DP.a4, this.rotateAngle = AP.RotateAngle0, this.pageOrientation = LP.Portrait, this.pageOrigin = new Yk(0, 0), this.isRotation = !1, "number" == typeof e && this.pageMargins.setMargins(e) } return Object.defineProperty(e.prototype, "size", { get: function () { return this.pageSize }, set: function (e) { this.setSize(e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "orientation", { get: function () { return this.pageOrientation }, set: function (e) { this.pageOrientation !== e && (this.pageOrientation = e, this.updateSize(e)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "margins", { get: function () { return this.pageMargins }, set: function (e) { this.pageMargins = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this.pageSize.width }, set: function (e) { this.pageSize.width = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.pageSize.height }, set: function (e) { this.pageSize.height = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "origin", { get: function () { return this.pageOrigin }, set: function (e) { this.pageOrigin = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rotate", { get: function () { return this.rotateAngle }, set: function (e) { this.rotateAngle = e, this.isRotation = !0 }, enumerable: !0, configurable: !0 }), e.prototype.updateSize = function (e) { var t = Math.min(this.pageSize.width, this.pageSize.height), i = Math.max(this.pageSize.width, this.pageSize.height); switch (e) { case LP.Portrait: this.pageSize = new Uk(t, i); break; case LP.Landscape: this.pageSize = new Uk(i, t) } }, e.prototype.clone = function () { return this.pageMargins = this.pageMargins.clone(), this }, e.prototype.getActualSize = function () { var e = this.width - (this.margins.left + this.margins.right), t = this.height - (this.margins.top + this.margins.bottom); return new Uk(e, t) }, e.prototype.setSize = function (e) { var t = Math.min(e.width, e.height), i = Math.max(e.width, e.height); this.orientation === LP.Portrait ? this.pageSize = new Uk(t, i) : this.pageSize = new Uk(i, t) }, e }(), RP = function () { function e(e) { if (null == e) throw new Error("ArgumentNullException:stream"); this.stream = e } return e.prototype.clear = function () { this.stream.clearStream() }, e.prototype.setGraphicsState = function (e) { e instanceof YI ? (this.stream.write(e.toString()), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setGraphicsState)) : (this.stream.write(UI.slash), this.stream.write(e), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setGraphicsState)) }, e.prototype.executeObject = function (e) { this.stream.write(e.toString()), this.stream.write(UI.whiteSpace), this.writeOperator(UI.paintXObject), this.stream.write(UI.newLine) }, e.prototype.closePath = function () { this.writeOperator(UI.closePath) }, e.prototype.clipPath = function (e) { this.stream.write(UI.clipPath), e && this.stream.write(UI.evenOdd), this.stream.write(UI.whiteSpace), this.stream.write(UI.endPath), this.stream.write(UI.newLine) }, e.prototype.closeFillStrokePath = function (e) { this.stream.write(UI.closeFillStrokePath), e ? (this.stream.write(UI.evenOdd), this.stream.write(UI.newLine)) : this.stream.write(UI.newLine) }, e.prototype.fillStrokePath = function (e) { this.stream.write(UI.fillStroke), e ? (this.stream.write(UI.evenOdd), this.stream.write(UI.newLine)) : this.stream.write(UI.newLine) }, e.prototype.fillPath = function (e) { this.stream.write(UI.fill), e ? (this.stream.write(UI.evenOdd), this.stream.write(UI.newLine)) : this.stream.write(UI.newLine) }, e.prototype.endPath = function () { this.writeOperator(UI.n) }, e.prototype.closeFillPath = function (e) { this.writeOperator(UI.closePath), this.stream.write(UI.fill), e ? (this.stream.write(UI.evenOdd), this.stream.write(UI.newLine)) : this.stream.write(UI.newLine) }, e.prototype.closeStrokePath = function () { this.writeOperator(UI.closeStrokePath) }, e.prototype.setTextScaling = function (e) { this.stream.write(ek.floatToString(e)), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setTextScaling) }, e.prototype.strokePath = function () { this.writeOperator(UI.stroke) }, e.prototype.restoreGraphicsState = function () { this.writeOperator(UI.restoreState) }, e.prototype.saveGraphicsState = function () { this.writeOperator(UI.saveState) }, e.prototype.startNextLine = function (e, t) { void 0 === e ? this.writeOperator(UI.goToNextLine) : e instanceof Yk ? (this.writePoint(e), this.writeOperator(UI.setCoords)) : (this.writePoint(e, t), this.writeOperator(UI.setCoords)) }, e.prototype.showText = function (e) { this.checkTextParam(e), this.writeText(e), this.writeOperator(UI.setText) }, e.prototype.setLeading = function (e) { this.stream.write(ek.floatToString(e)), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setTextLeading) }, e.prototype.beginPath = function (e, t) { this.writePoint(e, t), this.writeOperator(UI.beginPath) }, e.prototype.beginText = function () { this.writeOperator(UI.beginText) }, e.prototype.endText = function () { this.writeOperator(UI.endText) }, e.prototype.appendRectangle = function (e, t, i, n) { e instanceof qk ? this.appendRectangle(e.x, e.y, e.width, e.height) : (this.writePoint(e, t), this.writePoint(i, n), this.writeOperator(UI.appendRectangle)) }, e.prototype.appendLineSegment = function (e, t) { e instanceof Yk ? this.appendLineSegment(e.x, e.y) : (this.writePoint(e, t), this.writeOperator(UI.appendLineSegment)) }, e.prototype.setTextRenderingMode = function (e) { this.stream.write(e.toString()), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setRenderingMode) }, e.prototype.setCharacterSpacing = function (e) { this.stream.write(ek.floatToString(e)), this.stream.write(UI.whiteSpace), this.stream.write(UI.setCharacterSpace), this.stream.write(UI.newLine) }, e.prototype.setWordSpacing = function (e) { this.stream.write(ek.floatToString(e)), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setWordSpace) }, e.prototype.showNextLineText = function (e, t) { e instanceof Sk ? (this.checkTextParam(e), this.writeText(e), this.writeOperator(UI.setTextOnNewLine)) : (this.checkTextParam(e), this.writeText(e, t), this.writeOperator(UI.setTextOnNewLine)) }, e.prototype.setColorSpace = function (e, t) { if (e instanceof YI && "boolean" == typeof t) { var i = e, n = (r = t) ? UI.selectcolorspaceforstroking : UI.selectcolorspacefornonstroking; this.stream.write(i.toString()), this.stream.write(UI.whiteSpace), this.stream.write(n), this.stream.write(UI.newLine) } else { i = e; var r = t; this.setColorSpace(new YI(i), r) } }, e.prototype.modifyCtm = function (e) { if (null == e) throw new Error("ArgumentNullException:matrix"); this.stream.write(e.toString()), this.stream.write(UI.whiteSpace), this.writeOperator(UI.modifyCtm) }, e.prototype.setFont = function (e, t, i) { if ("string" == typeof t) this.setFont(e, new YI(t), i); else { if (null == e) throw new Error("ArgumentNullException:font"); this.stream.write(t.toString()), this.stream.write(UI.whiteSpace), this.stream.write(ek.floatToString(i)), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setFont) } }, e.prototype.writeOperator = function (e) { this.stream.write(e), this.stream.write(UI.newLine) }, e.prototype.checkTextParam = function (e) { if (null == e) throw new Error("ArgumentNullException:text"); if ("string" == typeof e && "" === e) throw new Error("ArgumentException:The text can not be an empty string, text") }, e.prototype.writeText = function (e, t) { if (e instanceof Sk && void 0 === t) this.stream.write(e.pdfEncode()); else { var i = void 0, n = void 0; t ? (i = Sk.hexStringMark[0], n = Sk.hexStringMark[1]) : (i = Sk.stringMark[0], n = Sk.stringMark[1]), this.stream.write(i), this.stream.write(e), this.stream.write(n) } }, e.prototype.writePoint = function (e, t) { if (e instanceof Yk && void 0 === t) this.writePoint(e.x, e.y); else { var i = e; this.stream.write(ek.floatToString(i)), this.stream.write(UI.whiteSpace), t = this.updateY(t), this.stream.write(ek.floatToString(t)), this.stream.write(UI.whiteSpace) } }, e.prototype.updateY = function (e) { return -e }, e.prototype.write = function (e) { var t = ""; t += e, t += UI.newLine, this.writeOperator(t) }, e.prototype.writeComment = function (e) { if (!(null != e && e.length > 0)) throw new Error("Invalid comment"); var t = ""; t += UI.comment, t += UI.whiteSpace, t += e, this.writeOperator(t) }, e.prototype.setColorAndSpace = function (e, t, i) { e.isEmpty || (this.stream.write(e.toString(t, i)), this.stream.write(UI.newLine)) }, e.prototype.setLineDashPattern = function (e, t) { this.setLineDashPatternHelper(e, t) }, e.prototype.setLineDashPatternHelper = function (e, t) { var i = "["; if (e.length > 1) for (var n = 0; n < e.length; n++)n === e.length - 1 ? i += e[n].toString() : i += e[n].toString() + " "; i += "] ", i += t.toString(), i += " " + UI.setDashPattern, this.stream.write(i), this.stream.write(UI.newLine) }, e.prototype.setMiterLimit = function (e) { this.stream.write(ek.floatToString(e)), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setMiterLimit) }, e.prototype.setLineWidth = function (e) { this.stream.write(ek.floatToString(e)), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setLineWidth) }, e.prototype.setLineCap = function (e) { this.stream.write(e.toString()), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setLineCapStyle) }, e.prototype.setLineJoin = function (e) { this.stream.write(e.toString()), this.stream.write(UI.whiteSpace), this.writeOperator(UI.setLineJoinStyle) }, Object.defineProperty(e.prototype, "position", { get: function () { return this.stream.position }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "length", { get: function () { var e = 0; if (0 !== this.stream.data.length && -1 !== this.stream.data.length) for (var t = 0; t < this.stream.data.length; t++)e += this.stream.data[t].length; return e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "document", { get: function () { return null }, enumerable: !0, configurable: !0 }), e }(), zP = function () { function e(e, t) { this.pdfColor = new _k(0, 0, 0), this.dashOffsetValue = 0, this.penDashPattern = [0], this.pdfDashStyle = Ok.Solid, this.pdfLineCap = 0, this.pdfLineJoin = 0, this.penWidth = 1, this.internalMiterLimit = 0, this.colorSpace = zk.Rgb, e instanceof Qk ? this.setBrush(e) : e instanceof _k && (this.color = e), "number" == typeof t && (this.width = t) } return Object.defineProperty(e.prototype, "color", { get: function () { return this.pdfColor }, set: function (e) { this.pdfColor = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dashOffset", { get: function () { return void 0 === this.dashOffsetValue || null == this.dashOffsetValue ? 0 : this.dashOffsetValue }, set: function (e) { this.dashOffsetValue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dashPattern", { get: function () { return this.penDashPattern }, set: function (e) { this.penDashPattern = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dashStyle", { get: function () { return this.pdfDashStyle }, set: function (e) { if (this.pdfDashStyle !== e) switch (this.pdfDashStyle = e, this.pdfDashStyle) { case Ok.Custom: break; case Ok.Dash: this.penDashPattern = [3, 1]; break; case Ok.Dot: this.penDashPattern = [1, 1]; break; case Ok.DashDot: this.penDashPattern = [3, 1, 1, 1]; break; case Ok.DashDotDot: this.penDashPattern = [3, 1, 1, 1, 1, 1]; break; case Ok.Solid: break; default: this.pdfDashStyle = Ok.Solid, this.penDashPattern = [0] } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineCap", { get: function () { return this.pdfLineCap }, set: function (e) { this.pdfLineCap = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "lineJoin", { get: function () { return this.pdfLineJoin }, set: function (e) { this.pdfLineJoin = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "miterLimit", { get: function () { return this.internalMiterLimit }, set: function (e) { this.internalMiterLimit = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this.penWidth }, set: function (e) { this.penWidth = e }, enumerable: !0, configurable: !0 }), e.prototype.clone = function () { return this }, e.prototype.setBrush = function (e) { var t = e; this.color = t.color, this.pdfBrush = t }, e.prototype.monitorChanges = function (e, t, i, n, r, o) { n = !0, this.dashControl(e, n, t), t.setLineWidth(this.width), t.setLineJoin(this.lineJoin), t.setLineCap(this.lineCap); var s = this.miterLimit; s > 0 && t.setMiterLimit(s); this.pdfBrush; return t.setColorAndSpace(this.color, r, !0), !0 }, e.prototype.dashControl = function (e, t, i) { t = !0; var n = this.width, r = this.getPattern(); return i.setLineDashPattern(r, this.dashOffset * n), t }, e.prototype.getPattern = function () { for (var e = this.dashPattern, t = 0; t < e.length; ++t)e[t] *= this.width; return e }, e }(), BP = function () { function e(e) { this.radDegFactor = 180 / Math.PI, this.transformationMatrix = new FP(1, 0, 0, void 0 === e ? 1 : -1, 0, 0) } return Object.defineProperty(e.prototype, "matrix", { get: function () { return this.transformationMatrix }, set: function (e) { this.transformationMatrix = e }, enumerable: !0, configurable: !0 }), e.prototype.translate = function (e, t) { this.transformationMatrix.translate(e, t) }, e.prototype.scale = function (e, t) { this.transformationMatrix.elements[0] = e, this.transformationMatrix.elements[3] = t }, e.prototype.rotate = function (e) { e = e * Math.PI / 180, this.transformationMatrix.elements[0] = Math.cos(e), this.transformationMatrix.elements[1] = Math.sin(e), this.transformationMatrix.elements[2] = -Math.sin(e), this.transformationMatrix.elements[3] = Math.cos(e) }, e.prototype.toString = function () { for (var e = "", t = 0, i = this.transformationMatrix.elements.length; t < i; t++) { this.matrix.elements[t]; e += ek.floatToString(this.transformationMatrix.elements[t]), e += " " } return e }, e.prototype.multiply = function (e) { this.transformationMatrix.multiply(e.matrix) }, e.degreesToRadians = function (e) { return this.degRadFactor * e }, e.prototype.radiansToDegrees = function (e) { return this.radDegFactor * e }, e.prototype.clone = function () { return this }, e.degRadFactor = Math.PI / 180, e }(), FP = function () { function e(e, t, i, n, r, o) { void 0 === e ? this.metrixElements = [] : "number" == typeof e ? (this.metrixElements = [], this.metrixElements.push(e), this.metrixElements.push(t), this.metrixElements.push(i), this.metrixElements.push(n), this.metrixElements.push(r), this.metrixElements.push(o)) : this.metrixElements = e } return Object.defineProperty(e.prototype, "elements", { get: function () { return this.metrixElements }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "offsetX", { get: function () { return this.metrixElements[4] }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "offsetY", { get: function () { return this.metrixElements[5] }, enumerable: !0, configurable: !0 }), e.prototype.translate = function (e, t) { this.metrixElements[4] = e, this.metrixElements[5] = t }, e.prototype.transform = function (e) { var t = e.x, i = e.y, n = t * this.elements[0] + i * this.elements[2] + this.offsetX, r = t * this.elements[1] + i * this.elements[3] + this.offsetY; return new Yk(n, r) }, e.prototype.multiply = function (e) { var t = []; t.push(this.elements[0] * e.elements[0] + this.elements[1] * e.elements[2]), t[1] = this.elements[0] * e.elements[1] + this.elements[1] * e.elements[3], t[2] = this.elements[2] * e.elements[0] + this.elements[3] * e.elements[2], t[3] = this.elements[2] * e.elements[1] + this.elements[3] * e.elements[3], t[4] = this.offsetX * e.elements[0] + this.offsetY * e.elements[2] + e.offsetX, t[5] = this.offsetX * e.elements[1] + this.offsetY * e.elements[3] + e.offsetY; for (var i = 0; i < t.length; i++)this.elements[i] = t[i] }, e.prototype.dispose = function () { this.metrixElements = null }, e.prototype.clone = function () { return new e(this.metrixElements) }, e }(), VP = function () { return function () { this.pdf = "PDF", this.text = "Text", this.imageB = "ImageB", this.imageC = "ImageC", this.imageI = "ImageI" } }(), WP = function () { function e() { this.mKeys = [], this.mValues = [] } return e.prototype.size = function () { return this.mKeys.length }, e.prototype.add = function (e, t) { if (void 0 === e || null === e || void 0 === t || null === t) throw new ReferenceError("Provided key or value is not valid."); if (this.mKeys.indexOf(e) < 0) return this.mKeys.push(e), this.mValues.push(t), 1; throw new RangeError("An item with the same key has already been added.") }, e.prototype.keys = function () { return this.mKeys }, e.prototype.values = function () { return this.mValues }, e.prototype.getValue = function (e) { if (void 0 === e || null === e) throw new ReferenceError("Provided key is not valid."); var t = this.mKeys.indexOf(e); if (t < 0) throw new RangeError("No item with the specified key has been added."); return this.mValues[t] }, e.prototype.setValue = function (e, t) { if (void 0 === e || null === e) throw new ReferenceError("Provided key is not valid."); var i = this.mKeys.indexOf(e); i < 0 ? (this.mKeys.push(e), this.mValues.push(t)) : this.mValues[i] = t }, e.prototype.remove = function (e) { if (void 0 === e || null === e) throw new ReferenceError("Provided key is not valid."); var t = this.mKeys.indexOf(e); if (t < 0) throw new RangeError("No item with the specified key has been added."); return this.mKeys.splice(t, 1), this.mValues.splice(t, 1), !0 }, e.prototype.containsKey = function (e) { if (void 0 === e || null === e) throw new ReferenceError("Provided key is not valid."); return !(this.mKeys.indexOf(e) < 0) }, e.prototype.clear = function () { this.mKeys = [], this.mValues = [] }, e }(), HP = function () { function e(e, t, i) { this.dictionary = new GI, this.dictionaryProperties = new qI, this.dictionary.items.setValue(this.dictionaryProperties.CA, new ek(e)), this.dictionary.items.setValue(this.dictionaryProperties.ca, new ek(t)), this.dictionary.items.setValue(this.dictionaryProperties.BM, new YI(i.toString())) } return Object.defineProperty(e.prototype, "element", { get: function () { return this.dictionary }, enumerable: !0, configurable: !0 }), e }(), _P = function () { function e() { this.automaticFieldsInformation = [] } return Object.defineProperty(e.prototype, "automaticFields", { get: function () { return this.automaticFieldsInformation }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { return this.automaticFields.push(e) }, e }(), YP = function () { function e() { } return e.prototype.drawHelper = function (e, t, i) { var n = 0 !== t || 0 !== i, r = null; n && (r = e.save(), e.translateTransform(t, i)), this.drawInternal(e), n && e.restore(r) }, e }(), UP = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), qP = function (e) { function t() { var t = e.call(this) || this; return t.internalBounds = new qk(0, 0, 0, 0), t.internalTemplateSize = new Uk(0, 0), t } return UP(t, e), Object.defineProperty(t.prototype, "bounds", { get: function () { return this.internalBounds }, set: function (e) { this.internalBounds = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "size", { get: function () { return new Uk(this.bounds.width, this.bounds.height) }, set: function (e) { this.bounds.width = e.width, this.bounds.height = e.height }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "location", { get: function () { return new Yk(this.bounds.x, this.bounds.y) }, set: function (e) { this.bounds.x = e.x, this.bounds.y = e.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "font", { get: function () { return this.internalFont }, set: function (e) { this.internalFont = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "brush", { get: function () { return this.internalBrush }, set: function (e) { this.internalBrush = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "pen", { get: function () { return this.internalPen }, set: function (e) { this.internalPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "stringFormat", { get: function () { return this.internalStringFormat }, set: function (e) { this.internalStringFormat = e }, enumerable: !0, configurable: !0 }), t.prototype.performDrawHelper = function (e, t, i, n) { if (0 === this.bounds.height || 0 === this.bounds.width) { var r = this.getValue(e); this.internalTemplateSize = this.getFont().measureString(r, this.size, this.stringFormat) } }, t.prototype.draw = function (e, t, i) { if (void 0 === t) { var n = new Yk(0, 0); this.draw(e, n) } else if (t instanceof Yk) this.draw(e, t.x, t.y); else { this.drawHelper(e, t, i); var r = new GP(this, new Yk(t, i)); e.automaticFields.add(r) } }, t.prototype.getSize = function () { return 0 === this.bounds.height || 0 === this.bounds.width ? this.internalTemplateSize : this.size }, t.prototype.drawInternal = function (e) { }, t.prototype.getBrush = function () { return void 0 === this.internalBrush || null == this.internalBrush ? new Jk(new _k(0, 0, 0)) : this.internalBrush }, t.prototype.getFont = function () { return void 0 === this.internalFont || null == this.internalFont ? rO.defaultFont : this.internalFont }, t.prototype.getPageFromGraphics = function (e) { if (void 0 !== e.page && null !== e.page) { return e.page } return e.currentPage }, t }(YP), GP = function () { function e(t, i, n, r) { this.pageNumberFieldLocation = new Yk, this.pageNumberField = null, this.scaleX = 1, this.scaleY = 1, void 0 === i && t instanceof e ? (this.pageNumberField = t.field, this.pageNumberFieldLocation = t.location, this.scaleX = t.scalingX, this.scaleY = t.scalingY) : void 0 === n && i instanceof Yk && t instanceof qP ? (this.pageNumberField = t, this.pageNumberFieldLocation = i) : (this.pageNumberField = t, this.pageNumberFieldLocation = i, this.scaleX = n, this.scaleY = r) } return Object.defineProperty(e.prototype, "location", { get: function () { return this.pageNumberFieldLocation }, set: function (e) { this.pageNumberFieldLocation = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "field", { get: function () { return this.pageNumberField }, set: function (e) { this.pageNumberField = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "scalingX", { get: function () { return this.scaleX }, set: function (e) { this.scaleX = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "scalingY", { get: function () { return this.scaleY }, set: function (e) { this.scaleY = e }, enumerable: !0, configurable: !0 }), e }(), QP = function () { function e(e) { this.mPosition = 0, this.buffer = new Uint8Array(e), this.dataView = new DataView(this.buffer.buffer) } return Object.defineProperty(e.prototype, "position", { get: function () { return this.mPosition }, set: function (e) { this.mPosition = e }, enumerable: !0, configurable: !0 }), e.prototype.read = function (e, t, i) { for (var n = t; n < i; n++) { var r = this.position; e.buffer[n] = this.readByte(r), this.position++ } }, e.prototype.getBuffer = function (e) { return this.buffer[e] }, e.prototype.writeFromBase64String = function (e) { var t = this.encodedString(e); this.buffer = t }, e.prototype.encodedString = function (e) { var t, i, n, r, o, s = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", a = 0, l = 0, h = 3 * (e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "")).length / 4; e.charAt(e.length - 1) === s.charAt(64) && h--; for (var d = new Uint8Array(0 | h); a < e.length;)t = s.indexOf(e.charAt(a++)) << 2 | (r = s.indexOf(e.charAt(a++))) >> 4, i = (15 & r) << 4 | (o = s.indexOf(e.charAt(a++))) >> 2, n = (3 & o) << 6 | s.indexOf(e.charAt(a++)), d[l++] = t, d[l++] = i, d[l++] = n; return d }, e.prototype.readByte = function (e) { return this.buffer[e] }, Object.defineProperty(e.prototype, "internalBuffer", { get: function () { return this.buffer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "count", { get: function () { return this.buffer.byteLength }, enumerable: !0, configurable: !0 }), e }(), XP = function () { function e(e) { this.currentPosition = -1, this.value = e } return Object.defineProperty(e.prototype, "status", { get: function () { return this.objectStatus }, set: function (e) { this.objectStatus = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isSaving", { get: function () { return this.saving }, set: function (e) { this.saving = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "objectCollectionIndex", { get: function () { return this.index }, set: function (e) { this.index = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return this.currentPosition }, set: function (e) { this.currentPosition = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clonedObject", { get: function () { return null }, enumerable: !0, configurable: !0 }), e.prototype.save = function (e) { e.write(this.boolToStr(this.value)) }, e.prototype.clone = function (t) { return new e(this.value) }, e.prototype.boolToStr = function (e) { return e ? "true" : "false" }, e }(); !function (e) { e[e.Unknown = 0] = "Unknown", e[e.Bmp = 1] = "Bmp", e[e.Emf = 2] = "Emf", e[e.Gif = 3] = "Gif", e[e.Jpeg = 4] = "Jpeg", e[e.Png = 5] = "Png", e[e.Wmf = 6] = "Wmf", e[e.Icon = 7] = "Icon" }(PP || (PP = {})); var JP, ZP = function () { function e(e) { this.mFormat = PP.Unknown, this.mbitsPerComponent = 8, this.dictionaryProperties = new qI, this.mStream = e, this.initialize() } return Object.defineProperty(e.prototype, "height", { get: function () { return this.mHeight }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this.mWidth }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bitsPerComponent", { get: function () { return this.mbitsPerComponent }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return this.mImageData.count }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "imageData", { get: function () { return this.mImageData }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "imageDataAsNumberArray", { get: function () { return this.mImageData.internalBuffer.buffer }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { this.mFormat === PP.Unknown && this.checkIfJpeg() && (this.mFormat = PP.Jpeg, this.parseJpegImage()), this.reset(), this.mImageData = new QP(this.mStream.count), this.mStream.read(this.mImageData, 0, this.mImageData.count) }, e.prototype.reset = function () { this.mStream.position = 0 }, e.prototype.parseJpegImage = function () { this.reset(); var e = new QP(this.mStream.count); this.mStream.read(e, 0, e.count); var t = 4; if ("J" === String.fromCharCode(e.getBuffer(t + 2)) && "F" === String.fromCharCode(e.getBuffer(t + 3)) && "I" === String.fromCharCode(e.getBuffer(t + 4)) && "F" === String.fromCharCode(e.getBuffer(t + 5)) && 0 === e.getBuffer(t + 6)) for (var i = 256 * e.getBuffer(t) + e.getBuffer(t + 1); t + i < e.count;) { if (t += i, 192 === e.getBuffer(t + 1)) return this.mHeight = 256 * e.getBuffer(t + 5) + e.getBuffer(t + 6), void (this.mWidth = 256 * e.getBuffer(t + 7) + e.getBuffer(t + 8)); t += 2, i = 256 * e.getBuffer(t) + e.getBuffer(t + 1) } }, Object.defineProperty(e.prototype, "format", { get: function () { return this.mFormat }, enumerable: !0, configurable: !0 }), e.prototype.checkIfJpeg = function () { this.reset(); for (var t = 0; t < e.mJpegHeader.length; t++) { if (e.mJpegHeader[t] !== this.mStream.readByte(t)) return !1; this.mStream.position++ } return !0 }, e.prototype.getImageDictionary = function () { if (this.mFormat === PP.Jpeg) { this.imageData.internalBuffer.length; this.imageStream = new bk, this.imageStream.isImage = !0; for (var e = "", t = "", i = 0; i < this.imageDataAsNumberArray.byteLength; i++)e += String.fromCharCode(null, this.mStream.readByte(i)); for (i = 0; i < e.length; i++)i % 2 != 0 && (t += e[i]); return this.imageStream.data = [t], this.imageStream.compress = !1, this.imageStream.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.xObject)), this.imageStream.items.setValue(this.dictionaryProperties.subtype, new YI(this.dictionaryProperties.image)), this.imageStream.items.setValue(this.dictionaryProperties.width, new ek(this.width)), this.imageStream.items.setValue(this.dictionaryProperties.height, new ek(this.height)), this.imageStream.items.setValue(this.dictionaryProperties.bitsPerComponent, new ek(this.bitsPerComponent)), this.imageStream.items.setValue(this.dictionaryProperties.filter, new YI(this.dictionaryProperties.dctdecode)), this.imageStream.items.setValue(this.dictionaryProperties.colorSpace, new YI(this.getColorSpace())), this.imageStream.items.setValue(this.dictionaryProperties.decodeParms, this.getDecodeParams()), this.imageStream } return this.imageStream }, e.prototype.getColorSpace = function () { return this.dictionaryProperties.deviceRgb }, e.prototype.getDecodeParams = function () { var e = new GI; return e.items.setValue(this.dictionaryProperties.columns, new ek(this.width)), e.items.setValue(this.dictionaryProperties.blackIs1, new XP(!0)), e.items.setValue(this.dictionaryProperties.k, new ek(-1)), e.items.setValue(this.dictionaryProperties.predictor, new ek(15)), e.items.setValue(this.dictionaryProperties.bitsPerComponent, new ek(this.bitsPerComponent)), e }, e.mPngHeader = [137, 80, 78, 71, 13, 10, 26, 10], e.mJpegHeader = [255, 216], e.GIF_HEADER = "G,I,F,8", e.BMP_HEADER = "B,M", e }(), KP = function () { function e(e) { this.updateProportionsHelper(e) } return e.prototype.convertUnits = function (e, t, i) { return this.convertFromPixels(this.convertToPixels(e, t), i) }, e.prototype.convertToPixels = function (e, t) { var i = t; return e * this.proportions[i] }, e.prototype.convertFromPixels = function (e, t) { var i = t; return e / this.proportions[i] }, e.prototype.updateProportionsHelper = function (e) { this.proportions = [e / 2.54, e / 6, 1, e / 72, e, e / 300, e / 25.4] }, e.horizontalResolution = 96, e.verticalResolution = 96, e }(), $P = function () { function e() { } return Object.defineProperty(e.prototype, "width", { get: function () { return this.imageWidth }, set: function (e) { this.imageWidth = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.imageHeight }, set: function (e) { this.imageHeight = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { set: function (e) { this.width = e.width, this.height = e.height }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "physicalDimension", { get: function () { return this.imagePhysicalDimension = this.getPointSize(this.width, this.height, this.horizontalResolution, this.verticalResolution), new Uk(this.width, this.height) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.imageStream }, enumerable: !0, configurable: !0 }), e.prototype.getPointSize = function (e, t, i, n) { if (void 0 === i) { var r = KP.horizontalResolution, o = KP.verticalResolution; return this.getPointSize(e, t, r, o) } var s = new KP(i), a = new KP(n), l = s.convertUnits(e, Fk.Pixel, Fk.Point), h = a.convertUnits(t, Fk.Pixel, Fk.Point); return new Uk(l, h) }, e }(), eN = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), tN = function (e) { function t(t) { var i = e.call(this) || this; return i.imageStatus = !0, i.dictionaryProperties = new qI, i.loadImage(t), i } return eN(t, e), t.prototype.loadImage = function (e) { this.initializeAsync(e) }, t.prototype.initializeAsync = function (e) { var t = new QP(e.length); t.writeFromBase64String(e), this.decoder = new ZP(t), this.height = this.decoder.height, this.width = this.decoder.width, this.bitsPerComponent = this.decoder.bitsPerComponent }, t.prototype.save = function () { this.imageStatus = !0, this.imageStream = this.decoder.getImageDictionary() }, t }($P), iN = function () { function e() { } return Object.defineProperty(e.prototype, "empty", { get: function () { return this.offset === this.length && this.length === this.checksum && 0 === this.checksum }, enumerable: !0, configurable: !0 }), e }(), nN = function () { return function () { } }(), rN = function () { return function () { } }(), oN = function () { return function () { } }(), sN = function () { function e() { } return Object.defineProperty(e.prototype, "isItalic", { get: function () { return 0 != (2 & this.macStyle) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isBold", { get: function () { return 0 != (1 & this.macStyle) }, enumerable: !0, configurable: !0 }), e }(), aN = function () { return function () { } }(), lN = function () { return function () { } }(), hN = function () { return function () { } }(), dN = function () { return function () { } }(), cN = function () { return function () { } }(), pN = function () { return function () { } }(), uN = function () { function e() { } return Object.defineProperty(e.prototype, "empty", { get: function () { return this.index === this.width && this.width === this.charCode && 0 === this.charCode }, enumerable: !0, configurable: !0 }), e.prototype.compareTo = function (e) { var t = e; return this.index - t.index }, e }(), gN = function () { return function () { } }(), mN = function () { return function () { } }(), fN = function () { return function () { } }(), yN = function () { return function () { } }(), vN = function () { return function () { } }(), wN = function () { function e(e) { this.int32Size = 4, this.int16Size = 2, this.int64Size = 8, this.bufferLength = e, this.buffer = [] } return Object.defineProperty(e.prototype, "data", { get: function () { if (this.buffer.length < this.bufferLength) for (var e = this.bufferLength - this.buffer.length, t = 0; t < e; t++)this.buffer.push(0); return this.buffer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "position", { get: function () { return void 0 !== this.internalPosition && null !== this.internalPosition || (this.internalPosition = 0), this.internalPosition }, enumerable: !0, configurable: !0 }), e.prototype.writeShort = function (e) { var t = [(65280 & e) >> 8, 255 & e]; this.flush(t) }, e.prototype.writeInt = function (e) { var t = [(4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e]; this.flush(t) }, e.prototype.writeUInt = function (e) { var t = [(4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e]; this.flush(t) }, e.prototype.writeString = function (e) { if (null == e) throw new Error("Argument Null Exception : value"); for (var t = [], i = 0; i < e.length; i++)t.push(e.charCodeAt(i)); this.flush(t) }, e.prototype.writeBytes = function (e) { this.flush(e) }, e.prototype.flush = function (e) { if (null === e) throw new Error("Argument Null Exception : buff"); for (var t = [], i = 0; i < this.position; i++)t.push(this.buffer[i]); for (i = 0; i < e.length; i++)t.push(e[i]); for (i = this.position; i < this.buffer.length; i++)t.push(this.buffer[i]); this.buffer = t, this.internalPosition += e.length }, e }(), bN = function () { function e(e) { this.int32Size = 4, this.isTtcFont = !1, this.isMacTtf = !1, this.metricsName = "", this.isMacTTF = !1, this.missedGlyphs = 0, this.tableNames = ["cvt ", "fpgm", "glyf", "head", "hhea", "hmtx", "loca", "maxp", "prep"], this.entrySelectors = [0, 0, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4], this.fontData = e, this.initialize() } return Object.defineProperty(e.prototype, "macintosh", { get: function () { return null !== this.macintoshDictionary && void 0 !== this.macintoshDictionary || (this.macintoshDictionary = new _I), this.macintoshDictionary }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "microsoft", { get: function () { return null !== this.microsoftDictionary && void 0 !== this.microsoftDictionary || (this.microsoftDictionary = new _I), this.microsoftDictionary }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "macintoshGlyphs", { get: function () { return null !== this.internalMacintoshGlyphs && void 0 !== this.internalMacintoshGlyphs || (this.internalMacintoshGlyphs = new _I), this.internalMacintoshGlyphs }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "microsoftGlyphs", { get: function () { return null !== this.internalMicrosoftGlyphs && void 0 !== this.internalMicrosoftGlyphs || (this.internalMicrosoftGlyphs = new _I), this.internalMicrosoftGlyphs }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { void 0 === this.metrics && (this.metrics = new sN), this.readFontDictionary(); var e = this.readNameTable(), t = this.readHeadTable(); this.initializeFontName(e), this.metrics.macStyle = t.macStyle }, e.prototype.readFontDictionary = function () { this.offset = 0; this.checkPreambula(); var e = this.readInt16(this.offset); this.readInt16(this.offset), this.readInt16(this.offset), this.readInt16(this.offset); void 0 === this.tableDirectory && (this.tableDirectory = new _I); for (var t = 0; t < e; ++t) { var i = new iN, n = this.readString(this.int32Size); i.checksum = this.readInt32(this.offset), i.offset = this.readInt32(this.offset), i.length = this.readInt32(this.offset), this.tableDirectory.setValue(n, i) } this.lowestPosition = this.offset, this.isTtcFont || this.fixOffsets() }, e.prototype.fixOffsets = function () { for (var e = Number.MAX_VALUE, t = this.tableDirectory.keys(), i = 0; i < t.length; i++) { var n = (s = this.tableDirectory.getValue(t[i])).offset; if (e > n && (e = n) <= this.lowestPosition) break } var r = e - this.lowestPosition; if (0 !== r) { var o = new _I; for (i = 0; i < t.length; i++) { var s; (s = this.tableDirectory.getValue(t[i])).offset -= r, o.setValue(t[i], s) } this.tableDirectory = o } }, e.prototype.checkPreambula = function () { var e = this.readInt32(this.offset); if (this.isMacTtf = 1953658213 === e, 65536 !== e && 1953658213 !== e && 1330926671 !== e) { this.isTtcFont = !0, this.offset = 0; if ("ttcf" !== this.readString(4)) throw new Error("Can not read TTF font data"); this.offset += 4; if (this.readInt32(this.offset) < 0) throw new Error("Can not read TTF font data"); this.offset = this.readInt32(this.offset), e = this.readInt32(this.offset) } return e }, e.prototype.readNameTable = function () { var e = this.getTable("name"); this.offset = e.offset; var t = new nN; t.formatSelector = this.readUInt16(this.offset), t.recordsCount = this.readUInt16(this.offset), t.offset = this.readUInt16(this.offset), t.nameRecords = []; for (var i = this.offset, n = 0; n < t.recordsCount; n++) { this.offset = i; var r = new rN; r.platformID = this.readUInt16(this.offset), r.encodingID = this.readUInt16(this.offset), r.languageID = this.readUInt16(this.offset), r.nameID = this.readUInt16(this.offset), r.length = this.readUInt16(this.offset), r.offset = this.readUInt16(this.offset), this.offset = e.offset + t.offset + r.offset; var o = 0 === r.platformID || 3 === r.platformID; r.name = this.readString(r.length, o), t.nameRecords[n] = r, i += 12 } return t }, e.prototype.readHeadTable = function () { var e = this.getTable("head"); this.offset = e.offset; var t = new oN; return t.version = this.readFixed(this.offset), t.fontRevision = this.readFixed(this.offset), t.checkSumAdjustment = this.readUInt32(this.offset), t.magicNumber = this.readUInt32(this.offset), t.flags = this.readUInt16(this.offset), t.unitsPerEm = this.readUInt16(this.offset), t.created = this.readInt64(this.offset), t.modified = this.readInt64(this.offset), t.xMin = this.readInt16(this.offset), t.yMin = this.readInt16(this.offset), t.xMax = this.readInt16(this.offset), t.yMax = this.readInt16(this.offset), t.macStyle = this.readUInt16(this.offset), t.lowestReadableSize = this.readUInt16(this.offset), t.fontDirectionHint = this.readInt16(this.offset), t.indexToLocalFormat = this.readInt16(this.offset), t.glyphDataFormat = this.readInt16(this.offset), t }, e.prototype.readHorizontalHeaderTable = function () { var e = this.getTable("hhea"); this.offset = e.offset; var t = new aN; return t.version = this.readFixed(this.offset), t.ascender = this.readInt16(this.offset), t.descender = this.readInt16(this.offset), t.lineGap = this.readInt16(this.offset), t.advanceWidthMax = this.readUInt16(this.offset), t.minLeftSideBearing = this.readInt16(this.offset), t.minRightSideBearing = this.readInt16(this.offset), t.xMaxExtent = this.readInt16(this.offset), t.caretSlopeRise = this.readInt16(this.offset), t.caretSlopeRun = this.readInt16(this.offset), this.offset += 10, t.metricDataFormat = this.readInt16(this.offset), t.numberOfHMetrics = this.readUInt16(this.offset), t }, e.prototype.readOS2Table = function () { var e = this.getTable("OS/2"); this.offset = e.offset; var t = new lN; return t.version = this.readUInt16(this.offset), t.xAvgCharWidth = this.readInt16(this.offset), t.usWeightClass = this.readUInt16(this.offset), t.usWidthClass = this.readUInt16(this.offset), t.fsType = this.readInt16(this.offset), t.ySubscriptXSize = this.readInt16(this.offset), t.ySubscriptYSize = this.readInt16(this.offset), t.ySubscriptXOffset = this.readInt16(this.offset), t.ySubscriptYOffset = this.readInt16(this.offset), t.ySuperscriptXSize = this.readInt16(this.offset), t.ySuperscriptYSize = this.readInt16(this.offset), t.ySuperscriptXOffset = this.readInt16(this.offset), t.ySuperscriptYOffset = this.readInt16(this.offset), t.yStrikeoutSize = this.readInt16(this.offset), t.yStrikeoutPosition = this.readInt16(this.offset), t.sFamilyClass = this.readInt16(this.offset), t.panose = this.readBytes(10), t.ulUnicodeRange1 = this.readUInt32(this.offset), t.ulUnicodeRange2 = this.readUInt32(this.offset), t.ulUnicodeRange3 = this.readUInt32(this.offset), t.ulUnicodeRange4 = this.readUInt32(this.offset), t.vendorIdentifier = this.readBytes(4), t.fsSelection = this.readUInt16(this.offset), t.usFirstCharIndex = this.readUInt16(this.offset), t.usLastCharIndex = this.readUInt16(this.offset), t.sTypoAscender = this.readInt16(this.offset), t.sTypoDescender = this.readInt16(this.offset), t.sTypoLineGap = this.readInt16(this.offset), t.usWinAscent = this.readUInt16(this.offset), t.usWinDescent = this.readUInt16(this.offset), t.ulCodePageRange1 = this.readUInt32(this.offset), t.ulCodePageRange2 = this.readUInt32(this.offset), t.version > 1 ? (t.sxHeight = this.readInt16(this.offset), t.sCapHeight = this.readInt16(this.offset), t.usDefaultChar = this.readUInt16(this.offset), t.usBreakChar = this.readUInt16(this.offset), t.usMaxContext = this.readUInt16(this.offset)) : (t.sxHeight = 0, t.sCapHeight = 0, t.usDefaultChar = 0, t.usBreakChar = 0, t.usMaxContext = 0), t }, e.prototype.readPostTable = function () { var e = this.getTable("post"); this.offset = e.offset; var t = new hN; return t.formatType = this.readFixed(this.offset), t.italicAngle = this.readFixed(this.offset), t.underlinePosition = this.readInt16(this.offset), t.underlineThickness = this.readInt16(this.offset), t.isFixedPitch = this.readUInt32(this.offset), t.minType42 = this.readUInt32(this.offset), t.maxType42 = this.readUInt32(this.offset), t.minType1 = this.readUInt32(this.offset), t.maxType1 = this.readUInt32(this.offset), t }, e.prototype.readWidthTable = function (e, t) { var i = this.getTable("hmtx"); this.offset = i.offset; for (var n = [], r = 0; r < e; r++) { var o = new dN; o.advanceWidth = this.readUInt16(this.offset), o.lsb = this.readInt16(this.offset); var s = 1e3 * o.advanceWidth / t; n.push(Math.floor(s)) } return n }, e.prototype.readCmapTable = function () { var e = this.getTable("cmap"); this.offset = e.offset; var t = new pN; t.version = this.readUInt16(this.offset), t.tablesCount = this.readUInt16(this.offset); for (var i = this.offset, n = [], r = 0; r < t.tablesCount; r++) { this.offset = i; var o = new cN; o.platformID = this.readUInt16(this.offset), o.encodingID = this.readUInt16(this.offset), o.offset = this.readUInt32(this.offset), i = this.offset, this.readCmapSubTable(o), n[r] = o } return n }, e.prototype.readCmapSubTable = function (e) { var t = this.getTable("cmap"); this.offset = t.offset + e.offset; var i = this.readUInt16(this.offset), n = this.getCmapEncoding(e.platformID, e.encodingID); n === nP.Macintosh ? rP.Macintosh : rP.Microsoft; if (n !== nP.Unknown) switch (i) { case iP.Apple: this.readAppleCmapTable(e, n); break; case iP.Microsoft: this.readMicrosoftCmapTable(e, n); break; case iP.Trimmed: this.readTrimmedCmapTable(e, n) } }, e.prototype.readAppleCmapTable = function (e, t) { var i = this.getTable("cmap"); this.offset = i.offset + e.offset; var n = new mN; n.format = this.readUInt16(this.offset), n.length = this.readUInt16(this.offset), n.version = this.readUInt16(this.offset), null !== this.maxMacIndex && void 0 !== this.maxMacIndex || (this.maxMacIndex = 0); for (var r = 0; r < 256; ++r) { var o = new uN; o.index = this.readByte(this.offset), o.width = this.getWidth(o.index), o.charCode = r, this.macintosh.setValue(r, o), this.addGlyph(o, t), this.maxMacIndex = Math.max(r, this.maxMacIndex) } }, e.prototype.readMicrosoftCmapTable = function (e, t) { var i = this.getTable("cmap"); this.offset = i.offset + e.offset; var n = t === nP.Unicode ? this.microsoft : this.macintosh, r = new fN; r.format = this.readUInt16(this.offset), r.length = this.readUInt16(this.offset), r.version = this.readUInt16(this.offset), r.segCountX2 = this.readUInt16(this.offset), r.searchRange = this.readUInt16(this.offset), r.entrySelector = this.readUInt16(this.offset), r.rangeShift = this.readUInt16(this.offset); var o = r.segCountX2 / 2; r.endCount = this.readUshortArray(o), r.reservedPad = this.readUInt16(this.offset), r.startCount = this.readUshortArray(o), r.idDelta = this.readUshortArray(o), r.idRangeOffset = this.readUshortArray(o); var s = r.length / 2 - 8 - 4 * o; r.glyphID = this.readUshortArray(s); for (var a = 0, l = 0, h = 0; h < o; h++)for (var d = r.startCount[h]; d <= r.endCount[h] && 65535 !== d; d++) { if (0 === r.idRangeOffset[h]) a = d + r.idDelta[h] & 65535; else { if ((l = h + r.idRangeOffset[h] / 2 - o + d - r.startCount[h]) >= r.glyphID.length) continue; a = r.glyphID[l] + r.idDelta[h] & 65535 } var c = new uN; c.index = a, c.width = this.getWidth(c.index); var p = t === nP.Symbol && 61440 == (65280 & d) ? 255 & d : d; c.charCode = p, n.setValue(p, c), this.addGlyph(c, t) } }, e.prototype.readTrimmedCmapTable = function (e, t) { var i = this.getTable("cmap"); this.offset = i.offset + e.offset; var n = new yN; n.format = this.readUInt16(this.offset), n.length = this.readUInt16(this.offset), n.version = this.readUInt16(this.offset), n.firstCode = this.readUInt16(this.offset), n.entryCount = this.readUInt16(this.offset); for (var r = 0; r < n.entryCount; ++r) { var o = new uN; o.index = this.readUInt16(this.offset), o.width = this.getWidth(o.index), o.charCode = r + n.firstCode, this.macintosh.setValue(r, o), this.addGlyph(o, t), this.maxMacIndex = Math.max(r, this.maxMacIndex) } }, e.prototype.initializeFontName = function (e) { for (var t = 0; t < e.recordsCount; t++) { var i = e.nameRecords[t]; if (1 === i.nameID ? this.metrics.fontFamily = i.name : 6 === i.nameID && (this.metrics.postScriptName = i.name), null !== this.metrics.fontFamily && void 0 !== this.metrics.fontFamily && null !== this.metrics.postScriptName && void 0 !== this.metrics.postScriptName) break } }, e.prototype.getTable = function (e) { var t, i = new iN; return this.tableDirectory.containsKey(e) && (t = this.tableDirectory.getValue(e)), null !== t && void 0 !== t && (i = t), i }, e.prototype.getWidth = function (e) { return e = e < this.width.length ? e : this.width.length - 1, this.width[e] }, e.prototype.getCmapEncoding = function (e, t) { var i = nP.Unknown; return e == rP.Microsoft && t == oP.Undefined ? i = nP.Symbol : e == rP.Microsoft && t == oP.Unicode ? i = nP.Unicode : e == rP.Macintosh && t == sP.Roman && (i = nP.Macintosh), i }, e.prototype.addGlyph = function (e, t) { var i = null; switch (t) { case nP.Unicode: i = this.microsoftGlyphs; break; case nP.Macintosh: case nP.Symbol: i = this.macintoshGlyphs }i.setValue(e.index, e) }, e.prototype.initializeMetrics = function (e, t, i, n, r, o) { this.initializeFontName(e); for (var s = !1, a = 0; a < o.length; a++) { var l = o[a]; if (this.getCmapEncoding(l.platformID, l.encodingID) === nP.Symbol) { s = !0; break } } this.metrics.isSymbol = s, this.metrics.macStyle = t.macStyle, this.metrics.isFixedPitch = 0 !== r.isFixedPitch, this.metrics.italicAngle = r.italicAngle; var h = 1e3 / t.unitsPerEm; this.metrics.winAscent = n.sTypoAscender * h, this.metrics.macAscent = i.ascender * h, this.metrics.capHeight = 0 !== n.sCapHeight ? n.sCapHeight : .7 * t.unitsPerEm * h, this.metrics.winDescent = n.sTypoDescender * h, this.metrics.macDescent = i.descender * h, this.metrics.leading = (n.sTypoAscender - n.sTypoDescender + n.sTypoLineGap) * h, this.metrics.lineGap = Math.ceil(i.lineGap * h); var d = t.xMin * h, c = Math.ceil(this.metrics.macAscent + this.metrics.lineGap), p = t.xMax * h, u = this.metrics.macDescent; this.metrics.fontBox = new Gk(d, c, p, u), this.metrics.stemV = 80, this.metrics.widthTable = this.updateWidth(), this.metrics.contains = this.tableDirectory.containsKey("CFF"), this.metrics.subScriptSizeFactor = t.unitsPerEm / n.ySubscriptYSize, this.metrics.superscriptSizeFactor = t.unitsPerEm / n.ySuperscriptYSize }, e.prototype.updateWidth = function () { var e = []; if (this.metrics.isSymbol) for (var t = 0; t < 256; t++) { var i = this.getGlyph(String.fromCharCode(t)); e[t] = i.empty ? 0 : i.width } else { var n = [], r = String.fromCharCode(32); for (t = 0; t < 256; t++) { n[0] = t; var o = this.getString(n, 0, n.length), s = o.length > 0 ? o[0] : "?"; (i = this.getGlyph(s)).empty ? (i = this.getGlyph(r), e[t] = i.empty ? 0 : i.width) : e[t] = i.width } } return e }, e.prototype.getDefaultGlyph = function () { return this.getGlyph(cP.whiteSpace) }, e.prototype.getString = function (e, t, i) { for (var n = "", r = 0; r < i; r++)n += String.fromCharCode(e[r + t]); return n }, e.prototype.readLocaTable = function (e) { var t = this.getTable("loca"); this.offset = t.offset; var i = new gN, n = null; if (e) { var r = t.length / 2; n = []; for (var o = 0; o < r; o++)n[o] = 2 * this.readUInt16(this.offset) } else { r = t.length / 4; n = []; for (o = 0; o < r; o++)n[o] = this.readUInt32(this.offset) } return i.offsets = n, i }, e.prototype.updateGlyphChars = function (e, t) { e.containsKey(0) || e.setValue(0, 0); for (var i = new _I, n = e.keys(), r = 0; r < n.length; r++)i.setValue(n[r], e.getValue(n[r])); for (r = 0; r < n.length; r++) { var o = n[r]; this.processCompositeGlyph(e, o, t) } }, e.prototype.processCompositeGlyph = function (e, t, i) { if (t < i.offsets.length - 1) { var n = i.offsets[t]; if (n !== i.offsets[t + 1]) { var r = this.getTable("glyf"); this.offset = r.offset + n; var o = new vN; if (o.numberOfContours = this.readInt16(this.offset), o.xMin = this.readInt16(this.offset), o.yMin = this.readInt16(this.offset), o.xMax = this.readInt16(this.offset), o.yMax = this.readInt16(this.offset), o.numberOfContours < 0) for (var s = 0; ;) { var a = this.readUInt16(this.offset), l = this.readUInt16(this.offset); if (e.containsKey(l) || e.setValue(l, 0), 0 == (a & lP.MoreComponents)) break; s = 0 != (a & lP.Arg1And2AreWords) ? 4 : 2, 0 != (a & lP.WeHaveScale) ? s += 2 : 0 != (a & lP.WeHaveAnXyScale) ? s += 4 : 0 != (a & lP.WeHaveTwoByTwo) && (s += 8), this.offset += s } } } }, e.prototype.generateGlyphTable = function (e, t, i, n) { i = []; var r = e.keys(); r.sort(function (e, t) { return e - t }); for (var o = 0, s = 0; s < r.length; s++) { var a = r[s]; t.offsets.length > 0 && (o += t.offsets[a + 1] - t.offsets[a]) } var l = this.align(o); n = []; for (s = 0; s < l; s++)n.push(0); var h = 0, d = 0, c = this.getTable("glyf"); for (s = 0; s < t.offsets.length; s++)if (i.push(h), d < r.length && r[d] === s) { ++d, i[s] = h; var p = t.offsets[s], u = t.offsets[s + 1] - p; if (u > 0) { this.offset = c.offset + p; n = this.read(n, h, u).buffer, h += u } } return { glyphTableSize: o, newLocaTable: i, newGlyphTable: n } }, e.prototype.updateLocaTable = function (e, t, i) { if (null === e) throw new Error("Argument Null Exception : newLocaTable"); for (var n = t ? 2 * e.length : 4 * e.length, r = this.align(n), o = new wN(r), s = 0; s < e.length; s++) { var a = e[s]; t ? (a /= 2, o.writeShort(a)) : o.writeInt(a) } return { newLocaUpdated: o.data, newLocaSize: n } }, e.prototype.align = function (e) { return e + 3 & -4 }, e.prototype.getFontProgram = function (e, t, i, n) { if (null === e) throw new Error("Argument Null Exception : newLocaTableOut"); if (null === t) throw new Error("Argument Null Exception : newGlyphTable"); this.tableNames; var r = this.getFontProgramLength(e, t, 0), o = r.fontProgramLength, s = r.numTables, a = new wN(o); a.writeInt(65536), a.writeShort(s); var l = this.entrySelectors[s]; return a.writeShort(16 * (1 << (31 & l))), a.writeShort(l), a.writeShort(16 * (s - (1 << (31 & l)))), this.writeCheckSums(a, s, e, t, i, n), this.writeGlyphs(a, e, t), a.data }, e.prototype.getFontProgramLength = function (e, t, i) { if (null === e) throw new Error("Argument Null Exception : newLocaTableOut"); if (null === t) throw new Error("Argument Null Exception : newGlyphTable"); i = 2; for (var n = this.tableNames, r = 0, o = 0; o < n.length; o++) { var s = n[o]; if ("glyf" !== s && "loca" !== s) { var a = this.getTable(s); a.empty || (++i, r += this.align(a.length)) } } r += e.length, r += t.length; return r += 16 * i + 12, { fontProgramLength: r, numTables: i } }, e.prototype.writeCheckSums = function (e, t, i, n, r, o) { if (null === e) throw new Error("Argument Null Exception : writer"); if (null === i) throw new Error("Argument Null Exception : newLocaTableOut"); if (null === n) throw new Error("Argument Null Exception : newGlyphTable"); for (var s = this.tableNames, a = 16 * t + 12, l = 0, h = 0; h < s.length; h++) { var d = s[h], c = this.getTable(d); if (!c.empty) { if (e.writeString(d), "glyf" === d) { var p = this.calculateCheckSum(n); e.writeInt(p), l = r } else if ("loca" === d) { p = this.calculateCheckSum(i); e.writeInt(p), l = o } else e.writeInt(c.checksum), l = c.length; e.writeUInt(a), e.writeUInt(l), a += this.align(l) } } }, e.prototype.calculateCheckSum = function (e) { if (null === e) throw new Error("Argument Null Exception : bytes"); for (var t = 0, i = 0, n = 0, r = 0, o = 0, s = 0; s < (e.length + 1) / 4; s++)o += 255 & e[t++], r += 255 & e[t++], n += 255 & e[t++], i += 255 & e[t++]; var a = i; return a += n << 8, a += r << 16, a += o << 24 }, e.prototype.writeGlyphs = function (e, t, i) { if (null === e) throw new Error("Argument Null Exception : writer"); if (null === t) throw new Error("Argument Null Exception : newLocaTableOut"); if (null === i) throw new Error("Argument Null Exception : newGlyphTable"); for (var n = this.tableNames, r = 0; r < n.length; r++) { var o = n[r], s = this.getTable(o); if (!s.empty) if ("glyf" === o) e.writeBytes(i); else if ("loca" === o) e.writeBytes(t); else { for (var a = this.align(s.length), l = [], h = 0; h < a; h++)l.push(0); this.offset = s.offset; var d = this.read(l, 0, s.length); e.writeBytes(d.buffer) } } }, e.prototype.setOffset = function (e) { this.offset = e }, e.prototype.createInternals = function () { this.metrics = new sN; var e = this.readNameTable(), t = this.readHeadTable(); this.bIsLocaShort = 0 === t.indexToLocalFormat; var i = this.readHorizontalHeaderTable(), n = this.readOS2Table(), r = this.readPostTable(); this.width = this.readWidthTable(i.numberOfHMetrics, t.unitsPerEm); var o = this.readCmapTable(); this.initializeMetrics(e, t, i, n, r, o) }, e.prototype.getGlyph = function (e) { if ("number" == typeof e) { var t = null; this.metrics.isSymbol || null == this.microsoftGlyphs ? this.metrics.isSymbol && null != this.macintoshGlyphs && this.macintoshGlyphs.containsKey(e) && (t = this.macintoshGlyphs.getValue(e)) : this.microsoftGlyphs.containsKey(e) && (t = this.microsoftGlyphs.getValue(e)); return null != t ? t : this.getDefaultGlyph() } var i = null, n = e.charCodeAt(0); this.metrics.isSymbol || null === this.microsoft ? (this.metrics.isSymbol && null !== this.macintosh || this.isMacTTF) && (0 !== this.maxMacIndex ? n %= this.maxMacIndex + 1 : n = 61440 == (65280 & n) ? 255 & n : n, this.macintosh.containsKey(n) && (i = this.macintosh.getValue(n), this.isFontPresent = !0)) : this.microsoft.containsKey(n) ? (i = this.microsoft.getValue(n), n !== cP.whiteSpace.charCodeAt(0) && (this.isFontPresent = !0)) : n !== cP.whiteSpace.charCodeAt(0) && (this.isFontPresent = !1), e === cP.whiteSpace && null === i && (i = new uN); return null !== i ? i : this.getDefaultGlyph() }, e.prototype.getGlyphChars = function (e) { if (null === e || void 0 === e) throw new Error("Argument Null Exception : chars"); for (var t = new _I, i = e.keys(), n = 0; n < i.length; n++) { var r = i[n], o = this.getGlyph(r); o.empty || t.setValue(o.index, r.charCodeAt(0)) } return t }, e.prototype.getAllGlyphs = function () { for (var e = [], t = new uN, i = 0, n = 0; n < this.width.length; n++) { var r = this.width[n]; t.index = i, t.width = r, e.push(t), i++ } return e }, e.prototype.readFontProgram = function (e) { var t = this.getGlyphChars(e), i = this.readLocaTable(this.bIsLocaShort); t.size() < e.size() && (this.missedGlyphs = e.size() - t.size()), this.updateGlyphChars(t, i); var n = this.generateGlyphTable(t, i, null, null), r = n.glyphTableSize, o = n.newLocaTable, s = n.newGlyphTable, a = this.updateLocaTable(o, this.bIsLocaShort, null), l = a.newLocaSize, h = a.newLocaUpdated; return this.getFontProgram(h, s, r, l) }, e.prototype.convertString = function (e) { if (null === e) throw new Error("Argument Null Exception : text"); for (var t = "", i = 0; i < e.length; i++) { var n = e[i], r = this.getGlyph(n); r.empty || (t += String.fromCharCode(r.index)) } return t }, e.prototype.getCharWidth = function (e) { var t = this.getGlyph(e); return (t = t.empty ? this.getDefaultGlyph() : t).empty ? 0 : t.width }, e.prototype.readString = function (e, t) { if (void 0 === t) return this.readString(e, !1); var i = ""; if (t) for (var n = 0; n < e; n++)n % 2 != 0 && (i += String.fromCharCode(this.fontData[this.offset])), this.offset += 1; else for (n = 0; n < e; n++)i += String.fromCharCode(this.fontData[this.offset]), this.offset += 1; return i }, e.prototype.readFixed = function (e) { return this.readInt16(e) + this.readInt16(e + 2) / 16384 }, e.prototype.readInt32 = function (e) { var t = this.fontData[e + 3], i = this.fontData[e + 2], n = this.fontData[e + 1], r = this.fontData[e]; return this.offset += 4, t + (i << 8) + (n << 16) + (r << 24) }, e.prototype.readUInt32 = function (e) { var t = this.fontData[e + 3], i = this.fontData[e + 2], n = this.fontData[e + 1], r = this.fontData[e]; return this.offset += 4, t | i << 8 | n << 16 | r << 24 }, e.prototype.readInt16 = function (e) { var t = (this.fontData[e] << 8) + this.fontData[e + 1]; return t = 32768 & t ? t - 65536 : t, this.offset += 2, t }, e.prototype.readInt64 = function (e) { var t = this.readInt32(e + 4), i = 4294967296 * this.readInt32(e) + t; return t < 0 && (i += 4294967296), i }, e.prototype.readUInt16 = function (e) { var t = this.fontData[e] << 8 | this.fontData[e + 1]; return this.offset += 2, t }, e.prototype.readUshortArray = function (e) { for (var t = [], i = 0; i < e; i++)t[i] = this.readUInt16(this.offset); return t }, e.prototype.readBytes = function (e) { for (var t = [], i = 0; i < e; i++)t.push(this.fontData[this.offset]), this.offset += 1; return t }, e.prototype.readByte = function (e) { var t = this.fontData[e]; return this.offset += 1, t }, e.prototype.read = function (e, t, i) { if (null === e) throw new Error("Argument Null Exception : buffer"); var n = 0, r = 0; do { for (var o = 0; o < i - n && this.offset + o < this.fontData.length; o++)e[t + o] = this.fontData[this.offset + o]; r = i - n, this.offset += r, n += r } while (n < i); return { buffer: e, written: n } }, e }(), CN = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), LN = function () { function e() { this.lineGap = 0 } return e.prototype.getAscent = function (e) { return this.ascent * fP.charSizeMultiplier * this.getSize(e) }, e.prototype.getDescent = function (e) { return this.descent * fP.charSizeMultiplier * this.getSize(e) }, e.prototype.getLineGap = function (e) { return this.lineGap * fP.charSizeMultiplier * this.getSize(e) }, e.prototype.getHeight = function (e) { for (var t = ["cambria", "candara", "constantia", "corbel", "cariadings"], i = [], n = 0; n < t.length; n++) { var r = t[n]; i.push(r) } return this.getDescent(e) < 0 ? this.getAscent(e) - this.getDescent(e) + this.getLineGap(e) : this.getAscent(e) + this.getDescent(e) + this.getLineGap(e) }, e.prototype.getSize = function (e) { var t = this.size; if (null != e) switch (e.subSuperScript) { case eP.SubScript: t /= this.subScriptSizeFactor; break; case eP.SuperScript: t /= this.superscriptSizeFactor }return t }, e.prototype.clone = function () { return this.widthTable = MN.clone(), this }, Object.defineProperty(e.prototype, "widthTable", { get: function () { return this.internalWidthTable }, set: function (e) { this.internalWidthTable = e }, enumerable: !0, configurable: !0 }), e }(), MN = function () { function e() { } return e.clone = function () { return null }, e }(), SN = function (e) { function t(t) { var i = e.call(this) || this; if (null == t) throw new Error("ArgumentNullException:widths"); return i.widths = t, i } return CN(t, e), t.prototype.items = function (e) { if (e < 0 || e >= this.widths.length) throw new Error("ArgumentOutOfRangeException:index, The character is not supported by the font."); return this.widths[e] }, Object.defineProperty(t.prototype, "length", { get: function () { return this.widths.length }, enumerable: !0, configurable: !0 }), t.prototype.clone = function () { return this.widths = this.widths, this }, t.prototype.toArray = function () { return new tk(this.widths) }, t }(MN), xN = function () { function e(e, t) { if (this.nameString = "ABCDEFGHIJKLMNOPQRSTUVWXYZ", this.dictionaryProperties = new qI, this.isCompress = !1, this.isEmbedFont = !1, this.cmapPrefix = "/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap" + UI.newLine + "/CIDSystemInfo << /Registry (Adobe)/Ordering (UCS)/Supplement 0>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange" + UI.newLine, this.cmapEndCodespaceRange = "endcodespacerange" + UI.newLine, this.cmapBeginRange = "beginbfrange" + UI.newLine, this.cmapEndRange = "endbfrange" + UI.newLine, this.cmapSuffix = "endbfrange\nendcmap\nCMapName currentdict /CMap defineresource pop\nend end" + UI.newLine, null === e || void 0 === e) throw new Error("ArgumentNullException:base64String"); this.fontSize = t, this.fontString = e, this.Initialize() } return e.prototype.getCharWidth = function (e) { return this.ttfReader.getCharWidth(e) }, e.prototype.getLineWidth = function (e) { for (var t = 0, i = 0, n = e.length; i < n; i++) { var r = e[i]; t += this.getCharWidth(r) } return t }, e.prototype.Initialize = function () { var e = new QP(this.fontString.length); e.writeFromBase64String(this.fontString), this.fontData = e.internalBuffer, this.ttfReader = new bN(this.fontData), this.ttfMetrics = this.ttfReader.metrics }, e.prototype.createInternals = function () { this.fontDictionary = new GI, this.fontProgram = new bk, this.cmap = new bk, this.descendantFont = new GI, this.metrics = new LN, this.ttfReader.createInternals(), this.ttfMetrics = this.ttfReader.metrics, this.initializeMetrics(), this.subsetName = this.getFontName(), this.createDescendantFont(), this.createCmap(), this.createFontDictionary(), this.createFontProgram() }, e.prototype.getInternals = function () { return this.fontDictionary }, e.prototype.initializeMetrics = function () { var e = this.ttfReader.metrics; this.metrics.ascent = e.macAscent, this.metrics.descent = e.macDescent, this.metrics.height = e.macAscent - e.macDescent + e.lineGap, this.metrics.name = e.fontFamily, this.metrics.postScriptName = e.postScriptName, this.metrics.size = this.fontSize, this.metrics.widthTable = new SN(e.widthTable), this.metrics.lineGap = e.lineGap, this.metrics.subScriptSizeFactor = e.subScriptSizeFactor, this.metrics.superscriptSizeFactor = e.superscriptSizeFactor, this.metrics.isBold = e.isBold }, e.prototype.getFontName = function () { for (var e, t = "", i = 0; i < 6; i++) { var n = Math.floor(26 * Math.random()) + 0; t += this.nameString[n] } return t += "+", t += this.ttfReader.metrics.postScriptName, e = t.toString(), e = this.formatName(e) }, e.prototype.formatName = function (e) { var t = e.replace("(", "#28"); return t = t.replace(")", "#29"), t = t.replace("[", "#5B"), t = t.replace("]", "#5D"), t = t.replace("<", "#3C"), t = t.replace(">", "#3E"), t = t.replace("{", "#7B"), t = t.replace("}", "#7D"), t = t.replace("/", "#2F"), (t = t.replace("%", "#25")).replace(" ", "#20") }, e.prototype.createDescendantFont = function () { this.descendantFont.isFont = !0, this.descendantFont.descendantFontBeginSave = new XI(this), this.descendantFont.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.font)), this.descendantFont.items.setValue(this.dictionaryProperties.subtype, new YI(this.dictionaryProperties.cIDFontType2)), this.descendantFont.items.setValue(this.dictionaryProperties.baseFont, new YI(this.subsetName)), this.descendantFont.items.setValue(this.dictionaryProperties.cIDToGIDMap, new YI(this.dictionaryProperties.identity)), this.descendantFont.items.setValue(this.dictionaryProperties.dw, new ek(1e3)), this.fontDescriptor = this.createFontDescriptor(), this.descendantFont.items.setValue(this.dictionaryProperties.fontDescriptor, new Tk(this.fontDescriptor)); var e = this.createSystemInfo(); this.descendantFont.items.setValue(this.dictionaryProperties.cIDSystemInfo, e) }, e.prototype.createFontDescriptor = function () { var e = new GI, t = this.ttfReader.metrics; return e.isFont = !0, e.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.fontDescriptor)), e.items.setValue(this.dictionaryProperties.fontName, new YI(this.subsetName)), e.items.setValue(this.dictionaryProperties.flags, new ek(this.getDescriptorFlags())), e.items.setValue(this.dictionaryProperties.fontBBox, tk.fromRectangle(this.getBoundBox())), e.items.setValue(this.dictionaryProperties.missingWidth, new ek(t.widthTable[32])), e.items.setValue(this.dictionaryProperties.stemV, new ek(t.stemV)), e.items.setValue(this.dictionaryProperties.italicAngle, new ek(t.italicAngle)), e.items.setValue(this.dictionaryProperties.capHeight, new ek(t.capHeight)), e.items.setValue(this.dictionaryProperties.ascent, new ek(t.winAscent)), e.items.setValue(this.dictionaryProperties.descent, new ek(t.winDescent)), e.items.setValue(this.dictionaryProperties.leading, new ek(t.leading)), e.items.setValue(this.dictionaryProperties.avgWidth, new ek(t.widthTable[32])), e.items.setValue(this.dictionaryProperties.fontFile2, new Tk(this.fontProgram)), e.items.setValue(this.dictionaryProperties.maxWidth, new ek(t.widthTable[32])), e.items.setValue(this.dictionaryProperties.xHeight, new ek(0)), e.items.setValue(this.dictionaryProperties.stemH, new ek(0)), e }, e.prototype.createCmap = function () { this.cmap.cmapBeginSave = new Ck(this) }, e.prototype.createFontDictionary = function () { this.fontDictionary.isFont = !0, this.fontDictionary.fontDictionaryBeginSave = new JI(this), this.fontDictionary.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.font)), this.fontDictionary.items.setValue(this.dictionaryProperties.baseFont, new YI(this.subsetName)), this.fontDictionary.items.setValue(this.dictionaryProperties.subtype, new YI(this.dictionaryProperties.type0)), this.fontDictionary.items.setValue(this.dictionaryProperties.encoding, new YI(this.dictionaryProperties.identityH)); var e = new tk, t = new Tk(this.descendantFont); e.isFont = !0, e.add(t), this.fontDictionary.items.setValue(this.dictionaryProperties.descendantFonts, e) }, e.prototype.createFontProgram = function () { this.fontProgram.fontProgramBeginSave = new Lk(this) }, e.prototype.createSystemInfo = function () { var e = new GI; return e.items.setValue(this.dictionaryProperties.registry, new Sk("Adobe")), e.items.setValue(this.dictionaryProperties.ordering, new Sk(this.dictionaryProperties.identity)), e.items.setValue(this.dictionaryProperties.supplement, new ek(0)), e }, e.prototype.descendantFontBeginSave = function () { if (null !== this.usedChars && void 0 !== this.usedChars && this.usedChars.size() > 0) { var e = this.getDescendantWidth(); null !== e && this.descendantFont.items.setValue(this.dictionaryProperties.w, e) } }, e.prototype.cmapBeginSave = function () { this.generateCmap() }, e.prototype.fontDictionaryBeginSave = function () { null !== this.usedChars && void 0 !== this.usedChars && this.usedChars.size() > 0 && !this.fontDictionary.containsKey(this.dictionaryProperties.toUnicode) && this.fontDictionary.items.setValue(this.dictionaryProperties.toUnicode, new Tk(this.cmap)) }, e.prototype.fontProgramBeginSave = function () { this.isCompress = !0, this.generateFontProgram() }, e.prototype.getDescendantWidth = function () { var e = new tk; if (null !== this.usedChars && void 0 !== this.usedChars && this.usedChars.size() > 0) { for (var t = [], i = this.usedChars.keys(), n = 0; n < i.length; n++) { var r = i[n]; (h = this.ttfReader.getGlyph(r)).empty || t.push(h) } t.sort(function (e, t) { return e.index - t.index }); var o = 0, s = 0, a = !1, l = new tk; for (n = 0; n < t.length; n++) { var h = t[n]; a || (a = !0, o = h.index, s = h.index - 1), (s + 1 !== h.index || n + 1 === t.length) && t.length > 1 && (e.add(new ek(o)), 0 !== n && e.add(l), o = h.index, l = new tk), l.add(new ek(h.width)), n + 1 === t.length && (e.add(new ek(o)), e.add(l)), s = h.index } } return e }, e.prototype.generateCmap = function () { if (null !== this.usedChars && void 0 !== this.usedChars && this.usedChars.size() > 0) { var e = this.ttfReader.getGlyphChars(this.usedChars); if (e.size() > 0) { var t = e.keys().sort(), i = t[0], n = t[t.length - 1], r = this.toHexString(i, !1) + this.toHexString(n, !1) + UI.newLine, o = ""; o += this.cmapPrefix, o += r, o += this.cmapEndCodespaceRange; for (var s = 0, a = 0; a < t.length; a++) { 0 === s && (0 !== a && (o += this.cmapEndRange), o += s = Math.min(100, t.length - a), o += UI.whiteSpace, o += this.cmapBeginRange), s -= 1; var l = t[a]; o += this.toHexString(l, !0) + this.toHexString(l, !0) + this.toHexString(e.getValue(l), !0) + "\n" } o += this.cmapSuffix, this.cmap.clearStream(), this.cmap.isFont = !0, this.cmap.write(o) } } }, e.prototype.generateFontProgram = function () { var e = null; this.usedChars = null === this.usedChars || void 0 === this.usedChars ? new _I : this.usedChars, this.ttfReader.setOffset(0), e = this.ttfReader.readFontProgram(this.usedChars), this.fontProgram.clearStream(), this.fontProgram.isFont = !0, this.fontProgram.writeBytes(e) }, e.prototype.getDescriptorFlags = function () { var e = 0, t = this.ttfReader.metrics; return t.isFixedPitch && (e |= aP.FixedPitch), t.isSymbol ? e |= aP.Symbolic : e |= aP.Nonsymbolic, t.isItalic && (e |= aP.Italic), t.isBold && (e |= aP.ForceBold), e }, e.prototype.getBoundBox = function () { var e = this.ttfReader.metrics.fontBox, t = Math.abs(e.right - e.left), i = Math.abs(e.top - e.bottom); return new qk(e.left, e.bottom, t, i) }, e.prototype.toHexString = function (e, t) { var i = e.toString(16); return t && (i = i.toUpperCase()), "<0000".substring(0, 5 - i.length) + i + ">" }, e.prototype.setSymbols = function (e) { if (null === e) throw new Error("Argument Null Exception : text"); null !== this.usedChars && void 0 !== this.usedChars || (this.usedChars = new _I); for (var t = 0; t < e.length; t++) { var i = e[t]; this.usedChars.setValue(i, String.fromCharCode(0)) } !1 === this.isEmbedFont && this.getDescendantWidth() }, e }(), TN = function () { function e() { this.arabicCharTable = [["Ø¡", "ïº€"], ["Ø¢", "ïº", "ïº‚"], ["Ø£", "ïºƒ", "ïº„"], ["Ø¤", "ïº…", "ïº†"], ["Ø¥", "ïº‡", "ïºˆ"], ["Ø¦", "ïº‰", "ïºŠ", "ïº‹", "ïºŒ"], ["Ø§", "ïº", "ïºŽ"], ["Ø¨", "ïº", "ïº", "ïº‘", "ïº’"], ["Ø©", "ïº“", "ïº”"], ["Øª", "ïº•", "ïº–", "ïº—", "ïº˜"], ["Ø«", "ïº™", "ïºš", "ïº›", "ïºœ"], ["Ø¬", "ïº", "ïºž", "ïºŸ", "ïº "], ["Ø­", "ïº¡", "ïº¢", "ïº£", "ïº¤"], ["Ø®", "ïº¥", "ïº¦", "ïº§", "ïº¨"], ["Ø¯", "ïº©", "ïºª"], ["Ø°", "ïº«", "ïº¬"], ["Ø±", "ïº­", "ïº®"], ["Ø²", "ïº¯", "ïº°"], ["Ø³", "ïº±", "ïº²", "ïº³", "ïº´"], ["Ø´", "ïºµ", "ïº¶", "ïº·", "ïº¸"], ["Øµ", "ïº¹", "ïºº", "ïº»", "ïº¼"], ["Ø¶", "ïº½", "ïº¾", "ïº¿", "ï»€"], ["Ø·", "ï»", "ï»‚", "ï»ƒ", "ï»„"], ["Ø¸", "ï»…", "ï»†", "ï»‡", "ï»ˆ"], ["Ø¹", "ï»‰", "ï»Š", "ï»‹", "ï»Œ"], ["Øº", "ï»", "ï»Ž", "ï»", "ï»"], ["Ù€", "Ù€", "Ù€", "Ù€", "Ù€"], ["Ù", "ï»‘", "ï»’", "ï»“", "ï»”"], ["Ù‚", "ï»•", "ï»–", "ï»—", "ï»˜"], ["Ùƒ", "ï»™", "ï»š", "ï»›", "ï»œ"], ["Ù„", "ï»", "ï»ž", "ï»Ÿ", "ï» "], ["Ù…", "ï»¡", "ï»¢", "ï»£", "ï»¤"], ["Ù†", "ï»¥", "ï»¦", "ï»§", "ï»¨"], ["Ù‡", "ï»©", "ï»ª", "ï»«", "ï»¬"], ["Ùˆ", "ï»­", "ï»®"], ["Ù‰", "ï»¯", "ï»°", "ï¯¨", "ï¯©"], ["ÙŠ", "ï»±", "ï»²", "ï»³", "ï»´"], ["Ù±", "ï­", "ï­‘"], ["Ù¹", "ï­¦", "ï­§", "ï­¨", "ï­©"], ["Ùº", "ï­ž", "ï­Ÿ", "ï­ ", "ï­¡"], ["Ù»", "ï­’", "ï­“", "ï­”", "ï­•"], ["Ù¾", "ï­–", "ï­—", "ï­˜", "ï­™"], ["Ù¿", "ï­¢", "ï­£", "ï­¤", "ï­¥"], ["Ú€", "ï­š", "ï­›", "ï­œ", "ï­"], ["Úƒ", "ï­¶", "ï­·", "ï­¸", "ï­¹"], ["Ú„", "ï­²", "ï­³", "ï­´", "ï­µ"], ["Ú†", "ï­º", "ï­»", "ï­¼", "ï­½"], ["Ú‡", "ï­¾", "ï­¿", "ï®€", "ï®"], ["Úˆ", "ï®ˆ", "ï®‰"], ["ÚŒ", "ï®„", "ï®…"], ["Ú", "ï®‚", "ï®ƒ"], ["ÚŽ", "ï®†", "ï®‡"], ["Ú‘", "ï®Œ", "ï®"], ["Ú˜", "ï®Š", "ï®‹"], ["Ú¤", "ï­ª", "ï­«", "ï­¬", "ï­­"], ["Ú¦", "ï­®", "ï­¯", "ï­°", "ï­±"], ["Ú©", "ï®Ž", "ï®", "ï®", "ï®‘"], ["Ú­", "ï¯“", "ï¯”", "ï¯•", "ï¯–"], ["Ú¯", "ï®’", "ï®“", "ï®”", "ï®•"], ["Ú±", "ï®š", "ï®›", "ï®œ", "ï®"], ["Ú³", "ï®–", "ï®—", "ï®˜", "ï®™"], ["Úº", "ï®ž", "ï®Ÿ"], ["Ú»", "ï® ", "ï®¡", "ï®¢", "ï®£"], ["Ú¾", "ï®ª", "ï®«", "ï®¬", "ï®­"], ["Û€", "ï®¤", "ï®¥"], ["Û", "ï®¦", "ï®§", "ï®¨", "ï®©"], ["Û…", "ï¯ ", "ï¯¡"], ["Û†", "ï¯™", "ï¯š"], ["Û‡", "ï¯—", "ï¯˜"], ["Ûˆ", "ï¯›", "ï¯œ"], ["Û‰", "ï¯¢", "ï¯£"], ["Û‹", "ï¯ž", "ï¯Ÿ"], ["ÛŒ", "ï¯¼", "ï¯½", "ï¯¾", "ï¯¿"], ["Û", "ï¯¤", "ï¯¥", "ï¯¦", "ï¯§"], ["Û’", "ï®®", "ï®¯"], ["Û“", "ï®°", "ï®±"]], this.alef = "Ø§", this.alefHamza = "Ø£", this.alefHamzaBelow = "Ø¥", this.alefMadda = "Ø¢", this.lam = "Ù„", this.hamza = "Ø¡", this.zeroWidthJoiner = "â€", this.hamzaAbove = "Ù”", this.hamzaBelow = "Ù•", this.wawHamza = "Ø¤", this.yehHamza = "Ø¦", this.waw = "Ùˆ", this.alefMaksura = "Ù‰", this.yeh = "ÙŠ", this.farsiYeh = "ÛŒ", this.shadda = "Ù‘", this.madda = "Ù“", this.lwa = "ï»»", this.lwawh = "ï»·", this.lwawhb = "ï»¹", this.lwawm = "ï»µ", this.bwhb = "Û“", this.fathatan = "Ù‹", this.superScriptalef = "Ù°", this.vowel = 1, this.arabicMapTable = new _I; for (var e = 0; e < this.arabicCharTable.length; e++)this.arabicMapTable.setValue(this.arabicCharTable[e][0], this.arabicCharTable[e]) } return e.prototype.getCharacterShape = function (e, t) { if (e >= this.hamza && e <= this.bwhb) { if (this.arabicMapTable.getValue(e)) return this.arabicMapTable.getValue(e)[t + 1] } else if (e >= this.lwawm && e <= this.lwa) return e; return e }, e.prototype.shape = function (e, t) { for (var i = "", n = "", r = 0; r < e.length; r++) { var o = e[r]; if (o >= "Ø€" && o <= "Û¿") n += o; else { if (n.length > 0) { i += this.doShape(n.toString(), 0), n = "" } i += o } } if (n.length > 0) { i += this.doShape(n.toString(), 0) } return i.toString() }, e.prototype.doShape = function (e, t) { for (var i = "", n = 0, r = 0, o = "", s = new DN, a = new DN; r < e.length;)if (o = e[r++], 0 === this.ligature(o, a)) { var l = this.getShapeCount(o); n = 1 === l ? 0 : 2, s.Shapes > 2 && (n += 1), n %= a.Shapes, a.Value = this.getCharacterShape(a.Value, n), i = this.append(i, s, t), s = a, (a = new DN).Value = o, a.Shapes = l, a.Ligature++ } return n = s.Shapes > 2 ? 1 : 0, n %= a.Shapes, a.Value = this.getCharacterShape(a.Value, n), i = this.append(i, s, t), (i = this.append(i, a, t)).toString() }, e.prototype.append = function (e, t, i) { return "" !== t.Value && (e += t.Value, t.Ligature -= 1, "" !== t.Type && (0 == (i & this.vowel) ? (e += t.Type, t.Ligature -= 1) : t.Ligature -= 1), "" !== t.vowel && (0 == (i & this.vowel) ? (e += t.vowel, t.Ligature -= 1) : t.Ligature -= 1)), e }, e.prototype.ligature = function (e, t) { if ("" !== t.Value) { var i = 0; if (e >= this.fathatan && e <= this.hamzaBelow || e === this.superScriptalef) { if (i = 1, "" !== t.vowel && e !== this.shadda && (i = 2), e === this.shadda) { if (null != t.Type) return 0; t.Type = this.shadda } else e === this.hamzaBelow ? t.Value === this.alef ? (t.Value = this.alefHamzaBelow, i = 2) : e === this.lwa ? (t.Value = this.lwawhb, i = 2) : t.Type = this.hamzaBelow : e === this.hamzaAbove ? t.Value === this.alef ? (t.Value = this.alefHamza, i = 2) : t.Value === this.lwa ? (t.Value = this.lwawh, i = 2) : t.Value === this.waw ? (t.Value = this.wawHamza, i = 2) : t.Value === this.yeh || t.Value === this.alefMaksura || t.Value === this.farsiYeh ? (t.Value = this.yehHamza, i = 2) : t.Type = this.hamzaAbove : e === this.madda ? t.Value === this.alef && (t.Value = this.alefMadda, i = 2) : t.vowel = e; return 1 === i && t.Ligature++ , i } return "" !== t.vowel ? 0 : (t.Value === this.lam && (e === this.alef ? (t.Value = this.lwa, t.Shapes = 2, i = 3) : e === this.alefHamza ? (t.Value = this.lwawh, t.Shapes = 2, i = 3) : e === this.alefHamzaBelow ? (t.Value = this.lwawhb, t.Shapes = 2, i = 3) : e === this.alefMadda && (t.Value = this.lwawm, t.Shapes = 2, i = 3)), i) } return 0 }, e.prototype.getShapeCount = function (e) { if (e >= this.hamza && e <= this.bwhb && !(e >= this.fathatan && e <= this.hamzaBelow || e === this.superScriptalef)) { if (this.arabicMapTable.getValue(e)) return this.arabicMapTable.getValue(e).length - 1 } else if (e === this.zeroWidthJoiner) return 4; return 1 }, e }(), DN = function () { function e() { this.shapeValue = "", this.shapeType = "", this.shapeVowel = "", this.shapeLigature = 0, this.shapeShapes = 1 } return Object.defineProperty(e.prototype, "Value", { get: function () { return this.shapeValue }, set: function (e) { this.shapeValue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "Type", { get: function () { return this.shapeType }, set: function (e) { this.shapeType = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "vowel", { get: function () { return this.shapeVowel }, set: function (e) { this.shapeVowel = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "Ligature", { get: function () { return this.shapeLigature }, set: function (e) { this.shapeLigature = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "Shapes", { get: function () { return this.shapeShapes }, set: function (e) { this.shapeShapes = e }, enumerable: !0, configurable: !0 }), e }(), AN = function () { function e() { this.indexes = [], this.indexLevels = [], this.mirroringShapeCharacters = new _I, this.update() } return e.prototype.doMirrorShaping = function (e) { for (var t = [], i = 0; i < e.length; i++)1 == (1 & this.indexLevels[i]) && this.mirroringShapeCharacters.containsKey(e[i].charCodeAt(0)) ? t[i] = String.fromCharCode(this.mirroringShapeCharacters.getValue(e[i].charCodeAt(0))) : t[i] = e[i].toString(); for (var n = "", r = 0; r < t.length; r++)n += t[r]; return n }, e.prototype.getLogicalToVisualString = function (e, t) { var i = new EN; this.indexLevels = i.getVisualOrder(e, t), this.setDefaultIndexLevel(), this.doOrder(0, this.indexLevels.length - 1); for (var n = this.doMirrorShaping(e), r = "", o = 0; o < this.indexes.length; o++) { r += n[this.indexes[o]] } return r.toString() }, e.prototype.setDefaultIndexLevel = function () { for (var e = 0; e < this.indexLevels.length; e++)this.indexes[e] = e }, e.prototype.doOrder = function (e, t) { for (var i = this.indexLevels[e], n = i, r = i, o = i, s = e + 1; s <= t; ++s) { var a = this.indexLevels[s]; a > i ? i = a : a < n && (n = a), r &= a, o |= a } if (0 != (1 & o)) if (1 != (1 & r)) for (n |= 1; i >= n;) { for (var l = e; ;) { for (; l <= t && !(this.indexLevels[l] >= i);)l += 1; if (l > t) break; for (var h = l + 1; h <= t && !(this.indexLevels[h] < i);)h += 1; this.reArrange(l, h), l = h + 1 } i -= 1 } else this.reArrange(e, t + 1) }, e.prototype.reArrange = function (e, t) { var i = (e + t) / 2; for (--t; e < i; ++e, --t) { var n = this.indexes[e]; this.indexes[e] = this.indexes[t], this.indexes[t] = n } }, e.prototype.update = function () { this.mirroringShapeCharacters.setValue(40, 41), this.mirroringShapeCharacters.setValue(41, 40), this.mirroringShapeCharacters.setValue(60, 62), this.mirroringShapeCharacters.setValue(62, 60), this.mirroringShapeCharacters.setValue(91, 93), this.mirroringShapeCharacters.setValue(93, 91), this.mirroringShapeCharacters.setValue(123, 125), this.mirroringShapeCharacters.setValue(125, 123), this.mirroringShapeCharacters.setValue(171, 187), this.mirroringShapeCharacters.setValue(187, 171), this.mirroringShapeCharacters.setValue(8249, 8250), this.mirroringShapeCharacters.setValue(8250, 8249), this.mirroringShapeCharacters.setValue(8261, 8262), this.mirroringShapeCharacters.setValue(8262, 8261), this.mirroringShapeCharacters.setValue(8317, 8318), this.mirroringShapeCharacters.setValue(8318, 8317), this.mirroringShapeCharacters.setValue(8333, 8334), this.mirroringShapeCharacters.setValue(8334, 8333), this.mirroringShapeCharacters.setValue(8712, 8715), this.mirroringShapeCharacters.setValue(8713, 8716), this.mirroringShapeCharacters.setValue(8714, 8717), this.mirroringShapeCharacters.setValue(8715, 8712), this.mirroringShapeCharacters.setValue(8716, 8713), this.mirroringShapeCharacters.setValue(8717, 8714), this.mirroringShapeCharacters.setValue(8725, 10741), this.mirroringShapeCharacters.setValue(8764, 8765), this.mirroringShapeCharacters.setValue(8765, 8764), this.mirroringShapeCharacters.setValue(8771, 8909), this.mirroringShapeCharacters.setValue(8786, 8787), this.mirroringShapeCharacters.setValue(8787, 8786), this.mirroringShapeCharacters.setValue(8788, 8789), this.mirroringShapeCharacters.setValue(8789, 8788), this.mirroringShapeCharacters.setValue(8804, 8805), this.mirroringShapeCharacters.setValue(8805, 8804), this.mirroringShapeCharacters.setValue(8806, 8807), this.mirroringShapeCharacters.setValue(8807, 8806), this.mirroringShapeCharacters.setValue(8808, 8809), this.mirroringShapeCharacters.setValue(8809, 8808), this.mirroringShapeCharacters.setValue(8810, 8811), this.mirroringShapeCharacters.setValue(8811, 8810), this.mirroringShapeCharacters.setValue(8814, 8815), this.mirroringShapeCharacters.setValue(8815, 8814), this.mirroringShapeCharacters.setValue(8816, 8817), this.mirroringShapeCharacters.setValue(8817, 8816), this.mirroringShapeCharacters.setValue(8818, 8819), this.mirroringShapeCharacters.setValue(8819, 8818), this.mirroringShapeCharacters.setValue(8820, 8821), this.mirroringShapeCharacters.setValue(8821, 8820), this.mirroringShapeCharacters.setValue(8822, 8823), this.mirroringShapeCharacters.setValue(8823, 8822), this.mirroringShapeCharacters.setValue(8824, 8825), this.mirroringShapeCharacters.setValue(8825, 8824), this.mirroringShapeCharacters.setValue(8826, 8827), this.mirroringShapeCharacters.setValue(8827, 8826), this.mirroringShapeCharacters.setValue(8828, 8829), this.mirroringShapeCharacters.setValue(8829, 8828), this.mirroringShapeCharacters.setValue(8830, 8831), this.mirroringShapeCharacters.setValue(8831, 8830), this.mirroringShapeCharacters.setValue(8832, 8833), this.mirroringShapeCharacters.setValue(8833, 8832), this.mirroringShapeCharacters.setValue(8834, 8835), this.mirroringShapeCharacters.setValue(8835, 8834), this.mirroringShapeCharacters.setValue(8836, 8837), this.mirroringShapeCharacters.setValue(8837, 8836), this.mirroringShapeCharacters.setValue(8838, 8839), this.mirroringShapeCharacters.setValue(8839, 8838), this.mirroringShapeCharacters.setValue(8840, 8841), this.mirroringShapeCharacters.setValue(8841, 8840), this.mirroringShapeCharacters.setValue(8842, 8843), this.mirroringShapeCharacters.setValue(8843, 8842), this.mirroringShapeCharacters.setValue(8847, 8848), this.mirroringShapeCharacters.setValue(8848, 8847), this.mirroringShapeCharacters.setValue(8849, 8850), this.mirroringShapeCharacters.setValue(8850, 8849), this.mirroringShapeCharacters.setValue(8856, 10680), this.mirroringShapeCharacters.setValue(8866, 8867), this.mirroringShapeCharacters.setValue(8867, 8866), this.mirroringShapeCharacters.setValue(8870, 10974), this.mirroringShapeCharacters.setValue(8872, 10980), this.mirroringShapeCharacters.setValue(8873, 10979), this.mirroringShapeCharacters.setValue(8875, 10981), this.mirroringShapeCharacters.setValue(8880, 8881), this.mirroringShapeCharacters.setValue(8881, 8880), this.mirroringShapeCharacters.setValue(8882, 8883), this.mirroringShapeCharacters.setValue(8883, 8882), this.mirroringShapeCharacters.setValue(8884, 8885), this.mirroringShapeCharacters.setValue(8885, 8884), this.mirroringShapeCharacters.setValue(8886, 8887), this.mirroringShapeCharacters.setValue(8887, 8886), this.mirroringShapeCharacters.setValue(8905, 8906), this.mirroringShapeCharacters.setValue(8906, 8905), this.mirroringShapeCharacters.setValue(8907, 8908), this.mirroringShapeCharacters.setValue(8908, 8907), this.mirroringShapeCharacters.setValue(8909, 8771), this.mirroringShapeCharacters.setValue(8912, 8913), this.mirroringShapeCharacters.setValue(8913, 8912), this.mirroringShapeCharacters.setValue(8918, 8919), this.mirroringShapeCharacters.setValue(8919, 8918), this.mirroringShapeCharacters.setValue(8920, 8921), this.mirroringShapeCharacters.setValue(8921, 8920), this.mirroringShapeCharacters.setValue(8922, 8923), this.mirroringShapeCharacters.setValue(8923, 8922), this.mirroringShapeCharacters.setValue(8924, 8925), this.mirroringShapeCharacters.setValue(8925, 8924), this.mirroringShapeCharacters.setValue(8926, 8927), this.mirroringShapeCharacters.setValue(8927, 8926), this.mirroringShapeCharacters.setValue(8928, 8929), this.mirroringShapeCharacters.setValue(8929, 8928), this.mirroringShapeCharacters.setValue(8930, 8931), this.mirroringShapeCharacters.setValue(8931, 8930), this.mirroringShapeCharacters.setValue(8932, 8933), this.mirroringShapeCharacters.setValue(8933, 8932), this.mirroringShapeCharacters.setValue(8934, 8935), this.mirroringShapeCharacters.setValue(8935, 8934), this.mirroringShapeCharacters.setValue(8936, 8937), this.mirroringShapeCharacters.setValue(8937, 8936), this.mirroringShapeCharacters.setValue(8938, 8939), this.mirroringShapeCharacters.setValue(8939, 8938), this.mirroringShapeCharacters.setValue(8940, 8941), this.mirroringShapeCharacters.setValue(8941, 8940), this.mirroringShapeCharacters.setValue(8944, 8945), this.mirroringShapeCharacters.setValue(8945, 8944), this.mirroringShapeCharacters.setValue(8946, 8954), this.mirroringShapeCharacters.setValue(8947, 8955), this.mirroringShapeCharacters.setValue(8948, 8956), this.mirroringShapeCharacters.setValue(8950, 8957), this.mirroringShapeCharacters.setValue(8951, 8958), this.mirroringShapeCharacters.setValue(8954, 8946), this.mirroringShapeCharacters.setValue(8955, 8947), this.mirroringShapeCharacters.setValue(8956, 8948), this.mirroringShapeCharacters.setValue(8957, 8950), this.mirroringShapeCharacters.setValue(8958, 8951), this.mirroringShapeCharacters.setValue(8968, 8969), this.mirroringShapeCharacters.setValue(8969, 8968), this.mirroringShapeCharacters.setValue(8970, 8971), this.mirroringShapeCharacters.setValue(8971, 8970), this.mirroringShapeCharacters.setValue(9001, 9002), this.mirroringShapeCharacters.setValue(9002, 9001), this.mirroringShapeCharacters.setValue(10088, 10089), this.mirroringShapeCharacters.setValue(10089, 10088), this.mirroringShapeCharacters.setValue(10090, 10091), this.mirroringShapeCharacters.setValue(10091, 10090), this.mirroringShapeCharacters.setValue(10092, 10093), this.mirroringShapeCharacters.setValue(10093, 10092), this.mirroringShapeCharacters.setValue(10094, 10095), this.mirroringShapeCharacters.setValue(10095, 10094), this.mirroringShapeCharacters.setValue(10096, 10097), this.mirroringShapeCharacters.setValue(10097, 10096), this.mirroringShapeCharacters.setValue(10098, 10099), this.mirroringShapeCharacters.setValue(10099, 10098), this.mirroringShapeCharacters.setValue(10100, 10101), this.mirroringShapeCharacters.setValue(10101, 10100), this.mirroringShapeCharacters.setValue(10197, 10198), this.mirroringShapeCharacters.setValue(10198, 10197), this.mirroringShapeCharacters.setValue(10205, 10206), this.mirroringShapeCharacters.setValue(10206, 10205), this.mirroringShapeCharacters.setValue(10210, 10211), this.mirroringShapeCharacters.setValue(10211, 10210), this.mirroringShapeCharacters.setValue(10212, 10213), this.mirroringShapeCharacters.setValue(10213, 10212), this.mirroringShapeCharacters.setValue(10214, 10215), this.mirroringShapeCharacters.setValue(10215, 10214), this.mirroringShapeCharacters.setValue(10216, 10217), this.mirroringShapeCharacters.setValue(10217, 10216), this.mirroringShapeCharacters.setValue(10218, 10219), this.mirroringShapeCharacters.setValue(10219, 10218), this.mirroringShapeCharacters.setValue(10627, 10628), this.mirroringShapeCharacters.setValue(10628, 10627), this.mirroringShapeCharacters.setValue(10629, 10630), this.mirroringShapeCharacters.setValue(10630, 10629), this.mirroringShapeCharacters.setValue(10631, 10632), this.mirroringShapeCharacters.setValue(10632, 10631), this.mirroringShapeCharacters.setValue(10633, 10634), this.mirroringShapeCharacters.setValue(10634, 10633), this.mirroringShapeCharacters.setValue(10635, 10636), this.mirroringShapeCharacters.setValue(10636, 10635), this.mirroringShapeCharacters.setValue(10637, 10640), this.mirroringShapeCharacters.setValue(10638, 10639), this.mirroringShapeCharacters.setValue(10639, 10638), this.mirroringShapeCharacters.setValue(10640, 10637), this.mirroringShapeCharacters.setValue(10641, 10642), this.mirroringShapeCharacters.setValue(10642, 10641), this.mirroringShapeCharacters.setValue(10643, 10644), this.mirroringShapeCharacters.setValue(10644, 10643), this.mirroringShapeCharacters.setValue(10645, 10646), this.mirroringShapeCharacters.setValue(10646, 10645), this.mirroringShapeCharacters.setValue(10647, 10648), this.mirroringShapeCharacters.setValue(10648, 10647), this.mirroringShapeCharacters.setValue(10680, 8856), this.mirroringShapeCharacters.setValue(10688, 10689), this.mirroringShapeCharacters.setValue(10689, 10688), this.mirroringShapeCharacters.setValue(10692, 10693), this.mirroringShapeCharacters.setValue(10693, 10692), this.mirroringShapeCharacters.setValue(10703, 10704), this.mirroringShapeCharacters.setValue(10704, 10703), this.mirroringShapeCharacters.setValue(10705, 10706), this.mirroringShapeCharacters.setValue(10706, 10705), this.mirroringShapeCharacters.setValue(10708, 10709), this.mirroringShapeCharacters.setValue(10709, 10708), this.mirroringShapeCharacters.setValue(10712, 10713), this.mirroringShapeCharacters.setValue(10713, 10712), this.mirroringShapeCharacters.setValue(10714, 10715), this.mirroringShapeCharacters.setValue(10715, 10714), this.mirroringShapeCharacters.setValue(10741, 8725), this.mirroringShapeCharacters.setValue(10744, 10745), this.mirroringShapeCharacters.setValue(10745, 10744), this.mirroringShapeCharacters.setValue(10748, 10749), this.mirroringShapeCharacters.setValue(10749, 10748), this.mirroringShapeCharacters.setValue(10795, 10796), this.mirroringShapeCharacters.setValue(10796, 10795), this.mirroringShapeCharacters.setValue(10797, 10796), this.mirroringShapeCharacters.setValue(10798, 10797), this.mirroringShapeCharacters.setValue(10804, 10805), this.mirroringShapeCharacters.setValue(10805, 10804), this.mirroringShapeCharacters.setValue(10812, 10813), this.mirroringShapeCharacters.setValue(10813, 10812), this.mirroringShapeCharacters.setValue(10852, 10853), this.mirroringShapeCharacters.setValue(10853, 10852), this.mirroringShapeCharacters.setValue(10873, 10874), this.mirroringShapeCharacters.setValue(10874, 10873), this.mirroringShapeCharacters.setValue(10877, 10878), this.mirroringShapeCharacters.setValue(10878, 10877), this.mirroringShapeCharacters.setValue(10879, 10880), this.mirroringShapeCharacters.setValue(10880, 10879), this.mirroringShapeCharacters.setValue(10881, 10882), this.mirroringShapeCharacters.setValue(10882, 10881), this.mirroringShapeCharacters.setValue(10883, 10884), this.mirroringShapeCharacters.setValue(10884, 10883), this.mirroringShapeCharacters.setValue(10891, 10892), this.mirroringShapeCharacters.setValue(10892, 10891), this.mirroringShapeCharacters.setValue(10897, 10898), this.mirroringShapeCharacters.setValue(10898, 10897), this.mirroringShapeCharacters.setValue(10899, 10900), this.mirroringShapeCharacters.setValue(10900, 10899), this.mirroringShapeCharacters.setValue(10901, 10902), this.mirroringShapeCharacters.setValue(10902, 10901), this.mirroringShapeCharacters.setValue(10903, 10904), this.mirroringShapeCharacters.setValue(10904, 10903), this.mirroringShapeCharacters.setValue(10905, 10906), this.mirroringShapeCharacters.setValue(10906, 10905), this.mirroringShapeCharacters.setValue(10907, 10908), this.mirroringShapeCharacters.setValue(10908, 10907), this.mirroringShapeCharacters.setValue(10913, 10914), this.mirroringShapeCharacters.setValue(10914, 10913), this.mirroringShapeCharacters.setValue(10918, 10919), this.mirroringShapeCharacters.setValue(10919, 10918), this.mirroringShapeCharacters.setValue(10920, 10921), this.mirroringShapeCharacters.setValue(10921, 10920), this.mirroringShapeCharacters.setValue(10922, 10923), this.mirroringShapeCharacters.setValue(10923, 10922), this.mirroringShapeCharacters.setValue(10924, 10925), this.mirroringShapeCharacters.setValue(10925, 10924), this.mirroringShapeCharacters.setValue(10927, 10928), this.mirroringShapeCharacters.setValue(10928, 10927), this.mirroringShapeCharacters.setValue(10931, 10932), this.mirroringShapeCharacters.setValue(10932, 10931), this.mirroringShapeCharacters.setValue(10939, 10940), this.mirroringShapeCharacters.setValue(10940, 10939), this.mirroringShapeCharacters.setValue(10941, 10942), this.mirroringShapeCharacters.setValue(10942, 10941), this.mirroringShapeCharacters.setValue(10943, 10944), this.mirroringShapeCharacters.setValue(10944, 10943), this.mirroringShapeCharacters.setValue(10945, 10946), this.mirroringShapeCharacters.setValue(10946, 10945), this.mirroringShapeCharacters.setValue(10947, 10948), this.mirroringShapeCharacters.setValue(10948, 10947), this.mirroringShapeCharacters.setValue(10949, 10950), this.mirroringShapeCharacters.setValue(10950, 10949), this.mirroringShapeCharacters.setValue(10957, 10958), this.mirroringShapeCharacters.setValue(10958, 10957), this.mirroringShapeCharacters.setValue(10959, 10960), this.mirroringShapeCharacters.setValue(10960, 10959), this.mirroringShapeCharacters.setValue(10961, 10962), this.mirroringShapeCharacters.setValue(10962, 10961), this.mirroringShapeCharacters.setValue(10963, 10964), this.mirroringShapeCharacters.setValue(10964, 10963), this.mirroringShapeCharacters.setValue(10965, 10966), this.mirroringShapeCharacters.setValue(10966, 10965), this.mirroringShapeCharacters.setValue(10974, 8870), this.mirroringShapeCharacters.setValue(10979, 8873), this.mirroringShapeCharacters.setValue(10980, 8872), this.mirroringShapeCharacters.setValue(10981, 8875), this.mirroringShapeCharacters.setValue(10988, 10989), this.mirroringShapeCharacters.setValue(10989, 10988), this.mirroringShapeCharacters.setValue(10999, 11e3), this.mirroringShapeCharacters.setValue(11e3, 10999), this.mirroringShapeCharacters.setValue(11001, 11002), this.mirroringShapeCharacters.setValue(11002, 11001), this.mirroringShapeCharacters.setValue(12296, 12297), this.mirroringShapeCharacters.setValue(12297, 12296), this.mirroringShapeCharacters.setValue(12298, 12299), this.mirroringShapeCharacters.setValue(12299, 12298), this.mirroringShapeCharacters.setValue(12300, 12301), this.mirroringShapeCharacters.setValue(12301, 12300), this.mirroringShapeCharacters.setValue(12302, 12303), this.mirroringShapeCharacters.setValue(12303, 12302), this.mirroringShapeCharacters.setValue(12304, 12305), this.mirroringShapeCharacters.setValue(12305, 12304), this.mirroringShapeCharacters.setValue(12308, 12309), this.mirroringShapeCharacters.setValue(12309, 12308), this.mirroringShapeCharacters.setValue(12310, 12311), this.mirroringShapeCharacters.setValue(12311, 12310), this.mirroringShapeCharacters.setValue(12312, 12313), this.mirroringShapeCharacters.setValue(12313, 12312), this.mirroringShapeCharacters.setValue(12314, 12315), this.mirroringShapeCharacters.setValue(12315, 12314), this.mirroringShapeCharacters.setValue(65288, 65289), this.mirroringShapeCharacters.setValue(65289, 65288), this.mirroringShapeCharacters.setValue(65308, 65310), this.mirroringShapeCharacters.setValue(65310, 65308), this.mirroringShapeCharacters.setValue(65339, 65341), this.mirroringShapeCharacters.setValue(65341, 65339), this.mirroringShapeCharacters.setValue(65371, 65373), this.mirroringShapeCharacters.setValue(65373, 65371), this.mirroringShapeCharacters.setValue(65375, 65376), this.mirroringShapeCharacters.setValue(65376, 65375), this.mirroringShapeCharacters.setValue(65378, 65379), this.mirroringShapeCharacters.setValue(65379, 65378) }, e }(), EN = function () { function e() { this.types = [], this.textOrder = -1, this.rtlCharacterTypes = new Array(65536), this.L = 0, this.LRE = 1, this.LRO = 2, this.R = 3, this.AL = 4, this.RLE = 5, this.RLO = 6, this.PDF = 7, this.EN = 8, this.ES = 9, this.ET = 10, this.AN = 11, this.CS = 12, this.NSM = 13, this.BN = 14, this.B = 15, this.S = 16, this.WS = 17, this.ON = 18, this.charTypes = [this.L, this.EN, this.BN, this.ES, this.ES, this.S, this.ET, this.ET, this.B, this.AN, this.AN, this.S, this.CS, this.CS, this.WS, this.NSM, this.NSM, this.B, this.BN, 27, this.BN, 28, 30, this.B, 31, 31, this.S, 32, 32, this.WS, 33, 34, this.ON, 35, 37, this.ET, 38, 42, this.ON, 43, 43, this.ET, 44, 44, this.CS, 45, 45, this.ET, 46, 46, this.CS, 47, 47, this.CS, 48, 57, this.EN, 58, 58, this.CS, 59, 64, this.ON, 65, 90, this.L, 91, 96, this.ON, 97, 122, this.L, 123, 126, this.ON, 127, 132, this.BN, 133, 133, this.B, 134, 159, this.BN, 160, 160, this.CS, 161, 161, this.ON, 162, 165, this.ET, 166, 169, this.ON, 170, 170, this.L, 171, 175, this.ON, 176, 177, this.ET, 178, 179, this.EN, 180, 180, this.ON, 181, 181, this.L, 182, 184, this.ON, 185, 185, this.EN, 186, 186, this.L, 187, 191, this.ON, 192, 214, this.L, 215, 215, this.ON, 216, 246, this.L, 247, 247, this.ON, 248, 696, this.L, 697, 698, this.ON, 699, 705, this.L, 706, 719, this.ON, 720, 721, this.L, 722, 735, this.ON, 736, 740, this.L, 741, 749, this.ON, 750, 750, this.L, 751, 767, this.ON, 768, 855, this.NSM, 856, 860, this.L, 861, 879, this.NSM, 880, 883, this.L, 884, 885, this.ON, 886, 893, this.L, 894, 894, this.ON, 895, 899, this.L, 900, 901, this.ON, 902, 902, this.L, 903, 903, this.ON, 904, 1013, this.L, 1014, 1014, this.ON, 1015, 1154, this.L, 1155, 1158, this.NSM, 1159, 1159, this.L, 1160, 1161, this.NSM, 1162, 1417, this.L, 1418, 1418, this.ON, 1419, 1424, this.L, 1425, 1441, this.NSM, 1442, 1442, this.L, 1443, 1465, this.NSM, 1466, 1466, this.L, 1467, 1469, this.NSM, 1470, 1470, this.R, 1471, 1471, this.NSM, 1472, 1472, this.R, 1473, 1474, this.NSM, 1475, 1475, this.R, 1476, 1476, this.NSM, 1477, 1487, this.L, 1488, 1514, this.R, 1515, 1519, this.L, 1520, 1524, this.R, 1525, 1535, this.L, 1536, 1539, this.AL, 1540, 1547, this.L, 1548, 1548, this.CS, 1549, 1549, this.AL, 1550, 1551, this.ON, 1552, 1557, this.NSM, 1558, 1562, this.L, 1563, 1563, this.AL, 1564, 1566, this.L, 1567, 1567, this.AL, 1568, 1568, this.L, 1569, 1594, this.AL, 1595, 1599, this.L, 1600, 1610, this.AL, 1611, 1624, this.NSM, 1625, 1631, this.L, 1632, 1641, this.AN, 1642, 1642, this.ET, 1643, 1644, this.AN, 1645, 1647, this.AL, 1648, 1648, this.NSM, 1649, 1749, this.AL, 1750, 1756, this.NSM, 1757, 1757, this.AL, 1758, 1764, this.NSM, 1765, 1766, this.AL, 1767, 1768, this.NSM, 1769, 1769, this.ON, 1770, 1773, this.NSM, 1774, 1775, this.AL, 1776, 1785, this.EN, 1786, 1805, this.AL, 1806, 1806, this.L, 1807, 1807, this.BN, 1808, 1808, this.AL, 1809, 1809, this.NSM, 1810, 1839, this.AL, 1840, 1866, this.NSM, 1867, 1868, this.L, 1869, 1871, this.AL, 1872, 1919, this.L, 1920, 1957, this.AL, 1958, 1968, this.NSM, 1969, 1969, this.AL, 1970, 2304, this.L, 2305, 2306, this.NSM, 2307, 2363, this.L, 2364, 2364, this.NSM, 2365, 2368, this.L, 2369, 2376, this.NSM, 2377, 2380, this.L, 2381, 2381, this.NSM, 2382, 2384, this.L, 2385, 2388, this.NSM, 2389, 2401, this.L, 2402, 2403, this.NSM, 2404, 2432, this.L, 2433, 2433, this.NSM, 2434, 2491, this.L, 2492, 2492, this.NSM, 2493, 2496, this.L, 2497, 2500, this.NSM, 2501, 2508, this.L, 2509, 2509, this.NSM, 2510, 2529, this.L, 2530, 2531, this.NSM, 2532, 2545, this.L, 2546, 2547, this.ET, 2548, 2560, this.L, 2561, 2562, this.NSM, 2563, 2619, this.L, 2620, 2620, this.NSM, 2621, 2624, this.L, 2625, 2626, this.NSM, 2627, 2630, this.L, 2631, 2632, this.NSM, 2633, 2634, this.L, 2635, 2637, this.NSM, 2638, 2671, this.L, 2672, 2673, this.NSM, 2674, 2688, this.L, 2689, 2690, this.NSM, 2691, 2747, this.L, 2748, 2748, this.NSM, 2749, 2752, this.L, 2753, 2757, this.NSM, 2758, 2758, this.L, 2759, 2760, this.NSM, 2761, 2764, this.L, 2765, 2765, this.NSM, 2766, 2785, this.L, 2786, 2787, this.NSM, 2788, 2800, this.L, 2801, 2801, this.ET, 2802, 2816, this.L, 2817, 2817, this.NSM, 2818, 2875, this.L, 2876, 2876, this.NSM, 2877, 2878, this.L, 2879, 2879, this.NSM, 2880, 2880, this.L, 2881, 2883, this.NSM, 2884, 2892, this.L, 2893, 2893, this.NSM, 2894, 2901, this.L, 2902, 2902, this.NSM, 2903, 2945, this.L, 2946, 2946, this.NSM, 2947, 3007, this.L, 3008, 3008, this.NSM, 3009, 3020, this.L, 3021, 3021, this.NSM, 3022, 3058, this.L, 3059, 3064, this.ON, 3065, 3065, this.ET, 3066, 3066, this.ON, 3067, 3133, this.L, 3134, 3136, this.NSM, 3137, 3141, this.L, 3142, 3144, this.NSM, 3145, 3145, this.L, 3146, 3149, this.NSM, 3150, 3156, this.L, 3157, 3158, this.NSM, 3159, 3259, this.L, 3260, 3260, this.NSM, 3261, 3275, this.L, 3276, 3277, this.NSM, 3278, 3392, this.L, 3393, 3395, this.NSM, 3396, 3404, this.L, 3405, 3405, this.NSM, 3406, 3529, this.L, 3530, 3530, this.NSM, 3531, 3537, this.L, 3538, 3540, this.NSM, 3541, 3541, this.L, 3542, 3542, this.NSM, 3543, 3632, this.L, 3633, 3633, this.NSM, 3634, 3635, this.L, 3636, 3642, this.NSM, 3643, 3646, this.L, 3647, 3647, this.ET, 3648, 3654, this.L, 3655, 3662, this.NSM, 3663, 3760, this.L, 3761, 3761, this.NSM, 3762, 3763, this.L, 3764, 3769, this.NSM, 3770, 3770, this.L, 3771, 3772, this.NSM, 3773, 3783, this.L, 3784, 3789, this.NSM, 3790, 3863, this.L, 3864, 3865, this.NSM, 3866, 3892, this.L, 3893, 3893, this.NSM, 3894, 3894, this.L, 3895, 3895, this.NSM, 3896, 3896, this.L, 3897, 3897, this.NSM, 3898, 3901, this.ON, 3902, 3952, this.L, 3953, 3966, this.NSM, 3967, 3967, this.L, 3968, 3972, this.NSM, 3973, 3973, this.L, 3974, 3975, this.NSM, 3976, 3983, this.L, 3984, 3991, this.NSM, 3992, 3992, this.L, 3993, 4028, this.NSM, 4029, 4037, this.L, 4038, 4038, this.NSM, 4039, 4140, this.L, 4141, 4144, this.NSM, 4145, 4145, this.L, 4146, 4146, this.NSM, 4147, 4149, this.L, 4150, 4151, this.NSM, 4152, 4152, this.L, 4153, 4153, this.NSM, 4154, 4183, this.L, 4184, 4185, this.NSM, 4186, 5759, this.L, 5760, 5760, this.WS, 5761, 5786, this.L, 5787, 5788, this.ON, 5789, 5905, this.L, 5906, 5908, this.NSM, 5909, 5937, this.L, 5938, 5940, this.NSM, 5941, 5969, this.L, 5970, 5971, this.NSM, 5972, 6001, this.L, 6002, 6003, this.NSM, 6004, 6070, this.L, 6071, 6077, this.NSM, 6078, 6085, this.L, 6086, 6086, this.NSM, 6087, 6088, this.L, 6089, 6099, this.NSM, 6100, 6106, this.L, 6107, 6107, this.ET, 6108, 6108, this.L, 6109, 6109, this.NSM, 6110, 6127, this.L, 6128, 6137, this.ON, 6138, 6143, this.L, 6144, 6154, this.ON, 6155, 6157, this.NSM, 6158, 6158, this.WS, 6159, 6312, this.L, 6313, 6313, this.NSM, 6314, 6431, this.L, 6432, 6434, this.NSM, 6435, 6438, this.L, 6439, 6443, this.NSM, 6444, 6449, this.L, 6450, 6450, this.NSM, 6451, 6456, this.L, 6457, 6459, this.NSM, 6460, 6463, this.L, 6464, 6464, this.ON, 6465, 6467, this.L, 6468, 6469, this.ON, 6470, 6623, this.L, 6624, 6655, this.ON, 6656, 8124, this.L, 8125, 8125, this.ON, 8126, 8126, this.L, 8127, 8129, this.ON, 8130, 8140, this.L, 8141, 8143, this.ON, 8144, 8156, this.L, 8157, 8159, this.ON, 8160, 8172, this.L, 8173, 8175, this.ON, 8176, 8188, this.L, 8189, 8190, this.ON, 8191, 8191, this.L, 8192, 8202, this.WS, 8203, 8205, this.BN, 8206, 8206, this.L, 8207, 8207, this.R, 8208, 8231, this.ON, 8232, 8232, this.WS, 8233, 8233, this.B, 8234, 8234, this.LRE, 8235, 8235, this.RLE, 8236, 8236, this.PDF, 8237, 8237, this.LRO, 8238, 8238, this.RLO, 8239, 8239, this.WS, 8240, 8244, this.ET, 8245, 8276, this.ON, 8277, 8278, this.L, 8279, 8279, this.ON, 8280, 8286, this.L, 8287, 8287, this.WS, 8288, 8291, this.BN, 8292, 8297, this.L, 8298, 8303, this.BN, 8304, 8304, this.EN, 8305, 8307, this.L, 8308, 8313, this.EN, 8314, 8315, this.ET, 8316, 8318, this.ON, 8319, 8319, this.L, 8320, 8329, this.EN, 8330, 8331, this.ET, 8332, 8334, this.ON, 8335, 8351, this.L, 8352, 8369, this.ET, 8370, 8399, this.L, 8400, 8426, this.NSM, 8427, 8447, this.L, 8448, 8449, this.ON, 8450, 8450, this.L, 8451, 8454, this.ON, 8455, 8455, this.L, 8456, 8457, this.ON, 8458, 8467, this.L, 8468, 8468, this.ON, 8469, 8469, this.L, 8470, 8472, this.ON, 8473, 8477, this.L, 8478, 8483, this.ON, 8484, 8484, this.L, 8485, 8485, this.ON, 8486, 8486, this.L, 8487, 8487, this.ON, 8488, 8488, this.L, 8489, 8489, this.ON, 8490, 8493, this.L, 8494, 8494, this.ET, 8495, 8497, this.L, 8498, 8498, this.ON, 8499, 8505, this.L, 8506, 8507, this.ON, 8508, 8511, this.L, 8512, 8516, this.ON, 8517, 8521, this.L, 8522, 8523, this.ON, 8524, 8530, this.L, 8531, 8543, this.ON, 8544, 8591, this.L, 8592, 8721, this.ON, 8722, 8723, this.ET, 8724, 9013, this.ON, 9014, 9082, this.L, 9083, 9108, this.ON, 9109, 9109, this.L, 9110, 9168, this.ON, 9169, 9215, this.L, 9216, 9254, this.ON, 9255, 9279, this.L, 9280, 9290, this.ON, 9291, 9311, this.L, 9312, 9371, this.EN, 9372, 9449, this.L, 9450, 9450, this.EN, 9451, 9751, this.ON, 9752, 9752, this.L, 9753, 9853, this.ON, 9854, 9855, this.L, 9856, 9873, this.ON, 9874, 9887, this.L, 9888, 9889, this.ON, 9890, 9984, this.L, 9985, 9988, this.ON, 9989, 9989, this.L, 9990, 9993, this.ON, 9994, 9995, this.L, 9996, 10023, this.ON, 10024, 10024, this.L, 10025, 10059, this.ON, 10060, 10060, this.L, 10061, 10061, this.ON, 10062, 10062, this.L, 10063, 10066, this.ON, 10067, 10069, this.L, 10070, 10070, this.ON, 10071, 10071, this.L, 10072, 10078, this.ON, 10079, 10080, this.L, 10081, 10132, this.ON, 10133, 10135, this.L, 10136, 10159, this.ON, 10160, 10160, this.L, 10161, 10174, this.ON, 10175, 10191, this.L, 10192, 10219, this.ON, 10220, 10223, this.L, 10224, 11021, this.ON, 11022, 11903, this.L, 11904, 11929, this.ON, 11930, 11930, this.L, 11931, 12019, this.ON, 12020, 12031, this.L, 12032, 12245, this.ON, 12246, 12271, this.L, 12272, 12283, this.ON, 12284, 12287, this.L, 12288, 12288, this.WS, 12289, 12292, this.ON, 12293, 12295, this.L, 12296, 12320, this.ON, 12321, 12329, this.L, 12330, 12335, this.NSM, 12336, 12336, this.ON, 12337, 12341, this.L, 12342, 12343, this.ON, 12344, 12348, this.L, 12349, 12351, this.ON, 12352, 12440, this.L, 12441, 12442, this.NSM, 12443, 12444, this.ON, 12445, 12447, this.L, 12448, 12448, this.ON, 12449, 12538, this.L, 12539, 12539, this.ON, 12540, 12828, this.L, 12829, 12830, this.ON, 12831, 12879, this.L, 12880, 12895, this.ON, 12896, 12923, this.L, 12924, 12925, this.ON, 12926, 12976, this.L, 12977, 12991, this.ON, 12992, 13003, this.L, 13004, 13007, this.ON, 13008, 13174, this.L, 13175, 13178, this.ON, 13179, 13277, this.L, 13278, 13279, this.ON, 13280, 13310, this.L, 13311, 13311, this.ON, 13312, 19903, this.L, 19904, 19967, this.ON, 19968, 42127, this.L, 42128, 42182, this.ON, 42183, 64284, this.L, 64285, 64285, this.R, 64286, 64286, this.NSM, 64287, 64296, this.R, 64297, 64297, this.ET, 64298, 64310, this.R, 64311, 64311, this.L, 64312, 64316, this.R, 64317, 64317, this.L, 64318, 64318, this.R, 64319, 64319, this.L, 64320, 64321, this.R, 64322, 64322, this.L, 64323, 64324, this.R, 64325, 64325, this.L, 64326, 64335, this.R, 64336, 64433, this.AL, 64434, 64466, this.L, 64467, 64829, this.AL, 64830, 64831, this.ON, 64832, 64847, this.L, 64848, 64911, this.AL, 64912, 64913, this.L, 64914, 64967, this.AL, 64968, 65007, this.L, 65008, 65020, this.AL, 65021, 65021, this.ON, 65022, 65023, this.L, 65024, 65039, this.NSM, 65040, 65055, this.L, 65056, 65059, this.NSM, 65060, 65071, this.L, 65072, 65103, this.ON, 65104, 65104, this.CS, 65105, 65105, this.ON, 65106, 65106, this.CS, 65107, 65107, this.L, 65108, 65108, this.ON, 65109, 65109, this.CS, 65110, 65118, this.ON, 65119, 65119, this.ET, 65120, 65121, this.ON, 65122, 65123, this.ET, 65124, 65126, this.ON, 65127, 65127, this.L, 65128, 65128, this.ON, 65129, 65130, this.ET, 65131, 65131, this.ON, 65132, 65135, this.L, 65136, 65140, this.AL, 65141, 65141, this.L, 65142, 65276, this.AL, 65277, 65278, this.L, 65279, 65279, this.BN, 65280, 65280, this.L, 65281, 65282, this.ON, 65283, 65285, this.ET, 65286, 65290, this.ON, 65291, 65291, this.ET, 65292, 65292, this.CS, 65293, 65293, this.ET, 65294, 65294, this.CS, 65295, 65295, this.ES, 65296, 65305, this.EN, 65306, 65306, this.CS, 65307, 65312, this.ON, 65313, 65338, this.L, 65339, 65344, this.ON, 65345, 65370, this.L, 65371, 65381, this.ON, 65382, 65503, this.L, 65504, 65505, this.ET, 65506, 65508, this.ON, 65509, 65510, this.ET, 65511, 65511, this.L, 65512, 65518, this.ON, 65519, 65528, this.L, 65529, 65531, this.BN, 65532, 65533, this.ON, 65534, 65535, this.L]; for (var e = 0; e < this.charTypes.length; ++e)for (var t = this.charTypes[e], i = this.charTypes[++e], n = this.charTypes[++e]; t <= i;)this.rtlCharacterTypes[t++] = n } return e.prototype.getVisualOrder = function (e, t) { this.types = this.getCharacterCode(e), this.textOrder = t ? this.LRE : this.L, this.doVisualOrder(); for (var i = [], n = 0; n < this.levels.length; n++)i[n] = this.levels[n]; return i }, e.prototype.getCharacterCode = function (e) { for (var t = [], i = 0; i < e.length; i++)t[i] = this.rtlCharacterTypes[e[i].charCodeAt(0)]; return t }, e.prototype.setDefaultLevels = function () { for (var e = 0; e < this.length; e++)this.levels[e] = this.textOrder }, e.prototype.setLevels = function () { this.setDefaultLevels(); for (var e = 0; e < this.length; ++e) { var t = this.levels[e]; 0 != (128 & t) && (t &= 127, this.result[e] = 0 == (1 & t) ? this.L : this.R), this.levels[e] = t } }, e.prototype.updateLevels = function (e, t, i) { if (0 == (1 & t)) for (var n = e; n < i; ++n)this.result[n] === this.R ? this.levels[n] += 1 : this.result[n] !== this.L && (this.levels[n] += 2); else for (n = e; n < i; ++n)this.result[n] !== this.R && (this.levels[n] += 1) }, e.prototype.doVisualOrder = function () { this.length = this.types.length, this.result = this.types, this.levels = [], this.setLevels(), this.length = this.getEmbeddedCharactersLength(); for (var e = this.textOrder, t = 0; t < this.length;) { for (var i = this.levels[t], n = 0 == (1 & Math.max(e, i)) ? this.L : this.R, r = t + 1; r < this.length && this.levels[r] === i;)++r; var o = r < this.length ? this.levels[r] : this.textOrder, s = 0 == (1 & Math.max(o, i)) ? this.L : this.R; this.checkNSM(t, r, i, n, s), this.updateLevels(t, i, r), e = i, t = r } this.checkEmbeddedCharacters(this.length) }, e.prototype.getEmbeddedCharactersLength = function () { for (var e = 0, t = 0; t < this.length; ++t)this.types[t] !== this.LRE && this.types[t] !== this.RLE && this.types[t] !== this.LRO && this.types[t] !== this.RLO && this.types[t] !== this.PDF && this.types[t] !== this.BN && (this.result[e] = this.result[t], this.levels[e] = this.levels[t], e++); return e }, e.prototype.checkEmbeddedCharacters = function (e) { for (var t = this.types.length - 1; t >= 0; --t)this.types[t] === this.LRE || this.types[t] === this.RLE || this.types[t] === this.LRO || this.types[t] === this.RLO || this.types[t] === this.PDF || this.types[t] === this.BN ? (this.result[t] = this.types[t], this.levels[t] = -1) : (e -= 1, this.result[t] = this.result[e], this.levels[t] = this.levels[e]); for (t = 0; t < this.types.length; t++)-1 === this.levels[t] && (this.levels[t] = 0 === t ? this.textOrder : this.levels[t - 1]) }, e.prototype.checkNSM = function (e, t, i, n, r) { for (var o = n, s = e; s < t; ++s)this.result[s] === this.NSM ? this.result[s] = o : o = this.result[s]; this.checkEuropeanDigits(e, t, i, n, r) }, e.prototype.checkEuropeanDigits = function (e, t, i, n, r) { for (var o = e; o < t; ++o)if (this.result[o] === this.EN) for (var s = o - 1; s >= e; --s)if (this.result[s] === this.L || this.result[s] === this.R || this.result[s] === this.AL) { this.result[s] === this.AL && (this.result[o] = this.AN); break } this.checkArabicCharacters(e, t, i, n, r) }, e.prototype.checkArabicCharacters = function (e, t, i, n, r) { for (var o = e; o < t; ++o)this.result[o] === this.AL && (this.result[o] = this.R); this.checkEuropeanNumberSeparator(e, t, i, n, r) }, e.prototype.checkEuropeanNumberSeparator = function (e, t, i, n, r) { for (var o = e + 1; o < t - 1; ++o)if (this.result[o] === this.ES || this.result[o] === this.CS) { var s = this.result[o - 1], a = this.result[o + 1]; s === this.EN && a === this.EN ? this.result[o] = this.EN : this.result[o] === this.CS && s === this.AN && a === this.AN && (this.result[o] = this.AN) } this.checkEuropeanNumberTerminator(e, t, i, n, r) }, e.prototype.checkEuropeanNumberTerminator = function (e, t, i, n, r) { for (var o = e; o < t; ++o)if (this.result[o] === this.ET) { var s = o, a = []; a.push(this.ET); var l = this.getLength(s, t, a), h = s === e ? n : this.result[s - 1]; if (h !== this.EN && (h = l === t ? r : this.result[l]), h === this.EN) for (var d = s; d < l; ++d)this.result[d] = this.EN; o = l } this.checkOtherNeutrals(e, t, i, n, r) }, e.prototype.checkOtherNeutrals = function (e, t, i, n, r) { for (var o = e; o < t; ++o)this.result[o] !== this.ES && this.result[o] !== this.ET && this.result[o] !== this.CS || (this.result[o] = this.ON); this.checkOtherCharacters(e, t, i, n, r) }, e.prototype.checkOtherCharacters = function (e, t, i, n, r) { for (var o = e; o < t; ++o)if (this.result[o] === this.EN) { for (var s = n, a = o - 1; a >= e; --a)if (this.result[a] === this.L || this.result[a] === this.R) { s = this.result[a]; break } s === this.L && (this.result[o] = this.L) } this.checkCommanCharacters(e, t, i, n, r) }, e.prototype.getLength = function (e, t, i) { for (--e; ++e < t;) { for (var n = this.result[e], r = 0; r < i.length; ++r)n === i[r] && (e = this.getLength(++e, t, i)); return e } return t }, e.prototype.checkCommanCharacters = function (e, t, i, n, r) { for (var o = e; o < t; ++o)if (this.result[o] === this.WS || this.result[o] === this.ON || this.result[o] === this.B || this.result[o] === this.S) { var s = o, a = [this.B, this.S, this.WS, this.ON], l = this.getLength(s, t, a), h = 0, d = 0, c = 0; s === e ? h = n : (h = this.result[s - 1]) === this.AN ? h = this.R : h === this.EN && (h = this.R), l === t ? d = r : (d = this.result[l]) === this.AN ? d = this.R : d === this.EN && (d = this.R), c = h === d ? h : 0 == (1 & i) ? this.L : this.R; for (var p = s; p < l; ++p)this.result[p] = c; o = l } }, e }(), jN = function () { function e() { this.openBracket = "(", this.closeBracket = ")" } return e.prototype.layout = function (e, t, i, n, r) { if (null == e) throw new Error("ArgumentNullException : line"); if (null == t) throw new Error("ArgumentNullException : font"); var o = []; return t.Unicode ? o = this.customLayout(e, i, r, t, n) : (o = [])[0] = e, o }, e.prototype.splitLayout = function (e, t, i, n, r) { if (null == e) throw new Error("ArgumentNullException : line"); if (null == t) throw new Error("ArgumentNullException : font"); return this.customSplitLayout(e, t, i, n, r) }, e.prototype.getGlyphIndex = function (e, t, i, n, r) { if (null == e) throw new Error("ArgumentNullException : line"); if (null == t) throw new Error("ArgumentNullException : font"); if (n = null, 0 === e.length) return { success: !1, glyphs: n }; var o = (new TN).shape(e, 0), s = t.fontInternal.ttfReader; n = new Uint16Array(o.length); for (var a = 0, l = 0, h = o.length; l < h; l++) { var d = o[l], c = s.getGlyph(d); null !== c && void 0 !== c && (n[a++] = c.index) } return { success: !0, glyphs: n } }, e.prototype.customLayout = function (e, t, i, n, r) { if (null === r || void 0 === r) { if (null == e) throw new Error("ArgumentNullException : line"); var o = null; if (null !== i && i.textDirection !== Wk.None) { o = (new AN).getLogicalToVisualString(e, t) } return o } if (null == e) throw new Error("ArgumentNullException : line"); if (null == n) throw new Error("ArgumentNullException : font"); var s = null; if (null !== i && i.textDirection !== Wk.None) { var a = (new TN).shape(e, 0); s = this.customLayout(a, t, i) } o = []; if (r) { for (var l = s.split(""), h = l.length, d = 0; d < h; d++)l[d] = this.addChars(n, l[d]); o = l } else (o = [])[0] = this.addChars(n, s); return o }, e.prototype.addChars = function (e, t) { var i = t; if (null == e) throw new Error("ArgumentNullException : font"); if (null == i) throw new Error("ArgumentNullException : line"); var n = i, r = e.fontInternal.ttfReader; e.setSymbols(n), n = r.convertString(n); var o = Sk.toUnicodeArray(n, !1); return n = Sk.byteToString(o) }, e.prototype.customSplitLayout = function (e, t, i, n, r) { if (null == e) throw new Error("ArgumentNullException : line"); if (null == t) throw new Error("ArgumentNullException : font"); return this.customLayout(e, i, r).split("") }, e }(), IN = function () { function e(e, t, i) { this.currentColorSpace = zk.Rgb, this.previousTextRenderingMode = kk.Fill, this.previousCharacterSpacing = 0, this.previousWordSpacing = 0, this.previousTextScaling = 100, this.procedureSets = new VP, this.isNormalRender = !0, this.isUseFontSize = !1, this.isItalic = !1, this.isEmfTextScaled = !1, this.isEmf = !1, this.isEmfPlus = !1, this.isBaselineFormat = !0, this.emfScalingFactor = new Uk(0, 0), this.colorSpaceChanged = !1, this.dictionaryProperties = new qI, this.isOverloadWithPosition = !1, this.isPointOverload = !1, this.currentColorSpaces = ["RGB", "CMYK", "GrayScale", "Indexed"], this.isImageOptimized = !1, this.graphicsState = [], this.istransparencySet = !1, this.internalAutomaticFields = null, this.startCutIndex = -1, this.getResources = t, this.canvasSize = e, this.pdfStreamWriter = i instanceof RP ? i : new RP(i), this.initialize() } return Object.defineProperty(e.prototype, "stringLayoutResult", { get: function () { return this.pdfStringLayoutResult }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return this.canvasSize }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "mediaBoxUpperRightBound", { get: function () { return void 0 === this.internalMediaBoxUpperRightBound && (this.internalMediaBoxUpperRightBound = 0), this.internalMediaBoxUpperRightBound }, set: function (e) { this.internalMediaBoxUpperRightBound = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "clientSize", { get: function () { return new Uk(this.clipBounds.width, this.clipBounds.height) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "colorSpace", { get: function () { return this.currentColorSpace }, set: function (e) { this.currentColorSpace = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "streamWriter", { get: function () { return this.pdfStreamWriter }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "matrix", { get: function () { return null == this.transformationMatrix && (this.transformationMatrix = new BP), this.transformationMatrix }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "layer", { get: function () { return this.pageLayer }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "page", { get: function () { return this.pageLayer.page }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "automaticFields", { get: function () { return null != this.internalAutomaticFields && void 0 !== this.internalAutomaticFields || (this.internalAutomaticFields = new _P), this.internalAutomaticFields }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { this.bStateSaved = !1, this.currentPen = null, this.currentBrush = null, this.currentFont = null, this.currentColorSpace = zk.Rgb, this.bCSInitialized = !1, this.transformationMatrix = null, this.previousTextRenderingMode = -1, this.previousCharacterSpacing = -1, this.previousWordSpacing = -1, this.previousTextScaling = -100, this.currentStringFormat = null, this.clipBounds = new qk(new Yk(0, 0), this.size), this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf) }, e.prototype.drawPdfTemplate = function (e, t, i) { if (void 0 === i) { if (null == e) throw Error("ArgumentNullException-template"); this.drawPdfTemplate(e, t, e.size) } else { if (null == e) throw Error("ArgumentNullException-template"); var n = e.width > 0 ? i.width / e.width : 1, r = e.height > 0 ? i.height / e.height : 1, o = !(1 === n && 1 === r), s = this.save(), a = new BP; null != this.pageLayer && this.getTranslateTransform(t.x, t.y + i.height, a), o && this.getScaleTransform(n, r, a), this.pdfStreamWriter.modifyCtm(a); var l = this.getResources.getResources().getName(e); this.pdfStreamWriter.executeObject(l), this.restore(s); var h = e.graphics; if (null != h) for (var d = 0; d < h.automaticFields.automaticFields.length; d++) { var c = h.automaticFields.automaticFields[d], p = new Yk(c.location.x + t.x, c.location.y + t.y), u = 0 == e.size.width ? 0 : i.width / e.size.width, g = 0 == e.size.height ? 0 : i.height / e.size.height; this.automaticFields.add(new GP(c.field, p, u, g)), this.page.dictionary.modify() } this.getResources.getResources().requireProcedureSet(this.procedureSets.imageB), this.getResources.getResources().requireProcedureSet(this.procedureSets.imageC), this.getResources.getResources().requireProcedureSet(this.procedureSets.imageI), this.getResources.getResources().requireProcedureSet(this.procedureSets.text) } }, e.prototype.drawString = function (e, t, i, n, r, o, s, a, l) { if ("string" == typeof e && t instanceof fP && (i instanceof zP || null === i) && (n instanceof Qk || null === n) && "number" == typeof r && "number" == typeof o && (s instanceof dP || null === s) && void 0 === a) this.isOverloadWithPosition = !0, this.drawString(e, t, i, n, r, o, this.clientSize.width - r, 0, s); else { var h = i, d = n, c = r, p = o, u = s, g = a, m = l, f = (new pP).layout(e, t, m, new Uk(u, g), this.isOverloadWithPosition, this.clientSize); if (!f.empty) { var y = this.checkCorrectLayoutRectangle(f.actualSize, c, p, m); u <= 0 && (c = y.x, u = y.width), g <= 0 && (p = y.y, g = y.height), this.drawStringLayoutResult(f, t, h, d, new qk(c, p, u, g), m), this.isEmfTextScaled = !1, this.emfScalingFactor = new Uk(0, 0) } this.getResources.getResources().requireProcedureSet(this.procedureSets.text), this.isNormalRender = !0, this.pdfStringLayoutResult = f, this.isUseFontSize = !1 } }, e.prototype.drawLine = function (e, t, i, n, r) { if (t instanceof Yk) { var o = t, s = i; this.drawLine(e, o.x, o.y, s.x, s.y) } else { o = t, s = i; var a = n, l = r; this.stateControl(e, null, null); var h = this.streamWriter; h.beginPath(o, s), h.appendLineSegment(a, l), h.strokePath(), this.getResources.getResources().requireProcedureSet(this.procedureSets.pdf) } }, e.prototype.drawRectangle = function (e, t, i, n, r, o) { if (e instanceof zP && "number" == typeof t) { var s = i; this.drawRectangle(e, null, t, s, n, r) } else if (e instanceof Qk && "number" == typeof t) { s = i; this.drawRectangle(null, e, t, s, n, r) } else { s = i; var a = n, l = r, h = o; t instanceof Jk && t.color.isEmpty && (t = null); var d = e, c = t; this.stateControl(d, c, null), this.streamWriter.appendRectangle(s, a, l, h), this.drawPath(d, c, !1) } }, e.prototype.drawPath = function (e, t, i, n) { if ("boolean" == typeof i) { var r = i; this.drawPath(e, t, Rk.Winding, r) } else { var o = null != e, s = null != t, a = (r = i) === Rk.Alternate; o && s ? this.streamWriter.fillStrokePath(a) : o || s ? o ? this.streamWriter.strokePath() : this.streamWriter.fillPath(a) : this.streamWriter.endPath() } }, e.prototype.drawImage = function (e, t, i, n, r) { if ("number" == typeof t && "number" == typeof i && void 0 === n) { var o = e.physicalDimension; this.drawImage(e, t, i, o.width, o.height) } else { var s = t, a = i, l = r; e.save(); var h = new BP; this.getTranslateTransform(s, a + l, h), this.getScaleTransform(n, r, h), this.pdfStreamWriter.write("q"), this.pdfStreamWriter.modifyCtm(h); var d = this.getResources.getResources(); void 0 !== this.pageLayer && null != this.page && (d.document = this.page.document); var c = d.getName(e); void 0 !== this.pageLayer && this.page.setResources(d), this.pdfStreamWriter.executeObject(c), this.pdfStreamWriter.write(UI.restoreState), this.pdfStreamWriter.write(UI.newLine); var p = this.getResources.getResources(); p.requireProcedureSet(this.procedureSets.imageB), p.requireProcedureSet(this.procedureSets.imageC), p.requireProcedureSet(this.procedureSets.imageI), p.requireProcedureSet(this.procedureSets.text) } }, e.prototype.getLineBounds = function (e, t, i, n, r) { var o; if (!t.empty && e < t.lineCount && e >= 0) { var s = t.lines[e], a = this.getTextVerticalAlignShift(t.actualSize.height, n.height, r) + n.y + t.lineHeight * e, l = s.width, h = this.getHorizontalAlignShift(l, n.width, r), d = this.getLineIndent(s, r, n, 0 === e); h += this.rightToLeft(r) ? 0 : d; var c = n.x + h, p = this.shouldJustify(s, n.width, r) ? n.width - d : l - d, u = t.lineHeight; o = new qk(c, a, p, u) } else o = new qk(0, 0, 0, 0); return o }, e.prototype.checkCorrectLayoutRectangle = function (e, t, i, n) { var r = new qk(t, i, e.width, e.width); if (null != n) { switch (n.alignment) { case Ik.Center: r.x -= r.width / 2; break; case Ik.Right: r.x -= r.width }switch (n.lineAlignment) { case jk.Middle: r.y -= r.height / 2; break; case jk.Bottom: r.y -= r.height } } return r }, e.prototype.setLayer = function (e) { this.pageLayer = e; var t = e.page; null != t && void 0 !== t && (t.beginSave = this.pageSave) }, e.prototype.pageSave = function (e) { if (null != e.graphics.automaticFields) for (var t = 0; t < e.graphics.automaticFields.automaticFields.length; t++) { var i = e.graphics.automaticFields.automaticFields[t]; i.field.performDraw(e.graphics, i.location, i.scalingX, i.scalingY) } }, e.prototype.drawStringLayoutResult = function (e, t, i, n, r, o) { if (e.empty) throw new Error("ArgumentNullException:result"); this.applyStringSettings(t, i, n, o, r); var s = null != o ? o.horizontalScalingFactor : 100; s === this.previousTextScaling || this.isEmfTextScaled || (this.pdfStreamWriter.setTextScaling(s), this.previousTextScaling = s); var a = null == o || 0 === o.lineSpacing ? t.height : o.lineSpacing + t.height, l = 0; l = null != o && o.subSuperScript === eP.SubScript ? a - (t.height + t.metrics.getDescent(o)) : a - t.metrics.getAscent(o), this.shift = l, this.pdfStreamWriter.startNextLine(r.x, r.y - l), this.pdfStreamWriter.setLeading(+a); for (var h = 0, d = "", c = 0; c < e.lines.length; c++)if (h += e.lineHeight, r.y + h > this.clientSize.height) { this.startCutIndex = c; break } for (var p = this.startCutIndex; p < e.lines.length && p >= 0; p++)d += e.lines[p].text; var u = new qk(r.x, r.y, r.width, r.height); if (this.drawLayoutResult(e, t, o, r), this.underlineStrikeoutText(i, n, e, t, u, o), this.isEmfPlus = !1, this.isUseFontSize = !1, -1 !== this.startCutIndex) { this.getNextPage().graphics.drawString(d, t, i, n, r.x, 0, r.width, 0, o) } }, e.prototype.getNextPage = function () { var e = this.currentPage.section, t = e.indexOf(this.currentPage); return t === e.count - 1 ? e.add() : e.getPages()[t + 1] }, e.prototype.setClip = function (e, t) { void 0 === t ? this.setClip(e, Rk.Winding) : (this.pdfStreamWriter.appendRectangle(e), this.pdfStreamWriter.clipPath(t === Rk.Alternate)) }, e.prototype.applyStringSettings = function (e, t, i, n, r) { var o = this.getTextRenderingMode(t, i, n); this.stateControl(t, i, e, n), this.pdfStreamWriter.beginText(), o !== this.previousTextRenderingMode && (this.pdfStreamWriter.setTextRenderingMode(o), this.previousTextRenderingMode = o); var s = null != n ? n.characterSpacing : 0; s === this.previousCharacterSpacing || this.isEmfTextScaled || (this.pdfStreamWriter.setCharacterSpacing(s), this.previousCharacterSpacing = s); var a = null != n ? n.wordSpacing : 0; a !== this.previousWordSpacing && (this.pdfStreamWriter.setWordSpacing(a), this.previousWordSpacing = a) }, e.prototype.getTextVerticalAlignShift = function (e, t, i) { var n = 0; if (t >= 0 && null != i && i.lineAlignment !== jk.Top) switch (i.lineAlignment) { case jk.Middle: n = (t - e) / 2; break; case jk.Bottom: n = t - e }return n }, e.prototype.drawLayoutResult = function (e, t, i, n) { var r = this.getTextVerticalAlignShift(e.actualSize.height, n.height, i); 0 !== r && this.pdfStreamWriter.startNextLine(0, r); for (var o = t, s = null != o && o.isUnicode, a = (null != o && o.isEmbedFont, e.lines), l = 0, h = a.length; l < h && l !== this.startCutIndex; l++) { var d = a[l], c = (d.text, d.width), p = this.getHorizontalAlignShift(c, n.width, i), u = this.getLineIndent(d, i, n, 0 === l); 0 === (p += this.rightToLeft(i) ? 0 : u) || this.isEmfTextScaled || this.pdfStreamWriter.startNextLine(p, 0), s ? this.drawUnicodeLine(d, n, t, i) : this.drawAsciiLine(d, n, t, i), 0 === p || this.isEmfTextScaled || this.pdfStreamWriter.startNextLine(-p, 0), this.isOverloadWithPosition && a.length > 1 && (this.pdfStreamWriter.startNextLine(-n.x, 0), n.x = 0, n.width = this.clientSize.width, this.isOverloadWithPosition = !1, this.isPointOverload = !0) } this.getResources.getResources().requireProcedureSet(this.procedureSets.text), 0 !== r && this.pdfStreamWriter.startNextLine(0, -(r - e.lineHeight)), this.pdfStreamWriter.endText() }, e.prototype.drawAsciiLine = function (e, t, i, n) { this.justifyLine(e, t.width, n); var r = ""; if (-1 !== e.text.indexOf("(") || -1 !== e.text.indexOf(")")) for (var o = 0; o < e.text.length; o++)"(" === e.text[o] ? r += "\\(" : ")" === e.text[o] ? r += "\\)" : r += e.text[o]; "" === r && (r = e.text); var s = "(" + r + ")"; this.pdfStreamWriter.showNextLineText(new Sk(s)) }, e.prototype.drawUnicodeLine = function (e, t, i, n) { var r = e.text, o = (e.width, null !== n && n.rightToLeft), s = null !== n && (0 !== n.wordSpacing || n.alignment === Ik.Justify), a = i, l = this.justifyLine(e, t.width, n), h = new jN; if (o || null !== n && n.textDirection !== Wk.None) { var d = null, c = null !== n && n.alignment === Ik.Right, p = null; p = (d = null !== n && n.textDirection !== Wk.None ? h.layout(r, a, n.textDirection === Wk.RightToLeft, s, n) : h.layout(r, a, c, s, n)).length > 1 ? null !== n && n.textDirection !== Wk.None ? h.splitLayout(r, a, n.textDirection === Wk.RightToLeft, s, n) : h.splitLayout(r, a, c, s, n) : [r], this.drawUnicodeBlocks(d, p, a, n, l) } else if (s) { var u = this.breakUnicodeLine(r, a, null); d = u.tokens, p = u.words; this.drawUnicodeBlocks(d, p, a, n, l) } else { var g = this.convertToUnicode(r, a), m = this.getUnicodeString(g); this.streamWriter.showNextLineText(m) } }, e.prototype.drawUnicodeBlocks = function (e, t, i, n, r) { if (null == e) throw new Error("Argument Null Exception : blocks"); if (null == t) throw new Error("Argument Null Exception : words"); if (null == i) throw new Error("Argument Null Exception : font"); this.streamWriter.startNextLine(); var o = 0, s = 0, a = 0, l = 0; try { null !== n && (a = n.firstLineIndent, l = n.paragraphIndent, n.firstLineIndent = 0, n.paragraphIndent = 0); var h = i.getCharWidth(cP.whiteSpace, n) + r, d = null != n ? n.characterSpacing : 0; h += d + (null !== n && 0 === r ? n.wordSpacing : 0); for (var c = 0; c < e.length; c++) { var p = e[c], u = t[c], g = 0; if (0 !== o && this.streamWriter.startNextLine(o, 0), u.length > 0) { g += i.measureString(u, n).width, g += d; var m = this.getUnicodeString(p); this.streamWriter.showText(m) } c !== e.length - 1 && (s += o = g + h) } s > 0 && this.streamWriter.startNextLine(-s, 0) } finally { null !== n && (n.firstLineIndent = a, n.paragraphIndent = l) } }, e.prototype.breakUnicodeLine = function (e, t, i) { if (null === e) throw new Error("Argument Null Exception : line"); i = e.split(null); for (var n = [], r = 0; r < i.length; r++) { var o = i[r], s = this.convertToUnicode(o, t); n[r] = s } return { tokens: n, words: i } }, e.prototype.getUnicodeString = function (e) { if (null === e) throw new Error("Argument Null Exception : token"); var t = new Sk(e); return t.converted = !0, t.encode = PE.ForceEncoding.Ascii, t }, e.prototype.convertToUnicode = function (e, t) { var i = null; if (null == e) throw new Error("Argument Null Exception : text"); if (null == t) throw new Error("Argument Null Exception : ttfFont"); if (t.fontInternal instanceof xN) { var n = t.fontInternal.ttfReader; t.setSymbols(e), i = n.convertString(e); var r = Sk.toUnicodeArray(i, !1); i = Sk.byteToString(r) } return i }, e.prototype.justifyLine = function (e, t, i) { var n = e.text, r = e.width, o = this.shouldJustify(e, t, i), s = null != i && 0 !== i.wordSpacing, a = cP.spaces, l = cP.getCharsCount(n, a), h = 0; if (o) { s && (r -= l * i.wordSpacing); h = (t - r) / l, this.pdfStreamWriter.setWordSpacing(h) } else s ? this.pdfStreamWriter.setWordSpacing(i.wordSpacing) : this.pdfStreamWriter.setWordSpacing(0); return h }, e.prototype.reset = function (e) { this.canvasSize = e, this.streamWriter.clear(), this.initialize(), this.initializeCoordinates() }, e.prototype.shouldJustify = function (e, t, i) { var n = e.text, r = e.width, o = null != i && i.alignment === Ik.Justify, s = t >= 0 && r < t, a = cP.spaces, l = cP.getCharsCount(n, a) > 0 && n[0] !== cP.whiteSpace, h = (e.lineType & hP.LayoutBreak) > 0; return o && s && l && (h || i.alignment === Ik.Justify) }, e.prototype.underlineStrikeoutText = function (e, t, i, n, r, o) { if (n.underline || n.strikeout) { var s = this.createUnderlineStikeoutPen(e, t, n, o); if (null != s) { var a = this.getTextVerticalAlignShift(i.actualSize.height, r.height, o), l = 0; l = r.y + a + n.metrics.getAscent(o) + 1.5 * s.width; for (var h = r.y + a + n.metrics.getHeight(o) / 2 + 1.5 * s.width, d = i.lines, c = 0, p = i.lineCount; c < p; c++) { var u = d[c], g = (u.text, u.width), m = this.getHorizontalAlignShift(g, r.width, o), f = this.getLineIndent(u, o, r, 0 === c); m += this.rightToLeft(o) ? 0 : f; var y = r.x + m, v = this.shouldJustify(u, r.width, o) ? y + r.width - f : y + g - f; if (n.underline) { var w = l; this.drawLine(s, y, w, v, w), l += i.lineHeight } if (n.strikeout) { w = h; this.drawLine(s, y, w, v, w), h += i.lineHeight } this.isPointOverload && d.length > 1 && (r.x = 0, r.width = this.clientSize.width) } this.isPointOverload = !1 } } }, e.prototype.createUnderlineStikeoutPen = function (e, t, i, n) { var r = i.metrics.getSize(n) / 20, o = null; return null != e ? o = new zP(e.color, r) : null != t && (o = new zP(t, r)), o }, e.prototype.getTextRenderingMode = function (e, t, i) { var n = kk.None; return n = null != e && null != t ? kk.FillStroke : null != e ? kk.Stroke : kk.Fill, null != i && i.clipPath && (n |= kk.ClipFlag), n }, e.prototype.getLineIndent = function (e, t, i, n) { var r = 0, o = (e.lineType & hP.FirstParagraphLine) > 0; return null != t && o && (r = n ? t.firstLineIndent : t.paragraphIndent, r = i.width > 0 ? Math.min(i.width, r) : r), r }, e.prototype.getHorizontalAlignShift = function (e, t, i) { var n = 0; if (t >= 0 && null != i && i.alignment !== Ik.Left) switch (i.alignment) { case Ik.Center: n = (t - e) / 2; break; case Ik.Right: n = t - e }return n }, e.prototype.rightToLeft = function (e) { var t = null != e && e.rightToLeft; return null !== e && void 0 !== e && e.textDirection !== Wk.None && void 0 !== e.textDirection && (t = !0), t }, e.prototype.stateControl = function (e, t, i, n) { if (void 0 === n) this.stateControl(e, t, i, null); else { null !== t ? (void 0 !== this.pageLayer && null != this.pageLayer && !1 === this.colorSpaceChanged && (this.lastDocumentCS = this.pageLayer.page.document.colorSpace, this.lastGraphicsCS = this.pageLayer.page.graphics.colorSpace, this.colorSpace = this.pageLayer.page.document.colorSpace, this.currentColorSpace = this.pageLayer.page.document.colorSpace, this.colorSpaceChanged = !0), this.initCurrentColorSpace(this.currentColorSpace)) : null != e && (void 0 !== this.pageLayer && null != this.pageLayer && (this.colorSpace = this.pageLayer.page.document.colorSpace, this.currentColorSpace = this.pageLayer.page.document.colorSpace), this.initCurrentColorSpace(this.currentColorSpace)), this.penControl(e, !1), this.brushControl(t, !1), this.fontControl(i, n, !1) } }, e.prototype.initCurrentColorSpace = function (e) { this.getResources.getResources(); this.bCSInitialized || (this.pdfStreamWriter.setColorSpace("Device" + this.currentColorSpaces[this.currentColorSpace], !0), this.pdfStreamWriter.setColorSpace("Device" + this.currentColorSpaces[this.currentColorSpace], !1), this.bCSInitialized = !0) }, e.prototype.penControl = function (e, t) { null != e && (this.currentPen = e, this.colorSpace = zk.Rgb, e.monitorChanges(this.currentPen, this.pdfStreamWriter, this.getResources, t, this.colorSpace, this.matrix.clone()), this.currentPen = e.clone()) }, e.prototype.brushControl = function (e, t) { null != e && (this.currentBrush = e, e.monitorChanges(this.currentBrush, this.pdfStreamWriter, this.getResources, t, this.colorSpace), this.currentBrush = e, e = null) }, e.prototype.fontControl = function (e, t, i) { if (null != e) { var n = null != t ? t.subSuperScript : eP.None, r = null != this.currentStringFormat ? this.currentStringFormat.subSuperScript : eP.None; if (i || e !== this.currentFont || n !== r) { var o = this.getResources.getResources(); this.currentFont = e, this.currentStringFormat = t; var s = e.metrics.getSize(t); this.isEmfTextScaled = !1; var a = o.getName(e); this.pdfStreamWriter.setFont(e, a, s) } } }, e.prototype.setTransparency = function (e, t, i) { if (void 0 === t) this.istransparencySet = !0, this.setTransparency(e, e, Bk.Normal); else if ("number" == typeof t && void 0 === i) this.setTransparency(e, t, Bk.Normal); else { null == this.trasparencies && (this.trasparencies = new WP); var n = null, r = new NN(e, t, i); this.trasparencies.containsKey(r) && (n = this.trasparencies.getValue(r)), null == n && (n = new HP(e, t, i), this.trasparencies.setValue(r, n)); var o = this.getResources.getResources().getName(n); this.streamWriter.setGraphicsState(o) } }, e.prototype.clipTranslateMargins = function (e, t, i, n, r, o) { if (e instanceof qk && void 0 === t) this.clipBounds = e, this.pdfStreamWriter.writeComment("Clip margins."), this.pdfStreamWriter.appendRectangle(e), this.pdfStreamWriter.closePath(), this.pdfStreamWriter.clipPath(!1), this.pdfStreamWriter.writeComment("Translate co-ordinate system."), this.translateTransform(e.x, e.y); else if ("number" == typeof e) { var s = new qk(i, n, this.size.width - i - r, this.size.height - n - o); this.clipBounds = s, this.pdfStreamWriter.writeComment("Clip margins."), this.pdfStreamWriter.appendRectangle(s), this.pdfStreamWriter.closePath(), this.pdfStreamWriter.clipPath(!1), this.pdfStreamWriter.writeComment("Translate co-ordinate system."), this.translateTransform(e, t) } }, e.prototype.updateY = function (e) { return -e }, e.prototype.translateTransform = function (e, t) { var i = new BP; this.getTranslateTransform(e, t, i), this.pdfStreamWriter.modifyCtm(i), this.matrix.multiply(i) }, e.prototype.getTranslateTransform = function (e, t, i) { return i.translate(e, this.updateY(t)), i }, e.prototype.scaleTransform = function (e, t) { var i = new BP; this.getScaleTransform(e, t, i), this.pdfStreamWriter.modifyCtm(i), this.matrix.multiply(i) }, e.prototype.getScaleTransform = function (e, t, i) { return null == i && (i = new BP), i.scale(e, t), i }, e.prototype.rotateTransform = function (e) { var t = new BP; this.getRotateTransform(e, t), this.pdfStreamWriter.modifyCtm(t), this.matrix.multiply(t) }, e.prototype.initializeCoordinates = function () { this.pdfStreamWriter.writeComment("Change co-ordinate system to left/top."), this.mediaBoxUpperRightBound !== -this.size.height && null == this.cropBox && (this.mediaBoxUpperRightBound === this.size.height || 0 === this.mediaBoxUpperRightBound ? this.translateTransform(0, this.updateY(this.size.height)) : this.translateTransform(0, this.updateY(this.mediaBoxUpperRightBound))) }, e.prototype.getRotateTransform = function (e, t) { return null != t && void 0 !== t || (t = new BP), t.rotate(this.updateY(e)), t }, e.prototype.save = function () { var e = new PN(this, this.matrix.clone()); return e.brush = this.currentBrush, e.pen = this.currentPen, e.font = this.currentFont, e.colorSpace = this.currentColorSpace, e.characterSpacing = this.previousCharacterSpacing, e.wordSpacing = this.previousWordSpacing, e.textScaling = this.previousTextScaling, e.textRenderingMode = this.previousTextRenderingMode, this.graphicsState.push(e), this.pdfStreamWriter.saveGraphicsState(), e }, e.prototype.restore = function (e) { if (void 0 === e) this.graphicsState.length > 0 && this.doRestoreState(); else if (-1 !== this.graphicsState.indexOf(e)) for (; 0 !== this.graphicsState.length;) { if (this.doRestoreState() === e) break } }, e.prototype.doRestoreState = function () { var e = this.graphicsState.pop(); return this.transformationMatrix = e.matrix, this.currentBrush = e.brush, this.currentPen = e.pen, this.currentFont = e.font, this.currentColorSpace = e.colorSpace, this.previousCharacterSpacing = e.characterSpacing, this.previousWordSpacing = e.wordSpacing, this.previousTextScaling = e.textScaling, this.previousTextRenderingMode = e.textRenderingMode, this.pdfStreamWriter.restoreGraphicsState(), e }, e.pathTypesValuesMask = 15, e.transparencyObject = !1, e }(), kN = function () { function e(e) { this.sender = e } return e.prototype.getResources = function () { return this.sender.getResources() }, e }(), PN = function () { function e(e, t) { this.internalTextRenderingMode = kk.Fill, this.internalCharacterSpacing = 0, this.internalWordSpacing = 0, this.internalTextScaling = 100, this.pdfColorSpace = zk.Rgb, void 0 !== e && (this.pdfGraphics = e, this.transformationMatrix = t) } return Object.defineProperty(e.prototype, "graphics", { get: function () { return this.pdfGraphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "matrix", { get: function () { return this.transformationMatrix }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "characterSpacing", { get: function () { return this.internalCharacterSpacing }, set: function (e) { this.internalCharacterSpacing = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "wordSpacing", { get: function () { return this.internalWordSpacing }, set: function (e) { this.internalWordSpacing = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "textScaling", { get: function () { return this.internalTextScaling }, set: function (e) { this.internalTextScaling = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "pen", { get: function () { return this.pdfPen }, set: function (e) { this.pdfPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "brush", { get: function () { return this.pdfBrush }, set: function (e) { this.pdfBrush = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "font", { get: function () { return this.pdfFont }, set: function (e) { this.pdfFont = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "colorSpace", { get: function () { return this.pdfColorSpace }, set: function (e) { this.pdfColorSpace = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "textRenderingMode", { get: function () { return this.internalTextRenderingMode }, set: function (e) { this.internalTextRenderingMode = e }, enumerable: !0, configurable: !0 }), e }(), NN = function () { return function (e, t, i) { this.alphaPen = e, this.alphaBrush = t, this.blendMode = i } }(), ON = function () { function e(e, t) { if (this.pdfColorSpace = zk.Rgb, this.isVisible = !0, this.sublayer = !1, this.contentLength = 0, this.dictionaryProperties = new qI, null === e) throw new Error("ArgumentNullException:page"); if (this.pdfPage = e, this.clipPageTemplates = !0, void 0 === t) this.content = new bk; else if (t instanceof bk || null === t) { if (null === t) throw new Error("ArgumentNullException:stream"); this.content = t } else this.content = new bk, this.clipPageTemplates = t } return Object.defineProperty(e.prototype, "colorSpace", { get: function () { return this.pdfColorSpace }, set: function (e) { this.pdfColorSpace = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "page", { get: function () { return this.pdfPage }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "layerId", { get: function () { return this.layerid }, set: function (e) { this.layerid = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "name", { get: function () { return this.layerName }, set: function (e) { this.layerName = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "visible", { get: function () { return this.isVisible }, set: function (e) { this.isVisible = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "graphics", { get: function () { return null == this.pdfGraphics && this.initializeGraphics(this.page), this.pdfGraphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "layers", { get: function () { return null == this.layer ? (this.layer = new BN(this.page), this.layer.sublayer = !0, this.layer) : this.layer }, enumerable: !0, configurable: !0 }), e.prototype.add = function () { var t = new e(this.pdfPage); return t.name = "", t }, e.prototype.sign = function (e) { return 0 === e ? 0 : e > 0 ? 1 : -1 }, e.prototype.initializeGraphics = function (e) { var t = e, i = new kN(this.page); if (this.pdfGraphics = new IN(e.size, i, this.content), this.pdfGraphics.mediaBoxUpperRightBound = 0, null != t) { var n = t.section.parent; null != n && (this.pdfGraphics.colorSpace = n.document.colorSpace, this.colorSpace = n.document.colorSpace) } var r = this.sign(e.origin.y) === this.sign(e.origin.x); (e.origin.x >= 0 && e.origin.y >= 0 || !r) && this.pdfGraphics.initializeCoordinates(); var o = t.section.getActualBounds(t, !0), s = t.section.pageSettings.margins; this.clipPageTemplates ? e.origin.x >= 0 && e.origin.y >= 0 && this.pdfGraphics.clipTranslateMargins(o) : this.graphics.clipTranslateMargins(o.x, o.y, s.left, s.top, s.right, s.bottom), this.pdfGraphics.setLayer(this) }, Object.defineProperty(e.prototype, "element", { get: function () { return this.content }, enumerable: !0, configurable: !0 }), e }(), RN = function () { function e() { } return Object.defineProperty(e.prototype, "count", { get: function () { return void 0 === this.collection && (this.collection = []), this.collection.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "list", { get: function () { return void 0 === this.collection && (this.collection = []), this.collection }, enumerable: !0, configurable: !0 }), e }(), zN = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BN = function (e) { function t(t) { var i = e.call(this) || this; if (i.parentLayerCount = 0, i.sublayer = !1, i.optionalContent = new GI, t instanceof _N) { i.page = t; var n = t; i.parseLayers(n) } return i } return zN(t, e), t.prototype.items = function (e, t) { if ("number" == typeof e && void 0 === t) { return this.list[e] } if (null == t) throw new Error("ArgumentNullException: layer"); if (t.page !== this.page) throw new Error("ArgumentException: The layer belongs to another page") }, t.prototype.add = function (e, t) { if (void 0 === e) { var i = new ON(this.page); return i.name = "", this.add(i), i } if (e instanceof ON) { var n = this.list.push(e); return this.addLayer(n, e), n } return 0 }, t.prototype.addLayer = function (e, t) { var i = new Tk(t); this.page.contents.add(i) }, t.prototype.insert = function (e, t) { for (var i = [], n = this.list.length, r = e; r < n; r++)i.push(this.list.pop()); this.list.push(t); for (r = 0; r < i.length; r++)this.list.push(i[r]); this.insertLayer(e, t) }, t.prototype.insertLayer = function (e, t) { if (null == t) throw new Error("ArgumentNullException:layer"); var i = new Tk(t); this.page.contents.insert(e, i) }, t.prototype.parseLayers = function (e) { var t = this.page.contents; this.page.getResources(); e.crossTable; var i = new bk, n = new bk, r = []; r.push("q"), i.data = r, t.insert(0, new Tk(i)), (r = []).push("Q"), n.data = r, t.insert(t.count, new Tk(n)) }, t.prototype.indexOf = function (e) { if (null == e) throw new Error("ArgumentNullException: layer"); return this.list.indexOf(e) }, t }(RN), FN = function () { function e(e, t) { if (this.dictionaryProperties = new qI, this.writeTransformation = !0, void 0 === e); else if (e instanceof Uk && void 0 === t) { this.content = new bk; var i = new Uk(e.width, e.height); this.setSize(i), this.initialize() } else this.content = new bk, this.setSize(new Uk(e, t)), this.initialize() } return Object.defineProperty(e.prototype, "size", { get: function () { return this.templateSize }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this.size.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.size.height }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "graphics", { get: function () { if (null == this.pdfGraphics || void 0 === this.pdfGraphics) { var e = new kN(this), t = new IN(this.size, e, this.content); this.pdfGraphics = t, this.pdfGraphics.initializeCoordinates() } return this.pdfGraphics }, enumerable: !0, configurable: !0 }), e.prototype.getResources = function () { return null == this.resources && (this.resources = new WN, this.content.items.setValue(this.dictionaryProperties.resources, this.resources)), this.resources }, e.prototype.initialize = function () { this.addType(), this.addSubType() }, e.prototype.addType = function () { var e = new YI(this.dictionaryProperties.xObject); this.content.items.setValue(this.dictionaryProperties.type, e) }, e.prototype.addSubType = function () { var e = new YI(this.dictionaryProperties.form); this.content.items.setValue(this.dictionaryProperties.subtype, e) }, e.prototype.reset = function (e) { void 0 === e ? (null != this.resources && (this.resources = null, this.content.remove(this.dictionaryProperties.resources)), null != this.graphics && this.graphics.reset(this.size)) : (this.setSize(e), this.reset()) }, e.prototype.setSize = function (e) { var t = new qk(new Yk(0, 0), e), i = tk.fromRectangle(t); this.content.items.setValue(this.dictionaryProperties.bBox, i), this.templateSize = e }, Object.defineProperty(e.prototype, "element", { get: function () { return this.content }, enumerable: !0, configurable: !0 }), e }(), VN = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), WN = function (e) { function t(t) { var i = e.call(this, t) || this; return i.properties = new GI, i } return VN(t, e), Object.defineProperty(t.prototype, "names", { get: function () { return this.getNames() }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "document", { get: function () { return this.pdfDocument }, set: function (e) { this.pdfDocument = e }, enumerable: !0, configurable: !0 }), t.prototype.getName = function (e) { var t = e.element, i = null; if (this.names.containsKey(t) && (i = this.names.getValue(t)), null == i) { var n = this.generateName(); i = new YI(n), this.names.setValue(t, i), e instanceof fP ? this.add(e, i) : e instanceof FN ? this.add(e, i) : e instanceof HP ? this.add(e, i) : (e instanceof $P || e instanceof tN) && this.add(e, i) } return i }, t.prototype.getNames = function () { null == this.pdfNames && (this.pdfNames = new WP); var e = this.items.getValue(this.dictionaryProperties.font); if (null != e) { xP.dereference(e) } return this.pdfNames }, t.prototype.requireProcedureSet = function (e) { if (null == e) throw new Error("ArgumentNullException:procedureSetName"); var t = this.items.getValue(this.dictionaryProperties.procset); null == t && (t = new tk, this.items.setValue(this.dictionaryProperties.procset, t)); var i = new YI(e); t.contains(i) || t.add(i) }, t.prototype.removeFont = function (e) { for (var t = null, i = this.pdfNames.keys(), n = 0; n < this.pdfNames.size(); n++)if (this.pdfNames.getValue(i[n]) === new YI(e)) { t = i[n]; break } null != t && this.pdfNames.remove(t) }, t.prototype.generateName = function () { return HN.getNewGuidString() }, t.prototype.add = function (e, t) { if (e instanceof fP) { var i = null, n = this.items.getValue(this.dictionaryProperties.font); if (null != n) { var r = n; i = n, i = n } else i = new GI, this.items.setValue(this.dictionaryProperties.font, i); i.items.setValue(t.value, new Tk(e.element)) } else if (e instanceof FN) { var o = void 0; null == (o = this.items.getValue(this.dictionaryProperties.xObject)) && (o = new GI, this.items.setValue(this.dictionaryProperties.xObject, o)), o.items.setValue(t.value, new Tk(e.element)) } else if (e instanceof Qk); else if (e instanceof HP) { var s = e.element, a = null; null == (a = this.items.getValue(this.dictionaryProperties.extGState)) && (a = new GI, this.items.setValue(this.dictionaryProperties.extGState, a)), a.items.setValue(t.value, new Tk(s)) } else { o = this.Dictionary.items.getValue(this.dictionaryProperties.xObject); var l = void 0; void 0 !== this.pdfDocument && (l = this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.getValue(this.dictionaryProperties.xObject)); this.Dictionary.items.values(); var h = !1, d = void 0; if (void 0 === this.pdfDocument || void 0 !== typeof l && null != l) { if (void 0 !== this.pdfDocument) for (var c = l.items.values(), p = 0; p < c.length; p++)void 0 !== c[p] && void 0 !== c[p].element && c[p].element.data[0] === e.element.data[0] && (d = c[p], h = !0) } else l = new GI, this.pdfDocument.sections.element.items.getValue(this.dictionaryProperties.resources).items.setValue(this.dictionaryProperties.xObject, l); if (null == o && (o = new GI, this.Dictionary.items.setValue(this.dictionaryProperties.xObject, o)), h && void 0 !== d) o.items.setValue(t.value, d); else { r = new Tk(e.element); o.items.setValue(t.value, r), void 0 !== this.pdfDocument && l.items.setValue(t.value, r) } } }, t }(GI), HN = function () { function e(t) { this.stringValue = t || e.getNewGuidString() } return Object.defineProperty(e, "randomNumber", { get: function () { return e.guid = e.guid + 1, e.guid = e.guid > 999999999999 ? 0 : e.guid }, enumerable: !0, configurable: !0 }), e.prototype.toString = function () { return this.stringValue }, e.getNewGuidString = function () { var t = e.randomNumber.toString(); return t = "abc7def4-ghi9-jkl2-m6n3-" + "opqrstuvwxyz".substr(0, 12 - t.length) + t }, e.guid = 0, e }(), _N = function () { function e(e) { this.defLayerIndex = -1, this.modified = !1, this.dictionaryProperties = new qI, this.pageDictionary = e } return Object.defineProperty(e.prototype, "section", { get: function () { return this.pdfSection }, set: function (e) { this.pdfSection = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dictionary", { get: function () { return this.pageDictionary }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.pageDictionary }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "defaultLayer", { get: function () { var e = this.layers, t = this.defaultLayerIndex; return e.items(t) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "defaultLayerIndex", { get: function () { if (0 === this.layerCollection.count || -1 === this.defLayerIndex) { var e = this.layerCollection.add(); this.defLayerIndex = this.layerCollection.indexOf(e) } return this.defLayerIndex }, set: function (e) { if (e < 0 || e > this.layers.count - 1) throw new Error("ArgumentOutOfRangeException : value, Index can not be less 0 and greater Layers.Count - 1"); this.defLayerIndex = e, this.modified = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "layers", { get: function () { return null != this.layerCollection && void 0 !== this.layerCollection || (this.layerCollection = new BN(this)), this.layerCollection }, enumerable: !0, configurable: !0 }), e.prototype.getResources = function () { return null == this.resources && (this.resources = new WN, this.dictionary.items.setValue(this.dictionaryProperties.resources, this.resources)), this.resources }, Object.defineProperty(e.prototype, "contents", { get: function () { var e = this.pageDictionary.items.getValue(this.dictionaryProperties.contents); return null == e && (e = new tk, this.pageDictionary.items.setValue(this.dictionaryProperties.contents, e)), e }, enumerable: !0, configurable: !0 }), e.prototype.setResources = function (e) { this.resources = e, this.dictionary.items.setValue(this.dictionaryProperties.resources, this.resources), this.modified = !0 }, e }(), YN = function () { function e(e) { this.alreadyExistsAnnotationError = "This annotatation had been already added to page", this.missingAnnotationException = "Annotation is not contained in collection.", this.dictionaryProperties = new qI, this.internalAnnotations = new tk, this.lists = [], void 0 !== e && (this.page = e) } return Object.defineProperty(e.prototype, "annotations", { get: function () { return this.internalAnnotations }, set: function (e) { this.internalAnnotations = e }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { this.doAdd(e) }, e.prototype.doAdd = function (e) { if (void 0 === e.destination) return e.setPage(this.page), this.internalAnnotations.add(new Tk(e)), this.lists.push(e); var t = (new pP).layout(e.text, e.font, e.stringFormat, new Uk(e.bounds.width, 0), !1, new Uk(0, 0)), i = e.bounds.y; if (1 === t.lines.length) { var n = e.font.measureString(t.lines[0].text); e.bounds = new qk(new Yk(e.bounds.x, i), n), e.text = t.lines[0].text, this.page.graphics.drawString(e.text, e.font, null, e.brush, e.bounds.x, e.bounds.y, e.bounds.width, e.bounds.height, null), e.setPage(this.page), this.setColor(e), this.internalAnnotations.add(new Tk(e)), this.lists.push(e) } else for (var r = 0; r < t.lines.length; r++) { n = e.font.measureString(t.lines[r].text); if (0 === r) e.bounds = new qk(e.bounds.x, i, n.width, n.height), e.text = t.lines[r].text, this.page.graphics.drawString(e.text, e.font, null, e.brush, e.bounds.x, i, n.width, n.height, null), e.setPage(this.page), this.setColor(e), this.internalAnnotations.add(new Tk(e)), this.lists.push(e), i += e.bounds.height; else { var o = e.clone(); o.bounds = new qk(new Yk(e.bounds.x, i), n), o.text = t.lines[r].text, this.page.graphics.drawString(o.text, o.font, null, o.brush, o.bounds.x, o.bounds.y, o.bounds.width, o.bounds.height, null), o.setPage(this.page), this.setColor(o), this.internalAnnotations.add(new Tk(o)), this.lists.push(o), i += o.bounds.height } } }, e.prototype.setColor = function (e) { var t = zk.Rgb, i = e.color.toArray(t); e.dictionary.items.setValue(this.dictionaryProperties.c, i) }, Object.defineProperty(e.prototype, "element", { get: function () { return this.internalAnnotations }, enumerable: !0, configurable: !0 }), e }(), UN = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), qN = function (e) { function t() { var t = e.call(this, new GI) || this; return t.annotationCollection = null, t.beginSave = null, t.initialize(), t } return UN(t, e), Object.defineProperty(t.prototype, "document", { get: function () { return null !== this.section && null !== this.section.parent ? this.section.parent.document : null }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "graphics", { get: function () { var e = this.defaultLayer.graphics; return e.currentPage = this, e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "crossTable", { get: function () { if (null === this.section) throw new Error("PdfDocumentException : Page is not created"); return null === this.section.parent ? this.section.parentDocument.crossTable : this.section.parent.document.crossTable }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "size", { get: function () { return this.section.pageSettings.size }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "origin", { get: function () { return this.section.pageSettings.origin }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "annotations", { get: function () { return null == this.annotationCollection && (this.annotationCollection = new YN(this), this.dictionary.items.setValue(this.dictionaryProperties.annots, this.annotationCollection.element), this.annotationCollection.annotations = this.dictionary.items.getValue(this.dictionaryProperties.annots)), this.annotationCollection }, enumerable: !0, configurable: !0 }), t.prototype.initialize = function () { this.dictionary.items.setValue(this.dictionaryProperties.type, new YI("Page")), this.dictionary.pageBeginDrawTemplate = new $I(this) }, t.prototype.setSection = function (e) { this.section = e, this.dictionary.items.setValue(this.dictionaryProperties.parent, new Tk(e)) }, t.prototype.resetProgress = function () { this.isProgressOn = !1 }, t.prototype.getClientSize = function () { var e = this.section.getActualBounds(this, !0); return new Uk(e.width, e.height) }, t.prototype.pageBeginSave = function () { var e = this.document; void 0 !== typeof e && null != e && this.drawPageTemplates(e), null != this.beginSave && void 0 !== this.beginSave && this.beginSave(this) }, t.prototype.drawPageTemplates = function (e) { if (this.section.containsTemplates(e, this, !1)) { var t = new ON(this, !1); if (this.layers.insert(0, t), this.section.drawTemplates(this, t, e, !1), null !== t.graphics && void 0 !== t.graphics) for (var i = 0; i < t.graphics.automaticFields.automaticFields.length; i++) { var n = t.graphics.automaticFields.automaticFields[i]; n.field.performDraw(t.graphics, n.location, n.scalingX, n.scalingY) } } if (this.section.containsTemplates(e, this, !0)) { var r = new ON(this, !1); this.layers.add(r), this.section.drawTemplates(this, r, e, !0) } }, t }(_N), GN = function () { function e(e) { this.pdfPage = void 0 !== e ? e : null } return Object.defineProperty(e.prototype, "page", { get: function () { return this.pdfPage }, enumerable: !0, configurable: !0 }), e }(), QN = function () { function e(e) { if (this.pdfSection = null, null == e) throw Error('ArgumentNullException("section")'); this.section = e } return Object.defineProperty(e.prototype, "section", { get: function () { return this.pdfSection }, set: function (e) { this.pdfSection = e }, enumerable: !0, configurable: !0 }), e.prototype.contains = function (e) { return this.section.contains(e) }, e.prototype.remove = function (e) { this.section.remove(e) }, e.prototype.add = function () { return this.section.add() }, e }(), XN = function () { function e() { } return Object.defineProperty(e.prototype, "left", { get: function () { return this.leftTemplate }, set: function (e) { this.leftTemplate = this.checkElement(e, kP.Left) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "top", { get: function () { return this.topTemplate }, set: function (e) { this.topTemplate = this.checkElement(e, kP.Top) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "right", { get: function () { return this.rightTemplate }, set: function (e) { this.rightTemplate = this.checkElement(e, kP.Right) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottom", { get: function () { return this.bottomTemplate }, set: function (e) { this.bottomTemplate = this.checkElement(e, kP.Bottom) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "EvenLeft", { get: function () { return this.evenLeft }, set: function (e) { this.evenLeft = this.checkElement(e, kP.Left) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "EvenTop", { get: function () { return this.evenTop }, set: function (e) { this.evenTop = this.checkElement(e, kP.Top) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "EvenRight", { get: function () { return this.evenRight }, set: function (e) { this.evenRight = this.checkElement(e, kP.Right) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "EvenBottom", { get: function () { return this.evenBottom }, set: function (e) { this.evenBottom = this.checkElement(e, kP.Bottom) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "OddLeft", { get: function () { return this.oddLeft }, set: function (e) { this.oddLeft = this.checkElement(e, kP.Left) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "OddTop", { get: function () { return this.oddTop }, set: function (e) { this.oddTop = this.checkElement(e, kP.Top) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "OddRight", { get: function () { return this.oddRight }, set: function (e) { this.oddRight = this.checkElement(e, kP.Right) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "OddBottom", { get: function () { return this.oddBottom }, set: function (e) { this.oddBottom = this.checkElement(e, kP.Bottom) }, enumerable: !0, configurable: !0 }), e.prototype.getLeft = function (e) { if (null == e) throw new Error("ArgumentNullException:page"); return this.isEven(e) ? null != this.EvenLeft ? this.EvenLeft : this.left : null != this.OddLeft ? this.OddLeft : this.left }, e.prototype.getTop = function (e) { if (null == e) throw new Error("ArgumentNullException:page"); return this.isEven(e) ? null != this.EvenTop ? this.EvenTop : this.top : null != this.OddTop ? this.OddTop : this.top }, e.prototype.getRight = function (e) { if (null == e) throw new Error("ArgumentNullException:page"); return this.isEven(e) ? null != this.EvenRight ? this.EvenRight : this.right : null != this.OddRight ? this.OddRight : this.right }, e.prototype.getBottom = function (e) { if (null == e) throw new Error("ArgumentNullException:page"); return this.isEven(e) ? null != this.EvenBottom ? this.EvenBottom : this.bottom : null != this.OddBottom ? this.OddBottom : this.bottom }, e.prototype.isEven = function (e) { var t = e.section.document.pages; return (t.pageCollectionIndex.containsKey(e) ? t.pageCollectionIndex.getValue(e) + 1 : t.indexOf(e) + 1) % 2 == 0 }, e.prototype.checkElement = function (e, t) { if (null != e) { if (void 0 !== e.type && e.type !== kP.None) throw new Error("NotSupportedException:Can not reassign the template element. Please, create new one."); e.type = t } return e }, e }(), JN = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), ZN = function (e) { function t() { var t = e.call(this) || this; return t.leftValue = t.topValue = t.rightValue = t.bottomValue = t.stampValue = !0, t } return JN(t, e), Object.defineProperty(t.prototype, "applyDocumentLeftTemplate", { get: function () { return this.leftValue }, set: function (e) { this.leftValue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "applyDocumentTopTemplate", { get: function () { return this.topValue }, set: function (e) { this.topValue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "applyDocumentRightTemplate", { get: function () { return this.rightValue }, set: function (e) { this.rightValue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "applyDocumentBottomTemplate", { get: function () { return this.bottomValue }, set: function (e) { this.bottomValue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "applyDocumentStamps", { get: function () { return this.stampValue }, set: function (e) { this.stampValue = e }, enumerable: !0, configurable: !0 }), t }(XN), KN = function () { function e(e, t) { this.pageAdded = new GN, this.pdfPages = [], this.dictionaryProperties = new qI, this.pdfDocument = e, void 0 === t ? (this.settings = e.pageSettings.clone(), this.initialSettings = this.settings.clone()) : (this.settings = t.clone(), this.initialSettings = this.settings.clone()), this.initialize() } return Object.defineProperty(e.prototype, "parent", { get: function () { return this.sectionCollection }, set: function (e) { this.sectionCollection = e, this.section.items.setValue(this.dictionaryProperties.parent, new Tk(e)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "parentDocument", { get: function () { return this.pdfDocument }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "pageSettings", { get: function () { return this.settings }, set: function (e) { if (null == e) throw Error("Value can not be null."); this.settings = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.section }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "count", { get: function () { return this.pagesReferences.count }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "template", { get: function () { return null == this.pageTemplate && (this.pageTemplate = new ZN), this.pageTemplate }, set: function (e) { this.pageTemplate = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "document", { get: function () { return this.sectionCollection.document }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "pages", { get: function () { return null != this.pagesCollection && void 0 !== this.pagesCollection || (this.pagesCollection = new QN(this)), this.pagesCollection }, enumerable: !0, configurable: !0 }), e.prototype.getPages = function () { return this.pdfPages }, e.prototype.pointToNativePdf = function (e, t) { var i = this.getActualBounds(e, !0); return t.x += i.x, t.y = this.pageSettings.height - t.y, t }, e.prototype.setPageSettings = function (e) { this.settings = e, this.state.orientation = e.orientation, this.state.rotate = e.rotate, this.state.size = e.size, this.state.origin = e.origin }, e.prototype.initialize = function () { this.pagesReferences = new tk, this.section = new GI, this.state = new $N(this.pdfDocument), this.section.sectionBeginSave = new KI(this, this.state), this.pageCount = new ek(0), this.section.items.setValue(this.dictionaryProperties.count, this.pageCount), this.section.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.pages)), this.section.items.setValue(this.dictionaryProperties.kids, this.pagesReferences) }, e.prototype.containsTemplates = function (e, t, i) { var n = this.getDocumentTemplates(e, t, i), r = this.getSectionTemplates(t, i); return n.length > 0 || r.length > 0 }, e.prototype.getDocumentTemplates = function (e, t, i) { var n = []; return this.template.applyDocumentTopTemplate && null != e.template.getTop(t) && (!e.template.getTop(t).foreground && !i || e.template.getTop(t).foreground && i) && n.push(e.template.getTop(t)), this.template.applyDocumentBottomTemplate && null != e.template.getBottom(t) && (!e.template.getBottom(t).foreground && !i || e.template.getBottom(t).foreground && i) && n.push(e.template.getBottom(t)), this.template.applyDocumentLeftTemplate && null != e.template.getLeft(t) && (!e.template.getLeft(t).foreground && !i || e.template.getLeft(t).foreground && i) && n.push(e.template.getLeft(t)), this.template.applyDocumentRightTemplate && null != e.template.getRight(t) && (!e.template.getRight(t).foreground && !i || e.template.getRight(t).foreground && i) && n.push(e.template.getRight(t)), n }, e.prototype.getSectionTemplates = function (e, t) { var i = []; if (null != this.template.getTop(e)) { (!(n = this.template.getTop(e)).foreground && !t || n.foreground && t) && i.push(n) } if (null != this.template.getBottom(e)) { (!(n = this.template.getBottom(e)).foreground && !t || n.foreground && t) && i.push(n) } if (null != this.template.getLeft(e)) { (!(n = this.template.getLeft(e)).foreground && !t || n.foreground && t) && i.push(n) } if (null != this.template.getRight(e)) { var n; (!(n = this.template.getRight(e)).foreground && !t || n.foreground && t) && i.push(n) } return i }, e.prototype.add = function (e) { if (void 0 === e) { var t = new qN; return this.add(t), t } var i = this.checkPresence(e); this.pdfPages.push(e), this.pagesReferences.add(i), e.setSection(this), e.resetProgress(), this.pageAddedMethod(e) }, e.prototype.checkPresence = function (e) { for (var t = new Tk(e), i = !1, n = this.parent, r = 0; r < n.section.length; r++) { var o = n.section[r]; i = i || o.contains(e) } return t }, e.prototype.contains = function (e) { return 0 <= this.indexOf(e) }, e.prototype.indexOf = function (e) { for (var t = 0; t < this.pdfPages.length; t++)if (this.pdfPages[t] === e) return this.pdfPages.indexOf(e); var i = new Tk(e); return this.pagesReferences.indexOf(i) }, e.prototype.pageAddedMethod = function (e) { var t = new GN(e); this.onPageAdded(t); this.parent.document.pages.onPageAdded(t), this.pageCount.intValue = this.count }, e.prototype.onPageAdded = function (e) { }, e.prototype.getActualBounds = function (e, t, i) { if (e instanceof qN && "boolean" == typeof t) { var n = this.parent.document; return this.getActualBounds(n, e, t) } e = e, t = t, i = i; var r = new qk(0, 0, 0, 0); r.height = i ? this.pageSettings.size.height : this.pageSettings.getActualSize().height, r.width = i ? this.pageSettings.size.width : this.pageSettings.getActualSize().width; var o = this.getLeftIndentWidth(e, t, i), s = this.getTopIndentHeight(e, t, i), a = this.getRightIndentWidth(e, t, i), l = this.getBottomIndentHeight(e, t, i); return r.x += o, r.y += s, r.width -= o + a, r.height -= s + l, r }, e.prototype.getLeftIndentWidth = function (e, t, i) { if (null == e) throw new Error("ArgumentNullException:document"); if (null == t) throw new Error("ArgumentNullException:page"); var n = i ? this.pageSettings.margins.left : 0, r = null != this.template.getLeft(t) ? this.template.getLeft(t).width : 0, o = null != e.template.getLeft(t) ? e.template.getLeft(t).width : 0; return n += this.template.applyDocumentLeftTemplate ? Math.max(r, o) : r }, e.prototype.getTopIndentHeight = function (e, t, i) { if (null == e) throw new Error("ArgumentNullException:document"); if (null == t) throw new Error("ArgumentNullException:page"); var n = i ? this.pageSettings.margins.top : 0, r = null != this.template.getTop(t) ? this.template.getTop(t).height : 0, o = null != e.template.getTop(t) ? e.template.getTop(t).height : 0; return n += this.template.applyDocumentTopTemplate ? Math.max(r, o) : r }, e.prototype.getRightIndentWidth = function (e, t, i) { if (null == e) throw new Error("ArgumentNullException:document"); if (null == t) throw new Error("ArgumentNullException:page"); var n = i ? this.pageSettings.margins.right : 0, r = null != this.template.getRight(t) ? this.template.getRight(t).width : 0, o = null != e.template.getRight(t) ? e.template.getRight(t).width : 0; return n += this.template.applyDocumentRightTemplate ? Math.max(r, o) : r }, e.prototype.getBottomIndentHeight = function (e, t, i) { if (null == e) throw new Error("ArgumentNullException:document"); if (null == t) throw new Error("ArgumentNullException:page"); var n = i ? this.pageSettings.margins.bottom : 0, r = null != this.template.getBottom(t) ? this.template.getBottom(t).height : 0, o = null != e.template.getBottom(t) ? e.template.getBottom(t).height : 0; return n += this.template.applyDocumentBottomTemplate ? Math.max(r, o) : r }, e.prototype.remove = function (e) { if (null == e) throw Error('ArgumentNullException("page")'); var t = this.pdfPages.indexOf(e); this.pagesReferences.removeAt(t); for (var i = [], n = 0; n < t; n++)i.push(this.pdfPages[n]); for (n = t + 1; n < this.pdfPages.length; n++)i.push(this.pdfPages[n]); this.pdfPages = i }, e.prototype.applyPageSettings = function (e, t, i) { var n = new qk(i.origin, i.size); e.items.setValue(this.dictionaryProperties.mediaBox, tk.fromRectangle(n)); var r = 0; r = eO.rotateFactor * i.rotate; var o = new ek(r); e.items.setValue(this.dictionaryProperties.rotate, o) }, e.prototype.beginSave = function (e, t) { var i = t.document; this.applyPageSettings(this.section, i.pageSettings, e) }, e.prototype.drawTemplates = function (e, t, i, n) { var r = this.getDocumentTemplates(i, e, n), o = this.getSectionTemplates(e, n); this.drawTemplatesHelper(t, i, r), this.drawTemplatesHelper(t, i, o) }, e.prototype.drawTemplatesHelper = function (e, t, i) { if (null != i && i.length > 0) for (var n = i.length, r = 0; r < n; r++) { i[r].draw(e, t) } }, e }(), $N = function () { function e(e) { this.pageOrientation = e.pageSettings.orientation, this.pageRotate = e.pageSettings.rotate, this.pageSize = e.pageSettings.size, this.pageOrigin = e.pageSettings.origin } return Object.defineProperty(e.prototype, "orientation", { get: function () { return this.pageOrientation }, set: function (e) { this.pageOrientation = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rotate", { get: function () { return this.pageRotate }, set: function (e) { this.pageRotate = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return this.pageSize }, set: function (e) { this.pageSize = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "origin", { get: function () { return this.pageOrigin }, set: function (e) { this.pageOrigin = e }, enumerable: !0, configurable: !0 }), e }(), eO = function () { function e(e) { this.sections = [], this.dictionaryProperties = new qI, this.pdfDocument = e.clone(), this.initialize() } return Object.defineProperty(e.prototype, "section", { get: function () { return this.sections }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "document", { get: function () { return this.pdfDocument }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "count", { get: function () { return this.sections.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "element", { get: function () { return this.pages }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { this.sectionCount = new ek(0), this.sectionCollection = new tk, this.pages = new GI, this.pages.beginSave = new QI(this), this.pages.items.setValue(this.dictionaryProperties.type, new YI("Pages")), this.pages.items.setValue(this.dictionaryProperties.kids, this.sectionCollection), this.pages.items.setValue(this.dictionaryProperties.count, this.sectionCount), this.pages.items.setValue(this.dictionaryProperties.resources, new GI), this.setPageSettings(this.pages, this.pdfDocument.pageSettings) }, e.prototype.pdfSectionCollection = function (e) { if (e < 0 || e >= this.count) throw new Error("IndexOutOfRangeException()"); return this.sections[e] }, e.prototype.setPageSettings = function (e, t) { var i = new qk(new Yk, t.size); e.items.setValue(this.dictionaryProperties.mediaBox, tk.fromRectangle(i)) }, e.prototype.add = function (e) { if (void 0 === e) { var t = new KN(this.pdfDocument); return this.add(t), t } var i = this.checkSection(e); return this.sections.push(e), e.parent = this, this.sectionCollection.add(i), this.sections.indexOf(e) }, e.prototype.checkSection = function (e) { var t = new Tk(e); this.sectionCollection.contains(t); return t }, e.prototype.countPages = function () { var e = 0; return this.sections.forEach(function (t) { return e += t.count }), e }, e.prototype.beginSave = function () { this.sectionCount.intValue = this.countPages() }, e.rotateFactor = 90, e }(), tO = function () { function e(e) { this.pdfPageCollectionIndex = new _I, this.document = e } return Object.defineProperty(e.prototype, "count", { get: function () { return this.countPages() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "pageCollectionIndex", { get: function () { return this.pdfPageCollectionIndex }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { if (void 0 === e) { var t = new qN; return this.add(t), t } this.getLastSection().add(e) }, e.prototype.getLastSection = function () { var e = this.document.sections; 0 === e.section.length && e.add(); return e.section[e.section.length - 1] }, e.prototype.onPageAdded = function (e) { }, e.prototype.countPages = function () { for (var e = this.document.sections, t = 0, i = 0; i < e.section.length; i++)t += e.section[i].count; return t }, e.prototype.getPageByIndex = function (e) { return this.getPage(e) }, e.prototype.getPage = function (e) { if (e < 0 || e >= this.count) throw Error('ArgumentOutOfRangeException("index", "Value can not be less 0")'); for (var t = null, i = 0, n = 0, r = 0, o = this.document.sections.count, s = 0; s < o; s++) { var a = this.document.sections.section[s]; if (n = a.count, r = e - i, e >= i && r < n) { t = a.getPages()[r]; break } i += n } return t }, e.prototype.indexOf = function (e) { var t = -1; if (null == e) throw new Error("ArgumentNullException: page"); for (var i = 0, n = 0, r = this.document.sections.count; n < r; n++) { var o = this.document.sections.pdfSectionCollection(n); if ((t = o.indexOf(e)) >= 0) { t += i; break } t = -1, i += o.count } return t }, e.prototype.remove = function (e) { if (null == e) throw Error('ArgumentNullException("page")'); for (var t = null, i = 0, n = this.document.sections.count; i < n; i++)if ((t = this.document.sections.pdfSectionCollection(i)).pages.contains(e)) { t.pages.remove(e); break } return t }, e }(), iO = function () { function e() { this.referenceObjects = [], this.pdfFontCollection = new _I } return e.prototype.search = function (e) { var t = null, i = this.getGroup(e); return null == i ? i = this.createNewGroup() : i.length > 0 && (t = i[0]), i.push(e), t }, e.prototype.createNewGroup = function () { var e = []; return this.referenceObjects.push(e), e }, e.prototype.getGroup = function (e) { var t = null; if (null !== e) for (var i = this.referenceObjects.length, n = 0; n < i; n++) { if (this.referenceObjects.length > 0) { var r = this.referenceObjects[n]; if (r.length > 0) { var o = r[0]; if (e.equalsTo(o)) { t = r; break } } else this.removeGroup(r) } i = this.referenceObjects.length } return t }, e.prototype.removeGroup = function (e) { if (null !== e) { var t = this.referenceObjects.indexOf(e); this.referenceObjects.slice(t, t + 1) } }, e.prototype.destroy = function () { this.pdfFontCollection = void 0, this.referenceObjects = void 0 }, e }(), nO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), rO = function (e) { function t(i) { var n = e.call(this) || this; n.defaultMargin = 40, n.streamWriter = null, n.document = n; var r = !1; void 0 === i ? (t.cacheCollection = new iO, r = !1) : r = i; var o = new wP; n.setMainObjectCollection(o); var s = new xP; s.isMerging = r, s.document = n, n.setCrossTable(s); var a = new SP; return n.setCatalog(a), o.add(a), a.position = -1, n.sectionCollection = new eO(n), n.documentPageCollection = new tO(n), a.pages = n.sectionCollection, n } return nO(t, e), Object.defineProperty(t, "defaultFont", { get: function () { return null == this.defaultStandardFont && (this.defaultStandardFont = new aO(Zk.Helvetica, 8)), this.defaultStandardFont }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "sections", { get: function () { return this.sectionCollection }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "pageSettings", { get: function () { return null == this.settings && (this.settings = new OP(this.defaultMargin)), this.settings }, set: function (e) { this.settings = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "pages", { get: function () { return this.documentPageCollection }, enumerable: !0, configurable: !0 }), Object.defineProperty(t, "cache", { get: function () { return void 0 === t.cacheCollection || null == t.cacheCollection ? new iO : t.cacheCollection }, set: function (e) { this.cacheCollection = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t, "enableCache", { get: function () { return this.isCacheEnabled }, set: function (e) { this.isCacheEnabled = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "colorSpace", { get: function () { return this.pdfColorSpace === zk.Rgb || this.pdfColorSpace === zk.Cmyk || this.pdfColorSpace === zk.GrayScale ? this.pdfColorSpace : zk.Rgb }, set: function (e) { e === zk.Rgb || e === zk.Cmyk || e === zk.GrayScale ? this.pdfColorSpace = e : this.pdfColorSpace = zk.Rgb }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "template", { get: function () { return null == this.pageTemplate && (this.pageTemplate = new XN), this.pageTemplate }, set: function (e) { this.pageTemplate = e }, enumerable: !0, configurable: !0 }), t.prototype.docSave = function (e, t, i) { if (this.checkPagesPresence(), null === e) throw new Error("ArgumentNullException : stream"); this.streamWriter = e; var n = new yP(e); if (n.document = this, "boolean" == typeof t && void 0 === i) return this.crossTable.save(n); this.crossTable.save(n, t) }, t.prototype.checkPagesPresence = function () { 0 === this.pages.count && this.pages.add() }, t.prototype.destroy = function () { this.catalog = void 0, this.colorSpace = void 0, this.currentSavingObj = void 0, this.documentPageCollection = void 0, this.isStreamCopied = void 0, this.pageSettings = void 0, this.pageTemplate = void 0, this.pdfColorSpace = void 0, this.sectionCollection = void 0, t.cache.destroy(), this.crossTable.pdfObjects.destroy(), t.cache = void 0, this.streamWriter.destroy() }, t.defaultStandardFont = null, t.isCacheEnabled = !0, t }(CP), oO = function () { function e() { } return e.getMetrics = function (e, t, i) { var n = null; switch (e) { case Zk.Helvetica: n = this.getHelveticaMetrics(e, t, i); break; case Zk.Courier: n = this.getCourierMetrics(e, t, i); break; case Zk.TimesRoman: n = this.getTimesMetrics(e, t, i); break; case Zk.Symbol: n = this.getSymbolMetrics(e, t, i); break; case Zk.ZapfDingbats: n = this.getZapfDingbatsMetrics(e, t, i); break; default: n = this.getHelveticaMetrics(Zk.Helvetica, t, i) }return n.name = e.toString(), n.subScriptSizeFactor = this.subSuperScriptFactor, n.superscriptSizeFactor = this.subSuperScriptFactor, n }, e.getHelveticaMetrics = function (e, t, i) { var n = new LN; return (t & Hk.Bold) > 0 && (t & Hk.Italic) > 0 ? (n.ascent = this.helveticaBoldItalicAscent, n.descent = this.helveticaBoldItalicDescent, n.postScriptName = this.helveticaBoldItalicName, n.size = i, n.widthTable = new SN(this.arialBoldWidth), n.height = n.ascent - n.descent) : (t & Hk.Bold) > 0 ? (n.ascent = this.helveticaBoldAscent, n.descent = this.helveticaBoldDescent, n.postScriptName = this.helveticaBoldName, n.size = i, n.widthTable = new SN(this.arialBoldWidth), n.height = n.ascent - n.descent) : (t & Hk.Italic) > 0 ? (n.ascent = this.helveticaItalicAscent, n.descent = this.helveticaItalicDescent, n.postScriptName = this.helveticaItalicName, n.size = i, n.widthTable = new SN(this.arialWidth), n.height = n.ascent - n.descent) : (n.ascent = this.helveticaAscent, n.descent = this.helveticaDescent, n.postScriptName = this.helveticaName, n.size = i, n.widthTable = new SN(this.arialWidth), n.height = n.ascent - n.descent), n }, e.getCourierMetrics = function (e, t, i) { var n = new LN; return (t & Hk.Bold) > 0 && (t & Hk.Italic) > 0 ? (n.ascent = this.courierBoldItalicAscent, n.descent = this.courierBoldItalicDescent, n.postScriptName = this.courierBoldItalicName, n.size = i, n.widthTable = new SN(this.fixedWidth), n.height = n.ascent - n.descent) : (t & Hk.Bold) > 0 ? (n.ascent = this.courierBoldAscent, n.descent = this.courierBoldDescent, n.postScriptName = this.courierBoldName, n.size = i, n.widthTable = new SN(this.fixedWidth), n.height = n.ascent - n.descent) : (t & Hk.Italic) > 0 ? (n.ascent = this.courierItalicAscent, n.descent = this.courierItalicDescent, n.postScriptName = this.courierItalicName, n.size = i, n.widthTable = new SN(this.fixedWidth), n.height = n.ascent - n.descent) : (n.ascent = this.courierAscent, n.descent = this.courierDescent, n.postScriptName = this.courierName, n.size = i, n.widthTable = new SN(this.fixedWidth), n.height = n.ascent - n.descent), n }, e.getTimesMetrics = function (e, t, i) { var n = new LN; return (t & Hk.Bold) > 0 && (t & Hk.Italic) > 0 ? (n.ascent = this.timesBoldItalicAscent, n.descent = this.timesBoldItalicDescent, n.postScriptName = this.timesBoldItalicName, n.size = i, n.widthTable = new SN(this.timesRomanBoldItalicWidths), n.height = n.ascent - n.descent) : (t & Hk.Bold) > 0 ? (n.ascent = this.timesBoldAscent, n.descent = this.timesBoldDescent, n.postScriptName = this.timesBoldName, n.size = i, n.widthTable = new SN(this.timesRomanBoldWidth), n.height = n.ascent - n.descent) : (t & Hk.Italic) > 0 ? (n.ascent = this.timesItalicAscent, n.descent = this.timesItalicDescent, n.postScriptName = this.timesItalicName, n.size = i, n.widthTable = new SN(this.timesRomanItalicWidth), n.height = n.ascent - n.descent) : (n.ascent = this.timesAscent, n.descent = this.timesDescent, n.postScriptName = this.timesName, n.size = i, n.widthTable = new SN(this.timesRomanWidth), n.height = n.ascent - n.descent), n }, e.getSymbolMetrics = function (e, t, i) { var n = new LN; return n.ascent = this.symbolAscent, n.descent = this.symbolDescent, n.postScriptName = this.symbolName, n.size = i, n.widthTable = new SN(this.symbolWidth), n.height = n.ascent - n.descent, n }, e.getZapfDingbatsMetrics = function (e, t, i) { var n = new LN; return n.ascent = this.zapfDingbatsAscent, n.descent = this.zapfDingbatsDescent, n.postScriptName = this.zapfDingbatsName, n.size = i, n.widthTable = new SN(this.zapfDingbatsWidth), n.height = n.ascent - n.descent, n }, e.subSuperScriptFactor = 1.52, e.helveticaAscent = 931, e.helveticaDescent = -225, e.helveticaName = "Helvetica", e.helveticaBoldAscent = 962, e.helveticaBoldDescent = -228, e.helveticaBoldName = "Helvetica-Bold", e.helveticaItalicAscent = 931, e.helveticaItalicDescent = -225, e.helveticaItalicName = "Helvetica-Oblique", e.helveticaBoldItalicAscent = 962, e.helveticaBoldItalicDescent = -228, e.helveticaBoldItalicName = "Helvetica-BoldOblique", e.courierAscent = 805, e.courierDescent = -250, e.courierName = "Courier", e.courierBoldAscent = 801, e.courierBoldDescent = -250, e.courierBoldName = "Courier-Bold", e.courierItalicAscent = 805, e.courierItalicDescent = -250, e.courierItalicName = "Courier-Oblique", e.courierBoldItalicAscent = 801, e.courierBoldItalicDescent = -250, e.courierBoldItalicName = "Courier-BoldOblique", e.timesAscent = 898, e.timesDescent = -218, e.timesName = "Times-Roman", e.timesBoldAscent = 935, e.timesBoldDescent = -218, e.timesBoldName = "Times-Bold", e.timesItalicAscent = 883, e.timesItalicDescent = -217, e.timesItalicName = "Times-Italic", e.timesBoldItalicAscent = 921, e.timesBoldItalicDescent = -218, e.timesBoldItalicName = "Times-BoldItalic", e.symbolAscent = 1010, e.symbolDescent = -293, e.symbolName = "Symbol", e.zapfDingbatsAscent = 820, e.zapfDingbatsDescent = -143, e.zapfDingbatsName = "ZapfDingbats", e.arialWidth = [278, 278, 355, 556, 556, 889, 667, 191, 333, 333, 389, 584, 278, 333, 278, 278, 556, 556, 556, 556, 556, 556, 556, 556, 556, 556, 278, 278, 584, 584, 584, 556, 1015, 667, 667, 722, 722, 667, 611, 778, 722, 278, 500, 667, 556, 833, 722, 778, 667, 778, 722, 667, 611, 722, 667, 944, 667, 667, 611, 278, 278, 278, 469, 556, 333, 556, 556, 500, 556, 556, 278, 556, 556, 222, 222, 500, 222, 833, 556, 556, 556, 556, 333, 500, 278, 556, 500, 722, 500, 500, 500, 334, 260, 334, 584, 0, 556, 0, 222, 556, 333, 1e3, 556, 556, 333, 1e3, 667, 333, 1e3, 0, 611, 0, 0, 222, 222, 333, 333, 350, 556, 1e3, 333, 1e3, 500, 333, 944, 0, 500, 667, 0, 333, 556, 556, 556, 556, 260, 556, 333, 737, 370, 556, 584, 0, 737, 333, 400, 584, 333, 333, 333, 556, 537, 278, 333, 333, 365, 556, 834, 834, 834, 611, 667, 667, 667, 667, 667, 667, 1e3, 722, 667, 667, 667, 667, 278, 278, 278, 278, 722, 722, 778, 778, 778, 778, 778, 584, 778, 722, 722, 722, 722, 667, 667, 611, 556, 556, 556, 556, 556, 556, 889, 500, 556, 556, 556, 556, 278, 278, 278, 278, 556, 556, 556, 556, 556, 556, 556, 584, 611, 556, 556, 556, 556, 500, 556, 500], e.arialBoldWidth = [278, 333, 474, 556, 556, 889, 722, 238, 333, 333, 389, 584, 278, 333, 278, 278, 556, 556, 556, 556, 556, 556, 556, 556, 556, 556, 333, 333, 584, 584, 584, 611, 975, 722, 722, 722, 722, 667, 611, 778, 722, 278, 556, 722, 611, 833, 722, 778, 667, 778, 722, 667, 611, 722, 667, 944, 667, 667, 611, 333, 278, 333, 584, 556, 333, 556, 611, 556, 611, 556, 333, 611, 611, 278, 278, 556, 278, 889, 611, 611, 611, 611, 389, 556, 333, 611, 556, 778, 556, 556, 500, 389, 280, 389, 584, 0, 556, 0, 278, 556, 500, 1e3, 556, 556, 333, 1e3, 667, 333, 1e3, 0, 611, 0, 0, 278, 278, 500, 500, 350, 556, 1e3, 333, 1e3, 556, 333, 944, 0, 500, 667, 0, 333, 556, 556, 556, 556, 280, 556, 333, 737, 370, 556, 584, 0, 737, 333, 400, 584, 333, 333, 333, 611, 556, 278, 333, 333, 365, 556, 834, 834, 834, 611, 722, 722, 722, 722, 722, 722, 1e3, 722, 667, 667, 667, 667, 278, 278, 278, 278, 722, 722, 778, 778, 778, 778, 778, 584, 778, 722, 722, 722, 722, 667, 667, 611, 556, 556, 556, 556, 556, 556, 889, 556, 556, 556, 556, 556, 278, 278, 278, 278, 611, 611, 611, 611, 611, 611, 611, 584, 611, 611, 611, 611, 611, 556, 611, 556], e.fixedWidth = [600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600, 600], e.timesRomanWidth = [250, 333, 408, 500, 500, 833, 778, 180, 333, 333, 500, 564, 250, 333, 250, 278, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 278, 278, 564, 564, 564, 444, 921, 722, 667, 667, 722, 611, 556, 722, 722, 333, 389, 722, 611, 889, 722, 722, 556, 722, 667, 556, 611, 722, 722, 944, 722, 722, 611, 333, 278, 333, 469, 500, 333, 444, 500, 444, 500, 444, 333, 500, 500, 278, 278, 500, 278, 778, 500, 500, 500, 500, 333, 389, 278, 500, 500, 722, 500, 500, 444, 480, 200, 480, 541, 0, 500, 0, 333, 500, 444, 1e3, 500, 500, 333, 1e3, 556, 333, 889, 0, 611, 0, 0, 333, 333, 444, 444, 350, 500, 1e3, 333, 980, 389, 333, 722, 0, 444, 722, 0, 333, 500, 500, 500, 500, 200, 500, 333, 760, 276, 500, 564, 0, 760, 333, 400, 564, 300, 300, 333, 500, 453, 250, 333, 300, 310, 500, 750, 750, 750, 444, 722, 722, 722, 722, 722, 722, 889, 667, 611, 611, 611, 611, 333, 333, 333, 333, 722, 722, 722, 722, 722, 722, 722, 564, 722, 722, 722, 722, 722, 722, 556, 500, 444, 444, 444, 444, 444, 444, 667, 444, 444, 444, 444, 444, 278, 278, 278, 278, 500, 500, 500, 500, 500, 500, 500, 564, 500, 500, 500, 500, 500, 500, 500, 500], e.timesRomanBoldWidth = [250, 333, 555, 500, 500, 1e3, 833, 278, 333, 333, 500, 570, 250, 333, 250, 278, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 333, 333, 570, 570, 570, 500, 930, 722, 667, 722, 722, 667, 611, 778, 778, 389, 500, 778, 667, 944, 722, 778, 611, 778, 722, 556, 667, 722, 722, 1e3, 722, 722, 667, 333, 278, 333, 581, 500, 333, 500, 556, 444, 556, 444, 333, 500, 556, 278, 333, 556, 278, 833, 556, 500, 556, 556, 444, 389, 333, 556, 500, 722, 500, 500, 444, 394, 220, 394, 520, 0, 500, 0, 333, 500, 500, 1e3, 500, 500, 333, 1e3, 556, 333, 1e3, 0, 667, 0, 0, 333, 333, 500, 500, 350, 500, 1e3, 333, 1e3, 389, 333, 722, 0, 444, 722, 0, 333, 500, 500, 500, 500, 220, 500, 333, 747, 300, 500, 570, 0, 747, 333, 400, 570, 300, 300, 333, 556, 540, 250, 333, 300, 330, 500, 750, 750, 750, 500, 722, 722, 722, 722, 722, 722, 1e3, 722, 667, 667, 667, 667, 389, 389, 389, 389, 722, 722, 778, 778, 778, 778, 778, 570, 778, 722, 722, 722, 722, 722, 611, 556, 500, 500, 500, 500, 500, 500, 722, 444, 444, 444, 444, 444, 278, 278, 278, 278, 500, 556, 500, 500, 500, 500, 500, 570, 500, 556, 556, 556, 556, 500, 556, 500], e.timesRomanItalicWidth = [250, 333, 420, 500, 500, 833, 778, 214, 333, 333, 500, 675, 250, 333, 250, 278, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 333, 333, 675, 675, 675, 500, 920, 611, 611, 667, 722, 611, 611, 722, 722, 333, 444, 667, 556, 833, 667, 722, 611, 722, 611, 500, 556, 722, 611, 833, 611, 556, 556, 389, 278, 389, 422, 500, 333, 500, 500, 444, 500, 444, 278, 500, 500, 278, 278, 444, 278, 722, 500, 500, 500, 500, 389, 389, 278, 500, 444, 667, 444, 444, 389, 400, 275, 400, 541, 0, 500, 0, 333, 500, 556, 889, 500, 500, 333, 1e3, 500, 333, 944, 0, 556, 0, 0, 333, 333, 556, 556, 350, 500, 889, 333, 980, 389, 333, 667, 0, 389, 556, 0, 389, 500, 500, 500, 500, 275, 500, 333, 760, 276, 500, 675, 0, 760, 333, 400, 675, 300, 300, 333, 500, 523, 250, 333, 300, 310, 500, 750, 750, 750, 500, 611, 611, 611, 611, 611, 611, 889, 667, 611, 611, 611, 611, 333, 333, 333, 333, 722, 667, 722, 722, 722, 722, 722, 675, 722, 722, 722, 722, 722, 556, 611, 500, 500, 500, 500, 500, 500, 500, 667, 444, 444, 444, 444, 444, 278, 278, 278, 278, 500, 500, 500, 500, 500, 500, 500, 675, 500, 500, 500, 500, 500, 444, 500, 444], e.timesRomanBoldItalicWidths = [250, 389, 555, 500, 500, 833, 778, 278, 333, 333, 500, 570, 250, 333, 250, 278, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 333, 333, 570, 570, 570, 500, 832, 667, 667, 667, 722, 667, 667, 722, 778, 389, 500, 667, 611, 889, 722, 722, 611, 722, 667, 556, 611, 722, 667, 889, 667, 611, 611, 333, 278, 333, 570, 500, 333, 500, 500, 444, 500, 444, 333, 500, 556, 278, 278, 500, 278, 778, 556, 500, 500, 500, 389, 389, 278, 556, 444, 667, 500, 444, 389, 348, 220, 348, 570, 0, 500, 0, 333, 500, 500, 1e3, 500, 500, 333, 1e3, 556, 333, 944, 0, 611, 0, 0, 333, 333, 500, 500, 350, 500, 1e3, 333, 1e3, 389, 333, 722, 0, 389, 611, 0, 389, 500, 500, 500, 500, 220, 500, 333, 747, 266, 500, 606, 0, 747, 333, 400, 570, 300, 300, 333, 576, 500, 250, 333, 300, 300, 500, 750, 750, 750, 500, 667, 667, 667, 667, 667, 667, 944, 667, 667, 667, 667, 667, 389, 389, 389, 389, 722, 722, 722, 722, 722, 722, 722, 570, 722, 722, 722, 722, 722, 611, 611, 500, 500, 500, 500, 500, 500, 500, 722, 444, 444, 444, 444, 444, 278, 278, 278, 278, 500, 556, 500, 500, 500, 500, 500, 570, 500, 556, 556, 556, 556, 444, 500, 444], e.symbolWidth = [250, 333, 713, 500, 549, 833, 778, 439, 333, 333, 500, 549, 250, 549, 250, 278, 500, 500, 500, 500, 500, 500, 500, 500, 500, 500, 278, 278, 549, 549, 549, 444, 549, 722, 667, 722, 612, 611, 763, 603, 722, 333, 631, 722, 686, 889, 722, 722, 768, 741, 556, 592, 611, 690, 439, 768, 645, 795, 611, 333, 863, 333, 658, 500, 500, 631, 549, 549, 494, 439, 521, 411, 603, 329, 603, 549, 549, 576, 521, 549, 549, 521, 549, 603, 439, 576, 713, 686, 493, 686, 494, 480, 200, 480, 549, 750, 620, 247, 549, 167, 713, 500, 753, 753, 753, 753, 1042, 987, 603, 987, 603, 400, 549, 411, 549, 549, 713, 494, 460, 549, 549, 549, 549, 1e3, 603, 1e3, 658, 823, 686, 795, 987, 768, 768, 823, 768, 768, 713, 713, 713, 713, 713, 713, 713, 768, 713, 790, 790, 890, 823, 549, 250, 713, 603, 603, 1042, 987, 603, 987, 603, 494, 329, 790, 790, 786, 713, 384, 384, 384, 384, 384, 384, 494, 494, 494, 494, 329, 274, 686, 686, 686, 384, 384, 384, 384, 384, 384, 494, 494, 494, -1], e.zapfDingbatsWidth = [278, 974, 961, 974, 980, 719, 789, 790, 791, 690, 960, 939, 549, 855, 911, 933, 911, 945, 974, 755, 846, 762, 761, 571, 677, 763, 760, 759, 754, 494, 552, 537, 577, 692, 786, 788, 788, 790, 793, 794, 816, 823, 789, 841, 823, 833, 816, 831, 923, 744, 723, 749, 790, 792, 695, 776, 768, 792, 759, 707, 708, 682, 701, 826, 815, 789, 789, 707, 687, 696, 689, 786, 787, 713, 791, 785, 791, 873, 761, 762, 762, 759, 759, 892, 892, 788, 784, 438, 138, 277, 415, 392, 392, 668, 668, 390, 390, 317, 317, 276, 276, 509, 509, 410, 410, 234, 234, 334, 334, 732, 544, 544, 910, 667, 760, 760, 776, 595, 694, 626, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 788, 894, 838, 1016, 458, 748, 924, 748, 918, 927, 928, 928, 834, 873, 828, 924, 924, 917, 930, 931, 463, 883, 836, 836, 867, 867, 696, 696, 874, 874, 760, 946, 771, 865, 771, 888, 967, 888, 831, 873, 927, 970, 918], e }(), sO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), aO = function (e) { function t(i, n, r) { var o = e.call(this, n, void 0 === r ? i instanceof t ? i.style : Hk.Regular : r) || this; return o.dictionaryProperties = new qI, o.encodings = ["Unknown", "StandardEncoding", "MacRomanEncoding", "MacExpertEncoding", "WinAnsiEncoding", "PDFDocEncoding", "IdentityH"], o.pdfFontFamily = void 0 === i ? Zk.Helvetica : i instanceof t ? i.fontFamily : i, o.checkStyle(), o.initializeInternals(), o } return sO(t, e), Object.defineProperty(t.prototype, "fontFamily", { get: function () { return this.pdfFontFamily }, enumerable: !0, configurable: !0 }), t.prototype.checkStyle = function () { if (this.fontFamily === Zk.Symbol || this.fontFamily === Zk.ZapfDingbats) { var e = this.style; e &= ~(Hk.Bold | Hk.Italic), this.setStyle(e) } }, t.prototype.getLineWidth = function (e, i) { if (null == e) throw new Error("ArgumentNullException:line"); for (var n = 0, r = (this.name, 0), o = (e = t.convert(e)).length; r < o; r++) { var s = e[r]; n += this.getCharWidthInternal(s, i) } var a = this.metrics.getSize(i); return n *= fP.charSizeMultiplier * a, n = this.applyFormatSettings(e, i, n) }, t.prototype.equalsToFont = function (e) { var t = !1, i = e; if (null != i) { var n = this.fontFamily === i.fontFamily, r = ~(Hk.Underline | Hk.Strikeout), o = (this.style & r) == (i.style & r); t = n && o } return t }, t.prototype.initializeInternals = function () { rO.cache.search(this); var e = null, t = oO.getMetrics(this.pdfFontFamily, this.style, this.size); this.metrics = t, e = this.createInternals(), this.setInternals(e) }, t.prototype.createInternals = function () { var e = new GI; if (e.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.font)), e.items.setValue(this.dictionaryProperties.subtype, new YI(this.dictionaryProperties.type1)), e.items.setValue(this.dictionaryProperties.baseFont, new YI(this.metrics.postScriptName)), this.fontFamily !== Zk.Symbol && this.fontFamily !== Zk.ZapfDingbats) { var t = this.encodings[tP.WinAnsiEncoding]; e.items.setValue(this.dictionaryProperties.encoding, new YI(t)) } return e }, t.prototype.getCharWidthInternal = function (e, i) { var n = 0; n = e.charCodeAt(0), "0" !== this.name && "1" !== this.name && "2" !== this.name && "3" !== this.name && "4" !== this.name || (n -= t.charOffset), n = n >= 0 && 128 !== n ? n : 0; return this.metrics.widthTable.items(n) }, t.convert = function (e) { return e }, t.charOffset = 32, t }(fP), lO = function () { function e(e) { this.dictionaryProperties = new qI, this.pdfColor = new _k(255, 255, 255), this.rectangle = new qk(0, 0, 0, 0), this.pdfPage = null, this.textBrush = new Jk(new _k(0, 0, 0)), this.textFont = new aO(Zk.TimesRoman, 10), this.format = new dP(Ik.Left), this.content = "", this.pdfDictionary = new GI, this.internalColor = new _k, this.darkness = 1, void 0 === e ? this.initialize() : (this.initialize(), this.bounds = e) } return Object.defineProperty(e.prototype, "color", { get: function () { return this.pdfColor }, set: function (e) { this.pdfColor = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "innerColor", { get: function () { return this.internalColor }, set: function (e) { this.internalColor = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bounds", { get: function () { return this.rectangle }, set: function (e) { this.rectangle = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "page", { get: function () { return this.pdfPage }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "font", { get: function () { return this.textFont }, set: function (e) { this.textFont = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "stringFormat", { get: function () { return this.format }, set: function (e) { this.format = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "brush", { get: function () { return this.textBrush }, set: function (e) { this.textBrush = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "text", { get: function () { return this.content }, set: function (e) { this.content = e, this.dictionary.items.setValue(this.dictionaryProperties.contents, new Sk(this.content)) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "dictionary", { get: function () { return this.pdfDictionary }, set: function (e) { this.pdfDictionary = e }, enumerable: !0, configurable: !0 }), e.prototype.initialize = function () { this.pdfDictionary.annotationBeginSave = new ZI(this), this.pdfDictionary.items.setValue(this.dictionaryProperties.type, new YI(this.dictionaryProperties.annot)) }, e.prototype.setPage = function (e) { this.pdfPage = e, this.pdfDictionary.items.setValue(this.dictionaryProperties.p, new Tk(this.pdfPage)) }, e.prototype.beginSave = function () { this.save() }, e.prototype.save = function () { var e = new qk(this.rectangle.x, this.rectangle.y, this.rectangle.width, this.rectangle.height), t = this.pdfPage.section, i = e.height, n = t.pointToNativePdf(this.page, new Yk(e.x, e.y)); e.x = n.x, e.width = n.x + e.width, e.y = n.y - this.page.document.pageSettings.margins.top, e.height = e.y - i, this.pdfDictionary.items.setValue(this.dictionaryProperties.rect, tk.fromRectangle(e)), this.dictionary.items.setValue(this.dictionaryProperties.ca, new ek(this.darkness)) }, Object.defineProperty(e.prototype, "element", { get: function () { return this.pdfDictionary }, enumerable: !0, configurable: !0 }), e }(), hO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dO = function (e) { function t(t) { return e.call(this, t) || this } return hO(t, e), t.prototype.initialize = function () { e.prototype.initialize.call(this), this.dictionary.items.setValue(this.dictionaryProperties.subtype, new YI(this.dictionaryProperties.link)) }, t }(lO), cO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pO = function (e) { function t(t) { var i = e.call(this, t) || this; return i.pdfAction = null, i } return cO(t, e), t.prototype.getSetAction = function (e) { if (void 0 === e) return this.pdfAction; this.pdfAction = e }, t }(dO), uO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gO = function (e) { function t(t, i) { var n = e.call(this, t) || this; return n.pdfDestination = null, void 0 !== i && (n.destination = i), n } return uO(t, e), Object.defineProperty(t.prototype, "destination", { get: function () { return this.pdfDestination }, set: function (e) { this.pdfDestination = e }, enumerable: !0, configurable: !0 }), t.prototype.save = function () { e.prototype.save.call(this), null != this.pdfDestination && this.dictionary.items.setValue(this.dictionaryProperties.dest, this.pdfDestination.element) }, t.prototype.clone = function () { var e = new t(this.bounds, this.destination); return e.color = this.color, e.brush = this.brush, e.destination = this.destination, e.font = this.font, e }, t }(dO), mO = function () { function e(e) { this.layoutElement = e } return Object.defineProperty(e.prototype, "elements", { get: function () { return this.layoutElement }, enumerable: !0, configurable: !0 }), e.prototype.getElement = function () { return this.layoutElement }, e.prototype.layout = function (e) { return this.layoutInternal(e) }, e.prototype.Layouter = function (e) { return this.layoutInternal(e) }, e.prototype.getNextPage = function (e) { return e.section.add() }, e }(), fO = function () { function e(e) { void 0 === e || (this.break = e.break, this.layout = e.layout, this.paginateBounds = e.paginateBounds, this.boundsSet = e.usePaginateBounds) } return Object.defineProperty(e.prototype, "layout", { get: function () { return this.layoutType }, set: function (e) { this.layoutType = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "break", { get: function () { return this.breakType }, set: function (e) { this.breakType = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "paginateBounds", { get: function () { return void 0 === this.layoutPaginateBounds && null == this.layoutPaginateBounds && (this.layoutPaginateBounds = new qk(0, 0, 0, 0)), this.layoutPaginateBounds }, set: function (e) { this.layoutPaginateBounds = e, this.boundsSet = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "usePaginateBounds", { get: function () { return this.boundsSet }, enumerable: !0, configurable: !0 }), e }(), yO = function () { function e() { } return Object.defineProperty(e.prototype, "page", { get: function () { return this.pdfPage }, set: function (e) { this.pdfPage = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bounds", { get: function () { return new qk(this.layoutBounds.x, this.layoutBounds.y, this.layoutBounds.width, this.layoutBounds.height) }, set: function (e) { this.layoutBounds = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "format", { get: function () { return this.layoutFormat }, set: function (e) { this.layoutFormat = e }, enumerable: !0, configurable: !0 }), e }(), vO = function () { function e(e, t) { this.pdfPage = e, this.layoutBounds = t } return Object.defineProperty(e.prototype, "page", { get: function () { return this.pdfPage }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bounds", { get: function () { return this.layoutBounds }, enumerable: !0, configurable: !0 }), e }(), wO = function () { function e() { } return Object.defineProperty(e.prototype, "raiseBeginPageLayout", { get: function () { return void 0 !== this.beginPageLayout }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "raiseEndPageLayout", { get: function () { return void 0 !== this.endPageLayout }, enumerable: !0, configurable: !0 }), e.prototype.onBeginPageLayout = function (e) { this.beginPageLayout && this.beginPageLayout(this, e) }, e.prototype.onEndPageLayout = function (e) { this.endPageLayout && this.endPageLayout(this, e) }, e.prototype.drawHelper = function (e, t, i, n) { if (t instanceof Yk && void 0 === t.width && void 0 === i) return this.drawHelper(e, t.x, t.y); if ("number" == typeof t && "number" == typeof i && void 0 === n) return this.drawHelper(e, t, i, null); if (t instanceof qk && void 0 !== t.width && void 0 === i) return this.drawHelper(e, t, null); if (t instanceof Yk && void 0 === t.width && i instanceof fO) return this.drawHelper(e, t.x, t.y, i); if ("number" == typeof t && "number" == typeof i && (n instanceof fO || null == n)) { var r = e.graphics.clientSize.width - t, o = new qk(t, i, r, 0); return this.drawHelper(e, o, n) } if (t instanceof qk && void 0 !== t.width && "boolean" == typeof i) return this.bEmbedFonts = i, this.drawHelper(e, t, null); var s = new yO, a = t, l = i; s.page = e, s.bounds = a, s.format = null != l ? l : new fO; return this.layout(s) }, e }(); !function (e) { e[e.Paginate = 0] = "Paginate", e[e.OnePage = 1] = "OnePage" }(JP || (JP = {})); var bO; !function (e) { e[e.FitPage = 0] = "FitPage", e[e.FitElement = 1] = "FitElement", e[e.FitColumnsToPage = 2] = "FitColumnsToPage" }(bO || (bO = {})); var CO, LO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), MO = function (e) { function t(t) { return e.call(this, t) || this } return LO(t, e), Object.defineProperty(t.prototype, "element", { get: function () { return e.prototype.getElement.call(this) }, enumerable: !0, configurable: !0 }), t.prototype.layoutInternal = function (e) { this.format = null !== this.element.stringFormat && void 0 !== this.element.stringFormat ? this.element.stringFormat : null; var t = e.page, i = e.bounds, n = this.element.value, r = null, o = new SO; for (o.page = t, o.remainder = n; ;) { o = this.layoutOnPage(n, t, i, e), r = this.getLayoutResult(o); break } return r }, t.prototype.getLayoutResult = function (e) { return new xO(e.page, e.bounds, e.remainder, e.lastLineBounds) }, t.prototype.layoutOnPage = function (e, t, i, n) { var r = new SO; r.remainder = e, r.page = t, i = this.checkCorrectBounds(t, i); var o = (new pP).layout(e, this.element.font, this.format, i, t.getClientSize().height, !1, new Uk(0, 0)), s = null == o.remainder, a = (n.format.break === bO.FitElement || o.empty, t.graphics), l = this.element.getBrush(); this.element instanceof IO && (l.color = new _k(0, 0, 255)), a.drawStringLayoutResult(o, this.element.font, this.element.pen, l, i, this.format); o.lines[o.lineCount - 1]; return r.lastLineBounds = a.getLineBounds(o.lineCount - 1, o, this.element.font, i, this.format), r.bounds = this.getTextPageBounds(t, i, o), r.remainder = o.remainder, r.end = s, r }, t.prototype.checkCorrectBounds = function (e, t) { var i = e.graphics.clientSize; return t.height = t.height > 0 ? t.height : i.height - t.y, t }, t.prototype.getTextPageBounds = function (e, t, i) { var n = i.actualSize, r = t.x, o = t.y, s = t.width > 0 ? t.width : n.width, a = n.height; r = e.graphics.checkCorrectLayoutRectangle(n, t.x, t.y, this.format).x; var l = e.graphics.getTextVerticalAlignShift(n.height, t.height, this.format); return new qk(r, o += l, s, a) }, t }(mO), SO = function () { return function () { } }(), xO = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i) || this; return o.remainderText = n, o.lastLineTextBounds = r, o } return LO(t, e), Object.defineProperty(t.prototype, "remainder", { get: function () { return this.remainderText }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "lastLineBounds", { get: function () { return this.lastLineTextBounds }, enumerable: !0, configurable: !0 }), t }(vO), TO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), DO = function (e) { function t(t, i, n, r, o) { var s = e.call(this) || this; return s.content = "", s.elementValue = "", s.hasPointOverload = !1, s.isPdfTextElement = !1, void 0 === t || ("string" == typeof t && void 0 === i ? (s.content = t, s.elementValue = t) : "string" == typeof t && i instanceof fP && void 0 === n ? (s.content = t, s.elementValue = t, s.pdfFont = i) : "string" == typeof t && i instanceof fP && n instanceof zP && void 0 === r ? (s.content = t, s.elementValue = t, s.pdfFont = i, s.pdfPen = n) : "string" == typeof t && i instanceof fP && n instanceof Qk && void 0 === r ? (s.content = t, s.elementValue = t, s.pdfFont = i, s.pdfBrush = n) : (s.content = t, s.elementValue = t, s.pdfFont = i, s.pdfPen = n, s.pdfBrush = r, s.format = o)), s } return TO(t, e), Object.defineProperty(t.prototype, "text", { get: function () { return this.content }, set: function (e) { this.elementValue = e, this.content = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "value", { get: function () { return this.elementValue }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "pen", { get: function () { return this.pdfPen }, set: function (e) { this.pdfPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "brush", { get: function () { return this.pdfBrush }, set: function (e) { this.pdfBrush = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "font", { get: function () { return this.pdfFont }, set: function (e) { this.pdfFont = e, this.pdfFont instanceof aO && null != this.content ? this.elementValue = aO.convert(this.content) : this.elementValue = this.content }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "stringFormat", { get: function () { return this.format }, set: function (e) { this.format = e }, enumerable: !0, configurable: !0 }), t.prototype.getBrush = function () { return null == this.pdfBrush || void 0 === this.pdfBrush ? new Jk(new _k(0, 0, 0)) : this.pdfBrush }, t.prototype.layout = function (e) { return new MO(this).layout(e) }, t.prototype.drawText = function (e, t, i, n) { if (t instanceof Yk && void 0 === t.width && void 0 === i) return this.hasPointOverload = !0, this.drawText(e, t.x, t.y); if ("number" == typeof t && "number" == typeof i && void 0 === n) return this.hasPointOverload = !0, this.drawText(e, t, i, null); if (t instanceof qk && void 0 !== t.width && void 0 === i) return this.drawText(e, t, null); if (t instanceof Yk && void 0 === t.width && i instanceof fO) return this.hasPointOverload = !0, this.drawText(e, t.x, t.y, i); if ("number" == typeof t && "number" == typeof i && (n instanceof fO || null == n)) { this.hasPointOverload = !0; var r = e.graphics.clientSize.width - t, o = new qk(t, i, r, 0); return this.drawText(e, o, n) } if (t instanceof qk && void 0 !== t.width && "boolean" == typeof i) return this.drawText(e, t, null); var s = new pP; if (this.hasPointOverload) { var a = s.layout(this.value, this.font, this.stringFormat, new Uk(e.graphics.clientSize.width - t.x, 0), !0, e.graphics.clientSize), l = void 0, h = t, d = i; if ((f = new yO).page = e, f.bounds = h, f.format = null != d ? d : new fO, a.lines.length > 1) { if (this.text = a.layoutLines[0].text, f.bounds.y <= f.page.graphics.clientSize.height) { var c = new Yk(f.bounds.x, f.bounds.y); l = this.layout(f); for (var p = new qk(0, l.bounds.y + a.lineHeight, e.graphics.clientSize.width, a.lineHeight), u = 1; u < a.lines.length; u++)if (f.page = l.page, f.bounds = new qk(new Yk(p.x, p.y), new Uk(p.width, p.height)), this.text = a.layoutLines[u].text, p.y + a.lineHeight > l.page.graphics.clientSize.height && (f.page = f.page.graphics.getNextPage(), p = c.y > l.page.graphics.clientSize.height - l.bounds.height ? new qk(0, l.bounds.height, l.page.graphics.clientSize.width, a.lineHeight) : new qk(0, 0, l.page.graphics.clientSize.width, a.lineHeight), f.bounds = p), l = this.layout(f), u !== a.lines.length - 1) p = new qk(0, l.bounds.y + a.lineHeight, l.page.graphics.clientSize.width, a.lineHeight); else { var g = this.font.measureString(this.text, this.format).width; l = this.calculateResultBounds(l, g, l.page.graphics.clientSize.width, 0) } } return l } var m = this.font.measureString(this.text, this.format); return f.bounds.y <= f.page.graphics.clientSize.height && (l = this.layout(f), l = this.calculateResultBounds(l, m.width, l.page.graphics.clientSize.width, 0)), l } l = s.layout(this.value, this.font, this.stringFormat, new Uk(t.width, 0), !1, e.graphics.clientSize); var f, y = void 0; h = t, d = i; if ((f = new yO).page = e, f.bounds = h, f.format = null != d ? d : new fO, l.lines.length > 1) { if (this.text = l.layoutLines[0].text, f.bounds.y <= f.page.graphics.clientSize.height) { c = new Yk(f.bounds.x, f.bounds.y); y = this.layout(f); for (p = new qk(h.x, y.bounds.y + l.lineHeight, h.width, l.lineHeight), u = 1; u < l.lines.length; u++)if (f.page = y.page, f.bounds = new qk(p.x, p.y, p.width, p.height), this.text = l.layoutLines[u].text, p.y + l.lineHeight > y.page.graphics.clientSize.height && (f.page = f.page.graphics.getNextPage(), p = c.y > y.page.graphics.clientSize.height - y.bounds.height ? new qk(h.x, l.lineHeight, h.width, l.lineHeight) : new qk(h.x, 0, h.width, l.lineHeight), f.bounds = p), y = this.layout(f), u !== l.lines.length - 1) p = new qk(h.x, y.bounds.y + l.lineHeight, h.width, l.lineHeight); else { g = this.font.measureString(this.text, this.format).width; y = this.calculateResultBounds(y, g, h.width, h.x) } } return y } m = this.font.measureString(this.text, this.format); return f.bounds.y <= f.page.graphics.clientSize.height && (y = this.layout(f), y = this.calculateResultBounds(y, m.width, h.width, h.x)), y }, t.prototype.calculateResultBounds = function (e, t, i, n) { return null != this.stringFormat && void 0 !== this.stringFormat && this.stringFormat.alignment === Ik.Center ? (e.bounds.x = n + (i - t) / 2, e.bounds.width = t) : null != this.stringFormat && void 0 !== this.stringFormat && this.stringFormat.alignment === Ik.Right ? (e.bounds.x = n + (i - t), e.bounds.width = t) : null != this.stringFormat && void 0 !== this.stringFormat && this.stringFormat.alignment === Ik.Justify ? (e.bounds.x = n, e.bounds.width = i) : (e.bounds.width = n, e.bounds.width = t), e }, t }(wO), AO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), EO = function (e) { function t(t, i) { var n = e.call(this, t) || this; return void 0 !== i && (n.uri = i), n } return AO(t, e), Object.defineProperty(t.prototype, "uriAction", { get: function () { return void 0 === this.pdfUriAction && (this.pdfUriAction = new Ek), this.pdfUriAction }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "uri", { get: function () { return this.uriAction.uri }, set: function (e) { this.uriAction.uri !== e && (this.uriAction.uri = e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "action", { get: function () { return this.getSetAction() }, set: function (e) { this.getSetAction(e), this.uriAction.next = e }, enumerable: !0, configurable: !0 }), t.prototype.initialize = function () { e.prototype.initialize.call(this), this.dictionary.items.setValue(this.dictionaryProperties.subtype, new YI(this.dictionaryProperties.link)); this.uriAction.element; this.dictionary.items.setValue(this.dictionaryProperties.a, this.uriAction.element) }, t }(pO), jO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), IO = function (e) { function t() { var t = e.call(this) || this; t.uniformResourceLocator = "", t.uriAnnotation = null, t.recalculateBounds = !1, t.defaultBorder = new tk; for (var i = 0; i < 3; i++)t.defaultBorder.add(new ek(0)); return t } return jO(t, e), Object.defineProperty(t.prototype, "url", { get: function () { return this.uniformResourceLocator }, set: function (e) { if (0 === e.length) throw new Error("ArgumentException : Url - string can not be empty"); this.uniformResourceLocator = e }, enumerable: !0, configurable: !0 }), t.prototype.draw = function (e, t) { if (e instanceof qN) { var i = new pP, n = this.font.style; if (t instanceof Yk) { this.recalculateBounds = !0, this.font.style = Hk.Underline; if (1 === (a = i.layout(this.value, this.font, this.stringFormat, new Uk(e.graphics.clientSize.width - t.x, 0), !0, e.graphics.clientSize)).lines.length) { var r = this.font.measureString(this.value), o = new qk(t, r); o = this.calculateBounds(o, r.width, e.graphics.clientSize.width, t.x), this.uriAnnotation = new EO(o, this.url), this.uriAnnotation.dictionary.items.setValue("Border", this.defaultBorder), e.annotations.add(this.uriAnnotation); var s = this.drawText(e, t); return this.font.style = n, s } s = this.drawMultipleLineWithPoint(a, e, t); return this.font.style = n, s } var a = i.layout(this.value, this.font, this.stringFormat, new Uk(t.width, 0), !1, new Uk(0, 0)); if (this.font.style = Hk.Underline, 1 === a.lines.length) { r = this.font.measureString(this.value), o = new qk(new Yk(t.x, t.y), r); o = this.calculateBounds(o, r.width, t.width, t.x), this.uriAnnotation = new EO(o, this.url), this.uriAnnotation.dictionary.items.setValue("Border", this.defaultBorder), e.annotations.add(this.uriAnnotation); var l = this.drawText(e, t); return this.font.style = n, l } l = this.drawMultipleLineWithBounds(a, e, t); return this.font.style = n, l } var h = new qN; return h = e.page, this.draw(h, t) }, t.prototype.drawMultipleLineWithPoint = function (e, t, i) { for (var n, r = 0; r < e.layoutLines.length; r++) { var o = this.font.measureString(e.lines[r].text), s = new qk(i, o); if (0 !== r && (s.x = 0), this.text = e.lines[r].text, s.y + o.height > t.graphics.clientSize.height) { if (0 === r) break; t = t.graphics.getNextPage(), s = new qk(0, 0, t.graphics.clientSize.width, o.height), i.y = 0 } s = this.calculateBounds(s, o.width, t.graphics.clientSize.width, s.x), this.uriAnnotation = new EO(s, this.url), this.uriAnnotation.dictionary.items.setValue("Border", this.defaultBorder), t.annotations.add(this.uriAnnotation), n = 0 !== r ? this.drawText(t, new Yk(0, s.y)) : this.drawText(t, s.x, s.y), i.y += o.height } return n }, t.prototype.drawMultipleLineWithBounds = function (e, t, i) { for (var n, r = 0; r < e.layoutLines.length; r++) { var o = this.font.measureString(e.lines[r].text), s = new qk(new Yk(i.x, i.y), o); if (s = this.calculateBounds(s, o.width, i.width, i.x), this.text = e.lines[r].text, i.y + o.height > t.graphics.clientSize.height) { if (0 === r) break; t = t.graphics.getNextPage(), i = new qk(i.x, 0, i.width, o.height), s.y = 0 } this.uriAnnotation = new EO(s, this.url), this.uriAnnotation.dictionary.items.setValue("Border", this.defaultBorder), t.annotations.add(this.uriAnnotation), n = this.drawText(t, i), i.y += o.height } return n }, t.prototype.calculateBounds = function (e, t, i, n) { return null != this.stringFormat && void 0 !== this.stringFormat && this.stringFormat.alignment === Ik.Center ? (e.x = n + (i - t) / 2, e.width = t) : null != this.stringFormat && void 0 !== this.stringFormat && this.stringFormat.alignment === Ik.Right ? (e.x = n + (i - t), e.width = t) : null != this.stringFormat && void 0 !== this.stringFormat && this.stringFormat.alignment === Ik.Justify ? (e.x = n, e.width = i) : (e.width = n, e.width = t), e }, t }(DO), kO = function () { function e() { } return e.convert = function (e, t) { var i = ""; switch (t) { case EP.None: i = ""; break; case EP.Numeric: i = e.toString(); break; case EP.LowerLatin: i = this.arabicToLetter(e).toLowerCase(); break; case EP.LowerRoman: i = this.arabicToRoman(e).toLowerCase(); break; case EP.UpperLatin: i = this.arabicToLetter(e); break; case EP.UpperRoman: i = this.arabicToRoman(e) }return i }, e.arabicToRoman = function (e) { var t = ""; return t += this.generateNumber(e, 1e3, "M"), t += this.generateNumber(e, 900, "CM"), t += this.generateNumber(e, 500, "D"), t += this.generateNumber(e, 400, "CD"), t += this.generateNumber(e, 100, "C"), t += this.generateNumber(e, 90, "XC"), t += this.generateNumber(e, 50, "L"), t += this.generateNumber(e, 40, "XL"), t += this.generateNumber(e, 10, "X"), t += this.generateNumber(e, 9, "IX"), t += this.generateNumber(e, 5, "V"), t += this.generateNumber(e, 4, "IV"), (t += this.generateNumber(e, 1, "I")).toString() }, e.arabicToLetter = function (e) { for (var t = this.convertToLetter(e), i = ""; t.length > 0;) { var n = t.pop(); i = this.appendChar(i, n) } return i.toString() }, e.generateNumber = function (e, t, i) { for (var n = ""; e >= t;)e -= t, n += i; return n.toString() }, e.convertToLetter = function (e) { if (e <= 0) throw Error("ArgumentOutOfRangeException-arabic, Value can not be less 0"); for (var t = []; e > this.letterLimit;) { var i = e % this.letterLimit; 0 === i ? (e = e / this.letterLimit - 1, i = this.letterLimit) : e /= this.letterLimit, t.push(i) } return t.push(e), t }, e.appendChar = function (t, i) { return t += String.fromCharCode(e.acsiiStartIndex + i) }, e.letterLimit = 26, e.acsiiStartIndex = 64, e }(), PO = function () { function e(e, t) { this.pdfTemplate = null, this.content = "", void 0 === e || (this.template = e, this.value = t) } return Object.defineProperty(e.prototype, "template", { get: function () { return this.pdfTemplate }, set: function (e) { this.pdfTemplate = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { return this.content }, set: function (e) { this.content = e }, enumerable: !0, configurable: !0 }), e }(), NO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), OO = function (e) { function t() { var t = e.call(this) || this; return t.list = new WP, t } return NO(t, e), t.prototype.performDraw = function (t, i, n, r) { e.prototype.performDrawHelper.call(this, t, i, n, r); var o = this.getValue(t), s = new FN(this.getSize()); this.list.setValue(t, new PO(s, o)); var a = this.getSize(); s.graphics.drawString(o, this.getFont(), this.pen, this.getBrush(), 0, 0, a.width, a.height, this.stringFormat); var l = new Yk(i.x + this.location.x, i.y + this.location.y); t.drawPdfTemplate(s, l, new Uk(s.width * n, s.height * r)) }, t }(qP), RO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), zO = function (e) { function t(t, i) { var n = e.call(this) || this; return n.internalNumberStyle = EP.Numeric, void 0 === i ? n.font = t : i instanceof Qk ? (n.font = t, n.brush = i) : (n.font = t, n.bounds = i), n } return RO(t, e), Object.defineProperty(t.prototype, "numberStyle", { get: function () { return this.internalNumberStyle }, set: function (e) { this.internalNumberStyle = e }, enumerable: !0, configurable: !0 }), t.prototype.getValue = function (e) { var t = this.getPageFromGraphics(e); return this.internalGetValue(t) }, t.prototype.internalGetValue = function (e) { var t = e.document.pages.indexOf(e) + 1; return kO.convert(t, this.numberStyle) }, t }(OO), BO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), FO = function (e) { function t(t, i, n) { for (var r = [], o = 3; o < arguments.length; o++)r[o - 3] = arguments[o]; var s = e.call(this) || this; return s.internalAutomaticFields = null, s.internalText = "", s.font = t, s.brush = i, s.text = n, s.automaticFields = r, s } return BO(t, e), Object.defineProperty(t.prototype, "text", { get: function () { return this.internalText }, set: function (e) { this.internalText = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "automaticFields", { get: function () { return this.internalAutomaticFields }, set: function (e) { this.internalAutomaticFields = e }, enumerable: !0, configurable: !0 }), t.prototype.getValue = function (e) { var t = this.text.toString(); if (void 0 !== this.automaticFields && null != this.automaticFields && this.automaticFields.length > 0) for (var i = 0; i < this.automaticFields.length; i++) { var n = this.automaticFields[i]; t = t.replace("{" + i + "}", n.getValue(e)) } return t }, t }(OO), VO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), WO = function (e) { function t() { var t = e.call(this) || this; return t.list = new WP, t.painterGraphics = [], t } return VO(t, e), t.prototype.performDraw = function (t, i, n, r) { e.prototype.performDrawHelper.call(this, t, i, n, r); var o = this.getPageFromGraphics(t).document, s = this.getValue(t); if (this.list.containsKey(o)) { var a = this.list.getValue(o), l = new Yk(i.x + this.location.x, i.y + this.location.y); t.drawPdfTemplate(a.template, l, new Uk(a.template.width * n, a.template.height * r)), this.painterGraphics.push(t) } else { var h = this.getSize(), d = new FN(h); this.list.setValue(o, new PO(d, s)), d.graphics.drawString(s, this.getFont(), this.pen, this.getBrush(), 0, 0, h.width, h.height, this.stringFormat); l = new Yk(i.x + this.location.x, i.y + this.location.y); t.drawPdfTemplate(d, l, new Uk(d.width * n, d.height * r)), this.painterGraphics.push(t) } }, t }(qP), HO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), _O = function (e) { function t(t, i) { var n = e.call(this) || this; return n.internalNumberStyle = EP.Numeric, void 0 === i ? n.font = t : i instanceof Qk ? (n.font = t, n.brush = i) : (n.font = t, n.bounds = i), n } return HO(t, e), Object.defineProperty(t.prototype, "numberStyle", { get: function () { return this.internalNumberStyle }, set: function (e) { this.internalNumberStyle = e }, enumerable: !0, configurable: !0 }), t.prototype.getValue = function (e) { var t = this.getPageFromGraphics(e).section.parent.document.pages.count; return kO.convert(t, this.numberStyle) }, t }(WO); !function (e) { e[e.Location = 0] = "Location", e[e.FitToPage = 1] = "FitToPage", e[e.FitR = 2] = "FitR" }(CO || (CO = {})); var YO, UO = function () { function e(e, t) { this.dictionaryProperties = new qI, this.destinationMode = CO.Location, this.zoomFactor = 0, this.destinationLocation = new Yk(0, 0), this.bounds = new qk, this.array = new tk; AP.RotateAngle0; this.destinationLocation = new Yk(0, this.destinationLocation.y), this.pdfPage = e, t instanceof Yk ? this.destinationLocation = t : this.bounds = t } return Object.defineProperty(e.prototype, "zoom", { get: function () { return this.zoomFactor }, set: function (e) { this.zoomFactor = e, this.initializePrimitive() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "page", { get: function () { return this.pdfPage }, set: function (e) { this.pdfPage = e, this.initializePrimitive() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "mode", { get: function () { return this.destinationMode }, set: function (e) { this.destinationMode = e, this.initializePrimitive() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "location", { get: function () { return this.destinationLocation }, set: function (e) { this.destinationLocation = e, this.initializePrimitive() }, enumerable: !0, configurable: !0 }), e.prototype.pointToNativePdf = function (e, t) { return e.section.pointToNativePdf(e, t) }, e.prototype.initializePrimitive = function () { switch (this.array.clear(), this.array.add(new Tk(this.pdfPage)), this.destinationMode) { case CO.Location: var e = this.pdfPage, t = new Yk; t = this.pointToNativePdf(e, this.destinationLocation), this.array.add(new YI(this.dictionaryProperties.xyz)), this.array.add(new ek(t.x)), this.array.add(new ek(t.y)), this.array.add(new ek(this.zoomFactor)); break; case CO.FitToPage: this.array.add(new YI(this.dictionaryProperties.fit)) } }, Object.defineProperty(e.prototype, "element", { get: function () { return this.initializePrimitive(), this.array }, enumerable: !0, configurable: !0 }), e }(), qO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), GO = function (e) { function t(t, i, n) { var r = e.call(this, i) || this; return r.isEmbedFont = !1, r.isUnicode = !0, void 0 !== n ? r.createFontInternal(t, n) : r.createFontInternal(t, Hk.Regular), r } return qO(t, e), t.prototype.equalsToFont = function (e) { return !1 }, t.prototype.getLineWidth = function (e, t) { var i = 0; if (null !== t && t.textDirection !== Wk.None) { i = this.getUnicodeLineWidth(e, i, t).width } else i = this.fontInternal.getLineWidth(e); var n = this.metrics.getSize(t); return i *= fP.charSizeMultiplier * n, i = this.applyFormatSettings(e, t, i) }, t.prototype.getCharWidth = function (e, t) { var i = this.fontInternal.getCharWidth(e); return i *= .001 * this.metrics.getSize(t) }, t.prototype.createFontInternal = function (e, t) { this.fontInternal = new xN(e, this.size), this.calculateStyle(t), this.initializeInternals() }, t.prototype.calculateStyle = function (e) { var t = this.fontInternal.ttfMetrics.macStyle; 0 != (e & Hk.Underline) && (t |= Hk.Underline), 0 != (e & Hk.Strikeout) && (t |= Hk.Strikeout), this.setStyle(t) }, t.prototype.initializeInternals = function () { var e = null; rO.enableCache && (e = rO.cache.search(this)); var t = null; if (null !== e && void 0 !== e) { t = e.getInternals(); var i = e.metrics; (i = i.clone()).size = this.size, this.metrics = i, this.fontInternal = e.fontInternal } else null == e && (this.fontInternal instanceof xN && (this.fontInternal.isEmbed = this.isEmbedFont), this.fontInternal.createInternals(), t = this.fontInternal.getInternals(), this.metrics = this.fontInternal.metrics); this.metrics.isUnicodeFont = !0, this.setInternals(t) }, t.prototype.setSymbols = function (e) { var t = this.fontInternal; null != t && t.setSymbols(e) }, Object.defineProperty(t.prototype, "Unicode", { get: function () { return this.isUnicode }, enumerable: !0, configurable: !0 }), t.prototype.getUnicodeLineWidth = function (e, t, i) { t = 0; var n = null, r = (new jN).getGlyphIndex(e, this, i.textDirection === Wk.RightToLeft, n, !0), o = r.success; if (n = r.glyphs, o && null !== n) for (var s = this.fontInternal.ttfReader, a = 0, l = n.length; a < l; a++) { var h = n[a], d = s.getGlyph(h); null !== d && void 0 !== d && (t += d.width) } return { success: o, width: t } }, t }(fP), QO = function () { function e(e, t, i, n, r) { e instanceof qk && void 0 === t ? this.InitiateBounds(e.x, e.y, e.width, e.height, null) : e instanceof qk && t instanceof qN && void 0 === i ? this.InitiateBounds(e.x, e.y, e.width, e.height, t) : e instanceof Yk && t instanceof Uk && void 0 === i ? this.InitiateBounds(e.x, e.y, t.width, t.height, null) : e instanceof Yk && t instanceof Uk && i instanceof qN && void 0 === n ? this.InitiateBounds(e.x, e.y, t.width, t.height, i) : e instanceof Uk && void 0 === t ? this.InitiateBounds(0, 0, e.width, e.height, null) : "number" == typeof e && "number" == typeof t && void 0 === i ? this.InitiateBounds(0, 0, e, t, null) : "number" == typeof e && "number" == typeof t && i instanceof qN && void 0 === n ? this.InitiateBounds(0, 0, e, t, i) : this.InitiateBounds(e, t, i, n, null) } return Object.defineProperty(e.prototype, "dock", { get: function () { return this.dockStyle }, set: function (e) { this.dockStyle = e, this.resetAlignment() }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "alignment", { get: function () { return this.alignmentStyle }, set: function (e) { this.setAlignment(e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "foreground", { get: function () { return this.isForeground }, set: function (e) { this.isForeground = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "background", { get: function () { return !this.isForeground }, set: function (e) { this.isForeground = !e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "location", { get: function () { return this.currentLocation }, set: function (e) { this.type === kP.None && (this.currentLocation = e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "x", { get: function () { return void 0 !== this.currentLocation ? this.currentLocation.x : 0 }, set: function (e) { this.type === kP.None && (this.currentLocation.x = e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "y", { get: function () { return void 0 !== this.currentLocation ? this.currentLocation.y : 0 }, set: function (e) { this.type === kP.None && (this.currentLocation.y = e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "size", { get: function () { return this.template.size }, set: function (e) { this.type === kP.None && this.template.reset(e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return this.template.width }, set: function (e) { if (this.template.width !== e && this.type === kP.None) { var t = this.template.size; t.width = e, this.template.reset(t) } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.template.height }, set: function (e) { if (this.template.height !== e && this.type === kP.None) { var t = this.template.size; t.height = e, this.template.reset(t) } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "graphics", { get: function () { return this.template.graphics }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "template", { get: function () { return this.pdfTemplate }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "type", { get: function () { return this.templateType }, set: function (e) { this.updateDocking(e), this.templateType = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bounds", { get: function () { return new qk(new Yk(this.x, this.y), this.size) }, set: function (e) { this.type === kP.None && (this.location = new Yk(e.x, e.y), this.size = new Uk(e.width, e.height)) }, enumerable: !0, configurable: !0 }), e.prototype.InitiateBounds = function (e, t, i, n, r) { this.x = e, this.y = t, this.pdfTemplate = new FN(i, n) }, e.prototype.updateDocking = function (e) { if (e !== kP.None) { switch (e) { case kP.Top: this.dock = jP.Top; break; case kP.Bottom: this.dock = jP.Bottom; break; case kP.Left: this.dock = jP.Left; break; case kP.Right: this.dock = jP.Right }this.resetAlignment() } }, e.prototype.resetAlignment = function () { this.alignment = IP.None }, e.prototype.setAlignment = function (e) { if (this.dock === jP.None) this.alignmentStyle = e; else { var t = !1; switch (this.dock) { case jP.Left: t = e === IP.TopLeft || e === IP.MiddleLeft || e === IP.BottomLeft || e === IP.None; break; case jP.Top: t = e === IP.TopLeft || e === IP.TopCenter || e === IP.TopRight || e === IP.None; break; case jP.Right: t = e === IP.TopRight || e === IP.MiddleRight || e === IP.BottomRight || e === IP.None; break; case jP.Bottom: t = e === IP.BottomLeft || e === IP.BottomCenter || e === IP.BottomRight || e === IP.None; break; case jP.Fill: t = e === IP.MiddleCenter || e === IP.None }t && (this.alignmentStyle = e) } }, e.prototype.draw = function (e, t) { var i = e.page, n = this.calculateBounds(i, t); -0 === n.x && (n.x = 0), e.graphics.drawPdfTemplate(this.template, new Yk(n.x, n.y), new Uk(n.width, n.height)) }, e.prototype.calculateBounds = function (e, t) { var i = this.bounds; return this.alignmentStyle !== IP.None ? i = this.getAlignmentBounds(e, t) : this.dockStyle !== jP.None && (i = this.getDockBounds(e, t)), i }, e.prototype.getAlignmentBounds = function (e, t) { this.bounds; return this.type === kP.None ? this.getSimpleAlignmentBounds(e, t) : this.getTemplateAlignmentBounds(e, t) }, e.prototype.getSimpleAlignmentBounds = function (e, t) { var i = this.bounds, n = e.section.getActualBounds(t, e, !1), r = this.x, o = this.y; switch (this.alignmentStyle) { case IP.TopLeft: r = 0, o = 0; break; case IP.TopCenter: r = (n.width - this.width) / 2, o = 0; break; case IP.TopRight: r = n.width - this.width, o = 0; break; case IP.MiddleLeft: r = 0, o = (n.height - this.height) / 2; break; case IP.MiddleCenter: r = (n.width - this.width) / 2, o = (n.height - this.height) / 2; break; case IP.MiddleRight: r = n.width - this.width, o = (n.height - this.height) / 2; break; case IP.BottomLeft: r = 0, o = n.height - this.height; break; case IP.BottomCenter: r = (n.width - this.width) / 2, o = n.height - this.height; break; case IP.BottomRight: r = n.width - this.width, o = n.height - this.height }return i.x = r, i.y = o, i }, e.prototype.getTemplateAlignmentBounds = function (e, t) { var i = this.bounds, n = e.section, r = n.getActualBounds(t, e, !1), o = this.x, s = this.y; switch (this.alignmentStyle) { case IP.TopLeft: this.type === kP.Left ? (o = -r.x, s = 0) : this.type === kP.Top && (o = -r.x, s = -r.y); break; case IP.TopCenter: o = (r.width - this.width) / 2, s = -r.y; break; case IP.TopRight: this.type === kP.Right ? (o = r.width + n.getRightIndentWidth(t, e, !1) - this.width, s = 0) : this.type === kP.Top && (o = r.width + n.getRightIndentWidth(t, e, !1) - this.width, s = -r.y); break; case IP.MiddleLeft: o = -r.x, s = (r.height - this.height) / 2; break; case IP.MiddleCenter: o = (r.width - this.width) / 2, s = (r.height - this.height) / 2; break; case IP.MiddleRight: o = r.width + n.getRightIndentWidth(t, e, !1) - this.width, s = (r.height - this.height) / 2; break; case IP.BottomLeft: this.type === kP.Left ? (o = -r.x, s = r.height - this.height) : this.type === kP.Bottom && (o = -r.x, s = r.height + n.getBottomIndentHeight(t, e, !1) - this.height); break; case IP.BottomCenter: o = (r.width - this.width) / 2, s = r.height + n.getBottomIndentHeight(t, e, !1) - this.height; break; case IP.BottomRight: this.type === kP.Right ? (o = r.width + n.getRightIndentWidth(t, e, !1) - this.width, s = r.height - this.height) : this.type === kP.Bottom && (o = r.width + n.getRightIndentWidth(t, e, !1) - this.width, s = r.height + n.getBottomIndentHeight(t, e, !1) - this.height) }return i.x = o, i.y = s, i }, e.prototype.getDockBounds = function (e, t) { this.bounds; return this.type === kP.None ? this.getSimpleDockBounds(e, t) : this.getTemplateDockBounds(e, t) }, e.prototype.getSimpleDockBounds = function (e, t) { this.bounds; var i = e.section.getActualBounds(t, e, !1), n = this.x, r = this.y, o = this.width, s = this.height; switch (this.dockStyle) { case jP.Left: n = 0, r = 0, o = this.width, s = i.height; break; case jP.Top: n = 0, r = 0, o = i.width, s = this.height; break; case jP.Right: n = i.width - this.width, r = 0, o = this.width, s = i.height; break; case jP.Bottom: n = 0, r = i.height - this.height, o = i.width, s = this.height; break; case jP.Fill: n = 0, n = 0, o = i.width, s = i.height }return new qk(n, r, o, s) }, e.prototype.getTemplateDockBounds = function (e, t) { this.bounds; var i = e.section, n = i.getActualBounds(t, e, !1), r = i.pageSettings.getActualSize(), o = this.x, s = this.y, a = this.width, l = this.height; switch (this.dockStyle) { case jP.Left: o = -n.x, s = 0, a = this.width, l = n.height; break; case jP.Top: o = -n.x, s = -n.y, a = r.width, l = this.height, n.height < 0 && (s = -n.y + r.height); break; case jP.Right: o = n.width + i.getRightIndentWidth(t, e, !1) - this.width, s = 0, a = this.width, l = n.height; break; case jP.Bottom: o = -n.x, s = n.height + i.getBottomIndentHeight(t, e, !1) - this.height, a = r.width, l = this.height, n.height < 0 && (s -= r.height); break; case jP.Fill: o = 0, o = 0, a = n.width, l = n.height }return new qk(o, s, a, l) }, e }(), XO = function () { function e() { var e = new zP(new _k(0, 0, 0)); e.dashStyle = Ok.Solid; var t = new zP(new _k(0, 0, 0)); t.dashStyle = Ok.Solid; var i = new zP(new _k(0, 0, 0)); i.dashStyle = Ok.Solid; var n = new zP(new _k(0, 0, 0)); n.dashStyle = Ok.Solid, this.leftPen = e, this.rightPen = t, this.topPen = i, this.bottomPen = n } return Object.defineProperty(e.prototype, "left", { get: function () { return this.leftPen }, set: function (e) { this.leftPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "right", { get: function () { return this.rightPen }, set: function (e) { this.rightPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "top", { get: function () { return this.topPen }, set: function (e) { this.topPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottom", { get: function () { return this.bottomPen }, set: function (e) { this.bottomPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "all", { set: function (e) { this.leftPen = this.rightPen = this.topPen = this.bottomPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isAll", { get: function () { return this.leftPen === this.rightPen && this.leftPen === this.topPen && this.leftPen === this.bottomPen }, enumerable: !0, configurable: !0 }), Object.defineProperty(e, "default", { get: function () { return new e }, enumerable: !0, configurable: !0 }), e }(), JO = function () { function e(e, t, i, n) { this.hasLeftPad = !1, this.hasRightPad = !1, this.hasTopPad = !1, this.hasBottomPad = !1, void 0 === e ? (this.leftPad = this.rightPad = 5.76, this.bottomPad = this.topPad = .5) : (this.leftPad = e, this.rightPad = t, this.topPad = i, this.bottomPad = n, this.hasLeftPad = !0, this.hasRightPad = !0, this.hasTopPad = !0, this.hasBottomPad = !0) } return Object.defineProperty(e.prototype, "left", { get: function () { return this.leftPad }, set: function (e) { this.leftPad = e, this.hasLeftPad = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "right", { get: function () { return this.rightPad }, set: function (e) { this.rightPad = e, this.hasRightPad = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "top", { get: function () { return this.topPad }, set: function (e) { this.topPad = e, this.hasTopPad = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottom", { get: function () { return this.bottomPad }, set: function (e) { this.bottomPad = e, this.hasBottomPad = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "all", { set: function (e) { this.leftPad = this.rightPad = this.topPad = this.bottomPad = e, this.hasLeftPad = !0, this.hasRightPad = !0, this.hasTopPad = !0, this.hasBottomPad = !0 }, enumerable: !0, configurable: !0 }), e }(); !function (e) { e[e.Overlap = 0] = "Overlap", e[e.Inside = 1] = "Inside" }(YO || (YO = {})); var ZO, KO = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), $O = function () { function e() { } return Object.defineProperty(e.prototype, "backgroundBrush", { get: function () { return this.gridBackgroundBrush }, set: function (e) { this.gridBackgroundBrush = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "textBrush", { get: function () { return this.gridTextBrush }, set: function (e) { this.gridTextBrush = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "textPen", { get: function () { return this.gridTextPen }, set: function (e) { this.gridTextPen = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "font", { get: function () { return this.gridFont }, set: function (e) { this.gridFont = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "backgroundImage", { get: function () { return this.gridBackgroundImage }, set: function (e) { this.gridBackgroundImage = e }, enumerable: !0, configurable: !0 }), e }(), eR = function (e) { function t() { var t = e.call(this) || this; return t.gridBorderOverlapStyle = YO.Overlap, t.bAllowHorizontalOverflow = !1, t.gridHorizontalOverflowType = ZO.LastPage, t } return KO(t, e), Object.defineProperty(t.prototype, "cellSpacing", { get: function () { return void 0 === this.gridCellSpacing && (this.gridCellSpacing = 0), this.gridCellSpacing }, set: function (e) { this.gridCellSpacing = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "horizontalOverflowType", { get: function () { return this.gridHorizontalOverflowType }, set: function (e) { this.gridHorizontalOverflowType = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowHorizontalOverflow", { get: function () { return this.bAllowHorizontalOverflow }, set: function (e) { this.bAllowHorizontalOverflow = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "cellPadding", { get: function () { return void 0 === this.gridCellPadding && (this.gridCellPadding = new JO), this.gridCellPadding }, set: function (e) { void 0 === this.gridCellPadding ? (this.gridCellPadding = new JO, this.gridCellPadding = e) : this.gridCellPadding = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "borderOverlapStyle", { get: function () { return this.gridBorderOverlapStyle }, set: function (e) { this.gridBorderOverlapStyle = e }, enumerable: !0, configurable: !0 }), t }($O), tR = function (e) { function t() { var t = e.call(this) || this; return t.gridCellBorders = XO.default, t } return KO(t, e), Object.defineProperty(t.prototype, "stringFormat", { get: function () { return this.format }, set: function (e) { this.format = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "borders", { get: function () { return this.gridCellBorders }, set: function (e) { this.gridCellBorders = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "cellPadding", { get: function () { return this.gridCellPadding }, set: function (e) { null != this.gridCellPadding && void 0 !== this.gridCellPadding || (this.gridCellPadding = new JO), this.gridCellPadding = e }, enumerable: !0, configurable: !0 }), t }($O), iR = function () { function e() { } return Object.defineProperty(e.prototype, "backgroundBrush", { get: function () { return this.gridRowBackgroundBrush }, enumerable: !0, configurable: !0 }), e.prototype.setBackgroundBrush = function (e) { if (this.gridRowBackgroundBrush = e, void 0 !== this.parent) for (var t = 0; t < this.parent.cells.count; t++)this.parent.cells.getCell(t).style.backgroundBrush = e }, Object.defineProperty(e.prototype, "textBrush", { get: function () { return this.gridRowTextBrush }, enumerable: !0, configurable: !0 }), e.prototype.setTextBrush = function (e) { if (this.gridRowTextBrush = e, void 0 !== this.parent) for (var t = 0; t < this.parent.cells.count; t++)this.parent.cells.getCell(t).style.textBrush = e }, Object.defineProperty(e.prototype, "textPen", { get: function () { return this.gridRowTextPen }, enumerable: !0, configurable: !0 }), e.prototype.setTextPen = function (e) { if (this.gridRowTextPen = e, void 0 !== this.parent) for (var t = 0; t < this.parent.cells.count; t++)this.parent.cells.getCell(t).style.textPen = e }, Object.defineProperty(e.prototype, "font", { get: function () { return this.gridRowFont }, enumerable: !0, configurable: !0 }), e.prototype.setFont = function (e) { if (this.gridRowFont = e, void 0 !== this.parent) for (var t = 0; t < this.parent.cells.count; t++)this.parent.cells.getCell(t).style.font = e }, Object.defineProperty(e.prototype, "border", { get: function () { return void 0 === this.gridRowBorder && this.setBorder(new XO), this.gridRowBorder }, enumerable: !0, configurable: !0 }), e.prototype.setBorder = function (e) { if (this.gridRowBorder = e, void 0 !== this.parent) for (var t = 0; t < this.parent.cells.count; t++)this.parent.cells.getCell(t).style.borders = e }, e.prototype.setParent = function (e) { this.parent = e }, Object.defineProperty(e.prototype, "backgroundImage", { get: function () { return this.gridRowBackgroundImage }, enumerable: !0, configurable: !0 }), e }(); !function (e) { e[e.NextPage = 0] = "NextPage", e[e.LastPage = 1] = "LastPage" }(ZO || (ZO = {})); var nR, rR = function () { function e(e) { this.cellWidth = 0, this.cellHeight = 0, this.tempval = 0, this.fontSpilt = !1, this.finsh = !0, this.rowSpanRemainingHeight = 0, this.hasRowSpan = !1, this.hasColSpan = !1, this.isFinish = !0, this.present = !1, this.gridRowSpan = 1, this.colSpan = 1, void 0 !== e && (this.gridRow = e) } return Object.defineProperty(e.prototype, "isCellMergeContinue", { get: function () { return this.internalIsCellMergeContinue }, set: function (e) { this.internalIsCellMergeContinue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isRowMergeContinue", { get: function () { return this.internalIsRowMergeContinue }, set: function (e) { this.internalIsRowMergeContinue = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isCellMergeStart", { get: function () { return this.internalIsCellMergeStart }, set: function (e) { this.internalIsCellMergeStart = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "isRowMergeStart", { get: function () { return this.internalIsRowMergeStart }, set: function (e) { this.internalIsRowMergeStart = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "remainingString", { get: function () { return this.remaining }, set: function (e) { this.remaining = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "FinishedDrawingCell", { get: function () { return this.isFinish }, set: function (e) { this.isFinish = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "stringFormat", { get: function () { return null == this.format && (this.format = new dP), this.format }, set: function (e) { this.format = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "row", { get: function () { return this.gridRow }, set: function (e) { this.gridRow = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { return this.objectValue }, set: function (e) { if (this.objectValue = e, this.objectValue instanceof pR) { this.row.grid.isSingleGrid = !1; this.objectValue.ParentCell = this, this.objectValue.isChildGrid = !0; for (var t = this.row.grid.rows.count, i = 0; i < t; i++)for (var n = this.row.grid.rows.getRow(i), r = n.cells.count, o = 0; o < r; o++) { n.cells.getCell(o).parent = this } } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rowSpan", { get: function () { return this.gridRowSpan }, set: function (e) { if (e < 1) throw new Error("ArgumentException : Invalid span specified, must be greater than or equal to 1"); this.gridRowSpan = e, this.row.rowSpanExists = !0, this.row.grid.hasRowSpanSpan = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "style", { get: function () { return null == this.cellStyle && (this.cellStyle = new tR), this.cellStyle }, set: function (e) { this.cellStyle = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return 0 === this.cellHeight && (this.cellHeight = this.measureHeight()), this.cellHeight }, set: function (e) { this.cellHeight = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "columnSpan", { get: function () { return this.colSpan }, set: function (e) { if (e < 1) throw Error("Invalid span specified, must be greater than or equal to 1"); this.colSpan = e, this.row.columnSpanExists = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return (0 === this.cellWidth || this.row.grid.isComplete) && (this.cellWidth = this.measureWidth()), Math.round(this.cellWidth) }, set: function (e) { this.cellWidth = e }, enumerable: !0, configurable: !0 }), e.prototype.measureWidth = function () { var e = 0, t = new pP; if ("string" == typeof this.objectValue) { e += t.layout(this.objectValue, this.getTextFont(), this.stringFormat, new Uk(Number.MAX_VALUE, Number.MAX_VALUE), !1, new Uk(0, 0)).actualSize.width, e += 2 * (this.style.borders.left.width + this.style.borders.right.width) } else if (this.objectValue instanceof pR) e = this.objectValue.size.width; else if (this.objectValue instanceof $P || this.objectValue instanceof tN) e += this.objectValue.width; else if (this.objectValue instanceof IO) { var i = this.objectValue; e += t.layout(i.text, i.font, i.stringFormat, new Uk(0, 0), !1, new Uk(0, 0)).actualSize.width, e += 2 * (this.style.borders.left.width + this.style.borders.right.width) } return this.objectValue instanceof pR ? null != this.style.cellPadding || void 0 !== this.style.cellPadding ? (void 0 !== this.style.cellPadding.left && this.style.cellPadding.hasLeftPad && (e += this.style.cellPadding.left), void 0 !== this.style.cellPadding.right && this.style.cellPadding.hasRightPad && (e += this.style.cellPadding.right)) : (void 0 !== this.row.grid.style.cellPadding.left && this.row.grid.style.cellPadding.hasLeftPad && (e += this.row.grid.style.cellPadding.left), void 0 !== this.row.grid.style.cellPadding.right && this.row.grid.style.cellPadding.hasRightPad && (e += this.row.grid.style.cellPadding.right)) : null != this.style.cellPadding ? e += this.style.cellPadding.left + this.style.cellPadding.right : e += this.row.grid.style.cellPadding.left + this.row.grid.style.cellPadding.right, e += this.row.grid.style.cellSpacing }, e.prototype.drawCellBackground = function (e, t) { var i = this.getBackgroundBrush(); if (null != i && (e.save(), e.drawRectangle(i, t.x, t.y, t.width, t.height), e.restore()), null != this.style.backgroundImage) { this.getBackgroundImage(); e.drawImage(this.style.backgroundImage, t.x, t.y, t.width, t.height) } }, e.prototype.adjustContentLayoutArea = function (e) { var t = new qk(e.x, e.y, e.width, e.height); return this.objectValue instanceof pR ? (null == this.style.cellPadding || void 0 === this.style.cellPadding ? (void 0 !== this.gridRow.grid.style.cellPadding.left && this.gridRow.grid.style.cellPadding.hasLeftPad && (t.x += this.gridRow.grid.style.cellPadding.left + this.cellStyle.borders.left.width, t.width -= this.gridRow.grid.style.cellPadding.left), void 0 !== this.gridRow.grid.style.cellPadding.top && this.gridRow.grid.style.cellPadding.hasTopPad && (t.y += this.gridRow.grid.style.cellPadding.top + this.cellStyle.borders.top.width, t.height -= this.gridRow.grid.style.cellPadding.top), void 0 !== this.gridRow.grid.style.cellPadding.right && this.gridRow.grid.style.cellPadding.hasRightPad && (t.width -= this.gridRow.grid.style.cellPadding.right), void 0 !== this.gridRow.grid.style.cellPadding.bottom && this.gridRow.grid.style.cellPadding.hasBottomPad && (t.height -= this.gridRow.grid.style.cellPadding.bottom)) : (void 0 !== this.style.cellPadding.left && this.style.cellPadding.hasLeftPad && (t.x += this.style.cellPadding.left + this.cellStyle.borders.left.width, t.width -= this.style.cellPadding.left), void 0 !== this.style.cellPadding.top && this.style.cellPadding.hasTopPad && (t.y += this.style.cellPadding.top + this.cellStyle.borders.top.width, t.height -= this.style.cellPadding.top), void 0 !== this.style.cellPadding.right && this.style.cellPadding.hasRightPad && (t.width -= this.style.cellPadding.right), void 0 !== this.style.cellPadding.bottom && this.style.cellPadding.hasBottomPad && (t.height -= this.style.cellPadding.bottom)), t.width -= this.cellStyle.borders.left.width + this.cellStyle.borders.right.width, t.height -= this.cellStyle.borders.top.width + this.cellStyle.borders.bottom.width) : void 0 === this.style.cellPadding || null == this.style.cellPadding ? (t.x += this.gridRow.grid.style.cellPadding.left + this.cellStyle.borders.left.width, t.y += this.gridRow.grid.style.cellPadding.top + this.cellStyle.borders.top.width, t.width -= this.gridRow.grid.style.cellPadding.right + this.gridRow.grid.style.cellPadding.left, t.height -= this.gridRow.grid.style.cellPadding.bottom + this.gridRow.grid.style.cellPadding.top, t.height -= this.cellStyle.borders.top.width + this.cellStyle.borders.bottom.width) : (t.x += this.style.cellPadding.left + this.cellStyle.borders.left.width, t.y += this.style.cellPadding.top + this.cellStyle.borders.top.width, t.width -= this.style.cellPadding.right + this.style.cellPadding.left, t.width -= this.cellStyle.borders.left.width + this.cellStyle.borders.right.width, t.height -= this.style.cellPadding.bottom + this.style.cellPadding.top, t.height -= this.cellStyle.borders.top.width + this.cellStyle.borders.bottom.width, 1 === this.rowSpan && (t.width -= this.style.borders.left.width)), t }, e.prototype.draw = function (e, t, i) { var n = null; if (this.internalIsCellMergeContinue || this.internalIsRowMergeContinue) { if (!this.internalIsCellMergeContinue || !this.row.grid.style.allowHorizontalOverflow) return n; if (this.row.rowOverflowIndex > 0 && this.row.cells.indexOf(this) != this.row.rowOverflowIndex + 1 || 0 == this.row.rowOverflowIndex && this.internalIsCellMergeContinue) return n } t = this.adjustOuterLayoutArea(t, e), this.drawCellBackground(e, t); var r = this.getTextPen(), o = this.getTextBrush(); void 0 === r && void 0 === o && (o = new Jk(new _k(0, 0, 0))); var s = this.getTextFont(), a = this.getStringFormat(), l = t; if (l.height >= e.clientSize.height && this.row.grid.allowRowBreakAcrossPages && (l.height -= l.y), l = this.adjustContentLayoutArea(l), "string" == typeof this.objectValue || "string" == typeof this.remaining) { var h = void 0, d = void 0; if (d = l.height < s.height ? new qk(l.x, l.y, l.width, s.height) : l, l.height < s.height && this.row.grid.isChildGrid && null != this.row.grid.ParentCell) { var c = d.height - this.row.grid.ParentCell.row.grid.style.cellPadding.bottom - this.row.grid.style.cellPadding.bottom; -1 != this.row.grid.splitChildRowIndex && (this.fontSpilt = !0, this.row.rowFontSplit = !0), c > 0 && c < s.height && (d.height = c) } 0 != this.gridRow.grid.style.cellSpacing && (d.width -= this.gridRow.grid.style.cellSpacing, t.width -= this.gridRow.grid.style.cellSpacing), this.isFinish ? (h = "" === this.remaining ? this.remaining : this.objectValue, e.drawString(h, s, r, o, d.x, d.y, d.width, d.height, a), -1 == this.row.grid.splitChildRowIndex || this.row.grid.isChildGrid || void 0 !== this.remaining || (this.remaining = "")) : (void 0 !== this.remaining && null !== this.remaining || (this.remaining = ""), this.row.repeatFlag && e.drawString(this.remaining, s, r, o, d.x, d.y, d.width, d.height, a), this.isFinish = !0), n = e.stringLayoutResult } else if (this.objectValue instanceof pR) { var p = this.objectValue; p.isChildGrid = !0, p.ParentCell = this; var u = void 0; u = l, 0 != this.gridRow.grid.style.cellSpacing && (t.width -= this.gridRow.grid.style.cellSpacing); var g = new gR(p), m = new fR; null != this.row.grid.LayoutFormat ? m = this.row.grid.LayoutFormat : m.layout = JP.Paginate; var f = new yO; if (null != e.layer) { f.page = e.page, f.bounds = u, f.format = m, p.setSpan(), p.checkSpan(); var y = g.Layouter(f); this.value = p, -1 !== this.row.grid.splitChildRowIndex && (this.height = this.row.rowBreakHeightValue), f.page != y.page && (y.bounds.height = this.row.rowBreakHeightValue, 0 == this.row.rowBreakHeight ? this.row.NestedGridLayoutResult = y : this.row.rowBreakHeight = this.row.rowBreakHeightValue) } } else if (this.objectValue instanceof $P || this.objectValue instanceof tN) { var v = void 0; v = this.objectValue.width <= l.width ? new qk(l.x, l.y, this.objectValue.width, l.height) : l, e.drawImage(this.objectValue, v.x, v.y, v.width, v.height) } else this.objectValue instanceof IO ? this.objectValue.draw(e.currentPage, l) : void 0 === this.objectValue && (this.objectValue = "", e.drawString(this.objectValue, s, r, o, l.x, l.y, l.width, l.height, a), null != this.style.cellPadding && 0 == this.style.cellPadding.bottom && 0 == this.style.cellPadding.left && 0 == this.style.cellPadding.right && 0 == this.style.cellPadding.top && (t.width -= this.style.borders.left.width + this.style.borders.right.width), 0 != this.gridRow.grid.style.cellSpacing && (t.width -= this.gridRow.grid.style.cellSpacing)); return null != this.style.borders && (this.fontSpilt ? -1 != this.row.grid.ParentCell.row.grid.splitChildRowIndex && (this.row.rowFontSplit = !1, this.drawCellBorders(e, t)) : this.drawCellBorders(e, t)), n }, e.prototype.drawCellBorders = function (e, t) { this.row.grid.style.borderOverlapStyle === YO.Inside && (t.x += this.style.borders.left.width, t.y += this.style.borders.top.width, t.width -= this.style.borders.right.width, t.height -= this.style.borders.bottom.width); var i = new Yk(t.x, t.y + t.height), n = new Yk(t.x, t.y), r = this.cellStyle.borders.left; this.cellStyle.borders.left.dashStyle === Ok.Solid && (r.lineCap = Nk.Square), e.drawLine(r, i, n), i = new Yk(t.x + t.width, t.y), n = new Yk(t.x + t.width, t.y + t.height), r = this.cellStyle.borders.right, t.x + t.width > e.clientSize.width - r.width / 2 && (i = new Yk(e.clientSize.width - r.width / 2, t.y), n = new Yk(e.clientSize.width - r.width / 2, t.y + t.height)), this.cellStyle.borders.right.dashStyle === Ok.Solid && (r.lineCap = Nk.Square), e.drawLine(r, i, n), i = new Yk(t.x, t.y), n = new Yk(t.x + t.width, t.y), r = this.cellStyle.borders.top, this.cellStyle.borders.top.dashStyle === Ok.Solid && (r.lineCap = Nk.Square), e.drawLine(r, i, n), i = new Yk(t.x + t.width, t.y + t.height), n = new Yk(t.x, t.y + t.height), r = this.cellStyle.borders.bottom, this.cellStyle.borders.bottom.dashStyle === Ok.Solid && (r.lineCap = Nk.Square), e.drawLine(r, i, n) }, e.prototype.adjustOuterLayoutArea = function (e, t) { var i = !1, n = this.row.grid.style.cellSpacing; n > 0 && (e = new qk(e.x + n, e.y + n, e.width - n, e.height - n)); var r = this.row.cells.indexOf(this); if (this.columnSpan > 1 || this.row.rowOverflowIndex > 0 && r == this.row.rowOverflowIndex + 1 && this.isCellMergeContinue) { if (1 == (h = this.columnSpan) && this.isCellMergeContinue) for (var o = r + 1; o < this.row.grid.columns.count && this.row.cells.getCell(o).isCellMergeContinue; o++)h++; for (var s = 0, a = r; a < r + h; a++) { if (this.row.grid.style.allowHorizontalOverflow) { var l = this.row.grid.size.width < t.clientSize.width ? this.row.grid.size.width : t.clientSize.width; if ((this.row.grid.size.width > t.clientSize.width ? e.x + s + this.row.grid.columns.getColumn(a).width : s + this.row.grid.columns.getColumn(a).width) > l) break } s += this.row.grid.columns.getColumn(a).width } s -= this.row.grid.style.cellSpacing, e.width = s } if (this.rowSpan > 1 || this.row.rowSpanExists) { var h = this.rowSpan, d = this.row.grid.rows.rowCollection.indexOf(this.row); -1 == d && -1 != (d = this.row.grid.headers.indexOf(this.row)) && (i = !0); var c = 0; for (a = d; a < d + h; a++) { c += i ? this.row.grid.headers.getHeader(a).height : this.row.grid.rows.getRow(a).height; var p = this.row.grid.rows.getRow(a); this.row.grid.rows.rowCollection.indexOf(p) } this.row.cells.indexOf(this); c -= this.row.grid.style.cellSpacing, e.height = c, this.row.rowMergeComplete || (e.height = c) } return e }, e.prototype.getTextFont = function () { return void 0 !== this.style.font && null != this.style.font ? this.style.font : void 0 !== this.row.style.font && null != this.row.style.font ? this.row.style.font : void 0 !== this.row.grid.style.font && null != this.row.grid.style.font ? this.row.grid.style.font : rO.defaultFont }, e.prototype.getTextBrush = function () { return void 0 !== this.style.textBrush && null != this.style.textBrush ? this.style.textBrush : void 0 !== this.row.style.textBrush && null != this.row.style.textBrush ? this.row.style.textBrush : this.row.grid.style.textBrush }, e.prototype.getTextPen = function () { return void 0 !== this.style.textPen && null != this.style.textPen ? this.style.textPen : void 0 !== this.row.style.textPen && null != this.row.style.textPen ? this.row.style.textPen : this.row.grid.style.textPen }, e.prototype.getBackgroundBrush = function () { return void 0 !== this.style.backgroundBrush && null != this.style.backgroundBrush ? this.style.backgroundBrush : void 0 !== this.row.style.backgroundBrush && null != this.row.style.backgroundBrush ? this.row.style.backgroundBrush : this.row.grid.style.backgroundBrush }, e.prototype.getBackgroundImage = function () { return void 0 !== this.style.backgroundImage && null != this.style.backgroundImage ? this.style.backgroundImage : void 0 !== this.row.style.backgroundImage && null != this.row.style.backgroundImage ? this.row.style.backgroundImage : this.row.grid.style.backgroundImage }, e.prototype.getStringFormat = function () { return void 0 !== this.style.stringFormat && null != this.style.stringFormat ? this.style.stringFormat : this.stringFormat }, e.prototype.measureHeight = function () { var e = this.calculateWidth(); null == this.style.cellPadding || void 0 === this.style.cellPadding ? e -= this.gridRow.grid.style.cellPadding.right + this.gridRow.grid.style.cellPadding.left : (e -= this.style.cellPadding.right + this.style.cellPadding.left, e -= this.style.borders.left.width + this.style.borders.right.width); var t = 0, i = new pP; if ("string" == typeof this.objectValue || "string" == typeof this.remaining) { var n = this.objectValue; this.isFinish || (n = null !== this.remaining && "" !== this.remaining && void 0 !== this.remaining ? this.remaining : this.objectValue); var r = this.row.cells.indexOf(this); 0 != this.gridRow.grid.style.cellSpacing && (e -= 2 * this.gridRow.grid.style.cellSpacing), this.row.cells.getCell(r).hasColSpan || this.row.cells.getCell(r).hasRowSpan || (this.gridRow.grid.isChildGrid ? (e < 0 ? (this.tempval = e, null == this.style.cellPadding || void 0 === this.style.cellPadding ? this.tempval += this.gridRow.grid.style.cellPadding.right + this.gridRow.grid.style.cellPadding.left : (this.tempval += this.style.cellPadding.right + this.style.cellPadding.left, this.tempval += this.style.borders.left.width + this.style.borders.right.width)) : this.tempval = e, t += i.layout(n, this.getTextFont(), this.stringFormat, new Uk(this.tempval, 0), !1, new Uk(0, 0)).actualSize.height) : t += i.layout(n, this.getTextFont(), this.stringFormat, new Uk(e, 0), !1, new Uk(0, 0)).actualSize.height), t += 2 * (this.style.borders.top.width + this.style.borders.bottom.width) } else if (this.objectValue instanceof pR) { r = this.row.cells.indexOf(this); var o = 0; null != this.style.cellPadding || void 0 !== this.style.cellPadding ? (o = this.calculateWidth(), void 0 !== this.style.cellPadding.left && this.style.cellPadding.hasLeftPad && (o -= this.style.cellPadding.left), void 0 !== this.style.cellPadding.right && this.style.cellPadding.hasRightPad && (o -= this.style.cellPadding.right)) : null != this.row.grid.style.cellPadding || void 0 !== this.row.grid.style.cellPadding ? (o = this.calculateWidth(), void 0 !== this.row.grid.style.cellPadding.left && this.row.grid.style.cellPadding.hasLeftPad && (o -= this.row.grid.style.cellPadding.left), void 0 !== this.row.grid.style.cellPadding.right && this.row.grid.style.cellPadding.hasRightPad && (o -= this.row.grid.style.cellPadding.right)) : o = this.calculateWidth(), this.objectValue.tempWidth = o, this.row.cells.getCell(r).hasColSpan || this.row.cells.getCell(r).hasRowSpan ? t += 2 * (this.style.borders.top.width + this.style.borders.bottom.width) : t = this.objectValue.size.height, 0 !== this.gridRow.grid.style.cellSpacing && (e -= 2 * this.gridRow.grid.style.cellSpacing), null == this.style.cellPadding && void 0 === this.style.cellPadding || (void 0 !== this.row.grid.style.cellPadding.top && this.row.grid.style.cellPadding.hasTopPad && (t += this.row.grid.style.cellPadding.top), this.row.grid.style.cellPadding.hasBottomPad && void 0 !== this.row.grid.style.cellPadding.bottom && (t += this.row.grid.style.cellPadding.bottom)), t += this.objectValue.style.cellSpacing } else if (this.objectValue instanceof $P || this.objectValue instanceof tN) t += this.objectValue.height; else if (this.objectValue instanceof IO) { var s = this.objectValue; t += i.layout(s.text, s.font, s.stringFormat, new Uk(e, 0), !1, new Uk(0, 0)).actualSize.height, t += 2 * (this.style.borders.top.width + this.style.borders.bottom.width) } else void 0 === this.objectValue && (null == this.style.cellPadding || void 0 === this.style.cellPadding ? e -= this.gridRow.grid.style.cellPadding.right + this.gridRow.grid.style.cellPadding.left : (e -= this.style.cellPadding.right + this.style.cellPadding.left, e -= this.style.borders.left.width + this.style.borders.right.width), t += 2 * (this.style.borders.top.width + this.style.borders.bottom.width)); return this.objectValue instanceof pR ? null == this.style.cellPadding || void 0 === this.style.cellPadding ? (void 0 !== this.row.grid.style.cellPadding.top && this.row.grid.style.cellPadding.hasTopPad && (t += this.row.grid.style.cellPadding.top), void 0 !== this.row.grid.style.cellPadding.bottom && this.row.grid.style.cellPadding.hasBottomPad && (t += this.row.grid.style.cellPadding.bottom)) : (void 0 !== this.style.cellPadding.top && this.style.cellPadding.hasTopPad && (t += this.style.cellPadding.top), void 0 !== this.style.cellPadding.bottom && this.style.cellPadding.hasBottomPad && (t += this.style.cellPadding.bottom)) : null == this.style.cellPadding || void 0 === this.style.cellPadding ? t += this.row.grid.style.cellPadding.top + this.row.grid.style.cellPadding.bottom : t += this.style.cellPadding.top + this.style.cellPadding.bottom, t += this.row.grid.style.cellSpacing }, e.prototype.calculateWidth = function () { var e = this.row.cells.indexOf(this), t = (this.row.grid.rows.rowCollection.indexOf(this.row), this.columnSpan), i = 0; if (1 === t) for (var n = 0; n < t; n++)i += this.row.grid.columns.getColumn(e + n).width; else if (t > 1) for (n = 0; n < t; n++)i += this.row.grid.columns.getColumn(e + n).width, n + 1 < t && (this.row.cells.getCell(e + n + 1).hasColSpan = !0); if (null != this.parent && this.parent.row.width > 0 && this.row.grid.isChildGrid && null != this.parent && this.row.width > this.parent.row.width) { i = 0; for (var r = 0; r < this.parent.columnSpan; r++)i += this.parent.row.grid.columns.getColumn(r).width; i /= this.row.cells.count } return i }, e }(), oR = function () { function e(e) { this.cells = [], this.gridRow = e } return e.prototype.getCell = function (e) { if (e < 0 || e >= this.count) throw new Error("IndexOutOfRangeException"); return this.cells[e] }, Object.defineProperty(e.prototype, "count", { get: function () { return this.cells.length }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { if (void 0 === e) { var t = new rR; return this.add(t), e } e.row = this.gridRow, this.cells.push(e) }, e.prototype.indexOf = function (e) { return this.cells.indexOf(e) }, e }(), sR = function () { function e(e) { this.columnWidth = 0, this.grid = e } return Object.defineProperty(e.prototype, "width", { get: function () { return this.columnWidth }, set: function (e) { this.isCustomWidth = !0, this.columnWidth = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "format", { get: function () { return null == this.stringFormat && (this.stringFormat = new dP), this.stringFormat }, set: function (e) { this.stringFormat = e }, enumerable: !0, configurable: !0 }), e }(), aR = function () { function e(e) { this.internalColumns = [], this.columnWidth = 0, this.grid = e, this.internalColumns = [] } return e.prototype.add = function (e) { for (var t = 0; t < e; t++) { this.internalColumns.push(new sR(this.grid)); for (var i = 0; i < this.grid.rows.count; i++) { var n = this.grid.rows.getRow(i), r = new rR; r.value = "", n.cells.add(r) } } }, Object.defineProperty(e.prototype, "count", { get: function () { return this.internalColumns.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return 0 === this.columnWidth && (this.columnWidth = this.measureColumnsWidth()), 0 === this.grid.initialWidth || this.columnWidth === this.grid.initialWidth || this.grid.style.allowHorizontalOverflow || (this.columnWidth = this.grid.initialWidth, this.grid.isPageWidth = !0), this.columnWidth }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "columns", { get: function () { return this.internalColumns }, enumerable: !0, configurable: !0 }), e.prototype.getColumn = function (e) { if (e >= 0 && e <= this.columns.length) return this.columns[e]; throw Error("can not get the column from the index: " + e) }, e.prototype.measureColumnsWidth = function () { var e = 0; this.grid.measureColumnsWidth(); for (var t = 0, i = this.internalColumns.length; t < i; t++)e += this.internalColumns[t].width; return e }, e.prototype.getDefaultWidths = function (e) { for (var t = [], i = this.count, n = 0; n < this.count; n++)this.grid.isPageWidth && e >= 0 && !this.internalColumns[n].isCustomWidth ? this.internalColumns[n].width = 0 : (t[n] = this.internalColumns[n].width, this.internalColumns[n].width > 0 && this.internalColumns[n].isCustomWidth ? (e -= this.internalColumns[n].width, i--) : t[n] = 0); for (n = 0; n < this.count; n++) { var r = e / i; t[n] <= 0 && (t[n] = r) } return t }, e }(), lR = function () { function e(e) { this.gridRowOverflowIndex = 0, this.rowHeight = 0, this.rowWidth = 0, this.isrowFinish = !1, this.isRowSpanRowHeightSet = !1, this.noOfPageCount = 0, this.isRowHeightSet = !1, this.isPageBreakRowSpanApplied = !1, this.isRowMergeComplete = !0, this.repeatFlag = !1, this.rowFontSplit = !1, this.pdfGrid = e } return Object.defineProperty(e.prototype, "rowSpanExists", { get: function () { return this.bRowSpanExists }, set: function (e) { this.bRowSpanExists = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "cells", { get: function () { return null == this.gridCells && (this.gridCells = new oR(this)), this.gridCells }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "grid", { get: function () { return this.pdfGrid }, set: function (e) { this.pdfGrid = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "style", { get: function () { return void 0 === this.rowStyle && (this.rowStyle = new iR, this.rowStyle.setParent(this)), this.rowStyle }, set: function (e) { this.rowStyle = e; for (var t = 0; t < this.cells.count; t++)this.cells.getCell(t).style.borders = e.border, void 0 !== e.font && (this.cells.getCell(t).style.font = e.font), void 0 !== e.backgroundBrush && (this.cells.getCell(t).style.backgroundBrush = e.backgroundBrush), void 0 !== e.backgroundImage && (this.cells.getCell(t).style.backgroundImage = e.backgroundImage), void 0 !== e.textBrush && (this.cells.getCell(t).style.textBrush = e.textBrush), void 0 !== e.textPen && (this.cells.getCell(t).style.textPen = e.textPen) }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rowBreakHeight", { get: function () { return void 0 === this.gridRowBreakHeight && (this.gridRowBreakHeight = 0), this.gridRowBreakHeight }, set: function (e) { this.gridRowBreakHeight = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rowOverflowIndex", { get: function () { return this.gridRowOverflowIndex }, set: function (e) { this.gridRowOverflowIndex = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "height", { get: function () { return this.isRowHeightSet || (this.rowHeight = this.measureHeight()), this.rowHeight }, set: function (e) { this.rowHeight = e, this.isRowHeightSet = !0 }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "width", { get: function () { return 0 !== this.rowWidth && void 0 !== this.rowWidth || (this.rowWidth = this.measureWidth()), this.rowWidth }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "NestedGridLayoutResult", { get: function () { return this.gridResult }, set: function (e) { this.gridResult = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "columnSpanExists", { get: function () { return this.bColumnSpanExists }, set: function (e) { this.bColumnSpanExists = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rowMergeComplete", { get: function () { return this.isRowMergeComplete }, set: function (e) { this.isRowMergeComplete = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rowIndex", { get: function () { return this.grid.rows.rowCollection.indexOf(this) }, enumerable: !0, configurable: !0 }), e.prototype.measureHeight = function () { var e, t = 0, i = 0; e = this.cells.getCell(0).rowSpan > 1 ? 0 : this.cells.getCell(0).height; for (var n = 0; n < this.cells.count; n++) { var r = this.cells.getCell(n); if (r.rowSpanRemainingHeight > t && (t = r.rowSpanRemainingHeight), this.rowMergeComplete = !1, r.rowSpan > 1) { for (var o = n, s = this.grid.rows.rowCollection.indexOf(this), a = 0; a < r.rowSpan; a++)a + 1 < r.rowSpan && (this.grid.rows.getRow(s + a + 1).cells.getCell(o).hasRowSpan = !0); i < r.height && (i = r.height) } else e = Math.max(e, r.height) } return i > e && (e = i), 0 === e ? e = i : t > 0 && (e += t), e }, e.prototype.measureWidth = function () { for (var e = 0, t = 0; t < this.grid.columns.count; t++) { e += this.grid.columns.getColumn(t).width } return e }, e }(), hR = function () { function e(e) { this.rows = [], this.grid = e } return Object.defineProperty(e.prototype, "count", { get: function () { return this.rows.length }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "rowCollection", { get: function () { return this.rows }, enumerable: !0, configurable: !0 }), e.prototype.addRow = function (e) { if (void 0 === e) { var t = new lR(this.grid); return this.addRow(t), t } if (e.style.setBackgroundBrush(this.grid.style.backgroundBrush), e.style.setFont(this.grid.style.font), e.style.setTextBrush(this.grid.style.textBrush), e.style.setTextPen(this.grid.style.textPen), 0 === e.cells.count) for (var i = 0; i < this.grid.columns.count; i++)e.cells.add(new rR); this.rows.push(e) }, e.prototype.getRow = function (e) { return this.rows[e] }, e }(), dR = function () { function e(e) { this.rows = [], this.grid = e, this.rows = [] } return e.prototype.getHeader = function (e) { return this.rows[e] }, Object.defineProperty(e.prototype, "count", { get: function () { return this.rows.length }, enumerable: !0, configurable: !0 }), e.prototype.add = function (e) { if ("number" == typeof e) { for (var t = void 0, i = 0; i < e; i++) { t = new lR(this.grid); for (var n = 0; n < this.grid.columns.count; n++)t.cells.add(new rR); this.rows.push(t) } return this.rows } this.rows.push(e) }, e.prototype.indexOf = function (e) { return this.rows.indexOf(e) }, e }(), cR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pR = function (e) { function t() { var t = e.call(this) || this; return t.gridSize = new Uk(0, 0), t.isGridSplit = !1, t.isRearranged = !1, t.pageBounds = new qk, t.listOfNavigatePages = [], t.parentCellIndex = 0, t.tempWidth = 0, t.breakRow = !0, t.splitChildRowIndex = -1, t.hasRowSpanSpan = !1, t.hasColumnSpan = !1, t.isSingleGrid = !0, t } return cR(t, e), Object.defineProperty(t.prototype, "raiseBeginCellDraw", { get: function () { return void 0 !== this.beginCellDraw && null !== typeof this.beginCellDraw }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "raiseEndCellDraw", { get: function () { return void 0 !== this.endCellDraw && null !== typeof this.endCellDraw }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "repeatHeader", { get: function () { return null != this.bRepeatHeader && void 0 !== this.bRepeatHeader || (this.bRepeatHeader = !1), this.bRepeatHeader }, set: function (e) { this.bRepeatHeader = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "allowRowBreakAcrossPages", { get: function () { return this.breakRow }, set: function (e) { this.breakRow = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "columns", { get: function () { return null != this.gridColumns && void 0 !== this.gridColumns || (this.gridColumns = new aR(this)), this.gridColumns }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "rows", { get: function () { return null == this.gridRows && (this.gridRows = new hR(this)), this.gridRows }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "headers", { get: function () { return null != this.gridHeaders && void 0 !== this.gridHeaders || (this.gridHeaders = new dR(this)), this.gridHeaders }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "initialWidth", { get: function () { return this.gridInitialWidth }, set: function (e) { this.gridInitialWidth = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "style", { get: function () { return null == this.gridStyle && (this.gridStyle = new eR), this.gridStyle }, set: function (e) { null == this.gridStyle && (this.gridStyle = e) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isPageWidth", { get: function () { return this.ispageWidth }, set: function (e) { this.ispageWidth = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "isChildGrid", { get: function () { return this.ischildGrid }, set: function (e) { this.ischildGrid = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "size", { get: function () { return 0 !== this.gridSize.width && void 0 !== this.gridSize.width || 0 !== this.gridSize.height || (this.gridSize = this.measure()), this.gridSize }, set: function (e) { this.gridSize = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "ParentCell", { get: function () { return this.parentCell }, set: function (e) { this.parentCell = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "LayoutFormat", { get: function () { return this.layoutFormat }, enumerable: !0, configurable: !0 }), t.prototype.draw = function (e, t, i, n) { if (t instanceof Yk && void 0 === t.width && void 0 === i) return this.drawHelper(e, t.x, t.y); if ("number" == typeof t && "number" == typeof i && void 0 === n) return this.drawHelper(e, t, i, null); if (t instanceof qk && void 0 !== t.width && void 0 === i) return this.drawHelper(e, t, null); if (t instanceof Yk && void 0 === t.width && i instanceof fO) return this.drawHelper(e, t.x, t.y, i); if ("number" == typeof t && "number" == typeof i && (n instanceof fO || null == n)) { var r = e.graphics.clientSize.width - t, o = new qk(t, i, r, 0); return this.drawHelper(e, o, n) } return t instanceof qk && void 0 !== t.width && "boolean" == typeof i ? this.drawHelper(e, t, null) : this.drawHelper(e, t, i) }, t.prototype.measure = function () { for (var e = 0, t = this.columns.width, i = 0; i < this.headers.count; i++) { e += this.headers.getHeader(i).height } for (i = 0; i < this.rows.count; i++) { e += this.rows.getRow(i).height } return new Uk(t, e) }, t.prototype.onBeginCellDraw = function (e) { this.raiseBeginCellDraw && this.beginCellDraw(this, e) }, t.prototype.onEndCellDraw = function (e) { this.raiseEndCellDraw && this.endCellDraw(this, e) }, t.prototype.layout = function (e) { this.setSpan(), this.checkSpan(), this.layoutFormat = e.format, this.gridLocation = e.bounds; return new gR(this).Layouter(e) }, t.prototype.setSpan = function () { for (var e = 1, t = 1, i = 0, n = 0, r = 0, o = this.headers.count, s = 0; s < o; s++) { var a = this.headers.getHeader(s); r = 0; for (var l = a.cells.count, h = 0; h < l; h++) { var d = a.cells.getCell(h); if (r = Math.max(r, d.rowSpan), !d.isCellMergeContinue && !d.isRowMergeContinue && (d.columnSpan > 1 || d.rowSpan > 1)) { if (d.columnSpan + h > a.cells.count) throw new Error("Invalid span specified at row " + h.toString() + " column " + s.toString()); if (d.rowSpan + s > this.headers.count) throw new Error("Invalid span specified at Header " + h.toString() + " column " + s.toString()); if (d.columnSpan > 1 && d.rowSpan > 1) { for (e = d.columnSpan, t = d.rowSpan, i = h, n = s, d.isCellMergeStart = !0, d.isRowMergeStart = !0; e > 1;)i++ , a.cells.getCell(i).isCellMergeContinue = !0, a.cells.getCell(i).isRowMergeContinue = !0, a.cells.getCell(i).rowSpan = t, e--; for (i = h, e = d.columnSpan; t > 1;) { for (n++ , this.headers.getHeader(n).cells.getCell(h).isRowMergeContinue = !0, this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue = !0, t--; e > 1;)i++ , this.headers.getHeader(n).cells.getCell(i).isCellMergeContinue = !0, this.headers.getHeader(n).cells.getCell(i).isRowMergeContinue = !0, e--; e = d.columnSpan, i = h } } else if (d.columnSpan > 1 && 1 === d.rowSpan) for (e = d.columnSpan, i = h, d.isCellMergeStart = !0; e > 1;)i++ , a.cells.getCell(i).isCellMergeContinue = !0, e--; else if (1 === d.columnSpan && d.rowSpan > 1) for (t = d.rowSpan, n = s; t > 1;)n++ , this.headers.getHeader(n).cells.getCell(h).isRowMergeContinue = !0, t-- } } a.maximumRowSpan = r } }, t.prototype.checkSpan = function () { var e, t, i = 1, n = 0, r = 0; if (e = i = 1, t = r = 0, this.hasRowSpanSpan || this.hasColumnSpan) for (var o = this.rows.count, s = 0; s < o; s++) { var a = this.rows.getRow(s); n = 0; for (var l = a.cells.count, h = 0; h < l; h++) { var d = a.cells.getCell(h); if (n = Math.max(n, d.rowSpan), !d.isCellMergeContinue && !d.isRowMergeContinue && (d.columnSpan > 1 || d.rowSpan > 1)) { if (d.columnSpan + h > a.cells.count) throw new Error("Invalid span specified at row  " + h.toString() + " column " + s.toString()); if (d.rowSpan + s > this.rows.count) throw new Error("Invalid span specified at row  " + h.toString() + " column " + s.toString()); if (d.columnSpan > 1 && d.rowSpan > 1) { for (e = d.columnSpan, i = d.rowSpan, t = h, r = s, d.isCellMergeStart = !0, d.isRowMergeStart = !0; e > 1;)t++ , a.cells.getCell(t).isCellMergeContinue = !0, a.cells.getCell(t).isRowMergeContinue = !0, e--; for (t = h, e = d.columnSpan; i > 1;) { for (r++ , this.rows.getRow(r).cells.getCell(h).isRowMergeContinue = !0, this.rows.getRow(r).cells.getCell(t).isRowMergeContinue = !0, i--; e > 1;)t++ , this.rows.getRow(r).cells.getCell(t).isCellMergeContinue = !0, this.rows.getRow(r).cells.getCell(t).isRowMergeContinue = !0, e--; e = d.columnSpan, t = h } } else if (d.columnSpan > 1 && 1 === d.rowSpan) for (e = d.columnSpan, t = h, d.isCellMergeStart = !0; e > 1;)t++ , a.cells.getCell(t).isCellMergeContinue = !0, e--; else if (1 === d.columnSpan && d.rowSpan > 1) for (i = d.rowSpan, r = s; i > 1;)r++ , this.rows.getRow(r).cells.getCell(h).isRowMergeContinue = !0, i-- } } a.maximumRowSpan = n } }, t.prototype.measureColumnsWidth = function (e) { if (void 0 !== e) { this.isPageWidth = !1; for (var t = this.columns.getDefaultWidths(e.width - e.x), i = 0, n = this.columns.count; i < n; i++)this.columns.getColumn(i).columnWidth = t[i], this.tempWidth = t[i]; if (null != this.ParentCell && 0 == this.style.allowHorizontalOverflow && 0 == this.ParentCell.row.grid.style.allowHorizontalOverflow) { var r = 0, o = 0, s = this.columns.count, a = 0; null == this.ParentCell.style.cellPadding && void 0 === this.ParentCell.style.cellPadding || (void 0 !== this.ParentCell.style.cellPadding.left && this.ParentCell.style.cellPadding.hasLeftPad && (r += this.ParentCell.style.cellPadding.left), void 0 !== this.ParentCell.style.cellPadding.right && this.ParentCell.style.cellPadding.hasRightPad && (r += this.ParentCell.style.cellPadding.right)); for (i = 0; i < this.ParentCell.columnSpan; i++)o += this.ParentCell.row.grid.columns.getColumn(this.parentCellIndex + i).width; for (var l = 0; l < this.columns.count; l++)this.gridColumns.getColumn(l).width > 0 && this.gridColumns.getColumn(l).isCustomWidth && (o -= this.gridColumns.getColumn(l).width, s--); if (null == this.ParentCell.row.grid.style.cellPadding && void 0 === this.ParentCell.row.grid.style.cellPadding || (void 0 !== this.ParentCell.row.grid.style.cellPadding.top && this.ParentCell.row.grid.style.cellPadding.hasTopPad && (r += this.ParentCell.row.grid.style.cellPadding.top), void 0 !== this.ParentCell.row.grid.style.cellPadding.bottom && this.ParentCell.row.grid.style.cellPadding.hasBottomPad && (r += this.ParentCell.row.grid.style.cellPadding.bottom)), 0 != this.ParentCell.row.grid.style.cellSpacing && (o -= 2 * this.ParentCell.row.grid.style.cellSpacing), o > r && (a = (o - r) / s, this.tempWidth = a, null != this.ParentCell)) for (l = 0; l < this.columns.count; l++)this.columns.getColumn(l).isCustomWidth || (this.columns.getColumn(l).columnWidth = a) } } else { t = [this.columns.count]; for (var h = 0; h < this.columns.count; h++)t[h] = 0; var d = 0; if ((void 0 === this.isChildGrid && void 0 !== this.gridLocation || null === this.isChildGrid && void 0 !== this.gridLocation) && (this.initialWidth = this.gridLocation.width), this.headers.count > 0) { var c = this.headers.getHeader(0).cells.count, p = this.headers.count; for (i = 0; i < c; i++) { d = 0; for (l = 0; l < p; l++) { var u = Math.min(this.initialWidth, this.headers.getHeader(l).cells.getCell(i).width); d = Math.max(d, u) } t[i] = d } } d = 0; i = 0; for (var g = this.columns.count; i < g; i++) { for (l = 0, p = this.rows.count; l < p; l++)if (1 == this.rows.getRow(l).cells.getCell(i).columnSpan && !this.rows.getRow(l).cells.getCell(i).isCellMergeContinue || null != this.rows.getRow(l).cells.getCell(i).value) { if (null != this.rows.getRow(l).cells.getCell(i).value && !this.rows.getRow(l).grid.style.allowHorizontalOverflow) this.rows.getRow(l).grid.style.cellPadding.right, this.rows.getRow(l).grid.style.cellPadding.left, this.rows.getRow(l).cells.getCell(i).style.borders.left.width; u = 0; u = this.initialWidth > 0 ? Math.min(this.initialWidth, this.rows.getRow(l).cells.getCell(i).width) : this.rows.getRow(l).cells.getCell(i).width, d = Math.max(t[i], Math.max(d, u)), d = Math.max(this.columns.getColumn(i).width, d) } 0 != this.rows.count && (t[i] = d), d = 0 } i = 0; for (var m = this.rows.count; i < m; i++) { l = 0; for (var f = this.columns.count; l < f; l++)if (this.rows.getRow(i).cells.getCell(l).columnSpan > 1) { t[l]; for (var y = 1; y < this.rows.getRow(i).cells.getCell(l).columnSpan; y++)t[l + y] } } for (i = 0, n = this.columns.count; i < n; i++)this.columns.getColumn(i).width <= 0 ? this.columns.getColumn(i).columnWidth = t[i] : this.columns.getColumn(i).width > 0 && !this.columns.getColumn(i).isCustomWidth && (this.columns.getColumn(i).columnWidth = t[i]); r = 0; var v = 0, w = this.columns.count, b = 0; v = this.tempWidth; for (l = 0; l < this.columns.count; l++)this.gridColumns.getColumn(l).width > 0 && this.gridColumns.getColumn(l).isCustomWidth && (v -= this.gridColumns.getColumn(l).width, w--); if (v > 0 && 0 != this.ParentCell.row.grid.style.cellSpacing && (v -= 2 * this.ParentCell.row.grid.style.cellSpacing), v > r && (b = v / w, null != this.ParentCell)) for (l = 0; l < this.columns.count; l++)this.columns.getColumn(l).isCustomWidth || (this.columns.getColumn(l).columnWidth = b) } }, t }(wO), uR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gR = function (e) { function t(t) { var i = e.call(this, t) || this; return i.gridInitialWidth = 0, i.gridSize = new Uk(0, 0), i.parentCellIndex = 0, i.tempWidth = 0, i.childheight = 0, i.isChildGrid = !1, i.hasRowSpanSpan = !1, i.isRearranged = !1, i.pageBounds = new qk, i.listOfNavigatePages = [], i.flag = !0, i.columnRanges = [], i.currentLocation = new Yk(0, 0), i.breakRow = !0, i.isOverloadWithPosition = !1, i } return uR(t, e), Object.defineProperty(t.prototype, "Grid", { get: function () { return this.elements }, enumerable: !0, configurable: !0 }), t.prototype.getFormat = function (e) { return e }, t.prototype.layoutInternal = function (e) { var t = this.getFormat(e.format); if (this.gridLayoutFormat = this.getFormat(e.format), this.currentPage = e.page, null === this.currentPage) throw Error("Can not set page as null"); this.currentPage.getClientSize().height, this.currentPage.getClientSize().width; this.currentPageBounds = this.currentPage.getClientSize(), this.currentGraphics = this.currentPage.graphics; var i = 0; if (i = this.currentGraphics.page.section.indexOf(this.currentGraphics.page), this.listOfNavigatePages.push(i), null != t && t.break === bO.FitColumnsToPage ? this.currentBounds = new qk(new Yk(e.bounds.x, e.bounds.y), new Uk(this.Grid.columns.width, this.currentGraphics.clientSize.height)) : this.currentBounds = new qk(new Yk(e.bounds.x, e.bounds.y), this.currentGraphics.clientSize), 0 !== this.Grid.rows.count) this.currentBounds.width = e.bounds.width > 0 ? e.bounds.width : this.currentBounds.width - this.Grid.rows.getRow(0).cells.getCell(0).style.borders.left.width / 2; else { if (0 === this.Grid.headers.count) throw Error("Please add row or header into grid"); this.currentBounds.width = e.bounds.width } if (this.startLocation = new Yk(e.bounds.x, e.bounds.y), e.bounds.height > 0 && !this.Grid.isChildGrid && (this.currentBounds.height = e.bounds.height), this.Grid.isChildGrid || (this.hType = this.Grid.style.horizontalOverflowType), this.Grid.style.allowHorizontalOverflow ? (this.Grid.measureColumnsWidth(), this.determineColumnDrawRanges()) : (this.columnRanges = [], this.Grid.measureColumnsWidth(this.currentBounds), this.columnRanges.push([0, this.Grid.columns.count - 1])), this.Grid.hasRowSpanSpan) for (var n = 0; n < this.Grid.rows.count; n++) { this.Grid.rows.getRow(n).height; this.Grid.rows.getRow(n).isRowHeightSet || (this.Grid.rows.getRow(n).isRowHeightSet = !0) } return this.layoutOnPage(e) }, t.prototype.determineColumnDrawRanges = function () { for (var e = 0, t = 0, i = 0, n = this.currentGraphics.clientSize.width - this.currentBounds.x, r = 0; r < this.Grid.columns.count; r++)if ((i += this.Grid.columns.getColumn(r).width) >= n) { for (var o = 0, s = e; s <= r && !((o += this.Grid.columns.getColumn(s).width) > n); s++)t = s; this.columnRanges.push([e, t]), i = (t = e = t + 1) <= r ? this.Grid.columns.getColumn(r).width : 0 } this.columnRanges.push([e, this.Grid.columns.count - 1]) }, t.prototype.layoutOnPage = function (e) { this.pageBounds.x = e.bounds.x, this.pageBounds.y = e.bounds.y, this.pageBounds.height = e.bounds.height; for (var i = this.getFormat(e.format), n = null, r = new WP, o = e.page, s = [], a = 0; a < this.columnRanges.length; a++) { var l = this.columnRanges[a]; this.cellStartIndex = l[0], this.cellEndIndex = l[1]; var h = this.raiseBeforePageLayout(this.currentPage, this.currentBounds, this.currentRowIndex); this.currentBounds = h.currentBounds, this.currentRowIndex = h.currentRowIndex; for (var d = 0; d < this.Grid.headers.count; d++) { var c = this.Grid.headers.getHeader(d); this.currentBounds.y, this.drawRow(c) } var p = 0, u = (this.Grid.rows.count, void 0), g = !0; s = []; for (var m = 0; m < this.Grid.rows.count; m++) { c = this.Grid.rows.getRow(m); p++ , this.currentRowIndex = p - 1; var f = this.currentBounds.y; o = this.currentPage, t.repeatRowIndex = -1, g && c.grid.isChildGrid && (g = !1); var y = null; if (-1 == this.Grid.splitChildRowIndex) y = this.drawRow(c), c.isrowFinish = !0; else { if (!(c.grid.ParentCell.row.grid.isGridSplit && this.Grid.splitChildRowIndex <= c.rowIndex)) { if (c.isrowFinish) continue; break } y = this.drawRow(c), c.isrowFinish = !0 } for (s.push(y.bounds.width), f === this.currentBounds.y ? (u = !0, t.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(c)) : (u = !1, t.repeatRowIndex = -1); !y.isFinish && null != o;) { var v = this.getLayoutResult(); if (this.raisePageLayouted(v).cancel || u) break; if (this.Grid.allowRowBreakAcrossPages) { this.currentPage = this.getNextPageformat(i), f = this.currentBounds.y; new Yk(XO.default.right.width / 2, XO.default.top.width / 2); if (this.Grid.isChildGrid && null != c.grid.ParentCell && null != this.Grid.ParentCell.row.grid.style.cellPadding && c.rowBreakHeight + this.Grid.ParentCell.row.grid.style.cellPadding.top < this.currentBounds.height && (this.currentBounds.y = this.Grid.ParentCell.row.grid.style.cellPadding.top), null != c.grid.ParentCell) { c.grid.ParentCell.row.isRowBreaksNextPage = !0, c.grid.ParentCell.row.rowBreakHeightValue = c.rowBreakHeight + this.Grid.ParentCell.row.grid.style.cellPadding.top + this.Grid.ParentCell.row.grid.style.cellPadding.bottom; for (var w = c.rowIndex + 1; w < c.grid.rows.count; w++)c.grid.ParentCell.row.rowBreakHeightValue += c.grid.rows.getRow(w).height } if (c.grid.isChildGrid) { c.isrowFinish = !1, c.grid.splitChildRowIndex = c.rowIndex, c.grid.ParentCell.row.grid.splitChildRowIndex = c.grid.ParentCell.row.rowIndex, c.grid.ParentCell.row.grid.isGridSplit && (c.grid.ParentCell.row.noOfPageCount += 1, c.grid.ParentCell.row.grid.isGridSplit = !1); break } if (c.noOfPageCount < 1) { if (-1 != c.grid.splitChildRowIndex && (c.grid.isGridSplit = !0), this.currentBounds.y = .5, this.Grid.repeatHeader) for (var b = 0; b < this.Grid.headers.count; b++) { var C = this.Grid.headers.getHeader(b); this.drawRow(C) } if (y = this.drawRow(c), c.noOfPageCount >= 1) { c.rowBreakHeightValue; for (var L = 0; L < c.noOfPageCount; L++) { var M = this.getLayoutResult(); if (this.raisePageLayouted(M), this.currentPage = this.getNextPageformat(i), f = this.currentBounds.y, -1 != c.grid.splitChildRowIndex && (c.grid.isGridSplit = !0), this.currentBounds.y = .5, this.Grid.repeatHeader) for (var S = 0; S < this.Grid.headers.count; S++) { var x = this.Grid.headers.getHeader(S); this.drawRow(x) } this.drawRow(c) } } c.grid.splitChildRowIndex = -1, c.grid.isGridSplit = !1, y.isFinish = !0; for (var T = 0; T < c.cells.count; T++)c.cells.getCell(T).value instanceof pR && (c.cells.getCell(T).value.splitChildRowIndex = -1) } } } if (!y.isFinish && null !== o && i.layout !== JP.OnePage && u) { if (this.startLocation.x = this.currentBounds.x, this.currentPage = this.getNextPageformat(i), null !== e.format && !e.format.usePaginateBounds && null !== e.bounds && e.bounds.height > 0 && !this.Grid.isChildGrid && (this.currentBounds.height = e.bounds.height), null !== e.format && !e.format.usePaginateBounds && null !== e.bounds && e.bounds.y > 0 && !this.Grid.isChildGrid && (this.currentBounds.y = e.bounds.y), this.startLocation.y = this.currentBounds.y, i.paginateBounds.x === i.paginateBounds.y && i.paginateBounds.y === i.paginateBounds.height && i.paginateBounds.height === i.paginateBounds.width && 0 === i.paginateBounds.width && (this.currentBounds.x += this.startLocation.x), this.currentBounds.x === XO.default.left.width / 2 && (this.currentBounds.y += this.startLocation.x), this.Grid.repeatHeader) for (var D = 0; D < this.Grid.headers.count; D++) { x = this.Grid.headers.getHeader(D); this.drawRow(x) } this.drawRow(c), null === this.currentPage || r.containsKey(this.currentPage) || r.add(this.currentPage, l) } if (null != c.NestedGridLayoutResult) { this.currentPage = c.NestedGridLayoutResult.page, this.currentGraphics = this.currentPage.graphics, this.startLocation = new Yk(c.NestedGridLayoutResult.bounds.x, c.NestedGridLayoutResult.bounds.y); var A = this.ReCalculateHeight(c, c.NestedGridLayoutResult.bounds.height); if (this.currentBounds.y = A, o != this.currentPage) { for (var E = this.currentPage.section, j = E.indexOf(o) + 1, I = E.indexOf(this.currentPage), k = j; k < I + 1; k++) { var P = this.currentPage.graphics, N = new Yk(i.paginateBounds.x, i.paginateBounds.y), O = k == I ? c.NestedGridLayoutResult.bounds.height - e.bounds.y : this.currentBounds.height - N.y; O <= P.clientSize.height && (O += e.bounds.y), N.y = null == i ? .5 : i.paginateBounds.y; for (var R = 0; R < c.cells.count; R++) { var z = c.cells.getCell(R), B = 0, F = 0; if (z.value instanceof pR) for (var V = 0; V < z.value.columns.count; V++)F += z.value.columns.getColumn(V).columnWidth; else F = z.width; B = Math.max(F, c.grid.columns.getColumn(R).width), z.drawCellBorders(P, new qk(N, new Uk(B, O))), N.x += B, R += z.columnSpan - 1 } } o = this.currentPage } } } var W = !1, H = 0; s.length > 0 && (H = s[0]); var _ = [[1, 2]]; for (R = 0; R < this.Grid.rows.count; R++)if (-1 != this.cellEndIndex && this.Grid.rows.getRow(R).cells.getCell(this.cellEndIndex).value instanceof pR) { var Y = this.Grid.rows.getRow(R).cells.getCell(this.cellEndIndex).value; this.rowLayoutBoundsWidth = Y.rowLayoutBoundsWidth, W = !0 } if (!W && s.length > 0) { for (R = 0; R < p - 1; R++)H < s[R] && (H = s[R]); this.rowLayoutBoundsWidth = H } else this.rowLayoutBoundsWidth = _[0][1]; if (this.columnRanges.indexOf(l) < this.columnRanges.length - 1 && null != o && i.layout != JP.OnePage) if (this.Grid.isChildGrid, 0 != _[0][0]) { this.currentPage.section.indexOf(this.currentPage); this.currentGraphics = this.currentPage.graphics, this.currentBounds = new qk(new Yk(0, 0), this.currentPage.getClientSize()); this.currentGraphics.page.section.indexOf(this.currentGraphics.page) } else this.currentPage = this.getNextPageformat(i); this.columnRanges.length - 1 !== a && this.columnRanges.length > 1 && i.layout !== JP.OnePage && (this.currentPage = this.getNextPageformat(i), i.paginateBounds.x === i.paginateBounds.y && i.paginateBounds.y === i.paginateBounds.height && i.paginateBounds.height === i.paginateBounds.width && 0 === i.paginateBounds.width && (this.currentBounds.x += this.startLocation.x, this.currentBounds.y += this.startLocation.y)) } return n = this.getLayoutResult(), this.Grid.style.allowHorizontalOverflow && this.Grid.style.horizontalOverflowType == ZO.NextPage && this.reArrangePages(r), this.raisePageLayouted(n), n }, t.prototype.getNextPageformat = function (e) { var t = this.currentPage.section, i = null, n = t.indexOf(this.currentPage); this.flag = !1, i = n === t.count - 1 ? t.add() : t.getPages()[n + 1], this.currentGraphics = i.graphics; var r = this.currentGraphics.page.section.indexOf(this.currentGraphics.page); return -1 === this.listOfNavigatePages.indexOf(r) && this.listOfNavigatePages.push(r), this.currentBounds = new qk(new Yk(0, 0), i.getClientSize()), i }, t.prototype.CheckIfDefaultFormat = function (e) { var t = new dP; return e.alignment === t.alignment && e.characterSpacing === t.characterSpacing && e.clipPath === t.clipPath && e.firstLineIndent === t.firstLineIndent && e.horizontalScalingFactor === t.horizontalScalingFactor && e.lineAlignment === t.lineAlignment && e.lineLimit === t.lineLimit && e.lineSpacing === t.lineSpacing && e.measureTrailingSpaces === t.measureTrailingSpaces && e.noClip === t.noClip && e.paragraphIndent === t.paragraphIndent && e.rightToLeft === t.rightToLeft && e.subSuperScript === t.subSuperScript && e.wordSpacing === t.wordSpacing && e.wordWrap === t.wordWrap }, t.prototype.RaiseBeforeCellDraw = function (e, t, i, n, r, o) { var s = null; return this.Grid.raiseBeginCellDraw && (s = new vR(e, t, i, n, r, o), this.Grid.onBeginCellDraw(s), o = s.style), o }, t.prototype.raiseAfterCellDraw = function (e, t, i, n, r, o) { var s = null; this.Grid.raiseEndCellDraw && (s = new wR(e, t, i, n, r, o), this.Grid.onEndCellDraw(s)) }, t.prototype.reArrangePages = function (e) { for (var t = this.currentPage.document, i = [], n = e.keys(), r = (e.values(), 0); r < n.length; r++) { (a = n[r]).section = null, i.push(a), t.pages.remove(a) } for (r = 0; r < e.size(); r++)for (var o = r, s = e.size() / this.columnRanges.length; o < e.size(); o += s) { var a = i[o]; -1 === t.pages.indexOf(a) && t.pages.add(a) } }, t.prototype.getLayoutResult = function () { if (this.Grid.isChildGrid && this.Grid.allowRowBreakAcrossPages) for (var e = 0; e < this.Grid.rows.count; e++) { var t = this.Grid.rows.getRow(e); t.rowBreakHeight > 0 && t.repeatFlag && (this.startLocation.y = this.currentPage.origin.y) } var i; return this.isChanged || (i = new qk(this.startLocation, new Uk(this.currentBounds.width, this.currentBounds.y - this.startLocation.y))), new mR(this.currentPage, i) }, t.prototype.ReCalculateHeight = function (e, t) { for (var i = 0, n = this.cellStartIndex; n <= this.cellEndIndex; n++)null !== e.cells.getCell(n).remainingString && "" !== e.cells.getCell(n).remainingString && void 0 !== e.cells.getCell(n).remainingString && (i = Math.max(i, e.cells.getCell(n).measureHeight())); return Math.max(t, i) }, t.prototype.raiseBeforePageLayout = function (e, t, i) { var n = !1; if (this.Grid.raiseBeginPageLayout) { var r = new MR(t, e, i); this.Grid.onBeginPageLayout(r), n = r.cancel, t = r.bounds, i = r.startRowIndex } return { returnValue: n, currentBounds: t, currentRowIndex: i } }, t.prototype.raisePageLayouted = function (e) { var t = new SR(e); return this.Grid.raiseEndPageLayout && this.Grid.onEndPageLayout(t), t }, t.prototype.drawRow = function (e, i, n) { if (void 0 === i) { var r = new xR, o = 0, s = new Uk(0, 0), a = !1; if (e.rowSpanExists) { var l = 0, h = this.Grid.rows.rowCollection.indexOf(e); -1 === h && -1 !== (h = this.Grid.headers.indexOf(e)) && (a = !0); for (var d = 0; d < e.cells.count; d++) { var c = e.cells.getCell(d); l = Math.max(l, c.rowSpan) } for (d = h; d < h + l; d++)o += a ? this.Grid.headers.getHeader(d).height : this.Grid.rows.getRow(d).height } var p = e.rowBreakHeight > 0 ? e.rowBreakHeight : e.height; return this.Grid.isChildGrid && null != this.Grid.ParentCell ? this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + p > this.currentPageBounds.height || this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + p > this.currentBounds.height || this.currentBounds.y + this.Grid.ParentCell.row.grid.style.cellPadding.bottom + o > this.currentPageBounds.height ? (this.Grid.ParentCell.row.grid.LayoutFormat.break === bO.FitPage && (t.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(e), this.Grid.splitChildRowIndex = this.Grid.rows.rowCollection.indexOf(e)), t.repeatRowIndex > -1 && t.repeatRowIndex === e.rowIndex && this.Grid.allowRowBreakAcrossPages && (r.isFinish = !0, r.bounds = this.currentBounds, this.drawRowWithBreak(r, e, p), e.repeatFlag = !0, e.repeatRowNumber = t.repeatRowIndex)) : (r.isFinish = !0, e.grid.ParentCell.row.rowBreakHeightValue > 0 ? e.repeatFlag = !0 : (e.repeatFlag = !1, p = e.height), this.Grid.isChildGrid && e.rowBreakHeight > 0 && null != this.Grid.ParentCell.row.grid.style.cellPadding && (p += this.Grid.ParentCell.row.grid.style.cellPadding.bottom), this.drawRow(e, r, p)) : p > this.currentPageBounds.height ? this.Grid.allowRowBreakAcrossPages && (r.isFinish = !0, this.drawRowWithBreak(r, e, p), e.isrowFinish = !0, e.repeatFlag = !0, -1 !== e.grid.splitChildRowIndex && (r.isFinish = !1)) : this.currentBounds.y + p > this.currentPageBounds.height || this.currentBounds.y + p > this.currentBounds.height + this.startLocation.y || this.currentBounds.y + o > this.currentPageBounds.height ? (this.Grid.LayoutFormat.break === bO.FitPage && (t.repeatRowIndex = this.Grid.rows.rowCollection.indexOf(e)), t.repeatRowIndex > -1 && t.repeatRowIndex === e.rowIndex ? this.Grid.allowRowBreakAcrossPages && (r.isFinish = !0, this.drawRowWithBreak(r, e, p), e.repeatFlag = !0, e.repeatRowNumber = t.repeatRowIndex, -1 !== e.grid.splitChildRowIndex && (r.isFinish = !1)) : r.isFinish = !1) : (r.isFinish = !0, this.drawRow(e, r, p), e.repeatFlag = !1), r } var u = new Yk(this.currentBounds.x, this.currentBounds.y); i.bounds = new qk(u, new Uk(0, 0)), n = this.ReCalculateHeight(e, n); for (d = this.cellStartIndex; d <= this.cellEndIndex; d++) { var g = d > this.cellEndIndex + 1 && e.cells.getCell(d).columnSpan > 1; if (!g) for (var m = 1; m < e.cells.getCell(d).columnSpan; m++)e.cells.getCell(d + m).isCellMergeContinue = !0; s = new Uk(this.Grid.columns.getColumn(d).width, n); !this.CheckIfDefaultFormat(this.Grid.columns.getColumn(d).format) && this.CheckIfDefaultFormat(e.cells.getCell(d).stringFormat) && (e.cells.getCell(d).stringFormat = this.Grid.columns.getColumn(d).format); var f = e.cells.getCell(d).style, y = "string" == typeof e.cells.getCell(d).value && null !== e.cells.getCell(d).value ? e.cells.getCell(d).value : ""; if (e.cells.getCell(d).style = this.RaiseBeforeCellDraw(this.currentGraphics, this.currentRowIndex, d, new qk(u, s), y, f), e.cells.getCell(d).value instanceof pR) { (w = e.cells.getCell(d).value).parentCellIndex = d } var v = e.cells.getCell(d).draw(this.currentGraphics, new qk(u, s), g); if (e.grid.style.allowHorizontalOverflow && (e.cells.getCell(d).columnSpan > this.cellEndIndex || d + e.cells.getCell(d).columnSpan > this.cellEndIndex + 1) && this.cellEndIndex < e.cells.count - 1 && (e.rowOverflowIndex = this.cellEndIndex), e.grid.style.allowHorizontalOverflow && e.rowOverflowIndex > 0 && (e.cells.getCell(d).columnSpan > this.cellEndIndex || d + e.cells.getCell(d).columnSpan > this.cellEndIndex + 1) && e.cells.getCell(d).columnSpan - this.cellEndIndex + d - 1 > 0 && (e.cells.getCell(e.rowOverflowIndex + 1).value = null !== v && void 0 !== v.remainder ? v.remainder : "", e.cells.getCell(e.rowOverflowIndex + 1).stringFormat = e.cells.getCell(d).stringFormat, e.cells.getCell(e.rowOverflowIndex + 1).style = e.cells.getCell(d).style, e.cells.getCell(e.rowOverflowIndex + 1).columnSpan = e.cells.getCell(d).columnSpan - this.cellEndIndex + d - 1), y = "string" == typeof e.cells.getCell(d).value && null !== e.cells.getCell(d).value ? e.cells.getCell(d).value : "", g || this.raiseAfterCellDraw(this.currentGraphics, this.currentRowIndex, d, new qk(u, s), y, e.cells.getCell(d).style), e.cells.getCell(d).value instanceof pR) { var w = e.cells.getCell(d).value; this.Grid.columns.getColumn(d).width >= this.currentGraphics.clientSize.width ? (u.x = w.rowLayoutBoundsWidth, u.x += w.style.cellSpacing) : u.x += this.Grid.columns.getColumn(d).width } else u.x += this.Grid.columns.getColumn(d).width } e.rowMergeComplete && !e.isRowHeightSet || (this.currentBounds.y += n), i.bounds = new qk(new Yk(i.bounds.x, i.bounds.y), new Uk(u.x, u.y)) }, t.prototype.drawRowWithBreak = function (e, t, i) { var n = new Yk(this.currentBounds.x, this.currentBounds.y); t.grid.isChildGrid && t.grid.allowRowBreakAcrossPages && this.startLocation.x !== this.currentBounds.x && (n.x = this.startLocation.x), e.bounds = new qk(n, new Uk(0, 0)), this.gridHeight = t.rowBreakHeight > 0 ? this.currentPageBounds.height : 0, t.grid.style.cellPadding.top + this.currentBounds.y + t.grid.style.cellPadding.bottom < this.currentPageBounds.height && (t.rowBreakHeight = this.currentBounds.y + i - this.currentPageBounds.height); for (var r = 0; r < t.cells.count; r++) { var o = t.cells.getCell(r); o.measureHeight() === i && o.value instanceof pR && (t.rowBreakHeight = 0) } for (r = this.cellStartIndex; r <= this.cellEndIndex; r++) { var s = t.cells.getCell(r).columnSpan + r > this.cellEndIndex + 1 && t.cells.getCell(r).columnSpan > 1, a = new Uk(this.Grid.columns.getColumn(r).width, this.gridHeight > 0 ? this.gridHeight : this.currentPageBounds.height), l = t.cells.getCell(r).style; t.cells.getCell(r).style = l; var h = null; if (h = t.cells.getCell(r).draw(this.currentGraphics, new qk(n, a), s), t.rowBreakHeight > 0 && null != h && (t.cells.getCell(r).FinishedDrawingCell = !1, t.cells.getCell(r).remainingString = null == h.remainder ? " " : h.remainder, t.grid.isChildGrid && (t.rowBreakHeight = i - h.actualSize.height)), e.isFinish = e.isFinish ? t.cells.getCell(r).FinishedDrawingCell : e.isFinish, t.cells.getCell(r).value instanceof pR) { var d = t.cells.getCell(r).value; this.rowBreakPageHeightCellIndex = r, this.Grid.columns.getColumn(r).width >= this.currentGraphics.clientSize.width ? (n.x = this.rowLayoutBoundsWidth, n.x += d.style.cellSpacing) : n.x += this.Grid.columns.getColumn(r).width } else n.x += this.Grid.columns.getColumn(r).width } this.currentBounds.y += this.gridHeight > 0 ? this.gridHeight : i, e.bounds = new qk(new Yk(e.bounds.x, e.bounds.y), new Uk(n.x, n.y)) }, t.repeatRowIndex = -1, t }(mO), mR = function (e) { function t(t, i) { return e.call(this, t, i) || this } return uR(t, e), t }(vO), fR = function (e) { function t(t) { return e.call(this, t) || this } return uR(t, e), t }(fO), yR = function () { function e(e, t, i, n, r) { this.gridRowIndex = t, this.gridCellIndex = i, this.internalValue = r, this.gridBounds = n, this.pdfGraphics = e } return Object.defineProperty(e.prototype, "rowIndex", { get: function () { return this.gridRowIndex }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "cellIndex", { get: function () { return this.gridCellIndex }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "value", { get: function () { return this.internalValue }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bounds", { get: function () { return this.gridBounds }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "graphics", { get: function () { return this.pdfGraphics }, enumerable: !0, configurable: !0 }), e }(), vR = function (e) { function t(t, i, n, r, o, s) { var a = e.call(this, t, i, n, r, o) || this; return a.style = s, a } return uR(t, e), Object.defineProperty(t.prototype, "skip", { get: function () { return this.bSkip }, set: function (e) { this.bSkip = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "style", { get: function () { return this.cellStyle }, set: function (e) { this.cellStyle = e }, enumerable: !0, configurable: !0 }), t }(yR), wR = function (e) { function t(t, i, n, r, o, s) { var a = e.call(this, t, i, n, r, o) || this; return a.cellStyle = s, a } return uR(t, e), Object.defineProperty(t.prototype, "style", { get: function () { return this.cellStyle }, enumerable: !0, configurable: !0 }), t }(yR), bR = function () { function e() { } return Object.defineProperty(e.prototype, "cancel", { get: function () { return this.isCancel }, set: function (e) { this.isCancel = e }, enumerable: !0, configurable: !0 }), e }(), CR = function (e) { function t(t, i) { var n = e.call(this) || this; return n.bounds = t, n.pdfPage = i, n } return uR(t, e), Object.defineProperty(t.prototype, "bounds", { get: function () { return this.cellBounds }, set: function (e) { this.cellBounds = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "page", { get: function () { return this.pdfPage }, enumerable: !0, configurable: !0 }), t }(bR), LR = function (e) { function t(t) { var i = e.call(this) || this; return i.layoutResult = t, i } return uR(t, e), Object.defineProperty(t.prototype, "result", { get: function () { return this.layoutResult }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "nextPage", { get: function () { return this.nextPdfPage }, set: function (e) { this.nextPdfPage = e }, enumerable: !0, configurable: !0 }), t }(bR), MR = function (e) { function t(t, i, n) { var r = e.call(this, t, i) || this; return r.startRow = n, r } return uR(t, e), Object.defineProperty(t.prototype, "startRowIndex", { get: function () { return this.startRow }, enumerable: !0, configurable: !0 }), t }(CR), SR = function (e) { function t(t) { return e.call(this, t) || this } return uR(t, e), t }(LR), xR = function () { function e() { this.layoutedBounds = new qk(0, 0, 0, 0) } return Object.defineProperty(e.prototype, "isFinish", { get: function () { return this.bIsFinished }, set: function (e) { this.bIsFinished = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bounds", { get: function () { return this.layoutedBounds }, set: function (e) { this.layoutedBounds = e }, enumerable: !0, configurable: !0 }), e }(), TR = function () { function e(e) { this.control = e } return e.prototype.print = function (e) { this.printWindow = window.open("", "print", "height=" + window.outerHeight + ",width=" + window.outerWidth + ",tabbar=no"), this.printWindow.moveTo(0, 0), this.printWindow.resizeTo(screen.availWidth, screen.availHeight); var t = { cancel: !1, htmlContent: this.getHTMLContent(e), name: "beforePrint" }; this.control.trigger("beforePrint", t), t.cancel || y(t.htmlContent, this.printWindow) }, e.prototype.getHTMLContent = function (e) { var t = M("div"); return e ? e instanceof Array ? e.forEach(function (e) { t.appendChild(Sn(e).cloneNode(!0)) }) : e instanceof Element ? t.appendChild(e.cloneNode(!0)) : t.appendChild(Sn(e).cloneNode(!0)) : t.appendChild(this.control.element.cloneNode(!0)), t }, e.prototype.export = function (e, t, i, n, r, o, s) { var a = this, l = this.getControlsValue(n, s); r = r || l.width, o = o || l.height; var h, c = this.control.svgObject, p = this.control.enableCanvas; p || (c = M("canvas", { id: "ej2-canvas", attrs: { width: r.toString(), height: o.toString() } })); var u = !(uw.userAgent.toString().indexOf("HeadlessChrome") > -1); i = d(i) ? LP.Landscape : i; var g = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">' + l.svg.outerHTML + "</svg>", m = window.URL.createObjectURL(new Blob("SVG" === e ? [g] : [(new XMLSerializer).serializeToString(l.svg)], { type: "image/svg+xml" })); if ("SVG" === e) if ("msie" === uw.info.name) { var f = new Blob([(new XMLSerializer).serializeToString(l.svg)], { type: "application/octet-stream" }); window.navigator.msSaveOrOpenBlob(f, t + "." + e.toLocaleLowerCase()) } else this.triggerDownload(t, e, m, u); else if ("msie" === uw.info.name) { var y = c; p || (y = this.createCanvas()), h = y.toDataURL(), "PDF" === e ? this.exportPdf(y, i, r, o, u, t) : this.doexport(e, h, t) } else { var v = new Image, w = c.getContext("2d"); v.onload = function () { w.drawImage(v, 0, 0), window.URL.revokeObjectURL(m), "PDF" === e ? a.exportPdf(c, i, r, o, u, t) : window.navigator.msSaveOrOpenBlob ? window.navigator.msSaveOrOpenBlob(c.msToBlob(), t + "." + e.toLocaleLowerCase()) : a.triggerDownload(t, e, c.toDataURL("image/png").replace("image/png", "image/octet-stream"), u) }, v.src = m } p || Oi(document.getElementById(this.control.element.id + "_canvas")) }, e.prototype.triggerDownload = function (e, t, i, n) { M("a", { attrs: { download: e + "." + t.toLocaleLowerCase(), href: i } }).dispatchEvent(new MouseEvent(n ? "click" : "move", { view: window, bubbles: !1, cancelable: !0 })) }, e.prototype.getControlsValue = function (e, t) { var i = 0, n = 0, r = "", o = this.control.enableCanvas, s = new JE("").createSvg({ id: "Svg_Export_Element", width: 200, height: 200 }); return e.map(function (e) { var a = e.svgObject.cloneNode(!0), l = e.renderer.createGroup({ style: d(t) || t ? "transform: translateY(" + n + "px)" : "transform: translateX(" + i + "px)" }); o || l.appendChild(a), i = d(t) || t ? Math.max(e.availableSize.width, i) : i + e.availableSize.width, n = d(t) || t ? n + e.availableSize.height : Math.max(e.availableSize.height, n), r += e.svgObject.outerHTML, o || s.appendChild(l) }), o || (s.setAttribute("width", i + ""), s.setAttribute("height", n + "")), { width: i, height: n, svg: s } }, e.prototype.createCanvas = function () { var e = this.control; this.canvasRender(!0, e); var t = e.svgObject; return this.canvasRender(!1, e), t }, e.prototype.canvasRender = function (e, t) { t.enableCanvas = e, t.preRender(), t.render() }, e.prototype.exportPdf = function (e, t, i, n, r, o) { var s, a, l = new rO, h = l.pageSettings.margins, d = l.pageSettings.width, c = l.pageSettings.height, p = e.toDataURL("image/jpeg").replace("image/jpeg", "image/octet-stream"); l.pageSettings.orientation = t, s = d < i ? i + h.left + h.right : d, a = c < n ? n + h.top + h.bottom : c, l.pageSettings.size = new Uk(s, a), p = p.slice(p.indexOf(",") + 1), l.pages.add().graphics.drawImage(new tN(p), 0, 0, i, n), r && (l.save(o + ".pdf"), l.destroy()) }, e.prototype.doexport = function (e, t, i) { var n = [], r = e || "JPG"; n = [t], this.exportImage(n, i, r, t) }, e.prototype.exportImage = function (e, t, i, n) { for (var r = [], o = e instanceof HTMLElement ? 0 : e.length, s = 0; s < o; s++) { for (var a = e[s].replace(/^data:[a-z]*;,/, "").split(","), l = atob(a[1]), h = new ArrayBuffer(l.length), d = new Uint8Array(h), c = 0; c < l.length; c++)d[c] = l.charCodeAt(c); r.push(h) } for (var p = 0; p < r.length; p++) { var u = new Blob([r[p]], { type: "application/octet-stream" }); "msie" === uw.info.name && window.navigator.msSaveOrOpenBlob(u, t + "." + i.toLocaleLowerCase()) } }, e }(), DR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), AR = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, ER = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return DR(t, e), AR([Y(!1)], t.prototype, "enable", void 0), AR([Y("")], t.prototype, "dashArray", void 0), AR([U({ color: null, width: 1 }, BE)], t.prototype, "line", void 0), AR([Y("Both")], t.prototype, "lineType", void 0), t }(ww), jR = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return DR(t, e), AR([Y(!1)], t.prototype, "enableSelectionZooming", void 0), AR([Y(!1)], t.prototype, "enablePinchZooming", void 0), AR([Y(!1)], t.prototype, "enableMouseWheelZooming", void 0), AR([Y(!0)], t.prototype, "enableDeferredZooming", void 0), AR([Y("XY")], t.prototype, "mode", void 0), AR([Y(["Zoom", "ZoomIn", "ZoomOut", "Pan", "Reset"])], t.prototype, "toolbarItems", void 0), AR([Y(!1)], t.prototype, "enablePan", void 0), AR([Y(!1)], t.prototype, "enableScrollbar", void 0), t }(ww), IR = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.animated = !1, n.isPointMouseDown = !1, n.isScrolling = !1, n.chartAreaType = "Cartesian", n.chartid = 57723, r("mergePersistData", n.mergePersistChartData, n), n } return DR(t, e), t.prototype.mergePersistChartData = function () { var e = window.localStorage.getItem(this.getModuleName() + this.element.id); if (!d(e) && "" !== e) { var t = JSON.parse(e), i = Object.keys(t); this.isProtectedOnChange = !0; for (var n = 0, r = i; n < r.length; n++) { var o = r[n]; "object" != typeof this[o] || d(this[o]) ? this[o] = t[o] : h(this[o], t[o]) } this.isProtectedOnChange = !1 } }, t.prototype.preRender = function () { this.isBlazor = window.Blazor, this.unWireEvents(), this.initPrivateVariable(), this.setCulture(), this.wireEvents() }, t.prototype.initPrivateVariable = function () { if (this.animateSeries = !0, this.delayRedraw = !1, this.horizontalAxes = [], this.verticalAxes = [], this.refreshAxis(), this.refreshDefinition(this.rows), this.refreshDefinition(this.columns), this.tooltipModule && (this.tooltipModule.previousPoints = []), "" === this.element.id) { var e = document.getElementsByClassName("e-chart").length; this.element.id = "chart_" + this.chartid + "_" + e } this.svgId = this.stockChart ? this.stockChart.element.id + "_stockChart_chart" : this.element.id + (this.enableCanvas ? "_canvas" : "_svg") }, t.prototype.render = function () { this.svgRenderer = new JE(this.element.id), this.trigger("load", { chart: this }), this.createChartSvg(), this.setTheme(), this.markerRender = new PI(this), this.calculateAreaType(), this.calculateVisibleSeries(), this.initTechnicalIndicators(), this.initTrendLines(), this.calculateVisibleAxis(), this.processData() }, t.prototype.getLocalizedLabel = function (e) { return this.localeObject.getConstant(e) }, t.prototype.animate = function (e) { this.redraw = !0, this.animated = !0, this.duration = e || 1e3 }, t.prototype.refreshBound = function () { if (this.legendModule && this.legendSettings.visible && this.legendModule.getLegendOptions(this.visibleSeries, this), this.calculateStackValues(), this.calculateBounds(), this.stockChart && !this.stockChart.rangeFound && (this.stockChart.enablePeriodSelector || this.stockChart.enableSelector)) return null; this.renderElements(), Oi("chartmeasuretext") }, t.prototype.calculateStackValues = function () { for (var e, t = !1, i = 0, n = this.visibleSeries.length; i < n; i++)(e = this.visibleSeries[i]).position = e.rectCount = void 0, -1 === e.type.indexOf("Stacking") && (-1 === e.drawType.indexOf("Stacking") || "PolarRadar" !== this.chartAreaType) || t || (e.calculateStackedValue(e.type.indexOf("100") > -1, this), t = !0) }, t.prototype.renderElements = function () { this.renderBorder(), this.renderTitle(), this.renderAreaBorder(), this.renderSeriesElements(this.renderAxes()), this.renderLegend(), this.applyZoomkit(), this.performSelection(), this.setSecondaryElementPosition(), this.renderAnnotation() }, t.prototype.renderAxes = function () { this.yAxisElements = this.renderer.createGroup({ id: this.element.id + "yAxisCollection" }); var e; return this.rows.length > 0 && this.columns.length > 0 && (e = this.chartAxisLayoutPanel.renderAxes()), this.stripLineModule && this.stripLineModule.renderStripLine(this, "Behind", this.axisCollections), e }, t.prototype.renderLegend = function () { if (this.legendModule && this.legendModule.legendCollections.length) { this.legendModule.calTotalPage = !0; var e = this.legendSettings.border.width, t = this.legendModule.legendBounds, i = new ej(t.x, t.y, t.width, t.height); this.enableCanvas && (i = new ej(i.x - e / 2, i.y - e / 2, i.width + e, i.height + e), this.renderer.canvasClip(i)), this.legendModule.renderLegend(this, this.legendSettings, t), this.enableCanvas && this.renderer.canvasRestore() } this.redraw || (this.stockChart ? Sn(this.stockChart.chartObject.id) || this.stockChart.mainObject.appendChild(this.svgObject) : this.element.appendChild(this.svgObject)) }, t.prototype.setSecondaryElementPosition = function () { var e = Sn(this.element.id + "_Secondary_Element"); if (e) { var t = this.element.getBoundingClientRect(), i = Sn(this.svgId).getBoundingClientRect(); e.style.left = Math.max(i.left - t.left, 0) + "px", e.style.top = Math.max(i.top - t.top, 0) + "px" } }, t.prototype.initializeModuleElements = function () { this.dataLabelCollections = []; var e = this.element.id; this.series.length && (this.seriesElements = "Scatter" === this.series[0].type || "Bubble" === this.series[0].type ? this.svgRenderer.createGroup({ id: e + "SeriesCollection" }) : this.renderer.createGroup({ id: e + "SeriesCollection" })), this.indicators.length && (this.indicatorElements = this.renderer.createGroup({ id: e + "IndicatorCollection" })), this.hasTrendlines() && (this.trendLineElements = this.renderer.createGroup({ id: e + "TrendLineCollection" })), this.dataLabelElements = this.renderer.createGroup({ id: e + "DataLabelCollection" }) }, t.prototype.hasTrendlines = function () { for (var e, t = 0, i = this.series; t < i.length; t++) { if (e = !!i[t].trendlines.length) break } return e }, t.prototype.renderSeriesElements = function (e) { this.initializeModuleElements(); var t = this.element.id; if ("g" !== this.element.tagName) { var i = Zn(this.redraw, t + "_Secondary_Element") || this.createElement("div"); i.id = t + "_Secondary_Element", i.setAttribute("style", "position: relative"), kn(!1, this.element, i, this.redraw) } if (this.enableCanvas) { var n = document.getElementById(t + "_Secondary_Element"); n = n || this.createElement("div", { id: t + "_Secondary_Element", attrs: { style: "position: relative; left:0px; top:0px" } }); var r = this.svgRenderer.createSvg({ id: t + "_tooltip_svg", width: this.availableSize.width, height: this.availableSize.height }); r.setAttribute("style", "position: absolute; pointer-events: none"), n.appendChild(r) } this.tooltip.enable && kn(this.enableCanvas, this.svgObject, this.renderer.createGroup({ id: t + "_UserInteraction", style: "pointer-events:none;" }), this.redraw), this.rows.length > 0 && this.columns.length > 0 && (this.initializeIndicator(), this.initializeTrendLine(), this.renderSeries(), this.appendElementsAfterSeries(e)) }, t.prototype.renderSeries = function () { for (var e = 0, t = this.visibleSeries; e < t.length; e++) { var i = t[e]; i.visible && (sn(i), this.enableCanvas && (this.renderCanvasSeries(i), this.renderer.canvasClip(this.chartAxisLayoutPanel.seriesClipRect)), i.renderSeries(this), this.enableCanvas && this.renderer.canvasRestore()) } var n = { id: this.element.id + "_ChartAreaClipRect_", x: this.chartAxisLayoutPanel.seriesClipRect.x, y: this.chartAxisLayoutPanel.seriesClipRect.y, width: this.chartAxisLayoutPanel.seriesClipRect.width, height: this.chartAxisLayoutPanel.seriesClipRect.height, fill: "transparent", "stroke-width": 1, stroke: "Gray" }; this.enableCanvas || this.seriesElements.appendChild(mn(this.redraw, n, this.renderer)); var r = document.getElementById(this.element.id + "_series_svg"); r ? kn(!1, r, this.seriesElements, this.redraw) : kn(this.enableCanvas, this.svgObject, this.seriesElements, this.redraw) }, t.prototype.renderCanvasSeries = function (e) { var t, i; if ("Bubble" === e.type || "Scatter" === e.type) { t = t || this.svgRenderer.createSvg({ id: this.element.id + "_series_svg", width: this.availableSize.width, height: this.availableSize.height }), (i = i || this.createElement("div", { id: this.element.id + "_series" })).setAttribute("style", "position: absolute"); var n = document.getElementById(this.element.id + "_Secondary_Element"); i.appendChild(t), n.appendChild(i) } t = !this.enableCanvas || "Bubble" !== e.type && "Scatter" !== e.type ? this.svgObject : t, (!this.enableCanvas || "Bubble" !== e.type && "Scatter" !== e.type) && this.enableCanvas }, t.prototype.initializeIndicator = function () { for (var e = 0, t = this.indicators; e < t.length; e++) { var i = t[e]; this[an(i.type) + "IndicatorModule"] && this[an(i.type) + "IndicatorModule"].createIndicatorElements(this, i, i.index) } this.indicatorElements && kn(this.enableCanvas, this.svgObject, this.indicatorElements, this.redraw) }, t.prototype.initializeTrendLine = function () { for (var e = 0, t = this.visibleSeries; e < t.length; e++) { var i = t[e]; i.trendlines.length && this.trendLineModule.getTrendLineElements(i, this) } this.trendLineElements && kn(this.enableCanvas, this.svgObject, this.trendLineElements, this.redraw) }, t.prototype.appendElementsAfterSeries = function (e) { "PolarRadar" === this.chartAreaType && kn(this.enableCanvas, this.svgObject, this.yAxisElements, this.redraw), kn(this.enableCanvas, this.svgObject, e, this.redraw), (this.zoomModule && this.zoomSettings.enableScrollbar && this.scrollElement.childElementCount || this.scrollElement && this.scrollElement.childElementCount) && kn(!1, Sn(this.element.id + "_Secondary_Element"), this.scrollElement, this.redraw), this.stripLineModule && this.stripLineModule.renderStripLine(this, "Over", this.axisCollections), this.tooltip.enable || kn(this.enableCanvas, this.svgObject, this.renderer.createGroup({ id: this.element.id + "_UserInteraction", style: "pointer-events:none;" }), this.redraw), this.stockChart && this.stockChart.calculateStockEvents() }, t.prototype.applyZoomkit = function () { this.redraw || !this.zoomModule || this.zoomSettings.enablePan && !this.zoomModule.performedUI || this.zoomModule.applyZoomToolkit(this, this.axisCollections) }, t.prototype.renderAnnotation = function () { this.annotationModule && this.annotationModule.renderAnnotations(Sn(this.element.id + "_Secondary_Element")) }, t.prototype.performSelection = function () { var e = []; this.selectionModule && (e = h([], this.selectionModule.selectedDataIndexes, null, !0), this.selectionModule.invokeSelection(this)), e.length > 0 && (this.selectionModule.selectedDataIndexes = e, this.selectionModule.redrawSelection(this, this.selectionMode)) }, t.prototype.processData = function (e) { void 0 === e && (e = !0), this.visibleSeriesCount = 0; for (var t = !0, i = 0, n = this.visibleSeries; i < n.length; i++) { var r = n[i]; r.visible || this.legendSettings.visible ? "Indicator" !== r.category && "TrendLine" !== r.category && this.initializeDataModule(r) : this.visibleSeriesCount++ } for (var o = 0, s = this.indicators; o < s.length; o++) { var a = s[o]; if (a.dataSource) { var l = a; this.initializeDataModule(l), t = !1 } } e && (!this.visibleSeries.length || this.visibleSeriesCount === this.visibleSeries.length && t) && (this.refreshBound(), this.trigger("loaded", { chart: this.isBlazor ? {} : this })) }, t.prototype.initializeDataModule = function (e) { e.xData = [], e.yData = [], e.dataModule = new EI(e.dataSource || this.dataSource, e.query), e.points = [], e.refreshDataManager(this) }, t.prototype.calculateBounds = function () { var e = this.margin, t = 0, i = 0, n = 0, r = e.left, o = this.availableSize.width - r - e.right - this.border.width; if (this.titleCollection = [], this.subTitleCollection = [], this.title && (this.titleCollection = ir(this.title, this.titleStyle, o), t = xi(this.title, this.titleStyle).height * this.titleCollection.length + 15, this.subTitle)) { for (var s = 0, a = 0, l = this.titleCollection; a < l.length; a++) { s = (n = xi(l[a], this.titleStyle).width) > s ? n : s } this.subTitleCollection = ir(this.subTitle, this.subTitleStyle, s), i = xi(this.subTitle, this.subTitleStyle).height * this.subTitleCollection.length + 15 } var h = e.top + i + t + .5 * this.chartArea.border.width, d = this.availableSize.height - h - this.border.width - e.bottom; this.initialClipRect = new ej(r, h, o, d), this.legendModule && this.legendModule.calculateLegendBounds(this.initialClipRect, this.availableSize), this.chartAxisLayoutPanel.measureAxis(this.initialClipRect) }, t.prototype.print = function (e) { new TR(this).print(e) }, t.prototype.initTrendLines = function () { for (var e = 0, t = this.visibleSeries; e < t.length; e++)for (var i = t[e], n = 0, r = 0, o = i.trendlines; r < o.length; r++) { var s = o[r]; an(s.type); this.trendLineModule && (s.index = n, s.sourceIndex = i.index, this.trendLineModule.initSeriesCollection(s, this), s.targetSeries && (s.targetSeries.xAxisName = i.xAxisName, s.targetSeries.yAxisName = i.yAxisName, this.visibleSeries.push(s.targetSeries))), n++ } }, t.prototype.calculateAreaType = function () { var e = this.series[0]; this.chartArea.border.width = this.stockChart ? 0 : this.chartArea.border.width, e && (this.requireInvertedAxis = -1 !== e.type.indexOf("Bar") && !this.isTransposed || -1 === e.type.indexOf("Bar") && this.isTransposed && "PolarRadar" !== this.chartAreaType), this.chartAxisLayoutPanel = "PolarRadar" === this.chartAreaType ? this.polarSeriesModule || this.radarSeriesModule : new fI(this) }, t.prototype.calculateVisibleAxis = function () { var e, t = [this.primaryXAxis, this.primaryYAxis]; t = "Cartesian" === this.chartAreaType ? t.concat(this.axes) : t, this.paretoSeriesModule && "Pareto" === this.series[0].type && (t = t.concat(this.paretoSeriesModule.paretoAxes)), this.axisCollections = [], this.zoomModule && (this.zoomModule.isPanning = this.zoomModule.isAxisZoomed(t) && this.zoomSettings.enablePan, this.svgObject.setAttribute("cursor", this.zoomModule.isPanning ? "pointer" : "auto"), this.scrollBarModule && (this.scrollBarModule.axes = t)), this.scrollSettingEnabled && this.scrollBarModule && (this.scrollBarModule.axes = t); for (var i = 0, n = t.length; i < n; i++) { (e = t[i]).series = [], e.labels = []; for (var r = 0, o = this.visibleSeries; r < o.length; r++) { var s = o[r]; this.initAxis(s, e, !0) } for (var a = 0, l = this.indicators; a < l.length; a++) { var h = l[a]; this.initAxis(h, e, !1) } this.scrollBarModule && !e.zoomingScrollBar && this.scrollBarModule.injectTo(e, this), null != e.orientation && this.axisCollections.push(e) } this.rows.length > 0 && this.columns.length > 0 && this.chartAxisLayoutPanel.measure() }, t.prototype.initAxis = function (e, t, i) { e.xAxisName === t.name || null == e.xAxisName && "primaryXAxis" === t.name ? (t.orientation = this.requireInvertedAxis ? "Vertical" : "Horizontal", e.xAxis = t, i && t.series.push(e)) : (e.yAxisName === t.name || null == e.yAxisName && "primaryYAxis" === t.name) && (t.orientation = this.requireInvertedAxis ? "Horizontal" : "Vertical", e.yAxis = t, i && t.series.push(e)) }, t.prototype.initTechnicalIndicators = function () { for (var e = 0, t = 0, i = this.indicators; t < i.length; t++) { var n = i[t], r = n, o = an(r.type); if (this[o + "IndicatorModule"]) { r.index = e, this[o + "IndicatorModule"].initSeriesCollection(r, this); for (var s = 0, a = r.targetSeries; s < a.length; s++) { var l = a[s]; (n.seriesName || n.dataSource) && this.visibleSeries.push(l) } } e++ } }, t.prototype.refreshTechnicalIndicator = function (e) { if (this.indicators.length) { if (e instanceof AI && "Indicator" !== e.category) for (var t = 0, i = this.indicators; t < i.length; t++) { var n = i[t]; n.seriesName !== e.name || n.dataSource || n.setDataSource(e, this) } else e instanceof HI && e.setDataSource(e instanceof AI ? e : null, this) } }, t.prototype.calculateVisibleSeries = function () { var e, t; this.visibleSeries = []; for (var i = this.palettes.length ? this.palettes : Ci(this.theme), n = i.length, r = 0, o = (t = this.series.sort(function (e, t) { return e.zOrder - t.zOrder })).length; r < o; r++) { switch (e = t[r], e.category = "Pareto" === t[0].type ? "Pareto" : "Series", e.index = r, e.interior = e.fill || i[r % n], e.type) { case "Bar": case "StackingBar": case "StackingBar100": if (-1 === t[0].type.indexOf("Bar")) continue; break; case "Polar": case "Radar": if ("PolarRadar" !== this.chartAreaType) continue; if ("PolarRadar" === this.chartAreaType && (null === e.xAxisName && null !== e.yAxisName || null !== e.xAxisName && null === e.yAxisName || null !== e.xAxisName && null !== e.yAxisName)) continue; break; case "Pareto": this.visibleSeries.push(e), this.paretoSeriesModule.initSeries(e, this); continue; default: if ("PolarRadar" === this.chartAreaType || t[0].type.indexOf("Bar") > -1) continue }this.visibleSeries.push(e), t[r] = e } }, t.prototype.renderTitle = function () { var e, t = this.margin; if (this.title) { var i = this.titleStyle.textAlignment, n = "Near" === i ? "start" : "Far" === i ? "end" : "middle", r = xi(this.title, this.titleStyle); e = new ej(t.left, 0, this.availableSize.width - t.left - t.right, 0); var o = new nj(this.element.id + "_ChartTitle", nr(e, this.titleStyle), this.margin.top + 3 * r.height / 4, n, this.titleCollection, "", "auto"), s = Zn(this.redraw, this.element.id + "_ChartTitle", o, this.renderer) || $n(this.renderer, o, this.titleStyle, this.titleStyle.color || this.themeStyle.chartTitle, this.svgObject); s && (s.setAttribute("aria-label", this.description || this.title), s.setAttribute("tabindex", this.tabIndex.toString())), this.subTitle && this.renderSubTitle(o) } }, t.prototype.renderSubTitle = function (e) { for (var t, i = 0, n = 0, r = this.titleStyle.textAlignment, o = 0, s = this.titleCollection; o < s.length; o++) { i = (n = xi(s[o], this.titleStyle).width) > i ? n : i } var a = xi(this.subTitle, this.subTitleStyle); t = new ej("Center" === r ? e.x - .5 * i : "Far" === r ? e.x - i : e.x, 0, i, 0); var l = new nj(this.element.id + "_ChartSubTitle", nr(t, this.subTitleStyle), e.y * e.text.length + 3 * a.height / 4 + 10, function (e) { return "Near" === e ? "start" : "Far" === e ? "end" : "middle" }(this.subTitleStyle.textAlignment), this.subTitleCollection, "", "auto"), h = Zn(this.redraw, this.element.id + "_ChartSubTitle", l, this.renderer) || $n(this.renderer, l, this.subTitleStyle, this.subTitleStyle.color || this.themeStyle.chartTitle, this.svgObject); h && (h.setAttribute("aria-label", this.description || this.subTitle), h.setAttribute("tabindex", this.tabIndex.toString())) }, t.prototype.renderBorder = function () { var e = this.border.width, t = new aI(this.element.id + "_ChartBorder", this.background || this.themeStyle.background, this.border, 1, new ej(.5 * e, .5 * e, this.availableSize.width - e, this.availableSize.height - e)); this.htmlObject = Zn(this.redraw, this.element.id + "_ChartBorder", t, this.renderer) || this.renderer.drawRectangle(t), kn(this.enableCanvas, this.svgObject, this.htmlObject, this.redraw) }, t.prototype.renderAreaBorder = function () { if ("PolarRadar" === this.chartAreaType) return null; var e = Sn(this.element.id + "_ChartAreaBorder"), t = e ? new ej(+e.getAttribute("x"), +e.getAttribute("y"), +e.getAttribute("width"), +e.getAttribute("height")) : null, i = new aI(this.element.id + "_ChartAreaBorder", this.chartArea.background, { width: this.chartArea.border.width, color: this.chartArea.border.color || this.themeStyle.areaBorder }, this.chartArea.opacity, this.chartAxisLayoutPanel.seriesClipRect); this.htmlObject = this.renderer.drawRectangle(i), kn(this.enableCanvas, this.svgObject, this.htmlObject, this.redraw, !0, "x", "y", null, null, !0, !0, t), this.htmlObject = null }, t.prototype.addSeries = function (e) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; n = new AI(this, "series", n), this.series.push(n) } this.refresh() }, t.prototype.removeSeries = function (e) { this.series.splice(e, 1), this.refresh() }, t.prototype.destroy = function () { this.scrollBarModule && this.scrollBarModule.destroy(), this.markerRender && (this.markerRender.removeEventListener(), this.markerRender = null), this.unWireEvents(), e.prototype.destroy.call(this), this.enableCanvas || (this.removeSvg(), this.svgObject = null), this.horizontalAxes = [], this.verticalAxes = [], this.visibleSeries = [], this.axisCollections = [], this.chartAxisLayoutPanel = null, this.dataLabelCollections = null, this.dataLabelElements = null, this.yAxisElements = null }, t.prototype.getModuleName = function () { return "chart" }, t.prototype.getPersistData = function () { return this.addOnPersist(["loaded", "animationComplete", "primaryXAxis", "primaryYAxis"]) }, t.prototype.createChartSvg = function () { this.removeSvg(), tr(this) }, t.prototype.unWireEvents = function () { var e = uw.touchStartEvent, t = uw.touchMoveEvent, i = uw.touchEndEvent, n = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.remove(this.element, e, this.chartOnMouseDown), Kv.remove(this.element, t, this.mouseMove), Kv.remove(this.element, i, this.mouseEnd), Kv.remove(this.element, "click", this.chartOnMouseClick), Kv.remove(this.element, "contextmenu", this.chartRightClick), Kv.remove(this.element, n, this.mouseLeave), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.resizeBound), this.touchObject && (this.touchObject.destroy(), this.touchObject = null) }, t.prototype.wireEvents = function () { var e = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.add(this.element, uw.touchStartEvent, this.chartOnMouseDown, this), Kv.add(this.element, uw.touchMoveEvent, this.mouseMove, this), Kv.add(this.element, uw.touchEndEvent, this.mouseEnd, this), Kv.add(this.element, "click", this.chartOnMouseClick, this), Kv.add(this.element, "contextmenu", this.chartRightClick, this), Kv.add(this.element, e, this.mouseLeave, this), this.resizeBound = this.chartResize.bind(this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.resizeBound), this.longPressBound = this.longPress.bind(this), this.touchObject = new yb(this.element, { tapHold: this.longPressBound, tapHoldThreshold: 500 }), this.setStyle(this.element) }, t.prototype.chartRightClick = function (e) { return !this.crosshair.enable || !this.crosshairModule || 2 !== e.buttons && 0 !== e.which && "touch" !== e.pointerType || (e.preventDefault(), e.stopPropagation(), !1) }, t.prototype.setStyle = function (e) { var t = this.zoomSettings, i = t.enableSelectionZooming || t.enablePinchZooming || "None" !== this.selectionMode || this.crosshair.enable; e.style.touchAction = i ? "none" : "element", e.style.msTouchAction = i ? "none" : "element", e.style.msContentZooming = "none", e.style.msUserSelect = "none", e.style.webkitUserSelect = "none", e.style.position = "relative", e.style.display = "block", e.style.overflow = "hidden" }, t.prototype.isOrientation = function () { return "orientation" in window && "onorientationchange" in window }, t.prototype.longPress = function (e) { return this.mouseX = e && e.originalEvent.changedTouches ? e.originalEvent.changedTouches[0].clientX : 0, this.mouseY = e && e.originalEvent.changedTouches ? e.originalEvent.changedTouches[0].clientY : 0, this.startMove = !0, this.setMouseXY(this.mouseX, this.mouseY), this.notify("tapHold", e), !1 }, t.prototype.setMouseXY = function (e, t) { var i = Sn(this.svgId).getBoundingClientRect(), n = this.element.getBoundingClientRect(); this.mouseY = t - n.top - Math.max(i.top - n.top, 0), this.mouseX = e - n.left - Math.max(i.left - n.left, 0) }, t.prototype.export = function (e, t) { this.exportModule && this.exportModule.export(e, t) }, t.prototype.chartResize = function (e) { var t = this; this.animateSeries = !1; var i = { chart: this.isBlazor ? {} : this, name: "resized", currentSize: new $E(0, 0), previousSize: new $E(this.availableSize.width, this.availableSize.height) }; return this.resizeTo && clearTimeout(this.resizeTo), this.resizeTo = setTimeout(function () { t.isDestroyed || t.stockChart ? clearTimeout(t.resizeTo) : (t.createChartSvg(), i.currentSize = t.availableSize, t.trigger("resized", i), t.refreshAxis(), t.refreshBound(), t.trigger("loaded", { chart: t.isBlazor ? {} : t })) }, 500), !1 }, t.prototype.mouseMove = function (e) { var t, i, n; return "touchmove" === e.type ? (this.isTouch = !0, t = (n = e).changedTouches[0].clientX, i = n.changedTouches[0].clientY) : (this.isTouch = "touch" === e.pointerType || "2" === e.pointerType || this.isTouch, t = e.clientX, i = e.clientY), this.setMouseXY(t, i), this.chartOnMouseMove(e), !1 }, t.prototype.mouseLeave = function (e) { var t, i, n; return "touchleave" === e.type ? (this.isTouch = !0, t = (n = e).changedTouches[0].clientX, i = n.changedTouches[0].clientY) : (this.isTouch = "touch" === e.pointerType || "2" === e.pointerType, t = e.clientX, i = e.clientY), this.setMouseXY(t, i), this.chartOnMouseLeave(e), !1 }, t.prototype.chartOnMouseLeave = function (e) { var t = e.target, i = uw.isPointer ? "pointerleave" : "mouseleave"; return this.trigger(xj, { target: t.id, x: this.mouseX, y: this.mouseY }), this.isChartDrag = this.isPointMouseDown = !1, this.notify(i, e), !1 }, t.prototype.chartOnMouseClick = function (e) { var t = e.target; return this.trigger(Sj, { target: t.id, x: this.mouseX, y: this.mouseY }), this.pointClick && this.triggerPointEvent("pointClick"), this.notify("click", e), !1 }, t.prototype.triggerPointEvent = function (e) { var t = new yI(this).getData(); t.series && t.point && this.trigger(e, { series: this.isBlazor ? {} : t.series, point: t.point, seriesIndex: t.series.index, pointIndex: t.point.index, x: this.mouseX, y: this.mouseY }) }, t.prototype.chartOnMouseMove = function (e) { var t = e.target; return this.trigger(Mj, { target: t.id, x: this.mouseX, y: this.mouseY }), this.pointMove && this.triggerPointEvent("pointMove"), this.isTouch || (this.titleTooltip(e, this.mouseX, this.mouseY), this.axisTooltip(e, this.mouseX, this.mouseY)), this.dataEditingModule && this.dataEditingModule.pointMouseMove(e), this.notify(uw.touchMoveEvent, e), this.isTouch = !1, !1 }, t.prototype.titleTooltip = function (e, t, i, n) { var r = e.target.id; if ((r === this.element.id + "_ChartTitle" || r === this.element.id + "_ChartSubTitle") && e.target.textContent.indexOf("...") > -1) { zi(r === this.element.id + "_ChartTitle" ? this.title : this.subTitle, t, i, this.element.offsetWidth, this.element.id + "_EJ2_Title_Tooltip", Sn(this.element.id + "_Secondary_Element"), n) } else Oi(this.element.id + "_EJ2_Title_Tooltip") }, t.prototype.axisTooltip = function (e, t, i, n) { var r = e.target.id; (r.indexOf("AxisLabel") > -1 || r.indexOf("Axis_MultiLevelLabel") > -1) && e.target.textContent.indexOf("...") > -1 ? zi(this.findAxisLabel(r), t, i, this.element.offsetWidth, this.element.id + "_EJ2_AxisLabel_Tooltip", Sn(this.element.id + "_Secondary_Element"), n) : Oi(this.element.id + "_EJ2_AxisLabel_Tooltip") }, t.prototype.findAxisLabel = function (e) { var t; return e.indexOf("AxisLabel") > -1 ? (t = e.replace(this.element.id, "").replace("AxisLabel_", "").split("_"), this.axisCollections[parseInt(t[0], 10)].visibleLabels[parseInt(t[1], 10)].originalText) : (t = e.replace(this.element.id, "").replace("Axis_MultiLevelLabel_Level_", "").replace("Text_", "").split("_"), this.axisCollections[parseInt(t[0], 10)].multiLevelLabels[parseInt(t[1], 10)].categories[parseInt(t[2], 10)].text) }, t.prototype.chartOnMouseDown = function (e) { var t, i, n, r, o = uw.isDevice ? 20 : 30, s = this.element.getBoundingClientRect(), a = e.target; this.trigger(Tj, { target: a.id, x: this.mouseX, y: this.mouseY }), "touchstart" === e.type ? (this.isTouch = !0, t = (r = e).changedTouches[0].clientX, i = r.changedTouches[0].clientY, n = r.target) : (this.isTouch = "touch" === e.pointerType, t = e.clientX, i = e.clientY, n = e.target); var l = Sn(this.svgId).getBoundingClientRect(); return this.mouseDownX = this.previousMouseMoveX = t - s.left - Math.max(l.left - s.left, 0), this.mouseDownY = this.previousMouseMoveY = i - s.top - Math.max(l.top - s.top, 0), this.isTouch && (this.isDoubleTap = (new Date).getTime() < this.threshold && -1 === n.id.indexOf(this.element.id + "_Zooming_") && (this.mouseDownX - o >= this.mouseX || this.mouseDownX + o >= this.mouseX) && (this.mouseDownY - o >= this.mouseY || this.mouseDownY + o >= this.mouseY) && (this.mouseX - o >= this.mouseDownX || this.mouseX + o >= this.mouseDownX) && (this.mouseY - o >= this.mouseDownY || this.mouseY + o >= this.mouseDownY)), this.dataEditingModule && this.dataEditingModule.pointMouseDown(), this.notify(uw.touchStartEvent, e), !1 }, t.prototype.mouseEnd = function (e) { var t, i, n; return "touchend" === e.type ? (i = (n = e).changedTouches[0].clientX, this.isTouch = !0, t = n.changedTouches[0].clientY) : (t = e.clientY, i = e.clientX, this.isTouch = "touch" === e.pointerType || "2" === e.pointerType), this.setMouseXY(i, t), this.chartOnMouseUp(e), !1 }, t.prototype.chartOnMouseUp = function (e) { var t = e.target; return this.trigger(Dj, { target: t.id, x: this.mouseX, y: this.mouseY }), this.isChartDrag = !1, this.isTouch && (this.titleTooltip(e, this.mouseX, this.mouseY, this.isTouch), this.axisTooltip(e, this.mouseX, this.mouseY, this.isTouch), this.threshold = (new Date).getTime() + 300), this.dataEditingModule && this.dataEditingModule.pointMouseUp(), this.enableCanvas || this.seriesElements.removeAttribute("clip-path"), this.notify(uw.touchEndEvent, e), !1 }, t.prototype.setCulture = function () { this.intl = new Gw, this.setLocaleConstants(), this.localeObject = new pb(this.getModuleName(), this.defaultLocalConstants, this.locale) }, t.prototype.setAnnotationValue = function (e, t) { var i, n = Sn(this.element.id + "_Annotation_Collections"), r = this.annotations[e]; null !== t && (r.content = t, n ? (Oi(this.element.id + "_Annotation_" + e), i = this.createElement("div"), this.annotationModule.processAnnotation(r, e, i), n.appendChild(i.children[0])) : this.annotationModule.renderAnnotations(Sn(this.element.id + "_Secondary_Element"))) }, t.prototype.setLocaleConstants = function () { this.defaultLocalConstants = { ZoomIn: "ZoomIn", Zoom: "Zoom", ZoomOut: "ZoomOut", Pan: "Pan", Reset: "Reset", ResetZoom: "Reset Zoom" } }, t.prototype.setTheme = function () { this.themeStyle = Li(this.theme) }, t.prototype.requiredModules = function () { var e, t = this, i = [], n = this.series, r = !1, o = !1, s = !1, a = !1, l = this.zoomSettings; return this.chartAreaType = n.length > 0 && ("Polar" === n[0].type || "Radar" === n[0].type) ? "PolarRadar" : "Cartesian", this.tooltip.enable && i.push({ member: "Tooltip", args: [this] }), n.map(function (r) { t.isLegend = t.legendSettings.visible && ("" !== r.name || !!t.isLegend), e = -1 !== r.type.indexOf("100") ? r.type.replace("100", "") + "Series" : r.type + "Series", o = r.errorBar.visible || o, a = r.marker.dataLabel.visible || a, s = r.dragSettings.enable || s, i.some(function (t) { return t.member === e }) || i.push({ member: e, args: [t, n] }), "PolarRadar" === t.chartAreaType && i.push({ member: r.drawType + "Series", args: [t, n] }), "Pareto" === r.type && (i.push({ member: "ColumnSeries", args: [t, n] }), i.push({ member: "LineSeries", args: [t, n] })) }), this.findIndicatorModules(i), this.findTrendLineModules(i), i = this.findAxisModule(i), r = this.annotations.some(function (e) { return null !== e.content }), o && i.push({ member: "ErrorBar", args: [this, n] }), this.isLegend && i.push({ member: "Legend", args: [this] }), this.enableExport && i.push({ member: "Export", args: [this] }), "PolarRadar" !== this.chartAreaType && !this.scrollSettingEnabled && (l.enableSelectionZooming || l.enableMouseWheelZooming || l.enablePinchZooming || l.enablePan) && (i.push({ member: "Zoom", args: [this, this.zoomSettings] }), l.enableScrollbar && i.push({ member: "ScrollBar", args: [this] })), "None" === this.selectionMode || "PolarRadar" === this.chartAreaType && this.selectionMode.indexOf("Drag") > -1 || i.push({ member: "Selection", args: [this] }), a && i.push({ member: "DataLabel", args: [this, n] }), s && i.push({ member: "DataEditing", args: [this] }), r && i.push({ member: "Annotation", args: [this] }), "PolarRadar" !== this.chartAreaType && this.crosshair.enable && i.push({ member: "Crosshair", args: [this] }), i }, t.prototype.findAxisModule = function (e) { var t = []; t.push(this.primaryXAxis), t.push(this.primaryYAxis); for (var i = !1, n = !1, r = !1, o = !1, s = !1, a = !1, l = 0, h = t = t.concat(this.axes); l < h.length; l++) { var d = h[l]; i = "DateTime" === d.valueType || i, n = "Category" === d.valueType || n, r = "Logarithmic" === d.valueType || r, s = "DateTimeCategory" === d.valueType || s, o = this.findStriplineVisibility(d.stripLines) || o, a = d.multiLevelLabels.length > 0 || a, this.scrollSettingEnabled = !!d.scrollbarSettings.enable || this.scrollSettingEnabled } return i && e.push({ member: "DateTime", args: [this] }), n && e.push({ member: "Category", args: [this] }), r && e.push({ member: "Logarithmic", args: [this] }), o && e.push({ member: "StripLine", args: [this] }), a && e.push({ member: "MultiLevelLabel", args: [this] }), s && e.push({ member: "DateTimeCategory", args: [this] }), this.scrollSettingEnabled && e.push({ member: "ScrollBar", args: [this] }), e }, t.prototype.findIndicatorModules = function (e) { var t, i, n = this.indicators; if (this.indicators.length) { e.push({ member: "LineSeries", args: [this] }), n.map(function (e) { t = t || "Macd" === e.type, i = i || "BollingerBands" === e.type }), t && e.push({ member: "ColumnSeries", args: [this] }), i && e.push({ member: "RangeAreaSeries", args: [this] }); for (var r = 0, o = this.indicators; r < o.length; r++) { var s = o[r]; e.push({ member: s.type + "Indicator", args: [this] }) } } }, t.prototype.findTrendLineModules = function (e) { for (var t, i, n = function (n) { var o; n.trendlines.map(function (e) { o = o || e.marker.visible, t = !(!t && "Linear" !== e.type && "MovingAverage" !== e.type), i = !(!i && t) }), o && e.push({ member: "Marker", args: [r, n] }) }, r = this, o = 0, s = this.series; o < s.length; o++) { n(s[o]) } (t || i) && e.push({ member: "TrendLine", args: [this] }), t && e.push({ member: "LineSeries", args: [this] }), i && e.push({ member: "SplineSeries", args: [this] }) }, t.prototype.findStriplineVisibility = function (e) { for (var t = !1, i = 0, n = e; i < n.length; i++) { if (n[i].visible) { t = !0; break } } return t }, t.prototype.removeSvg = function () { if (this.redraw) return null; if (or(this), this.enableCanvas && this.svgObject && "CANVAS" === this.svgObject.tagName) return this.renderer.clearRect(new ej(0, 0, this.availableSize.width, this.availableSize.height)), k(this.svgObject), null; Oi(this.element.id + "_Secondary_Element"); var e = 0; if (this.zoomModule && this.zoomModule.pinchTarget && (this.zoomModule.pinchTarget.id = "", this.zoomModule.pinchTarget.setAttribute("opacity", "0"), this.svgObject.appendChild(this.zoomModule.pinchTarget), e = 1), this.svgObject) { for (; this.svgObject.childNodes.length > e;)this.svgObject.removeChild(this.svgObject.firstChild); this.svgObject.hasChildNodes() || !this.svgObject.parentNode || this.stockChart || k(this.svgObject) } }, t.prototype.refreshDefinition = function (e) { for (var t = 0, i = e; t < i.length; t++) { i[t].axes = [] } }, t.prototype.refreshAxis = function () { var e = this.primaryXAxis; e.rect = new ej(void 0, void 0, 0, 0), (e = this.primaryYAxis).isStack100 = !1, e.rect = new ej(void 0, void 0, 0, 0); for (var t = 0, i = this.axes; t < i.length; t++) { (e = i[t]).rect = new ej(void 0, void 0, 0, 0), e.isStack100 = !1 } if (this.paretoSeriesModule && "Pareto" === this.series[0].type) for (var n = 0, r = this.paretoSeriesModule.paretoAxes; n < r.length; n++) { (e = r[n]).rect = new ej(void 0, void 0, 0, 0), e.isStack100 = !1 } }, t.prototype.axisChange = function (e) { return !(!e.name && !e.valueType) && (this.refreshDefinition(this.columns), this.refreshDefinition(this.rows), this.calculateVisibleAxis(), this.processData(), !0) }, t.prototype.getVisibleSeries = function (e, t) { for (var i = 0, n = e; i < n.length; i++) { var r = n[i]; if (t === r.index) return r } return null }, t.prototype.clearVisibleAxisLabels = function () { for (var e = [this.primaryXAxis, this.primaryYAxis], t = 0, i = (e = "Cartesian" === this.chartAreaType ? e.concat(this.axes) : e).length; t < i; t++)e[t].labels = [] }, t.prototype.onPropertyChanged = function (t, i) { var n = !1, r = !1; if ((1 !== Object.keys(t).length || "indicators" !== Object.keys(t)[0]) && (this.animateSeries = !1, !this.delayRedraw)) { for (var o = 0, s = Object.keys(t); o < s.length; o++) { switch (s[o]) { case "primaryXAxis": r = this.axisChange(t.primaryXAxis), t.primaryXAxis.edgeLabelPlacement && (n = !0), t.primaryXAxis.crosshairTooltip || (r = !0); break; case "primaryYAxis": r = this.axisChange(t.primaryYAxis), t.primaryYAxis.edgeLabelPlacement && (n = !0), t.primaryYAxis.crosshairTooltip || (r = !0); break; case "axes": for (var a = 0, l = Object.keys(t.axes); a < l.length; a++) { var d = l[a]; r = r || this.axisChange(t.axes[d]), t.axes[d].crosshairTooltip || (r = !0) } break; case "height": case "width": this.createChartSvg(), r = !0; break; case "subTitle": case "title": r = !0; break; case "titleStyle": t.titleStyle && (t.titleStyle.size || t.titleStyle.textOverflow) ? r = !0 : n = !0; break; case "subTitleStyle": t.subTitleStyle && (t.subTitleStyle.size || t.subTitleStyle.textOverflow) ? r = !0 : n = !0; break; case "border": n = !0; break; case "dataSource": this.processData(!1), r = !0; break; case "series": for (var c = this.series.length, p = !1, u = void 0, g = 0; g < c; g++)(u = t.series[g]) && (u.dataSource || u.xName || u.yName || u.size || u.high || u.low || u.open || u.close || u.fill || u.name) && (h(this.getVisibleSeries(this.visibleSeries, g), u, null, !0), p = !0); p && (this.calculateVisibleSeries(), this.initTechnicalIndicators(), this.initTrendLines(), this.refreshDefinition(this.columns), this.refreshDefinition(this.rows), this.calculateVisibleAxis(), this.processData(!1), r = !0); break; case "zoomSettings": (t.zoomSettings.enableScrollbar || i.zoomSettings.enableScrollbar) && (r = !0), n = !0; break; case "background": n = !0; break; case "chartArea": t.chartArea.border && t.chartArea.border.width && (r = !0), n = !0; break; case "legendSettings": t.legendSettings.background && t.legendSettings.opacity || (r = !0), n = !0; break; case "palettes": this.calculateVisibleSeries(), n = !0; break; case "selectedDataIndexes": case "selectionMode": this.selectionModule && t.selectionMode && -1 === t.selectionMode.indexOf("Drag") && this.selectionModule.redrawSelection(this, i.selectionMode); break; case "isMultiSelect": this.selectionModule && !t.isMultiSelect && this.selectionModule.selectedDataIndexes.length > 1 && this.selectionModule.redrawSelection(this, i.selectionMode); break; case "theme": this.animateSeries = !0; break; case "locale": case "currencyCode": e.prototype.refresh.call(this); break; case "tooltip": this.tooltipModule.previousPoints = [] } } !r && n && (this.removeSvg(), this.renderElements(), this.trigger("loaded", { chart: this.isBlazor ? {} : this })), r && (this.enableCanvas ? this.createChartSvg() : this.removeSvg(), this.refreshAxis(), this.refreshBound(), this.trigger("loaded", { chart: this.isBlazor ? {} : this }), this.redraw = !1, this.animated = !1) } }, AR([Y(null)], t.prototype, "width", void 0), AR([Y(null)], t.prototype, "height", void 0), AR([Y("")], t.prototype, "title", void 0), AR([Y("")], t.prototype, "dataSource", void 0), AR([U(IE.chartTitleFont, zE)], t.prototype, "titleStyle", void 0), AR([Y("")], t.prototype, "subTitle", void 0), AR([U(IE.chartSubTitleFont, zE)], t.prototype, "subTitleStyle", void 0), AR([U({}, VE)], t.prototype, "margin", void 0), AR([U({ color: "#DDDDDD", width: 0 }, BE)], t.prototype, "border", void 0), AR([Y(null)], t.prototype, "background", void 0), AR([U({ border: { color: null, width: .5 }, background: "transparent" }, FE)], t.prototype, "chartArea", void 0), AR([U({ name: "primaryXAxis" }, eI)], t.prototype, "primaryXAxis", void 0), AR([U({ name: "primaryYAxis" }, eI)], t.prototype, "primaryYAxis", void 0), AR([G([{}], qj)], t.prototype, "rows", void 0), AR([G([{}], Gj)], t.prototype, "columns", void 0), AR([G([{}], eI)], t.prototype, "axes", void 0), AR([G([{}], AI)], t.prototype, "series", void 0), AR([G([{}], zj)], t.prototype, "annotations", void 0), AR([Y([])], t.prototype, "palettes", void 0), AR([Y("Material")], t.prototype, "theme", void 0), AR([U({}, GE)], t.prototype, "tooltip", void 0), AR([U({}, ER)], t.prototype, "crosshair", void 0), AR([U({}, zI)], t.prototype, "legendSettings", void 0), AR([U({}, jR)], t.prototype, "zoomSettings", void 0), AR([Y("None")], t.prototype, "selectionMode", void 0), AR([Y(!1)], t.prototype, "isMultiSelect", void 0), AR([Y(!0)], t.prototype, "enableExport", void 0), AR([G([], HE)], t.prototype, "selectedDataIndexes", void 0), AR([Y(!1)], t.prototype, "useGroupingSeparator", void 0), AR([Y(!1)], t.prototype, "isTransposed", void 0), AR([Y(!1)], t.prototype, "enableCanvas", void 0), AR([G([], HI)], t.prototype, "indicators", void 0), AR([Y(!0)], t.prototype, "enableAnimation", void 0), AR([Y(null)], t.prototype, "description", void 0), AR([Y(1)], t.prototype, "tabIndex", void 0), AR([Y(!0)], t.prototype, "enableSideBySidePlacement", void 0), AR([X()], t.prototype, "resized", void 0), AR([X()], t.prototype, "annotationRender", void 0), AR([X()], t.prototype, "beforePrint", void 0), AR([X()], t.prototype, "loaded", void 0), AR([X()], t.prototype, "load", void 0), AR([X()], t.prototype, "animationComplete", void 0), AR([X()], t.prototype, "legendRender", void 0), AR([X()], t.prototype, "textRender", void 0), AR([X()], t.prototype, "pointRender", void 0), AR([X()], t.prototype, "seriesRender", void 0), AR([X()], t.prototype, "axisLabelRender", void 0), AR([X()], t.prototype, "axisRangeCalculated", void 0), AR([X()], t.prototype, "axisMultiLabelRender", void 0), AR([X()], t.prototype, "legendClick", void 0), AR([X()], t.prototype, "multiLevelLabelClick", void 0), AR([X()], t.prototype, "tooltipRender", void 0), AR([X()], t.prototype, "chartMouseMove", void 0), AR([X()], t.prototype, "chartMouseClick", void 0), AR([X()], t.prototype, "pointClick", void 0), AR([X()], t.prototype, "pointMove", void 0), AR([X()], t.prototype, "chartMouseLeave", void 0), AR([X()], t.prototype, "chartMouseDown", void 0), AR([X()], t.prototype, "chartMouseUp", void 0), AR([X()], t.prototype, "dragComplete", void 0), AR([X()], t.prototype, "zoomComplete", void 0), AR([X()], t.prototype, "scrollStart", void 0), AR([X()], t.prototype, "scrollEnd", void 0), AR([X()], t.prototype, "scrollChanged", void 0), AR([X()], t.prototype, "dragStart", void 0), AR([X()], t.prototype, "drag", void 0), AR([X()], t.prototype, "dragEnd", void 0), AR([Y("USD")], t.prototype, "currencyCode", void 0), t = AR([J], t) }(Kw), kR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), PR = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return kR(t, e), t.prototype.calculateDateTimeNiceInterval = function (e, t, i, n, r) { void 0 === r && (r = !0); var o, s = new Date(i), a = new Date(n), l = Math.abs((s.getTime() - a.getTime()) / 864e5); e.actualIntervalType = e.intervalType; switch (e.intervalType) { case "Years": o = this.calculateNumericNiceInterval(e, l / 365, t); break; case "Quarter": o = this.calculateNumericNiceInterval(e, l / 365 * 4, t); break; case "Months": o = this.calculateNumericNiceInterval(e, l / 30, t); break; case "Weeks": o = this.calculateNumericNiceInterval(e, l / 7, t); break; case "Days": o = this.calculateNumericNiceInterval(e, l, t); break; case "Hours": o = this.calculateNumericNiceInterval(e, 24 * l, t); break; case "Minutes": o = this.calculateNumericNiceInterval(e, 24 * l * 60, t); break; case "Seconds": o = this.calculateNumericNiceInterval(e, 24 * l * 60 * 60, t); break; case "Auto": return (o = this.calculateNumericNiceInterval(e, l / 365, t)) >= 1 ? (e.actualIntervalType = "Years", o) : (o = this.calculateNumericNiceInterval(e, l / 365 * 4, t)) >= 1 && !r ? (e.actualIntervalType = "Quarter", o) : (o = this.calculateNumericNiceInterval(e, l / 30, t)) >= 1 ? (e.actualIntervalType = "Months", o) : (o = this.calculateNumericNiceInterval(e, l / 7, t)) >= 1 && !r ? (e.actualIntervalType = "Weeks", o) : (o = this.calculateNumericNiceInterval(e, l, t)) >= 1 ? (e.actualIntervalType = "Days", o) : (o = this.calculateNumericNiceInterval(e, 24 * l, t)) >= 1 ? (e.actualIntervalType = "Hours", o) : (o = this.calculateNumericNiceInterval(e, 24 * l * 60, t)) >= 1 ? (e.actualIntervalType = "Minutes", o) : (o = this.calculateNumericNiceInterval(e, 24 * l * 60 * 60, t), e.actualIntervalType = "Seconds", o) }return o }, t.prototype.getSkeleton = function (e, t, i) { var n = e.actualIntervalType; return e.skeleton ? e.skeleton : "Years" === n ? e.isChart ? "DateTime" === e.valueType ? "y" : "yMMM" : "y" : "Quarter" === n ? "yMMM" : "Months" === n ? e.isChart ? "MMMd" : "MMM" : "Weeks" === n ? "MEd" : "Days" === n ? e.isChart ? this.getDayFormat(e, t, i) : "MMMd" : "Hours" === n ? e.isChart ? "DateTime" === e.valueType ? "Hm" : "EHm" : "h" : "Minutes" === n ? e.isChart ? "Hms" : "hm" : e.isChart ? "Hms" : "hms" }, t.prototype.getMonthFormat = function (e, t) { return new Date(e).getFullYear() === new Date(t).getFullYear() ? "MMM" : "y MMM" }, t.prototype.getDayFormat = function (e, t, i) { return "DateTime" === e.valueType ? new Date(t).getMonth() !== new Date(i).getMonth() ? "MMMd" : "d" : "yMd" }, t.prototype.findCustomFormats = function (e, t, i) { var n = e.labelFormat ? e.labelFormat : ""; return !e.isChart || e.skeleton || "Months" !== e.actualIntervalType || n || (n = "DateTime" === e.valueType ? this.getMonthFormat(t, i) : "yMMM"), n }, t }(gj), NR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), OR = function (e) { function t(t) { return e.call(this, t) || this } return NR(t, e), t.prototype.calculateRangeAndInterval = function (e, t) { this.calculateRange(t, e), this.getActualRange(t, e), this.applyRangePadding(t, e), this.calculateVisibleLabels(t, this.chart) }, t.prototype.getActualRange = function (e, t) { var i = { skeleton: "full", type: "dateTime" }, n = this.chart.intl.getDateParser(i), r = this.chart.intl.getDateFormat(i); null !== e.minimum ? this.min = Date.parse(n(r(new Date(JD.parse.parseJson({ val: e.minimum }).val)))) : null !== this.min && this.min !== Number.POSITIVE_INFINITY || (this.min = Date.parse(n(r(new Date(1970, 1, 1))))), null !== e.maximum ? this.max = Date.parse(n(r(new Date(JD.parse.parseJson({ val: e.maximum }).val)))) : null !== this.max && this.max !== Number.NEGATIVE_INFINITY || (this.max = Date.parse(n(r(new Date(1970, 5, 1))))), this.min === this.max && (this.max = this.max + 2592e6, this.min = this.min - 2592e6), e.actualRange = {}, e.doubleRange = new uj(this.min, this.max); var o = this.calculateDateTimeNiceInterval(e, t, e.doubleRange.start, e.doubleRange.end); e.interval ? e.actualRange.interval = e.interval : e.actualRange.interval = o, e.actualRange.min = e.doubleRange.start, e.actualRange.max = e.doubleRange.end }, t.prototype.applyRangePadding = function (e, t) { this.min = e.actualRange.min, this.max = e.actualRange.max; var i, n, r = e.actualRange.interval; if (!yn(e)) { var o = e.getRangePadding(this.chart); i = new Date(this.min), n = new Date(this.max); var s = e.actualIntervalType; if ("None" === o) this.min = i.getTime(), this.max = n.getTime(); else if ("Additional" === o || "Round" === o) switch (s) { case "Years": this.getYear(i, n, o, r); break; case "Months": this.getMonth(i, n, o, r); break; case "Days": this.getDay(i, n, o, r); break; case "Hours": this.getHour(i, n, o, r); break; case "Minutes": var a = i.getMinutes() / r * r, l = n.getMinutes() + (i.getMinutes() - a); "Round" === o ? (this.min = new Date(i.getFullYear(), i.getMonth(), i.getDate(), i.getHours(), a, 0).getTime(), this.max = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), l, 59).getTime()) : (this.min = new Date(i.getFullYear(), n.getMonth(), i.getDate(), i.getHours(), a + -r, 0).getTime(), this.max = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), l + r, 0).getTime()); break; case "Seconds": var h = i.getSeconds() / r * r, d = n.getSeconds() + (i.getSeconds() - h); "Round" === o ? (this.min = new Date(i.getFullYear(), i.getMonth(), i.getDate(), i.getHours(), i.getMinutes(), h, 0).getTime(), this.max = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), n.getMinutes(), d, 0).getTime()) : (this.min = new Date(i.getFullYear(), i.getMonth(), i.getDate(), i.getHours(), i.getMinutes(), h + -r, 0).getTime(), this.max = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), n.getMinutes(), d + r, 0).getTime()) } } e.actualRange.min = (e.minimum, this.min), e.actualRange.max = (e.maximum, this.max), e.actualRange.delta = e.actualRange.max - e.actualRange.min, e.doubleRange = new uj(e.actualRange.min, e.actualRange.max), this.calculateVisibleRange(t, e) }, t.prototype.getYear = function (e, t, i, n) { var r = e.getFullYear(), o = t.getFullYear(); "Additional" === i ? (this.min = new Date(r - n, 1, 1, 0, 0, 0).getTime(), this.max = new Date(o + n, 1, 1, 0, 0, 0).getTime()) : (this.min = new Date(r, 0, 0, 0, 0, 0).getTime(), this.max = new Date(o, 11, 30, 23, 59, 59).getTime()) }, t.prototype.getMonth = function (e, t, i, n) { var r = e.getMonth(), o = t.getMonth(); "Round" === i ? (this.min = new Date(e.getFullYear(), r, 0, 0, 0, 0).getTime(), this.max = new Date(t.getFullYear(), o, new Date(t.getFullYear(), t.getMonth(), 0).getDate(), 23, 59, 59).getTime()) : (this.min = new Date(e.getFullYear(), r + -n, 1, 0, 0, 0).getTime(), this.max = new Date(t.getFullYear(), o + n, 2 === o ? 28 : 30, 0, 0, 0).getTime()) }, t.prototype.getDay = function (e, t, i, n) { var r = e.getDate(), o = t.getDate(); "Round" === i ? (this.min = new Date(e.getFullYear(), e.getMonth(), r, 0, 0, 0).getTime(), this.max = new Date(t.getFullYear(), t.getMonth(), o, 23, 59, 59).getTime()) : (this.min = new Date(e.getFullYear(), e.getMonth(), r + -n, 0, 0, 0).getTime(), this.max = new Date(t.getFullYear(), t.getMonth(), o + n, 0, 0, 0).getTime()) }, t.prototype.getHour = function (e, t, i, n) { var r = e.getHours() / n * n, o = t.getHours() + (e.getHours() - r); "Round" === i ? (this.min = new Date(e.getFullYear(), e.getMonth(), e.getDate(), r, 0, 0).getTime(), this.max = new Date(t.getFullYear(), t.getMonth(), t.getDate(), o, 59, 59).getTime()) : (this.min = new Date(e.getFullYear(), e.getMonth(), e.getDate(), r + -n, 0, 0).getTime(), this.max = new Date(t.getFullYear(), t.getMonth(), t.getDate(), o + n, 0, 0).getTime()) }, t.prototype.calculateVisibleRange = function (e, t) { t.visibleRange = { min: t.actualRange.min, max: t.actualRange.max, interval: t.actualRange.interval, delta: t.actualRange.delta }; var i = !d(t.zoomingScrollBar) && t.zoomingScrollBar.isLazyLoad; (t.zoomFactor < 1 || t.zoomPosition > 0) && !i && (t.calculateVisibleRange(e), t.visibleRange.interval = t.enableAutoIntervalOnZooming ? this.calculateDateTimeNiceInterval(t, e, t.visibleRange.min, t.visibleRange.max) : t.visibleRange.interval), t.dateTimeInterval = this.increaseDateTimeInterval(t, t.visibleRange.min, t.visibleRange.interval).getTime() - t.visibleRange.min, t.triggerRangeRender(this.chart, t.visibleRange.min, t.visibleRange.max, t.visibleRange.interval) }, t.prototype.calculateVisibleLabels = function (e, t) { e.visibleLabels = []; var i, r, o = e.visibleRange.min, s = e.visibleLabels; for (yn(e) || (o = this.alignRangeStart(e, o, e.visibleRange.interval, e.actualIntervalType).getTime()); o <= e.visibleRange.max;)i = h({}, n("properties", e.labelStyle), null, !0), r = s.length ? e.visibleLabels[s.length - 1].value : o, e.format = t.intl.getDateFormat({ format: this.findCustomFormats(e, o, r), type: an(e.skeletonType), skeleton: this.getSkeleton(e, o, r) }), e.startLabel = e.format(new Date(e.visibleRange.min)), e.endLabel = e.format(new Date(e.visibleRange.max)), Fi(o, e.visibleRange) && fn(t, o, e.format(new Date(o)), i, e), o = this.increaseDateTimeInterval(e, o, e.visibleRange.interval).getTime(); "Months" !== e.actualIntervalType && "Days" !== e.actualIntervalType || !e.isChart || (e.format = t.intl.getDateFormat({ format: e.labelFormat || ("Months" !== e.actualIntervalType || e.skeleton ? "" : "y MMM"), type: an(e.skeletonType), skeleton: e.skeleton || ("Days" === e.actualIntervalType ? "MMMd" : "") })), e.getMaxLabelWidth && e.getMaxLabelWidth(this.chart) }, t.prototype.increaseDateTimeInterval = function (e, t, i) { var n = new Date(t); i = Math.ceil(i), e.visibleRange.interval = i; switch (e.actualIntervalType) { case "Years": return n.setFullYear(n.getFullYear() + i), n; case "Quarter": return n.setMonth(n.getMonth() + 3 * i), n; case "Months": return n.setMonth(n.getMonth() + i), n; case "Weeks": return n.setDate(n.getDate() + 7 * i), n; case "Days": return n.setDate(n.getDate() + i), n; case "Hours": return n.setHours(n.getHours() + i), n; case "Minutes": return n.setMinutes(n.getMinutes() + i), n; case "Seconds": return n.setSeconds(n.getSeconds() + i), n }return n }, t.prototype.alignRangeStart = function (e, t, i, n) { var r = new Date(t); switch (e.actualIntervalType) { case "Years": var o = Math.floor(Math.floor(r.getFullYear() / i) * i); return r = new Date(o, r.getMonth(), r.getDate(), 0, 0, 0); case "Months": var s = Math.floor(Math.floor(r.getMonth() / i) * i); return r = new Date(r.getFullYear(), s, r.getDate(), 0, 0, 0); case "Days": var a = Math.floor(Math.floor(r.getDate() / i) * i); return r = new Date(r.getFullYear(), r.getMonth(), a, 0, 0, 0); case "Hours": var l = Math.floor(Math.floor(r.getHours() / i) * i); return r = new Date(r.getFullYear(), r.getMonth(), r.getDate(), l, 0, 0); case "Minutes": var h = Math.floor(Math.floor(r.getMinutes() / i) * i); return r = new Date(r.getFullYear(), r.getMonth(), r.getDate(), r.getHours(), h, 0, 0); case "Seconds": var d = Math.floor(Math.floor(r.getSeconds() / i) * i); return r = new Date(r.getFullYear(), r.getMonth(), r.getDate(), r.getHours(), r.getMinutes(), d, 0) }return r }, t.prototype.getModuleName = function () { return "DateTime" }, t.prototype.destroy = function (e) { }, t }(PR), RR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), zR = function (e) { function t(t) { return e.call(this, t) || this } return RR(t, e), t.prototype.calculateRangeAndInterval = function (e, t) { this.calculateRange(t, e), this.getActualRange(t, e), this.applyRangePadding(t, e), this.calculateVisibleLabels(t) }, t.prototype.getActualRange = function (e, t) { this.initializeDoubleRange(e), e.actualRange = {}, e.interval ? e.actualRange.interval = Math.ceil(e.interval) : e.actualRange.interval = Math.max(1, Math.floor(e.doubleRange.delta / vn(t, e))), e.actualRange.min = e.doubleRange.start, e.actualRange.max = e.doubleRange.end, e.actualRange.delta = e.doubleRange.delta }, t.prototype.applyRangePadding = function (e, t) { var i = "BetweenTicks" === e.labelPlacement && "PolarRadar" !== this.chart.chartAreaType ? .5 : 0; i > 0 ? (e.actualRange.min -= i, e.actualRange.max += i) : e.actualRange.max += e.actualRange.max ? 0 : .5, e.doubleRange = new uj(e.actualRange.min, e.actualRange.max), e.actualRange.delta = e.doubleRange.delta, this.calculateVisibleRange(t, e) }, t.prototype.calculateVisibleLabels = function (e) { e.visibleLabels = []; var t, i = Math.ceil(e.visibleRange.min); (e.zoomFactor < 1 || e.zoomPosition > 0) && (i = e.visibleRange.min - e.visibleRange.min % e.visibleRange.interval); var r; for (e.startLabel = e.labels[Math.round(e.visibleRange.min)], e.endLabel = e.labels[Math.floor(e.visibleRange.max)]; i <= e.visibleRange.max; i += e.visibleRange.interval)t = h({}, n("properties", e.labelStyle), null, !0), Fi(i, e.visibleRange) && e.labels.length > 0 && (r = Math.round(i), fn(this.chart, r, e.labels[r] ? e.labels[r].toString() : r.toString(), t, e)); e.getMaxLabelWidth && e.getMaxLabelWidth(this.chart) }, t.prototype.getModuleName = function () { return "Category" }, t.prototype.destroy = function (e) { }, t }(PR), BR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), FR = function (e) { function t(t) { return e.call(this, t) || this } return BR(t, e), t.prototype.calculateRangeAndInterval = function (e, t) { this.calculateRange(t, e), this.getActualRange(t, e), this.calculateVisibleRange(e, t), this.calculateVisibleLabels(t, this.chart) }, t.prototype.getActualRange = function (e, t) { this.initializeDoubleRange(e), this.min = this.min < 0 ? 0 : this.min; var i = Ri(this.min, e.logBase); i = isFinite(i) ? i : this.min; var n = Ri(this.max, e.logBase); n = isFinite(i) ? n : this.max, this.min = Math.floor(i / 1), this.max = Math.ceil(n / 1), e.actualRange.interval = e.interval || this.calculateLogNiceInterval(this.max - this.min, t, e), e.actualRange.min = this.min, e.actualRange.max = this.max, e.actualRange.delta = this.max - this.min }, t.prototype.calculateVisibleRange = function (e, t) { t.visibleRange = { interval: t.actualRange.interval, max: t.actualRange.max, min: t.actualRange.min, delta: t.actualRange.delta }; var i = !d(t.zoomingScrollBar) && t.zoomingScrollBar.isLazyLoad; (t.zoomFactor < 1 || t.zoomPosition > 0) && !i && (t.calculateVisibleRange(e), t.visibleRange.interval = t.enableAutoIntervalOnZooming ? this.calculateLogNiceInterval(t.doubleRange.delta, e, t) : t.visibleRange.interval, t.visibleRange.interval = 0 === Math.floor(t.visibleRange.interval) ? 1 : Math.floor(t.visibleRange.interval), t.triggerRangeRender(this.chart, t.visibleRange.min, t.visibleRange.max, t.visibleRange.interval)) }, t.prototype.calculateLogNiceInterval = function (e, t, i) { for (var n = vn(t, i), r = e, o = Math.pow(10, Math.floor(Ri(r, 10))), s = 0, a = i.intervalDivs.length; s < a; s++) { var l = o * i.intervalDivs[s]; if (n < e / l) break; r = l } return r }, t.prototype.calculateVisibleLabels = function (e, t) { var i = e.visibleRange.min; e.visibleLabels = []; var r; (e.zoomFactor < 1 || e.zoomPosition > 0) && (i = e.visibleRange.min - e.visibleRange.min % e.visibleRange.interval); var o = this.getFormat(e), s = null !== o.match("{value}"); for (e.format = t.intl.getNumberFormat({ format: s ? "" : o, useGrouping: t.useGroupingSeparator }), e.startLabel = e.format(Math.pow(e.logBase, e.visibleRange.min)), e.endLabel = e.format(Math.pow(e.logBase, e.visibleRange.max)); i <= e.visibleRange.max; i += e.visibleRange.interval)r = h({}, n("properties", e.labelStyle), null, !0), Fi(i, e.visibleRange) && fn(this.chart, i, this.formatValue(e, s, o, Math.pow(e.logBase, i)), r, e); e.getMaxLabelWidth && e.getMaxLabelWidth(this.chart) }, t.prototype.getModuleName = function () { return "Logarithmic" }, t.prototype.destroy = function (e) { }, t }(gj), VR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), WR = function (e) { function t(t) { return e.call(this, t) || this } return VR(t, e), t.prototype.calculateRangeAndInterval = function (e, t) { this.axisSize = e, this.calculateRange(t, e), this.getActualRange(t, e), this.applyRangePadding(t, e), this.calculateVisibleLabels(t) }, t.prototype.calculateVisibleLabels = function (e) { e.visibleLabels = []; var t, i = "BetweenTicks" === e.labelPlacement ? .5 : 0; "Auto" === e.intervalType ? this.calculateDateTimeNiceInterval(e, this.axisSize, parseInt(e.labels[0], 10), parseInt(e.labels[e.labels.length - 1], 10)) : e.actualIntervalType = e.intervalType, e.format = this.chart.intl.getDateFormat({ format: e.labelFormat, type: an(e.skeletonType), skeleton: this.getSkeleton(e, null, null) }); for (var r = 0; r < e.labels.length; r++)t = h({}, n("properties", e.labelStyle), null, !0), this.sameInterval(e.labels.map(Number)[r], e.labels.map(Number)[r - 1], e.actualIntervalType, r) || Fi(r - i, e.visibleRange) && fn(this.chart, r, e.format(new Date(e.labels.map(Number)[r])), t, e); e.getMaxLabelWidth && e.getMaxLabelWidth(this.chart) }, t.prototype.sameInterval = function (e, t, i, n) { var r; if (0 === n) r = !1; else switch (i) { case "Years": r = new Date(e).getFullYear() === new Date(t).getFullYear(); break; case "Months": r = new Date(e).getFullYear() === new Date(t).getFullYear() && new Date(e).getMonth() === new Date(t).getMonth(); break; case "Days": r = Math.abs(e - t) < 864e5 && new Date(e).getDay() === new Date(t).getDay(); break; case "Hours": r = Math.abs(e - t) < 36e5 && new Date(e).getDay() === new Date(t).getDay(); break; case "Minutes": r = Math.abs(e - t) < 6e4 && new Date(e).getMinutes() === new Date(t).getMinutes(); break; case "Seconds": r = Math.abs(e - t) < 1e3 && new Date(e).getDay() === new Date(t).getDay() }return r }, t.prototype.getModuleName = function () { return "DateTimeCategory" }, t.prototype.destroy = function (e) { }, t }(zR), HR = function () { function e() { } return e.prototype.measureStripLine = function (e, t, i, n, r) { var o, s, a = e.orientation; if (t.isRepeat && null !== t.size) o = n, s = null; else if ("DateTimeCategory" === e.valueType) { var l = t.start, h = t.end; o = null != l && "number" != typeof l ? e.labels.indexOf(l.getTime().toString()) : l, s = null != h && "number" != typeof h ? e.labels.indexOf(h.getTime().toString()) : h } else o = null === t.start ? null : +t.start, s = null === t.end ? null : +t.end; var d = this.getFromTovalue(o, s, t.size, t.startFromAxis, e, t), c = "Vertical" === a ? (d.to - d.from) * e.rect.height : i.height, p = "Horizontal" === a ? (d.to - d.from) * e.rect.width : i.width, u = "Vertical" === a ? i.x : d.from * e.rect.width + e.rect.x, g = "Horizontal" === a ? i.y : e.rect.y + e.rect.height - ("Pixel" === t.sizeType ? d.from : d.to) * e.rect.height; if (t.isSegmented && null != t.segmentStart && null != t.segmentEnd && "Pixel" !== t.sizeType) { var m = this.getFromTovalue(+t.segmentStart, +t.segmentEnd, null, null, r, t); "Vertical" === r.orientation ? (g = r.rect.y + r.rect.height - m.to * r.rect.height, c = (m.to - m.from) * r.rect.height) : (u = m.from * r.rect.width + r.rect.x, p = (m.to - m.from) * r.rect.width) } return 0 !== c && 0 !== p || "Pixel" === t.sizeType && (null !== t.start || t.startFromAxis) ? new ej(u, g, p, c) : new ej(0, 0, 0, 0) }, e.prototype.getFromTovalue = function (e, t, i, n, r, o) { var s = !o.isRepeat && n ? r.visibleRange.min : e, a = this.getToValue(Math.max(e, d(t) ? e : t), s, i, r, t, o); return s = this.findValue(s, r), a = this.findValue(a, r), { from: Xi(r.isInversed ? a : s, r), to: Xi(r.isInversed ? s : a, r) } }, e.prototype.getToValue = function (e, t, i, n, r, o) { var s = o.sizeType, a = null === r; if ("DateTime" !== n.valueType) return "Pixel" === o.sizeType ? t : a ? t + i : e; var l = new Date(t); switch ("Auto" === s && (s = n.actualIntervalType, i *= n.visibleRange.interval), s) { case "Years": return a ? new Date(l.setFullYear(l.getFullYear() + i)) : e; case "Months": return a ? new Date(l.setMonth(l.getMonth() + i)) : e; case "Days": return a ? new Date(l.setDate(l.getDate() + i)) : e; case "Hours": return a ? new Date(l.setHours(l.getHours() + i)) : e; case "Minutes": return a ? new Date(l.setMinutes(l.getMinutes() + i)) : e; case "Seconds": return a ? new Date(l.setSeconds(l.getSeconds() + i)) : e; default: return t } }, e.prototype.findValue = function (e, t) { return e < t.visibleRange.min ? e = t.visibleRange.min : e > t.visibleRange.max && (e = t.visibleRange.max), e }, e.prototype.renderStripLine = function (e, t, i) { var n, r = e.element.id + "_stripline_" + t + "_", o = e.chartAxisLayoutPanel.seriesClipRect, s = 0, a = 0, l = null, h = new aI(r + "ClipRect", "transparent", { width: 1, color: "Gray" }, 1, { x: e.initialClipRect.x, y: e.initialClipRect.y, width: e.initialClipRect.width, height: e.initialClipRect.height }), d = e.renderer.createGroup({ id: r + "collections", "clip-path": "url(#" + r + "ClipRect)" }); d.appendChild(mn(e.redraw, h, e.renderer)); for (var c = 0, p = i; c < p.length; c++)for (var u = p[c], g = 0, m = 0, f = u.stripLines; m < f.length; m++) { var y = f[m]; if (y.visible && y.zIndex === t) if (y.isSegmented && null != y.segmentStart && null != y.segmentEnd && "Pixel" !== y.sizeType && (l = this.getSegmentAxis(i, u, y)), y.isRepeat && null != y.repeatEvery && null !== y.size && "Pixel" !== y.sizeType) for (s = null != y.repeatUntil ? "DateTime" === u.valueType ? y.repeatUntil.getTime() : +y.repeatUntil : u.actualRange.max, a = y.start, (y.startFromAxis && "DateTime" === u.valueType && "Auto" === y.sizeType || y.start < u.visibleRange.min) && (a = u.visibleLabels[0].value === u.visibleRange.min ? u.visibleRange.min : u.visibleLabels[0].value - ("DateTime" === u.valueType ? u.dateTimeInterval : u.visibleRange.interval)), a = y.startFromAxis && "DateTime" !== u.valueType ? u.visibleRange.min : a; a < s;)n = Fi(a + ("DateTime" === u.valueType ? u.dateTimeInterval * +y.size : y.size), u.visibleRange), (a >= u.visibleRange.min && a < u.visibleRange.max || n) && this.renderStripLineElement(u, y, o, r, d, e, a, l, g), g++ , a = this.getStartValue(u, y, a); else this.renderStripLineElement(u, y, o, r, d, e, null, l, g), g++ } kn(e.enableCanvas, e.svgObject, d, e.redraw) }, e.prototype.renderPath = function (e, t, i, n, r, o) { var s = Sn(i), a = s ? s.getAttribute("d") : "", l = "Vertical" === o.orientation ? "M" + t.x + " " + t.y + " L" + (t.x + t.width) + " " + t.y : "M" + t.x + " " + t.y + " L" + t.x + " " + (t.y + t.height); kn(r.enableCanvas, n, r.renderer.drawPath(new rj(i, "", e.size, e.color, e.opacity, e.dashArray, l)), r.redraw, !0, "x", "y", null, a, !0) }, e.prototype.renderRectangle = function (e, t, i, n, r) { var o = Sn(i), s = o ? new ej(+o.getAttribute("x"), +o.getAttribute("y"), +o.getAttribute("width"), +o.getAttribute("height")) : null; kn(r.enableCanvas, n, r.renderer.drawRectangle(new aI(i, e.color, e.border, e.opacity, t, 0, 0, "", e.dashArray)), r.redraw, !0, "x", "y", null, null, !0, !0, s) }, e.prototype.renderText = function (e, t, i, n, r, o) { var s, a = xi(e.text, e.textStyle).height / 8 * 3, l = t.y + t.height / 2 + a, h = null === e.rotation ? "Vertical" === o.orientation ? 0 : -90 : e.rotation, d = t.x + t.width / 2; "Horizontal" === o.orientation ? (d = this.getTextStart(d + a * this.factor(e.horizontalAlignment), t.width, e.horizontalAlignment), l = this.getTextStart(l - a, t.height, e.verticalAlignment), s = this.invertAlignment(e.verticalAlignment)) : (d = this.getTextStart(d, t.width, e.horizontalAlignment), l = this.getTextStart(l + a * this.factor(e.verticalAlignment) - 5, t.height, e.verticalAlignment), s = e.horizontalAlignment), $n(r.renderer, new nj(i, d, l, s, e.text, "rotate(" + h + " " + d + "," + l + ")", "middle"), e.textStyle, e.textStyle.color, n) }, e.prototype.invertAlignment = function (e) { switch (e) { case "Start": e = "End"; break; case "End": e = "Start" }return e }, e.prototype.getStartValue = function (e, t, i) { return "DateTime" === e.valueType ? this.getToValue(null, i, +t.repeatEvery, e, null, t) : i + +t.repeatEvery }, e.prototype.getSegmentAxis = function (e, t, i) { var n; if (null == i.segmentAxisName) return "Horizontal" === t.orientation ? e[1] : e[0]; for (var r = 0; r < e.length; r++)i.segmentAxisName === e[r].name && (n = e[r]); return n }, e.prototype.renderStripLineElement = function (e, t, i, n, r, o, s, a, l) { var h = this.measureStripLine(e, t, i, s, a); "Pixel" === t.sizeType ? this.renderPath(t, h, n + "path_" + e.name + "_" + l, r, o, e) : 0 !== h.height && 0 !== h.width && this.renderRectangle(t, h, n + "rect_" + e.name + "_" + l, r, o), "" !== t.text && this.renderText(t, h, n + "text_" + e.name + "_" + l, r, o, e) }, e.prototype.factor = function (e) { var t = 0; switch (e) { case "Start": t = 1; break; case "End": t = -1 }return t }, e.prototype.getTextStart = function (e, t, i) { switch (i) { case "Start": e = e - t / 2 + 5; break; case "End": e = e + t / 2 - 5 }return e }, e.prototype.getModuleName = function () { return "StripLine" }, e.prototype.destroy = function () { }, e }(), _R = function () { function e(e) { this.chart = e } return e.prototype.enableComplexProperty = function (e) { for (var t = [], i = e.xAxis.visibleRange, n = e.yAxis.visibleRange, r = e.points, o = e.clipRect, s = Math.abs(i.delta / o.width), a = Math.abs(n.delta / o.height), l = r[0] && r[0].x > s ? 0 : s, h = r[0] && r[0].y > a ? 0 : a, d = 0, c = 0, p = 0, u = r; p < u.length; p++) { var g = u[p]; g.symbolLocations = [], d = g.xValue ? g.xValue : i.min, c = g.yValue ? g.yValue : n.min, (Math.abs(l - d) >= s || Math.abs(h - c) >= a) && (t.push(g), l = d, h = c) } return t }, e.prototype.getLineDirection = function (e, t, i, n, r, o) { var s = ""; if (null != e) { var a = r(e.xValue, e.yValue, i.xAxis, i.yAxis, n, i), l = r(t.xValue, t.yValue, i.xAxis, i.yAxis, n, i); s = o + " " + a.x + " " + a.y + " L " + l.x + " " + l.y + " " } return s }, e.prototype.appendLinePath = function (e, t, i) { var n = Sn(e.id), r = t.chart, o = n ? n.getAttribute("d") : null, s = t.chart.renderer.drawPath(e, new Int32Array([t.clipRect.x, t.clipRect.y])); s && s.setAttribute("clip-path", i), t.pathElement = s, t.chart.enableCanvas || t.seriesElement.appendChild(s), t.isRectSeries = !1, gn(n, e.d, t.chart.redraw, o, r.duration) }, e.prototype.renderMarker = function (e) { e.marker && e.marker.visible && e.chart.markerRender.render(e) }, e.prototype.doProgressiveAnimation = function (e, t) { var i, n = new fw({}), r = e.pathElement, o = r.getAttribute("stroke-dasharray"), s = e.pathElement.getTotalLength(); r.style.visibility = "hidden", n.animate(r, { duration: t.duration, delay: t.delay, progress: function (e) { e.timeStamp >= e.delay && (r.style.visibility = "visible", i = Math.abs(Math.round((e.timeStamp - e.delay) * s / e.duration)), r.setAttribute("stroke-dasharray", i + "," + s)) }, end: function (t) { r.setAttribute("stroke-dasharray", o), e.chart.trigger("animationComplete", { series: e.chart.isBlazor ? {} : e }) } }) }, e.prototype.storePointLocation = function (e, t, i, n) { var r = t.marker && t.marker.width ? t.marker.width : 0, o = t.marker && t.marker.height ? t.marker.height : 0; e.symbolLocations.push(n(e.xValue, e.yValue, t.xAxis, t.yAxis, i, t)), e.regions.push(new ej(e.symbolLocations[0].x - r, e.symbolLocations[0].y - o, 2 * r, 2 * o)) }, e.prototype.doLinearAnimation = function (e, t) { var i, n = e.clipRectElement.childNodes[0].childNodes[0], r = e.chart.animated ? e.chart.duration : t.duration, o = dn("Linear"), s = +n.getAttribute("height"), a = +n.getAttribute("width"), l = +n.getAttribute("x"), h = e.chart.requireInvertedAxis ? +n.getAttribute("height") + +n.getAttribute("y") : +n.getAttribute("y"); n.style.visibility = "hidden", new fw({}).animate(n, { duration: r, delay: t.delay, progress: function (t) { t.timeStamp >= t.delay && (n.style.visibility = "visible", e.chart.requireInvertedAxis ? (i = o(t.timeStamp - t.delay, 0, s, t.duration), n.setAttribute("transform", "translate(" + l + " " + h + ") scale(1," + i / s + ") translate(" + -l + " " + -h + ")")) : (i = o(t.timeStamp - t.delay, 0, a, t.duration), n.setAttribute("transform", "translate(" + l + " " + h + ") scale(" + i / a + ", 1) translate(" + -l + " " + -h + ")"))) }, end: function (t) { n.setAttribute("transform", "translate(0,0)"), e.chart.trigger("animationComplete", { series: e.chart.isBlazor ? {} : e }) } }) }, e }(), YR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), UR = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return YR(t, e), t.prototype.render = function (e, t, i, n) { for (var r, o, s, a = "", l = null, h = "M", d = e.chart && "PolarRadar" === e.chart.chartAreaType, c = e.emptyPointSettings && "Drop" === e.emptyPointSettings.mode, p = d ? Ji : jn, u = this.enableComplexProperty(e), g = 0, m = u; g < m.length; g++) { var f = m[g]; f.regions = [], f.visible && Wi(u[f.index - 1], f, u[f.index + 1], e) ? (a += this.getLineDirection(l, f, e, n, p, h), h = l ? "L" : h, l = f, this.storePointLocation(f, e, n, p)) : (l = c ? l : null, h = c ? h : "M", f.symbolLocations = []) } d && e.isClosed && (o = p(u[u.length - 1].xValue, u[u.length - 1].yValue, t, i, n, e), r = p(u[0].xValue, u[0].yValue, t, i, n, e), a = a.concat(h + " " + o.x + " " + o.y + " L " + r.x + " " + r.y)); var y = "Indicator" === e.category ? e.chart.element.id + "_Indicator_" + e.index + "_" + e.name : "TrendLine" === e.category ? e.chart.element.id + "_Series_" + e.sourceIndex + "_TrendLine_" + e.index : e.chart.element.id + "_Series_" + (void 0 === e.index ? e.category : e.index); s = new rj(y, "none", e.width, e.interior, e.opacity, e.dashArray, a), this.appendLinePath(s, e, ""), this.renderMarker(e) }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doProgressiveAnimation(e, t) }, t.prototype.getModuleName = function () { return "LineSeries" }, t.prototype.destroy = function (e) { }, t }(_R), qR = function () { function e() { } return e.prototype.getSideBySideInfo = function (e) { e.chart.enableSideBySidePlacement && !e.position && this.getSideBySidePositions(e); var t = e.chart.enableSideBySidePlacement ? e.position : 0, i = e.chart.enableSideBySidePlacement ? e.rectCount : 1; e.isRectSeries = !0; var n, r = e.chart.visibleSeries, o = e.chart.enableSideBySidePlacement ? e.columnSpacing : 0, s = null === e.columnWidth ? "Histogram" === e.type ? 1 : .7 : e.columnWidth, a = hn(e.xAxis, r) * s, l = t / i - .5, h = new uj(l, l + 1 / i); return isNaN(h.start) || isNaN(h.end) || (n = o * (h = new uj(h.start * a, h.end * a)).delta, h = new uj(h.start + n / 2, h.end - n / 2)), h }, e.prototype.getRectangle = function (e, t, i, n, r) { var o = jn(e, t, r.xAxis, r.yAxis, r.chart.requireInvertedAxis), s = jn(i, n, r.xAxis, r.yAxis, r.chart.requireInvertedAxis); return new ej(Math.min(o.x, s.x), Math.min(o.y, s.y), Math.abs(s.x - o.x), Math.abs(s.y - o.y)) }, e.prototype.getSideBySidePositions = function (e) { for (var t = e.chart, i = 0, n = t.columns; i < n.length; i++)for (var r = n[i], o = 0, s = t.rows; o < s.length; o++) { var a = s[o]; this.findRectPosition(e.findSeriesCollection(r, a, !1)) } }, e.prototype.findRectPosition = function (e) { var t = [], i = { rectCount: 0, position: null }; e.forEach(function (e) { -1 !== e.type.indexOf("Stacking") ? e.stackingGroup ? void 0 === t[e.stackingGroup] ? (e.position = i.rectCount, t[e.stackingGroup] = i.rectCount++) : e.position = t[e.stackingGroup] : null === i.position ? (e.position = i.rectCount, i.position = i.rectCount++) : e.position = i.position : e.position = i.rectCount++ }), e.forEach(function (e) { e.rectCount = i.rectCount }) }, e.prototype.updateSymbolLocation = function (e, t, i) { i.chart.requireInvertedAxis ? this.updateYRegion(e, t, i) : this.updateXRegion(e, t, i), "Histogram" === i.type && (e.minimum = +e.x - i.histogramValues.binWidth / 2, e.maximum = +e.x + i.histogramValues.binWidth / 2) }, e.prototype.updateXRegion = function (e, t, i) { e.regions.push(t), e.symbolLocations.push({ x: t.x + t.width / 2, y: "BoxPlot" === i.seriesType || -1 !== i.seriesType.indexOf("HighLow") || e.yValue >= 0 == !i.yAxis.isInversed ? t.y : t.y + t.height }), "RangeColumn" === i.type && e.symbolLocations.push({ x: t.x + t.width / 2, y: t.y + t.height }) }, e.prototype.updateYRegion = function (e, t, i) { e.regions.push(t), e.symbolLocations.push({ x: "BoxPlot" === i.seriesType || -1 !== i.seriesType.indexOf("HighLow") || e.yValue >= 0 == !i.yAxis.isInversed ? t.x + t.width : t.x, y: t.y + t.height / 2 }), "RangeColumn" === i.type && e.symbolLocations.push({ x: t.x, y: t.y + t.height / 2 }) }, e.prototype.renderMarker = function (e) { e.marker && e.marker.visible && e.chart.markerRender.render(e) }, e.prototype.triggerEvent = function (e, t, i, n) { var r = { cancel: !1, name: yj, series: e, point: t, fill: e.setPointColor(t, i), border: e.setBorderColor(t, n) }; return e.chart.trigger(yj, r), t.color = r.fill, r }, e.prototype.drawRectangle = function (e, t, i, n) { var r = e.chart; if ((r.requireInvertedAxis ? i.height : i.width) <= 0) return null; var o = this.calculateRoundedRectPath(i, e.cornerRadius.topLeft, e.cornerRadius.topRight, e.cornerRadius.bottomLeft, e.cornerRadius.bottomRight), s = "Indicator" === e.category ? r.element.id + "_Indicator_" + e.index + "_" + e.name + "_Point_" + t.index : r.element.id + "_Series_" + e.index + "_Point_" + t.index, a = Zn(r.redraw, s), l = a ? a.getAttribute("d") : "", h = new rj(s, n.fill, n.border.width, n.border.color, e.opacity, e.dashArray, o), d = r.renderer.drawPath(h, new Int32Array([e.clipRect.x, e.clipRect.y])); switch (e.seriesType) { case "XY": d.setAttribute("aria-label", t.x.toString() + ":" + t.yValue.toString()); break; case "HighLow": d.setAttribute("aria-label", t.x.toString() + ":" + t.high.toString() + ":" + t.low.toString()) }kn(e.chart.enableCanvas, e.seriesElement, d, r.redraw), e.chart.enableCanvas || gn(d, o, r.redraw, l, r.duration) }, e.prototype.animate = function (e) { for (var t = e.seriesElement.childNodes, i = "Indicator" === e.category ? 0 : 1, n = 0, r = e.points; n < r.length; n++) { var o = r[n]; (o.symbolLocations.length || "BoxAndWhisker" === e.type && o.regions.length) && (this.animateRect(t[i], e, o), i++) } }, e.prototype.animateRect = function (e, t, i) { var n, r, o, s, a = t.animation, l = t.chart.animated ? t.chart.duration : a.duration, h = dn("Linear"), d = i.yValue < 0, c = +i.regions[0].height, p = +i.regions[0].width; t.chart.requireInvertedAxis ? (r = +i.regions[0].y, t.type.indexOf("Stacking") > -1 ? (n = Xi(0, t.yAxis) * t.yAxis.rect.width, o = n, s = r) : (n = +i.regions[0].x, s = d ? r : r + c, o = -1 !== t.seriesType.indexOf("HighLow") || -1 !== t.type.indexOf("Waterfall") ? n + p / 2 : d !== t.yAxis.isInversed ? n + p : n)) : (n = +i.regions[0].x, t.type.indexOf("Stacking") > -1 ? (r = (1 - Xi(0, t.yAxis)) * t.yAxis.rect.height, o = n, s = r) : (r = +i.regions[0].y, s = -1 !== t.seriesType.indexOf("HighLow") || -1 !== t.type.indexOf("Waterfall") ? r + c / 2 : d !== t.yAxis.isInversed ? r : r + c, o = d ? n : n + p)); var u; e.style.visibility = "hidden", new fw({}).animate(e, { duration: l, delay: a.delay, progress: function (i) { i.timeStamp >= i.delay && (e.style.visibility = "visible", t.chart.requireInvertedAxis ? (p = p || 1, u = h(i.timeStamp - i.delay, 0, p, i.duration), e.setAttribute("transform", "translate(" + o + " " + s + ") scale(" + u / p + ", 1) translate(" + -o + " " + -s + ")")) : (c = c || 1, u = h(i.timeStamp - i.delay, 0, c, i.duration), e.setAttribute("transform", "translate(" + o + " " + s + ") scale(1," + u / c + ") translate(" + -o + " " + -s + ")"))) }, end: function (n) { e.setAttribute("transform", "translate(0,0)"); var r = t.seriesElement; if ((e === r.lastElementChild || i.index === t.points.length - 1 || "Waterfall" === t.type && e === r.children[r.childElementCount - 2]) && (t.chart.trigger("animationComplete", { series: t.chart.isBlazor ? {} : t }), "Waterfall" === t.type)) for (var o = r.childNodes, s = 0; s < o.length; s++)-1 !== o[s].id.indexOf("Connector") && (o[s].style.visibility = "visible", o[s].setAttribute("transform", "translate(0,0)")) } }) }, e.prototype.calculateRoundedRectPath = function (e, t, i, n, r) { return "M " + e.x + " " + (t + e.y) + " Q " + e.x + " " + e.y + " " + (e.x + t) + " " + e.y + " L " + (e.x + e.width - i) + " " + e.y + " Q " + (e.x + e.width) + " " + e.y + " " + (e.x + e.width) + " " + (e.y + i) + " L " + (e.x + e.width) + " " + (e.y + e.height - r) + " Q " + (e.x + e.width) + " " + (e.y + e.height) + " " + (e.x + e.width - r) + " " + (e.y + e.height) + " L " + (e.x + n) + " " + (e.y + e.height) + " Q " + e.x + " " + (e.y + e.height) + " " + e.x + " " + (e.y + e.height - n) + " L " + e.x + " " + (t + e.y) + " Z" }, e }(), GR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), QR = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return GR(t, e), t.prototype.render = function (e) { for (var t, i, n = this.getSideBySideInfo(e), r = Math.max(e.yAxis.visibleRange.min, 0), o = 0, s = e.points; o < s.length; o++) { var a = s[o]; if (a.symbolLocations = [], a.regions = [], a.visible && Wi(e.points[a.index - 1], a, e.points[a.index + 1], e)) { t = this.getRectangle(a.xValue + n.start, a.yValue, a.xValue + n.end, r, e); var l = "Indicator" === e.category ? a.color : e.interior; (i = this.triggerEvent(e, a, l, { width: e.border.width, color: e.border.color })).cancel || (this.updateSymbolLocation(a, t, e), this.drawRectangle(e, a, t, i)) } } this.renderMarker(e) }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.getModuleName = function () { return "ColumnSeries" }, t.prototype.destroy = function (e) { }, t }(qR), XR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), JR = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return XR(t, e), t.prototype.getAreaPathDirection = function (e, t, i, n, r, o, s) { var a, l = ""; return null === o && (l += s + " " + (a = r(e, t, i.xAxis, i.yAxis, n, i)).x + " " + a.y + " "), l }, t.prototype.getAreaEmptyDirection = function (e, t, i, n, r) { var o = ""; return o += this.getAreaPathDirection(e.x, e.y, i, n, r, null, "L"), o += this.getAreaPathDirection(t.x, t.y, i, n, r, null, "L") }, t.prototype.setPointColor = function (e, t, i, n, r) { if ("" === i.pointColorMapping) { for (var o = void 0, s = 0; s < r.length; s++)if (o = r[s], (n ? e.xValue : e.yValue) <= this.getAxisValue(o.value, n ? i.xAxis : i.yAxis, i.chart) || !o.value) { e.interior = o.color; break } return null == e.interior && (e.interior = i.interior), !1 } return !!t && i.setPointColor(e, i.interior) !== i.setPointColor(t, i.interior) }, t.prototype.sortSegments = function (e, t) { var i = "X" === e.segmentAxis ? e.xAxis : e.yAxis, n = this; return [].concat(t).sort(function (t, r) { return n.getAxisValue(t.value, i, e.chart) - n.getAxisValue(r.value, i, e.chart) }) }, t.prototype.applySegmentAxis = function (e, t, i) { var n = this; if ("" !== e.pointColorMapping) return t.map(function (t) { n.appendLinePath(t, e, "") }), null; var r, o = "X" === e.segmentAxis, s = o ? e.xAxis : e.yAxis, a = e.chart; this.includeSegment(i, s, e, i.length); for (var l, h, d, c = i.length, p = function (n) { r = i[n], l = u.getAxisValue(r.value, s, e.chart), (h = u.createClipRect(n ? u.getAxisValue(i[n - 1].value, s, e.chart) : s.visibleRange.min, l, e, n, o)) && t.map(function (t) { gn(Sn((d = { "clip-path": h, "stroke-dasharray": r.dashArray, opacity: t.opacity, stroke: e.type.indexOf("Line") > -1 ? r.color || e.interior : e.border.color, "stroke-width": t["stroke-width"], fill: e.type.indexOf("Line") > -1 ? "none" : r.color || e.interior, id: t.id + "_Segment_" + n, d: t.d }).id), d.d, a.redraw), e.seriesElement.appendChild(a.renderer.drawPath(d)) }) }, u = this, g = 0; g < c; g++)p(g) }, t.prototype.includeSegment = function (e, t, i, n) { if (n <= 0) return e.push({ value: t.visibleRange.max, color: i.interior }), null; this.getAxisValue(e[n - 1].value, t, i.chart) < t.visibleRange.max && e.push({ value: t.visibleRange.max, color: i.interior }) }, t.prototype.createClipRect = function (e, t, i, n, r) { var o, s = i.chart.requireInvertedAxis, a = jn(r ? e : i.xAxis.visibleRange.min, r ? i.yAxis.visibleRange.max : t, i.xAxis, i.yAxis, s), l = jn(r ? t : i.xAxis.visibleRange.max, r ? i.yAxis.visibleRange.min : e, i.xAxis, i.yAxis, s); return (l = s ? [a, a = l][0] : l).x - a.x > 0 && l.y - a.y > 0 ? (o = new aI(i.chart.element.id + "_ChartSegmentClipRect_" + n, "transparent", { width: 1, color: "Gray" }, 1, { x: a.x, y: a.y, width: l.x - a.x, height: l.y - a.y }), i.seriesElement.appendChild(mn(i.chart.redraw, o, i.chart.renderer)), "url(#" + i.chart.element.id + "_ChartSegmentClipRect_" + n + ")") : null }, t.prototype.getAxisValue = function (e, t, i) { if (null === e && (e = t.visibleRange.max), "DateTime" === t.valueType) { var n = { skeleton: "full", type: "dateTime" }; return Date.parse(i.intl.getDateParser(n)(i.intl.getDateFormat(n)(new Date(JD.parse.parseJson({ val: e }).val)))) } if (t.valueType.indexOf("Category") > -1) { var r = "DateTimeCategory" === t.valueType ? e.getTime().toString() : e; return t.labels.indexOf(r) < 0 ? +e : t.labels.indexOf(r) } return +e }, t }(_R), ZR = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), KR = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZR(t, e), t.prototype.render = function (e, t, i, n) { var r, o = this, s = null, a = "", l = "PolarRadar" === e.chart.chartAreaType ? e.points[0].yValue : Math.max(e.yAxis.visibleRange.min, 0), h = e.chart && "PolarRadar" === e.chart.chartAreaType, d = e.emptyPointSettings && "Drop" === e.emptyPointSettings.mode, c = e.border ? e.border.width : 0, p = e.border ? e.border.color : "transparent", u = "PolarRadar" === e.chart.chartAreaType ? Ji : jn; e.points.map(function (t, i, h) { r = t.xValue, t.symbolLocations = [], t.regions = [], t.visible && Wi(h[i - 1], t, h[i + 1], e) && (a += o.getAreaPathDirection(r, l, e, n, u, s, "M"), s = s || new dI(r, l), a += o.getAreaPathDirection(r, t.yValue, e, n, u, null, "L"), !h[i + 1] || h[i + 1].visible || d || (a += o.getAreaEmptyDirection({ x: r, y: l }, s, e, n, u), s = null), o.storePointLocation(t, e, n, u)) }), h && (a = a.concat(a + " Z")), this.appendLinePath(new rj(e.chart.element.id + "_Series_" + e.index, e.interior, c, p, e.opacity, e.dashArray, e.points.length > 1 && "" !== a ? a + this.getAreaPathDirection(e.points[e.points.length - 1].xValue, "PolarRadar" === e.chart.chartAreaType ? e.points[e.points.length - 1].yValue : l, e, n, u, null, "L") : ""), e, ""), this.renderMarker(e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "AreaSeries" }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t }(JR), $R = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), ez = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return $R(t, e), t.prototype.render = function (e) { for (var t, i, n = Math.max(e.yAxis.visibleRange.min, 0), r = this.getSideBySideInfo(e), o = 0, s = e.points; o < s.length; o++) { var a = s[o]; a.symbolLocations = [], a.regions = [], a.visible && Wi(e.points[a.index - 1], a, e.points[a.index + 1], e) && (t = this.getRectangle(a.xValue + r.start, a.yValue, a.xValue + r.end, n, e), (i = this.triggerEvent(e, a, e.interior, { width: e.border.width, color: e.border.color })).cancel || (this.updateSymbolLocation(a, t, e), this.drawRectangle(e, a, t, i))) } this.renderMarker(e) }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "BarSeries" }, t }(qR), tz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), iz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return tz(t, e), t.prototype.measureAxis = function (e) { var t = this.chart; this.initialClipRect = e, this.seriesClipRect = new ej(e.x, e.y, e.width, e.height), this.measureRowAxis(t, this.initialClipRect), this.measureColumnAxis(t, this.initialClipRect), this.calculateAxisSize() }, t.prototype.measureRowAxis = function (e, t) { this.calculateRowSize(t); var i = e.rows[0]; this.measureDefinition(i, e, new $E(e.availableSize.width, i.computedHeight), t) }, t.prototype.measureColumnAxis = function (e, t) { this.calculateColumnSize(t); var i = e.columns[0]; this.measureDefinition(i, e, new $E(i.computedWidth, e.availableSize.height), t) }, t.prototype.measureDefinition = function (e, t, i, n) { for (var r = 0, o = e.axes; r < o.length; r++) { var s = o[r]; s.getModule(t), s.baseModule.calculateRangeAndInterval(i, s) } }, t.prototype.calculateAxisSize = function () { var e = this.chart; this.centerX = .5 * this.initialClipRect.width + this.initialClipRect.x, this.centerY = .5 * this.initialClipRect.height + this.initialClipRect.y, e.radius = Math.min(this.initialClipRect.width, this.initialClipRect.height) / 2 - 5 - e.primaryXAxis.majorTickLines.height - e.primaryXAxis.maxLabelSize.height, e.radius = e.primaryXAxis.coefficient * e.radius / 100, this.seriesClipRect.y = this.centerY - e.radius, this.seriesClipRect.x = this.centerX - e.radius, this.seriesClipRect.height = 2 * e.radius, this.seriesClipRect.width = 2 * e.radius, this.calculateRowSize(this.seriesClipRect), e.primaryYAxis.rect = this.seriesClipRect, this.calculateColumnSize(this.seriesClipRect), e.primaryXAxis.rect = this.seriesClipRect }, t.prototype.measure = function () { var e = this.chart; e.verticalAxes.push(e.primaryYAxis); var t = e.rows[0]; t.axes[0] = e.primaryYAxis, e.rows[0] = t, e.horizontalAxes.push(e.primaryXAxis); var i = e.columns[0]; i.axes[0] = e.primaryXAxis, e.columns[0] = i }, t.prototype.calculateRowSize = function (e) { var t = this.chart, i = t.rows[0]; i.computedHeight = e.height / 2, i.computedTop = e.y, t.rows[0] = i }, t.prototype.calculateColumnSize = function (e) { var t = this.chart, i = t.columns[0]; i.computedLeft = e.x, i.computedWidth = e.width, t.columns[0] = i }, t.prototype.renderAxes = function () { var e, t = this.chart; this.startAngle = t.primaryXAxis.startAngle; for (var i = t.renderer.createGroup({ id: t.element.id + "AxisCollection" }), n = t.renderer.createGroup({ id: t.element.id + "AxisOutsideCollection" }), r = 0, o = t.axisCollections.length; r < o; r++)this.element = t.renderer.createGroup({ id: t.element.id + "AxisGroup" + r }), "Horizontal" === (e = t.axisCollections[r]).orientation ? ((e.majorGridLines.width > 0 || e.majorTickLines.width > 0) && this.drawXAxisGridLine(e, r), e.visible && this.drawXAxisLabels(e, r)) : (this.drawYAxisGridLine(e, r), e.lineStyle.width > 0 && this.drawYAxisLine(e, r, e.plotOffset, 0), e.visible && this.drawYAxisLabels(e, r)), i.appendChild(this.element); return i.appendChild(this.element), kn(t.enableCanvas, t.svgObject, i, t.redraw), n }, t.prototype.drawYAxisLine = function (e, t, i, n) { var r = this.chart, o = {}, s = Ki($i(e.visibleLabels[0].value, e), this.startAngle), a = "M " + this.centerX + " " + this.centerY + "L " + (this.centerX + r.radius * s.x) + " " + (this.centerY + r.radius * s.y); o = { id: r.element.id + "AxisLine_" + t, d: a, "stroke-dasharray": e.lineStyle.dashArray, "stroke-width": e.lineStyle.width, stroke: e.lineStyle.color || r.themeStyle.axisLine }, r.yAxisElements.appendChild(r.renderer.drawPath(o)) }, t.prototype.drawYAxisLabels = function (e, t) { var i, n, r, o, s = this.chart, a = 0, l = 0, h = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle, d = s.renderer.createGroup({ id: s.element.id + "AxisLabels" + t }); r = Ki($i(e.visibleLabels[0].value, e), this.startAngle); for (var c = 0, p = e.visibleLabels.length; c < p; c++)o = s.radius * Xi(e.visibleLabels[c].value, e), i = e.visibleLabels[c].size, o = s.radius * Xi(e.visibleLabels[c].value, e), a = this.centerX + o * r.x + (e.majorTickLines.height + i.width / 2 + 2.5) * Math.cos(h * Math.PI / 180) * ("Inside" === e.labelPosition ? 1 : -1), l = this.centerY + o * r.y + (e.majorTickLines.height + i.height / 2) * Math.sin(h * Math.PI / 180) * ("Inside" === e.labelPosition ? 1 : -1), n = new nj(s.element.id + t + "_AxisLabel_" + c, a, l + i.height / 4, "middle", e.visibleLabels[c].text), $n(s.renderer, n, e.labelStyle, e.labelStyle.color || s.themeStyle.axisLabel, d, !1, s.redraw, !0, !0); s.yAxisElements.appendChild(d) }, t.prototype.drawYAxisGridLine = function (e, t) { var i, n, r, o, s, a, l, h, d, c, p = this.chart, u = "", g = "", m = this.startAngle < 0 ? this.startAngle + 360 : this.startAngle, f = (e.rect, { color: e.majorGridLines.color || p.themeStyle.majorGridLine, width: e.majorGridLines.width }); if (e.majorGridLines.width > 0) if ("Polar" === p.visibleSeries[0].type) for (var y = 0; y < e.visibleLabels.length; y++)d = (c = Sn(p.element.id + "_MajorGridLine_" + t + "_" + y)) ? c.getAttribute("r") : null, n = p.radius * Xi(e.visibleLabels[y].value, e), i = new lI(p.element.id + "_MajorGridLine_" + t + "_" + y, "transparent", f, e.majorGridLines.width, this.centerX, this.centerY, n), kn(p.enableCanvas, this.element, p.renderer.drawCircle(i), p.redraw, !0, "r", "r", new dI(+d, +d), null, !0); else for (y = 0; y < e.visibleLabels.length; y++) { n = p.radius * Xi(e.visibleLabels[y].value, e), g = ""; for (var v = 0, w = p.primaryXAxis.visibleLabels.length; v < w; v++)r = Ki($i(p.primaryXAxis.visibleLabels[v].value, p.primaryXAxis), this.startAngle), o = Ki($i(v + 1 < w ? p.primaryXAxis.visibleLabels[v + 1].value : p.primaryXAxis.visibleLabels[0].value, p.primaryXAxis), this.startAngle), s = this.centerX + n * r.x, a = this.centerY + n * r.y, l = this.centerX + n * o.x, h = this.centerY + n * o.y, g = g.concat((v ? "L " : "M ") + " " + s + " " + a + " L  " + l + " " + h + " "); d = (c = Sn(p.element.id + "_MajorGridLine_" + t + "_" + y)) ? c.getAttribute("d") : null, i = new rj(p.element.id + "_MajorGridLine_" + t + "_" + y, "transparent", e.majorGridLines.width, e.majorGridLines.color || p.themeStyle.majorGridLine, null, null, g), kn(p.enableCanvas, this.element, p.renderer.drawPath(i), p.redraw, !0, "x", "y", null, d, !0) } if (e.majorTickLines.width > 0) { r = Ki($i(e.visibleLabels[0].value, e), this.startAngle); for (v = 0; v < e.visibleLabels.length; v++)n = p.radius * Xi(e.visibleLabels[v].value, e), u = "M " + (s = this.centerX + n * r.x) + " " + (a = this.centerY + n * r.y) + " L " + (l = s + e.majorTickLines.height * Math.cos(m * Math.PI / 180) * ("Inside" === e.tickPosition ? 1 : -1)) + " " + (h = a + e.majorTickLines.height * Math.sin(m * Math.PI / 180) * ("Inside" === e.tickPosition ? 1 : -1)), this.renderTickLine(e, t, u, "", v) } }, t.prototype.drawXAxisGridLine = function (e, t) { for (var i, n, r, o, s, a = this.chart, l = "", h = "", d = "", c = "", p = this.centerX, u = this.centerY, g = (e.majorTickLines.height, e.rect, e.visibleLabels.length), m = 0; m < g; m++) { i = e.visibleLabels[m].value, n = Ki($i(e.visibleLabels[m].value, e), this.startAngle); l = "M " + p + " " + u + " L " + (r = this.centerX + a.radius * n.x) + " " + (o = this.centerY + a.radius * n.y), h = "M " + r + " " + o + " L " + (r + e.majorTickLines.height * n.x * ("Inside" === e.tickPosition ? -1 : 1)) + " " + (o + e.majorTickLines.height * n.y * ("Inside" === e.tickPosition ? -1 : 1)), e.minorTicksPerInterval > 0 && (e.minorGridLines.width > 0 || e.minorTickLines.width > 0) && "Category" !== e.valueType && "Radar" !== a.visibleSeries[0].type && (d = (s = this.drawAxisMinorLine(e, i, d, c))[0], c = s[1]), this.renderTickLine(e, t, h, c, m), this.renderGridLine(e, t, l, d, m) } }, t.prototype.drawAxisMinorLine = function (e, t, i, n) { for (var r, o, s, a = t, l = e.visibleRange, h = [], d = 0; d < e.minorTicksPerInterval; d++)if (a += ("DateTime" === e.valueType ? e.dateTimeInterval : e.visibleRange.interval) / (e.minorTicksPerInterval + 1), Bi(a, l)) { s = Ki($i(a, e), this.startAngle), r = this.centerX + this.chart.radius * s.x, o = this.centerY + this.chart.radius * s.y; var c = r + e.minorTickLines.height * s.x * ("Inside" === e.tickPosition ? -1 : 1), p = o + e.minorTickLines.height * s.y * ("Inside" === e.tickPosition ? -1 : 1); i = i.concat("M " + this.centerX + " " + this.centerY + "L " + r + " " + o), n = n.concat("M " + r + " " + o + "L " + c + " " + p) } return h.push(i), h.push(n), h }, t.prototype.drawXAxisLabels = function (e, t) { var i, n, r, o, s, a, l = this.chart, h = 0, d = 0, c = l.renderer.createGroup({ id: l.element.id + "AxisLabels" + t }), p = "Inside" === e.labelPosition, u = "", g = "Category" === e.valueType && "BetweenTicks" === e.labelPlacement && "Radar" !== l.visibleSeries[0].type ? .5 : 0, m = l.radius + e.majorTickLines.height; m = p ? -m : m; for (var f = 0, y = e.visibleLabels.length; f < y; f++)n = Ki($i(e.visibleLabels[f].value + g, e), this.startAngle), isNaN(n.x) || isNaN(n.y) || (h = this.centerX + (m + e.majorTickLines.height + 5) * n.x, d = this.centerY + (m + e.majorTickLines.height + 5) * n.y, u = parseFloat(h.toFixed(1)) === parseFloat(this.centerX.toFixed(1)) ? "middle" : h < this.centerX && !p || h > this.centerX && p ? "end" : "start"), r = e.visibleLabels[f].text, a = e.visibleLabels[f], 0 === f ? o = h : f === e.visibleLabels.length - 1 && "Category" !== e.valueType && (s = xi(r, e.labelStyle).height, r = (s += h) > o ? "" : r), i = new nj(l.element.id + t + "_AxisLabel_" + f, h, d, u, r, "", "central"), $n(l.renderer, i, a.labelStyle, a.labelStyle.color || l.themeStyle.axisLabel, c, !1, l.redraw, !0, !0); this.element.appendChild(c) }, t.prototype.renderTickLine = function (e, t, i, n, r) { var o, s, a, l = this.chart; e.majorTickLines.width > 0 && (s = (a = Sn(l.element.id + "_MajorTickLine_" + t + "_" + r)) ? a.getAttribute("d") : null, o = new rj(l.element.id + "_MajorTickLine_" + t + "_" + r, "transparent", e.majorTickLines.width, e.majorTickLines.color || l.themeStyle.majorTickLine, null, null, i), kn(l.enableCanvas, l.yAxisElements, l.renderer.drawPath(o), l.redraw, !0, "x", "y", null, s)), e.minorTickLines.width > 0 && (s = (a = Sn(l.element.id + "_MinorTickLine_" + t + "_" + r)) ? a.getAttribute("d") : null, o = new rj(l.element.id + "_MinorTickLine_" + t + "_" + r, "transparent", e.minorTickLines.width, e.minorTickLines.color || l.themeStyle.minorTickLine, null, null, n), kn(l.enableCanvas, l.yAxisElements, l.renderer.drawPath(o), l.redraw, !0, "x", "y", null, s)) }, t.prototype.renderGridLine = function (e, t, i, n, r) { var o, s, a, l = this.chart; e.majorGridLines.width > 0 && (s = (a = Sn(l.element.id + "_MajorGridLine_" + t + "_" + r)) ? a.getAttribute("d") : null, o = new rj(l.element.id + "_MajorGridLine_" + t + "_" + r, "transparent", e.majorGridLines.width, e.majorGridLines.color || l.themeStyle.majorGridLine, null, e.majorGridLines.dashArray, i), kn(l.enableCanvas, this.element, l.renderer.drawPath(o), l.redraw, !0, "x", "y", null, s)), e.minorGridLines.width > 0 && (s = (a = Sn(l.element.id + "_MinorGridLine_" + t + "_" + r)) ? a.getAttribute("d") : null, o = new rj(l.element.id + "_MinorGridLine_" + t + "_" + r, "transparent", e.minorGridLines.width, e.minorGridLines.color || l.themeStyle.minorGridLine, null, e.minorGridLines.dashArray, n), kn(l.enableCanvas, this.element, l.renderer.drawPath(o), l.redraw, !0, "x", "y", null, s)) }, t }(_R), nz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), rz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return nz(t, e), t.prototype.render = function (e, t, i, n) { var r = an(e.drawType); e.drawType.indexOf("Column") > -1 ? this.columnDrawTypeRender(e, t, i) : e.chart[r + "SeriesModule"].render(e, t, i, n) }, t.prototype.columnDrawTypeRender = function (e, t, i) { var n, r, o, s, a, l, h, d, c, p, u, g, m, f, y, v, w, b, C, L = t.actualRange.min, M = e.clipRect.width / 2 + e.clipRect.x, S = e.clipRect.height / 2 + e.clipRect.y, x = "RangeColumn" === e.drawType, T = "Polar" === e.type, D = "Logarithmic" === i.valueType, A = "StackingColumn" === e.drawType, E = "", j = 0, I = (e.points[1] ? e.points[1].xValue : 2 * e.points[0].xValue) - e.points[0].xValue, k = "Category" === t.valueType && "BetweenTicks" === t.labelPlacement ? 0 : I / 2, P = "DateTime" === t.valueType ? t.dateTimeInterval : 1; this.getSeriesPosition(e); var N = t.isInversed ? e.rectCount - 1 - e.position : e.position; do { j += P, L += P } while (L <= t.actualRange.max - ("Category" === t.valueType ? 0 : 1)); for (var O = 0, R = e.points; O < R.length; O++) { var z = R[O]; z.symbolLocations = [], z.regions = [], z.visible && Wi(e.points[z.index - 1], z, e.points[z.index + 1], e) && (a = (t.isInversed ? t.visibleRange.max - z.xValue : z.xValue - t.visibleRange.min) + (I / e.rectCount * N - k) + j / 360 * t.startAngle, a /= j, h = o = 2 * Math.PI * (a + t.startAngle), d = s = 2 * Math.PI * (a + t.startAngle + I / e.rectCount / j), o -= .5 * Math.PI, s = s - .5 * Math.PI - 1e-6, A || x ? (m = x ? z.low : e.stackedValues.startValues[z.index], f = x ? z.high : e.stackedValues.endValues[z.index], c = M + (l = m === (f = (f = D ? Ri(0 === f ? 1 : f, i.logBase) : f) > i.actualRange.max ? i.actualRange.max : f) ? 0 : e.chart.radius * Xi(f, i)) * Math.cos(o), p = M + l * Math.cos(s), u = S + l * Math.sin(o), g = S + l * Math.sin(s), v = M + (y = e.chart.radius * Xi(0 === m && 0 !== i.visibleRange.min ? i.visibleRange.min : m, i)) * Math.cos(o), w = S + y * Math.sin(o), b = M + y * Math.cos(s), C = S + y * Math.sin(s), E = T ? "M " + c + " " + u + " A " + l + " " + l + " 0 0 1 " + p + " " + g + " L " + b + " " + C + " A " + y + " " + y + " 1 0 0 " + v + " " + w + " Z" : "M " + c + " " + u + " L " + p + " " + g + " L " + b + " " + C + " L " + v + " " + w + " Z", z.regionData = new rI(h, d, y, l, a)) : (f = z.yValue > i.actualRange.max ? i.actualRange.max : z.yValue, c = M + (l = e.chart.radius * Xi(D ? Ri(f, i.logBase) : f, i)) * Math.cos(o), p = M + l * Math.cos(s), u = S + l * Math.sin(o), g = S + l * Math.sin(s), E = T ? "M " + c + " " + u + " A " + l + " " + l + " 0 0 1 " + p + " " + g + " L " + M + " " + S + " Z" : "M " + c + " " + u + " L " + p + " " + g + " L " + M + " " + S + " Z", z.regionData = new rI(h, d, 0, l, a)), r = this.triggerEvent(e.chart, e, z), n = new rj(e.chart.element.id + "_Series_" + e.index + "_Point_" + z.index, r.fill, r.border.width, r.border.color, e.opacity, e.dashArray, E), r.cancel || (this.appendLinePath(n, e, ""), T ? (z.symbolLocations.push({ x: M + l * Math.cos(o + (s - o) / 2), y: S + l * Math.sin(o + (s - o) / 2) }), x && z.symbolLocations.push({ x: M + y * Math.cos(o + (s - o) / 2), y: S + y * Math.sin(o + (s - o) / 2) })) : (z.symbolLocations.push({ x: (c + p) / 2, y: (u + g) / 2 }), x && z.symbolLocations.push({ x: (b + v) / 2, y: (C + w) / 2 })))) } this.renderMarker(e), e.isRectSeries = !0 }, t.prototype.triggerEvent = function (e, t, i) { var n = { cancel: !1, name: yj, series: t, point: i, fill: t.setPointColor(i, t.interior), border: t.setBorderColor(i, { width: t.border.width, color: t.border.color }) }; return e.trigger(yj, n), i.color = n.fill, n }, t.prototype.getSeriesPosition = function (e) { for (var t = [], i = [], n = { rectCount: 0, position: null }, r = 0, o = e.chart.visibleSeries; r < o.length; r++) { var s = o[r]; !s.visible || "Polar" !== s.type && "Radar" !== s.type || -1 === s.drawType.indexOf("Column") || t.push(s) } t.forEach(function (e) { -1 !== e.drawType.indexOf("Stacking") ? e.stackingGroup ? void 0 === i[e.stackingGroup] ? (e.position = n.rectCount, i[e.stackingGroup] = n.rectCount++) : e.position = i[e.stackingGroup] : null === n.position ? (e.position = n.rectCount, n.position = n.rectCount++) : e.position = n.position : e.position = n.rectCount++ }), t.forEach(function (e) { e.rectCount = n.rectCount }) }, t.prototype.doAnimation = function (e) { e.animation; var t = e.animation.duration, i = e.animation.delay, n = e.seriesElement.childNodes, r = 1; if ("Scatter" === e.drawType) for (var o = 0, s = e.points; o < s.length; o++) { var a = s[o]; a.symbolLocations.length && n[r] && (pn(n[r], i, t, e, a.index, a.symbolLocations[0], !1), r++) } else for (r = 1; r < n.length; r++)this.doPolarRadarAnimation(n[r], i, t, e) }, t.prototype.doPolarRadarAnimation = function (e, t, i, n) { var r = n.clipRect.width / 2 + n.clipRect.x, o = n.clipRect.height / 2 + n.clipRect.y, s = 0; e.style.visibility = "hidden", new fw({}).animate(e, { duration: i, delay: t, progress: function (t) { t.timeStamp > t.delay && (t.element.style.visibility = "visible", s = (t.timeStamp - t.delay) / t.duration, e.setAttribute("transform", "translate(" + r + " " + o + ") scale(" + s + ") translate(" + -r + " " + -o + ")")) }, end: function (t) { e.style.visibility = "visible", e.removeAttribute("transform"), n.chart.trigger("animationComplete", { series: n.chart.isBlazor ? {} : n }) } }) }, t.prototype.getModuleName = function () { return "PolarSeries" }, t.prototype.destroy = function (e) { }, t }(iz), oz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), sz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return oz(t, e), t.prototype.render = function (e, t, i, n) { var r = an(e.drawType); -1 === e.drawType.indexOf("Column") ? e.chart[r + "SeriesModule"].render(e, t, i, n) : this.columnDrawTypeRender(e, t, i) }, t.prototype.getModuleName = function () { return "RadarSeries" }, t.prototype.destroy = function (e) { }, t }(rz), az = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), lz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return az(t, e), t.prototype.render = function (e) { for (var t, i, n = this.getSideBySideInfo(e), r = e.stackedValues, o = 0, s = e.points; o < s.length; o++) { var a = s[o]; a.symbolLocations = [], a.regions = [], a.visible && Wi(e.points[a.index - 1], a, e.points[a.index + 1], e) && (t = this.getRectangle(a.xValue + n.start, r.endValues[a.index], a.xValue + n.end, r.startValues[a.index], e), (i = this.triggerEvent(e, a, e.interior, { width: e.border.width, color: e.border.color })).cancel || (this.drawRectangle(e, a, t, i), this.updateSymbolLocation(a, t, e))) } this.renderMarker(e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StackingBarSeries" }, t.prototype.doAnimation = function (e) { this.animate(e) }, t }(qR), hz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hz(t, e), t.prototype.render = function (e) { for (var t, i = this.getSideBySideInfo(e), n = Math.max(e.border.width, 1), r = 0, o = e.points; r < o.length; r++) { var s = o[r], a = "", l = void 0, h = void 0; (i.start + i.end) / 2, s.regions = [], s.symbolLocations = [], s.visible && Wi(e.points[s.index - 1], s, e.points[s.index + 1], e) && (h = this.getRectangle(s.xValue + i.median, Math.max(s.high, s.low), s.xValue + i.median, Math.min(s.high, s.low), e), e.chart.requireInvertedAxis ? (h.y -= n / 2, h.height = n) : (h.x -= n / 2, h.width = n), l = this.getRectangle(s.xValue + i.start, Math.max(s.open, s.close), s.xValue + i.end, Math.min(s.open, s.close), e), a = this.getPathString(h, l, e), (t = this.triggerPointRenderEvent(e, s)).cancel || (this.drawCandle(e, s, l, t, a), this.updateSymbolLocation(s, h, e), this.updateSymbolLocation(s, l, e))) } }, t.prototype.triggerPointRenderEvent = function (e, t) { var i; i = this.getCandleColor(t, e); var n = { color: e.border.color, width: Math.max(e.border.width, 1) }; return this.triggerEvent(e, t, i, n) }, t.prototype.getCandleColor = function (e, t) { var i = t.points[e.index - 1]; return !1 === t.enableSolidCandles ? i && i.close > e.close ? t.bullFillColor : t.bearFillColor : e.open > e.close ? t.bullFillColor : t.bearFillColor }, t.prototype.getPathString = function (e, t, i) { var n = "", r = (i.chart.requireInvertedAxis ? e.height : e.width, i.chart.requireInvertedAxis ? e.y + e.height / 2 : e.x + e.width / 2); return n += i.chart.requireInvertedAxis ? "M " + e.x + " " + r + " L " + t.x + " " + r : "M " + r + " " + e.y + " L " + r + " " + t.y, n = n.concat(" M " + t.x + " " + t.y + " L " + (t.x + t.width) + " " + t.y + " L " + (t.x + t.width) + " " + (t.y + t.height) + " L " + t.x + " " + (t.y + t.height) + " Z"), n += i.chart.requireInvertedAxis ? " M " + (t.x + t.width) + " " + r + " L " + (e.x + e.width) + " " + r : " M " + r + " " + (t.y + t.height) + " L " + r + " " + (e.y + e.height) }, t.prototype.drawCandle = function (e, t, i, n, r) { if ((e.chart.requireInvertedAxis ? i.height : i.width) <= 0) return null; var o = e.enableSolidCandles ? n.fill : t.open > t.close ? n.fill : "transparent"; n.border.color = n.fill; var s = new rj(e.chart.element.id + "_Series_" + e.index + "_Point_" + t.index, o, n.border.width, n.border.color, e.opacity, e.dashArray, r), a = Sn(s.id), l = a ? a.getAttribute("d") : null, h = e.chart.renderer.drawPath(s, new Int32Array([e.clipRect.x, e.clipRect.y])); h.setAttribute("aria-label", t.x.toString() + ":" + t.high.toString() + ":" + t.low.toString() + ":" + t.close.toString() + ":" + t.open.toString()), e.chart.enableCanvas || e.seriesElement.appendChild(h), gn(a, r, e.chart.redraw, l) }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.getModuleName = function () { return "CandleSeries" }, t.prototype.destroy = function (e) { }, t }(qR), cz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return cz(t, e), t.prototype.render = function (e) { e.isRectSeries = !0; for (var t, i, n = this.getSideBySideInfo(e), r = e.stackedValues, o = 0, s = e.points; o < s.length; o++) { var a = s[o]; a.symbolLocations = [], a.regions = [], a.visible && Wi(e.points[a.index - 1], a, e.points[a.index + 1], e) && (t = this.getRectangle(a.xValue + n.start, r.endValues[a.index], a.xValue + n.end, r.startValues[a.index], e), (i = this.triggerEvent(e, a, e.interior, { width: e.border.width, color: e.border.color })).cancel || (this.drawRectangle(e, a, t, i), this.updateSymbolLocation(a, t, e))) } this.renderMarker(e) }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StackingColumnSeries" }, t }(qR), uz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return uz(t, e), t.prototype.render = function (e, t, i, n) { var r, o, s, a, l = "", h = "M", d = null, c = this.enableComplexProperty(e); o = "Category" === t.valueType && "BetweenTicks" === t.labelPlacement ? .5 : 0; for (var p = 0, u = c; p < u.length; p++) { var g = u[p]; g.symbolLocations = [], g.regions = [], g.visible && Wi(c[g.index - 1], g, c[g.index + 1], e) ? (null != d ? (a = jn(g.xValue, g.yValue, t, i, n), s = jn(d.xValue, d.yValue, t, i, n), l = l.concat(h + " " + s.x + " " + s.y + " L " + a.x + " " + s.y + " L " + a.x + " " + a.y + " "), h = "L") : (s = jn(g.xValue - o, g.yValue, t, i, n), l = l.concat(h + " " + s.x + " " + s.y + " "), h = "L"), this.storePointLocation(g, e, n, jn), d = g) : (d = "Drop" === e.emptyPointSettings.mode ? d : null, h = "Drop" === e.emptyPointSettings.mode ? h : "M") } s = jn(c[c.length - 1].xValue + o, c[c.length - 1].yValue, t, i, n), l = l.concat(h + " " + s.x + " " + s.y + " "), r = new rj(e.chart.element.id + "_Series_" + e.index, "transparent", e.width, e.interior, e.opacity, e.dashArray, l), this.appendLinePath(r, e, ""), this.renderMarker(e) }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StepLineSeries" }, t }(_R), mz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), fz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return mz(t, e), t.prototype.render = function (e, t, i, n) { var r, o, s, a, l, h, d = null, c = "", p = e.points.length, u = Math.max(e.yAxis.visibleRange.min, 0), g = null; h = "Category" === t.valueType && "BetweenTicks" === t.labelPlacement ? .5 : 0; for (var m = 0; m < p; m++)l = (a = e.points[m]).xValue, a.symbolLocations = [], a.regions = [], a.visible && Wi(e.points[m - 1], a, e.points[m + 1], e) && (null === d && (d = new dI(l, 0), c += "M " + (r = jn(l - h, u, t, i, n)).x + " " + r.y + " ", c += "L " + (r = jn(l - h, a.yValue, t, i, n)).x + " " + r.y + " "), null != g ? (r = jn(a.xValue, a.yValue, t, i, n), o = jn(g.xValue, g.yValue, t, i, n), c += "L " + r.x + " " + o.y + " L " + r.x + " " + r.y + " ") : "Gap" === e.emptyPointSettings.mode && (c += "L " + (r = jn(a.xValue, a.yValue, t, i, n)).x + " " + r.y + " "), this.storePointLocation(a, e, n, jn), g = a), e.points[m + 1] && !e.points[m + 1].visible && "Drop" !== e.emptyPointSettings.mode && (c += "L " + (r = jn(l + h, u, t, i, n)).x + " " + r.y, d = null, g = null); p > 1 && "" !== c ? (c += "L " + (o = jn((d = { x: e.points[p - 1].xValue + h, y: e.points[p - 1].yValue }).x, d.y, t, i, n)).x + " " + o.y + " ", c += "L " + (o = jn((d = { x: e.points[p - 1].xValue + h, y: u }).x, d.y, t, i, n)).x + " " + o.y + " ") : c = "", s = new rj(e.chart.element.id + "_Series_" + e.index, e.interior, e.border.width, e.border.color, e.opacity, e.dashArray, c), this.appendLinePath(s, e, ""), this.renderMarker(e) }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StepAreaSeries" }, t }(_R), yz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), vz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yz(t, e), t.prototype.render = function (e, t, i, n) { var r, o, s = "PolarRadar" === e.chart.chartAreaType, a = s ? Ji : jn, l = "", h = e.points, d = h.length, c = e.stackedValues, p = s ? Math.max(e.yAxis.visibleRange.min, c.endValues[0]) : Math.max(e.yAxis.visibleRange.min, c.startValues[0]), u = (e.border, 0), g = a(h[0].xValue, p, t, i, n, e); l = l.concat("M " + g.x + " " + g.y + " "); for (var m = 0; m < d; m++)if (h[m].symbolLocations = [], h[m].regions = [], h[m].visible && Wi(h[m - 1], h[m], h[m + 1], e)) g = a(h[m].xValue, c.endValues[m], t, i, n, e), l = l.concat("L " + g.x + " " + g.y + " "), h[m].symbolLocations.push(a(h[m].xValue, c.endValues[m], t, i, n, e)), h[m].regions.push(new ej(h[m].symbolLocations[0].x - e.marker.width, h[m].symbolLocations[0].y - e.marker.height, 2 * e.marker.width, 2 * e.marker.height)); else if ("Drop" !== e.emptyPointSettings.mode) { for (var f = m - 1; f >= u; f--)o = a(h[f].xValue, c.startValues[f], t, i, n, e), l = l.concat("L " + o.x + " " + o.y + " "); h[m + 1] && h[m + 1].visible && (g = a(h[m + 1].xValue, c.startValues[m + 1], t, i, n, e), l = l.concat("M " + g.x + " " + g.y + " ")), u = m + 1 } "PolarRadar" === e.chart.chartAreaType && h.length > 1 && (l += "L " + (o = a((g = { x: e.points[0].xValue, y: c.endValues[0] }).x, g.y, t, i, n, e)).x + " " + o.y + " "); for (f = d - 1; f >= u; f--) { var y = this.getPreviousSeries(e); "Drop" === y.emptyPointSettings.mode && y.points[f].isEmpty || (o = a(h[f].xValue, c.startValues[f], t, i, n, e), l = l.concat((f === d - 1 && s ? "M" : "L") + " " + o.x + " " + o.y + " ")) } r = new rj(e.chart.element.id + "_Series_" + e.index, e.interior, e.border.width, e.border.color, e.opacity, e.dashArray, l), this.appendLinePath(r, e, ""), this.renderMarker(e) }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StackingAreaSeries" }, t.prototype.getPreviousSeries = function (e) { for (var t = e.chart.visibleSeries, i = 0, n = t.length; i < n; i++)if (e.index === t[i].index && 0 !== i) return t[i - 1]; return t[0] }, t }(_R), wz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), bz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return wz(t, e), t.prototype.render = function (e, t, i, n) { for (var r, o, s, a = "PolarRadar" === e.chart.chartAreaType, l = a ? Ji : jn, h = "", d = e.points, c = d.length, p = e.stackedValues, u = (a ? Math.max(e.yAxis.visibleRange.min, p.endValues[0]) : Math.max(e.yAxis.visibleRange.min, p.startValues[0]), 0); u < c; u++)d[u].regions = [], d[u].symbolLocations = [], d[u].visible && Wi(d[u - 1], d[u], d[u + 1], e) ? (o = l(d[u].xValue, p.endValues[u], t, i, n, e), h = h.concat((u ? "L" : "M") + " " + o.x + " " + o.y + " "), d[u].symbolLocations.push(l(d[u].xValue, p.endValues[u], t, i, n, e)), d[u].regions.push(new ej(d[u].symbolLocations[0].x - e.marker.width, d[u].symbolLocations[0].y - e.marker.height, 2 * e.marker.width, 2 * e.marker.height))) : "Drop" !== e.emptyPointSettings.mode && d[u + 1] && d[u + 1].visible && (o = l(d[u + 1].xValue, p.endValues[u + 1], t, i, n, e), h = h.concat("M " + o.x + " " + o.y + " ")); "PolarRadar" === e.chart.chartAreaType && d.length > 1 && (h += "L " + (s = l((o = { y: p.endValues[0], x: e.points[0].xValue }).x, o.y, t, i, n, e)).x + " " + s.y + " "), r = new rj(e.chart.element.id + "_Series_" + e.index, "none", e.width, e.interior, e.opacity, e.dashArray, h), this.appendLinePath(r, e, ""), this.renderMarker(e) }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StackingLineSeries" }, t }(_R), Cz = function () { function e() { } return e.prototype.render = function (e, t, i, n) { for (var r, o, s = e.marker, a = e.points, l = "PolarRadar" === e.chart.chartAreaType ? Ji : jn, h = e.chart.redraw, d = 0, c = a; d < c.length; d++) { var p = c[d]; o = h && p.symbolLocations ? p.symbolLocations[0] : null, p.symbolLocations = [], p.regions = [], p.visible && Wi(a[p.index - 1], p, a[p.index + 1], e) && (r = { cancel: !1, name: yj, series: e, point: p, fill: e.setPointColor(p, e.interior), border: e.setBorderColor(p, { width: e.border.width, color: e.border.color }), height: s.height, width: s.width, shape: s.shape }, e.chart.trigger(yj, r), r.cancel ? p.marker = { visible: !0 } : (p.symbolLocations.push(l(p.xValue, p.yValue, t, i, n, e)), p.color = r.fill, this.refresh(e, p, r, o))) } }, e.prototype.refresh = function (e, t, i, n) { var r, o, s = e.chart, a = e.marker, l = new rj(s.element.id + "_Series_" + e.index + "_Point_" + t.index, i.fill, i.border.width, i.border.color, e.opacity, null); s.redraw && Sn(l.id) && (r = "Circle" === i.shape ? "c" : "", o = Sn(l.id).getAttribute("d")), kn(!1, e.seriesElement, bn(t.symbolLocations[0], i.shape, new $E(i.width, i.height), a.imageUrl, l, (t.x.toString(), t.yValue.toString()), e.chart.svgRenderer, e.clipRect), s.redraw, !0, r + "x", r + "y", n, o), t.regions.push(new ej(t.symbolLocations[0].x - a.width, t.symbolLocations[0].y - a.height, 2 * a.width, 2 * a.height)), t.marker = { border: i.border, fill: i.fill, height: i.height, visible: !0, width: i.width, shape: i.shape } }, e.prototype.doAnimation = function (e) { for (var t = e.animation.duration, i = e.animation.delay, n = e.seriesElement.childNodes, r = 1, o = 0, s = e.points; o < s.length; o++) { var a = s[o]; a.symbolLocations.length && n[r] && (pn(n[r], i, t, e, a.index, a.symbolLocations[0], !1), r++) } }, e.prototype.getModuleName = function () { return "ScatterSeries" }, e.prototype.destroy = function (e) { }, e }(), Lz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Mz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Lz(t, e), t.prototype.render = function (e) { for (var t, i, n = this.getSideBySideInfo(e), r = 0, o = e.points; r < o.length; r++) { var s = o[r]; s.symbolLocations = [], s.regions = [], s.visible && Wi(e.points[s.index - 1], s, e.points[s.index + 1], e) && (t = this.getRectangle(s.xValue + n.start, s.high, s.xValue + n.end, s.low, e), (i = this.triggerEvent(e, s, e.interior, { width: e.border.width, color: e.border.color })).cancel || (this.updateSymbolLocation(s, t, e), this.drawRectangle(e, s, t, i))) } this.renderMarker(e) }, t.prototype.getModuleName = function () { return "RangeColumnSeries" }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.destroy = function (e) { }, t }(qR), Sz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), xz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Sz(t, e), t.prototype.render = function (e) { for (var t, i, n, r, o = this.getSideBySideInfo(e), s = Math.max(e.yAxis.visibleRange.min, 0), a = 0, l = "", h = 0, d = null, c = e.chart.requireInvertedAxis, p = 0, u = e.chart.redraw, g = 0, m = e.points; g < m.length; g++) { var f = m[g]; if (f.symbolLocations = [], f.regions = [], f.visible && Wi(e.points[f.index - 1], f, e.points[f.index + 1], e)) { var y = this.isIntermediateSum(e, f.index), v = this.isSumIndex(e, f.index); h += y || !0 === v ? 0 : f.yValue, n = !0 === y ? p : null === a || v ? s : a, t = this.getRectangle(f.xValue + o.start, h, f.xValue + o.end, n, e), i = this.triggerPointRenderEvent(e, f), y && (p = h), a = h, i.cancel || (this.updateSymbolLocation(f, t, e), this.drawRectangle(e, f, t, i)); var w = f.regions[0]; if (null !== d) { var b = c ? d.x : d.y, C = c ? w.x : w.y, L = c ? d.x + d.width : d.y + d.height, M = c ? w.x + w.width : w.y + w.height; r = Math.round(b) === Math.round(C) || Math.round(L) === Math.round(C) ? c ? w.x : w.y : M, l = c ? l.concat("M " + r + " " + (d.y + d.height) + " L " + r + " " + w.y + " ") : l.concat("M " + d.x + " " + r + " L " + (w.x + w.width) + " " + r + " ") } d = f.regions[0] } } var S = new rj(e.chart.element.id + "_Series_" + e.index + "_Connector_", "none", e.connector.width, e.connector.color, e.opacity, e.connector.dashArray, l); u && Sn(S.id) && (l = Sn(S.id).getAttribute("d")); var x = Zn(u, S.id, S, e.chart.renderer) || e.chart.renderer.drawPath(S, new Int32Array([e.clipRect.x, e.clipRect.y])); x.style.visibility = e.chart.enableCanvas ? null : e.animation.enable && e.chart.animateSeries ? "hidden" : "visible", kn(e.chart.enableCanvas, e.seriesElement, x, u, !0, null, null, null, l), this.renderMarker(e) }, t.prototype.isIntermediateSum = function (e, t) { return void 0 !== e.intermediateSumIndexes && -1 !== e.intermediateSumIndexes.indexOf(t) }, t.prototype.isSumIndex = function (e, t) { return void 0 !== e.sumIndexes && -1 !== e.sumIndexes.indexOf(t) }, t.prototype.triggerPointRenderEvent = function (e, t) { var i, n = this.isIntermediateSum(e, t.index), r = this.isSumIndex(e, t.index); return i = n || r ? e.summaryFillColor : t.y < 0 ? e.negativeFillColor : e.interior, this.triggerEvent(e, t, i, { color: e.border.color, width: e.border.width }) }, t.prototype.processInternalData = function (e, t) { var i, n = e, r = (e.length, t.intermediateSumIndexes), o = t.sumIndexes; if (void 0 !== r && r.length > 0) for (var s = 0; s < r.length; s++)for (var a = 0; a < n.length; a++)a === r[s] && (i = _i(n, 0 === s ? -1 : r[s - 1], r[s], null, t), n[a][t.yName] = i); if (void 0 !== o && o.length > 0) for (var l = 0; l < o.length; l++)for (a = 0; a < n.length; a++)a === o[l] && (i = _i(n, -1, o[l], void 0 !== r ? o : null, t), n[a][t.yName] = i); return n }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.getModuleName = function () { return "WaterfallSeries" }, t.prototype.destroy = function (e) { }, t }(qR), Tz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Dz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Tz(t, e), t.prototype.render = function (e) { for (var t, i, n = this.getSideBySideInfo(e), r = 0, o = e.points; r < o.length; r++) { var s = o[r]; s.symbolLocations = [], s.regions = [], s.visible && Wi(e.points[s.index - 1], s, e.points[s.index + 1], e) && (t = this.getRectangle(s.xValue + n.median, s.high, s.xValue + n.median, s.low, e), (i = this.triggerPointRenderEvent(e, s)).cancel || (e.chart.requireInvertedAxis ? (t.height = i.border.width, t.y = t.y - t.height / 2) : (t.width = i.border.width, t.x = t.x - t.width / 2), i.border.width = 0, this.updateSymbolLocation(s, t, e), this.drawRectangle(e, s, t, i))) } }, t.prototype.triggerPointRenderEvent = function (t, i) { var n = { color: t.fill, width: Math.max(t.border.width, 2) }; return e.prototype.triggerEvent.call(this, t, i, t.interior, n) }, t.prototype.getModuleName = function () { return "HiloSeries" }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.destroy = function (e) { }, t }(qR), Az = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Ez = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Az(t, e), t.prototype.render = function (e) { for (var t, i, n = this.getSideBySideInfo(e), r = Math.max(e.border.width, 2), o = 0, s = e.points; o < s.length; o++) { var a = s[o]; if (a.symbolLocations = [], a.regions = [], a.visible && Wi(e.points[a.index - 1], a, e.points[a.index + 1], e)) { if (t = this.getRectangle(a.xValue + n.start, Math.max(a.high, a.low), a.xValue + n.end, Math.min(a.high, a.low), e), a.regions.push(this.getRectangle(a.xValue + n.median, Math.max(a.high, a.low), a.xValue + n.median, Math.min(a.high, a.low), e)), this.updateTickRegion(!e.chart.requireInvertedAxis, a.regions[0], r), a.regions.push(this.getRectangle(a.xValue + n.start, Math.max(a.open, a.close), a.xValue + n.median, Math.max(a.open, a.close), e)), a.regions.push(this.getRectangle(a.xValue + n.median, Math.min(a.open, a.close), a.xValue + n.end, Math.min(a.open, a.close), e)), !(i = this.triggerPointRenderEvent(e, a)).cancel) { this.updateSymbolLocation(a, a.regions[0], e); var l = { x: a.regions[1].x, y: a.regions[1].y }, h = { x: a.regions[2].x, y: a.regions[2].y }; this.drawHiloOpenClosePath(e, a, l, h, t, i) } this.updateTickRegion(e.chart.requireInvertedAxis, a.regions[1], r), this.updateTickRegion(e.chart.requireInvertedAxis, a.regions[2], r) } } }, t.prototype.updateTickRegion = function (e, t, i) { e ? (t.x -= i / 2, t.width = i) : (t.y -= i / 2, t.height = i) }, t.prototype.triggerPointRenderEvent = function (e, t) { var i = t.open <= t.close ? e.bearFillColor : e.bullFillColor, n = { color: e.border.color, width: Math.max(e.border.width, 1) }; return this.triggerEvent(e, t, i, n) }, t.prototype.drawHiloOpenClosePath = function (e, t, i, n, r, o) { var s, a; e.chart.requireInvertedAxis ? (s = "M " + r.x + " " + (r.y + r.height / 2) + " L " + (r.x + r.width) + " " + (r.y + r.height / 2) + " ", s += "M " + i.x + " " + (r.y + r.height / 2) + " L " + i.x + " " + (r.y + r.height) + " ", s += "M " + n.x + " " + (r.y + r.height / 2) + " L " + n.x + " " + r.y + " ") : (s = "M " + (r.x + r.width / 2) + " " + (r.y + r.height) + " L " + (r.x + r.width / 2) + " " + r.y + " ", s += "M " + r.x + " " + i.y + " L " + (r.x + r.width / 2) + " " + i.y + " ", s += "M " + (r.x + r.width / 2) + " " + n.y + " L " + (r.x + r.width) + " " + n.y + " "), gn(Sn((a = new rj(e.chart.element.id + "_Series_" + e.index + "_Point_" + t.index, o.fill, o.border.width, o.fill, e.opacity, e.dashArray, s)).id), s, e.chart.redraw); var l = e.chart.renderer.drawPath(a, new Int32Array([e.clipRect.x, e.clipRect.y])); l.setAttribute("aria-label", t.x.toString() + ":" + t.high.toString() + ":" + t.low.toString() + ":" + t.close.toString() + ":" + t.open.toString()), e.chart.enableCanvas || e.seriesElement.appendChild(l) }, t.prototype.getModuleName = function () { return "HiloOpenCloseSeries" }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.destroy = function (e) { }, t }(qR), jz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Iz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return jz(t, e), t.prototype.render = function (e, t, i, n) { for (var r, o = "", s = "M", a = void 0, l = this.enableComplexProperty(e), h = 0, d = l.length; h < d; h++) { (r = l[h]).symbolLocations = [], r.regions = []; var c = Math.min(r.low, r.high), p = Math.max(r.low, r.high); if (i.isInversed) { var u = c; c = p, p = u } var g = jn(r.xValue, c, t, i, n), m = jn(r.xValue, p, t, i, n); r.symbolLocations.push(m), r.symbolLocations.push(g); var f = new ej(Math.min(g.x, m.x), Math.min(g.y, m.y), Math.max(Math.abs(m.x - g.x), e.marker.width), Math.max(Math.abs(m.y - g.y), e.marker.width)); n ? f.y -= e.marker.width / 2 : f.x -= e.marker.width / 2, r.regions.push(f), r.visible && Wi(l[r.index - 1], r, l[r.index + 1], e) ? (o = o.concat(s + " " + g.x + " " + g.y + " "), a = !1, (h + 1 < l.length && !l[h + 1].visible || h === l.length - 1) && (s = "M", o = (o = this.closeRangeAreaPath(l, r, e, o, h)).concat(" Z"), a = !0), s = "L") : (!1 === a && 0 !== h && (o = this.closeRangeAreaPath(l, r, e, o, h), a = !0), s = "M", r.symbolLocations = []) } var y = "Indicator" === e.category ? e.chart.element.id + "_Indicator_" + e.index + "_" + e.name : e.chart.element.id + "_Series_" + e.index, v = new rj(y, e.interior, e.border.width, e.border.color, e.opacity, e.dashArray, o); this.appendLinePath(v, e, ""), this.renderMarker(e) }, t.prototype.closeRangeAreaPath = function (e, t, i, n, r) { for (var o = r; o >= 0 && (e[o].visible && e[o].symbolLocations[0]); o--)n += "L " + (t = e[o]).symbolLocations[0].x + " " + t.symbolLocations[0].y + " "; return n }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t.prototype.getModuleName = function () { return "RangeAreaSeries" }, t.prototype.destroy = function (e) { }, t }(_R), kz = function () { function e() { } return e.prototype.render = function (e, t, i, n) { var r, o, s, a, l, h, d = e.marker, c = e.points, p = Math.max(e.chart.initialClipRect.height, e.chart.initialClipRect.width), u = p / 100, g = e.maxRadius * u, m = e.minRadius * u, f = null, y = e.chart.redraw; if (null === e.maxRadius || null === e.minRadius) { for (var v = 0, w = e.chart.visibleSeries; v < w.length; v++) { var b = w[v]; "Bubble" !== b.type || !0 !== b.visible || null !== b.maxRadius && null !== b.minRadius || (f = b.sizeMax > f ? b.sizeMax : f) } m = g = 1, a = p / 5 / 2 * g } else f = e.sizeMax, a = g - m; for (var C = 0, L = c; C < L.length; C++) { var M = L[C]; h = y ? M.symbolLocations[0] : null, M.symbolLocations = [], M.regions = [], M.visible && Wi(c[M.index - 1], M, c[M.index + 1], e) && (s = (s = null === e.maxRadius || null === e.minRadius ? a * Math.abs(+M.size / f) : m + a * Math.abs(+M.size / f)) || m, o = { cancel: !1, name: yj, series: e, point: M, fill: e.setPointColor(M, e.interior), border: e.setBorderColor(M, { width: e.border.width, color: e.border.color }), height: 2 * s, width: 2 * s }, e.chart.trigger(yj, o), o.cancel ? M.marker = { visible: !1 } : (M.symbolLocations.push(jn(M.xValue, M.yValue, t, i, n)), M.color = o.fill, r = new rj(e.chart.element.id + "_Series_" + e.index + "_Point_" + M.index, o.fill, o.border.width, o.border.color, e.opacity, null), l = bn(M.symbolLocations[0], "Circle", new $E(o.width, o.height), d.imageUrl, r, (M.x.toString(), M.yValue.toString()), e.chart.svgRenderer, e.clipRect), kn(!1, e.seriesElement, l, y), M.regions.push(new ej(M.symbolLocations[0].x - s, M.symbolLocations[0].y - s, 2 * s, 2 * s)), M.marker = { border: o.border, fill: o.fill, height: o.height, visible: !0, shape: "Circle", width: o.width }, y && Kn(l, 300, h, M.symbolLocations[0], "cx", "cy"))) } }, e.prototype.destroy = function (e) { }, e.prototype.getModuleName = function () { return "BubbleSeries" }, e.prototype.doAnimation = function (e) { for (var t = e.animation.duration, i = e.animation.delay, n = e.seriesElement.childNodes, r = 1, o = 0, s = e.points; o < s.length; o++) { var a = s[o]; a.symbolLocations.length && (pn(n[r], i, t, e, a.index, a.symbolLocations[0], !1), r++) } }, e }(), Pz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Nz = function (e) { function t(t) { var i = e.call(this, t) || this; return i.splinePoints = [], i } return Pz(t, e), t.prototype.findSplinePoint = function (e) { var t, i = this.filterEmptyPoints(e); if (this.splinePoints = this.findSplineCoefficients(i, e), i.length > 1) { e.drawPoints = []; for (var n = 0, r = i; n < r.length; n++) { var o = r[n]; if (0 !== o.index) { var s = this.getPreviousIndex(i, o.index - 1, e); t = this.getControlPoints(i[s], o, this.splinePoints[s], this.splinePoints[o.index], e), e.drawPoints.push(t), o.yValue && t.controlPoint1.y && t.controlPoint2.y && (e.yMin = Math.floor(Math.min(e.yMin, o.yValue, t.controlPoint1.y, t.controlPoint2.y)), e.yMax = Math.ceil(Math.max(e.yMax, o.yValue, t.controlPoint1.y, t.controlPoint2.y))) } } } }, t.prototype.getPreviousIndex = function (e, t, i) { if ("Drop" !== i.emptyPointSettings.mode) return t; for (; d(e[t]) && t > -1;)t -= 1; return t }, t.prototype.getNextIndex = function (e, t, i) { if ("Drop" !== i.emptyPointSettings.mode) return t; for (; d(e[t]) && t < e.length;)t += 1; return t }, t.prototype.filterEmptyPoints = function (e) { if ("Drop" !== e.emptyPointSettings.mode) return e.points; for (var t = h([], e.points, null, !0), i = 0; i < t.length; i++)t[i].index = i, t[i].isEmpty && (t[i].symbolLocations = [], t[i].regions = [], t.splice(i, 1), i--); return t }, t.prototype.findSplineCoefficients = function (e, t) { var i, n, r, o, s, a, l, h = e.length, d = [], c = [], p = [], u = [], g = [], m = t.cardinalSplineTension ? t.cardinalSplineTension : .5; switch (m = m < 0 ? 0 : m > 1 ? 1 : m, t.splineType) { case "Monotonic": for (var f = 0; f < h - 1; f++)p[f] = e[f + 1].xValue - e[f].xValue, u[f] = e[f + 1].yValue - e[f].yValue, g[f] = u[f] / p[f]; l = g.length, d[0] = g[0], d[h - 1] = g[l - 1]; for (var y = 0; y < p.length; y++)l > y + 1 && (g[y] * g[y + 1] <= 0 ? d[y + 1] = 0 : (a = p[y] + p[y + 1], d[y + 1] = 3 * a / ((a + p[y + 1]) / g[y] + (a + p[y]) / g[y + 1]))); break; case "Cardinal": for (f = 0; f < h; f++)d[f] = 0 === f ? h > 2 ? m * (e[f + 2].xValue - e[f].xValue) : 0 : f === h - 1 ? h > 2 ? m * (e[h - 1].xValue - e[h - 3].xValue) : 0 : m * (e[f + 1].xValue - e[f - 1].xValue); break; default: if ("Clamped" === t.splineType) { e[1].yValue, e[0].yValue, e[1].xValue, e[0].xValue, e[h - 1].xValue, e[h - 2].xValue, e[h - 1].yValue, e[h - 2].yValue; d[0] = 3 * (e[1].yValue - e[0].yValue) / (e[1].xValue - e[0].xValue) - 3, c[0] = .5, d[e.length - 1] = 3 * (e[e.length - 1].yValue - e[e.length - 2].yValue) / (e[e.length - 1].xValue - e[e.length - 2].xValue), d[0] = c[0] = Math.abs(d[0]) === 1 / 0 ? 0 : d[0], d[e.length - 1] = c[e.length - 1] = Math.abs(d[e.length - 1]) === 1 / 0 ? 0 : d[e.length - 1] } else d[0] = c[0] = 0, d[e.length - 1] = 0; for (f = 1; f < h - 1; f++)if (i = e[f].xValue - e[f - 1].xValue, n = e[f + 1].xValue - e[f - 1].xValue, r = e[f + 1].xValue - e[f].xValue, o = e[f + 1].yValue - e[f].yValue || null, s = e[f].yValue - e[f - 1].yValue || null, 0 === i || 0 === n || 0 === r) d[f] = 0, c[f] = 0; else { var v = 1 / (i * d[f - 1] + 2 * n); d[f] = -v * r, c[f] = v * (6 * (o / r - s / i) - i * c[f - 1]) } for (var w = h - 2; w >= 0; w--)d[w] = d[w] * d[w + 1] + c[w] }return d }, t.prototype.getControlPoints = function (e, t, i, n, r) { var o, s, a, l = i, h = n; switch (r.splineType) { case "Cardinal": "DateTime" === r.xAxis.valueType && (l = i / this.dateTimeInterval(r), h = n / this.dateTimeInterval(r)), o = new dI(e.xValue + i / 3, e.yValue + l / 3), s = new dI(t.xValue - n / 3, t.yValue - h / 3), a = new mI(o, s); break; case "Monotonic": var d = (t.xValue - e.xValue) / 3; o = new dI(e.xValue + d, e.yValue + i * d), s = new dI(t.xValue - d, t.yValue - n * d), a = new mI(o, s); break; default: var c = t.xValue - e.xValue; c *= c; var p = 1 / 3 * (2 * e.yValue + t.yValue - 1 / 3 * c * (i + .5 * n)), u = 1 / 3 * (e.yValue + 2 * t.yValue - 1 / 3 * c * (.5 * i + n)); o = new dI((2 * e.xValue + t.xValue) * (1 / 3), p), s = new dI((e.xValue + 2 * t.xValue) * (1 / 3), u), a = new mI(o, s) }return a }, t.prototype.dateTimeInterval = function (e) { var t = e.xAxis.actualIntervalType; return "Years" === t ? 31536e6 : "Months" === t ? 2592e6 : "Days" === t ? 864e5 : "Hours" === t ? 36e5 : "Minutes" === t ? 6e4 : "Seconds" === t ? 1e3 : 2592e6 }, t.prototype.doAnimation = function (e) { var t = e.animation; this.doLinearAnimation(e, t) }, t }(_R), Oz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Rz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oz(t, e), t.prototype.render = function (e, t, i, n) { e.chart, e.marker; for (var r, o, s, a, l, h, d, c, p, u = null, g = "", m = "M", f = this.filterEmptyPoints(e), y = "PolarRadar" === e.chart.chartAreaType ? Ji : jn, v = 0, w = f; v < w.length; v++) { var b = w[v]; p = this.getPreviousIndex(f, b.index - 1, e), b.symbolLocations = [], b.regions = [], b.visible && Wi(f[p], b, f[this.getNextIndex(f, b.index - 1, e)], e) ? (null !== u && (d = (h = e.drawPoints[p]).controlPoint1, c = h.controlPoint2, o = y(u.xValue, u.yValue, t, i, n, e), s = y(b.xValue, b.yValue, t, i, n, e), a = y(d.x, d.y, t, i, n, e), l = y(c.x, c.y, t, i, n, e), g = g.concat(m + " " + o.x + " " + o.y + " C " + a.x + " " + a.y + " " + l.x + " " + l.y + " " + s.x + " " + s.y + " "), m = "L"), u = b, this.storePointLocation(b, e, n, y)) : (m = "M", u = null, b.symbolLocations = []) } var C = "TrendLine" === e.category ? e.chart.element.id + "_Series_" + e.sourceIndex + "_TrendLine_" + e.index : e.chart.element.id + "_Series_" + e.index; r = new rj(C, "transparent", e.width, e.interior, e.opacity, e.dashArray, g), this.appendLinePath(r, e, ""), this.renderMarker(e) }, t.prototype.getModuleName = function () { return "SplineSeries" }, t.prototype.destroy = function (e) { }, t }(Nz), zz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Bz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return zz(t, e), t.prototype.render = function (t) { e.prototype.render.call(this, t), t.showNormalDistribution && this.renderNormalDistribution(t) }, t.prototype.calculateBinInterval = function (e, t) { for (var i = Hi(e) / e.length, n = 0, r = 0, o = e; r < o.length; r++) { var s = o[r]; n += (s - i) * (s - i) } t.histogramValues.mean = i, t.histogramValues.sDValue = Math.round(Math.sqrt(n / e.length - 1)), t.histogramValues.binWidth = t.binInterval || Math.round(3.5 * t.histogramValues.sDValue / Math.pow(e.length, 1 / 3)) }, t.prototype.processInternalData = function (e, t) { var i, n, r = [], o = []; Object.keys(e).forEach(function (i) { o.push(e[i][t.yName]) }), t.histogramValues = { yValues: o }; var s = Math.min.apply(Math, t.histogramValues.yValues); this.calculateBinInterval(t.histogramValues.yValues, t), n = t.histogramValues.binWidth; for (var a, l = 0; l < e.length;)a = o.filter(function (e) { return e >= s && e < s + n }).length, r.push((i = { x: s + n / 2 }, i[t.yName] = a, i)), s += n, l += a; return r }, t.prototype.renderNormalDistribution = function (e) { for (var t, i, n, r = e.xAxis.actualRange.min, o = e.xAxis.actualRange.max, s = "", a = "M", l = e.histogramValues.yValues.length, h = e.histogramValues.binWidth, d = e.histogramValues.mean, c = e.histogramValues.sDValue, p = (o - r) / 499, u = 0; u < 500; u++)s += a + " " + (i = jn(t = r + u * p, Math.exp(-(t - d) * (t - d) / (2 * c * c)) / (c * Math.sqrt(2 * Math.PI)) * h * l, e.xAxis, e.yAxis, e.chart.requireInvertedAxis)).x + " " + i.y + " ", a = "L"; (n = e.chart.renderer.drawPath(new rj(e.chart.element.id + "_Series_" + e.index + "_NDLine", "transparent", 2, e.chart.themeStyle.errorBar, e.opacity, e.dashArray, s), new Int32Array([e.clipRect.x, e.clipRect.y]))).style.visibility = e.chart.enableCanvas ? null : e.animation.enable && e.chart.animateSeries ? "hidden" : "visible", e.chart.enableCanvas || e.seriesElement.appendChild(n) }, t.prototype.doAnimation = function (t) { e.prototype.doAnimation.call(this, t), t.showNormalDistribution && wn(t.seriesElement.lastElementChild, t.animation.duration, 500, "FadeIn") }, t.prototype.getModuleName = function () { return "HistogramSeries" }, t.prototype.destroy = function (e) { }, t }(QR), Fz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Vz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Fz(t, e), t.prototype.render = function (e, t, i, n) { for (var r, o, s, a, l, h, d, c = null, p = "", u = null, g = null, m = this.filterEmptyPoints(e), f = e.points.length, y = "PolarRadar" === e.chart.chartAreaType ? Ji : jn, v = "PolarRadar" === e.chart.chartAreaType ? e.points[0].yValue : Math.max(e.yAxis.visibleRange.min, 0), w = 0; w < f; w++)(h = e.points[w]).symbolLocations = [], h.regions = [], d = this.getPreviousIndex(m, h.index - 1, e), h.visible && Wi(m[d], h, m[this.getNextIndex(m, h.index - 1, e)], e) ? (c ? (a = e.drawPoints[d].controlPoint1, l = e.drawPoints[d].controlPoint2, y(c.xValue, c.yValue, t, i, n, e), r = y(h.xValue, h.yValue, t, i, n, e), o = y(a.x, a.y, t, i, n, e), s = y(l.x, l.y, t, i, n, e), p = p.concat("C " + o.x + " " + o.y + " " + s.x + " " + s.y + " " + r.x + " " + r.y + " ")) : (p += "M " + (u = y(h.xValue, v, t, i, n, e)).x + " " + u.y + " ", p += "L " + (g = y(h.xValue, h.yValue, t, i, n, e)).x + " " + g.y + " "), this.storePointLocation(h, e, n, y), c = h) : (c = null, h.symbolLocations = []), (w + 1 < f && !e.points[w + 1].visible || w === f - 1) && r && u && (u = y(h.xValue, v, t, i, n, e), p = p.concat("L " + u.x + " " + u.y)); this.appendLinePath(new rj(e.chart.element.id + "_Series_" + e.index, e.interior, e.border.width, e.border.color, e.opacity, e.dashArray, p), e, ""), this.renderMarker(e) }, t.prototype.getModuleName = function () { return "SplineAreaSeries" }, t.prototype.destroy = function (e) { }, t }(Nz), Wz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Hz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Wz(t, e), t.prototype.initSeriesCollection = function (e, t) { e.targetSeries = []; var i = new AI(e, "targetSeries", {}, !0); this.setSeriesProperties(i, e, e.type, e.fill, e.width, t) }, t.prototype.setSeriesProperties = function (e, t, i, n, r, o) { e.name = i.length <= 4 ? i.toLocaleUpperCase() : i, e.xName = "x", e.yName = "y", e.fill = n || "#606eff", e.dashArray = t.dashArray, e.width = r, e.xAxisName = t.xAxisName, e.animation = t.animation, e.yAxisName = t.yAxisName, e.clipRectElement = t.clipRectElement, e.points = [], e.enableTooltip = !0, e.interior = e.fill, e.category = "Indicator", e.index = t.index, e.chart = o, e.xMin = 1 / 0, e.xMax = -1 / 0, e.yMin = 1 / 0, e.yMax = -1 / 0, e.xData = [], e.yData = [], e.marker.visible = !1, t.targetSeries.push(e) }, t.prototype.createIndicatorElements = function (e, t, i) { (t.seriesName || t.dataSource) && sn(t.targetSeries[0]); var n = new ej(0, 0, 0, 0); (t.seriesName || t.dataSource) && (n = t.targetSeries[0].clipRect); var r = new aI(e.element.id + "_ChartIndicatorClipRect_" + i, "transparent", { width: 1, color: "Gray" }, 1, { x: 0, y: 0, width: n.width, height: n.height }), o = mn(e.redraw, r, e.renderer); t.indicatorElement = e.renderer.createGroup({ id: e.element.id + "IndicatorGroup" + i, transform: "translate(" + n.x + "," + n.y + ")", "clip-path": "url(#" + e.element.id + "_ChartIndicatorClipRect_" + i + ")" }), t.indicatorElement.appendChild(o); for (var s = 0, a = t.targetSeries; s < a.length; s++) { var l = a[s]; l.clipRectElement = o; var h = l.chart.renderer.createGroup({ id: l.chart.element.id + "_Indicator_" + t.index + "_" + l.name + "_Group" }); t.indicatorElement.appendChild(h), l.seriesElement = h } e.indicatorElements.appendChild(t.indicatorElement) }, t.prototype.getDataPoint = function (e, t, i, n, r, o) { void 0 === o && (o = null); var s = new LI; return s.x = e, s.y = t, s.xValue = i.xValue, s.color = n.fill, s.index = r, s.yValue = t, s.visible = !0, n.xMin = Math.min(n.xMin, s.xValue), n.yMin = Math.min(n.yMin, s.yValue), n.xMax = Math.max(n.xMax, s.xValue), n.yMax = Math.max(n.yMax, s.yValue), n.xData.push(s.xValue), o && "Macd" === o.type && "Column" === n.type && (s.y >= 0 ? s.color = o.macdPositiveColor : s.color = o.macdNegativeColor), s }, t.prototype.getRangePoint = function (e, t, i, n, r, o, s) { void 0 === s && (s = null); var a = new LI; return a.x = e, a.high = t, a.low = i, a.xValue = n.xValue, a.color = r.fill, a.index = o, a.visible = !0, r.xData.push(a.xValue), a }, t.prototype.setSeriesRange = function (e, t, i) { void 0 === i && (i = null), i ? i.points = e : t.targetSeries[0].points = e }, t }(_R), _z = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Yz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return _z(t, e), t.prototype.initDataSource = function (e, t) { var i = [], n = e.points; if (n && n.length) { var r = n, o = an(e.field), s = e.targetSeries[0]; if (r && r.length && r.length >= e.period) { for (var a = 0, l = 0, h = 0; h < e.period; h++)l += r[h][o]; a = l / e.period, i.push(this.getDataPoint(r[e.period - 1].x, a, r[e.period - 1], s, i.length)); for (var d = e.period; d < r.length;)l -= r[d - e.period][o], a = (l += r[d][o]) / e.period, i.push(this.getDataPoint(r[d].x, a, r[d], s, i.length)), d++ } this.setSeriesRange(i, e) } }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "SmaIndicator" }, t }(Hz), Uz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), qz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Uz(t, e), t.prototype.initDataSource = function (e, t) { var i = an(e.field), n = [], r = e.targetSeries[0], o = e.points; if (o && o.length && o.length >= e.period) { for (var s = 0, a = 0, l = 2 / (e.period + 1), h = 0; h < e.period; h++)s += o[h][i]; a = s / e.period, n.push(this.getDataPoint(o[e.period - 1].x, a, o[e.period - 1], r, n.length)); for (var d = e.period; d < o.length;) { var c = n[d - e.period][r.yName], p = (o[d][i] - c) * l + c; n.push(this.getDataPoint(o[d].x, p, o[d], r, n.length)), d++ } } this.setSeriesRange(n, e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "EmaIndicator" }, t }(Hz), Gz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Qz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Gz(t, e), t.prototype.initDataSource = function (e, t) { var i = [], n = an(e.field), r = (e.targetSeries[0], e.points); if (r && r.length && r.length >= e.period) { var o = e.targetSeries[0], s = e.points; if (s.length && s.length >= e.period) { e.period; for (var a = 0, l = [], h = 0, d = s.length, c = e.period; d >= c;) { a = 0; for (var p = h = s.length - d; p < h + c; p++)a += s[p][n]; a /= c, l.push(a), d-- } for (var u = 0; u < c - 1; u++) { a = 0; for (p = 0; p < u + 1; p++)a += s[p][n]; a /= u + 1, l.splice(u, 0, a) } for (h = e.period; h <= l.length;) { a = 0; for (p = h - e.period; p < h; p++)a += l[p]; a /= e.period, i.push(this.getDataPoint(s[h - 1].x, a, s[h - 1], o, i.length)), h++ } } } this.setSeriesRange(i, e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "TmaIndicator" }, t }(Hz), Xz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Jz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Xz(t, e), t.prototype.initDataSource = function (e, t) { e.sourceSeries; var i = [], n = e.points; n.length > 0 && n.length > e.period && (i = this.calculateADPoints(e, n)), this.setSeriesRange(i, e) }, t.prototype.calculateADPoints = function (e, t) { var i = [], n = 0, r = 0, o = 0, s = 0, a = 0, l = e.targetSeries[0]; for (r = 0; r < t.length; r++)o = Number(t[r].high), s = Number(t[r].low), n += ((a = Number(t[r].close)) - s - (o - a)) / (o - s) * Number(t[r].volume), i[r] = this.getDataPoint(t[r].x, n, t[r], l, i.length); return i }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "AccumulationDistributionIndicator" }, t }(Hz), Zz = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Kz = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Zz(t, e), t.prototype.initDataSource = function (e, t) { var i = e.points; i.length > 0 && i.length > e.period && this.calculateATRPoints(e, i) }, t.prototype.calculateATRPoints = function (e, t) { for (var i = 0, n = 0, r = 0, o = 0, s = 0, a = [], l = [], h = e.period, d = 0, c = e.targetSeries[0], p = 0; p < t.length; p++)n = Number(t[p].high) - Number(t[p].low), p > 0 && (r = Math.abs(Number(t[p].high) - Number(t[p - 1].close)), o = Math.abs(Number(t[p].low) - Number(t[p - 1].close))), d += s = Math.max(n, r, o), p >= h ? (i = (Number(l[p - 1].y) * (h - 1) + s) / h, a.push(this.getDataPoint(t[p].x, i, t[p], c, a.length))) : (i = d / h, p === h - 1 && a.push(this.getDataPoint(t[p].x, i, t[p], c, a.length))), l[p] = { x: t[p].x, y: i }; this.setSeriesRange(a, e) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "AtrIndicator" }, t }(Hz), $z = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), eB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return $z(t, e), t.prototype.initSeriesCollection = function (t, i) { e.prototype.initSeriesCollection.call(this, t, i); var n = new AI(t, "targetSeries", {}, !0); e.prototype.setSeriesProperties.call(this, n, t, "UpperLine", t.upperLine.color, t.upperLine.width, i) }, t.prototype.initDataSource = function (e, t) { var i = [], n = [], r = e.points; if (r && r.length) { var o = e.targetSeries[1], s = e.targetSeries[0], a = e.period; if (r.length >= e.period) for (var l = 0; l < r.length; l++)i.push(this.getDataPoint(r[l].x, 100, r[l], o, i.length)), l < a || n.push(this.getDataPoint(r[l].x, Number(r[l].close) / Number(r[l - a].close) * 100, r[l], s, n.length)); this.setSeriesRange(n, e, e.targetSeries[0]), this.setSeriesRange(i, e, e.targetSeries[1]) } }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "MomentumIndicator" }, t }(Hz), tB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), iB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return tB(t, e), t.prototype.initSeriesCollection = function (t, i) { if (e.prototype.initSeriesCollection.call(this, t, i), t.showZones) { var n = new AI(t, "targetSeries", {}, !0); e.prototype.setSeriesProperties.call(this, n, t, "LowerLine", t.lowerLine.color, t.lowerLine.width, i); var r = new AI(t, "targetSeries", {}, !0); e.prototype.setSeriesProperties.call(this, r, t, "UpperLine", t.upperLine.color, t.upperLine.width, i) } }, t.prototype.initDataSource = function (e, t) { var i = [], n = [], r = [], o = e.targetSeries[0], s = e.points; if (s.length && s.length >= e.period) { if (e.showZones) for (var a = 0; a < s.length; a++)r.push(this.getDataPoint(s[a].x, e.overBought, s[a], e.targetSeries[1], r.length)), n.push(this.getDataPoint(s[a].x, e.overSold, s[a], e.targetSeries[2], n.length)); var l = Number(s[0].close), h = 0, d = 0; for (a = 1; a <= e.period; a++) { var c = Number(s[a].close); c > l ? h += c - l : d += l - c, l = c } h /= e.period, d /= e.period, i.push(this.getDataPoint(s[e.period].x, 100 - 100 / (1 + h / d), s[e.period], o, i.length)); for (var p = e.period + 1; p < s.length; p++) { var u = Number(s[p].close); u > l ? (h = (h * (e.period - 1) + (u - l)) / e.period, d = d * (e.period - 1) / e.period) : u < l && (d = (d * (e.period - 1) + (l - u)) / e.period, h = h * (e.period - 1) / e.period), l = u, i.push(this.getDataPoint(s[p].x, 100 - 100 / (1 + h / d), s[p], o, i.length)) } } this.setSeriesRange(i, e, e.targetSeries[0]), e.showZones && (this.setSeriesRange(r, e, e.targetSeries[1]), this.setSeriesRange(n, e, e.targetSeries[2])) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "RsiIndicator" }, t }(Hz), nB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), rB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return nB(t, e), t.prototype.initSeriesCollection = function (t, i) { e.prototype.initSeriesCollection.call(this, t, i); var n = new AI(t, "targetSeries", {}, !0); if (this.setSeriesProperties(n, t, "PeriodLine", t.periodLine.color, t.periodLine.width, i), t.showZones) { var r = new AI(t, "targetSeries", {}, !0); this.setSeriesProperties(r, t, "UpperLine", t.upperLine.color, t.upperLine.width, i); var o = new AI(t, "targetSeries", {}, !0); this.setSeriesProperties(o, t, "LowerLine", t.lowerLine.color, t.lowerLine.width, i) } }, t.prototype.initDataSource = function (e, t) { var i = [], n = [], r = [], o = [], s = [], a = (e.sourceSeries, e.points); if (a.length && a.length >= e.period) { if (e.showZones) for (var l = 0; l < a.length; l++)n.push(this.getDataPoint(a[l].x, e.overBought, a[l], e.targetSeries[2], n.length)), r.push(this.getDataPoint(a[l].x, e.overSold, a[l], e.targetSeries[3], r.length)); s = this.calculatePeriod(e.period, e.kPeriod, a, e.targetSeries[1]), o = this.smaCalculation(e.period, e.kPeriod, s, e.targetSeries[1]), i = this.smaCalculation(e.period + e.kPeriod - 1, e.dPeriod, s, e.targetSeries[0]) } this.setSeriesRange(i, e, e.targetSeries[0]), this.setSeriesRange(o, e, e.targetSeries[1]), e.showZones && (this.setSeriesRange(n, e, e.targetSeries[2]), this.setSeriesRange(r, e, e.targetSeries[3])) }, t.prototype.smaCalculation = function (e, t, i, n) { var r = []; if (i.length >= e + t) { for (var o = e + (t - 1), s = [], a = [], l = 0; l < i.length; l++) { var h = Number(i[l].y); s.push(h) } for (var d = s.length; d >= o;) { var c = 0; for (l = e - 1; l < e + t - 1; l++)c += s[l]; c /= t, a.push(c.toFixed(2)), s.splice(0, 1), d = s.length } var p = o - 1; for (l = 0; l < i.length; l++)l < p || (r.push(this.getDataPoint(i[l].x, Number(a[l - p]), i[l], n, r.length)), i[l].y = Number(a[l - p])) } return r }, t.prototype.calculatePeriod = function (e, t, i, n) { for (var r = [], o = [], s = [], a = [], l = 0; l < i.length; l++)r[l] = i[l].low, o[l] = i[l].high, s[l] = i[l].close; if (i.length > e) { for (var h = [], d = [], c = 0; c < e - 1; ++c)d.push(0), h.push(0), a.push(this.getDataPoint(i[c].x, i[c].close, i[c], n, a.length)); for (c = e - 1; c < i.length; ++c) { var p = Number.MAX_VALUE, u = Number.MIN_VALUE; for (l = 0; l < e; ++l)p = Math.min(p, r[c - l]), u = Math.max(u, o[c - l]); d.push(u), h.push(p) } for (c = e - 1; c < i.length; ++c) { var g = 0, m = 0; g += s[c] - h[c], m += d[c] - h[c], a.push(this.getDataPoint(i[c].x, g / m * 100, i[c], n, a.length)) } } return a }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "StochasticIndicator" }, t }(Hz), oB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), sB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return oB(t, e), t.prototype.initSeriesCollection = function (e, t) { e.targetSeries = []; var i = new AI(e, "targetSeries", {}, !0); i.type = "RangeArea", "transparent" !== e.bandColor && "none" !== e.bandColor && this.setSeriesProperties(i, e, "BollingerBand", e.bandColor, 0, t); var n = new AI(e, "targetSeries", {}, !0); this.setSeriesProperties(n, e, "BollingerBand", e.fill, e.width, t); var r = new AI(e, "targetSeries", {}, !0); this.setSeriesProperties(r, e, "UpperLine", e.upperLine.color, e.upperLine.width, t); var o = new AI(e, "targetSeries", {}, !0); this.setSeriesProperties(o, e, "LowerLine", e.lowerLine.color, e.lowerLine.width, t) }, t.prototype.initDataSource = function (e, t) { var i = "transparent" !== e.bandColor && "none" !== e.bandColor, n = i ? 1 : 0, r = [], o = [], s = [], a = [], l = e.targetSeries[n + 1], h = e.targetSeries[n + 2], d = e.targetSeries[n], c = i ? e.targetSeries[0] : null, p = e.points; if (p.length && p.length >= e.period) { for (var u = 0, g = 0, m = e.standardDeviation, f = p.length, y = Math.round(e.period), v = [], w = [], b = [], C = 0; C < y; C++)u += Number(p[C].close); for (var L = u / e.period, M = 0; M < f; M++) { var S = Number(p[M].close); if (M >= y - 1 && M < f) { if (M - e.period >= 0) { L = (u += S - Number(p[M - y].close)) / e.period, v[M] = L, w[M] = Math.pow(S - L, 2), g += w[M] - w[M - y] } else v[M] = L, w[M] = Math.pow(S - L, 2), g += w[M]; var x = Math.sqrt(g / e.period), T = v[M] - m * x, D = v[M] + m * x; if (M + 1 === y) for (var A = 0; A < y - 1; A++)b[A] = { X: p[A].x, mb: v[M], lb: T, ub: D, visible: !0 }; b[M] = { X: p[M].x, mb: v[M], lb: T, ub: D, visible: !0 } } else M < e.period - 1 && (v[M] = L, w[M] = Math.pow(S - L, 2), g += w[M]) } for (var E = -1, j = -1, I = 0; I < f; I++)if (I >= y - 1) { o.push(this.getDataPoint(p[I].x, b[I].ub, p[I], l, o.length)), s.push(this.getDataPoint(p[I].x, b[I].lb, p[I], h, s.length)), r.push(this.getDataPoint(p[I].x, b[I].mb, p[I], d, r.length)), i && a.push(this.getRangePoint(p[I].x, o[++E].y, s[++j].y, p[I], c, a.length)) } } i && this.setSeriesRange(a, e, e.targetSeries[0]), this.setSeriesRange(r, e, e.targetSeries[n]), this.setSeriesRange(o, e, e.targetSeries[n + 1]), this.setSeriesRange(s, e, e.targetSeries[n + 2]) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "BollingerBandsIndicator" }, t }(Hz), aB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), lB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return aB(t, e), t.prototype.initSeriesCollection = function (t, i) { if (e.prototype.initSeriesCollection.call(this, t, i), "Line" === t.macdType || "Both" === t.macdType) { var n = new AI(t, "targetSeries", {}, !0); this.setSeriesProperties(n, t, "MacdLine", t.macdLine.color, t.macdLine.width, i) } if ("Histogram" === t.macdType || "Both" === t.macdType) { var r = new AI(t, "targetSeries", {}, !0); r.type = "Column", this.setSeriesProperties(r, t, "Histogram", t.macdPositiveColor, t.width, i) } }, t.prototype.initDataSource = function (e, t) { var i, n, r = [], o = e.fastPeriod, s = e.slowPeriod, a = e.period, l = o + a, h = [], d = [], c = e.points, p = e.targetSeries[0]; if ("Histogram" === e.macdType ? i = e.targetSeries[1] : (n = e.targetSeries[1], "Both" === e.macdType && (i = e.targetSeries[2])), c && l < c.length && s <= o && s > 0 && l - 2 >= 0) { var u = this.calculateEMAValues(s, c, "close"), g = this.calculateEMAValues(o, c, "close"), m = this.getMACDVales(e, u, g); h = this.getMACDPoints(e, m, c, n || p); var f = this.calculateEMAValues(a, h, "y"); r = this.getSignalPoints(e, f, c, p), i && (d = this.getHistogramPoints(e, m, f, c, i)) } this.setSeriesRange(r, e, e.targetSeries[0]), i && this.setSeriesRange(d, e, i), n && this.setSeriesRange(h, e, n) }, t.prototype.calculateEMAValues = function (e, t, i) { for (var n = 0, r = 0, o = [], s = 2 / (e + 1), a = 0; a < e; a++)n += Number(t[a][i]); r = n / e, o.push(r); for (var l = r, h = e; h < t.length; h++)l = (Number(t[h][i]) - l) * s + l, o.push(l); return o }, t.prototype.getMACDPoints = function (e, t, i, n) { for (var r = [], o = e.fastPeriod - 1, s = 0; o < i.length;)r.push(this.getDataPoint(i[o].x, t[s], i[o], n, r.length)), o++ , s++; return r }, t.prototype.getSignalPoints = function (e, t, i, n) { for (var r = e.fastPeriod + e.period - 2, o = 0, s = []; r < i.length;)s.push(this.getDataPoint(i[r].x, t[o], i[r], n, s.length)), r++ , o++; return s }, t.prototype.getMACDVales = function (e, t, i) { for (var n = [], r = e.fastPeriod - e.slowPeriod, o = 0; o < i.length; o++)n.push(t[o + r] - i[o]); return n }, t.prototype.getHistogramPoints = function (e, t, i, n, r) { for (var o = e.fastPeriod + e.period - 2, s = 0, a = []; o < n.length;)a.push(this.getDataPoint(n[o].x, t[s + (e.period - 1)] - i[s], n[o], r, a.length, e)), o++ , s++; return a }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "MacdIndicator" }, t }(Hz), hB = function () { function e() { } return e.prototype.initSeriesCollection = function (e, t) { var i = new AI(e, "targetSeries", {}, !0); "Linear" === e.type || "MovingAverage" === e.type ? i.type = "Line" : i.type = "Spline", this.setSeriesProperties(i, e, e.type, e.fill, e.width, t) }, e.prototype.setSeriesProperties = function (e, t, i, n, r, o) { e.name = t.name, e.xName = "x", e.yName = "y", e.fill = n || "blue", e.width = r, e.clipRectElement = t.clipRectElement, e.points = [], e.enableTooltip = t.enableTooltip, e.index = t.index, e.sourceIndex = t.sourceIndex, e.interior = e.fill, e.animation = t.animation, e.legendShape = "HorizontalLine", e.marker = t.marker, e.category = "TrendLine", e.chart = o, e.xMin = 1 / 0, e.xMax = -1 / 0, e.yMin = 1 / 0, e.yMax = -1 / 0, e.xData = [], e.yData = [], t.targetSeries = e }, e.prototype.createTrendLineElements = function (e, t, i, n, r) { t.trendLineElement = n, t.targetSeries.clipRectElement = r, t.targetSeries.seriesElement = n, e.trendLineElements && e.trendLineElements.appendChild(t.trendLineElement) }, e.prototype.getDataPoint = function (e, t, i, n, r) { var o = new LI; return o.x = "DateTime" === n.xAxis.valueType ? new Date(Number(e)) : e, o.y = t, o.xValue = Number(e), o.color = n.fill, o.index = r, o.yValue = Number(t), o.visible = !0, n.xMin = Math.min(n.xMin, o.xValue), n.yMin = Math.min(n.yMin, o.yValue), n.xMax = Math.max(n.xMax, o.xValue), n.yMax = Math.max(n.yMax, o.yValue), n.xData.push(o.xValue), o }, e.prototype.findSlopeIntercept = function (e, t, i, n) { for (var r = 0, o = 0, s = 0, a = 0, l = 0, h = 0, d = 0, c = 0; h < n.length;)isNaN(t[h]) && (t[h] = (t[h - 1] + t[h + 1]) / 2), r += e[h], o += t[h], s += e[h] * t[h], a += e[h] * e[h], l += t[h] * t[h], h++; var p = i.type; if (!i.intercept || "Linear" !== p && "Exponential" !== p) d = (n.length * s - r * o) / (n.length * a - r * r), c = "Exponential" === p || "Power" === p ? Math.exp((o - d * r) / n.length) : (o - d * r) / n.length; else switch (c = i.intercept, p) { case "Linear": d = (s - i.intercept * r) / a; break; case "Exponential": d = (s - Math.log(Math.abs(i.intercept)) * r) / a }return { slope: d, intercept: c } }, e.prototype.initDataSource = function (e, t) { var i = e.points; if (i && i.length) { var n = e.targetSeries; switch (e.type) { case "Linear": this.setLinearRange(i, e, n); break; case "Exponential": this.setExponentialRange(i, e, n); break; case "MovingAverage": this.setMovingAverageRange(i, e, n); break; case "Polynomial": this.setPolynomialRange(i, e, n); break; case "Power": this.setPowerRange(i, e, n); break; case "Logarithmic": this.setLogarithmicRange(i, e, n) }"Linear" !== e.type && "MovingAverage" !== e.type && n.chart.splineSeriesModule.findSplinePoint(n) } }, e.prototype.setExponentialRange = function (e, t, i) { for (var n, r = [], o = [], s = 0; s < e.length;) { var a = e[s]; r.push(a.xValue), o.push(Math.log(a.yValue)), s++ } n = this.findSlopeIntercept(r, o, t, e), i.points = this.getExponentialPoints(t, e, r, o, i, n) }, e.prototype.setLogarithmicRange = function (e, t, i) { for (var n, r = [], o = [], s = [], a = 0; a < e.length;) { var l = e[a]; s.push(l.xValue), r.push(Math.log(l.xValue)), o.push(l.yValue), a++ } n = this.findSlopeIntercept(r, o, t, e), i.points = this.getLogarithmicPoints(t, e, s, o, i, n) }, e.prototype.setPolynomialRange = function (e, t, i) { for (var n = [], r = [], o = 0; o < e.length;) { var s = e[o]; n.push(s.xValue), r.push(s.yValue), o++ } i.points = this.getPolynomialPoints(t, e, n, r, i) }, e.prototype.setPowerRange = function (e, t, i) { for (var n, r = [], o = [], s = [], a = 0; a < e.length;) { var l = e[a]; s.push(l.xValue), r.push(Math.log(l.xValue)), o.push(Math.log(l.yValue)), a++ } n = this.findSlopeIntercept(r, o, t, e), i.points = this.getPowerPoints(t, e, s, o, i, n) }, e.prototype.setLinearRange = function (e, t, i) { for (var n, r = [], o = [], s = 0; s < e.length;) { var a = e[s]; r.push(a.xValue), o.push(a.yValue), s++ } n = this.findSlopeIntercept(r, o, t, e), i.points = this.getLinearPoints(t, e, r, o, i, n) }, e.prototype.setMovingAverageRange = function (e, t, i) { for (var n = [], r = [], o = [], s = 0; s < e.length;) { var a = e[s]; o.push(a.xValue), n.push(s + 1), r.push(a.yValue), s++ } i.points = this.getMovingAveragePoints(t, e, o, r, i) }, e.prototype.getLogarithmicPoints = function (e, t, i, n, r, o) { var s = Math.round(t.length / 2), a = [], l = i[0] - e.backwardForecast, h = o.intercept + o.slope * Math.log(l), d = i[s - 1], c = o.intercept + o.slope * Math.log(d), p = i[i.length - 1] + e.forwardForecast, u = o.intercept + o.slope * Math.log(p); return a.push(this.getDataPoint(l, h, t[0], r, a.length)), a.push(this.getDataPoint(d, c, t[s - 1], r, a.length)), a.push(this.getDataPoint(p, u, t[t.length - 1], r, a.length)), a }, e.prototype.getPowerPoints = function (e, t, i, n, r, o) { var s = Math.round(t.length / 2), a = [], l = i[0] - e.backwardForecast; l = l > -1 ? l : 0; var h = o.intercept * Math.pow(l, o.slope), d = i[s - 1], c = o.intercept * Math.pow(d, o.slope), p = i[i.length - 1] + e.forwardForecast, u = o.intercept * Math.pow(p, o.slope); return a.push(this.getDataPoint(l, h, t[0], r, a.length)), a.push(this.getDataPoint(d, c, t[s - 1], r, a.length)), a.push(this.getDataPoint(p, u, t[t.length - 1], r, a.length)), a }, e.prototype.getPolynomialPoints = function (e, t, i, n, r) { Math.round(t.length / 2); var o = t.length <= e.polynomialOrder ? t.length : e.polynomialOrder; o = Math.max(2, o), o = Math.min(6, o), e.polynomialOrder = o, e.polynomialSlopes = [], e.polynomialSlopes.length = e.polynomialOrder + 1; for (var s = 0; s < i.length;) { for (var a = i[s], l = n[s], h = 0; h <= e.polynomialOrder;)e.polynomialSlopes[h] || (e.polynomialSlopes[h] = 0), e.polynomialSlopes[h] += Math.pow(a, h) * l, ++h; s++ } var d = []; d.length = 1 + 2 * e.polynomialOrder; var c = []; c.length = e.polynomialOrder + 1; for (var p = 0; p < e.polynomialOrder + 1;)c[p] = [], c[p].length = 3, p++; for (var u = 0; u < i.length;) { for (var g = i[u], m = 1, f = 0; f < d.length;)d[f] || (d[f] = 0), d[f] += m, m *= g, ++f; ++u } for (var y = 0; y <= e.polynomialOrder;) { for (var v = 0; v <= e.polynomialOrder;)c[y][v] = d[y + v], ++v; ++y } return this.gaussJordanElimination(c, e.polynomialSlopes) || (e.polynomialSlopes = null), this.getPoints(e, t, i, n, r) }, e.prototype.getMovingAveragePoints = function (e, t, i, n, r) { var o = [], s = e.period >= t.length ? t.length - 1 : e.period; s = Math.max(2, s); for (var a, l, h, d, c = 0; c < t.length - 1;) { a = h = d = 0; for (var p = c; h < s; p++)h++ , n[p] || d++ , a += n[p]; (a = s - d <= 0 ? null : a / (s - d)) && !isNaN(a) && (l = i[s - 1 + c], o.push(this.getDataPoint(l, a, t[s - 1 + c], r, o.length))), c++ } return o }, e.prototype.getLinearPoints = function (e, t, i, n, r, o) { var s = [], a = i[0] - e.backwardForecast, l = o.slope * a + o.intercept, h = i[i.length - 1] + e.forwardForecast, d = o.slope * h + o.intercept; return s.push(this.getDataPoint(a, l, t[0], r, s.length)), s.push(this.getDataPoint(h, d, t[t.length - 1], r, s.length)), s }, e.prototype.getExponentialPoints = function (e, t, i, n, r, o) { var s = Math.round(t.length / 2), a = [], l = i[0] - e.backwardForecast, h = o.intercept * Math.exp(o.slope * l), d = i[s - 1], c = o.intercept * Math.exp(o.slope * d), p = i[i.length - 1] + e.forwardForecast, u = o.intercept * Math.exp(o.slope * p); return a.push(this.getDataPoint(l, h, t[0], r, a.length)), a.push(this.getDataPoint(d, c, t[s - 1], r, a.length)), a.push(this.getDataPoint(p, u, t[t.length - 1], r, a.length)), a }, e.prototype.getPoints = function (e, t, i, n, r) { Math.round(t.length / 2); for (var o, s, a = e.polynomialSlopes, l = [], h = 1, d = 1; d <= a.length;)1 === d ? (o = i[0] - e.backwardForecast, s = this.getPolynomialYValue(a, o), l.push(this.getDataPoint(o, s, t[0], r, l.length))) : d === a.length ? (o = i[t.length - 1] + e.forwardForecast, s = this.getPolynomialYValue(a, o), l.push(this.getDataPoint(o, s, t[t.length - 1], r, l.length))) : (h += (t.length + e.forwardForecast) / a.length, o = i[parseInt(h.toString(), 10) - 1], s = this.getPolynomialYValue(a, o), l.push(this.getDataPoint(o, s, t[parseInt(h.toString(), 10) - 1], r, l.length))), d++; return l }, e.prototype.getPolynomialYValue = function (e, t) { for (var i = 0, n = 0; n < e.length;)i += e[n] * Math.pow(t, n), n++; return i }, e.prototype.gaussJordanElimination = function (e, t) { var i = e.length, n = [], r = [], o = []; n.length = i, r.length = i, o.length = i; for (var s = 0; s < i;)o[s] = 0, ++s; for (var a = 0; a < i;) { for (var l = 0, h = 0, d = 0, c = 0; c < i;) { if (1 !== o[c]) for (var p = 0; p < i;)0 === o[p] && Math.abs(e[c][p]) >= l && (l = Math.abs(e[c][p]), h = c, d = p), ++p; ++c } if (++o[d], h !== d) { for (var u = 0; u < i;) { var g = e[h][u]; e[h][u] = e[d][u], e[d][u] = g, ++u } var m = t[h]; t[h] = t[d], t[d] = m } if (r[a] = h, n[a] = d, 0 === e[d][d]) return !1; var f = 1 / e[d][d]; e[d][d] = 1; for (var y = 0; y < i;)e[d][y] *= f, ++y; t[d] *= f; for (var v = 0; v < i;) { if (v !== d) { g = e[v][d]; e[v][d] = 0; for (p = 0; p < i;)e[v][p] -= e[d][p] * g, ++p; t[v] -= t[d] * g } ++v } ++a } for (var w = i - 1; w >= 0;) { if (r[w] !== n[w]) for (var b = 0; b < i;) { var C = e[b][r[w]]; e[b][r[w]] = e[b][n[w]], e[b][n[w]] = C, ++b } --w } return !0 }, e.prototype.getTrendLineElements = function (e, t) { sn(e); var i, n = e.clipRect, r = t.renderer.drawClipPath(new aI(t.element.id + "_ChartTrendlineClipRect_" + e.index, "transparent", { width: 1, color: "Gray" }, 1, { x: 0, y: 0, width: n.width, height: n.height })); (i = t.renderer.createGroup({ id: t.element.id + "TrendlineSeriesGroup" + e.index, transform: "translate(" + n.x + "," + n.y + ")", "clip-path": "url(#" + t.element.id + "_ChartTrendlineClipRect_" + e.index + ")" })) && i.appendChild(r); for (var o = 0, s = e.trendlines; o < s.length; o++) { var a = s[o]; this.createTrendLineElements(t, a, a.index, i, r) } }, e.prototype.destroy = function (e) { }, e.prototype.getModuleName = function () { return "TrendLine" }, e }(), dB = function () { function e(e) { this.arrowLocation = new dI(0, 0), this.rx = 2, this.ry = 2, this.chart = e, this.elementID = this.chart.element.id, this.svgRenderer = new JE(this.chart.element.id), this.addEventListener() } return e.prototype.addEventListener = function () { if (!this.chart.isDestroyed) { var e = uw.isPointer ? "pointerleave" : "mouseleave"; this.chart.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.chart.on(uw.touchEndEvent, this.mouseUpHandler, this), this.chart.on(e, this.mouseLeaveHandler, this), this.chart.on("tapHold", this.longPress, this) } }, e.prototype.mouseUpHandler = function () { this.chart.startMove && this.removeCrosshair(2e3) }, e.prototype.mouseLeaveHandler = function () { this.removeCrosshair(1e3) }, e.prototype.mouseMoveHandler = function (e) { var t = this.chart; "touchmove" === e.type && (uw.isIos || uw.isIos7) && t.startMove && e.preventDefault && e.preventDefault(), t.disableTrackTooltip || (nn(t.mouseX, t.mouseY, t.chartAxisLayoutPanel.seriesClipRect) ? !t.startMove && t.isTouch || this.crosshair() : this.removeCrosshair(1e3)) }, e.prototype.longPress = function () { var e = this.chart; return nn(e.mouseX, e.mouseY, e.chartAxisLayoutPanel.seriesClipRect) && this.crosshair(), !1 }, e.prototype.crosshair = function () { var e, t, i = this.chart, n = "", r = "", o = document.getElementById(this.elementID + "_crosshair_axis"), s = i.crosshair, a = document.getElementById(this.elementID + "_tooltip"), l = i.chartAxisLayoutPanel.seriesClipRect, h = i.enableCanvas ? document.getElementById(this.elementID + "_Secondary_Element") : document.getElementById(this.elementID + "_UserInteraction"), d = document.getElementById(this.elementID + "_Crosshair"); if (i.enableCanvas && (d || (d = M("div", { id: this.elementID + "_Crosshair", styles: "position: absolute; pointer-events: none" }), h.appendChild(d))), this.stopAnimation(), i.tooltip.enable && !nn(i.tooltipModule.valueX, i.tooltipModule.valueY, l)) return null; if (i.stockChart && i.stockChart.onPanning) return this.removeCrosshair(1e3), null; if (this.valueX = i.tooltip.enable ? i.tooltipModule.valueX : i.mouseX, this.valueY = i.tooltip.enable ? i.tooltipModule.valueY : i.mouseY, i.enableCanvas || h.setAttribute("opacity", "1"), "Both" !== s.lineType && "Horizontal" !== s.lineType || (n += "M " + l.x + " " + this.valueY + " L " + (l.x + l.width) + " " + this.valueY), "Both" !== s.lineType && "Vertical" !== s.lineType || (r += "M " + this.valueX + " " + l.y + " L " + this.valueX + " " + (l.y + l.height)), i.enableCanvas) { o || (o = this.svgRenderer.createGroup({ id: this.elementID + "_crosshair_axis" })); var c = i.tooltip.enable ? i.element.id + "_tooltip_svg" : i.element.id + "_svg"; t = this.svgRenderer.createSvg({ id: c, width: i.availableSize.width, height: i.availableSize.height }), i.tooltip.enable && ((a = a || i.tooltipModule.createElement()).appendChild(t), h.appendChild(a)), e = new rj(this.elementID + "_HorizontalLine", "none", s.line.width, s.line.color || i.themeStyle.crosshairLine, 1, s.dashArray, n), this.drawCrosshairLine(e, d, l.x, this.valueY, l.width, 0, n), e.d = r, e.id = this.elementID + "_VerticalLine", this.drawCrosshairLine(e, d, this.valueX, l.y, 0, l.height, r), this.renderAxisTooltip(i, l, o), t.appendChild(o), i.tooltip.enable || d.appendChild(t) } else 0 === h.childNodes.length ? (o = i.renderer.createGroup({ id: this.elementID + "_crosshair_axis" }), e = new rj(this.elementID + "_HorizontalLine", "none", s.line.width, s.line.color || i.themeStyle.crosshairLine, 1, s.dashArray, n), this.renderCrosshairLine(e, h), e.d = r, e.id = this.elementID + "_VerticalLine", this.renderCrosshairLine(e, h), h.appendChild(o), this.renderAxisTooltip(i, l, h.lastChild)) : (document.getElementById(this.elementID + "_HorizontalLine").setAttribute("d", n), document.getElementById(this.elementID + "_VerticalLine").setAttribute("d", r), this.renderAxisTooltip(i, l, h.lastChild)) }, e.prototype.renderCrosshairLine = function (e, t) { var i = this.chart.renderer.drawPath(e); t.appendChild(i) }, e.prototype.drawCrosshairLine = function (e, t, i, n, r, o, s) { if (!document.getElementById(e.id) && s) { var a = M("div", { id: e.id }); t.appendChild(a) } if (document.getElementById(e.id)) { var l = "top:" + n.toString() + "px;left:" + i.toString() + "px;width:" + r + "px;height:" + o + "px;fill:" + e.stroke + ";border: 0.5px solid black;position: absolute", h = document.getElementById(e.id), d = document.getElementById(this.elementID + "_crosshair_axis"); h.setAttribute("style", l), t.style.opacity = "1", d && (d.style.opacity = "1") } }, e.prototype.renderAxisTooltip = function (e, t, i) { for (var n, r, o, s, a, l, h, d, c = 0, p = e.axisCollections.length; c < p; c++)if (n = e.axisCollections[c], d = n.placeNextToAxisLine ? n.updatedRect : n.rect, n.crosshairTooltip.enable) if (this.valueX <= d.x + d.width && d.x <= this.valueX || this.valueY <= d.y + d.height && d.y <= this.valueY) { if (s = document.getElementById(this.elementID + "_axis_tooltip_" + c), a = document.getElementById(this.elementID + "_axis_tooltip_text_" + c), !(r = this.getAxisText(n))) continue; if (o = this.tooltipLocation(r, n, t, d), null === s) { s = e.enableCanvas ? this.svgRenderer.drawPath({ id: this.elementID + "_axis_tooltip_" + c, fill: n.crosshairTooltip.fill || e.themeStyle.crosshairFill }, null) : e.renderer.drawPath({ id: this.elementID + "_axis_tooltip_" + c, fill: n.crosshairTooltip.fill || e.themeStyle.crosshairFill }, null), i.appendChild(s), l = new nj(this.elementID + "_axis_tooltip_text_" + c, 0, 0, "start", r); a = $n(e.enableCanvas ? this.svgRenderer : e.renderer, l, n.crosshairTooltip.textStyle, n.crosshairTooltip.textStyle.color || e.themeStyle.crosshairLabel, i) } h = Ti(this.rx, this.ry, o, this.arrowLocation, 10, this.isTop, this.isBottom, this.isLeft, this.valueX, this.valueY), s.setAttribute("d", h), a.textContent = r, a.setAttribute("x", (o.x + 5).toString()), a.setAttribute("y", (o.y + 5 + 3 * this.elementSize.height / 4).toString()) } else Oi(this.elementID + "_axis_tooltip_" + c), Oi(this.elementID + "_axis_tooltip_text_" + c) }, e.prototype.getAxisText = function (e) { var t; this.isBottom = !1, this.isTop = !1, this.isLeft = !1, this.isRight = !1; var i = "Category" === e.valueType && "BetweenTicks" === e.labelPlacement ? .5 : 0; if ("Horizontal" === e.orientation ? (t = rn(Math.abs(this.valueX - e.rect.x), e.rect.width, e) + i, this.isBottom = !e.opposedPosition, this.isTop = e.opposedPosition) : (t = on(Math.abs(this.valueY - e.rect.y), e.rect.height, e) + i, this.isRight = e.opposedPosition, this.isLeft = !e.opposedPosition), "DateTime" === e.valueType) return e.format(new Date(t)); if ("Category" === e.valueType) return e.labels[Math.floor(t)]; if ("Logarithmic" === e.valueType) return t = e.format(Math.pow(e.logBase, t)); return e.labelFormat && null !== e.labelFormat.match("{value}") ? e.labelFormat.replace("{value}", e.format(t)) : e.format(t) }, e.prototype.tooltipLocation = function (e, t, i, n) { var r, o = i.x, s = i.y, a = "Inside" === t.labelPosition, l = t.scrollbarSettings.enable || t.zoomingScrollBar && t.zoomingScrollBar.svgObject ? t.scrollBarHeight : 0; if (this.elementSize = xi(e, t.crosshairTooltip.textStyle), "Horizontal" === t.orientation) { var h = a ? n.y - this.elementSize.height - 20 : n.y + l, d = a ? n.y - this.elementSize.height - 10 : n.y + 10; this.arrowLocation = new dI(this.valueX, h), r = new ej(this.valueX - this.elementSize.width / 2 - 5, d + (a ? 0 : l), this.elementSize.width + 10, this.elementSize.height + 10), t.opposedPosition && (r.y = a ? n.y : n.y - (this.elementSize.height + 10 + 10) - l), r.x < o && (r.x = o), r.x + r.width > o + i.width && (r.x -= r.x + r.width - (o + i.width)), this.arrowLocation.x + 5 > r.x + r.width - this.rx && (this.arrowLocation.x = r.x + r.width - this.rx - 5), this.arrowLocation.x - 5 < r.x + this.rx && (this.arrowLocation.x = r.x + this.rx + 5) } else { l *= t.opposedPosition ? 1 : -1, this.arrowLocation = new dI(n.x, this.valueY); var c = a ? n.x - l : n.x - this.elementSize.width - 20; r = new ej(c + l, this.valueY - this.elementSize.height / 2 - 5, this.elementSize.width + 10, this.elementSize.height + 10), t.opposedPosition ? (r.x = a ? n.x - this.elementSize.width - 10 : n.x + 10 + l, r.x + r.width > this.chart.availableSize.width && (this.arrowLocation.x -= r.x + r.width - this.chart.availableSize.width, r.x -= r.x + r.width - this.chart.availableSize.width)) : r.x < 0 && (this.arrowLocation.x -= r.x, r.x = 0), r.y < s && (r.y = s), r.y + r.height >= s + i.height && (r.y -= r.y + r.height - (s + i.height)), this.arrowLocation.y + 5 > r.y + r.height - this.ry && (this.arrowLocation.y = r.y + r.height - this.ry - 5), this.arrowLocation.y - 5 < r.y + this.ry && (this.arrowLocation.y = r.y + this.ry + 5) } return r }, e.prototype.stopAnimation = function () { Rn(this.crosshairInterval) }, e.prototype.progressAnimation = function () { Rn(this.crosshairInterval) }, e.prototype.removeCrosshair = function (e) { var t = this.chart, i = t.enableCanvas ? document.getElementById(this.elementID + "_Crosshair") : document.getElementById(this.elementID + "_UserInteraction"), n = t.enableCanvas ? document.getElementById(this.elementID + "_crosshair_axis") : null; this.stopAnimation(), i && "0" !== i.getAttribute("opacity") && (this.crosshairInterval = setTimeout(function () { new fw({}).animate(i, { duration: 200, progress: function (e) { i.style.animation = "", t.enableCanvas ? (i.style.opacity = (1 - e.timeStamp / e.duration).toString(), n.style.opacity = (1 - e.timeStamp / e.duration).toString()) : i.setAttribute("opacity", (1 - e.timeStamp / e.duration).toString()) }, end: function (e) { t.enableCanvas ? (i.style.opacity = "0", n.style.opacity = "0") : i.setAttribute("opacity", "0"), t.startMove = !1, t.tooltipModule && (t.tooltipModule.valueX = null, t.tooltipModule.valueY = null) } }) }, e)) }, e.prototype.getModuleName = function () { return "Crosshair" }, e.prototype.destroy = function (e) { }, e }(), cB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pB = function (e) { function t(t) { var i = e.call(this, t) || this; return i.element = i.chart.element, i.textStyle = t.tooltip.textStyle, i.control = t, i } return cB(t, e), t.prototype.getElement = function (e) { return document.getElementById(e) }, t.prototype.getTooltipElement = function (e) { this.inverted = this.chart.requireInvertedAxis, this.header = null === this.control.tooltip.header ? this.control.tooltip.shared ? "<b>${point.x}</b>" : "<b>${series.name}</b>" : this.control.tooltip.header, this.formattedText = []; var t = document.getElementById(this.chart.element.id + "_tooltip"), i = this.chart.element.id.indexOf("stockChart") > -1; return !e && !t || i ? this.createElement() : null }, t.prototype.createElement = function () { var e = document.createElement("div"); return e.id = this.element.id + "_tooltip", e.className = "ejSVGTooltip", e.setAttribute("style", "pointer-events:none; position:absolute;z-index: 1"), e }, t.prototype.pushData = function (e, t, i, n) { return !!e.series.enableTooltip && (this.currentPoints.push(e), this.stopAnimation(), i && !document.getElementById(i.id) && (this.chart.stockChart ? document.getElementById(this.chart.stockChart.element.id + "_Secondary_Element").appendChild(i) : document.getElementById(this.element.id + "_Secondary_Element").appendChild(i)), !0) }, t.prototype.removeHighlight = function (e) { for (var t, i = 0, n = this.previousPoints.length; i < n; i++)(t = this.previousPoints[i]).series.isRectSeries ? t.series.visible && this.highlightPoint(t.series, t.point.index, !1) : t.series.marker.visible || "Scatter" === t.series.type || "Bubble" === t.series.type || (this.previousPoints.shift(), n -= 1) }, t.prototype.highlightPoint = function (e, t, i) { var n = this.getElement(this.element.id + "_Series_" + e.index + "_Point_" + t); n && n.setAttribute("opacity", (i ? e.opacity / 2 : e.opacity).toString()) }, t.prototype.highlightPoints = function () { for (var e = 0, t = this.currentPoints; e < t.length; e++) { var i = t[e]; i.series.isRectSeries && "Series" === i.series.category && this.highlightPoint(i.series, i.point.index, !0) } }, t.prototype.createTooltip = function (e, t, i, n, r, o, s, a, l, h, d) { void 0 === h && (h = null), void 0 === d && (d = null); var c = this.currentPoints[0].series, p = e.tooltipModule || e.accumulationTooltipModule; t ? this.svgTooltip = new pj({ opacity: e.tooltip.opacity, header: i, content: this.text, fill: e.tooltip.fill, border: e.tooltip.border, enableAnimation: e.tooltip.enableAnimation, location: n, shared: e.tooltip.shared, shapes: s, clipBounds: "PolarRadar" === this.chart.chartAreaType ? new dI(0, 0) : r, areaBounds: l, palette: this.findPalette(), template: e.tooltip.template, data: d, theme: e.theme, offset: a, textStyle: e.tooltip.textStyle, isNegative: c.isRectSeries && "Waterfall" !== c.type && o && o.y < 0, inverted: this.chart.requireInvertedAxis && c.isRectSeries, arrowPadding: this.text.length > 1 || this.chart.stockChart ? 0 : 12, availableSize: e.availableSize, isCanvas: this.chart.enableCanvas, tooltipRender: function () { p.removeHighlight(p.control), p.highlightPoints(), p.updatePreviousPoint(h) }, animationComplete: function (t) { t.tooltip.fadeOuted && p.fadeOut(p.previousPoints, e) } }, "#" + this.element.id + "_tooltip") : this.svgTooltip && (this.svgTooltip.location = n, this.svgTooltip.content = this.text, this.svgTooltip.header = i, this.svgTooltip.offset = a, this.svgTooltip.palette = this.findPalette(), this.svgTooltip.shapes = s, this.svgTooltip.data = d, this.svgTooltip.template = e.tooltip.template, this.svgTooltip.textStyle = e.tooltip.textStyle, this.svgTooltip.isNegative = c.isRectSeries && "Waterfall" !== c.type && o && o.y < 0, this.svgTooltip.clipBounds = "PolarRadar" === this.chart.chartAreaType ? new dI(0, 0) : r, this.svgTooltip.arrowPadding = this.text.length > 1 || this.chart.stockChart ? 0 : 12, this.svgTooltip.dataBind()) }, t.prototype.findPalette = function () { for (var e = [], t = 0, i = this.currentPoints; t < i.length; t++) { var n = i[t]; e.push(this.findColor(n, n.series)) } return e }, t.prototype.findColor = function (e, t) { return !t.isRectSeries || "Candle" !== t.type && "Hilo" !== t.type && "HiloOpenClose" !== t.type ? (e.point.color && "#ffffff" !== e.point.color ? e.point.color : e.point.interior) || t.marker.fill || t.interior : e.point.color }, t.prototype.updatePreviousPoint = function (e) { e && (this.currentPoints = this.currentPoints.concat(e)), this.previousPoints = h([], this.currentPoints, null, !0) }, t.prototype.fadeOut = function (e, t) { var i = this.chart.enableCanvas ? this.getElement(this.element.id + "_tooltip_group") : this.getElement(this.element.id + "_tooltip_svg"); i && parseInt(i.getAttribute("opacity"), 10) > 0 || (this.valueX = null, this.valueY = null, this.currentPoints = [], this.removeHighlight(t), this.removeHighlightedMarker(e), this.svgTooltip = null, this.control.trigger("animationComplete", {})) }, t.prototype.removeHighlightedMarker = function (e) { if (this.chart.markerRender) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; Oi(this.element.id + "_Series_" + n.series.index + "_Point_" + n.point.index + "_Trackball") } this.chart.markerRender.removeHighlightedMarker() } this.previousPoints = [] }, t.prototype.triggerEvent = function (e, t, i, n) { void 0 === n && (n = !0); var r = { cancel: !1, name: Lj, text: i, point: e.point, series: e.series, textStyle: this.textStyle }; return this.chart.trigger(Lj, r), r.cancel || ("BoxAndWhisker" === e.series.type && (this.removeText(), !0), this.formattedText = this.formattedText.concat(r.text), this.text = this.formattedText), !r.cancel }, t.prototype.removeText = function () { this.textElements = []; var e = this.getElement(this.element.id + "_tooltip_group"); if (e && e.childNodes.length > 0) for (; e.lastChild && 1 !== e.childNodes.length;)e.removeChild(e.lastChild) }, t.prototype.stopAnimation = function () { Rn(this.toolTipInterval) }, t.prototype.removeTooltip = function (e) { var t = this, i = this.getElement(this.element.id + "_tooltip"); this.stopAnimation(), i && this.previousPoints.length > 0 && (this.toolTipInterval = setTimeout(function () { t.svgTooltip && t.svgTooltip.fadeOut() }, e)) }, t }(yI), uB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gB = function (e) { function t(t) { var i = e.call(this, t) || this; return i.addEventListener(), i } return uB(t, e), t.prototype.addEventListener = function () { if (!this.chart.isDestroyed) { var e = uw.isPointer ? "pointerleave" : "mouseleave"; this.chart.on(e, this.mouseLeaveHandler, this), this.chart.on("tapHold", this.longPress, this), this.chart.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.chart.on(uw.touchEndEvent, this.mouseUpHandler, this) } }, t.prototype.mouseUpHandler = function () { var e = this.control; e.isTouch && !this.isSelected(e) && (nn(e.mouseX, e.mouseY, e.chartAxisLayoutPanel.seriesClipRect) && e.tooltip.shared || !e.tooltip.shared) && (e.crosshair.enable ? e.startMove && this.removeTooltip(2e3) : (this.tooltip(), this.removeTooltip(2e3))) }, t.prototype.mouseLeaveHandler = function () { this.removeTooltip(1e3) }, t.prototype.mouseMoveHandler = function () { var e = this.chart; e.disableTrackTooltip || this.isSelected(e) || (e.tooltip.shared || e.isTouch && !e.startMove || this.tooltip(), nn(e.mouseX, e.mouseY, e.chartAxisLayoutPanel.seriesClipRect) ? !e.tooltip.shared || e.isTouch && !e.startMove || this.tooltip() : e.tooltip.shared && this.removeTooltip(1e3)) }, t.prototype.longPress = function () { var e = this.chart; return e.crosshair.enable && nn(e.mouseX, e.mouseY, e.chartAxisLayoutPanel.seriesClipRect) && this.tooltip(), !1 }, t.prototype.tooltip = function () { if (this.chart.stockChart && this.chart.stockChart.onPanning) return this.removeTooltip(1e3), null; var e, t = this.chart.enableCanvas ? this.element.id + "_tooltip_group" : this.element.id + "_tooltip_svg", i = (e = this.getElement(t)) && parseInt(e.getAttribute("opacity"), 10) > 0, n = this.getTooltipElement(i); this.chart.enableCanvas && n && (document.getElementById(this.chart.element.id + "_Secondary_Element").appendChild(n), n.appendChild(document.getElementById(this.chart.element.id + "_tooltip_svg"))), this.chart.tooltip.shared ? this.renderGroupedTooltip(this.chart, !i, n) : this.renderSeriesTooltip(this.chart, !i, n) }, t.prototype.findHeader = function (e) { return "" === this.header ? "" : (this.header = this.parseTemplate(e.point, e.series, this.header, e.series.xAxis, e.series.yAxis), "" !== this.header.replace(/<b>/g, "").replace(/<\/b>/g, "").trim() ? this.header : "") }, t.prototype.findShapes = function () { if (!this.chart.tooltip.enableMarker) return []; for (var e = [], t = 0, i = this.currentPoints; t < i.length; t++) { var n = i[t]; e.push(n.point.marker.shape || n.series.marker.shape) } return e }, t.prototype.renderSeriesTooltip = function (e, t, i) { var n = this.getData(); n.lierIndex = this.lierIndex; e.chartAxisLayoutPanel.seriesClipRect; if (this.currentPoints = [], this.findData(n, this.previousPoints[0])) this.pushData(n, t, i, !0) && (this.triggerEvent(n, t, this.getTooltipText(n)) ? this.createTooltip(e, t, this.findHeader(n), this.getSymbolLocation(n), n.series.clipRect, n.point, this.findShapes(), this.findMarkerHeight(this.currentPoints[0]), e.chartAxisLayoutPanel.seriesClipRect, null, this.getTemplateText(n)) : (this.removeHighlight(this.control), k(this.getElement(this.element.id + "_tooltip"))), this.isRemove = !0); else if (!n.point && this.isRemove) this.removeTooltip(1e3), this.isRemove = !1; else for (var r = 0, o = e.visibleSeries; r < o.length; r++) { var s = o[r]; s.visible && (n = this.getClosestX(e, s) || n) } n && n.point && this.findMouseValue(n, e) }, t.prototype.findMarkerHeight = function (e) { if (!this.chart.tooltip.enableMarker) return 0; var t = e.series; return (t.marker.visible || this.chart.tooltip.shared && (!t.isRectSeries || t.marker.visible) || "Scatter" === t.type || "Scatter" === t.drawType) && "Candle" !== t.type && "Hilo" !== t.type && "HiloOpenClose" !== t.type ? (t.marker.height + 2) / 2 + 2 * t.marker.border.width : 0 }, t.prototype.findData = function (e, t) { return e.point && (!t || t.point !== e.point || t && t.lierIndex > 3 && t.lierIndex !== this.lierIndex || t.point === e.point) }, t.prototype.getSymbolLocation = function (e) { var t; if ("BoxAndWhisker" !== e.series.type) { if (!e.point.symbolLocations[0]) return null; t = new dI(e.point.symbolLocations[0].x, e.point.symbolLocations[0].y) } switch (e.series.type) { case "BoxAndWhisker": return this.getBoxLocation(e); case "Waterfall": return this.getWaterfallRegion(e, t); case "RangeArea": return this.getRangeArea(e, t); default: return t } }, t.prototype.getRangeArea = function (e, t) { return e.point.regions[0] && (this.inverted ? t.x = e.point.regions[0].x + e.point.regions[0].width / 2 : t.y = e.point.regions[0].y + e.point.regions[0].height / 2), t }, t.prototype.getWaterfallRegion = function (e, t) { return this.inverted ? t.x = e.point.y < 0 ? t.x + e.point.regions[0].width : t.x : t.y = e.point.y < 0 ? t.y - e.point.regions[0].height : t.y, t }, t.prototype.getTooltipText = function (e) { var t = e.series; return this.parseTemplate(e.point, t, this.getFormat(this.chart, t), t.xAxis, t.yAxis) }, t.prototype.getTemplateText = function (e) { if (this.chart.tooltip.template) { var t = h({}, e.point); return t.x = this.formatPointValue(e.point, e.series.xAxis, "x", !0, !1), "XY" === e.series.seriesType ? t.y = this.formatPointValue(e.point, e.series.yAxis, "y", !1, !0) : (t.low = this.formatPointValue(e.point, e.series.yAxis, "low", !1, !0), t.high = this.formatPointValue(e.point, e.series.yAxis, "high", !1, !0)), t } return e.point }, t.prototype.findMouseValue = function (e, t) { t.requireInvertedAxis ? (this.valueY = (1 - Xi(e.point.xValue, e.series.xAxis)) * e.series.xAxis.rect.height + e.series.xAxis.rect.y, this.valueX = t.mouseX) : ("PolarRadar" === t.chartAreaType ? this.valueX = $i(e.point.xValue, e.series.xAxis) * e.series.xAxis.rect.width + e.series.xAxis.rect.x : this.valueX = Xi(e.point.xValue, e.series.xAxis) * e.series.xAxis.rect.width + e.series.xAxis.rect.x, this.valueY = t.mouseY) }, t.prototype.renderGroupedTooltip = function (e, t, i) { var n, r = "PolarRadar" === e.chartAreaType ? this.getData() : null; this.stopAnimation(), this.removeHighlight(e), this.currentPoints = []; var o = [], s = ""; t && (e.stockChart ? document.getElementById(e.stockChart.element.id + "_Secondary_Element").appendChild(i) : i && document.getElementById(this.element.id + "_Secondary_Element").appendChild(i)), this.removeText(); for (var a = 0, l = e.visibleSeries; a < l.length; a++) { var h = l[a]; h.enableTooltip && ("Cartesian" === e.chartAreaType && h.visible ? n = this.getClosestX(e, h) : "PolarRadar" === e.chartAreaType && h.visible && null !== r.point && (n = new uI(h.points[r.point.index], h)), n && "" !== this.header && 0 === this.currentPoints.length && (s = this.findHeader(n)), n && this.triggerEvent(n, t, this.getTooltipText(n)) ? (this.findMouseValue(n, e), this.currentPoints.push(n), n = null) : n && o.push(n)) } this.currentPoints.length > 0 ? this.createTooltip(e, t, s, this.findSharedLocation(), 1 === this.currentPoints.length ? this.currentPoints[0].series.clipRect : null, null, this.findShapes(), this.findMarkerHeight(this.currentPoints[0]), e.chartAxisLayoutPanel.seriesClipRect, o) : this.getElement(this.element.id + "_tooltip_path") && this.getElement(this.element.id + "_tooltip_path").setAttribute("d", "") }, t.prototype.findSharedLocation = function () { var e = this.chart.stockChart; if (e) { 1 === this.text.length && this.text.push(""); var t = e.enablePeriodSelector ? e.toolbarHeight : 0, i = document.getElementById(e.element.id + "_ChartTitle"), n = "" !== e.title ? i.getBoundingClientRect().height + 10 : 0; return new dI(this.chart.chartAxisLayoutPanel.seriesClipRect.x + 5, this.chart.chartAxisLayoutPanel.seriesClipRect.y + t + 5 + n) } return this.currentPoints.length > 1 ? new dI(this.valueX, this.valueY) : this.getSymbolLocation(this.currentPoints[0]) }, t.prototype.getBoxLocation = function (e) { return this.lierIndex > 3 ? e.point.symbolLocations[this.lierIndex - 4] : { x: e.point.regions[0].x + e.point.regions[0].width / 2, y: e.point.regions[0].y + e.point.regions[0].height / 2 } }, t.prototype.parseTemplate = function (e, t, i, n, r) { this.chart; for (var o, s, a = 0, l = Object.keys(e); a < l.length; a++) { var h = l[a]; o = new RegExp("${point." + h + "}", "gm"), i = i.replace(o.source, this.formatPointValue(e, "${point.x}" === o.source ? n : r, h, "${point.x}" === o.source, "${point.high}" === o.source || "${point.open}" === o.source || "${point.close}" === o.source || "${point.low}" === o.source || "${point.y}" === o.source || "${point.minimum}" === o.source || "${point.maximum}" === o.source || "${point.outliers}" === o.source || "${point.upperQuartile}" === o.source || "${point.lowerQuartile}" === o.source || "${point.median}" === o.source)) } for (var d = 0, c = Object.keys(Object.getPrototypeOf(t)); d < c.length; d++) { h = c[d]; o = new RegExp("${series." + h + "}", "gm"), s = t[h], i = i.replace(o.source, s) } return i }, t.prototype.formatPointValue = function (e, t, i, n, r) { var o, s, a; return "Category" !== t.valueType && n ? o = (s = t.labelFormat && null !== t.labelFormat.match("{value}")) ? t.labelFormat.replace("{value}", t.format(e[i])) : t.format(e[i]) : r ? (s = t.labelFormat && null !== t.labelFormat.match("{value}"), a = "outliers" === i ? t.format(e[i][this.lierIndex - 4]) : t.format(e[i]), o = s ? t.labelFormat.replace("{value}", a) : a) : o = e[i], o }, t.prototype.getFormat = function (e, t) { if (e.tooltip.format) return "XY" === t.seriesType && "Indicator" === t.category ? this.getIndicatorTooltipFormat(t, e, e.tooltip.format) : e.tooltip.format; var i = "Histogram" === t.type ? "${point.minimum}-${point.maximum}" : "${point.x}", n = e.tooltip.shared ? "${series.name}" : i; switch (t.seriesType) { case "XY": return "Indicator" === t.category && this.getIndicatorTooltipFormat(t, e, e.tooltip.format), n + " : " + ("Bubble" === t.type ? "<b>${point.y}</b>  Size : <b>${point.size}</b>" : "<b>${point.y}</b>"); case "HighLow": return n + "<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b>"; case "HighLowOpenClose": return n + "<br/>High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>"; case "BoxPlot": return n + "<br/>" + (this.lierIndex > 3 ? "Outliers : <b>${point.outliers}</b>" : "Maximum : <b>${point.maximum}</b><br/>Q3 : <b>${point.upperQuartile}</b><br/>Median : <b>${point.median}</b><br/>Q1 : <b>${point.lowerQuartile}</b><br/>Minimum : <b>${point.minimum}</b>") }return "" }, t.prototype.getIndicatorTooltipFormat = function (e, t, i) { return "XY" === e.seriesType ? e.name + " : <b>${point.y}</b>" : i }, t.prototype.removeHighlightedMarker = function (e) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; Oi(this.element.id + "_Series_" + n.series.index + "_Point_" + n.point.index + "_Trackball") } this.chart.markerRender && this.chart.markerRender.removeHighlightedMarker(), this.previousPoints = [] }, t.prototype.getModuleName = function () { return "Tooltip" }, t.prototype.destroy = function (e) { }, t }(pB), mB = function () { function e(e) { this.iconRectOverFill = "transparent", this.iconRectSelectionFill = "transparent", this.chart = e, this.elementId = e.element.id, this.chart.svgRenderer = new JE(this.elementId), this.selectionColor = "Bootstrap4" === e.theme ? "#FFFFFF" : "#ff4081", this.fillColor = "Bootstrap4" === e.theme ? "#495057" : "#737373", this.iconRectOverFill = "Bootstrap4" === e.theme ? "#5A6268" : this.iconRectOverFill, this.iconRectSelectionFill = "Bootstrap4" === e.theme ? "#5B6269" : this.iconRectSelectionFill, this.iconRect = "Bootstrap4" === e.theme ? new ej(-5, -5, 26, 26) : new ej(0, 0, 16, 16) } return e.prototype.createPanButton = function (e, t, i) { var n = this.chart.svgRenderer, r = this.chart.zoomModule.isPanning ? this.selectionColor : this.fillColor, o = "M5,3h2.3L7.275,5.875h1.4L8.65,3H11L8,0L5,3z M3,11V8.7l2.875,0.025v-1.4L3,7.35V5L0,8L3,"; o += "11z M11,13H8.7l0.025-2.875h-1.4L7.35,13H5l3,3L11,13z M13,5v2.3l-2.875-0.025v1.4L13,8.65V11l3-3L13,5z", e.id = this.elementId + "_Zooming_Pan", e.setAttribute("aria-label", this.chart.getLocalizedLabel("Pan")), this.panElements = e, e.appendChild(n.drawRectangle(new aI(this.elementId + "_Zooming_Pan_1", "transparent", {}, 1, this.iconRect))), e.appendChild(n.drawPath(new rj(this.elementId + "_Zooming_Pan_2", r, null, null, 1, null, o), null)), t.appendChild(e), this.wireEvents(e, this.pan) }, e.prototype.createZoomButton = function (e, t, i) { var n = this.chart.svgRenderer, r = this.chart.zoomModule.isPanning ? this.fillColor : this.selectionColor, o = this.chart.zoomModule.isPanning ? "transparent" : this.iconRectSelectionFill, s = "M0.001,14.629L1.372,16l4.571-4.571v-0.685l0.228-0.274c1.051,0.868,2.423,1.417,3.885,1.417c3.291,0,"; s += "5.943-2.651,5.943-5.943S13.395,0,10.103,0S4.16,2.651,4.16,5.943c0,1.508,0.503,2.834,1.417,3.885l-0.274,0.228H4.571", s += "L0.001,14.629L0.001,14.629z M5.943,5.943c0-2.285,1.828-4.114,4.114-4.114s4.114,1.828,4.114,", e.id = this.elementId + "_Zooming_Zoom", e.setAttribute("aria-label", this.chart.getLocalizedLabel("Zoom")), this.zoomElements = e, this.selectedID = this.chart.zoomModule.isPanning ? this.chart.element.id + "_Zooming_Pan_1" : this.elementId + "_Zooming_Zoom_1", e.appendChild(n.drawRectangle(new aI(this.elementId + "_Zooming_Zoom_1", o, {}, 1, this.iconRect))), e.appendChild(n.drawPath(new rj(this.elementId + "_Zooming_Zoom_3", r, null, null, 1, null, s + "4.114s-1.828,4.114-4.114,4.114S5.943,8.229,5.943,5.943z"))), t.appendChild(e), this.wireEvents(e, this.zoom) }, e.prototype.createZoomInButton = function (e, t, i) { var n = this.chart.svgRenderer, r = this.fillColor, o = "M10.103,0C6.812,0,4.16,2.651,4.16,5.943c0,1.509,0.503,2.834,1.417,3.885l-0.274,0.229H4.571L0,"; o += "14.628l0,0L1.372,16l4.571-4.572v-0.685l0.228-0.275c1.052,0.868,2.423,1.417,3.885,1.417c3.291,0,5.943-2.651,", o += "5.943-5.943C16,2.651,13.395,0,10.103,0z M10.058,10.058c-2.286,0-4.114-1.828-4.114-4.114c0-2.286,1.828-4.114,", e.id = this.elementId + "_Zooming_ZoomIn", e.setAttribute("aria-label", this.chart.getLocalizedLabel("ZoomIn")); e.appendChild(n.drawRectangle(new aI(this.elementId + "_Zooming_ZoomIn_1", "transparent", {}, 1, this.iconRect))), e.appendChild(n.drawPath(new rj(this.elementId + "_Zooming_ZoomIn_2", r, null, null, 1, null, o + "4.114-4.114c2.286,0,4.114,1.828,4.114,4.114C14.172,8.229,12.344,10.058,10.058,10.058z"), null)), e.appendChild(n.drawPolygon(new hI(this.elementId + "_Zooming_ZoomIn_3", "12.749,5.466 10.749,5.466 10.749,3.466 9.749,3.466 9.749,5.466 7.749,5.466 7.749,6.466 9.749,6.466 9.749,8.466 10.749,8.466 10.749,6.466 12.749,6.466", r))), this.zoomInElements = e, this.elementOpacity = i.zoomModule.isPanning ? "0.2" : "1", e.setAttribute("opacity", this.elementOpacity), t.appendChild(e), this.wireEvents(e, this.zoomIn) }, e.prototype.createZoomOutButton = function (e, t, i) { var n = this.chart.svgRenderer, r = this.fillColor, o = "M0,14.622L1.378,16l4.533-4.533v-0.711l0.266-0.266c1.022,0.889,2.4,1.422,3.866,"; o += "1.422c3.289,0,5.955-2.666,5.955-5.955S13.333,0,10.044,0S4.089,2.667,4.134,5.911c0,1.466,0.533,2.844,", o += "1.422,3.866l-0.266,0.266H4.578L0,14.622L0,14.622z M5.911,5.911c0-2.311,1.822-4.133,4.133-4.133s4.133,1.822,4.133,", e.id = this.elementId + "_Zooming_ZoomOut", e.setAttribute("aria-label", this.chart.getLocalizedLabel("ZoomOut")), e.appendChild(n.drawRectangle(new aI(this.elementId + "_Zooming_ZoomOut_1", "transparent", {}, 1, this.iconRect))), e.appendChild(n.drawPath(new rj(this.elementId + "_Zooming_ZoomOut_2", r, null, null, 1, null, o + "4.133s-1.866,4.133-4.133,4.133S5.911,8.222,5.911,5.911z M12.567,6.466h-5v-1h5V6.466z"), null)), this.zoomOutElements = e, this.elementOpacity = i.zoomModule.isPanning ? "0.2" : "1", e.setAttribute("opacity", this.elementOpacity), t.appendChild(e), this.wireEvents(e, this.zoomOut) }, e.prototype.createResetButton = function (e, t, i, n) { var r, o = this.chart.svgRenderer, s = this.fillColor, a = "M12.364,8h-2.182l2.909,3.25L16,8h-2.182c0-3.575-2.618-6.5-5.818-6.5c-1.128,0-2.218,0.366-3.091,"; a += "1.016l1.055,1.178C6.581,3.328,7.272,3.125,8,3.125C10.4,3.125,12.363,5.319,12.364,8L12.364,8z M11.091,", a += "13.484l-1.055-1.178C9.419,12.672,8.728,12.875,8,12.875c-2.4,0-4.364-2.194-4.364-4.875h2.182L2.909,4.75L0,8h2.182c0,", e.id = this.elementId + "_Zooming_Reset", e.setAttribute("aria-label", this.chart.getLocalizedLabel("Reset")), n ? (r = xi(this.chart.getLocalizedLabel("ResetZoom"), { size: "12px" }), e.appendChild(o.drawRectangle(new aI(this.elementId + "_Zooming_Reset_1", "transparent", {}, 1, new ej(0, 0, r.width, r.height)))), $n(i.renderer, new nj(this.elementId + "_Zooming_Reset_2", 0 + r.width / 2, 0 + 3 * r.height / 4, "middle", this.chart.getLocalizedLabel("ResetZoom"), "rotate(0,0,0)", "auto"), { size: "12px" }, "black", e)) : (e.appendChild(o.drawRectangle(new aI(this.elementId + "_Zooming_Reset_1", "transparent", {}, 1, this.iconRect))), e.appendChild(o.drawPath(new rj(this.elementId + "_Zooming_Reset_2", s, null, null, 1, null, a + "3.575,2.618,6.5,5.818,6.5C9.128,14.5,10.219,14.134,11.091,13.484L11.091,13.484z"), null))), t.appendChild(e), this.wireEvents(e, this.reset) }, e.prototype.wireEvents = function (e, t) { Kv.add(e, "mousedown touchstart", t, this), Kv.add(e, "mouseover", this.showTooltip, this), Kv.add(e, "mouseout", this.removeTooltip, this) }, e.prototype.showTooltip = function (e) { var t = e.currentTarget.id.split("_Zooming_")[1], i = e.pageX - (xi(t, { size: "10px" }).width + 5), n = Sn(e.currentTarget.id + "_1"), r = Sn(e.currentTarget.id + "_2"), o = Sn(e.currentTarget.id + "_3"); n && (this.hoveredID = n.id, n.setAttribute("fill", this.iconRectOverFill)), r && r.setAttribute("fill", this.selectionColor), o && o.setAttribute("fill", this.selectionColor), this.chart.isTouch || en("EJ2_Chart_ZoomTip", this.chart.getLocalizedLabel(t), e.pageY + 10, i, "10px") }, e.prototype.removeTooltip = function () { if (Sn(this.hoveredID)) { var e = this.chart.zoomModule.isPanning ? this.hoveredID.indexOf("_Pan_") > -1 ? this.iconRectSelectionFill : "transparent" : this.hoveredID.indexOf("_Zoom_") > -1 ? this.iconRectSelectionFill : "transparent"; Sn(this.hoveredID).setAttribute("fill", e) } var t = this.hoveredID ? Sn(this.hoveredID.replace("_1", "_2")) : null, i = this.hoveredID ? Sn(this.hoveredID.replace("_1", "_3")) : null; if (t) { var n = this.chart.zoomModule.isPanning ? this.hoveredID.indexOf("_Pan_") > -1 ? this.selectionColor : this.fillColor : this.hoveredID.indexOf("_Zoom_") > -1 ? this.selectionColor : this.fillColor; t.setAttribute("fill", n) } if (i) { n = this.chart.zoomModule.isPanning ? this.fillColor : this.hoveredID.indexOf("_Zoom_") > -1 ? this.selectionColor : this.fillColor; i.setAttribute("fill", n) } Oi("EJ2_Chart_ZoomTip") }, e.prototype.reset = function () { var e = this.chart; e.zoomModule.isDevice || k(e.zoomModule.toolkitElements); var t; return this.removeTooltip(), e.svgObject.setAttribute("cursor", "auto"), e.axisCollections.forEach(function (i) { t = { cancel: !1, name: Aj, axis: i, previousZoomFactor: i.zoomFactor, previousZoomPosition: i.zoomPosition, currentZoomFactor: 1, currentZoomPosition: 0 }, i.zoomFactor = 1, i.zoomPosition = 0, i.zoomingScrollBar && (i.zoomingScrollBar.isScrollUI = !1), e.trigger(Aj, t), t.cancel || (i.zoomFactor = t.currentZoomFactor, i.zoomPosition = t.currentZoomPosition) }), e.disableTrackTooltip = !1, e.zoomModule.isZoomed = e.zoomModule.isPanning = e.isChartDrag = e.delayRedraw = !1, e.zoomModule.touchMoveList = e.zoomModule.touchStartList = [], e.zoomModule.pinchTarget = null, e.removeSvg(), e.refreshAxis(), e.refreshBound(), this.elementOpacity = "1", !1 }, e.prototype.zoomIn = function (e) { return this.zoomInOutCalculation(1, this.chart, this.chart.axisCollections, this.chart.zoomSettings.mode), !1 }, e.prototype.zoomOut = function (e) { return this.zoomInOutCalculation(-1, this.chart, this.chart.axisCollections, this.chart.zoomSettings.mode), !1 }, e.prototype.zoom = function (e) { this.chart.zoomModule.isPanning = !1; this.chart.zoomModule; return this.elementOpacity = "1", this.chart.svgObject.setAttribute("cursor", "auto"), this.zoomInElements.setAttribute("opacity", this.elementOpacity), this.zoomOutElements.setAttribute("opacity", this.elementOpacity), this.applySelection(this.zoomElements.childNodes, this.selectionColor), this.applySelection(this.panElements.childNodes, "#737373"), Sn(this.selectedID) && Sn(this.selectedID).setAttribute("fill", "transparent"), this.selectedID = this.chart.element.id + "_Zooming_Zoom_1", Sn(this.selectedID).setAttribute("fill", this.iconRectSelectionFill), !1 }, e.prototype.pan = function () { return this.chart.zoomModule.isPanning = !0, this.chart.svgObject.setAttribute("cursor", "pointer"), this.elementOpacity = "0.2", this.zoomInElements ? this.zoomInElements.setAttribute("opacity", this.elementOpacity) : null, this.zoomOutElements ? this.zoomOutElements.setAttribute("opacity", this.elementOpacity) : null, this.panElements ? this.applySelection(this.panElements.childNodes, this.selectionColor) : null, this.zoomElements ? this.applySelection(this.zoomElements.childNodes, "#737373") : null, Sn(this.selectedID) && Sn(this.selectedID).setAttribute("fill", "transparent"), this.selectedID = this.chart.element.id + "_Zooming_Pan_1", Sn(this.selectedID).setAttribute("fill", this.iconRectSelectionFill), !1 }, e.prototype.zoomInOutCalculation = function (e, t, i, n) { if (!t.zoomModule.isPanning && "0.2" !== this.elementOpacity) { var r, o, s; t.disableTrackTooltip = !0, t.delayRedraw = !0; var a; i.forEach(function (i) { a = { cancel: !1, name: Aj, axis: i, previousZoomFactor: i.zoomFactor, previousZoomPosition: i.zoomPosition, currentZoomFactor: i.zoomFactor, currentZoomPosition: i.zoomPosition }, ("Horizontal" === i.orientation && "Y" !== n || "Vertical" === i.orientation && "X" !== n) && (s = Math.max(Math.max(1 / Mn(i.zoomFactor, 0, 1), 1) + .25 * e, 1), r = 1 === s ? 1 : Mn(1 / s, 0, 1), o = 1 === s ? 0 : i.zoomPosition + .5 * (i.zoomFactor - r), i.zoomPosition === o && i.zoomFactor === r || (r = o + r > 1 ? 1 - o : r), a.currentZoomFactor = r, a.currentZoomPosition = o, t.trigger(Aj, a), a.cancel || (i.zoomFactor = a.currentZoomFactor, i.zoomPosition = a.currentZoomPosition)) }) } }, e.prototype.applySelection = function (e, t) { for (var i = 1, n = e.length; i < n; i++)e[i].setAttribute("fill", t) }, e }(), fB = function () { function e(e) { this.chart = e, this.isPointer = uw.isPointer, this.browserName = uw.info.name, this.wheelEvent = "mozilla" === this.browserName ? this.isPointer ? "mousewheel" : "DOMMouseScroll" : "mousewheel", this.cancelEvent = this.isPointer ? "pointerleave" : "mouseleave", this.addEventListener(), this.isDevice = uw.isDevice; var t = e.zoomSettings; this.toolkit = new mB(e), this.zooming = t, this.elementId = e.element.id, this.zoomingRect = new ej(0, 0, 0, 0), this.zoomAxes = [], this.zoomkitOpacity = .3, this.isIOS = uw.isIos || uw.isIos7, this.isZoomed = this.performedUI = this.zooming.enablePan && this.zooming.enableSelectionZooming, t.enableScrollbar && (e.scrollElement = M("div", { id: e.element.id + "_scrollElement" })) } return e.prototype.renderZooming = function (e, t, i) { this.calculateZoomAxesRange(t, t.axisCollections), !this.zooming.enableSelectionZooming || i && (!t.isDoubleTap || 1 !== this.touchStartList.length) || this.isPanning && !t.isDoubleTap ? this.isPanning && t.isChartDrag && (!i || i && 1 === this.touchStartList.length) && (this.pinchTarget = i ? e.target : null, this.doPan(t, t.axisCollections)) : (this.isPanning = !!this.isDevice || this.isPanning, this.performedUI = !0, this.drawZoomingRectangle(t)) }, e.prototype.drawZoomingRectangle = function (e) { var t = e.chartAxisLayoutPanel.seriesClipRect, i = new dI(e.previousMouseMoveX, e.previousMouseMoveY), n = new dI(e.mouseX, e.mouseY), r = this.zoomingRect = Ln(i, n, t); if (r.width > 0 && r.height > 0) { this.isZoomed = !0, e.disableTrackTooltip = !0, e.svgObject.setAttribute("cursor", "crosshair"), "X" === this.zooming.mode ? (r.height = t.height, r.y = t.y) : "Y" === this.zooming.mode && (r.width = t.width, r.x = t.x); (e.enableCanvas ? document.getElementById(this.elementId + "_tooltip_svg") : e.svgObject).appendChild(e.svgRenderer.drawRectangle(new aI(this.elementId + "_ZoomArea", e.themeStyle.selectionRectFill, { color: e.themeStyle.selectionRectStroke, width: 1 }, 1, r, 0, 0, "", "3"))) } }, e.prototype.doPan = function (e, t) { if (e.startMove && e.crosshair.enable) return null; var i, n; this.isZoomed = !0; var r, o; this.offset = e.delayRedraw ? this.offset : e.chartAxisLayoutPanel.seriesClipRect, e.delayRedraw = !0, e.disableTrackTooltip = !0; var s; if (t.forEach(function (t) { s = { cancel: !1, name: Aj, axis: t, previousZoomFactor: t.zoomFactor, previousZoomPosition: t.zoomPosition, currentZoomFactor: t.zoomFactor, currentZoomPosition: t.zoomPosition }, i = Math.max(1 / Mn(t.zoomFactor, 0, 1), 1), "Horizontal" === t.orientation ? (n = (e.previousMouseMoveX - e.mouseX) / t.rect.width / i, s.currentZoomPosition = Mn(t.zoomPosition + n, 0, 1 - t.zoomFactor)) : (n = (e.previousMouseMoveY - e.mouseY) / t.rect.height / i, s.currentZoomPosition = Mn(t.zoomPosition - n, 0, 1 - t.zoomFactor)), e.trigger(Aj, s), s.cancel || (t.zoomFactor = s.currentZoomFactor, t.zoomPosition = s.currentZoomPosition) }), this.zooming.enableDeferredZooming) { switch (r = e.mouseX - e.mouseDownX, o = e.mouseY - e.mouseDownY, this.zooming.mode) { case "X": o = 0; break; case "Y": r = 0 }this.setTransform(r, o, null, null, e, !1), this.refreshAxis(e.chartAxisLayoutPanel, e, e.axisCollections), e.enableCanvas && this.performZoomRedraw(e) } else this.performZoomRedraw(e); e.previousMouseMoveX = e.mouseX, e.previousMouseMoveY = e.mouseY }, e.prototype.performZoomRedraw = function (e) { var t = this.zoomingRect; e.animateSeries = !1, this.isZoomed && (t.width > 0 && t.height > 0 ? (this.performedUI = !0, e.svgObject.setAttribute("cursor", "auto"), this.doZoom(e, e.axisCollections, e.chartAxisLayoutPanel.seriesClipRect), e.isDoubleTap = !1) : e.disableTrackTooltip && (e.disableTrackTooltip = !1, e.delayRedraw = !1, e.enableCanvas ? e.createChartSvg() : e.removeSvg(), e.refreshAxis(), e.refreshBound())) }, e.prototype.refreshAxis = function (e, t, i) { var n = t.zoomSettings.mode; e.measureAxis(new ej(t.initialClipRect.x, t.initialClipRect.y, t.initialClipRect.width, t.initialClipRect.height)), i.map(function (t, i) { "Horizontal" === t.orientation && "Y" !== n && e.drawXAxisLabels(t, i, null, t.placeNextToAxisLine ? t.updatedRect : t.rect), "Vertical" === t.orientation && "X" !== n && e.drawYAxisLabels(t, i, null, t.placeNextToAxisLine ? t.updatedRect : t.rect) }) }, e.prototype.doZoom = function (e, t, i) { var n, r = this.zoomingRect, o = this.zooming.mode; this.isPanning = e.zoomSettings.enablePan || this.isPanning, t.forEach(function (t) { n = { cancel: !1, name: Aj, axis: t, previousZoomFactor: t.zoomFactor, previousZoomPosition: t.zoomPosition, currentZoomFactor: t.zoomFactor, currentZoomPosition: t.zoomPosition }, "Horizontal" === t.orientation ? "Y" !== o && (n.currentZoomPosition += Math.abs((r.x - i.x) / i.width) * t.zoomFactor, n.currentZoomFactor *= r.width / i.width, e.trigger(Aj, n)) : "X" !== o && (n.currentZoomPosition += (1 - Math.abs((r.height + (r.y - i.y)) / i.height)) * t.zoomFactor, n.currentZoomFactor *= r.height / i.height, e.trigger(Aj, n)), n.cancel || (t.zoomFactor = n.currentZoomFactor, t.zoomPosition = n.currentZoomPosition) }), this.zoomingRect = new ej(0, 0, 0, 0), this.performZoomRedraw(e) }, e.prototype.performMouseWheelZooming = function (e, t, i, n, r) { var o, s, a, l = "mozilla" !== this.browserName || this.isPointer ? e.wheelDelta / 120 > 0 ? 1 : -1 : -e.detail / 3 > 0 ? 1 : -1, h = this.zooming.mode, d = .5; this.isZoomed = !0, this.calculateZoomAxesRange(n, n.axisCollections), n.disableTrackTooltip = !0, this.performedUI = !0, this.isPanning = n.zoomSettings.enablePan || this.isPanning; var c; r.forEach(function (e) { c = { cancel: !1, name: Aj, axis: e, previousZoomFactor: e.zoomFactor, previousZoomPosition: e.zoomPosition, currentZoomFactor: e.zoomFactor, currentZoomPosition: e.zoomPosition }, ("Vertical" === e.orientation && "X" !== h || "Horizontal" === e.orientation && "Y" !== h) && ((o = Math.max(Math.max(1 / Mn(e.zoomFactor, 0, 1), 1) + .25 * l, 1)) >= 1 && (d = (d = "Horizontal" === e.orientation ? t / e.rect.width : 1 - i / e.rect.height) > 1 ? 1 : d < 0 ? 0 : d, s = 1 === o ? 1 : Mn(1 / o, 0, 1), a = 1 === o ? 0 : e.zoomPosition + (e.zoomFactor - s) * d, e.zoomPosition === a && e.zoomFactor === s || (s = a + s > 1 ? 1 - a : s), c.currentZoomFactor = s, c.currentZoomPosition = a, n.trigger(Aj, c)), c.cancel || (e.zoomFactor = c.currentZoomFactor, e.zoomPosition = c.currentZoomPosition)) }), this.performZoomRedraw(n) }, e.prototype.performPinchZooming = function (e, t) { if (this.zoomingRect.width > 0 && this.zoomingRect.height > 0 || t.startMove && t.crosshair.enable) return !1; this.calculateZoomAxesRange(t, t.axisCollections), this.isZoomed = !0, this.isPanning = !0, this.performedUI = !0, this.offset = t.delayRedraw ? this.offset : t.chartAxisLayoutPanel.seriesClipRect, t.delayRedraw = !0, t.disableTrackTooltip = !0; var i, n, r, o, s, a, l, h = t.element.getBoundingClientRect(), d = this.touchStartList, c = this.touchMoveList, p = d[0].pageX - h.left, u = d[0].pageY - h.top, g = c[0].pageX - h.left, m = c[0].pageY - h.top, f = d[1].pageX - h.left, y = d[1].pageY - h.top, v = c[1].pageX - h.left, w = c[1].pageY - h.top; if (i = Math.abs(g - v) / Math.abs(p - f), n = Math.abs(m - w) / Math.abs(u - y), a = (this.offset.x - g) / i + p, l = (this.offset.y - m) / n + u, s = new ej(a, l, this.offset.width / i, this.offset.height / n), r = g - i * p, o = m - n * u, !isNaN(i - i) && !isNaN(n - n)) switch (this.zooming.mode) { case "XY": this.setTransform(r, o, i, n, t, !0); break; case "X": this.setTransform(r, 0, i, 1, t, !0); break; case "Y": this.setTransform(0, o, 1, n, t, !0) }return this.calculatePinchZoomFactor(t, s), this.refreshAxis(t.chartAxisLayoutPanel, t, t.axisCollections), !0 }, e.prototype.calculatePinchZoomFactor = function (e, t) { var i, n, r, o, s, a, l, h, d, c = this, p = this.zooming.mode; e.axisCollections.forEach(function (u, g) { ("Horizontal" === u.orientation && "Y" !== p || "Vertical" === u.orientation && "X" !== p) && (h = u.zoomFactor, d = u.zoomPosition, l = { cancel: !1, name: Aj, axis: u, previousZoomFactor: u.zoomFactor, previousZoomPosition: u.zoomPosition, currentZoomFactor: h, currentZoomPosition: d }, "Horizontal" === u.orientation ? (s = t.x - c.offset.x, a = u.rect.width / c.zoomAxes[g].delta, r = s / a + c.zoomAxes[g].min, s = t.x + t.width - c.offset.x, o = s / a + c.zoomAxes[g].min) : (s = t.y - c.offset.y, a = u.rect.height / c.zoomAxes[g].delta, r = (-1 * s + u.rect.height) / a + c.zoomAxes[g].min, s = t.y + t.height - c.offset.y, o = (-1 * s + u.rect.height) / a + c.zoomAxes[g].min), i = Math.min(r, o), n = Math.max(r, o), d = (i - c.zoomAxes[g].actualMin) / c.zoomAxes[g].actualDelta, h = (n - i) / c.zoomAxes[g].actualDelta, l.currentZoomPosition = d < 0 ? 0 : d, l.currentZoomFactor = h > 1 ? 1 : h, e.trigger(Aj, l), l.cancel || (u.zoomFactor = l.currentZoomFactor, u.zoomPosition = l.currentZoomPosition)) }) }, e.prototype.setTransform = function (e, t, i, n, r, o) { r.enableCanvas || r.seriesElements.setAttribute("clip-path", "url(#" + this.elementId + "_ChartAreaClipRect_)"), r.indicatorElements && r.indicatorElements.setAttribute("clip-path", "url(#" + this.elementId + "_ChartAreaClipRect_)"); var s, a, l, h; null !== e && null !== t && r.visibleSeries.forEach(function (d) { a = r.requireInvertedAxis ? d.yAxis.rect.x : d.xAxis.rect.x, l = r.requireInvertedAxis ? d.xAxis.rect.y : d.yAxis.rect.y, s = "translate(" + (e + (o ? i * a : a)) + "," + (t + (o ? n * l : l)) + ")", s = i || n ? s + " scale(" + i + " " + n + ")" : s, d.visible && ("Indicator" === d.category ? d.seriesElement.parentNode.setAttribute("transform", s) : r.enableCanvas || d.seriesElement.setAttribute("transform", s), h = Sn(r.element.id + "_Series_" + d.index + "_DataLabelCollections"), d.errorBarElement && d.errorBarElement.setAttribute("transform", s), d.symbolElement && d.symbolElement.setAttribute("transform", s), d.textElement && (d.textElement.setAttribute("visibility", "hidden"), d.shapeElement.setAttribute("visibility", "hidden")), h && (h.style.visibility = "hidden")) }) }, e.prototype.calculateZoomAxesRange = function (e, t) { var i, n, r = this; e.axisCollections.forEach(function (t, o) { n = t.visibleRange, r.zoomAxes[o] ? e.delayRedraw || (r.zoomAxes[o].min = n.min, r.zoomAxes[o].delta = n.delta) : (i = { actualMin: t.actualRange.min, actualDelta: t.actualRange.delta, min: n.min, delta: n.delta }, r.zoomAxes[o] = i) }) }, e.prototype.showZoomingToolkit = function (e) { var t, i, n = this.zooming.toolbarItems, r = e.chartAxisLayoutPanel.seriesClipRect, o = e.svgRenderer, s = this.isDevice ? 1 : n.length, a = this.isDevice ? xi("Reset Zoom", { size: "12px" }).width : 16, l = this.isDevice ? xi("Reset Zoom", { size: "12px" }).height : 22, h = s * a + 5 * (s + 1) + 5 * (s - 1), d = r.x + r.width - h - 5, c = r.y + 5, p = 5, u = this.toolkit, g = '<filter id="chart_shadow" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"/>'; if (g += '<feOffset dx="-3" dy="4" result="offsetblur"/><feComponentTransfer><feFuncA type="linear" slope="1"/>', g += '</feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge></filter>', 0 === s || Sn(this.elementId + "_Zooming_KitCollection")) return !1; var m = o.createDefs(); n = this.isDevice ? ["Reset"] : n, m.innerHTML = g, this.toolkitElements = o.createGroup({ id: this.elementId + "_Zooming_KitCollection", transform: "translate(" + d + "," + c + ")" }), this.toolkitElements.appendChild(m), this.toolkitElements.appendChild(o.drawRectangle(new aI(this.elementId + "_Zooming_Rect", "#fafafa", { color: "transparent", width: 1 }, 1, new ej(0, 0, h, l + 10), 0, 0))), (t = o.drawRectangle(new aI(this.elementId + "_Zooming_Rect", "#fafafa", { color: "transparent", width: 1 }, .1, new ej(0, 0, h, l + 10), 0, 0))).setAttribute("filter", "url(#chart_shadow)"), this.toolkitElements.appendChild(t); for (var f, y = 1; y <= s; y++) { switch (f = n[y - 1], i = o.createGroup({ transform: "translate(" + p + "," + (this.isDevice ? 5 : 8) + ")" }), f) { case "Pan": u.createPanButton(i, this.toolkitElements, e); break; case "Zoom": u.createZoomButton(i, this.toolkitElements, e); break; case "ZoomIn": u.createZoomInButton(i, this.toolkitElements, e); break; case "ZoomOut": u.createZoomOutButton(i, this.toolkitElements, e); break; case "Reset": u.createResetButton(i, this.toolkitElements, e, this.isDevice) }p += a + 10 } if (this.toolkitElements.setAttribute("opacity", this.isDevice ? "1" : "" + this.zoomkitOpacity), this.toolkitElements.setAttribute("cursor", "auto"), e.enableCanvas) { var v = document.createElement("div"); v.id = e.element.id + "_zoom", v.setAttribute("style", "position:absolute; z-index:1"); var w = e.availableSize.height / 2, b = e.svgRenderer.createSvg({ id: e.element.id + "_zoomkit_svg", width: e.availableSize.width, height: w }); b.setAttribute("style", "position:absolute"), b.appendChild(this.toolkitElements), v.appendChild(b), document.getElementById(this.elementId + "_Secondary_Element").appendChild(v) } else e.svgObject.appendChild(this.toolkitElements); return this.isDevice || (Kv.add(this.toolkitElements, "mousemove touchstart", this.zoomToolkitMove, this), Kv.add(this.toolkitElements, "mouseleave touchend", this.zoomToolkitLeave, this), this.isPanning && u.pan()), !0 }, e.prototype.applyZoomToolkit = function (e, t) { this.isAxisZoomed(t) ? (this.showZoomingToolkit(e), this.isZoomed = !0) : (this.toolkit.removeTooltip(), this.isPanning = !1, this.isZoomed = !1, e.svgObject.setAttribute("cursor", "auto")) }, e.prototype.isAxisZoomed = function (e) { var t = !1; return e.forEach(function (e) { t = t || 1 !== e.zoomFactor || 0 !== e.zoomPosition }), t }, e.prototype.zoomToolkitMove = function (e) { var t = this.toolkitElements; t.getAttribute("opacity"); return this.zoomkitOpacity = 1, t.setAttribute("opacity", "" + this.zoomkitOpacity), !1 }, e.prototype.zoomToolkitLeave = function (e) { var t = this.toolkitElements; return this.zoomkitOpacity = .3, t.setAttribute("opacity", "" + this.zoomkitOpacity), !1 }, e.prototype.addEventListener = function () { this.chart.isDestroyed || (Kv.add(this.chart.element, this.wheelEvent, this.chartMouseWheel, this), this.chart.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.chart.on(uw.touchStartEvent, this.mouseDownHandler, this), this.chart.on(uw.touchEndEvent, this.mouseUpHandler, this), this.chart.on(this.cancelEvent, this.mouseCancelHandler, this)) }, e.prototype.removeEventListener = function () { this.chart.isDestroyed || (Kv.remove(this.chart.element, this.wheelEvent, this.chartMouseWheel), this.chart.off(uw.touchMoveEvent, this.mouseMoveHandler), this.chart.off(uw.touchStartEvent, this.mouseDownHandler), this.chart.off(uw.touchEndEvent, this.mouseUpHandler), this.chart.off(this.cancelEvent, this.mouseCancelHandler)) }, e.prototype.chartMouseWheel = function (e) { var t = this.chart, i = t.element.getBoundingClientRect(), n = Sn(t.svgId).getBoundingClientRect(), r = e.clientX - i.left - Math.max(n.left - i.left, 0), o = e.clientY - i.top - Math.max(n.top - i.top, 0); return this.zooming.enableMouseWheelZooming && nn(r, o, t.chartAxisLayoutPanel.seriesClipRect) && (e.preventDefault(), this.performMouseWheelZooming(e, r, o, t, t.axisCollections)), !1 }, e.prototype.mouseMoveHandler = function (e) { var t = this.chart, i = null; "touchmove" === e.type && (e.preventDefault && this.isIOS && (this.isPanning || t.isDoubleTap || this.zooming.enablePinchZooming && this.touchStartList.length > 1) && e.preventDefault(), i = e.touches), t.isChartDrag && (t.isTouch && (this.touchMoveList = this.addTouchPointer(this.touchMoveList, e, i), this.zooming.enablePinchZooming && this.touchMoveList.length > 1 && this.touchStartList.length > 1 && this.performPinchZooming(e, t)), this.renderZooming(e, t, t.isTouch)) }, e.prototype.mouseDownHandler = function (e) { var t, i = this.chart, n = null; "touchstart" === e.type ? (n = e.touches, t = e.target) : t = e.target, -1 === t.id.indexOf(i.element.id + "_Zooming_") && nn(i.previousMouseMoveX, i.previousMouseMoveY, i.chartAxisLayoutPanel.seriesClipRect) && (i.isChartDrag = !0), i.isTouch && (this.touchStartList = this.addTouchPointer(this.touchStartList, e, n)) }, e.prototype.mouseUpHandler = function (e) { var t = this.chart, i = -1 === e.target.id.indexOf(t.element.id + "_ZoomOut_") || -1 === e.target.id.indexOf(t.element.id + "_ZoomIn_"); (t.isChartDrag || i) && this.performZoomRedraw(t), t.isTouch && (t.isDoubleTap && nn(t.mouseX, t.mouseY, t.chartAxisLayoutPanel.seriesClipRect) && 1 === this.touchStartList.length && this.isZoomed && this.toolkit.reset(), this.touchStartList = [], t.isDoubleTap = !1) }, e.prototype.mouseCancelHandler = function (e) { this.isZoomed && this.performZoomRedraw(this.chart), this.pinchTarget = null, this.touchStartList = [], this.touchMoveList = [] }, e.prototype.addTouchPointer = function (e, t, i) { if (i) { e = []; for (var n = 0, r = i.length; n < r; n++)e.push({ pageX: i[n].clientX, pageY: i[n].clientY, pointerId: null }) } else if (0 === (e = e || []).length) e.push({ pageX: t.clientX, pageY: t.clientY, pointerId: t.pointerId }); else { n = 0; for (var o = e.length; n < o; n++)e[n].pointerId === t.pointerId ? e[n] = { pageX: t.clientX, pageY: t.clientY, pointerId: t.pointerId } : e.push({ pageX: t.clientX, pageY: t.clientY, pointerId: t.pointerId }) } return e }, e.prototype.getModuleName = function () { return "Zoom" }, e.prototype.destroy = function (e) { this.removeEventListener() }, e }(), yB = function () { function e(e) { this.control = e } return e.prototype.seriesStyles = function () { var e, t = document.getElementById(this.styleId); if (d(t)) { (t = document.createElement("style")).setAttribute("id", this.styleId); for (var i = 0, n = this.control.visibleSeries; i < n.length; i++) { var r = n[i]; e = r.selectionStyle || this.styleId + "_series_" + r.index, t.innerHTML += r.selectionStyle ? "" : "." + e + " { } " } t.innerHTML += "." + this.unselected + " { opacity:0.3;} ", document.body.appendChild(t) } }, e.prototype.concatIndexes = function (e, t) { return e.concat(t) }, e.prototype.checkVisibility = function (e) { for (var t = !1, i = [], n = 0, r = e; n < r.length; n++) { var o = r[n]; -1 === i.indexOf(o.series) && i.push(o.series) } for (var s = 0, a = i; s < a.length; s++) { o = a[s]; if (this.control.series[o].visible) { t = !0; break } } return t }, e.prototype.addSvgClass = function (e, t) { var i = e.getAttribute("class") || ""; -1 === (i += "" !== i ? " " : "").indexOf(t) && e.setAttribute("class", i + t) }, e.prototype.removeSvgClass = function (e, t) { var i = e.getAttribute("class") || ""; i.indexOf(t) > -1 && e.setAttribute("class", i.replace(t, "")) }, e.prototype.getChildren = function (e) { for (var t = [], i = 0; i < e.childNodes.length; i++)"defs" !== e.childNodes[i].tagName && t.push(e.childNodes[i]); return t }, e }(), vB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), wB = function (e) { function t(t) { var i = e.call(this, t) || this; return i.chart = t, i.renderer = t.renderer, i.addEventListener(), i } return vB(t, e), t.prototype.addEventListener = function () { if (!(this.chart.isDestroyed || this.chart.stockChart && this.chart.stockChart.onPanning)) { var e = uw.isPointer ? "pointerleave" : "mouseleave"; this.chart.on(uw.touchMoveEvent, this.mouseMove, this), this.chart.on(e, this.completeSelection, this), this.chart.on("click", this.calculateSelectedElements, this), this.chart.on(uw.touchStartEvent, this.mousedown, this), this.chart.on(uw.touchEndEvent, this.completeSelection, this) } }, t.prototype.mousedown = function (e) { var t = this.chart; t.isPointMouseDown || "None" === t.selectionMode || t.isChartDrag || (t.isDoubleTap || !t.isTouch || this.rectPoints) && this.dragStart(t, t.chartAxisLayoutPanel.seriesClipRect, t.mouseDownX, t.mouseDownY, e) }, t.prototype.removeEventListener = function () { this.chart.isDestroyed || (this.chart.off(uw.touchMoveEvent, this.mouseMove), this.chart.off("pointerleave", this.completeSelection), this.chart.off("click", this.calculateSelectedElements), this.chart.off(uw.touchStartEvent, this.mousedown), this.chart.off(uw.touchEndEvent, this.completeSelection)) }, t.prototype.initPrivateVariables = function (e) { this.styleId = e.element.id + "_ej2_chart_selection", this.unselected = e.element.id + "_ej2_deselected", this.closeIconId = e.element.id + "_ej2_drag_close", this.draggedRectGroup = e.element.id + "_ej2_drag_group", this.draggedRect = e.element.id + "_ej2_drag_rect", this.selectedDataIndexes = [], this.rectPoints = null, this.isSeriesMode = "Series" === e.selectionMode }, t.prototype.invokeSelection = function (e) { this.initPrivateVariables(e), this.series = h({}, e.visibleSeries, null, !0), this.seriesStyles(), e.selectionMode.indexOf("Drag") > -1 || this.selectDataIndex(e, this.concatIndexes(e.selectedDataIndexes, this.selectedDataIndexes)) }, t.prototype.generateStyle = function (e) { return e ? e.selectionStyle || this.styleId + "_series_" + e.index : "undefined" }, t.prototype.selectDataIndex = function (e, t) { for (var i = 0, n = t; i < n.length; i++) { var r = n[i]; this.performSelection(r, e, this.getElementByIndex(e, r)[0]) } }, t.prototype.getElementByIndex = function (e, t, i) { void 0 === i && (i = ""); var n = e.element.id + "_Series_" + t.series + "_Point_" + t.point, r = e.series[t.series]; return n = !r.isRectSeries && "Scatter" !== r.type && "Bubble" !== r.type && r.marker.visible ? n + "_Symbol" + i : n, [Sn(n), "RangeArea" === r.type && r.marker.visible ? Sn(n + "1") : null] }, t.prototype.getClusterElements = function (e, t) { for (var i = [], n = 0, r = e.visibleSeries; n < r.length; n++) { var o = r[n]; t = new YE(o.index, t.point), i.push(this.getElementByIndex(e, t)[0]) } return i }, t.prototype.findElements = function (e, t, i, n) { return void 0 === n && (n = ""), this.isSeriesMode ? this.getSeriesElements(t) : "Cluster" === e.selectionMode ? this.getClusterElements(e, i) : this.getElementByIndex(e, i, n) }, t.prototype.calculateSelectedElements = function (e) { "None" !== this.chart.selectionMode && -1 !== e.target.id.indexOf(this.chart.element.id + "_") && e.target.id.indexOf("_Series_") > -1 && this.performSelection(this.indexFinder(e.target.id), this.chart, e.target) }, t.prototype.performSelection = function (e, t, i) { switch (this.isSeriesMode = "Series" === t.selectionMode, "BoxAndWhisker" === t.series[e.series].type && i.id === t.element.id + "_Series_" + e.series + "_Point_" + e.point + "_BoxPath" && (i = i.parentElement), t.selectionMode) { case "Series": this.selection(t, e, this.getSeriesElements(t.series[e.series])), this.blurEffect(t.element.id, t.visibleSeries); break; case "Point": isNaN(e.point) || (this.selection(t, e, [i]), this.blurEffect(t.element.id, t.visibleSeries)); break; case "Cluster": isNaN(e.point) || (this.clusterSelection(t, t.series, e), this.blurEffect(t.element.id, t.visibleSeries)) } }, t.prototype.selection = function (e, t, i) { e.isMultiSelect || -1 !== e.selectionMode.indexOf("Drag") || this.removeMultiSelectEelments(e, this.selectedDataIndexes, t, e.series); var n = i[0] && (i[0].getAttribute("class") || ""); i[0] && n.indexOf(this.getSelectionClass(i[0].id)) > -1 ? (this.removeStyles(i), this.addOrRemoveIndex(this.selectedDataIndexes, t)) : (this.applyStyles(i), this.addOrRemoveIndex(this.selectedDataIndexes, t, !0)) }, t.prototype.clusterSelection = function (e, t, i) { this.selection(e, i, this.getClusterElements(e, new YE(i.series, i.point))) }, t.prototype.removeMultiSelectEelments = function (e, t, i, n) { for (var r, o = 0; o < t.length; o++)r = n[t[o].series], (this.isSeriesMode && !this.toEquals(t[o], i, this.isSeriesMode) || "Cluster" === this.control.selectionMode && !this.toEquals(t[o], i, !1) || !this.isSeriesMode && this.toEquals(t[o], i, !0) && !this.toEquals(t[o], i, !1)) && (this.removeStyles(this.findElements(e, r, t[o])), t.splice(o, 1), o--) }, t.prototype.blurEffect = function (e, t) { for (var i = this.checkVisibility(this.selectedDataIndexes), n = 0, r = t; n < r.length; n++) { var o = r[n]; o.visible && (this.checkSelectionElements(Sn(e + "SeriesGroup" + o.index), this.generateStyle(o), i), d(Sn(e + "SymbolGroup" + o.index)) || this.checkSelectionElements(Sn(e + "SymbolGroup" + o.index), this.generateStyle(o), i)) } }, t.prototype.checkSelectionElements = function (e, t, i) { for (var n, r, o, s = this.isSeriesMode ? [e] : e.childNodes, a = e, l = 0; l < s.length; l++)n = s[l].getAttribute("class") || "", r = s[l].parentNode.getAttribute("class") || "", -1 === n.indexOf(t) && -1 === r.indexOf(t) && i ? this.addSvgClass(s[l], this.unselected) : (a = s[l], this.removeSvgClass(s[l], this.unselected)); this.control.legendModule && this.control.legendSettings.visible && (o = document.getElementById(this.control.element.id + "_chart_legend_shape_" + t.split("_series_")[1])) && (n = a.getAttribute("class") || "", r = a.parentNode.getAttribute("class") || "", -1 === n.indexOf(t) && -1 === r.indexOf(t) && i ? this.addSvgClass(o, this.unselected) : this.removeSvgClass(o, this.unselected)) }, t.prototype.applyStyles = function (e) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; n && (this.removeSvgClass(n.parentNode, this.unselected), this.removeSvgClass(n, this.unselected), this.addSvgClass(n, this.getSelectionClass(n.id))) } }, t.prototype.getSelectionClass = function (e) { return this.generateStyle(this.control.series[this.indexFinder(e).series]) }, t.prototype.removeStyles = function (e) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; n && this.removeSvgClass(n, this.getSelectionClass(n.id)) } }, t.prototype.addOrRemoveIndex = function (e, t, i) { for (var n = 0; n < e.length; n++)this.toEquals(e[n], t, this.isSeriesMode) && (e.splice(n, 1), n--); i && e.push(t) }, t.prototype.toEquals = function (e, t, i) { return (e.series === t.series || "Cluster" === this.control.selectionMode && !i) && (i || e.point === t.point) }, t.prototype.redrawSelection = function (e, t) { this.isSeriesMode = "Series" === t; var i = h([], this.selectedDataIndexes, null, !0); this.removeSelectedElements(e, this.selectedDataIndexes, e.series), this.blurEffect(e.element.id, e.visibleSeries), this.selectDataIndex(e, i) }, t.prototype.legendSelection = function (e, t) { var i = this.generateStyle(e.visibleSeries[t]), n = document.getElementsByClassName(i); this.isSeriesMode = "Series" === e.selectionMode; var r = !0; if (n.length > 0) { for (var o = [], s = 0; s < n.length; s++)o.push(n[s]); this.removeStyles(o), this.isSeriesMode = !0, this.addOrRemoveIndex(this.selectedDataIndexes, new YE(t, NaN)); for (var a = 0, l = e.visibleSeries; a < l.length; a++) { var h = l[a]; if (i = this.generateStyle(h), document.getElementsByClassName(i).length > 0) { for (var d = 0, c = o; d < c.length; d++) { var p = c[d]; this.checkSelectionElements(p, i, !0) } r = !1; break } } r && (this.isSeriesMode = "Series" === e.selectionMode, this.blurEffect(e.element.id, e.visibleSeries)) } else { for (var u = this.getSeriesElements(e.visibleSeries[t]), g = 0, m = u; g < m.length; g++) { var f = m[g]; this.checkSelectionElements(f, i, !1) } this.isSeriesMode = !0, this.selection(e, new YE(t, NaN), u), this.isSeriesMode = "Series" === e.selectionMode, this.blurEffect(e.element.id, e.visibleSeries) } }, t.prototype.getSeriesElements = function (e) { var t = [e.seriesElement]; return e.marker.visible && "Scatter" !== e.type && "Bubble" !== e.type && !e.isRectSeries && t.push(e.symbolElement), t }, t.prototype.indexFinder = function (e) { var t = ["NaN", "NaN"]; return e.indexOf("SeriesGroup") > -1 ? (t = e.split("SeriesGroup"))[0] = t[1] : e.indexOf("SymbolGroup") > -1 ? (t = e.split("SymbolGroup"))[0] = t[1] : e.indexOf("_Point_") > -1 ? t = e.split("_Series_")[1].split("_Point_") : e.indexOf("_Series_") > -1 && (t[0] = e.split("_Series_")[1]), new YE(parseInt(t[0], 10), parseInt(t[1], 10)) }, t.prototype.calculateDragSelectedElements = function (e, t) { this.removeSelectedElements(e, this.selectedDataIndexes, e.series); var i = new ej(t.x, t.y, t.width, t.height), n = new dI(e.chartAxisLayoutPanel.seriesClipRect.x, e.chartAxisLayoutPanel.seriesClipRect.y); this.removeOffset(i, n); var r, o, s = [], a = []; this.isSeriesMode = !1; for (var l = function (t) { if (t.visible) { r = t.points, s = []; var l, d; !e.isTransposed && -1 === t.type.indexOf("Bar") || e.isTransposed && -1 !== t.type.indexOf("Bar") ? (l = t.xAxis.rect.x - n.x, d = t.yAxis.rect.y - n.y) : (l = t.xAxis.rect.y - n.y, d = t.yAxis.rect.x - n.x); for (var c = 0; c < r.length; c++) { var p = "RangeArea" !== t.type ? r[c].yValue : r[c].regions[0].y, u = void 0; (u = "BoxAndWhisker" === t.type ? r[c].regions.some(function (e) { return nn(e.x + l, e.y + d, i) }) : r[c].symbolLocations.some(function (e) { return e && nn(e.x + l, e.y + d, i) })) && "Indicator" !== t.category && (o = new YE(t.index, r[c].index), h.selection(e, o, h.findElements(e, t, o)), s.push({ x: r[c].xValue.toString(), y: p })), u && "RangeArea" === t.type && s.push({ x: r[c].xValue.toString(), y: r[c].regions[0].y }) } a.push(s) } }, h = this, d = 0, c = e.visibleSeries; d < c.length; d++) { l(c[d]) } this.blurEffect(e.element.id, e.visibleSeries), this.rectPoints = new ej(t.x, t.y, t.width, t.height), this.createCloseButton(t.x + t.width, t.y); var p = { name: Ej, selectedDataValues: a, cancel: !1 }; e.trigger(Ej, p) }, t.prototype.removeOffset = function (e, t) { e.x -= t.x, e.y -= t.y }, t.prototype.drawDraggingRect = function (e, t) { var i = e.chartAxisLayoutPanel.seriesClipRect; switch (e.selectionMode) { case "DragX": t.y = i.y, t.height = i.height; break; case "DragY": t.x = i.x, t.width = i.width }if (t.width < 5 || t.height < 5) return null; var n = Sn(this.draggedRect); if (this.closeIcon && Oi(this.closeIconId), n) this.setAttributes(n, t); else { var r = e.svgRenderer.createGroup({ id: this.draggedRectGroup }), o = document.getElementById(e.element.id + "_series_svg"); e.enableCanvas ? o.appendChild(r) : e.svgObject.appendChild(r), (n = e.svgRenderer.drawRectangle(new aI(this.draggedRect, e.themeStyle.selectionRectFill, { color: e.themeStyle.selectionRectStroke, width: 1 }, 1, t))).setAttribute("style", "cursor:move;"), r.appendChild(n) } }, t.prototype.createCloseButton = function (e, t) { var i = this.chart.svgRenderer.createGroup({ id: this.closeIconId, style: "cursor:pointer; visibility: visible;" }); i.appendChild(this.chart.svgRenderer.drawCircle(new lI(this.closeIconId + "_circle", "#FFFFFF", { color: this.chart.themeStyle.selectionCircleStroke, width: 1 }, 1, e, t, 10))); var n = "M " + (e - 4) + " " + (t - 4) + " L " + (e + 4) + " " + (t + 4) + " M " + (e - 4) + " " + (t + 4) + " L " + (e + 4) + " " + (t - 4); i.appendChild(this.chart.svgRenderer.drawPath({ id: this.closeIconId + "_cross", d: n, stroke: this.chart.themeStyle.selectionCircleStroke, "stroke-width": 2, fill: this.chart.themeStyle.selectionCircleStroke }, null)), this.closeIcon = i, Sn(this.draggedRectGroup).appendChild(i) }, t.prototype.removeDraggedElements = function (e, t) { t.target.id.indexOf(this.closeIconId) > -1 && -1 === t.type.indexOf("move") && (this.removeSelectedElements(e, this.selectedDataIndexes, e.series), this.blurEffect(e.element.id, e.visibleSeries), k(Sn(this.draggedRectGroup)), this.changeCursorStyle(!1, e.svgObject, "auto"), this.rectPoints = null) }, t.prototype.resizingSelectionRect = function (e, t, i) { var n = new ej(this.rectPoints.x, this.rectPoints.y, this.rectPoints.width, this.rectPoints.height), r = this.findResizeMode(e.svgObject, n, t); this.resizing && (n = Pn(n.x, n.y, n.x + n.width, n.y + n.height, e.chartAxisLayoutPanel.seriesClipRect), this.drawDraggingRect(e, n), this.dragRect = n), i && (this.resizing = r) }, t.prototype.findResizeMode = function (e, t, i) { var n = "se-resize", r = !1; if (this.resizing) { var o = t.x, s = t.y, a = i.x - o, l = i.y - s; switch (this.resizeMode) { case 0: l = Math.abs(t.height + t.y - i.y), t.y = Math.min(t.height + t.y, i.y), t.height = l; break; case 1: a = Math.abs(t.width + t.x - i.x), t.x = Math.min(t.width + t.x, i.x), t.width = a; break; case 2: t.height = Math.abs(l), t.y = Math.min(i.y, s); break; case 3: t.width = Math.abs(a), t.x = Math.min(i.x, o); break; case 4: t.width = Math.abs(a), t.height = Math.abs(l), t.x = Math.min(i.x, o), t.y = Math.min(i.y, s) } } else for (var h = [new ej(t.x, t.y - 10, t.width - 5, 20), new ej(t.x - 10, t.y, 20, t.height), new ej(t.x, t.y + t.height - 10, t.width - 10, 20), new ej(t.x + t.width - 10, t.y + 5, 20, t.height - 15), new ej(t.x + t.width - 10, t.y + t.height - 10, 20, 20)], d = 0; d < h.length; d++)if (nn(i.x, i.y, h[d])) { n = 4 === d ? n : d % 2 == 0 ? "ns-resize" : "ew-resize", r = !0, this.resizeMode = d; break } return this.changeCursorStyle(r, Sn(this.draggedRect), n), this.changeCursorStyle(r, e, n), r }, t.prototype.changeCursorStyle = function (e, t, i) { i = e ? i : this.control.svgObject === t ? "auto" : "move", t.setAttribute("style", "cursor:" + i + ";") }, t.prototype.removeSelectedElements = function (e, t, i) { t.splice(0, t.length); for (var n, r = 0, o = i; r < o.length; r++) { var s = o[r]; n = this.getSeriesElements(s), this.removeStyles(n); for (var a = 0, l = n; a < l.length; a++) { var h = l[a]; this.removeStyles(this.getChildren(h)) } } }, t.prototype.setAttributes = function (e, t) { for (var i = 0, n = Object.keys(t); i < n.length; i++) { var r = n[i]; e.setAttribute(r, t[r]) } }, t.prototype.draggedRectMoved = function (e, t, i) { var n = new ej(this.rectPoints.x, this.rectPoints.y, this.rectPoints.width, this.rectPoints.height); n.x -= t.x - e.mouseX, n.y -= t.y - e.mouseY, n = Pn(n.x, n.y, n.x + n.width, n.height + n.y, e.chartAxisLayoutPanel.seriesClipRect), i ? this.drawDraggingRect(e, n) : this.calculateDragSelectedElements(e, n) }, t.prototype.completeSelection = function (e) { var t = this.chart; "None" !== t.selectionMode && ((this.dragging || this.resizing) && this.dragRect.width > 5 && this.dragRect.height > 5 ? this.calculateDragSelectedElements(t, this.dragRect) : this.rectGrabbing && this.rectPoints.width && this.rectPoints.height && this.draggedRectMoved(t, this.dragRect), this.dragging = !1, this.rectGrabbing = !1, this.resizing = !1, this.removeDraggedElements(t, e)) }, t.prototype.getDragRect = function (e, t) { return Pn(e.mouseDownX, e.mouseDownY, e.mouseX, e.mouseY, t) }, t.prototype.dragStart = function (e, t, i, n, r) { this.dragging = e.selectionMode.indexOf("Drag") > -1 && (e.isDoubleTap || !e.isTouch) && "PolarRadar" !== e.chartAreaType, this.dragging && (this.dragRect = new ej(e.mouseDownX, e.mouseDownY, 0, 0), (e.mouseDownX < t.x || e.mouseDownX > t.x + t.width || e.mouseDownY < t.y || e.mouseDownY > t.y + t.height) && (this.dragging = !1)), this.rectPoints && (this.dragRect = new ej(e.mouseDownX, e.mouseDownY, 0, 0), this.resizingSelectionRect(e, new dI(i, n), !0), this.rectGrabbing = nn(i, n, this.rectPoints)) }, t.prototype.mouseMove = function (e) { var t = this.chart; if ("None" !== t.selectionMode) { "touchmove" === e.type && (uw.isIos || uw.isIos7) && this.dragging && e.preventDefault && e.preventDefault(); nn(t.mouseX, t.mouseY, t.chartAxisLayoutPanel.seriesClipRect) ? (this.rectGrabbing && !this.resizing ? this.draggedRectMoved(t, this.dragRect, !0) : this.dragging && !this.resizing && (this.dragRect = this.getDragRect(t, t.chartAxisLayoutPanel.seriesClipRect), this.drawDraggingRect(t, this.dragRect)), this.rectPoints && this.resizingSelectionRect(t, new dI(t.mouseX, t.mouseY))) : this.completeSelection(e) } }, t.prototype.getModuleName = function () { return "Selection" }, t.prototype.destroy = function (e) { this.removeEventListener() }, t }(yB), bB = function () { function e(e) { this.chart = e } return e.prototype.pointMouseDown = function () { var e = this.chart, t = new yI(e), i = t.getData(); !i.point || !t.insideRegion && i.series.isRectSeries || (this.seriesIndex = i.series.index, this.pointIndex = i.point.index, e.series[this.seriesIndex].dragSettings.enable && !e.zoomModule && (e.trigger("dragStart", { series: i.series, seriesIndex: this.seriesIndex, pointIndex: this.pointIndex, point: i.point, oldValue: e.visibleSeries[this.seriesIndex].yData[this.pointIndex], newValue: e.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue }), e.isPointMouseDown = !0, e.zoomSettings.enableDeferredZooming = !1)) }, e.prototype.pointMouseMove = function (e) { var t, i = this.chart; "touchmove" === e.type && e.preventDefault && e.preventDefault(); var n = new yI(i), r = n.getData(); r.series.dragSettings.enable && r.point && (n.insideRegion || !r.series.isRectSeries) ? this.getCursorStyle(r) : i.svgObject.setAttribute("style", "cursor: null"), i.isPointMouseDown && ((t = i.series[this.seriesIndex]).type.indexOf("Spline") > -1 && i[an(t.type) + "SeriesModule"].findSplinePoint(t), this.pointDragging(this.seriesIndex, this.pointIndex)) }, e.prototype.getCursorStyle = function (e) { var t = this.chart; "Bar" === e.series.type && t.isTransposed ? t.svgObject.setAttribute("style", "cursor:ns-resize") : t.isTransposed || "Bar" === e.series.type ? t.svgObject.setAttribute("style", "cursor:ew-resize") : t.svgObject.setAttribute("style", "cursor:ns-resize") }, e.prototype.pointDragging = function (e, t) { var i, n, r, o, s = this.chart, a = [], l = s.visibleSeries[e], h = l.dragSettings, c = l.xAxis, p = l.yAxis, u = l.isRectSeries ? 1 : 0, g = ln(c, p, s.requireInvertedAxis); if ("Bar" === l.type ? (i = s.isTransposed ? g.y + g.height - s.mouseY : s.mouseX - g.x, n = s.isTransposed ? g.height : g.width) : (i = s.isTransposed ? s.mouseX - g.x : g.y + g.height - s.mouseY, n = s.isTransposed ? g.width : g.height), r = p.isInversed ? 1 - i / n : i / n, r = r * p.visibleRange.delta + p.visibleRange.min, o = null !== p.minimum ? p.visibleRange.min + u : d(h.minY) ? r : h.minY, (null !== p.maximum ? p.visibleRange.max + u : d(h.maxY) ? r : h.maxY) >= r && o <= r) { l.points[t].yValue = l.points[t].y = s.dragY = "Logarithmic" === p.valueType ? Math.pow(p.logBase, r) : parseFloat(r.toFixed(2)), l.points[t].interior = h.fill; for (var m = 0; m < l.points.length; m++)a[m] = l.points[m].yValue; l.yMin = Math.min.apply(null, a), l.yMax = Math.max.apply(null, a), s.refreshBound(), s.trigger("drag", { seriesIndex: e, pointIndex: t, series: l, point: l.points[t], oldValue: s.visibleSeries[this.seriesIndex].yData[this.pointIndex], newValue: l.points[t].yValue }) } }, e.prototype.pointMouseUp = function () { var e = this.chart; e.isPointMouseDown && e.series[this.seriesIndex].dragSettings.enable && (e.trigger("dragEnd", { series: e.series[this.seriesIndex], point: e.visibleSeries[this.seriesIndex].points[this.pointIndex], seriesIndex: this.seriesIndex, pointIndex: this.pointIndex, oldValue: e.visibleSeries[this.seriesIndex].yData[this.pointIndex], newValue: e.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue }), e.visibleSeries[this.seriesIndex].points[this.pointIndex].y = e.visibleSeries[this.seriesIndex].points[this.pointIndex].yValue, e.isPointMouseDown = !1, this.seriesIndex = this.pointIndex = void 0) }, e.prototype.getModuleName = function () { return "DataEditing" }, e.prototype.destroy = function (e) { }, e }(), CB = function () { function e(e) { this.errorHeight = 0, this.chart = e } return e.prototype.initPrivateVariables = function (e, t) { var i, n = e.chart.renderer, r = void 0 === e.index ? e.category : e.index; i = "Cartesian" === e.chart.chartAreaType ? "translate(" + e.clipRect.x + "," + e.clipRect.y + ")" : "", t.dataLabel.visible && (e.shapeElement = n.createGroup({ id: this.chart.element.id + "ShapeGroup" + r, transform: i, "clip-path": "url(#" + this.chart.element.id + "_ChartSeriesClipRect_" + r + ")" }), e.textElement = n.createGroup({ id: this.chart.element.id + "TextGroup" + r, transform: i, "clip-path": "url(#" + this.chart.element.id + "_ChartSeriesClipRect_" + r + ")" })), this.markerHeight = "Scatter" === e.type || t.visible ? t.height / 2 : 0, this.commonId = this.chart.element.id + "_Series_" + r + "_Point_", this.calculateErrorHeight(e, e.marker.dataLabel.position), this.chartBackground = "trasparent" === this.chart.chartArea.background ? this.chart.background || this.chart.themeStyle.background : this.chart.chartArea.background }, e.prototype.calculateErrorHeight = function (e, t) { if (!e.errorBar.visible) return null; if (e.errorBar.visible && "PolarRadar" !== this.chart.chartAreaType) { var i = e.errorBar.direction, n = this.chart.errorBarModule.positiveHeight, r = this.chart.errorBarModule.negativeHeight; this.isRectSeries(e) ? ("Top" !== t && "Auto" !== t || (this.errorHeight = "Both" === i || "Minus" === i ? r : 0), "Outer" !== t && "Auto" !== t || (this.errorHeight = "Both" === i || "Plus" === i ? n : 0)) : ("Top" !== t && "Outer" !== t && "Auto" !== t || ("Both" !== i && "Plus" !== i || e.chart.isTransposed ? this.errorHeight = 0 : this.errorHeight = n), "Bottom" !== t && "Auto" !== t || (this.errorHeight = "Both" === i || "Minus" === i ? r : 0)) } else this.errorHeight = 0 }, e.prototype.isRectSeries = function (e) { return e.isRectSeries || "RangeArea" === e.type }, e.prototype.render = function (e, t, i) { var r = this; this.initPrivateVariables(e, e.marker); var o, s, a, l, d, c; this.inverted = t.requireInvertedAxis, this.yAxisInversed = e.yAxis.isInversed; var p = t.redraw, u = M("div", { id: t.element.id + "_Series_" + (void 0 === e.index ? e.category : e.index) + "_DataLabelCollections" }); e.points.map(function (g, m) { r.margin = i.margin; var f, y, v = [], w = e.clipRect; d = { width: i.border.width, color: i.border.color }; var b = h({}, n("properties", i.font), null, !0); if (g.symbolLocations.length && g.symbolLocations[0] || "BoxAndWhisker" === e.type && g.regions.length) { f = (v = On(g, e)).length; for (var C = 0; C < f; C++)l = { cancel: !1, name: fj, series: e, point: g, text: v[C], border: d, color: i.fill, template: i.template, font: b }, t.trigger(fj, l), l.cancel || (r.fontBackground = l.color, r.isDataLabelShape(l), r.markerHeight = "Bubble" === e.type ? g.regions[0].height / 2 : r.markerHeight, null !== l.template ? r.createDataLabelTemplate(u, e, i, g, l, C, p) : (c = xi(l.text, i.font), zn(o = r.calculateTextPosition(g, e, c, i, C), t.dataLabelCollections, w) || (t.dataLabelCollections.push(new ej(o.x + w.x, o.y + w.y, o.width, o.height)), r.isShape && (y = t.renderer.drawRectangle(new aI(r.commonId + m + "_TextShape_" + C, l.color, l.border, i.opacity, o, i.rx, i.ry), new Int32Array([w.x, w.y])), e.shapeElement && e.shapeElement.appendChild(y)), s = _n(Yn(r.fontBackground)), a = Math.round((299 * s.r + 587 * s.g + 114 * s.b) / 1e3), $n(t.renderer, new nj(r.commonId + m + "_Text_" + C, o.x + r.margin.left + c.width / 2, o.y + r.margin.top + 3 * c.height / 4, "middle", l.text, "rotate(0," + o.x + "," + o.y + ")", "auto"), l.font, l.font.color || (a >= 128 || "Hilo" === e.type ? "black" : "white"), e.textElement, !1, p, !0, !1, e.chart.duration, e.clipRect)))) } }), u.childElementCount && kn(t.enableCanvas, Sn(t.element.id + "_Secondary_Element"), u, t.redraw, !1, "x", "y", null, "", !1, !1, null, t.duration) }, e.prototype.createDataLabelTemplate = function (e, t, i, n, r, o, s) { this.margin = { left: 0, right: 0, bottom: 0, top: 0 }; var a = t.clipRect, l = Tn(M("div", { id: this.chart.element.id + "_Series_" + (void 0 === t.index ? t.category : t.index) + "_DataLabel_" + n.index + (o ? "_" + o : ""), styles: "position: absolute;background-color:" + r.color + ";" + Dn(i.font) + ";border:" + r.border.width + "px solid " + r.border.color + ";" }), n.index, r.template, this.chart, n, t), h = An(l, s), d = this.calculateTextPosition(n, t, { width: h.width, height: h.height }, i, o); l.style.left = ("PolarRadar" === this.chart.chartAreaType ? 0 : t.clipRect.x) + d.x + "px", l.style.top = ("PolarRadar" === this.chart.chartAreaType ? 0 : t.clipRect.y) + d.y + "px"; var c = _n(Yn(this.fontBackground)), p = t.chart.requireInvertedAxis ? t.xAxis : t.yAxis, u = t.chart.requireInvertedAxis ? t.yAxis : t.xAxis; l.style.color = i.font.color || (Math.round((299 * c.r + 587 * c.g + 114 * c.b) / 1e3) >= 128 ? "black" : "white"), l.childElementCount && !zn(d, this.chart.dataLabelCollections, a) && ("XY" !== t.seriesType || void 0 === n.yValue || Fi(n.yValue, t.yAxis.visibleRange) || t.type.indexOf("100") > -1 && Fi(t.stackedValues.endValues[n.index], t.yAxis.visibleRange)) && Fi(n.xValue, t.xAxis.visibleRange) && parseFloat(l.style.top) >= p.rect.y && parseFloat(l.style.left) >= u.rect.x && parseFloat(l.style.top) <= p.rect.y + p.rect.height && parseFloat(l.style.left) <= u.rect.x + u.rect.width && (this.chart.dataLabelCollections.push(new ej(d.x + a.x, d.y + a.y, d.width, d.height)), kn(this.chart.enableCanvas, e, l, s, !0, "left", "top"), t.animation.enable && this.chart.animateSeries && this.doDataLabelAnimation(t, l)) }, e.prototype.calculateTextPosition = function (e, t, i, n, r) { var o = r > 1 && "Candle" === t.type ? e.regions[1] : e.regions[0]; r > 1 && "HiloOpenClose" === t.type && (o = 2 === r ? e.regions[1] : e.regions[2]); var s; s = this.getLabelLocation(e, t, i, r); var a, l = t.clipRect; if (this.chart.requireInvertedAxis && this.isRectSeries(t) && "BoxAndWhisker" !== t.type) { this.locationY = s.y; h = i.width + this.borderWidth + this.margin.left + this.margin.right - 5; s.x = "Auto" === n.position ? s.x : this.calculateAlignment(h, s.x, n.alignment, e.yValue < 0), s.x = this.calculateRectPosition(s.x, o, e.yValue < 0 !== this.yAxisInversed, n.position, t, i, r, e) } else { this.locationX = s.x; var h = i.height + 2 * this.borderWidth + this.markerHeight + this.margin.bottom + this.margin.top + 5; s.y = "Auto" === n.position ? s.y : this.calculateAlignment(h, s.y, n.alignment, !!this.isRectSeries(t) && e.yValue < 0), s.y = this.isRectSeries(t) && "BoxAndWhisker" !== t.type ? this.calculateRectPosition(s.y, o, e.yValue < 0 !== this.yAxisInversed, n.position, t, i, r, e) : this.calculatePathPosition(s.y, n.position, t, e, i, r), this.isRectSeries(t) && "PolarRadar" === this.chart.chartAreaType && (s = this.calculatePolarRectPosition(s, n.position, t, e, i, r)) } return (a = Vn(s, i, this.margin)).y > l.height || a.x > l.width || a.x + a.width < 0 || a.y + a.height < 0 || (a.x = a.x < 0 ? 5 : a.x, a.y = a.y < 0 ? 5 : a.y, a.x -= a.x + a.width > l.width ? a.x + a.width - l.width + 5 : 0, a.y -= a.y + a.height > l.height ? a.y + a.height - l.height + 5 : 0, this.fontBackground = "transparent" === this.fontBackground ? this.chartBackground : this.fontBackground), a }, e.prototype.calculatePolarRectPosition = function (e, t, i, n, r, o) { var s, a = n.regionData.startAngle - .5 * Math.PI + (n.regionData.endAngle - n.regionData.startAngle) / 2; return s = 0 === o ? n.regionData.radius < n.regionData.innerRadius ? n.regionData.innerRadius : n.regionData.radius : n.regionData.radius > n.regionData.innerRadius ? n.regionData.innerRadius : n.regionData.radius, this.fontBackground = "transparent" === this.fontBackground ? this.chartBackground : this.fontBackground, i.drawType.indexOf("Stacking") > -1 ? t = "Outer" === t ? "Top" : t : i.drawType.indexOf("Range") > -1 && (t = "Outer" === t || "Top" === t ? t : "Auto"), s = "Outer" === t ? 0 === o ? s + 10 + this.markerHeight : s - 10 - this.markerHeight : "Middle" === t ? s / 2 + 5 : "Top" === t ? 0 === o ? s - 10 - this.markerHeight : s + 10 + this.markerHeight : "Bottom" === t ? 5 : 0 === o ? s >= i.chart.radius ? s - 5 : "StackingColumn" === i.drawType ? s - 10 : s + 10 : s >= i.chart.radius ? s + 5 : s - 10, e.x = i.clipRect.width / 2 + i.clipRect.x + s * Math.cos(a), e.y = i.clipRect.height / 2 + i.clipRect.y + s * Math.sin(a), e }, e.prototype.getLabelLocation = function (e, t, i, n) { var r = new dI(0, 0), o = "Candle" === t.type && n > 1 ? e.regions[1] : e.regions[0]; "HiloOpenClose" === t.type && (o = 2 === n ? e.regions[1] : e.regions[2]); var s = t.xAxis, a = t.yAxis, l = t.chart.requireInvertedAxis; if ("BoxAndWhisker" === t.type) { switch (this.markerHeight = 0, n) { case 0: r = jn(e.xValue, e.median, s, a, l); break; case 1: r = jn(e.xValue, e.maximum, s, a, l); break; case 2: r = jn(e.xValue, e.minimum, s, a, l); break; case 3: r = jn(e.xValue, e.upperQuartile, s, a, l); break; case 4: r = jn(e.xValue, e.lowerQuartile, s, a, l); break; default: r = jn(e.xValue, e.outliers[n - 5], s, a, l), this.markerHeight = t.marker.height / 2 }l ? r.y = e.regions[0].y + e.regions[0].height / 2 : r.x = e.regions[0].x + e.regions[0].width / 2 } else r = 0 === n || 1 === n ? new dI(e.symbolLocations[0].x, e.symbolLocations[0].y) : 2 !== n && 3 !== n || "Candle" !== t.type ? l ? { x: o.x + o.width / 2, y: o.y } : { x: o.x + o.width, y: o.y + o.height / 2 } : new dI(e.symbolLocations[1].x, e.symbolLocations[1].y); if (n > 1 && "HiloOpenClose" === t.type) if (t.chart.requireInvertedAxis) { var h = o.height; r.y = o.y + h / 2 + 2 * (2 === n ? 1 : -1) } else { var d = o.width; r.x = o.x + d / 2 + 2 * (2 === n ? 1 : -1) } return r }, e.prototype.calculateRectPosition = function (e, t, i, n, r, o, s, a) { if ("PolarRadar" === r.chart.chartAreaType) return null; var l = this.margin, h = this.inverted ? o.width : o.height, d = this.borderWidth + h / 2 + 5; switch (r.type.indexOf("Stacking") > -1 ? n = "Outer" === n ? "Top" : n : r.type.indexOf("Range") > -1 ? n = "Outer" === n || "Top" === n ? n : "Auto" : "Waterfall" === r.type && (n = "Auto" === n ? "Middle" : n), n) { case "Bottom": e = this.inverted ? i ? e + t.width - d - l.left : e - t.width + d + l.right : i ? e - t.height + d + l.top : e + t.height - d - l.bottom; break; case "Middle": e = e = this.inverted ? i ? e + t.width / 2 : e - t.width / 2 : i ? e - t.height / 2 : e + t.height / 2; break; case "Auto": e = this.calculateRectActualPosition(e, t, i, r, o, s, a); break; default: d += this.errorHeight, e = this.calculateTopAndOuterPosition(e, t, n, r, s, d, i) }var c = this.inverted ? e < t.x || e > t.x + t.width : e < t.y || e > t.y + t.height; return this.fontBackground = c ? "transparent" === this.fontBackground ? this.chartBackground : this.fontBackground : "transparent" === this.fontBackground ? a.color || r.interior : this.fontBackground, e }, e.prototype.calculatePathPosition = function (e, t, i, n, r, o) { switch (i.type.indexOf("Area") > -1 && "RangeArea" !== i.type && this.yAxisInversed && "Auto" !== i.marker.dataLabel.position && (t = "Top" === t ? "Bottom" : "Bottom" === t ? "Top" : t), this.fontBackground = "transparent" === this.fontBackground ? this.chartBackground : this.fontBackground, t) { case "Top": case "Outer": e = e - this.markerHeight - this.borderWidth - r.height / 2 - this.margin.bottom - 5 - this.errorHeight; break; case "Bottom": e = e + this.markerHeight + this.borderWidth + r.height / 2 + this.margin.top + 5 + this.errorHeight; break; case "Auto": e = this.calculatePathActualPosition(e, this.markerHeight, i, n, r, o) }return e }, e.prototype.isDataLabelShape = function (e) { this.isShape = "transparent" !== e.color || e.border.width > 0, this.borderWidth = e.border.width, this.isShape || (this.margin = { left: 0, right: 0, bottom: 0, top: 0 }) }, e.prototype.calculateRectActualPosition = function (e, t, i, n, r, o, s) { for (var a, l, h = !0, d = 0, c = this.chart.dataLabelCollections, p = -1 !== n.type.indexOf("Range") || "Hilo" === n.type ? 2 : 4; h && d < p;)a = this.calculateRectPosition(e, t, i, this.getPosition(d), n, r, o, s), h = this.inverted ? (l = Vn(new dI(a, this.locationY), r, this.margin)).x < 0 || zn(l, c, n.clipRect) || l.x + l.width > n.clipRect.width : (l = Vn(new dI(this.locationX, a), r, this.margin)).y < 0 || zn(l, c, n.clipRect) || l.y > n.clipRect.height, d++; return a }, e.prototype.calculateAlignment = function (e, t, i, n) { switch (i) { case "Far": t = this.inverted ? n ? t - e : t + e : n ? t + e : t - e; break; case "Near": t = this.inverted ? n ? t + e : t - e : n ? t - e : t + e; break; case "Center": t = t }return t }, e.prototype.calculateTopAndOuterPosition = function (e, t, i, n, r, o, s) { var a, l = this.margin; switch (n.type) { case "RangeColumn": case "RangeArea": case "Hilo": a = 0 === r && !this.yAxisInversed || 1 === r && this.yAxisInversed, e = this.updateLabelLocation(i, e, o, l, t, a); break; case "Candle": a = (0 === r || 2 === r) && !this.yAxisInversed || (1 === r || 3 === r) && this.yAxisInversed, e = this.updateLabelLocation(i, e, o, l, t, a, r > 1); break; case "HiloOpenClose": r <= 1 ? (a = 0 === r && !this.yAxisInversed || 1 === r && this.yAxisInversed, e = this.updateLabelLocation(i, e, o, l, t, a)) : e = this.yAxisInversed ? this.inverted ? e - o - l.right : e + o + l.top : this.inverted ? e + o + l.left : e - o - l.bottom; break; default: e = s && "Top" === i || !s && "Outer" === i ? this.inverted ? e + o + l.left + this.markerHeight : e - o - l.bottom - this.markerHeight : this.inverted ? e - o - l.right - this.markerHeight : e + o + l.top + this.markerHeight }return e }, e.prototype.updateLabelLocation = function (e, t, i, n, r, o, s) { return void 0 === s && (s = !1), t = this.inverted ? o ? "Outer" !== e || s ? t - i - n.right - this.markerHeight : t + i + n.left + this.markerHeight : "Outer" !== e || s ? t - r.width + i + n.left + this.markerHeight : t - r.width - i - n.right - this.markerHeight : o ? "Outer" !== e || s ? t + i + n.top + this.markerHeight : t - i - n.bottom - this.markerHeight : "Outer" !== e || s ? t + r.height - i - n.bottom - this.markerHeight : t + r.height + i + n.top + this.markerHeight }, e.prototype.calculatePathActualPosition = function (e, t, i, n, r, o) { var s, a, l, h, d, c = i.points, p = n.index, u = c[p].yValue, g = c.length - 1 > p ? c[p + 1] : null, m = p > 0 ? c[p - 1] : null, f = !0, y = this.chart.dataLabelCollections; if ("Bubble" === i.type) s = "Top"; else if (i.type.indexOf("Step") > -1) s = "Top", p && (s = m && m.visible && u > m.yValue === this.yAxisInversed && u !== m.yValue ? "Bottom" : "Top"); else if ("BoxAndWhisker" === i.type) 1 === o || 3 === o || o > 4 ? s = i.yAxis.isInversed ? "Bottom" : "Top" : 2 === o || 4 === o ? s = i.yAxis.isInversed ? "Top" : "Bottom" : (f = !1, s = "Middle", a = this.calculatePathPosition(e, s, i, n, r, o)); else if (0 === p) s = !g || !g.visible || u > g.yValue || u < g.yValue && this.yAxisInversed ? "Top" : "Bottom"; else if (p === c.length - 1) s = !m || !m.visible || u > m.yValue || u < m.yValue && this.yAxisInversed ? "Top" : "Bottom"; else if (g.visible || m && m.visible) if (g.visible && m) { var v = (g.yValue - m.yValue) / 2, w = v * p + (g.yValue - v * (p + 1)); s = this.yAxisInversed ? w < u ? "Bottom" : "Top" : w < u ? "Top" : "Bottom" } else s = g.yValue > u || m && m.yValue > u ? "Bottom" : "Top"; else s = "Top"; for (h = "Bottom" === s, d = ["Outer", "Top", "Bottom", "Middle", "Auto"].indexOf(s); f && d < 4;)a = this.calculatePathPosition(e, this.getPosition(d), i, n, r, o), f = (l = Vn(new dI(this.locationX, a), r, this.margin)).y < 0 || zn(l, y, i.clipRect) || l.y + l.height > i.clipRect.height, d = h ? d - 1 : d + 1, h = !1; return a }, e.prototype.doDataLabelAnimation = function (e, t) { for (var i, n = e.shapeElement.childNodes, r = e.textElement.childNodes, o = e.animation.delay + e.animation.duration, s = e.chart.animated ? e.chart.duration : 200, a = t ? 1 : r.length, l = 0; l < a; l++)i = r[l], t ? (t.style.visibility = "hidden", wn(t, o, s, "ZoomIn")) : (pn(i, o, s, e, null, new dI(+i.getAttribute("x") + +i.getAttribute("width") / 2, +i.getAttribute("y") + +i.getAttribute("height") / 2), !0), n[l] && pn(i = n[l], o, s, e, null, new dI(+i.getAttribute("x") + +i.getAttribute("width") / 2, +i.getAttribute("y") + +i.getAttribute("height") / 2), !0)) }, e.prototype.getPosition = function (e) { return ["Outer", "Top", "Bottom", "Middle", "Auto"][e] }, e.prototype.getModuleName = function () { return "DataLabel" }, e.prototype.destroy = function (e) { }, e }(), LB = function () { function e(e) { this.chart = e } return e.prototype.render = function (e) { if ("PolarRadar" === this.chart.chartAreaType) return null; this.createElement(e, this.chart), this.renderErrorBar(e) }, e.prototype.renderErrorBar = function (e) { for (var t, i, n = e.index, r = e.errorBar, o = e.errorBar.errorBarCap, s = ["", ""], a = e.chart.redraw, l = 0, h = e.points; l < h.length; l++) { var d = h[l]; if (d.visible && d.symbolLocations[0]) { var c = 0, p = 0; switch (r.mode) { case "Vertical": p = r.verticalError; break; case "Horizontal": c = r.horizontalError; break; case "Both": c = r.horizontalError, p = r.verticalError }s = this["calculate" + r.type + "Value"](d, e, this.chart.requireInvertedAxis, c, p), t = this.chart.element.id + "_Series__ErrorBarGroup_" + n + "_Point_" + d.index, i = this.chart.element.id + "_Series__ErrorBarCap_" + n + "_Point_" + d.index; var u = new rj(t, "", r.width, r.color || this.chart.themeStyle.errorBar, null, "", s[0]), g = Sn(u.id), m = g ? g.getAttribute("d") : null; e.errorBarElement.appendChild(this.chart.renderer.drawPath(u)), gn(g, s[0], a, m); var f = new rj(i, "", o.width, o.color || this.chart.themeStyle.errorBar, null, "", s[1]); m = (g = Sn(f.id)) ? g.getAttribute("d") : null, kn(this.chart.enableCanvas, e.errorBarElement, this.chart.renderer.drawPath(f), a), gn(g, s[1], a, m) } } }, e.prototype.findLocation = function (e, t, i, n, r) { var o = t.errorBar, s = o.direction, a = [], l = (t.stackedValues, t.type.indexOf("Stacking") > -1 ? t.stackedValues.endValues[e.index] : "HighLow" === t.seriesType || "HighLowOpenClose" === t.seriesType ? t.points[e.index].high : e.yValue), h = jn(e.xValue + ("Plus" === s || "Both" === s ? "Custom" !== o.type || "Horizontal" !== o.mode && "Both" !== o.mode ? n : n = o.horizontalPositiveError : 0), l + ("Plus" === s || "Both" === s ? "Custom" !== o.type || "Vertical" !== o.mode && "Both" !== o.mode ? r : r = o.verticalPositiveError : 0), t.xAxis, t.yAxis, i); if (a.push(h), t.isRectSeries) { var d = e.symbolLocations[0]; a.push(d) } else { d = jn(e.xValue, e.yValue, t.xAxis, t.yAxis, i); a.push(d) } var c = jn(e.xValue - ("Minus" === s || "Both" === s ? "Custom" !== o.type || "Horizontal" !== o.mode && "Both" !== o.mode ? n : n = o.horizontalNegativeError : 0), l - ("Minus" === s || "Both" === s ? "Custom" !== o.type || "Vertical" !== o.mode && "Both" !== o.mode ? r : r = o.verticalNegativeError : 0), t.xAxis, t.yAxis, i); return a.push(c), e.error = "Vertical" === o.mode ? o.verticalError : o.horizontalError, this.negativeHeight = "Vertical" === o.mode || "Both" === o.mode ? i ? a[1].x - a[2].x : a[2].y - a[1].y : 0, this.positiveHeight = "Vertical" === o.mode || "Both" === o.mode ? i ? a[0].x - a[1].x : a[1].y - a[0].y : 0, this.getErrorDirection(a[0], a[1], a[2], t, i) }, e.prototype.calculateFixedValue = function (e, t, i, n, r, o, s) { t.errorBar; return this.findLocation(e, t, i, n, r) }, e.prototype.calculatePercentageValue = function (e, t, i, n, r, o, s) { return n = n / 100 * e.xValue, r = r / 100 * e.yValue, this.findLocation(e, t, i, n, r) }, e.prototype.calculateStandardDeviationValue = function (e, t, i, n, r, o, s) { var a = this.meanCalculation(t, t.errorBar.mode); return n *= a.horizontalSquareRoot + a.horizontalMean, r *= a.verticalSquareRoot + a.verticalMean, this.findLocation(e, t, i, n, r) }, e.prototype.calculateStandardErrorValue = function (e, t, i, n, r, o, s) { var a = t.points.length, l = this.meanCalculation(t, t.errorBar.mode); return n = n * l.horizontalSquareRoot / Math.sqrt(a), r = r * l.verticalSquareRoot / Math.sqrt(a), this.findLocation(e, t, i, n, r) }, e.prototype.calculateCustomValue = function (e, t, i, n, r, o, s) { t.errorBar; return this.findLocation(e, t, i, n, r) }, e.prototype.getHorizontalDirection = function (e, t, i, n, r, o) { var s = "", a = ""; return s += "M " + e.x + " " + t.y + " L " + i.x + " " + t.y, a += "Plus" === n || "Both" === n ? "M " + e.x + " " + (t.y - o) + " L " + e.x + " " + (t.y + o) : "", a += "Minus" === n || "Both" === n ? "M " + i.x + " " + (t.y - o) + " L " + i.x + " " + (t.y + o) : " ", [s, a] }, e.prototype.getVerticalDirection = function (e, t, i, n, r, o) { var s = "", a = ""; return s += "M " + t.x + " " + e.y + " L " + t.x + " " + i.y, a += "Plus" === n || "Both" === n ? "M " + (t.x - o) + " " + e.y + " L " + (t.x + o) + " " + e.y : "", a += "Minus" === n || "Both" === n ? "M " + (t.x - o) + " " + i.y + " L " + (t.x + o) + " " + i.y : "", [s, a] }, e.prototype.getBothDirection = function (e, t, i, n, r, o) { var s = "", a = "", l = this.getHorizontalDirection(e, t, i, n, r, o), h = this.getVerticalDirection(e, t, i, n, r, o); return a = l[0].concat(h[0]), s = l[1].concat(h[1]), [a, s] }, e.prototype.getErrorDirection = function (e, t, i, n, r) { var o, s = n.errorBar.direction, a = n.errorBar.mode, l = n.errorBar.errorBarCap.length, h = a; switch (a) { case "Both": h = a; break; case "Horizontal": h = r ? "Vertical" : a; break; case "Vertical": h = r ? "Horizontal" : a }switch (h) { case "Horizontal": o = this.getHorizontalDirection(e, t, i, s, h, l); break; case "Vertical": o = this.getVerticalDirection(e, t, i, s, h, l); break; case "Both": o = this.getBothDirection(e, t, i, s, h, l) }return [o[0], o[1]] }, e.prototype.meanCalculation = function (e, t) { var i, n, r, o, s = 0, a = 0, l = 0, h = 0, d = e.points.length; switch (t) { case "Vertical": l = (a = Hi(e.yData)) / d; break; case "Horizontal": h = (s = Hi(e.xData)) / d; break; case "Both": l = (a = Hi(e.yData)) / d, h = (s = Hi(e.xData)) / d }for (var c = 0, p = e.points; c < p.length; c++) { var u = p[c]; "Vertical" === t ? a += Math.pow(u.yValue - l, 2) : "Horizontal" === t ? s += Math.pow(u.xValue - h, 2) : (a += Math.pow(u.yValue - l, 2), s += Math.pow(u.xValue - h, 2)) } return i = a / (d - 1), r = Math.sqrt(a / (d - 1)), n = s / (d - 1), o = Math.sqrt(s / (d - 1)), new nI(i, r, n, o, l, h) }, e.prototype.createElement = function (e, t) { var i = "Cartesian" === t.chartAreaType ? "translate(" + e.clipRect.x + "," + e.clipRect.y + ")" : "", n = (e.marker.height + 5) / 2, r = (e.marker.width + 5) / 2; if ("Cartesian" === t.chartAreaType) { var o = new aI(t.element.id + "_ChartErrorBarClipRect_" + e.index, "transparent", { width: 1, color: "Gray" }, 1, { x: -r, y: -n, width: e.clipRect.width + 2 * r, height: e.clipRect.height + 2 * n }); e.errorBarElement = t.renderer.createGroup({ id: t.element.id + "ErrorBarGroup" + e.index, transform: i, "clip-path": "url(#" + t.element.id + "_ChartErrorBarClipRect_" + e.index + ")" }), e.errorBarElement.appendChild(mn(t.redraw, o, t.renderer)) } }, e.prototype.doErrorBarAnimation = function (e) { var t = e.errorBarElement.childNodes; if (!t) return null; for (var i = e.animation.delay + e.animation.duration, n = 1; n < t.length;) { for (var r = 0; r < e.points.length; r++)e.points[r].symbolLocations[0] && (t[n].style.visibility = "hidden", wn(t[n], i, 350, e.chart.requireInvertedAxis ? "SlideLeftIn" : "SlideBottomIn", !1)); n++ } }, e.prototype.getModuleName = function () { return "ErrorBar" }, e.prototype.destroy = function (e) { }, e }(), MB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SB = function (e) { function t(t) { var i = e.call(this, t) || this; return i.library = i, i.addEventListener(), i } return MB(t, e), t.prototype.addEventListener = function () { this.chart.isDestroyed || (this.chart.on(uw.touchMoveEvent, this.mouseMove, this), this.chart.on("click", this.click, this), this.chart.on(uw.touchEndEvent, this.mouseEnd, this)) }, t.prototype.removeEventListener = function () { this.chart.isDestroyed || (this.chart.off(uw.touchMoveEvent, this.mouseMove), this.chart.off("click", this.click), this.chart.off(uw.touchEndEvent, this.mouseEnd)) }, t.prototype.mouseMove = function (e) { this.chart.legendSettings.visible && !this.chart.isTouch && this.move(e) }, t.prototype.mouseEnd = function (e) { this.chart.legendSettings.visible && this.chart.isTouch && this.move(e) }, t.prototype.getLegendOptions = function (e, t) { this.legendCollections = []; for (var i, n = 0, r = e; n < r.length; n++) { var o = r[n]; "Indicator" !== o.category && (i = "PolarRadar" === t.chartAreaType ? o.drawType : o.type, this.legendCollections.push(new FI(o.name, o.interior, o.legendShape, o.visible, i, o.marker.shape, o.marker.visible))) } }, t.prototype.getLegendBounds = function (e, t, i) { var n = i.padding, r = 0, o = 0; this.isVertical ? o = i.width ? 0 : e.width / 100 * 5 : r = i.height ? 0 : e.height / 100 * 5, t.height += r, t.width += o; i.shapeHeight; var s, a = i.shapeWidth, l = i.shapePadding, h = 0, d = 0, c = 0, p = 0, u = 0; this.maxItemHeight = Math.max(xi("MeasureText", i.textStyle).height, i.shapeHeight); for (var g = !1, m = 0, f = this.legendCollections; m < f.length; m++) { var y = f[m]; s = { fill: y.fill, text: y.text, shape: y.shape, markerShape: y.markerShape, name: mj, cancel: !1 }, this.chart.trigger(mj, s), y.render = !s.cancel, y.text = s.text, y.fill = s.fill, y.shape = s.shape, y.markerShape = s.markerShape, y.textSize = xi(y.text, i.textStyle), y.render && "" !== y.text && (g = !0, d += c = a + l + y.textSize.width + n, (t.width < n + d || this.isVertical) && (h = Math.max(h, d + n - (this.isVertical ? 0 : c)), 0 === u && c !== d && (u = 1), d = this.isVertical ? 0 : c, p = ++u * (this.maxItemHeight + n) + n)) } p = Math.max(p, this.maxItemHeight + n + n), this.isPaging = t.height < p, this.totalPages = u, g ? this.setBounds(Math.max(d + n, h), p, i, t) : this.setBounds(0, 0, i, t) }, t.prototype.getRenderPoint = function (e, t, i, n, r, o, s) { var a = this.legend.padding, l = n.location.x + i + n.textSize.width; l + (e.textSize.width + i) > r.x + r.width + this.legend.shapeWidth / 2 || this.isVertical ? (e.location.x = t.x, e.location.y = o === s ? n.location.y : n.location.y + this.maxItemHeight + a) : (e.location.x = o === s ? n.location.x : l, e.location.y = n.location.y); var h = this.legendBounds.x + this.legendBounds.width - (e.location.x + i - this.legend.shapeWidth / 2); e.text = Qn(+h.toFixed(4), e.text, this.legend.textStyle) }, t.prototype.LegendClick = function (e) { var t = this.chart, i = t.visibleSeries[e], n = this.legendCollections[e], r = { legendText: n.text, legendShape: n.shape, chart: t, series: i, name: "legendClick", cancel: !1 }; this.chart.trigger("legendClick", r), i.legendShape = r.legendShape, null !== i.fill && (t.visibleSeries[e].interior = i.fill); var o = []; if (t.selectionModule && (o = h([], t.selectionModule.selectedDataIndexes, null, !0)), t.legendSettings.toggleVisibility) { if (i.visible ? i.visible = !1 : i.visible = !0, n.visible = i.visible, t.svgObject.childNodes.length > 0 && !t.enableAnimation && !t.enableCanvas) { for (; t.svgObject.lastChild;)t.svgObject.removeChild(t.svgObject.lastChild); k(t.svgObject) } t.animateSeries = !1, t.redraw = t.enableAnimation, Oi(Sn(t.element.id + "_Secondary_Element").querySelectorAll(".ejSVGTooltip")[0]), this.redrawSeriesElements(i, t), t.removeSvg(), t.refreshAxis(), i.refreshAxisLabel(), this.refreshSeries(t.visibleSeries), t.refreshBound(), t.trigger("loaded", { chart: t }), o.length > 0 && (t.selectionModule.selectedDataIndexes = o, t.selectionModule.redrawSelection(t, t.selectionMode)), t.redraw = !1 } else t.selectionModule && t.selectionModule.legendSelection(t, e) }, t.prototype.redrawSeriesElements = function (e, t) { if (!t.redraw) return null; Oi(t.element.id + "_Series_" + (void 0 === e.index ? e.category : e.index) + "_DataLabelCollections") }, t.prototype.refreshSeries = function (e) { for (var t = 0, i = e; t < i.length; t++) { i[t].position = void 0 } }, t.prototype.click = function (e) { var t = this; if (this.chart.legendSettings.visible) { for (var i, n = e.pageX, r = e.pageY, o = [], s = e.target.id, a = 0, l = [this.legendID + "_text_", this.legendID + "_shape_marker_", this.legendID + "_shape_"]; a < l.length; a++) { var h = l[a]; if (s.indexOf(h) > -1) { i = parseInt(s.split(h)[1], 10), this.LegendClick(i); break } } s.indexOf(this.legendID + "_pageup") > -1 ? this.changePage(e, !0) : s.indexOf(this.legendID + "_pagedown") > -1 && this.changePage(e, !1), this.chart.enableCanvas && this.pagingRegions.length && this.checkWithinBounds(n, r), (o = this.legendRegions.filter(function (e) { return nn(n, r + (t.isPaging ? (t.currentPageNumber - 1) * t.translatePage(null, 1, 2) : 0), e.rect) })).length && this.chart.enableCanvas && this.LegendClick(o[0].index) } }, t.prototype.checkWithinBounds = function (e, t) { var i = this.chart.renderer, n = this.legendBounds, r = this.chart.legendSettings.border.width, o = new ej(n.x, n.y, n.width, n.height); return o.x = o.x - r / 2, o.y = o.y - r / 2, o.width = o.width + r, o.height = o.height + r, nn(e, t, this.pagingRegions[0]) ? (--this.currentPageNumber > 0 ? (this.legendRegions = [], i.clearRect(o), i.canvasClip(new aI("legendClipPath", "transparent", { width: 0, color: "" }, null, o)), this.renderLegend(this.chart, this.legend, n), i.canvasRestore()) : ++this.currentPageNumber, null) : nn(e, t, this.pagingRegions[1]) ? (++this.currentPageNumber > 0 && this.currentPageNumber <= this.totalNoOfPages ? (this.legendRegions = [], i.clearRect(o), i.canvasClip(new aI("legendClipPath", "transpaent", { width: 0, color: "" }, null, o)), this.renderLegend(this.chart, this.legend, n), i.canvasRestore()) : --this.currentPageNumber, null) : void 0 }, t.prototype.getModuleName = function () { return "Legend" }, t.prototype.destroy = function (e) { this.removeEventListener() }, t }(BI), xB = function () { function e(e) { this.control = e } return e.prototype.render = function (e, t) { this.isChart = "chart" === this.control.getModuleName(), this.annotation = e; return Tn(M("div", { id: this.control.element.id + "_Annotation_" + t, styles: "position: absolute;" }), 0, e.content, this.control) }, e.prototype.setAnnotationPixelValue = function (e) { var t; return t = "Chart" === this.annotation.region ? new ej(0, 0, this.control.availableSize.width, this.control.availableSize.height) : this.isChart ? this.control.chartAxisLayoutPanel.seriesClipRect : this.control.series[0].accumulationBound, e.x = ("string" != typeof this.annotation.x ? "number" == typeof this.annotation.x ? this.annotation.x : 0 : Jn(this.annotation.x, t.width)) + t.x, e.y = ("number" == typeof this.annotation.y ? this.annotation.y : Jn(this.annotation.y, t.height)) + t.y, !0 }, e.prototype.setAnnotationPointValue = function (e) { var t = new dI(0, 0); if (this.isChart) { for (var i = void 0, n = void 0, r = this.control, o = this.annotation, s = void 0, a = o.xAxisName, l = o.yAxisName, h = r.requireInvertedAxis, d = 0, c = r.axisCollections; d < c.length; d++) { var p = c[d]; if (a === p.name || null == a && "primaryXAxis" === p.name) if ((i = p).valueType.indexOf("Category") > -1) { var u = "DateTimeCategory" === i.valueType ? o.x.getTime().toString() : o.x; if (i.labels.indexOf(u) < 0) return !1; s = i.labels.indexOf(u) } else if ("DateTime" === i.valueType) { var g = { skeleton: "full", type: "dateTime" }; s = "object" == typeof this.annotation.x ? Date.parse(r.intl.getDateParser(g)(r.intl.getDateFormat(g)(new Date(JD.parse.parseJson({ val: o.x }).val)))) : 0 } else s = +o.x; else (l === p.name || null == l && "primaryYAxis" === p.name) && "Logarithmic" === (n = p).valueType } return !!(i && n && Fi("Logarithmic" === i.valueType ? Ri(s, i.logBase) : s, i.visibleRange) && Fi("Logarithmic" === n.valueType ? Ri(+o.y, n.logBase) : +o.y, n.visibleRange)) && (t = jn(s, +o.y, i, n, h), e.x = t.x + (h ? n.rect.x : i.rect.x), e.y = t.y + (h ? i.rect.y : n.rect.y), !0) } return this.setAccumulationPointValue(e) }, e.prototype.processAnnotation = function (e, t, i) { var n, r; r = new dI(0, 0), n = this.render(e, t), this["setAnnotation" + e.coordinateUnits + "Value"](r) ? this.setElementStyle(r, n, i) : this.control.redraw && Oi(n.id), pe(this.control.element.id + "Annotation" + t, "ContentTemplate", this.control.annotations[t]) }, e.prototype.setAccumulationPointValue = function (e) { for (var t, i = 0, n = this.control.visibleSeries[0].points; i < n.length; i++) { var r = n[i]; if ("object" == typeof r.x) { if (Date.parse(r.x) === Date.parse(this.annotation.x) && r.y == this.annotation.y) { t = r; break } } else if (r.x == this.annotation.x && r.y == this.annotation.y) { t = r; break } } return !(!t || !t.visible) && (e.x = t.symbolLocation.x, e.y = t.symbolLocation.y, !0) }, e.prototype.setElementStyle = function (e, t, i) { var n = An(t, this.control.redraw), r = { cancel: !1, name: jj, content: t, location: e }; this.control.trigger(jj, r), r.cancel || (r.content.style.left = this.setAlignmentValue(this.annotation.horizontalAlignment, n.width, r.location.x) + "px", r.content.style.top = this.setAlignmentValue(this.annotation.verticalAlignment, n.height, r.location.y) + "px", r.content.setAttribute("aria-label", this.annotation.description || "Annotation"), In(r.content, i, this.control.redraw, !0, "left", "top")) }, e.prototype.setAlignmentValue = function (e, t, i) { switch (e) { case "Top": case "Near": i -= t; break; case "Bottom": case "Far": i += 0; break; case "Middle": case "Center": i -= t / 2 }return i }, e }(), TB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), DB = function (e) { function t(t, i) { var n = e.call(this, t) || this; return n.chart = t, n.annotations = i, n } return TB(t, e), t.prototype.renderAnnotations = function (e) { var t = this; this.annotations = this.chart.annotations, this.parentElement = Zn(this.chart.redraw, this.chart.element.id + "_Annotation_Collections") || M("div", { id: this.chart.element.id + "_Annotation_Collections" }), this.annotations.map(function (e, i) { t.processAnnotation(e, i, t.parentElement) }), In(this.parentElement, e, this.chart.redraw) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "Annotation" }, t }(xB), AB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), EB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AB(t, e), t.prototype.render = function (e, t, i, n) { for (var r, o = this.getSideBySideInfo(e), s = 0, a = e.points; s < a.length; s++) { var l = a[s]; l.symbolLocations = [], l.regions = []; var h = void 0; l.visible && Wi(e.points[l.index - 1], l, e.points[l.index + 1], e) && (this.findBoxPlotValues(l.y, l, e.boxPlotMode), this.updateTipRegion(e, l, o), h = this.getRectangle(l.xValue + o.start, l.upperQuartile, l.xValue + o.end, l.lowerQuartile, e), l.regions.push(h), (r = this.triggerEvent(e, l, e.interior, { color: d(e.border.color) || "transparent" === e.border.color ? Un(e.interior, -.6) : e.border.color, width: e.border.width ? e.border.width : 1 })).cancel || this.renderBoxAndWhisker(e, l, h, r, this.getPathString(l, e, jn(l.xValue, l.median, t, i, n), jn(l.xValue + o.median, l.average, t, i, n)), o.median)) } e.marker.visible && e.chart.markerRender.render(e) }, t.prototype.updateTipRegion = function (e, t, i) { var n = this.getRectangle(t.xValue + i.median, t.maximum, t.xValue + i.median, t.minimum, e); this.updateTipSize(e, t, n, e.chart.requireInvertedAxis) }, t.prototype.updateTipSize = function (e, t, i, n) { var r = e.border.width || 1; n ? (i.y -= r / 2, i.height = i.height || r) : (i.x -= r / 2, i.width = i.width || r), t.regions.push(i) }, t.prototype.getPathString = function (e, t, i, n) { var r = e.regions[0], o = e.regions[1], s = "", a = (t.chart.requireInvertedAxis ? r.height : r.width, t.chart.requireInvertedAxis ? r.y + r.height / 2 : r.x + r.width / 2), l = o.x + o.width, h = o.y + o.height, d = r.x + r.width, c = r.y + r.height; return t.chart.requireInvertedAxis ? (this.updateTipSize(t, e, { x: r.x, y: o.y, width: 0, height: h - o.y }, !1), this.updateTipSize(t, e, { x: d, y: o.y, width: 0, height: h - o.y }, !0), s += "M " + r.x + " " + o.y + " L " + r.x + " " + h, s += "M " + r.x + " " + a + "  L " + o.x + " " + a, s += " M " + o.x + " " + o.y + "  L " + l + " " + o.y + " L " + l + " " + h + " L " + o.x + " " + h + " Z", s += " M " + l + " " + a + " L " + d + " " + a, s += " M " + d + " " + o.y + " L " + d + " " + h, s += " M " + i.x + " " + o.y + "  L " + i.x + " " + h, s += t.showMean ? "M " + (n.x + 5) + " " + (n.y - 5) + " L " + (n.x - 5) + " " + (n.y + 5) + "M " + (n.x - 5) + " " + (n.y - 5) + " L " + (n.x + 5) + " " + (n.y + 5) : "") : (this.updateTipSize(t, e, { x: o.x, y: r.y, width: l - o.x, height: 0 }, !0), this.updateTipSize(t, e, { x: o.x, y: c, width: l - o.x, height: 0 }, !0), s += "M " + o.x + " " + r.y + "  L " + l + " " + r.y, s += " M " + a + " " + r.y + "  L " + a + " " + o.y, s += " M " + o.x + " " + o.y + "  L " + l + " " + o.y + " L " + l + " " + h + " L " + o.x + " " + h + " Z", s += " M " + a + " " + h + " L " + a + " " + c, s += " M " + o.x + " " + c + " L " + l + " " + c, s += " M " + o.x + " " + i.y + " L " + l + " " + i.y, s += t.showMean ? " M " + (n.x - 5) + " " + (n.y - 5) + " L " + (n.x + 5) + " " + (n.y + 5) + " M " + (n.x + 5) + " " + (n.y - 5) + " L " + (n.x - 5) + " " + (n.y + 5) : ""), s }, t.prototype.renderBoxAndWhisker = function (e, t, i, n, r, o) { var s, a, l = e.chart.element.id + "_Series_" + e.index + "_Point_" + t.index, h = e.chart.renderer.drawPath(new rj(l + "_BoxPath", n.fill, n.border.width, n.border.color, e.opacity, e.dashArray, r)); h.setAttribute("aria-label", t.x.toString() + ":" + t.maximum.toString() + ":" + t.minimum.toString() + ":" + t.lowerQuartile.toString() + ":" + t.upperQuartile.toString()); var d = e.chart.renderer.createGroup({ id: l }); d.appendChild(h); for (var c = 0; c < t.outliers.length; c++)s = jn(t.xValue + o, t.outliers[c], e.xAxis, e.yAxis, e.chart.requireInvertedAxis), a = new $E(e.marker.width, e.marker.height), t.symbolLocations.push(s), this.updateTipSize(e, t, { x: s.x - a.width / 2, y: s.y - a.height / 2, width: a.width, height: a.height }, !0); e.seriesElement.appendChild(d) }, t.prototype.findBoxPlotValues = function (e, t, i) { var n = e.length, r = { average: Hi(e) / n, lowerQuartile: 0, upperQuartile: 0, maximum: 0, minimum: 0, median: 0, outliers: [] }; "Exclusive" === i ? (r.lowerQuartile = this.getExclusiveQuartileValue(e, n, .25), r.upperQuartile = this.getExclusiveQuartileValue(e, n, .75), r.median = this.getExclusiveQuartileValue(e, n, .5)) : "Inclusive" === i ? (r.lowerQuartile = this.getInclusiveQuartileValue(e, n, .25), r.upperQuartile = this.getInclusiveQuartileValue(e, n, .75), r.median = this.getInclusiveQuartileValue(e, n, .5)) : (r.median = qn(e), this.getQuartileValues(e, n, r)), this.getMinMaxOutlier(e, n, r), t.minimum = r.minimum, t.maximum = r.maximum, t.lowerQuartile = r.lowerQuartile, t.upperQuartile = r.upperQuartile, t.median = r.median, t.outliers = r.outliers, t.average = r.average }, t.prototype.getExclusiveQuartileValue = function (e, t, i) { if (0 === t) return 0; if (1 === t) return e[0]; var n = i * (t + 1), r = Math.floor(Math.abs(n)), o = n - r; return 0 === r ? e[0] : r > t - 1 ? e[t - 1] : o * (e[r] - e[r - 1]) + e[r - 1] }, t.prototype.getInclusiveQuartileValue = function (e, t, i) { if (0 === t) return 0; if (1 === t) return e[0]; var n = i * (t - 1), r = Math.floor(Math.abs(n)); return (n - r) * (e[r + 1] - e[r]) + e[r] }, t.prototype.getQuartileValues = function (e, t, i) { if (1 === t) return i.lowerQuartile = e[0], i.upperQuartile = e[0], null; var n = t % 2 == 0, r = t / 2, o = e.slice(0, r), s = e.slice(n ? r : r + 1, t); i.lowerQuartile = qn(o), i.upperQuartile = qn(s) }, t.prototype.getMinMaxOutlier = function (e, t, i) { for (var n = 1.5 * (i.upperQuartile - i.lowerQuartile), r = 0; r < t; r++) { if (!(e[r] < i.lowerQuartile - n)) { i.minimum = e[r]; break } i.outliers.push(e[r]) } for (r = t - 1; r >= 0; r--) { if (!(e[r] > i.upperQuartile + n)) { i.maximum = e[r]; break } i.outliers.push(e[r]) } }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.getModuleName = function () { return "BoxAndWhiskerSeries" }, t.prototype.destroy = function (e) { }, t }(qR), jB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), IB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return jB(t, e), t.prototype.render = function (e, t, i, n) { var r, o, s, a, l = this, h = null, d = "", c = Math.max(e.yAxis.visibleRange.min, 0), p = [], u = this.sortSegments(e, e.segments); e.points.map(function (g, m, f) { g.symbolLocations = [], g.regions = [], a = !1, g.visible && Wi(f[m - 1], g, f[m + 1], e) && (d += l.getAreaPathDirection(g.xValue, c, e, n, jn, h, "M"), h = h || new dI(g.xValue, c), r = jn(g.xValue, g.yValue, t, i, n), s && l.setPointColor(g, s, e, "X" === e.segmentAxis, u) ? (a = !0, o = jn(h.x, c, t, i, n), d += "L " + r.x + " " + r.y + " ", d += "L " + r.x + " " + o.y + " ", l.generatePathOption(p, e, s, d, "_Point_" + s.index), d = "M " + r.x + " " + o.y + " L " + r.x + " " + r.y + " ") : (d += "L " + r.x + " " + r.y + " ", l.setPointColor(g, null, e, "X" === e.segmentAxis, u)), f[m + 1] && !f[m + 1].visible && "Drop" !== e.emptyPointSettings.mode && (d += l.getAreaEmptyDirection({ x: g.xValue, y: c }, h, e, n, jn), h = null), s = g, l.storePointLocation(g, e, n, jn)) }), a || (d = e.points.length > 1 ? d + this.getAreaPathDirection(s.xValue, c, e, n, jn, null, "L") : "", this.generatePathOption(p, e, s, d, "")), this.applySegmentAxis(e, p, u), this.renderMarker(e) }, t.prototype.generatePathOption = function (e, t, i, n, r) { e.push(new rj(t.chart.element.id + "_Series_" + t.index + r, t.setPointColor(i, t.interior), t.border.width, t.border.color, t.opacity, t.dashArray, n)) }, t.prototype.destroy = function (e) { }, t.prototype.getModuleName = function () { return "MultiColoredAreaSeries" }, t.prototype.doAnimation = function (e) { this.doLinearAnimation(e, e.animation) }, t }(JR), kB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), PB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return kB(t, e), t.prototype.render = function (e, t, i, n) { for (var r = null, o = "M", s = this.enableComplexProperty(e), a = [], l = "", h = this.sortSegments(e, e.segments), d = 0, c = s; d < c.length; d++) { var p = c[d]; p.regions = [], p.visible && Wi(s[p.index - 1], p, s[p.index + 1], e) ? (l += this.getLineDirection(r, p, e, n, jn, o), null != r ? this.setPointColor(p, r, e, "X" === e.segmentAxis, h) ? (a.push(new rj(e.chart.element.id + "_Series_" + e.index + "_Point_" + r.index, "none", e.width, e.setPointColor(r, e.interior), e.opacity, e.dashArray, l)), o = "M", l = "") : o = "L" : this.setPointColor(p, null, e, "X" === e.segmentAxis, h), r = p, this.storePointLocation(p, e, n, jn)) : (r = "Drop" === e.emptyPointSettings.mode ? r : null, o = "Drop" === e.emptyPointSettings.mode ? o : "M", p.symbolLocations = []) } "" !== l && a.push(new rj(e.chart.element.id + "_Series_" + e.index, "none", e.width, e.setPointColor(s[s.length - 1], e.interior), e.opacity, e.dashArray, l)), this.applySegmentAxis(e, a, h), this.renderMarker(e) }, t.prototype.doAnimation = function (e) { this.doLinearAnimation(e, e.animation) }, t.prototype.getModuleName = function () { return "MultiColoredLineSeries" }, t.prototype.destroy = function (e) { }, t }(JR), NB = function () { function e(e) { this.xAxisPrevHeight = [], this.xAxisMultiLabelHeight = [], this.yAxisPrevHeight = [], this.yAxisMultiLabelHeight = [], this.chart = e, this.addEventListener() } return e.prototype.addEventListener = function () { this.chart.isDestroyed || this.chart.on("click", this.click, this) }, e.prototype.getMultilevelLabelsHeight = function (e) { var t, i, n, r = 0, o = [], s = [], a = "Vertical" === e.orientation, l = a ? e.rect.height : e.rect.width; e.multiLevelLabels.map(function (h, d) { h.categories.map(function (r) { "" !== r.text && null !== r.start && null !== r.end && (t = xi(r.text, h.textStyle), i = a ? t.width : t.height, i += 2 * h.border.width + ("CurlyBrace" === h.border.type ? 10 : 0), n = null !== r.maximumTextWidth ? r.maximumTextWidth : Xi("string" == typeof r.end ? Number(new Date(r.end)) : r.end, e) * l - Xi("string" == typeof r.start ? Number(new Date(r.start)) : r.start, e) * l, t.width > n - 10 && n > 0 && "Wrap" === h.overflow && !a && (i *= rr(r.text, n - 10, h.textStyle).length), o[d] = o[d] ? o[d] < i ? i : o[d] : i) }), s[d] = r, r += o[d] ? o[d] + 10 : 0 }), e.multiLevelLabelHeight = r + ("" !== e.title || this.chart.legendModule && this.chart.legendSettings.visible ? 5 : 0), a ? (this.yAxisMultiLabelHeight = o, this.yAxisPrevHeight = s) : (this.xAxisMultiLabelHeight = o, this.xAxisPrevHeight = s) }, e.prototype.renderXAxisMultiLevelLabels = function (e, t, i, n) { var r, o, s, a, l, h, c, p, u, g, m, f, y = this, v = (e.labelPosition === e.tickPosition ? e.majorTickLines.height : 0) + e.maxLabelSize.height + 10, w = "", b = "Outside" === e.labelPosition, C = e.isInversed, L = e.opposedPosition, M = e.scrollbarSettings.enable || b && d(e.crossesAt) ? e.scrollBarHeight : 0; u = L && !b || !L && b ? n.y + v - e.majorTickLines.width : n.y - v - e.multiLevelLabelHeight, this.createClipRect(n.x - e.majorTickLines.width, u + M, e.multiLevelLabelHeight + 10, n.width + 2 * e.majorTickLines.width, this.chart.element.id + "_XAxis_Clippath_" + t, this.chart.element.id + "XAxisMultiLevelLabel" + t), e.multiLevelLabels.map(function (i, d) { a = 0, y.labelElement = y.chart.renderer.createGroup({ id: y.chart.element.id + t + "_MultiLevelLabel" + d }), i.categories.map(function (u, S) { if (w = "", h = "string" == typeof u.start ? Number(new Date(u.start)) : u.start, c = "string" == typeof u.end ? Number(new Date(u.end)) : u.end, !(f = y.triggerMultiLabelRender(e, u.text, e.multiLevelLabels[d].textStyle, e.multiLevelLabels[d].alignment, u.customAttributes)).cancel) { s = Xi(h, e) * n.width, l = Xi(c, e) * n.width, l = C ? [s, s = l][0] : l, p = xi(f.text, f.textStyle), g = (null === u.maximumTextWidth ? l - s : u.maximumTextWidth) - 10, r = s + n.x + 10, o = (L && !b || !L && b ? v + n.y + p.height / 2 + 10 + y.xAxisPrevHeight[d] : n.y - v + p.height / 2 - y.xAxisMultiLabelHeight[d] - y.xAxisPrevHeight[d]) + M, "Center" === f.alignment ? (r += (l - s - 10) / 2, m = "middle") : "Far" === f.alignment ? (r = r + (l - s - 10) - i.border.width / 2, m = "end") : (m = "start", r += i.border.width / 2), o = "CurlyBrace" === i.border.type ? !L && b || L && !b ? o + 10 : o - 5 : o; var x = new nj(y.chart.element.id + t + "_Axis_MultiLevelLabel_Level_" + d + "_Text_" + S, r, o, m, f.text); "None" !== i.overflow && (x.text = "Wrap" === i.overflow ? rr(f.text, g, f.textStyle) : Qn(g, f.text, f.textStyle), x.x = x.x - 5), $n(y.chart.renderer, x, f.textStyle, f.textStyle.color || y.chart.themeStyle.axisLabel, y.labelElement, !1, y.chart.redraw, !0), i.border.width > 0 && "WithoutBorder" !== i.border.type && "" !== (w = y.renderXAxisLabelBorder(d, l - s - 10, e, s, v, p, x, n, f.alignment, w, b, L, a)) && (y.createBorderElement(d, t, e, w, a), a++), y.multiElements.appendChild(y.labelElement) } }) }), i.appendChild(this.multiElements) }, e.prototype.renderXAxisLabelBorder = function (e, t, i, n, r, o, s, a, l, h, d, c, p) { var u, g, m, f, y = 10, v = i.multiLevelLabels[e], w = v.categories[p].type, b = t + y, C = this.xAxisMultiLabelHeight[e] + y, L = "Outside" === i.labelPosition ? i.scrollBarHeight : 0, M = n + a.x, S = !c && d || c && !d ? r + a.y + this.xAxisPrevHeight[e] + L : a.y - r - this.xAxisPrevHeight[e] - L, x = w || v.border.type; switch (x) { case "WithoutTopandBottomBorder": case "Rectangle": case "WithoutTopBorder": h += "M " + M + " " + S + " L " + M + " " + (S + (C = !c && d || c && !d ? C : -C)) + " M " + (M + b) + " " + S + " L " + (M + b) + " " + (S + C), h += "WithoutTopandBottomBorder" !== x ? " L " + M + " " + (S + C) + " " : " ", h += "Rectangle" === x ? " M " + M + " " + S + " L " + (M + b) + " " + S : " "; break; case "Brace": "Near" === l ? (m = s.x, f = s.x + o.width + 2) : "Center" === l ? (m = s.x - o.width / 2 - 2, f = s.x + o.width / 2 + 2) : (m = s.x - o.width - 2, f = s.x), h += "M " + M + " " + S + " L " + M + " " + (S + (C = !c && d || c && !d ? C : -C) / 2) + " M " + M + " " + (S + C / 2) + " L " + (m - 2) + " " + (S + C / 2) + " M " + f + " " + (S + C / 2) + " L " + (M + b) + " " + (S + C / 2) + " M " + (M + b) + " " + (S + C / 2) + " L " + (M + b) + " " + S; break; case "CurlyBrace": !c && d || c && !d ? (y = 10, u = 15, g = 5) : (y = -10, u = -15, g = -5), h += "Center" === l ? "M " + M + " " + S + " C " + M + " " + S + " " + (M + 5) + " " + (S + y) + " " + (M + 10) + " " + (S + y) + " L " + (M + b / 2 - 5) + " " + (S + y) + " L " + (M + b / 2) + " " + (S + u) + " L " + (M + b / 2 + 5) + " " + (S + y) + " L " + (M + b - 10) + " " + (S + y) + " C " + (M + b - 10) + " " + (S + y) + " " + (M + b) + " " + (S + g) + " " + (M + b) + " " + S : "Near" === l ? "M " + M + " " + S + " C " + M + " " + S + " " + (M + 5) + " " + (S + y) + " " + (M + 10) + " " + (S + y) + " L " + (M + 15) + " " + (S + u) + " L " + (M + 20) + " " + (S + y) + " L " + (M + b - 10) + " " + (S + y) + " C " + (M + b - 10) + " " + (S + y) + " " + (M + b) + " " + (S + g) + " " + (M + b) + " " + S : "M " + M + " " + S + " C " + M + " " + S + " " + (M + 5) + " " + (S + y) + " " + (M + 10) + " " + (S + y) + " L " + (M + b - 20) + " " + (S + y) + " L " + (M + b - 15) + " " + (S + u) + " L " + (M + b - 10) + " " + (S + y) + " L " + (M + b - 10) + " " + (S + y) + " C " + (M + b - 10) + " " + (S + y) + " " + (M + b) + " " + (S + g) + " " + (M + b) + " " + S }return h }, e.prototype.renderYAxisMultiLevelLabels = function (e, t, i, n) { var r, o, s, a, l, h, c, p, u, g, m, f = this, y = "Outside" === e.labelPosition, v = (e.tickPosition === e.labelPosition ? e.majorTickLines.height : 0) + e.maxLabelSize.width + 10, w = "", b = e.isInversed, C = e.opposedPosition, L = y && d(e.crossesAt) ? e.scrollBarHeight : 0; L *= C ? 1 : -1, o = C && !y || !C && y ? n.x - e.multiLevelLabelHeight - v - 10 : n.x + v, this.createClipRect(o + L, n.y - e.majorTickLines.width, n.height + 2 * e.majorTickLines.width, e.multiLevelLabelHeight + 10, this.chart.element.id + "_YAxis_Clippath_" + t, this.chart.element.id + "YAxisMultiLevelLabel" + t), e.multiLevelLabels.map(function (i, o) { f.labelElement = f.chart.renderer.createGroup({ id: f.chart.element.id + t + "_MultiLevelLabel" + o }), p = 0, i.categories.map(function (d, M) { if (w = "", g = "string" == typeof d.end ? Number(new Date(d.end)) : d.end, u = "string" == typeof d.start ? Number(new Date(d.start)) : d.start, l = Xi(u, e) * n.height, h = Xi(g, e) * n.height, h = b ? [l, l = h][0] : h, !(c = f.triggerMultiLabelRender(e, d.text, i.textStyle, i.alignment, d.customAttributes)).cancel) { r = xi(c.text, c.textStyle), m = h - l, s = n.x - v - f.yAxisPrevHeight[o] - f.yAxisMultiLabelHeight[o] / 2 - 5, a = n.height + n.y - l - m / 2, s = C ? y ? n.x + v + 5 + f.yAxisMultiLabelHeight[o] / 2 + f.yAxisPrevHeight[o] + L : n.x - v - f.yAxisMultiLabelHeight[o] / 2 - f.yAxisPrevHeight[o] - 5 : y ? s + L : n.x + v + 5 + f.yAxisMultiLabelHeight[o] / 2 + f.yAxisPrevHeight[o], "Center" === c.alignment ? a += r.height / 4 : "Far" === c.alignment ? a += m / 2 - r.height / 2 : a = a - m / 2 + r.height, s = "CurlyBrace" === i.border.type ? !C && y || C && !y ? s - 10 : s + 10 : s; var S = new nj(f.chart.element.id + t + "_Axis_MultiLevelLabel_Level_" + o + "_Text_" + M, s, a, "middle", c.text); S.text = "Trim" === i.overflow ? Qn(null === d.maximumTextWidth ? f.yAxisMultiLabelHeight[o] : d.maximumTextWidth, c.text, c.textStyle) : S.text, $n(f.chart.renderer, S, c.textStyle, c.textStyle.color || f.chart.themeStyle.axisLabel, f.labelElement, f.chart.redraw, !0), i.border.width > 0 && "WithoutBorder" !== i.border.type && "" !== (w = f.renderYAxisLabelBorder(o, m, e, h, v, l, r, S, n, c.alignment, w, y, C, p)) && (f.createBorderElement(o, t, e, w, p), p++), f.multiElements.appendChild(f.labelElement) } }) }), i.appendChild(this.multiElements) }, e.prototype.renderYAxisLabelBorder = function (e, t, i, n, r, o, s, a, l, h, c, p, u, g) { var m, f, y = n - o, v = 10, w = i.multiLevelLabels[e], b = w.categories[g].type, C = l.y + l.height - n, L = p && d(i.crossesAt) ? i.scrollBarHeight : 0; L *= u ? 1 : -1; var M = this.yAxisMultiLabelHeight[e] + v, S = (!u && p || u && !p ? l.x - r - this.yAxisPrevHeight[e] : l.x + r + this.yAxisPrevHeight[e]) + L, x = b || w.border.type; switch (x) { case "WithoutTopandBottomBorder": case "Rectangle": case "WithoutTopBorder": c += "M " + S + " " + C + " L " + (S + (M = !u && p || u && !p ? -M : M)) + " " + C + " M " + S + " " + (C + y) + " L " + (S + M) + " " + (C + y), c += "WithoutTopandBottomBorder" !== x ? " L " + (S + M) + " " + C + " " : " ", c += "Rectangle" === x ? "M " + S + " " + (C + y) + "L " + S + " " + C + " " : " "; break; case "Brace": c += "M " + S + " " + C + " L " + (S - (M = !u && p || u && !p ? M : -M) / 2) + " " + C + " L " + (S - M / 2) + " " + (a.y - s.height / 2 - 4) + " M " + (S - M / 2) + " " + (a.y + s.height / 4 + 2) + " L " + (S - M / 2) + " " + (C + y) + " L " + S + " " + (C + y); break; case "CurlyBrace": !u && p || u && !p ? (v = -10, m = -15, f = -5) : (v = 10, m = 15, f = 5), c += "Center" === h ? "M " + S + " " + C + " C " + S + " " + C + " " + (S + v) + " " + C + " " + (S + v) + " " + (C + 10) + " L " + (S + v) + " " + (C + (y - 10) / 2) + " L " + (S + m) + " " + (C + (y - 10) / 2 + 5) + " L " + (S + v) + " " + (C + (y - 10) / 2 + 10) + " L " + (S + v) + " " + (C + (y - 10)) + " C " + (S + v) + " " + (C + (y - 10)) + " " + (S + f) + " " + (C + y) + " " + S + " " + (C + y) : "Far" === h ? "M " + S + " " + C + " C " + S + " " + C + " " + (S + v) + " " + C + " " + (S + v) + " " + (C + 10) + " L " + (S + v) + " " + (C + y - 20) + "  L " + (S + m) + " " + (C + (y - 15)) + " L " + (S + v) + " " + (C + (y - 10)) + " L " + (S + v) + " " + (C + (y - 10)) + " C " + (S + v) + " " + (C + (y - 10)) + " " + (S + v) + " " + (C + y) + " " + S + " " + (C + y) : "M " + S + " " + C + " C " + S + " " + C + " " + (S + v) + " " + C + " " + (S + v) + " " + (C + 10) + " L " + (S + m) + " " + (C + 15) + " L " + (S + v) + " " + (C + 20) + " L " + (S + v) + " " + (C + (y - 10)) + " C " + (S + v) + " " + (C + (y - 10)) + " " + (S + f) + " " + (C + y) + " " + S + " " + (C + y) }return c }, e.prototype.createClipRect = function (e, t, i, n, r, o) { this.multiElements = this.chart.renderer.createGroup({ id: o, "clip-path": "url(#" + r + ")" }), this.multiElements.appendChild(mn(this.chart.redraw, { id: r, x: e, y: t, width: n, height: i, fill: "white", "stroke-width": 1, stroke: "Gray" }, this.chart.renderer)) }, e.prototype.createBorderElement = function (e, t, i, n, r) { var o = n, s = this.chart.renderer.drawPath(new rj(this.chart.element.id + t + "_Axis_MultiLevelLabel_Rect_" + e + "_" + r, "Transparent", i.multiLevelLabels[e].border.width, i.multiLevelLabels[e].border.color || this.chart.themeStyle.axisLine, 1, "", n)); s.setAttribute("style", "pointer-events: none"), kn(this.chart.enableCanvas, this.labelElement, s, this.chart.redraw, !0, "x", "y", null, o) }, e.prototype.triggerMultiLabelRender = function (e, t, i, n, r) { var o; return o = { cancel: !1, name: Cj, axis: e, text: t, textStyle: i, alignment: n, customAttributes: r }, this.chart.trigger(Cj, o), o }, e.prototype.MultiLevelLabelClick = function (e, t) { var i, n = parseInt(e.substr(0, 1), 10), r = parseInt(e.substr(7), 10), o = this.chart.axisCollections[t], s = o.multiLevelLabels[n].categories, a = s[r].text, l = s[r].start, h = s[r].end; return i = { axis: o, level: n, text: a, customAttributes: s[r].customAttributes, start: l, end: h, name: Nj, cancel: !1 }, this.chart.trigger(Nj, i), i }, e.prototype.click = function (e) { var t, i, n, r = e.target.id, o = "_Axis_MultiLevelLabel_Level_"; r.indexOf(o) > -1 && (t = r.split(o)[1], i = r.split(o)[0], n = parseInt(i.charAt(i.length - 1), 10), this.MultiLevelLabelClick(t, n)) }, e.prototype.getModuleName = function () { return "MultiLevelLabel" }, e.prototype.destroy = function () { }, e }(), OB = function () { function e(e) { this.chartId = e.element.id + "_" } return e.prototype.renderElements = function (e, t) { var i = t.createGroup({ id: this.chartId + "scrollBar_" + e.axis.name, transform: "translate(" + (e.isVertical && e.axis.isInversed ? e.height : e.axis.isInversed ? e.width : "0") + "," + (e.isVertical && e.axis.isInversed ? "0" : e.axis.isInversed ? e.height : e.isVertical ? e.width : "0") + ") rotate(" + (e.isVertical && e.axis.isInversed ? "90" : e.isVertical ? "270" : e.axis.isInversed ? "180" : "0") + ")" }), n = t.createGroup({ id: this.chartId + "scrollBar_backRect_" + e.axis.name }), r = t.createGroup({ id: this.chartId + "scrollBar_thumb_" + e.axis.name, transform: "translate(0,0)" }); return this.backRect(e, t, n), this.thumb(e, t, r), this.renderCircle(e, t, r), this.arrows(e, t, r), this.thumbGrip(e, t, r), i.appendChild(n), i.appendChild(r), i }, e.prototype.backRect = function (e, t, i) { var n = e.scrollbarThemeStyle, r = t.drawRectangle(new aI(this.chartId + "scrollBarBackRect_" + e.axis.name, n.backRect, { width: 1, color: n.backRect }, 1, new ej(0, 0, e.width, e.height), 0, 0)); i.appendChild(r) }, e.prototype.arrows = function (e, t, i) { var n = e.scrollbarThemeStyle, r = new rj(this.chartId + "scrollBar_leftArrow_" + e.axis.name, n.arrow, 1, n.arrow, 1, "", ""); this.leftArrowEle = t.drawPath(r), r.id = this.chartId + "scrollBar_rightArrow_" + e.axis.name, this.rightArrowEle = t.drawPath(r), this.setArrowDirection(this.thumbRectX, this.thumbRectWidth, e.height), i.appendChild(this.leftArrowEle), i.appendChild(this.rightArrowEle) }, e.prototype.setArrowDirection = function (e, t, i) { var n = "M " + (e - 4 + 1) + " " + i / 2 + " L " + (e - 4 + 6) + " 11 L " + (e - 4 + 6) + " 5 Z", r = "M " + (e + t + 4 - .5) + " " + i / 2 + " L " + (e + t + 4 - 6) + " 11.5 L " + (e + t + 4 - 6) + " 4.5 Z"; this.leftArrowEle.setAttribute("d", n), this.rightArrowEle.setAttribute("d", r) }, e.prototype.thumb = function (e, t, i) { e.startX = this.thumbRectX; var n = e.scrollbarThemeStyle; this.slider = t.drawRectangle(new aI(this.chartId + "scrollBarThumb_" + e.axis.name, n.thumb, { width: 1, color: "" }, 1, new ej(this.thumbRectX, 0, this.thumbRectWidth, e.height))), i.appendChild(this.slider) }, e.prototype.renderCircle = function (e, t, i) { var n = e.scrollbarThemeStyle, r = new lI(this.chartId + "scrollBar_leftCircle_" + e.axis.name, n.circle, { width: 1, color: n.circle }, 1, this.thumbRectX, e.height / 2, 8), o = t.createDefs(); o.innerHTML = '<filter x="-25.0%" y="-20.0%" width="150.0%" height="150.0%" filterUnits="objectBoundingBox"id="scrollbar_shadow"><feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.16 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix></filter>'; var s = t.createGroup({ id: this.chartId + e.axis.name + "_thumb_shadow" }); s.innerHTML = '<use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#' + this.chartId + "scrollBar_leftCircle_" + e.axis.name + '"></use><use fill="black" fill-opacity="1" filter="url(#scrollbar_shadow)" xlink:href="#' + this.chartId + "scrollBar_rightCircle_" + e.axis.name + '"></use>', this.leftCircleEle = t.drawCircle(r), r.id = this.chartId + "scrollBar_rightCircle_" + e.axis.name, r.cx = this.thumbRectX + this.thumbRectWidth, this.rightCircleEle = t.drawCircle(r), i.appendChild(o), i.appendChild(this.leftCircleEle), i.appendChild(this.rightCircleEle), i.appendChild(s) }, e.prototype.thumbGrip = function (e, t, i) { var n = 0, r = 0, o = e.scrollbarThemeStyle, s = new lI(this.chartId + "scrollBar_gripCircle0_" + e.axis.name, o.grip, { width: 1, color: o.grip }, 1, 0, 0, 1); this.gripCircle = t.createGroup({ id: this.chartId + "scrollBar_gripCircle_" + e.axis.name, transform: "translate(" + (this.thumbRectX + this.thumbRectWidth / 2 + 5 * (e.isVertical ? 1 : -1)) + "," + (e.isVertical ? "10" : "5") + ") rotate(" + (e.isVertical ? "180" : "0") + ")" }); for (var a = 1; a <= 6; a++)s.id = this.chartId + "scrollBar_gripCircle" + a + "_" + e.axis.name, s.cx = n, s.cy = r, this.gripCircle.appendChild(t.drawCircle(s)), n = 3 === a ? 0 : n + 5, r = a >= 3 ? 5 : 0; i.appendChild(this.gripCircle) }, e }(), RB = function () { function e(e, t) { this.scrollRange = { max: null, min: null, interval: null, delta: null }, this.component = e, this.elements = [], this.scrollElements = new OB(e), this.axis = t, this.mouseMoveListener = this.scrollMouseMove.bind(this), this.mouseUpListener = this.scrollMouseUp.bind(this), this.animateDuration = 500, this.isPointer = uw.isPointer, this.browserName = uw.info.name } return e.prototype.getMouseXY = function (e) { var t, i, n; e.type.indexOf("touch") > -1 ? (t = (n = e).changedTouches[0].clientX, i = n.changedTouches[0].clientY) : (t = e.clientX, i = e.clientY); var r = Sn(this.component.element.id + "_scrollBar_svg" + this.axis.name).getBoundingClientRect(); this.mouseX = t - Math.max(r.left, 0), this.mouseY = i - Math.max(r.top, 0) }, e.prototype.wireEvents = function (e) { Kv.add(e, uw.touchStartEvent, this.scrollMouseDown, this), Kv.add(e, uw.touchMoveEvent, this.scrollMouseMove, this), Kv.add(e, uw.touchEndEvent, this.scrollMouseUp, this), Kv.add(e, "mousewheel", this.scrollMouseWheel, this), window.addEventListener("mousemove", this.mouseMoveListener, !1), window.addEventListener("mouseup", this.mouseUpListener, !1) }, e.prototype.unWireEvents = function (e) { Kv.remove(e, uw.touchStartEvent, this.scrollMouseDown), Kv.remove(e, uw.touchMoveEvent, this.scrollMouseMove), Kv.remove(e, uw.touchEndEvent, this.scrollMouseUp), Kv.remove(e, "mousewheel", this.scrollMouseWheel), window.removeEventListener("mousemove", this.mouseMoveListener, !1), window.removeEventListener("mouseup", this.mouseUpListener, !1) }, e.prototype.scrollMouseDown = function (e) { var t = e.target.id, i = this.scrollElements; if (this.getMouseXY(e), this.isResizeLeft = this.isExist(t, "_leftCircle_") || this.isExist(t, "_leftArrow_"), this.isResizeRight = this.isExist(t, "_rightCircle_") || this.isExist(t, "_rightArrow_"), this.previousXY = this.isVertical && this.axis.isInversed ? this.mouseY : this.isVertical ? this.width - this.mouseY : this.axis.isInversed ? this.width - this.mouseX : this.mouseX, this.previousWidth = i.thumbRectWidth, this.previousRectX = i.thumbRectX, this.startZoomPosition = this.axis.zoomPosition, this.startZoomFactor = this.axis.zoomFactor, this.startRange = this.axis.visibleRange, this.scrollStarted = !0, this.component.trigger("scrollStart", this.getArgs("scrollStart")), this.isExist(t, "scrollBarThumb_")) this.isThumbDrag = !0, this.svgObject.style.cursor = "-webkit-grabbing"; else if (this.isExist(t, "scrollBarBackRect_")) { var n = this.moveLength(this.previousXY, this.previousRectX); if (i.thumbRectX = this.isWithIn(n) ? n : i.thumbRectX, this.positionThumb(i.thumbRectX, i.thumbRectWidth), this.setZoomFactorPosition(i.thumbRectX, i.thumbRectWidth), this.isLazyLoad) { var r = i.thumbRectX > this.previousRectX ? "RightMove" : "LeftMove", o = this.calculateLazyRange(i.thumbRectX, i.thumbRectWidth, r); o && this.component.trigger(Ij, o) } } "" === this.component.element.style.height && (this.isCustomHeight = !0, this.component.element.style.height = this.component.availableSize.height + "px") }, e.prototype.isExist = function (e, t) { return e.indexOf(t) > -1 }, e.prototype.isWithIn = function (e) { return e - 8 >= 0 && e + this.scrollElements.thumbRectWidth + 8 <= this.width }, e.prototype.moveLength = function (e, t, i) { void 0 === i && (i = 8); var n = .1 * (this.width - 2 * i); return n = e < t ? t - (t - n > i ? n : i) : t + (t + this.scrollElements.thumbRectWidth + n < this.width - i ? n : i) }, e.prototype.setZoomFactorPosition = function (e, t) { var i = this.axis; this.isScrollUI = !0; var n = e + t + 8 + 1; this.zoomPosition = (e - (e - 8.5 <= 0 ? 8.5 : 0)) / (this.isVertical ? i.rect.height : this.width), this.zoomFactor = (t + (n >= this.width ? 9 : 0)) / (this.isVertical ? i.rect.height : this.width), i.zoomPosition = this.zoomPosition, i.zoomFactor = this.zoomFactor }, e.prototype.scrollMouseMove = function (e) { var t = e.target, i = this.scrollElements; this.getMouseXY(e), this.setCursor(t), this.setTheme(t); var n = this.isVertical && this.axis.isInversed ? this.width - this.mouseY : this.isVertical ? this.mouseY : this.mouseX, r = this.axis.visibleRange, o = this.zoomPosition, s = this.zoomFactor; if (this.isThumbDrag) { this.component.isScrolling = this.isThumbDrag, n = this.isVertical || this.axis.isInversed ? this.width - n : n; var a = i.thumbRectX + (n - this.previousXY); n >= a + i.thumbRectWidth ? this.setCursor(t) : this.svgObject.style.cursor = "-webkit-grabbing", n >= 0 && n <= a + i.thumbRectWidth && (i.thumbRectX = this.isWithIn(a) ? a : i.thumbRectX, this.positionThumb(i.thumbRectX, i.thumbRectWidth), this.previousXY = n, this.setZoomFactorPosition(a, i.thumbRectWidth)), this.component.trigger(kj, this.getArgs(kj, r, o, s)) } else (this.isResizeLeft || this.isResizeRight) && (this.resizeThumb(e), this.component.trigger(kj, this.getArgs(kj, r, o, s))) }, e.prototype.scrollMouseWheel = function (e) { var t = Sn(this.component.element.id + "_scrollBar_svg" + this.axis.name).getBoundingClientRect(); this.mouseX = e.clientX - Math.max(t.left, 0), this.mouseY = e.clientY - Math.max(t.top, 0); var i, n = .5, r = this.scrollElements, o = this.axis, s = "mozilla" !== this.browserName || this.isPointer ? e.wheelDelta / 120 > 0 ? 1 : -1 : -e.detail / 3 > 0 ? 1 : -1; i = Math.max(Math.max(1 / Mn(o.zoomFactor, 0, 1), 1) + .25 * s, 1); var a, l = this.axis.visibleRange, h = this.zoomPosition, d = this.zoomFactor; i >= 1 && (n = (n = "Horizontal" === o.orientation ? this.mouseX / o.rect.width : 1 - this.mouseY / o.rect.height) > 1 ? 1 : n < 0 ? 0 : n, this.zoomFactor = 1 === i ? 1 : Mn(1 / i, 0, 1), this.zoomPosition = 1 === i ? 0 : o.zoomPosition + (o.zoomFactor - this.zoomFactor) * n), r.thumbRectX = this.isWithIn(this.zoomPosition * this.width) ? this.zoomPosition * this.width : r.thumbRectX, this.isScrollUI = !0, this.positionThumb(r.thumbRectX, r.thumbRectWidth), this.isLazyLoad && this.setZoomFactorPosition(r.thumbRectX, r.thumbRectWidth), o.zoomFactor = this.zoomFactor, o.zoomPosition = this.zoomPosition, this.isLazyLoad && (a = this.calculateMouseWheelRange(r.thumbRectX, r.thumbRectWidth)) && a.currentRange.minimum !== a.previousAxisRange.minimum && a.currentRange.maximum !== a.previousAxisRange.maximum && (this.component.trigger(Ij, a), this.isScrollEnd = !1), this.isLazyLoad || this.component.trigger(kj, this.getArgs(kj, l, h, d)) }, e.prototype.scrollMouseUp = function (e) { var t; this.startX = this.scrollElements.thumbRectX; var i = this.startX + this.scrollElements.thumbRectWidth + 8 + 1; if (!this.isResizeLeft && !this.isResizeRight || this.isLazyLoad || (this.axis.zoomFactor = i >= this.width - 1 && this.startX - 8.5 <= 0 ? 1 : this.zoomFactor), this.isLazyLoad) { var n = this.previousRectX - this.startX; if ((n > 0 || n < 0) && this.isThumbDrag) { var r = n < 0 ? "RightMove" : "LeftMove"; this.startX = "RightMove" === r ? this.startX + Math.abs(n) < this.width - 8 ? this.startX : this.width - 8 - this.scrollElements.thumbRectWidth : this.startX + this.scrollElements.thumbRectWidth - Math.abs(n) > 8 ? this.startX : 8, (t = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth, r)) && (this.component.trigger(Ij, t), this.scrollStarted = !1) } (this.isResizeLeft || this.isResizeRight) && (t = this.calculateLazyRange(this.startX, this.scrollElements.thumbRectWidth)) && (this.component.trigger(Ij, t), this.scrollStarted = !1) } this.isThumbDrag = !1, this.isResizeLeft = !1, this.isResizeRight = !1, this.isScrollEnd = !1, this.component.isScrolling = !1, this.scrollStarted && !this.isLazyLoad && (this.component.trigger(Ij, this.getArgs(kj, this.startRange, this.startZoomPosition, this.startZoomFactor)), this.scrollStarted = !1), this.isCustomHeight && (this.component.element.style.height = null) }, e.prototype.calculateMouseWheelRange = function (e, t) { var i, n, r, o, s, a = this.scrollRange, l = this.getStartEnd(this.previousStart, this.previousEnd, !1); return e + t + 8 <= this.width && (n = (e - 8) / this.width, i = t / this.width), r = a.min + n * a.delta, (o = r + i * a.delta) && (s = { axis: this.axis, currentRange: this.getStartEnd(r, o, !0), previousAxisRange: l }), s }, e.prototype.calculateLazyRange = function (e, t, i) { var n, r, o, s, a, l = t, h = this.scrollRange, d = this.getStartEnd(this.previousStart, this.previousEnd, !1); return this.isResizeRight || "RightMove" === i ? (n = (l = this.isResizeRight ? l + 16 : l) / this.width, r = "RightMove" === i ? (e + 8) / this.width : this.axis.zoomPosition, s = (o = "RightMove" === i ? h.min + r * h.delta : this.previousStart) + n * h.delta) : this.isResizeLeft || "LeftMove" === i ? (r = (e - 8) / this.width, n = l / this.width, o = (o = h.min + r * h.delta) >= h.min ? o : h.min, s = "LeftMove" === i ? o + n * h.delta : this.previousEnd) : this.isThumbDrag && (r = "RightMove" === i ? (e + 8) / this.width : (e - 8) / this.width, n = this.scrollElements.thumbRectWidth / this.width, s = (o = (o = h.min + r * h.delta) >= h.min ? o : h.min) + n * h.delta), s && (a = { axis: this.component.isBlazor ? {} : this.axis, currentRange: this.getStartEnd(o, s, !0), previousAxisRange: d }), a }, e.prototype.getStartEnd = function (e, t, i) { var n = this.valueType; switch ("DateTime" !== n && "DateTimeCategory" !== n || !i ? i && (this.previousStart = Math.ceil(e), this.previousEnd = Math.ceil(t)) : (this.previousStart = e, this.previousEnd = t), n) { case "Double": case "Category": case "Logarithmic": e = Math.ceil(e), t = Math.ceil(t); break; case "DateTime": case "DateTimeCategory": e = new Date(e), t = new Date(t) }return { minimum: e, maximum: t } }, e.prototype.render = function (e) { return (this.component.zoomModule || e && this.axis.scrollbarSettings.enable) && this.getDefaults(), this.getTheme(), this.removeScrollSvg(), function (e, t) { var i = e.axis.rect, n = "Horizontal" === e.axis.orientation; e.svgObject = t.createSvg({ id: e.component.element.id + "_scrollBar_svg" + e.axis.name, width: e.isVertical ? e.height : e.width, height: e.isVertical ? e.width : e.height, style: "position: absolute;top: " + ((e.axis.opposedPosition && n ? -16 : 0) + i.y) + "px;left: " + ((e.axis.opposedPosition && !n ? 16 : 0) + i.x - (e.isVertical ? e.height : 0)) + "px;cursor:auto;" }), e.elements.push(e.svgObject) }(this, this.component.svgRenderer), this.wireEvents(this.svgObject), this.svgObject.appendChild(this.scrollElements.renderElements(this, this.component.svgRenderer)), this.svgObject }, e.prototype.getTheme = function () { this.scrollbarThemeStyle = Mi(this.component.theme) }, e.prototype.removeScrollSvg = function () { document.getElementById(this.component.element.id + "_scrollBar_svg" + this.axis.name) && k(document.getElementById(this.component.element.id + "_scrollBar_svg" + this.axis.name)) }, e.prototype.setCursor = function (e) { var t = e.id; this.svgObject.style.cursor = t.indexOf("scrollBarThumb_") > -1 || t.indexOf("_gripCircle") > -1 ? "-webkit-grab" : t.indexOf("Circle_") > -1 || t.indexOf("Arrow_") > -1 ? this.isVertical ? "ns-resize" : "ew-resize" : "auto" }, e.prototype.setTheme = function (e) { var t = e.id, i = t.indexOf("_leftCircle_") > -1 || t.indexOf("_leftArrow_") > -1, n = t.indexOf("_rightCircle_") > -1 || t.indexOf("_rightArrow_") > -1, r = this.scrollbarThemeStyle, o = this.scrollElements.leftArrowEle, s = this.scrollElements.rightArrowEle, a = this.scrollElements.leftCircleEle, l = this.scrollElements.rightCircleEle, h = this.isCurrentAxis(e, o); a.style.fill = i && h ? r.circleHover : r.circle, l.style.fill = n && h ? r.circleHover : r.circle, a.style.stroke = i && h ? r.circleHover : r.circle, l.style.stroke = n && h ? r.circleHover : r.circle, "HighContrastLight" === this.component.theme && (o.style.fill = i && h ? r.arrowHover : r.arrow, o.style.stroke = i && h ? r.arrowHover : r.arrow, s.style.fill = n && h ? r.arrowHover : r.arrow, s.style.stroke = n && h ? r.arrowHover : r.arrow, a.style.stroke = i && h ? r.circleHover : r.circle, l.style.stroke = n && h ? r.circleHover : r.circle) }, e.prototype.isCurrentAxis = function (e, t) { return e.id.split("_")[2] === t.id.split("_")[2] }, e.prototype.resizeThumb = function (e) { var t, i = this.previousRectX, n = this.isVertical && this.axis.isInversed ? this.mouseY : this.isVertical ? this.width - this.mouseY : this.axis.isInversed ? this.width - this.mouseX : this.mouseX, r = Math.abs(this.previousXY - n); if (this.isResizeLeft && n >= 0) { var o = i + (n > this.previousXY ? r : -r); t = o - 8 >= 0 ? this.previousWidth + (n > this.previousXY ? -r : r) : this.previousWidth, o = o - 8 >= 0 ? o : i, t >= 40 && n < o + t && (this.scrollElements.thumbRectX = this.previousRectX = o, this.scrollElements.thumbRectWidth = this.previousWidth = t, this.previousXY = n, this.positionThumb(o, t), this.setZoomFactorPosition(o, t)) } else this.isResizeRight && (t = n >= 40 + this.scrollElements.thumbRectX && n <= this.width - 8 ? n - this.scrollElements.thumbRectX : this.previousWidth, this.scrollElements.thumbRectWidth = this.previousWidth = t, this.previousXY = n, this.positionThumb(this.startX, t), this.setZoomFactorPosition(this.startX, t), this.isLazyLoad || this.setZoomFactorPosition(this.startX, t)) }, e.prototype.positionThumb = function (e, t) { var i = this.scrollElements; i.slider.setAttribute("x", e.toString()), i.slider.setAttribute("width", t.toString()), i.leftCircleEle.setAttribute("cx", e.toString()), i.rightCircleEle.setAttribute("cx", (e + t).toString()), i.setArrowDirection(e, t, this.height), i.gripCircle.setAttribute("transform", "translate(" + (e + t / 2 + 5 * (this.isVertical ? 1 : -1)) + "," + (this.isVertical ? "10" : "5") + ") rotate(" + (this.isVertical ? "180" : "0") + ")") }, e.prototype.getDefaults = function () { var e = this.axis; this.axis.scrollbarSettings.enable && (this.isLazyLoad = !0, this.getLazyDefaults(e)); this.isVertical = "Vertical" === e.orientation; e.scrollbarSettings.range; this.zoomFactor = this.isLazyLoad ? this.zoomFactor : e.zoomFactor, this.zoomPosition = this.isLazyLoad ? this.zoomPosition : e.zoomPosition; var t = this.zoomFactor * (this.isVertical ? e.rect.height : e.rect.width); t = t > 40 ? t : 40, this.scrollX = e.rect.x, this.scrollY = e.rect.y, this.width = this.isVertical ? e.rect.height : e.rect.width, this.height = 16; var i = this.zoomPosition * (this.isVertical ? e.rect.height : this.width), n = this.width - 40 - 8; this.scrollElements.thumbRectX = i > n ? n : i < 8 ? 8 : i, this.scrollElements.thumbRectWidth = t + this.scrollElements.thumbRectX < this.width - 16 ? t : this.width - this.scrollElements.thumbRectX - 8 }, e.prototype.getLazyDefaults = function (e) { var t, i, n = e.valueType, r = e.scrollbarSettings; this.valueType = n = r.range.minimum && r.range.maximum || !r.pointsLength ? n : "Double"; var o, s, a = e.scrollbarSettings.range, l = e.visibleRange, h = e.scrollbarSettings.pointsLength, d = { skeleton: "full", type: "dateTime" }, c = this.component.intl.getDateParser(d), p = this.component.intl.getDateFormat(d); switch (n) { case "Double": case "Category": case "Logarithmic": t = a.minimum ? a.minimum : h ? 0 : l.min, i = a.maximum ? a.maximum : h ? h - 1 : l.max; break; case "DateTime": case "DateTimeCategory": t = a.minimum ? Date.parse(c(p(a.minimum))) : l.min, i = a.maximum ? Date.parse(c(p(a.maximum))) : l.max }t = Math.min(t, l.min), i = Math.max(i, l.max), o = (l.max - l.min) / (i - t), s = (l.min - t) / (i - t), this.zoomFactor = a.minimum || a.maximum ? o : this.axis.maxPointLength / e.scrollbarSettings.pointsLength, this.zoomPosition = a.minimum || a.maximum ? s : e.zoomPosition, this.scrollRange.min = t, this.scrollRange.max = i, this.scrollRange.delta = i - t, this.previousStart = l.min, this.previousEnd = l.max }, e.prototype.getLogRange = function (e) { var t = e.scrollbarSettings.range, i = Ri(t.minimum, e.logBase); i = isFinite(i) ? i : t.minimum; var n = Ri(t.maximum, e.logBase); return n = isFinite(i) ? n : t.maximum, { minimum: Math.floor(i / 1), maximum: Math.ceil(n / 1) } }, e.prototype.injectTo = function (t, i) { t.zoomingScrollBar = new e(i, t) }, e.prototype.destroy = function () { var e = this; this.axes ? this.axes.map(function (e) { e.zoomingScrollBar.destroy() }) : (this.elements.map(function (t) { e.unWireEvents(t), k(t.firstChild) }), this.elements = []) }, e.prototype.getModuleName = function () { return "ScrollBar" }, e.prototype.getArgs = function (e, t, i, n) { return { axis: this.component.isBlazor ? {} : this.axis, name: e, range: this.axis.visibleRange, zoomFactor: this.axis.zoomFactor, zoomPosition: this.axis.zoomPosition, previousRange: t, previousZoomFactor: n, previousZoomPosition: i } }, e }(), zB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BB = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.paretoAxes = [], t } return zB(t, e), t.prototype.initSeries = function (e, t) { var i = new AI(t, "series", e.properties, !0); i.name = "Pareto", i.yAxisName = e.yAxisName + "_CumulativeAxis", i.category = "Pareto", e.category = "Pareto", i.type = "Line", i.interior = t.themeStyle.errorBar, t.visibleSeries.push(i), this.initAxis(e, i, t) }, t.prototype.initAxis = function (e, t, i) { if (!this.paretoAxes.some(function (e) { return e.name === t.yAxisName })) { var n = e.yAxisName ? i.axes.filter(function (t) { return t.name === e.yAxisName })[0] : i.primaryYAxis, r = new eI(i, "axis", { name: t.yAxisName, majorGridLines: { width: 0 }, majorTickLines: n.majorTickLines, lineStyle: n.lineStyle, minimum: 0, maximum: 100, rowIndex: n.rowIndex, opposedPosition: !0, labelFormat: "{value}%" }); this.paretoAxes.push(r) } }, t.prototype.render = function (e) { e.chart.columnSeriesModule.render(e) }, t.prototype.performCumulativeCalculation = function (e, t) { for (var i = e, n = 0, r = 0, o = i.length, s = 0; s < o; s++)n += i[s][t.yName]; for (s = 0; s < o; s++)r += i[s][t.yName], i[s][t.yName] = Math.round(r / n * 100); return i }, t.prototype.doAnimation = function (e) { this.animate(e) }, t.prototype.getModuleName = function () { return "ParetoSeries" }, t.prototype.destroy = function (e) { }, t }(qR), FB = function () { function e(e) { this.chart = e } return e.prototype.export = function (e, t, i, n, r, o, s) { var a = new TR(this.chart); n = n || [this.chart], a.export(e, t, i, n, r, o, s) }, e.prototype.getModuleName = function () { return "Export" }, e.prototype.destroy = function (e) { }, e }(), VB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), WB = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, HB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return VB(t, e), WB([Y(null)], t.prototype, "content", void 0), WB([Y("0")], t.prototype, "x", void 0), WB([Y("0")], t.prototype, "y", void 0), WB([Y("Pixel")], t.prototype, "coordinateUnits", void 0), WB([Y("Chart")], t.prototype, "region", void 0), WB([Y("Middle")], t.prototype, "verticalAlignment", void 0), WB([Y("Center")], t.prototype, "horizontalAlignment", void 0), WB([Y(null)], t.prototype, "description", void 0), t }(ww), _B = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return VB(t, e), WB([Y(!1)], t.prototype, "visible", void 0), WB([Y(null)], t.prototype, "name", void 0), WB([Y("transparent")], t.prototype, "fill", void 0), WB([Y("Inside")], t.prototype, "position", void 0), WB([Y(5)], t.prototype, "rx", void 0), WB([Y(5)], t.prototype, "ry", void 0), WB([U({ width: null, color: null }, BE)], t.prototype, "border", void 0), WB([U({ size: "11px", color: "", fontStyle: "Normal", fontWeight: "Normal", fontFamily: "Segoe UI" }, zE)], t.prototype, "font", void 0), WB([U({}, RE)], t.prototype, "connectorStyle", void 0), WB([Y(null)], t.prototype, "template", void 0), t }(ww), YB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return VB(t, e), WB([Y("50%")], t.prototype, "x", void 0), WB([Y("50%")], t.prototype, "y", void 0), t }(ww), UB = function () { return function () { this.visible = !0, this.symbolLocation = null, this.region = null, this.labelRegion = null, this.labelVisible = !0, this.regions = null, this.isExplode = !1, this.isClubbed = !1, this.isSliced = !1 } }(), qB = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.points = [], t.clubbedPoints = [], t.sumOfPoints = 0, t.isRectSeries = !0, t.clipRect = new ej(0, 0, 0, 0), t.category = "Series", t } return VB(t, e), t.prototype.refreshDataManager = function (e, t) { var i = this, n = this.dataSource || e.dataSource; if (n instanceof aA || !d(this.query)) { this.dataModule.getData(this.dataModule.generateQuery().requiresCount()).then(function (n) { return i.dataManagerSuccess(n, e, t) }) } else this.dataManagerSuccess({ result: n, count: n.length }, e, t) }, t.prototype.dataManagerSuccess = function (e, t, i) { var n = { name: vj, series: this, data: e.result }; t.trigger(vj, n), this.resultData = "" !== e.result ? e.result : [], this.getPoints(this.resultData, t), (++t.seriesCounts === t.visibleSeries.length && i || window.Blazor && !i && 1 === t.seriesCounts) && t.refreshChart() }, t.prototype.getPoints = function (e, t) { var i = Object.keys(e).length; if (this.sumOfPoints = 0, 0 === i) return null; this.findSumOfPoints(e), this.points = [], this.clubbedPoints = [], this.sumOfClub = 0; for (var n, r = this.palettes.length ? this.palettes : Ci(t.theme), o = Jn(this.groupTo, this.sumOfPoints), s = 0; s < i; s++) { (n = this.setPoints(e, s, r)).y; this.isClub(n, o, s) ? (n.index = this.clubbedPoints.length, n.isExplode = !0, this.clubbedPoints.push(n), n.isSliced = !0) : (d(n.y) && (n.visible = !1), this.pushPoints(n, r)) } if (this.lastGroupTo = this.groupTo, this.sumOfClub > 0) { var a = this.generateClubPoint(); this.pushPoints(a, r); var l = this.points.length - 1; this.clubbedPoints.map(function (e) { e.index += l, e.color = a.color }) } this.clubbedPoints.length && this.explode && "Pie" === this.type && (this.explodeAll || this.points[this.points.length - 1].index === this.explodeIndex) && (this.points.splice(this.points.length - 1, 1), this.points = this.points.concat(this.clubbedPoints)) }, t.prototype.generateClubPoint = function () { var e = new UB; return e.isClubbed = !0, e.x = "Others", e.y = this.sumOfClub, e.text = e.originalText = e.x + ": " + this.sumOfClub, e.sliceRadius = "80%", e }, t.prototype.pushPoints = function (e, t) { e.index = this.points.length, e.isExplode = this.explodeAll || e.index === this.explodeIndex, e.color = e.color || t[e.index % t.length], this.points.push(e) }, t.prototype.isClub = function (e, t, i) { if (!d(t)) { if ("Value" === this.groupMode && Math.abs(e.y) <= t) return this.sumOfClub += Math.abs(e.y), !0; if ("Point" === this.groupMode && i >= t) return this.sumOfClub += Math.abs(e.y), !0 } return !1 }, t.prototype.findSumOfPoints = function (e) { for (var t = Object.keys(e).length, i = 0; i < t; i++)d(e[i]) || d(e[i][this.yName]) || isNaN(e[i][this.yName]) || (this.sumOfPoints += Math.abs(e[i][this.yName])) }, t.prototype.setPoints = function (e, t, i) { var r = new UB; return r.x = n(this.xName, e[t]), r.y = n(this.yName, e[t]), r.percentage = +(r.y / this.sumOfPoints * 100).toFixed(2), r.color = n(this.pointColorMapping, e[t]), r.text = r.originalText = n(this.dataLabel.name || "", e[t]), r.tooltip = n(this.tooltipMappingName || "", e[t]), r.sliceRadius = n(this.radius, e[t]), r.sliceRadius = d(r.sliceRadius) ? "80%" : r.sliceRadius, this.setAccEmptyPoint(r, t, e, i), r }, t.prototype.renderSeries = function (e, t) { var i = t ? Sn(e.element.id + "_Series_" + this.index) : e.renderer.createGroup({ id: e.element.id + "_Series_" + this.index }); this.renderPoints(e, i, t); var n; e.accumulationDataLabelModule && this.dataLabel.visible && ((n = e.renderer.createGroup({ id: e.element.id + "_datalabel_Series_" + this.index })).style.visibility = this.animation.enable && e.animateSeries && "Pie" === this.type ? "hidden" : "visible", this.renderDataLabel(e, n, t)), "Pie" === this.type && (this.findMaxBounds(this.labelBound, this.accumulationBound), e.pieSeriesModule.animateSeries(e, this.animation, this, i)), e.accumulationLegendModule && (this.labelBound.x -= e.explodeDistance, this.labelBound.y -= e.explodeDistance, this.labelBound.height += e.explodeDistance - this.labelBound.y, this.labelBound.width += e.explodeDistance - this.labelBound.x) }, t.prototype.renderPoints = function (e, t, i) { for (var n, r = e.element.id + "_Series_" + this.index + "_Point_", o = 0, s = this.points; o < s.length; o++) { var a = s[o], l = { cancel: !1, name: yj, series: this, point: a, fill: a.color, border: this.isEmpty(a) ? { width: this.emptyPointSettings.border.width, color: this.emptyPointSettings.border.color } : { width: this.border.width, color: this.border.color } }; e.trigger(yj, l), a.color = l.fill, n = new rj(r + a.index, a.color, l.border.width || 1, l.border.color || a.color, this.opacity, "", ""), e[an(this.type) + "SeriesModule"].renderPoint(a, this, e, n, t, i) } kn(!1, e.getSeriesElement(), t, i) }, t.prototype.renderDataLabel = function (e, t, i) { e.accumulationDataLabelModule.findAreaRect(); for (var n = M("div", { id: e.element.id + "_Series_0_DataLabelCollections" }), r = 0, o = this.points; r < o.length; r++) { var s = o[r]; s.visible && e.accumulationDataLabelModule.renderDataLabel(s, this.dataLabel, t, this.points, this.index, n, i) } null !== this.dataLabel.template && n.childElementCount && kn(!1, Sn(e.element.id + "_Secondary_Element"), n, i), kn(!1, e.getSeriesElement(), t, i) }, t.prototype.findMaxBounds = function (e, t) { e.x = t.x < e.x ? t.x : e.x, e.y = t.y < e.y ? t.y : e.y, e.height = t.y + t.height > e.height ? t.y + t.height : e.height, e.width = t.x + t.width > e.width ? t.x + t.width : e.width }, t.prototype.setAccEmptyPoint = function (e, t, i, n) { if (!d(e.y) && !isNaN(e.y)) return null; switch (e.color = this.emptyPointSettings.fill || e.color, this.emptyPointSettings.mode) { case "Zero": e.y = 0, e.visible = !0; break; case "Average": var r = i[t - 1] ? i[t - 1][this.yName] || 0 : 0, o = i[t + 1] ? i[t + 1][this.yName] || 0 : 0; e.y = (Math.abs(r) + Math.abs(o)) / 2, this.sumOfPoints += e.y, e.visible = !0; break; default: e.visible = !1 } }, t.prototype.isEmpty = function (e) { return e.color === this.emptyPointSettings.fill }, WB([Y("")], t.prototype, "dataSource", void 0), WB([Y()], t.prototype, "query", void 0), WB([Y("")], t.prototype, "xName", void 0), WB([Y("")], t.prototype, "name", void 0), WB([Y("")], t.prototype, "tooltipMappingName", void 0), WB([Y("")], t.prototype, "yName", void 0), WB([Y(!0)], t.prototype, "visible", void 0), WB([U({ color: null, width: 0 }, BE)], t.prototype, "border", void 0), WB([U(null, WE)], t.prototype, "animation", void 0), WB([Y("SeriesType")], t.prototype, "legendShape", void 0), WB([Y("")], t.prototype, "pointColorMapping", void 0), WB([Y(null)], t.prototype, "selectionStyle", void 0), WB([Y(null)], t.prototype, "groupTo", void 0), WB([Y("Value")], t.prototype, "groupMode", void 0), WB([U({}, _B)], t.prototype, "dataLabel", void 0), WB([Y([])], t.prototype, "palettes", void 0), WB([Y(0)], t.prototype, "startAngle", void 0), WB([Y(null)], t.prototype, "endAngle", void 0), WB([Y("80%")], t.prototype, "radius", void 0), WB([Y("0")], t.prototype, "innerRadius", void 0), WB([Y("Pie")], t.prototype, "type", void 0), WB([Y(!0)], t.prototype, "enableTooltip", void 0), WB([Y(!1)], t.prototype, "explode", void 0), WB([Y("30%")], t.prototype, "explodeOffset", void 0), WB([Y(!1)], t.prototype, "explodeAll", void 0), WB([Y(null)], t.prototype, "explodeIndex", void 0), WB([U({ mode: "Drop" }, UE)], t.prototype, "emptyPointSettings", void 0), WB([Y(0)], t.prototype, "gapRatio", void 0), WB([Y("80%")], t.prototype, "width", void 0), WB([Y("80%")], t.prototype, "height", void 0), WB([Y("20%")], t.prototype, "neckWidth", void 0), WB([Y("20%")], t.prototype, "neckHeight", void 0), WB([Y("Linear")], t.prototype, "pyramidMode", void 0), WB([Y(1)], t.prototype, "opacity", void 0), t }(ww), GB = function () { function e(e) { this.accumulation = e } return Object.defineProperty(e.prototype, "center", { get: function () { return this.pieCenter || ("Pie" === this.accumulation.visibleSeries[0].type ? this.accumulation.pieSeriesModule.center : null) }, set: function (e) { this.pieCenter = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "radius", { get: function () { return void 0 !== this.pieRadius ? this.pieRadius : this.accumulation.pieSeriesModule.radius }, set: function (e) { this.pieRadius = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "labelRadius", { get: function () { return void 0 !== this.pieLabelRadius ? this.pieLabelRadius : this.accumulation.pieSeriesModule.labelRadius }, set: function (e) { this.pieLabelRadius = e }, enumerable: !0, configurable: !0 }), e.prototype.isCircular = function () { return "Pie" === this.accumulation.type }, e.prototype.isVariousRadius = function () { return this.accumulation.pieSeriesModule.isRadiusMapped }, e.prototype.processExplode = function (e) { if (e.target.id.indexOf("_Series_") > -1 || e.target.id.indexOf("_datalabel_") > -1) { var t = Zi(e.target.id).point; if (isNaN(t) || e.target.id.indexOf("_datalabel_") > -1 && "Outside" === this.accumulation.visibleSeries[0].points[t].labelPosition) return null; this.explodePoints(t, this.accumulation), this.deExplodeAll(t, this.accumulation.enableAnimation ? 300 : 0) } }, e.prototype.invokeExplode = function () { for (var e = this.accumulation.visibleSeries[0], t = this.accumulation.enableAnimation ? 300 : 0, i = 0, n = e.points; i < n.length; i++) { var r = n[i]; r.isExplode && this.pointExplode(r.index, r, t) } if (this.accumulation.accumulationSelectionModule && "None" !== this.accumulation.selectionMode && this.accumulation.accumulationSelectionModule.selectedDataIndexes.length) for (var o = 0, s = this.accumulation.accumulationSelectionModule.selectedDataIndexes; o < s.length; o++) { var a = s[o]; this.explodePoints(a.point, this.accumulation, !0), this.deExplodeAll(a.point, t) } }, e.prototype.deExplodeAll = function (e, t) { for (var i = this.accumulation.element.id + "_Series_0_Point_", n = 0, r = this.accumulation.visibleSeries[0].points; n < r.length; n++) { var o = r[n]; (e !== o.index && !o.isSliced || o.isClubbed) && (o.isExplode = !1, this.deExplodeSlice(o.index, i, t)) } }, e.prototype.explodePoints = function (e, t, i) { void 0 === i && (i = !1); var n = t.visibleSeries[0], r = n.points, o = hr(e, r), s = !0, a = this.accumulation.enableAnimation ? 300 : 0; if (d(o)) return null; var l = !i && (o.isSliced || n.clubbedPoints.length && r[r.length - 1].index === n.clubbedPoints[n.clubbedPoints.length - 1].index); "Pie" === n.type && (l || o.isClubbed) && (s = this.clubPointExplode(e, o, n, r, t, a, i, l)), s && this.pointExplode(e, o, a, i) }, e.prototype.getSum = function (e) { var t = 0; return e.map(function (e) { t += e.visible ? e.y : 0 }), t }, e.prototype.clubPointExplode = function (e, t, i, n, r, o, s, a) { if (void 0 === s && (s = !1), void 0 === a && (a = !1), t.isClubbed) return r.animateSeries = !1, n.splice(n.length - 1, 1), i.clubbedPoints.map(function (e) { e.visible = !0, e.isExplode = !0 }), r.visibleSeries[0].points = n.concat(i.clubbedPoints), this.deExplodeAll(e, o), i.sumOfPoints = this.getSum(r.visibleSeries[0].points), r.refreshChart(), !1; if (a || t.isSliced) { r.animateSeries = !1, n.splice(n.length - i.clubbedPoints.length, i.clubbedPoints.length); var l = i.generateClubPoint(); if (l.index = n.length, l.color = i.clubbedPoints[0].color, n.push(l), i.sumOfPoints = this.getSum(n), this.deExplodeAll(e, o), l.isExplode = !1, r.visibleSeries[0].points = n, r.refreshChart(), this.pointExplode(l.index, n[l.index], 0, !0), l.isExplode = !1, this.deExplodeSlice(l.index, r.element.id + "_Series_0_Point_", o), t.isSliced) return !1 } return !0 }, e.prototype.pointExplode = function (e, t, i, n) { var r, o = this.accumulation.element.id + "_Series_0_Point_", s = this.accumulation; r = this.isCircular() ? qi(t.midAngle, s.explodeDistance, this.center) : { x: t.labelRegion && t.labelRegion.x < t.region.x ? -s.explodeDistance : s.explodeDistance, y: 0 }, this.isExplode(o + e) || n ? (t.isExplode = !0, this.explodeSlice(e, r, o, this.center || { x: 0, y: 0 }, i)) : (t.isExplode = !1, this.deExplodeSlice(e, o, i)) }, e.prototype.isExplode = function (e) { var t = Sn(e), i = t ? t.getAttribute("transform") : null; return t && ("translate(0, 0)" === i || null === i || "translate(0)" === i) }, e.prototype.deExplodeSlice = function (e, t, i) { var n = Sn(t + e), r = n ? n.getAttribute("transform") : null; if (this.accumulation.enableAnimation && n && r && "translate(0, 0)" !== r && "translate(0)" !== r) { var o = /translate\((-?\d+\.?\d*),?\s*(-?\d+[.]?\d*)?\)/.exec(r); this.performAnimation(e, t, 0, 0, +o[1], +o[2] || 0, i, !0) } else this.performAnimation(e, t, 0, 0, 0, 0, i, !0) }, e.prototype.setTranslate = function (e, t, i) { this.setElementTransform(t + e, i), this.accumulation.visibleSeries[0].dataLabel.visible && (t = this.accumulation.element.id + "_datalabel_Series_0_", this.setElementTransform(t + "shape_" + e, i), this.setElementTransform(t + "text_" + e, i), this.setElementTransform(t + "connector_" + e, i)) }, e.prototype.setElementTransform = function (e, t) { var i = Sn(e); i && i.setAttribute("transform", t) }, e.prototype.explodeSlice = function (e, t, i, n, r) { this.performAnimation(e, i, 0, 0, t.x - n.x, t.y - n.y, r) }, e.prototype.performAnimation = function (e, t, i, n, r, o, s, a) { var l = this; if (s <= 0) return this.setTranslate(e, t, "translate(" + r + ", " + o + ")"), null; var h, d; new fw({}).animate(M("div"), { duration: s, progress: function (s) { h = cn(s.timeStamp, i, r, s.duration), d = cn(s.timeStamp, n, o, s.duration), l.setTranslate(e, t, "translate(" + (a ? r - h : h) + ", " + (a ? o - d : d) + ")") }, end: function (n) { l.setTranslate(e, t, "translate(" + (a ? i : r) + ", " + (a ? i : o) + ")") } }) }, e }(), QB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), XB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return QB(t, e), t.prototype.initProperties = function (e, t) { this.accumulation = e, this.size = Math.min(e.initialClipRect.width, e.initialClipRect.height), this.initAngles(t); var i = parseInt(t.radius, 10); if (-1 === t.radius.indexOf("%") && "number" != typeof i || isNaN(i)) { var n = []; this.isRadiusMapped = !0; for (var r = 0; r < Object.keys(t.points).length; r++)-1 !== t.points[r].sliceRadius.indexOf("%") ? n[r] = Jn(t.points[r].sliceRadius, this.size / 2) : n[r] = parseInt(t.points[r].sliceRadius, 10); var o = Math.min.apply(null, n), s = Math.max.apply(null, n); this.radius = this.seriesRadius = s, this.innerRadius = Jn(t.innerRadius, this.seriesRadius), this.innerRadius = this.innerRadius > o ? this.innerRadius / 2 : this.innerRadius } else this.isRadiusMapped = !1, this.radius = Jn(t.radius, this.size / 2), this.innerRadius = Jn(t.innerRadius, this.radius), this.labelRadius = "Inside" === t.dataLabel.position ? (this.radius - this.innerRadius) / 2 + this.innerRadius : this.radius + Jn(t.dataLabel.connectorStyle.length || "4%", this.size / 2); e.explodeDistance = t.explode ? Jn(t.explodeOffset, this.radius) : 0, this.findCenter(e, t), this.defaultLabelBound(t, t.dataLabel.visible, t.dataLabel.position), this.totalAngle -= .001 }, t.prototype.getLabelRadius = function (e, t) { return "Inside" === e.dataLabel.position ? (Jn(t.sliceRadius, this.radius) - this.innerRadius) / 2 + this.innerRadius : Jn(t.sliceRadius, this.seriesRadius) + Jn(e.dataLabel.connectorStyle.length || "4%", this.size / 2) }, t.prototype.findCenter = function (e, t) { this.accumulation = e, this.center = { x: Jn(e.center.x, e.initialClipRect.width) + e.initialClipRect.x, y: Jn(e.center.y, e.initialClipRect.height) + e.initialClipRect.y }; var i = this.getSeriesBound(t), n = new dI(i.x + i.width / 2, i.y + i.height / 2); this.center.x += this.center.x - n.x, this.center.y += this.center.y - n.y, this.accumulation.origin = this.center }, t.prototype.initAngles = function (e) { var t = d(e.endAngle) ? e.startAngle : e.endAngle; this.totalAngle = (t - e.startAngle) % 360, this.startAngle = e.startAngle - 90, this.totalAngle = this.totalAngle <= 0 ? 360 + this.totalAngle : this.totalAngle, this.startAngle = (this.startAngle < 0 ? this.startAngle + 360 : this.startAngle) % 360 }, t.prototype.defaultLabelBound = function (e, t, i) { var n = this.getSeriesBound(e); e.accumulationBound = n, e.labelBound = new ej(n.x, n.y, n.width + n.x, n.height + n.y), t && "Outside" === i && (e.labelBound = new ej(1 / 0, 1 / 0, -1 / 0, -1 / 0)) }, t.prototype.getSeriesBound = function (e) { var t = new ej(1 / 0, 1 / 0, -1 / 0, -1 / 0); this.initAngles(e); var i = this.startAngle, n = this.totalAngle, r = (this.startAngle + n) % 360; r = 0 === r ? 360 : r, e.findMaxBounds(t, this.getRectFromAngle(i)), e.findMaxBounds(t, this.getRectFromAngle(r)), e.findMaxBounds(t, new ej(this.center.x, this.center.y, 0, 0)); var o = (90 * Math.floor(i / 90) + 90) % 360, s = 90 * Math.floor(r / 90) % 360; s = 0 === s ? 360 : s, (n >= 90 || s === o) && (e.findMaxBounds(t, this.getRectFromAngle(o)), e.findMaxBounds(t, this.getRectFromAngle(s))), (0 === i || i + n >= 360) && e.findMaxBounds(t, this.getRectFromAngle(0)); for (var a = o === s ? 0 : Math.floor(n / 90), l = 1; l < a; l++)((o += 90) < s || r < i || 360 === n) && e.findMaxBounds(t, this.getRectFromAngle(o)); return t.width -= t.x, t.height -= t.y, t }, t.prototype.getRectFromAngle = function (e) { var t = qi(e, this.radius, this.center); return new ej(t.x, t.y, 0, 0) }, t.prototype.getPathArc = function (e, t, i, n, r) { var o = i - t, s = (o = o < 0 ? o + 360 : o) < 180 ? 0 : 1; return r || 0 !== r ? this.getDoughnutPath(e, qi(t, n, e), qi(i, n, e), n, qi(t, r, e), qi(i, r, e), r, s) : this.getPiePath(e, qi(t, n, e), qi(i, n, e), n, s) }, t.prototype.getPiePath = function (e, t, i, n, r) { return "M " + e.x + " " + e.y + " L " + t.x + " " + t.y + " A " + n + " " + n + " 0 " + r + " 1 " + i.x + " " + i.y + " Z" }, t.prototype.getDoughnutPath = function (e, t, i, n, r, o, s, a) { return "M " + t.x + " " + t.y + " A " + n + " " + n + " 0 " + a + " 1 " + i.x + " " + i.y + " L " + o.x + " " + o.y + " A " + s + " " + s + " 0 " + a + ",0 " + r.x + " " + r.y + " Z" }, t.prototype.doAnimation = function (e, t) { var i, n = this, r = t.startAngle - 90, o = this.accumulation.duration ? this.accumulation.duration : t.animation.duration; this.center.x += 1; var s = .75 * Math.max(this.accumulation.availableSize.height, this.accumulation.availableSize.width); s += .414 * s; var a = dn("Linear"); new fw({}).animate(e, { duration: o, delay: t.animation.delay, progress: function (t) { i = a(t.timeStamp, r, n.totalAngle, t.duration), e.setAttribute("d", n.getPathArc(n.center, r, i, s, 0)) }, end: function (i) { n.center.x -= 1, e.setAttribute("d", n.getPathArc(n.center, 0, 359.99999, s, 0)), n.accumulation.trigger("animationComplete", n.accumulation.isBlazor ? {} : { series: t, accumulation: n.accumulation, chart: n.accumulation }); Sn(n.accumulation.element.id + "_datalabel_Series_" + t.index).style.visibility = n.accumulation.isDestroyed ? "hidden" : "visible" } }) }, t }(GB), JB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), ZB = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return JB(t, e), t.prototype.renderPoint = function (e, t, i, n, r, o) { var s = t.sumOfPoints, a = e.visible ? e.y : 0, l = s ? Math.abs(a) / s * this.totalAngle : null, h = Math.PI / 180 * (90 - (360 - this.startAngle) - 90); this.radius = this.isRadiusMapped ? Jn(e.sliceRadius, this.seriesRadius) : this.radius, n.d = this.getPathOption(e, l, this.startAngle % 360, a), e.midAngle = (this.startAngle - l / 2) % 360, e.endAngle = this.startAngle % 360, e.symbolLocation = qi(e.midAngle, (this.radius + this.innerRadius) / 2, this.center), o ? this.refresh(e, l, h, i, n, r) : (r.appendChild(i.renderer.drawPath(n)), e.degree = l, e.start = h) }, t.prototype.refresh = function (e, t, i, n, r, o) { var s, a, l = this, h = Sn(r.id), d = n.duration ? n.duration : 300; new fw({}).animate(M("div"), { duration: d, delay: 0, progress: function (r) { a = cn(r.timeStamp, e.degree, t - e.degree, r.duration), s = ((s = cn(r.timeStamp, e.start, i - e.start, r.duration)) / (Math.PI / 180) + 360) % 360, h.setAttribute("d", l.getPathOption(e, a, s, e.y)), e.isExplode && n.accBaseModule.explodePoints(e.index, n, !0), h.style.visibility = "visible" }, end: function (n) { h.style.visibility = e.visible ? "visible" : "hidden", h.setAttribute("d", r.d), e.degree = t, e.start = i } }) }, t.prototype.getPathOption = function (e, t, i, n) { if (!t) return ""; var r = this.getPathArc(this.center, i % 360, (i + t) % 360, this.isRadiusMapped ? Jn(e.sliceRadius, this.seriesRadius) : this.radius, this.innerRadius); return this.startAngle += t, r }, t.prototype.animateSeries = function (e, t, i, n) { var r = e.element.id + "SeriesGroup" + i.index; if (i.animation.enable && e.animateSeries) { var o = e.renderer.createClipPath({ id: r + "_clipPath" }), s = new rj(r + "_slice", "transparent", 1, "transparent", 1, "", ""), a = e.renderer.drawPath(s); o.appendChild(a), e.svgObject.appendChild(o), n.setAttribute("style", "clip-path:url(#" + o.id + ")"), this.doAnimation(a, i) } }, t.prototype.getModuleName = function () { return "PieSeries" }, t.prototype.destroy = function (e) { }, t }(XB), KB = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), $B = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, eF = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.animateselected = !1, n.explodeDistance = 0, n.chartid = 57724, n } return KB(t, e), t.prototype.animate = function (e) { this.duration = e || 700, this.animateselected = !0, this.animateSeries = !1; var t = 0, i = [], n = [], r = [], o = this.visibleSeries[0], s = []; if (s = o.dataSource, o.sumOfPoints = 0, o.points.length < Object.keys(o.dataSource).length) this.refresh(); else if (o.points.length > Object.keys(o.dataSource).length) { var a = this.visibleSeries[0]; a.points = a.points.filter(function (e) { return e.visible = !1, n.push(e.index), i.push(e.color), s.some(function (i) { var n = i; return e.x === n.x && (e.visible = !0, r.push(e.index), e.index = t, t++), e.x === n.x }) }); for (var l = n.filter(function (e) { return r.indexOf(e) < 0 }), h = n.length - l.length, d = n.length - 1; d >= h; d--)Oi("container_Series_0_Point_" + n[d]); for (d = 0; d < a.points.length; d++)a.points[d].y = a.dataSource[d].y, a.points[d].color = i[d], a.sumOfPoints += a.dataSource[d].y; this.redraw = this.enableAnimation, this.animateSeries = !1, this.calculateBounds(), this.renderElements() } else { for (d = 0; d < o.points.length; d++)o.points[d].y = o.dataSource[d].y, o.sumOfPoints += o.dataSource[d].y; this.redraw = this.enableAnimation, this.animateSeries = !1, this.removeSvg(), this.refreshPoints(o.points), this.renderElements() } }, Object.defineProperty(t.prototype, "type", { get: function () { return this.series && this.series.length ? this.series[0].type : "Pie" }, enumerable: !0, configurable: !0 }), t.prototype.preRender = function () { if (this.isBlazor = window.Blazor, this.unWireEvents(), this.setCulture(), this.animateSeries = !0, "" === this.element.id) { var e = document.getElementsByClassName("e-accumulationchart").length; this.element.id = "acc_chart_" + this.chartid + "_" + e } er(this), this.wireEvents() }, t.prototype.setTheme = function () { this.themeStyle = Li(this.theme) }, t.prototype.render = function () { this.trigger("load", { accumulation: this, chart: this }), this.setTheme(), this.accBaseModule = new GB(this), this.pieSeriesModule = new ZB(this), this.calculateVisibleSeries(), this.processData() }, t.prototype.unWireEvents = function () { var e = uw.isPointer, t = uw.touchStartEvent, i = uw.touchMoveEvent, n = uw.touchEndEvent, r = e ? "pointerleave" : "mouseleave"; Kv.remove(this.element, i, this.accumulationMouseMove), Kv.remove(this.element, n, this.accumulationMouseEnd), Kv.remove(this.element, t, this.accumulationMouseStart), Kv.remove(this.element, "click", this.accumulationOnMouseClick), Kv.remove(this.element, "contextmenu", this.accumulationRightClick), Kv.remove(this.element, r, this.accumulationMouseLeave), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.accumulationResize) }, t.prototype.wireEvents = function () { var e = uw.isPointer, t = uw.touchStartEvent, i = uw.touchEndEvent, n = uw.touchMoveEvent, r = e ? "pointerleave" : "mouseleave"; Kv.add(this.element, n, this.accumulationMouseMove, this), Kv.add(this.element, i, this.accumulationMouseEnd, this), Kv.add(this.element, t, this.accumulationMouseStart, this), Kv.add(this.element, "click", this.accumulationOnMouseClick, this), Kv.add(this.element, "contextmenu", this.accumulationRightClick, this), Kv.add(this.element, r, this.accumulationMouseLeave, this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.accumulationResize.bind(this)), new yb(this.element), this.setStyle(this.element) }, t.prototype.setMouseXY = function (e) { var t, i, n = Sn(this.element.id + "_svg").getBoundingClientRect(), r = this.element.getBoundingClientRect(); if (e.type.indexOf("touch") > -1) { this.isTouch = !0; var o = e; i = o.changedTouches[0].clientY, t = o.changedTouches[0].clientX } else this.isTouch = "touch" === e.pointerType || "2" === e.pointerType, t = e.clientX, i = e.clientY; this.mouseY = i - r.top - Math.max(n.top - r.top, 0), this.mouseX = t - r.left - Math.max(n.left - r.left, 0) }, t.prototype.accumulationMouseEnd = function (e) { return this.setMouseXY(e), this.trigger(Dj, { target: e.target.id, x: this.mouseX, y: this.mouseY }), this.isTouch && (this.titleTooltip(e, this.mouseX, this.mouseY, this.isTouch), this.accumulationDataLabelModule && this.visibleSeries[0].dataLabel.visible && this.accumulationDataLabelModule.move(e, this.mouseX, this.mouseY, this.isTouch), this.accumulationLegendModule && this.legendSettings.visible && this.accumulationLegendModule.move(e)), this.notify(uw.touchEndEvent, e), !1 }, t.prototype.accumulationMouseStart = function (e) { return this.setMouseXY(e), this.trigger(Tj, { target: e.target.id, x: this.mouseX, y: this.mouseY }), !1 }, t.prototype.accumulationResize = function (e) { var t = this; this.animateSeries = !1; var i = { accumulation: this.isBlazor ? {} : this, previousSize: new $E(this.availableSize.width, this.availableSize.height), name: "resized", currentSize: new $E(0, 0), chart: this.isBlazor ? {} : this }; return this.resizeTo && clearTimeout(this.resizeTo), this.resizeTo = setTimeout(function () { t.isDestroyed ? clearTimeout(t.resizeTo) : (er(t), i.currentSize = t.availableSize, t.trigger("resized", i), t.refreshSeries(), t.refreshChart()) }, 500), !1 }, t.prototype.print = function (e) { var t = document.getElementById(this.element.id + "_Series_0").style.clipPath; document.getElementById(this.element.id + "_Series_0").style.clipPath = ""; new TR(this).print(e), document.getElementById(this.element.id + "_Series_0").style.clipPath = t }, t.prototype.export = function (e, t) { this.exportModule && this.exportModule.export(e, t) }, t.prototype.setStyle = function (e) { e.style.touchAction = "element", e.style.msTouchAction = "element", e.style.msContentZooming = "none", e.style.msUserSelect = "none", e.style.webkitUserSelect = "none", e.style.position = "relative", e.style.display = "block" }, t.prototype.setAnnotationValue = function (e, t) { var i, n = this.annotations[e], r = Sn(this.element.id + "_Annotation_Collections"); t && (n.content = t, r ? (i = this.createElement("div"), Oi(this.element.id + "_Annotation_" + e), this.annotationModule.processAnnotation(n, e, i), r.appendChild(i.children[0])) : this.annotationModule.renderAnnotations(Sn(this.element.id + "_Secondary_Element"))) }, t.prototype.accumulationMouseMove = function (e) { return this.setMouseXY(e), this.trigger(Mj, { target: e.target.id, x: this.mouseX, y: this.mouseY }), this.pointMove && this.triggerPointEvent("pointMove", e.target), this.accumulationLegendModule && this.legendSettings.visible && this.accumulationLegendModule.move(e), this.accumulationDataLabelModule && this.visibleSeries[0] && this.visibleSeries[0].dataLabel.visible && this.accumulationDataLabelModule.move(e, this.mouseX, this.mouseY), this.isTouch || this.titleTooltip(e, this.mouseX, this.mouseY), this.notify(uw.touchMoveEvent, e), !1 }, t.prototype.titleTooltip = function (e, t, i, n) { var r = e.target.id, o = r === this.element.id + "_title" || r === this.element.id + "_subTitle"; if (e.target.textContent.indexOf("...") > -1 && o) { zi(r === this.element.id + "_title" ? this.title : this.subTitle, t, i, this.element.offsetWidth, this.element.id + "_EJ2_Title_Tooltip", Sn(this.element.id + "_Secondary_Element"), n) } else Oi(this.element.id + "_EJ2_Title_Tooltip") }, t.prototype.accumulationOnMouseClick = function (e) { return this.setMouseXY(e), this.accumulationLegendModule && this.legendSettings.visible && this.accumulationLegendModule.click(e), "None" !== this.selectionMode && this.accumulationSelectionModule && this.accumulationSelectionModule.calculateSelectedElements(this, e), this.visibleSeries[0].explode && this.accBaseModule.processExplode(e), this.trigger(Sj, { target: e.target.id, x: this.mouseX, y: this.mouseY }), this.pointClick && this.triggerPointEvent("pointClick", e.target), !1 }, t.prototype.triggerPointEvent = function (e, t) { var i = Zi(t.id, !0); i.series >= 0 && i.point >= 0 && this.trigger(e, { series: this.isBlazor ? {} : this.series[i.series], point: this.series[i.series].points[i.point], seriesIndex: i.series, pointIndex: i.point, x: this.mouseX, y: this.mouseY }) }, t.prototype.accumulationRightClick = function (e) { return 2 !== e.buttons && "touch" !== e.pointerType || (e.preventDefault(), e.stopPropagation(), !1) }, t.prototype.accumulationMouseLeave = function (e) { return this.setMouseXY(e), this.trigger(xj, { target: e.target.id, x: this.mouseX, y: this.mouseY }), this.notify(uw.isPointer ? "pointerleave" : "mouseleave", e), !1 }, t.prototype.setCulture = function () { this.intl = new Gw }, t.prototype.createPieSvg = function () { this.removeSvg(), tr(this) }, t.prototype.removeSvg = function () { if (this.redraw) return null; if (or(this), Oi(this.element.id + "_Secondary_Element"), this.svgObject) { for (; this.svgObject.childNodes.length > 0;)this.svgObject.removeChild(this.svgObject.firstChild); !this.svgObject.hasChildNodes() && this.svgObject.parentNode && k(this.svgObject) } Oi("EJ2_legend_tooltip"), Oi("EJ2_datalabel_tooltip") }, t.prototype.createSecondaryElement = function () { var e = Zn(this.redraw, this.element.id + "_Secondary_Element") || this.createElement("div", { id: this.element.id + "_Secondary_Element", styles: "position: relative" }); kn(!1, this.element, e, this.redraw) }, t.prototype.calculateVisibleSeries = function () { this.visibleSeries = []; for (var e = 0, t = this.series.length; e < t; e++)if (this.series[e].index = e, this.series[e].type === this.type && 0 === this.visibleSeries.length) { this.visibleSeries.push(this.series[e]); break } }, t.prototype.processData = function (e) { void 0 === e && (e = !0), this.seriesCounts = 0; for (var t = 0, i = this.visibleSeries; t < i.length; t++) { var n = i[t]; n.dataModule = new EI(n.dataSource || this.dataSource, n.query), n.refreshDataManager(this, e) } }, t.prototype.refreshChart = function () { this.doGrouppingProcess(), this.createPieSvg(), this.calculateBounds(), this.renderElements(), Oi("chartmeasuretext") }, t.prototype.doGrouppingProcess = function () { var e = this.visibleSeries[0]; d(e.resultData) || d(e.lastGroupTo) || e.lastGroupTo === e.groupTo || e.getPoints(e.resultData, this) }, t.prototype.calculateBounds = function () { this.initialClipRect = new ej(this.margin.left, this.margin.top, this.availableSize.width, this.availableSize.height), this.titleCollection = [], this.subTitleCollection = []; var e = 0, t = 0, i = 0, n = 0; if (this.titleCollection = ir(this.title, this.titleStyle, this.initialClipRect.width), e = xi(this.title, this.titleStyle).height * this.titleCollection.length, this.subTitle) { for (var r = 0, o = this.titleCollection; r < o.length; r++) { i = (n = xi(o[r], this.titleStyle).width) > i ? n : i } this.subTitleCollection = ir(this.subTitle, this.subTitleStyle, i), t = xi(this.subTitle, this.subTitleStyle).height * this.subTitleCollection.length } Ui(this.initialClipRect, new ej(0, t + e, this.margin.right + this.margin.left, this.margin.bottom + this.margin.top)), this.calculateLegendBounds() }, t.prototype.calculateLegendBounds = function () { if (!this.accumulationLegendModule || !this.legendSettings.visible) return null; this.accumulationLegendModule.getLegendOptions(this, this.visibleSeries), this.accumulationLegendModule.calculateLegendBounds(this.initialClipRect, this.availableSize) }, t.prototype.renderElements = function () { this.renderBorder(), this.createSecondaryElement(), this.renderSeries(), this.renderTitle(), this.renderLegend(), kn(!1, this.element, this.svgObject, this.redraw), this.processSelection(), this.processExplode(), this.renderAnnotation(), this.setSecondaryElementPosition(), this.trigger("loaded", { accumulation: this.isBlazor ? {} : this, chart: this.isBlazor ? {} : this }), this.animateSeries = !1 }, t.prototype.setSecondaryElementPosition = function () { var e = Sn(this.element.id + "_Secondary_Element"); if (e) { var t = this.element.getBoundingClientRect(), i = Sn(this.element.id + "_svg").getBoundingClientRect(); e.style.left = Math.max(i.left - t.left, 0) + "px", e.style.top = Math.max(i.top - t.top, 0) + "px" } }, t.prototype.renderAnnotation = function () { this.annotationModule && this.annotationModule.renderAnnotations(Sn(this.element.id + "_Secondary_Element")) }, t.prototype.processExplode = function () { return this.redraw ? null : this.visibleSeries[0].explode ? void this.accBaseModule.invokeExplode() : null }, t.prototype.renderSeries = function () { this.redraw || this.svgObject.appendChild(this.renderer.createGroup({ id: this.element.id + "_SeriesCollection" })); for (var e = 0, t = this.visibleSeries; e < t.length; e++) { var i = t[e]; i.visible && this[an(i.type) + "SeriesModule"] && (this[an(i.type) + "SeriesModule"].initProperties(this, i), i.renderSeries(this, this.redraw)) } }, t.prototype.renderBorder = function () { var e = this.border.width; kn(!1, this.svgObject, this.renderer.drawRectangle(new aI(this.element.id + "_border", this.background || this.themeStyle.background, this.border, 1, new ej(e / 2, e / 2, this.availableSize.width - e, this.availableSize.height - e))), this.redraw) }, t.prototype.renderLegend = function () { if (!this.accumulationLegendModule || !this.legendSettings.visible) return null; this.accumulationLegendModule.legendCollections.length && ("Pie" === this.visibleSeries[0].type && this.accumulationLegendModule.getSmartLegendLocation(this.visibleSeries[0].labelBound, this.accumulationLegendModule.legendBounds, this.margin), this.accumulationLegendModule.renderLegend(this, this.legendSettings, this.accumulationLegendModule.legendBounds, this.redraw)) }, t.prototype.processSelection = function () { if (!this.accumulationSelectionModule || "None" === this.selectionMode) return null; var e = h([], this.accumulationSelectionModule.selectedDataIndexes, null, !0); this.accumulationSelectionModule.invokeSelection(this), e.length > 0 && (this.accumulationSelectionModule.selectedDataIndexes = e, this.accumulationSelectionModule.redrawSelection(this, this.selectionMode)) }, t.prototype.renderTitle = function () { var e, t = this.margin; if (!this.title) return null; var i = this.titleStyle.textAlignment, n = "Near" === i ? "start" : "Far" === i ? "end" : "middle", r = xi(this.title, this.titleStyle); e = new ej(t.left, 0, this.availableSize.width - t.left - t.right, 0); var o = new nj(this.element.id + "_title", nr(e, this.titleStyle), this.margin.top + 3 * r.height / 4, n, this.titleCollection, "", "auto"); $n(this.renderer, o, this.titleStyle, this.titleStyle.color || this.themeStyle.chartTitle, this.svgObject, !1, this.redraw); this.subTitle && this.renderSubTitle(o) }, t.prototype.renderSubTitle = function (e) { for (var t, i = 0, n = 0, r = this.titleStyle.textAlignment, o = xi(this.subTitle, this.subTitleStyle), s = 0, a = this.titleCollection; s < a.length; s++) { i = (n = xi(a[s], this.titleStyle).width) > i ? n : i } t = new ej("Center" === r ? e.x - i / 2 : "Far" === r ? e.x - i : e.x, 0, i, 0); var l = new nj(this.element.id + "_subTitle", nr(t, this.subTitleStyle), e.y * e.text.length + 3 * o.height / 4 + 10, function (e) { return "Near" === e ? "start" : "Far" === e ? "end" : "middle" }(this.subTitleStyle.textAlignment), this.subTitleCollection, "", "auto"); $n(this.renderer, l, this.subTitleStyle, this.subTitleStyle.color || this.themeStyle.chartTitle, this.svgObject, !1, this.redraw) }, t.prototype.getSeriesElement = function () { return this.svgObject.getElementsByTagName("g")[0] }, t.prototype.refreshSeries = function () { for (var e = 0, t = this.visibleSeries; e < t.length; e++) { var i = t[e]; this.refreshPoints(i.points) } }, t.prototype.refreshPoints = function (e) { for (var t = 0, i = e; t < i.length; t++) { var n = i[t]; n.labelPosition = null, n.labelRegion = null, n.labelVisible = !0 } }, t.prototype.getModuleName = function () { return "accumulationchart" }, t.prototype.destroy = function () { this.unWireEvents(), e.prototype.destroy.call(this), this.element.classList.remove("e-accumulationchart") }, t.prototype.requiredModules = function () { var e = []; return e.push({ member: this.type + "Series", args: [this] }), this.legendSettings.visible && e.push({ member: "AccumulationLegend", args: [this] }), this.findDatalabelVisibility() && e.push({ member: "AccumulationDataLabel", args: [this] }), this.tooltip.enable && e.push({ member: "AccumulationTooltip", args: [this] }), "None" !== this.selectionMode && e.push({ member: "AccumulationSelection", args: [this] }), this.enableExport && e.push({ member: "Export", args: [this] }), this.annotations.some(function (e) { return null !== e.content }) && e.push({ member: "Annotation", args: [this] }), e }, t.prototype.findDatalabelVisibility = function () { for (var e = 0, t = this.series; e < t.length; e++) { if (t[e].dataLabel.visible) return !0 } return !1 }, t.prototype.getPersistData = function () { return "" }, t.prototype.onPropertyChanged = function (t, i) { for (var n = { refreshElements: !1, refreshBounds: !1 }, r = 0, o = Object.keys(t); r < o.length; r++) { switch (o[r]) { case "theme": this.animateSeries = !0; break; case "title": case "subTitle": case "height": case "width": case "margin": n.refreshBounds = !0; break; case "titleStyle": t.titleStyle && (t.titleStyle.size || t.titleStyle.textOverflow) ? n.refreshBounds = !0 : n.refreshElements = !0; break; case "subTitleStyle": t.subTitleStyle && (t.subTitleStyle.size || t.subTitleStyle.textOverflow) ? n.refreshBounds = !0 : n.refreshElements = !0; break; case "legendSettings": n.refreshBounds = !0, n.refreshElements = !0; break; case "dataSource": this.processData(!1), n.refreshBounds = !0; break; case "series": if (!this.animateselected) { for (var s = this.series.length, a = !1, l = 0; l < s; l++)t.series[l] && (t.series[l].dataSource || t.series[l].yName || t.series[l].xName) && (a = !0), t.series[l] && t.series[l].explodeIndex !== i.series[l].explodeIndex && (this.accBaseModule.explodePoints(t.series[l].explodeIndex, this), this.accBaseModule.deExplodeAll(t.series[l].explodeIndex, this.enableAnimation ? 300 : 0)); a && (this.processData(!1), n.refreshBounds = !0) } this.animateselected = !1, this.redraw = !1; break; case "locale": case "currencyCode": e.prototype.refresh.call(this); break; case "background": case "border": case "annotations": case "enableSmartLabels": n.refreshElements = !0; break; case "isMultiSelect": case "selectedDataIndexes": case "selectionMode": this.accumulationSelectionModule && (d(this.accumulationSelectionModule.selectedDataIndexes) ? this.accumulationSelectionModule.invokeSelection(this) : this.accumulationSelectionModule.redrawSelection(this, i.selectionMode)) } } !n.refreshBounds && n.refreshElements ? (this.createPieSvg(), this.renderElements()) : n.refreshBounds && (this.refreshSeries(), this.createPieSvg(), this.calculateBounds(), this.renderElements()) }, $B([Y(null)], t.prototype, "width", void 0), $B([Y(null)], t.prototype, "height", void 0), $B([Y(null)], t.prototype, "title", void 0), $B([U({}, YB)], t.prototype, "center", void 0), $B([Y("")], t.prototype, "dataSource", void 0), $B([U(IE.chartTitleFont, zE)], t.prototype, "titleStyle", void 0), $B([Y(null)], t.prototype, "subTitle", void 0), $B([U(IE.chartSubTitleFont, zE)], t.prototype, "subTitleStyle", void 0), $B([U({}, zI)], t.prototype, "legendSettings", void 0), $B([U({}, GE)], t.prototype, "tooltip", void 0), $B([Y("None")], t.prototype, "selectionMode", void 0), $B([Y(!1)], t.prototype, "isMultiSelect", void 0), $B([Y(!0)], t.prototype, "enableAnimation", void 0), $B([G([], HE)], t.prototype, "selectedDataIndexes", void 0), $B([U({}, VE)], t.prototype, "margin", void 0), $B([Y(!0)], t.prototype, "enableSmartLabels", void 0), $B([U({ color: "#DDDDDD", width: 0 }, BE)], t.prototype, "border", void 0), $B([Y(null)], t.prototype, "background", void 0), $B([G([{}], qB)], t.prototype, "series", void 0), $B([G([{}], HB)], t.prototype, "annotations", void 0), $B([Y("Material")], t.prototype, "theme", void 0), $B([Y(!1)], t.prototype, "useGroupingSeparator", void 0), $B([Y(!0)], t.prototype, "enableExport", void 0), $B([X()], t.prototype, "loaded", void 0), $B([X()], t.prototype, "load", void 0), $B([X()], t.prototype, "seriesRender", void 0), $B([X()], t.prototype, "legendRender", void 0), $B([X()], t.prototype, "textRender", void 0), $B([X()], t.prototype, "tooltipRender", void 0), $B([X()], t.prototype, "pointRender", void 0), $B([X()], t.prototype, "annotationRender", void 0), $B([X()], t.prototype, "beforePrint", void 0), $B([X()], t.prototype, "chartMouseMove", void 0), $B([X()], t.prototype, "chartMouseClick", void 0), $B([X()], t.prototype, "pointClick", void 0), $B([X()], t.prototype, "pointMove", void 0), $B([X()], t.prototype, "animationComplete", void 0), $B([X()], t.prototype, "chartMouseDown", void 0), $B([X()], t.prototype, "chartMouseLeave", void 0), $B([X()], t.prototype, "chartMouseUp", void 0), $B([X()], t.prototype, "resized", void 0), $B([Y("USD")], t.prototype, "currencyCode", void 0), t = $B([J], t) }(Kw), tF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), iF = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return tF(t, e), t.prototype.initProperties = function (e, t) { var i = e.initialClipRect; t.triangleSize = new $E(Jn(t.width, i.width), Jn(t.height, i.height)), t.neckSize = new $E(Jn(t.neckWidth, i.width), Jn(t.neckHeight, i.height)), this.defaultLabelBound(t, t.dataLabel.visible, t.dataLabel.position, e), "30%" === t.explodeOffset && (t.explodeOffset = "25px"), e.explodeDistance = Jn(t.explodeOffset, i.width); var n = t.points; this.initializeSizeRatio(n, t) }, t.prototype.initializeSizeRatio = function (e, t, i) { void 0 === i && (i = !1); for (var n = t.sumOfPoints, r = Math.min(Math.max(t.gapRatio, 0), 1), o = 1 / (n * (1 + r / (1 - r))), s = r / (e.length - 1), a = 0, l = e.length - 1; l >= 0; l--) { var h = i ? e.length - 1 - l : l; if (e[h].visible) { var d = o * e[h].y; e[h].yRatio = a, e[h].heightRatio = d, a += d + s } } }, t.prototype.setLabelLocation = function (e, t, i) { var n = i.length - 1, r = "Funnel" === e.type ? i.length - 2 : i.length - 1, o = (i[0].x + i[r].x) / 2, s = (i[1].x + i[r - 1].x) / 2; t.region = new ej(o, i[0].y, s - o, i[r].y - i[0].y), t.symbolLocation = { x: t.region.x + t.region.width / 2, y: t.region.y + t.region.height / 2 }, t.labelOffset = { x: t.symbolLocation.x - (i[0].x + i[n].x) / 2, y: t.symbolLocation.y - (i[0].y + i[n].y) / 2 } }, t.prototype.findPath = function (e) { for (var t = "M", i = 0; i < e.length; i++)t += e[i].x + " " + e[i].y, i !== e.length - 1 && (t += " L"); return t }, t.prototype.defaultLabelBound = function (e, t, i, n) { var r = (n.initialClipRect.width - e.triangleSize.width) / 2, o = (n.initialClipRect.height - e.triangleSize.height) / 2, s = new ej(r, o, e.triangleSize.width, e.triangleSize.height); e.labelBound = new ej(s.x, s.y, s.width + s.x, s.height + s.y), e.accumulationBound = s, t && "Outside" === i && (e.labelBound = new ej(1 / 0, 1 / 0, -1 / 0, -1 / 0)) }, t }(GB), nF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), rF = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return nF(t, e), t.prototype.getSegmentData = function (e, t, i) { var n, r, o, s, a, l, h, d, c = t.triangleSize, p = (i.initialClipRect.width - t.triangleSize.width) / 2 + i.initialClipRect.x, u = i.initialClipRect.y + (i.initialClipRect.height - c.height) / 2, g = e.yRatio * c.height, m = g + e.heightRatio * c.height, f = t.neckSize; n = f.width + (c.width - f.width) * ((c.height - f.height - g) / (c.height - f.height)), s = (r = c.width / 2 - n / 2) + n, n = m > c.height - f.height || c.height === f.height ? f.width : f.width + (c.width - f.width) * ((c.height - f.height - m) / (c.height - f.height)), a = (o = c.width / 2 - n / 2) + n, g >= c.height - f.height ? (r = o = l = c.width / 2 - f.width / 2, s = a = h = c.width / 2 + f.width / 2) : m > c.height - f.height && (h = a = (l = o = c.width / 2 - n / 2) + n, d = c.height - f.height), g += u; var y = { x: p + 0 + a, y: m += u }, v = { x: p + 0 + o, y: m }; (d += u) && (y = { x: p + 0 + h, y: d }, v = { x: p + 0 + l, y: d }); var w = [{ x: p + 0 + r, y: g }, { x: p + 0 + s, y: g }, y, { x: p + 0 + a, y: m }, { x: p + 0 + o, y: m }, v]; this.setLabelLocation(t, e, w); return this.findPath(w) }, t.prototype.renderPoint = function (e, t, i, n, r, o) { if (!e.visible) return Oi(n.id), null; var s = this.getSegmentData(e, t, i); e.midAngle = 0, n.d = s, kn(!1, r, i.renderer.drawPath(n), o), e.isExplode && i.accBaseModule.explodePoints(e.index, i, !0) }, t.prototype.getModuleName = function () { return "FunnelSeries" }, t.prototype.destroy = function (e) { }, t }(iF), oF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), sF = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return oF(t, e), t.prototype.getSegmentData = function (e, t, i) { var n = t.triangleSize, r = i.initialClipRect.y + (i.initialClipRect.height - n.height) / 2, o = (i.initialClipRect.width - t.triangleSize.width) / 2 + i.initialClipRect.x, s = e.yRatio, a = e.yRatio + e.heightRatio, l = .5 * (1 - e.yRatio), h = .5 * (1 - a); s += r / n.height, a += r / n.height; var d = [{ x: o + 0 + l * n.width, y: s * n.height }, { x: o + 0 + (1 - l) * n.width, y: s * n.height }, { x: o + 0 + (1 - h) * n.width, y: a * n.height }, { x: o + 0 + h * n.width, y: a * n.height }]; this.setLabelLocation(t, e, d); return this.findPath(d) }, t.prototype.initializeSizeRatio = function (t, i) { "Linear" === i.pyramidMode ? e.prototype.initializeSizeRatio.call(this, t, i, !0) : this.calculateSurfaceSegments(i) }, t.prototype.calculateSurfaceSegments = function (e) { for (var t = e.points.length, i = e.sumOfPoints, n = [], r = [], o = Math.min(0, Math.max(e.gapRatio, 1)) / (t - 1), s = this.getSurfaceHeight(0, i), a = 0, l = 0; l < t; l++)e.points[l].visible && (n[l] = a, r[l] = this.getSurfaceHeight(a, Math.abs(e.points[l].y)), a += r[l] + o * s); var h = 1 / (a - o * s); for (l = 0; l < t; l++)e.points[l].visible && (e.points[l].yRatio = h * n[l], e.points[l].heightRatio = h * r[l]) }, t.prototype.getSurfaceHeight = function (e, t) { return this.solveQuadraticEquation(1, 2 * e, -t) }, t.prototype.solveQuadraticEquation = function (e, t, i) { var n, r, o = t * t - 4 * e * i; if (o >= 0) { var s = Math.sqrt(o); return n = (-t - s) / (2 * e), r = (-t + s) / (2 * e), Math.max(n, r) } return 0 }, t.prototype.renderPoint = function (e, t, i, n, r, o) { if (!e.visible) return Ai(n.id), null; n.d = this.getSegmentData(e, t, i), e.midAngle = 0, kn(!1, r, i.renderer.drawPath(n), o), e.isExplode && i.accBaseModule.explodePoints(e.index, i, !0) }, t.prototype.getModuleName = function () { return "PyramidSeries" }, t.prototype.destroy = function (e) { }, t }(iF), aF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), lF = function (e) { function t(t) { var i = e.call(this, t) || this; return i.library = i, i.titleRect = new ej(0, t.margin.top, 0, 0), i } return aF(t, e), t.prototype.getLegendOptions = function (e, t) { this.legendCollections = []; for (var i = 0; i < 1; i++) { var n = t[i].type; "Pie" !== n && "Doughnut" !== n || (n = "0" !== t[i].innerRadius && "0%" !== t[i].innerRadius ? "Doughnut" : "Pie"); for (var r = 0, o = t[i].points; r < o.length; r++) { var s = o[r]; d(s.x) || d(s.y) || this.legendCollections.push(new FI(s.x.toString(), s.color, t[i].legendShape, s.visible, n, null, null, s.index, t[i].index)) } } }, t.prototype.getLegendBounds = function (e, t, i) { var n = 0, r = 0, o = i.padding; this.isVertical ? n = i.width ? 0 : e.width / 100 * 5 : r = i.height ? 0 : e.height / 100 * 5, t.width += n, t.height += r; var s = i.shapePadding, a = 0, l = i.shapeWidth, h = 0, d = 0, c = [], p = 0, u = 0; this.maxItemHeight = Math.max(xi("MeasureText", i.textStyle).height, i.shapeHeight); for (var g, m = !1, f = 0, y = this.legendCollections; f < y.length; f++) { var v = y[f]; g = { fill: v.fill, text: v.text, shape: v.shape, name: "legendRender", cancel: !1 }, this.chart.trigger("legendRender", g), v.render = !g.cancel, v.text = g.text, v.fill = g.fill, v.shape = g.shape, v.textSize = xi(v.text, i.textStyle), v.render && "" !== v.text && (m = !0, u = l + s + v.textSize.width + o, this.isVertical ? (p = ++d * (this.maxItemHeight + o) + o, d * (this.maxItemHeight + o) + o > t.height && (p = Math.max(p, d * (this.maxItemHeight + o) + o), h += a, c.push(a), this.totalPages = Math.max(d, this.totalPages || 1), a = 0, d = 1), a = Math.max(u, a)) : (h += u, t.width < o + h && (a = Math.max(a, h + o - u), 0 === d && u !== h && (d = 1), h = u, p = ++d * (this.maxItemHeight + o) + o))) } this.isVertical ? (h += a, this.isPaging = t.width < h + o, p = Math.max(p, (this.totalPages || 1) * (this.maxItemHeight + o) + o), this.isPaging = this.isPaging && this.totalPages > 1, c[c.length - 1] !== a && c.push(a)) : (this.isPaging = t.height < p, this.totalPages = this.totalRowCount = d, p = Math.max(p, this.maxItemHeight + o + o)), this.maxColumns = 0; var w = this.isVertical ? this.getMaxColumn(c, t.width, o, h + o) : Math.max(h + o, a); m ? this.setBounds(w, p, i, t) : this.setBounds(0, 0, i, t) }, t.prototype.getMaxColumn = function (e, t, i, n) { var r = i; this.maxColumnWidth = Math.max.apply(null, e); for (var o = 0, s = e; o < s.length; o++) { s[o]; if (r += this.maxColumnWidth, this.maxColumns++ , r + i > t) { r -= this.maxColumnWidth, this.maxColumns--; break } } return this.isPaging = r < n && this.totalPages > 1, r === i && (r = t), this.maxColumns = Math.max(1, this.maxColumns), this.maxWidth = r, r }, t.prototype.getAvailWidth = function (e, t, i) { return this.isVertical && (t = this.maxWidth), t - (2 * this.legend.padding + this.legend.shapeWidth + this.legend.shapePadding) }, t.prototype.getRenderPoint = function (e, t, i, n, r, o, s) { var a = this.legend.padding; if (this.isVertical) o === s || n.location.y + 1.5 * this.maxItemHeight + 2 * a > r.y + r.height ? (e.location.x = n.location.x + (o === s ? 0 : this.maxColumnWidth), e.location.y = t.y, this.pageXCollections.push(e.location.x - this.legend.shapeWidth / 2 - a), this.totalPages++) : (e.location.x = n.location.x, e.location.y = n.location.y + this.maxItemHeight + a); else { var l = n.location.x + i + n.textSize.width; l + (e.textSize.width + i) > r.x + r.width + this.legend.shapeWidth / 2 ? (e.location.y = o === s ? n.location.y : n.location.y + this.maxItemHeight + a, e.location.x = t.x) : (e.location.y = n.location.y, e.location.x = o === s ? n.location.x : l), this.totalPages = this.totalRowCount } var h = this.getAvailWidth(e.location.x, this.legendBounds.width, this.legendBounds.x); e.text = Qn(+h.toFixed(4), e.text, this.legend.textStyle) }, t.prototype.getSmartLegendLocation = function (e, t, i) { var n; switch (this.position) { case "Left": n = (e.x - t.width - i.left) / 2, t.x = e.x - t.width < i.left ? t.x : e.x - t.width - n; break; case "Right": n = (this.chart.availableSize.width - i.right - (e.x + e.width + t.width)) / 2, t.x = e.x + e.width + t.width > this.chart.availableSize.width - i.right ? t.x : e.x + e.width + n; break; case "Top": this.getTitleRect(this.chart), n = (e.y - t.height - (this.titleRect.y + this.titleRect.height)) / 2, t.y = e.y - t.height < i.top ? t.y : e.y - t.height - n; break; case "Bottom": n = (this.chart.availableSize.height - i.bottom - (e.y + e.height + t.height)) / 2, t.y = e.y + e.height + t.height > this.chart.availableSize.height - i.bottom ? t.y : e.y + e.height + n } }, t.prototype.getTitleRect = function (e) { if (!e.title) return null; var t = xi(e.title, e.titleStyle); this.titleRect = new ej(e.availableSize.width / 2 - t.width / 2, e.margin.top, t.width, t.height) }, t.prototype.legendByIndex = function (e, t) { for (var i = 0, n = t; i < n.length; i++) { var r = n[i]; if (r.pointIndex === e) return r } return null }, t.prototype.click = function (e) { var t = e.target.id, i = this.chart, n = [this.legendID + "_text_", this.legendID + "_shape_", this.legendID + "_shape_marker_"]; this.chart.accumulationSelectionModule && h([], this.chart.accumulationSelectionModule.selectedDataIndexes, null, !0), this.chart.animateSeries = !1; for (var r = 0, o = n; r < o.length; r++) { var s = o[r]; if (t.indexOf(s) > -1) { var a = parseInt(t.split(s)[1], 10); if (this.chart.legendSettings.toggleVisibility && !isNaN(a)) { var l = this.chart.visibleSeries[0], d = hr(a, l.points), c = this.legendByIndex(a, this.legendCollections); d.visible = !d.visible, c.visible = d.visible, l.sumOfPoints += d.visible ? d.y : -d.y, i.redraw = i.enableAnimation, this.sliceVisibility(a, d.visible), i.removeSvg(), this.chart.refreshPoints(l.points), this.chart.renderElements() } else this.chart.accumulationSelectionModule && !isNaN(a) && this.chart.accumulationSelectionModule.legendSelection(this.chart, 0, a) } } t.indexOf(this.legendID + "_pageup") > -1 ? this.changePage(e, !0) : t.indexOf(this.legendID + "_pagedown") > -1 && this.changePage(e, !1), i.redraw = !1 }, t.prototype.sliceVisibility = function (e, t) { var i = this.chart.element.id + "_Series_0_Point_"; this.chart.visibleSeries[0].dataLabel.visible && (i = this.chart.element.id + "_datalabel_Series_0_", this.sliceAnimate(Sn(i + "g_" + e), t)) }, t.prototype.sliceAnimate = function (e, t) { if (!e) return null; new fw({}).animate(e, { duration: 300, delay: 0, name: t ? "FadeIn" : "FadeOut", end: function (e) { e.element.style.visibility = t ? "visible" : "hidden" } }) }, t.prototype.getModuleName = function () { return "AccumulationLegend" }, t.prototype.destroy = function (e) { }, t }(BI), hF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dF = function (e) { function t(t) { var i = e.call(this, t) || this; if (i.id = t.element.id + "_datalabel_Series_", t.title) { var n = xi(t.title, t.titleStyle); i.titleRect = new ej(t.availableSize.width / 2 - n.width / 2, t.margin.top, n.width, n.height) } return i } return hF(t, e), t.prototype.getDataLabelPosition = function (e, t, i, n, r, o) { var s = this.isCircular() ? this.isVariousRadius() ? this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0], e) : this.accumulation.pieSeriesModule.labelRadius : this.getLabelDistance(e, t); this.getLabelRegion(e, t.position, i, s, this.marginValue), e.labelAngle = e.midAngle, e.labelPosition = t.position, this.accumulation.enableSmartLabels && this.getSmartLabel(e, t, i, n, r, o) }, t.prototype.getLabelRegion = function (e, t, i, n, r, o) { void 0 === o && (o = 0); var s = o || e.midAngle, a = qi(s, n, this.isCircular() ? this.center : this.getLabelLocation(e, t)); a.y = "Inside" === t ? a.y - i.height / 2 : a.y, a.x = "Inside" === t ? a.x - i.width / 2 : a.x, e.labelRegion = new ej(a.x, a.y, i.width + 2 * r, i.height + 2 * r), "Outside" === t && (e.labelRegion.y -= e.labelRegion.height / 2, s >= 90 && s <= 270 ? e.labelRegion.x -= e.labelRegion.width + 10 : e.labelRegion.x += 10) }, t.prototype.getSmartLabel = function (e, t, i, n, r, o) { var s = this.isCircular(), a = s ? this.radius : this.getLabelDistance(e, t); a += Jn(s ? t.connectorStyle.length || "4%" : "0px", a); var l = this.findPreviousPoint(n, e.index, e.labelPosition); if ("Inside" === t.position ? (l && l.labelRegion && (Bn(e.labelRegion, l.labelRegion) || this.isOverlapping(e, n)) || !s && !Fn(e.region, e.labelRegion)) && (e.labelPosition = "Outside", s || (a = this.getLabelDistance(e, t)), this.getLabelRegion(e, e.labelPosition, i, a, this.marginValue), (l = this.findPreviousPoint(n, e.index, e.labelPosition)) && (Bn(e.labelRegion, l.labelRegion) || this.isConnectorLineOverlapping(e, l)) && this.setOuterSmartLabel(l, e, t.border.width, a, i, this.marginValue)) : l && l.labelRegion && (Bn(e.labelRegion, l.labelRegion) || this.isOverlapping(e, n) || this.isConnectorLineOverlapping(e, l)) && this.setOuterSmartLabel(l, e, t.border.width, a, i, this.marginValue), this.isOverlapping(e, n) && ("Pyramid" === this.accumulation.type || "Funnel" === this.accumulation.type)) { var h = "OutsideLeft", d = e.midAngle || 0, c = s ? this.radius : this.getLabelDistance(e, t), p = qi(d, -c, this.isCircular() ? this.center : this.getLabelLocation(e, h)); e.labelRegion = new ej(p.x, p.y, i.width + 2 * this.marginValue, i.height + 2 * this.marginValue), e.labelRegion.y -= e.labelRegion.height / 2, e.labelRegion.x = e.labelRegion.x - 10 - e.labelRegion.width, l && l.labelRegion && (Bn(e.labelRegion, l.labelRegion) || this.isOverlapping(e, n) || this.isConnectorLineOverlapping(e, l)) && this.setOuterSmartLabel(l, e, t.border.width, c, i, this.marginValue) } if ((this.isOverlapping(e, n) || this.titleRect && e.labelRegion && Bn(e.labelRegion, this.titleRect)) && this.setPointVisibileFalse(e), this.accumulation.accumulationLegendModule && e.labelVisible && e.labelRegion) { var u = this.accumulation.accumulationLegendModule.legendBounds, g = this.accumulation.legendSettings.border.width / 2; this.textTrimming(e, new ej(u.x - g, u.y - g, u.width + 2 * g, u.height + 2 * g), t.font, this.accumulation.accumulationLegendModule.position) } if (e.labelVisible && e.labelRegion) { h = this.isCircular() ? e.labelRegion.x >= this.center.x ? "InsideRight" : "InsideLeft" : e.labelRegion.x >= e.region.x ? "InsideRight" : "InsideLeft"; this.textTrimming(e, this.areaRect, t.font, h) } e.labelVisible && e.labelRegion && (e.labelRegion.y + e.labelRegion.height > this.areaRect.y + this.areaRect.height || e.labelRegion.y < this.areaRect.y || e.labelRegion.x < this.areaRect.x || e.labelRegion.x + e.labelRegion.width > this.areaRect.x + this.areaRect.width) && this.setPointVisibileFalse(e) }, t.prototype.move = function (e, t, i, n) { var r = this; if (e.target.textContent.indexOf("...") > -1) { var o = e.target.id.split(this.id); if (2 === o.length) { var s = parseInt(o[1].split("_text_")[0], 10), a = parseInt(o[1].split("_text_")[1], 10); if (!isNaN(s) && !isNaN(a)) { n && Oi(this.accumulation.element.id + "_EJ2_Datalabel_Tooltip"); var l = lr(s, this.accumulation.visibleSeries).points[a]; zi(l.text || l.y.toString(), t, i, this.areaRect.width, this.accumulation.element.id + "_EJ2_Datalabel_Tooltip", Sn(this.accumulation.element.id + "_Secondary_Element")) } } } else Oi(this.accumulation.element.id + "_EJ2_Datalabel_Tooltip"); n && (clearTimeout(this.clearTooltip), this.clearTooltip = +setTimeout(function () { Oi(r.accumulation.element.id + "_EJ2_Datalabel_Tooltip") }, 1e3)) }, t.prototype.findPreviousPoint = function (e, t, i) { for (var n = e[0], r = t - 1; r >= 0; r--)if ((n = e[r]).visible && n.labelVisible && n.labelRegion && n.labelPosition === i) return n; return null }, t.prototype.isOverlapping = function (e, t) { for (var i = e.index - 1; i >= 0; i--)if (t[i].visible && t[i].labelVisible && t[i].labelRegion && e.labelRegion && e.labelVisible && Bn(e.labelRegion, t[i].labelRegion)) return !0; return !1 }, t.prototype.textTrimming = function (e, t, i, n) { if (Bn(e.labelRegion, t)) { var r = e.labelRegion.width; "Right" === n ? r = t.x - e.labelRegion.x : "Left" === n ? (r = e.labelRegion.x - (t.x + t.width)) < 0 && (r += e.labelRegion.width, e.labelRegion.x = t.x + t.width) : "InsideRight" === n ? r = t.x + t.width - e.labelRegion.x : "InsideLeft" === n ? (r = e.labelRegion.x + e.labelRegion.width - t.x) < e.labelRegion.width && (e.labelRegion.x = t.x) : this.setPointVisibileFalse(e), e.labelVisible && e.labelRegion && (r < e.labelRegion.width && (e.label = Qn(r - 2 * this.marginValue, e.label, i), e.labelRegion.width = r), 3 === e.label.length && e.label.indexOf("...") > -1 && this.setPointVisibileFalse(e)) } }, t.prototype.setPointVisibileFalse = function (e) { e.labelVisible = !1, e.labelRegion = null }, t.prototype.setOuterSmartLabel = function (e, t, i, n, r, o) { if (this.isCircular()) { var s = this.getOverlappedAngle(e.labelRegion, t.labelRegion, t.midAngle, 2 * i); for (this.getLabelRegion(t, "Outside", r, n, o, s), s > t.endAngle && this.setPointVisibileFalse(t), t.labelAngle = s; t.labelVisible && (Bn(e.labelRegion, t.labelRegion) || s <= e.labelAngle || this.isConnectorLineOverlapping(t, e));) { if (s > t.endAngle) { this.setPointVisibileFalse(t); break } t.labelAngle = s, this.getLabelRegion(t, "Outside", r, n, o, s), s += .1 } } else this.setSmartLabelForSegments(t, e, n, r, o) }, t.prototype.setSmartLabelForSegments = function (e, t, i, n, r) { var o = e.labelRegion, s = "Funnel" === this.accumulation.type ? t.labelRegion.y - (o.y + o.height) : e.labelRegion.y - (t.labelRegion.y + t.labelRegion.height); s < 0 && (e.labelRegion.y += "Funnel" === this.accumulation.type ? s : -s) }, t.prototype.isConnectorLineOverlapping = function (e, t) { var i; !this.isCircular() && e.labelRegion.x < e.region.x && (i = "outsideLeft"); var n = this.getLabelLocation(e, i), r = new dI(0, 0); this.getEdgeOfLabel(e.labelRegion, e.labelAngle, r, 0, e); var o = this.getLabelLocation(t), s = new dI(0, 0); return this.getEdgeOfLabel(t.labelRegion, t.labelAngle, s, 0, e), this.isLineRectangleIntersect(n, r, e.labelRegion) || this.isLineRectangleIntersect(n, r, t.labelRegion) || this.isLineRectangleIntersect(o, s, e.labelRegion) }, t.prototype.isLineRectangleIntersect = function (e, t, i) { var n = [new dI(Math.round(i.x), Math.round(i.y)), new dI(Math.round(i.x + i.width), Math.round(i.y)), new dI(Math.round(i.x + i.width), Math.round(i.y + i.height)), new dI(Math.round(i.x), Math.round(i.y + i.height))]; e.x = Math.round(e.x), e.y = Math.round(e.y), t.x = Math.round(t.x), t.y = Math.round(t.y); for (var r = 0; r < n.length; r++)if (this.isLinesIntersect(e, t, n[r], n[(r + 1) % n.length])) return !0; return !1 }, t.prototype.isLinesIntersect = function (e, t, i, n) { var r = t.y - e.y, o = e.x - t.x, s = r * e.x + o * e.y, a = n.y - i.y, l = i.x - n.x, h = a * i.x + l * i.y, d = r * l - a * o; if (0 !== d) { var c = (l * s - o * h) / d, p = (r * h - a * s) / d, u = Math.min(e.x, t.x) <= c && c <= Math.max(e.x, t.x); return u = u && Math.min(e.y, t.y) <= p && p <= Math.max(e.y, t.y), u = u && Math.min(i.x, n.x) <= c && c <= Math.max(i.x, n.x), u = u && Math.min(i.y, n.y) <= p && p <= Math.max(i.y, n.y) } return !1 }, t.prototype.getOverlappedAngle = function (e, t, i, n) { var r = e.x; return i >= 90 && i <= 270 ? (t.y = e.y - (n + t.height / 2), r = e.x + e.width) : t.y = e.y + e.height + n, Gi(this.center, new dI(r, t.y)) }, t.prototype.getConnectorPath = function (e, t, i, n) { void 0 === n && (n = 0); var r = i.connectorStyle, o = this.isCircular() ? this.isVariousRadius() ? this.accumulation.pieSeriesModule.getLabelRadius(this.accumulation.visibleSeries[0], t) : this.labelRadius : this.getLabelDistance(t, i), s = this.getConnectorStartPoint(t, r), a = n || t.midAngle, l = new dI(0, 0), h = this.getEdgeOfLabel(e, a, l, r.width, t); if ("Curve" === r.type) { if (this.isCircular()) { return l = qi(a, o - (o - (this.isVariousRadius() ? Jn(t.sliceRadius, this.accumulation.pieSeriesModule.seriesRadius) : this.radius)) / 2, this.center), "M " + s.x + " " + s.y + " Q " + l.x + " " + l.y + " " + h.x + " " + h.y } return this.getPolyLinePath(s, h) } return "M " + s.x + " " + s.y + " L " + l.x + " " + l.y + " L " + h.x + " " + h.y }, t.prototype.getPolyLinePath = function (e, t) { var i = [e, t]; if (e.y === t.y) return "M " + e.x + " " + e.y + " L " + t.x + " " + t.y; for (var n = "M", r = 0; r <= 16; r++) { var o = r / 16, s = this.getBezierPoint(o, i, 0, 2); n += s.x + "," + s.y, 16 !== r && (n += " L") } return n }, t.prototype.getBezierPoint = function (e, t, i, n) { if (1 === n) return t[i]; var r = this.getBezierPoint(e, t, i, n - 1), o = this.getBezierPoint(e, t, i + 1, n - 1), s = (r.x, r.x), a = (r.y, r.y), l = (1 - e) * s + e * (o.x, o.x), h = (1 - e) * a + e * (o.y, o.y); return r.x, { x: l, y: h } }, t.prototype.getEdgeOfLabel = function (e, t, i, n, r) { void 0 === n && (n = 1); var o = new dI(e.x, e.y); return t >= 90 && t <= 270 ? (o.x += e.width + n / 2, o.y += e.height / 2, i.x = o.x + 10, i.y = o.y) : r && r.region && r.region.x > r.labelRegion.x ? (o.x += 2 * n + e.width, o.y += e.height / 2, i.x = o.x + 10, i.y = o.y) : (o.x -= n / 2, o.y += e.height / 2, i.x = o.x - 10, i.y = o.y), o }, t.prototype.getLabelDistance = function (e, t) { if (e.labelPosition && t.position !== e.labelPosition || t.connectorStyle.length) { var i = Jn(t.connectorStyle.length || "70px", this.accumulation.initialClipRect.width); if (i < this.accumulation.initialClipRect.width) return i } var n, r = e.labelPosition || t.position, o = this.accumulation.visibleSeries[0], s = (this.accumulation.initialClipRect.width - o.triangleSize.width) / 2; switch (r) { case "Inside": return 0; case "Outside": return n = e.symbolLocation.x + e.labelOffset.x, this.accumulation.initialClipRect.width - n - s } }, t.prototype.getLabelLocation = function (e, t) { if (void 0 === t && (t = "Outside"), "Pie" !== this.accumulation.type) { t = "OutsideLeft" === t ? "OutsideLeft" : e.labelPosition || t; var i = { x: e.symbolLocation.x, y: e.symbolLocation.y - e.labelOffset.y }; switch (t) { case "Inside": i.y = e.region.y + e.region.height / 2; break; case "Outside": i.x += e.labelOffset.x; break; case "OutsideLeft": i.x -= e.labelOffset.x }return i } return qi(e.midAngle, this.isVariousRadius() ? Jn(e.sliceRadius, this.accumulation.pieSeriesModule.seriesRadius) : this.radius, this.center) }, t.prototype.getConnectorStartPoint = function (e, t) { var i; return !this.isCircular() && e.region.x > e.labelRegion.x && (i = "OutsideLeft"), this.isCircular() ? qi(e.midAngle, (this.isVariousRadius() ? Jn(e.sliceRadius, this.accumulation.pieSeriesModule.seriesRadius) : this.radius) - t.width, this.center) : this.getLabelLocation(e, i) }, t.prototype.findAreaRect = function () { this.areaRect = new ej(0, 0, this.accumulation.availableSize.width, this.accumulation.availableSize.height); var e = this.accumulation.margin; Yi(this.areaRect, new cI(e.left, e.right, e.top, e.bottom)) }, t.prototype.renderDataLabel = function (e, t, i, r, o, s, a) { var l = this.accumulation.element.id + "_datalabel_Series_" + o + "_", d = this.accumulation.renderer.createGroup({ id: l + "g_" + e.index }); e.label = e.originalText || e.y.toString(); var c = { width: t.border.width, color: t.border.color }, p = h({}, n("properties", t.font), null, !0), u = { cancel: !1, name: fj, series: this.accumulation.visibleSeries[0], point: e, text: e.label, border: c, color: t.fill, template: t.template, font: p }; this.accumulation.trigger(fj, u); var g = null !== u.template; e.labelVisible = !u.cancel, e.text = e.label = u.text, Number(e.label) && (e.label = this.accumulation.intl.formatNumber(+e.label, { useGrouping: this.accumulation.useGroupingSeparator })), this.marginValue = u.border.width ? 5 + u.border.width : 1; var m = M("div", { id: this.accumulation.element.id + "_Series_0_DataLabel_" + e.index, styles: "position: absolute;background-color:" + u.color + ";" + Dn(t.font) + ";border:" + u.border.width + "px solid " + u.border.color + ";" }), f = g ? this.getTemplateSize(m, e, u, a) : xi(e.label, t.font); f.height += 4, f.width += 4, this.getDataLabelPosition(e, t, f, r, d, l); var y, v; if (e.labelVisible) { if (this.correctLabelRegion(e.labelRegion, f), g) this.setTemplateStyle(m, e, s, t.font.color, u.color, a); else { y = new dI(e.labelRegion.x + this.marginValue, e.labelRegion.y + 3 * f.height / 4 + this.marginValue); var w = (v = Sn(l + "shape_" + e.index)) ? new dI(+v.getAttribute("x"), +v.getAttribute("y")) : null; kn(!1, d, this.accumulation.renderer.drawRectangle(new aI(l + "shape_" + e.index, u.color, u.border, 1, e.labelRegion, t.rx, t.ry)), a, !0, "x", "y", w, null, !1, !1, null, this.accumulation.duration), $n(this.accumulation.renderer, new nj(l + "text_" + e.index, y.x, y.y, "start", e.label, "", "auto"), u.font, u.font.color || this.getSaturatedColor(e, u.color), d, !1, a, !0, !1, this.accumulation.duration), v = null } if (this.accumulation.accumulationLegendModule && ("Outside" === t.position || this.accumulation.enableSmartLabels) && this.accumulation.visibleSeries[0].findMaxBounds(this.accumulation.visibleSeries[0].labelBound, e.labelRegion), "Outside" === e.labelPosition) { var b = Sn(l + "connector_" + e.index), C = b ? b.getAttribute("d") : ""; kn(!1, d, this.accumulation.renderer.drawPath(new rj(l + "connector_" + e.index, "transparent", t.connectorStyle.width, t.connectorStyle.color || e.color, 1, t.connectorStyle.dashArray, this.getConnectorPath(h({}, e.labelRegion, null, !0), e, t, e.labelAngle))), a, !0, null, null, null, C, !1, !1, null, this.accumulation.duration) } kn(!1, i, d, a) } }, t.prototype.getTemplateSize = function (e, t, i, n) { var r; return e = Tn(e, t.index, i.template, this.accumulation, t, this.accumulation.visibleSeries[0]), r = An(e, n), { width: r.width, height: r.height } }, t.prototype.setTemplateStyle = function (e, t, i, n, r, o) { e.style.left = t.labelRegion.x + "px", e.style.top = t.labelRegion.y + "px", e.style.color = n || this.getSaturatedColor(t, r), e.childElementCount && (kn(!1, i, e, o, !0, "left", "top"), this.doTemplateAnimation(this.accumulation, e)) }, t.prototype.getSaturatedColor = function (e, t) { var i, n = _n(Yn(i = "transparent" === (i = this.marginValue >= 1 ? "transparent" === t ? this.getLabelBackground(e) : t : this.getLabelBackground(e)) ? window.getComputedStyle(document.body, null).backgroundColor : i)); return Math.round((299 * n.r + 587 * n.g + 114 * n.b) / 1e3) >= 128 ? "black" : "white" }, t.prototype.doTemplateAnimation = function (e, t) { var i = e.visibleSeries[0], n = i.animation.delay + i.animation.duration; i.animation.enable && e.animateSeries && (t.style.visibility = "hidden", wn(t, n, 200, "ZoomIn")) }, t.prototype.getLabelBackground = function (e) { return "Outside" === e.labelPosition ? this.accumulation.background || this.accumulation.themeStyle.background : e.color }, t.prototype.correctLabelRegion = function (e, t, i) { void 0 === i && (i = 4), e.height -= i, e.width -= i, e.x += i / 2, e.y += i / 2, t.height -= i, t.width -= i }, t.prototype.getModuleName = function () { return "AccumulationDataLabel" }, t.prototype.destroy = function (e) { }, t }(GB), cF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pF = function (e) { function t(t) { var i = e.call(this, t) || this; return i.accumulation = t, i.addEventListener(), i } return cF(t, e), t.prototype.addEventListener = function () { this.accumulation.isDestroyed || (this.accumulation.on(uw.isPointer ? "pointerleave" : "mouseleave", this.mouseLeaveHandler, this), this.accumulation.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.accumulation.on(uw.touchEndEvent, this.mouseUpHandler, this)) }, t.prototype.mouseLeaveHandler = function (e) { this.removeTooltip(1e3) }, t.prototype.mouseUpHandler = function (e) { var t = this.accumulation; t.tooltip.enable && t.isTouch && nn(t.mouseX, t.mouseY, t.initialClipRect) && (this.tooltip(e), this.removeTooltip(2e3)) }, t.prototype.mouseMoveHandler = function (e) { var t = this.accumulation; t.tooltip.enable && nn(t.mouseX, t.mouseY, t.initialClipRect) && this.tooltip(e) }, t.prototype.tooltip = function (e) { var t = this.getElement(this.element.id + "_tooltip_svg"), i = t && parseInt(t.getAttribute("opacity"), 10) > 0, n = this.getTooltipElement(i); this.renderSeriesTooltip(e, this.accumulation, !i, n) }, t.prototype.renderSeriesTooltip = function (e, t, i, n) { var r = this.getPieData(e, t, t.mouseX, t.mouseY), o = t.initialClipRect; this.currentPoints = [], !r.point || this.previousPoints[0] && this.previousPoints[0].point === r.point ? !r.point && this.isRemove && (this.removeTooltip(1e3), this.isRemove = !1) : this.pushData(r, i, n, !1) && (this.triggerEvent(r, i, this.getTooltipText(r, t.tooltip)) ? this.createTooltip(t, i, this.findHeader(r), r.point.symbolLocation, r.series.clipRect, r.point, ["Circle"], 0, o, null, r.point) : (this.removeHighlight(this.control), k(this.getElement(this.element.id + "_tooltip"))), this.isRemove = !0) }, t.prototype.getPieData = function (e, t, i, n) { var r = Zi(e.target.id, !0); if (!isNaN(r.series)) { var o = r.series, s = r.point; if (!(d(o) || isNaN(o) || d(s) || isNaN(s))) { var a = this.getSeriesFromIndex(o, t.visibleSeries); if (a.enableTooltip) return new gI(a.points[s], a) } } return new gI(null, null) }, t.prototype.getSeriesFromIndex = function (e, t) { return t[0] }, t.prototype.getTooltipText = function (e, t) { var i = e.series, n = this.accumulation.useGroupingSeparator ? "${point.x} : <b>${point.label}</b>" : "${point.x} : <b>${point.y}</b>"; return n = t.format ? t.format : n, this.parseTemplate(e.point, i, n) }, t.prototype.findHeader = function (e) { return "" === this.header ? "" : (this.header = this.parseTemplate(e.point, e.series, this.header), "" !== this.header.replace(/<b>/g, "").replace(/<\/b>/g, "").trim() ? this.header : "") }, t.prototype.parseTemplate = function (e, t, i) { for (var n, r, o = 0, s = Object.keys(e); o < s.length; o++) { var a = s[o]; n = new RegExp("${point." + a + "}", "gm"), i = i.replace(n.source, e[a]) } for (var l = 0, h = Object.keys(Object.getPrototypeOf(t)); l < h.length; l++) { a = h[l]; n = new RegExp("${series." + a + "}", "gm"), r = t[a], i = i.replace(n.source, r) } return i }, t.prototype.getModuleName = function () { return "AccumulationTooltip" }, t.prototype.destroy = function (e) { }, t }(pB), uF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gF = function (e) { function t(t) { var i = e.call(this, t) || this; return i.renderer = t.renderer, i } return uF(t, e), t.prototype.initPrivateVariables = function (e) { this.styleId = e.element.id + "_ej2_chart_selection", this.unselected = e.element.id + "_ej2_deselected", this.selectedDataIndexes = [], this.rectPoints = null }, t.prototype.invokeSelection = function (e) { this.initPrivateVariables(e), this.series = h({}, e.visibleSeries, null, !0), this.seriesStyles(), this.selectDataIndex(this.concatIndexes(e.selectedDataIndexes, this.selectedDataIndexes), e) }, t.prototype.generateStyle = function (e) { return e.selectionStyle || this.styleId + "_series_" + e.index }, t.prototype.findElements = function (e, t, i) { return [this.getElementByIndex(i)] }, t.prototype.getElementByIndex = function (e) { var t = this.control.element.id + "_Series_" + e.series + "_Point_" + e.point; return document.getElementById(t) }, t.prototype.calculateSelectedElements = function (e, t) { -1 !== t.target.id.indexOf(e.element.id + "_") && (t.target.id.indexOf("_Series_") > -1 || t.target.id.indexOf("_datalabel_") > -1) && this.performSelection(Zi(t.target.id), e, t.target) }, t.prototype.performSelection = function (e, t, i) { switch (i = i.id.indexOf("datalabel") > -1 ? t.getSeriesElement().childNodes[e.series].childNodes[e.point] : i, t.selectionMode) { case "Point": isNaN(e.point) || (this.selection(t, e, [i]), this.blurEffect(t.element.id, t.visibleSeries)) } }, t.prototype.selection = function (e, t, i) { e.isMultiSelect || this.removeMultiSelectEelments(e, this.selectedDataIndexes, t, e.series); var n = i[0] && (i[0].getAttribute("class") || ""); i[0] && n.indexOf(this.getSelectionClass(i[0].id)) > -1 ? (this.removeStyles(i, t), this.addOrRemoveIndex(this.selectedDataIndexes, t)) : (this.applyStyles(i, t), this.addOrRemoveIndex(this.selectedDataIndexes, t, !0)) }, t.prototype.redrawSelection = function (e, t) { var i = h([], this.selectedDataIndexes, null, !0); this.removeSelectedElements(e, this.selectedDataIndexes), this.blurEffect(e.element.id, e.visibleSeries), this.selectDataIndex(i, e) }, t.prototype.removeSelectedElements = function (e, t) { e.getSeriesElement(); for (var i = 0, n = t; i < n.length; i++) { var r = n[i]; this.removeStyles([this.getElementByIndex(r)], r) } }, t.prototype.legendSelection = function (e, t, i) { e.getSeriesElement().childNodes[t].childNodes[i], this.generateStyle(e.visibleSeries[t]); var n = e.getSeriesElement().childNodes[t].childNodes[i]; this.selection(e, new YE(t, i), [n]), this.blurEffect(e.element.id, e.visibleSeries) }, t.prototype.selectDataIndex = function (e, t) { for (var i, n = 0, r = e; n < r.length; n++) { var o = r[n]; (i = this.getElementByIndex(o)) && this.performSelection(o, t, i) } }, t.prototype.removeMultiSelectEelments = function (e, t, i, n) { for (var r, o = 0; o < t.length; o++)r = n[t[o].series], this.checkEquals(t[o], i) || (this.removeStyles(this.findElements(e, r, t[o]), t[o]), t.splice(o, 1), o--) }, t.prototype.blurEffect = function (e, t) { for (var i = this.checkPointVisibility(this.selectedDataIndexes), n = 0, r = t; n < r.length; n++) { var o = r[n]; o.visible && this.checkSelectionElements(document.getElementById(e + "_SeriesCollection"), this.generateStyle(o), i) } }, t.prototype.checkSelectionElements = function (e, t, i) { for (var n, r, o, s = e.childNodes[0].childNodes, a = 0; a < s.length; a++)r = s[a].getAttribute("class") || "", o = s[a].parentNode.getAttribute("class") || "", -1 === r.indexOf(t) && -1 === o.indexOf(t) && i ? this.addSvgClass(s[a], this.unselected) : this.removeSvgClass(s[a], this.unselected), this.control.accumulationLegendModule && this.control.legendSettings.visible && (n = document.getElementById(this.control.element.id + "_chart_legend_shape_" + a)) && (-1 === r.indexOf(t) && -1 === o.indexOf(t) && i ? this.addSvgClass(n, this.unselected) : this.removeSvgClass(n, this.unselected)) }, t.prototype.applyStyles = function (e, t) { for (var i = 0, n = e; i < n.length; i++) { var r = n[i], o = void 0; r && (this.control.accumulationLegendModule && this.control.legendSettings.visible && (o = document.getElementById(this.control.element.id + "_chart_legend_shape_" + t.point), this.removeSvgClass(o, this.unselected), this.addSvgClass(o, this.getSelectionClass(o.id))), this.removeSvgClass(r.parentNode, this.unselected), this.removeSvgClass(r, this.unselected), this.addSvgClass(r, this.getSelectionClass(r.id))) } }, t.prototype.getSelectionClass = function (e) { return this.generateStyle(this.control.series[Zi(e).series]) }, t.prototype.removeStyles = function (e, t) { for (var i, n = 0, r = e; n < r.length; n++) { var o = r[n]; o && (this.control.accumulationLegendModule && this.control.legendSettings.visible && (i = document.getElementById(this.control.element.id + "_chart_legend_shape_" + t.point), this.removeSvgClass(i, this.getSelectionClass(i.id))), this.removeSvgClass(o, this.getSelectionClass(o.id))) } }, t.prototype.addOrRemoveIndex = function (e, t, i) { for (var n = 0; n < e.length; n++)this.checkEquals(e[n], t) && (e.splice(n, 1), n--); i && e.push(t) }, t.prototype.checkEquals = function (e, t) { return e.point === t.point && e.series === t.series }, t.prototype.checkPointVisibility = function (e) { for (var t = !1, i = 0, n = e; i < n.length; i++) { if (hr(n[i].point, this.control.visibleSeries[0].points).visible) { t = !0; break } } return t }, t.prototype.getModuleName = function () { return "AccumulationSelection" }, t.prototype.destroy = function (e) { }, t }(yB), mF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), fF = function (e) { function t(t) { var i = e.call(this, t) || this; return i.pie = t, i } return mF(t, e), t.prototype.renderAnnotations = function (e) { var t = this; this.annotations = this.pie.annotations; var i = this.pie.redraw; this.parentElement = Zn(i, this.pie.element.id + "_Annotation_Collections") || M("div", { id: this.pie.element.id + "_Annotation_Collections" }), this.annotations.map(function (e, i) { t.processAnnotation(e, i, t.parentElement) }), In(this.parentElement, e, i) }, t.prototype.getModuleName = function () { return "Annotation" }, t.prototype.destroy = function (e) { }, t }(xB), yF = function () { return function (e, t, i, n, r) { void 0 === r && (r = !0), this.x = e, this.y = t, this.xValue = i, this.visible = r } }(), vF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), wF = function (e) { function t(t) { var i = e.call(this) || this; return i.dataSource = t.dataSource, i.xName = t.xName, i.yName = t.yName, i.query = t.query, i.xMin = 1 / 0, i.xMax = -1 / 0, i.yMin = 1 / 0, i.yMax = -1 / 0, i } return vF(t, e), t.prototype.renderChart = function (e) { var t, i, n = this; this.seriesLength = 0, e.rangeSlider.points = [], e.series.length ? e.series.map(function (r) { t = r.dataSource || e.dataSource, i = r.query || e.query, r.points = [], n.processDataSource(t, i, e, r) }) : this.processDataSource(e.dataSource, e.query, e) }, t.prototype.processDataSource = function (e, t, i, n) { var r = this; if (e instanceof aA || d(e) || !d(t)) { i.dataModule = new EI(e, t); i.dataModule.getData(i.dataModule.generateQuery().requiresCount()).then(function (e) { return r.dataManagerSuccess(e, i, n) }) } else this.dataManagerSuccess({ result: e, count: e.length }, i, n) }, t.prototype.dataManagerSuccess = function (e, t, i) { var n = e.count ? e.result : []; this.processJsonData(n, t, Object.keys(n).length, i), this.seriesLength += i ? 1 : this.seriesLength, i && this.seriesLength !== t.series.length || (this.processXAxis(t), this.calculateGroupingBounds(t), this.processYAxis(t), t.renderChart()) }, t.prototype.processJsonData = function (e, t, i, r) { for (var o, s = 0, a = r && r.xName || t.xName, l = r && r.yName || t.yName; s < i;) { if (o = new yF(n(a, e[s]), n(l, e[s])), o.yValue = +o.y, "DateTime" === t.valueType) { var h = t.intl.getDateParser({ skeleton: "full", type: "dateTime" }), d = t.intl.getDateFormat({ skeleton: "full", type: "dateTime" }); o.x = new Date(JD.parse.parseJson({ val: o.x }).val), o.xValue = Date.parse(h(d(o.x))) } else o.xValue = +o.x; r && r.points.push(o), this.xMin = Math.min(this.xMin, o.xValue), this.yMin = Math.min(this.yMin, o.yValue), this.xMax = Math.max(this.xMax, o.xValue), this.yMax = Math.max(this.yMax, o.yValue), t.rangeSlider.points.push(o), s++ } }, t.prototype.processXAxis = function (e) { var t, i = { minimum: e.minimum, maximum: e.maximum, interval: e.interval, valueType: e.valueType, isInversed: e.enableRtl, labelFormat: e.labelFormat, logBase: e.logBase, skeleton: e.skeleton, skeletonType: e.skeletonType }; this.xAxis = i, this.xAxis.intervalType = e.intervalType, this.xAxis.maximumLabels = 3, this.xAxis.skeleton = e.skeleton, this.xAxis.intervalDivs = [10, 5, 2, 1], this.xAxis.rect = e.bounds, this.xAxis.visibleLabels = [], this.xAxis.orientation = "Horizontal", (t = e[an(e.valueType) + "Module"]).min = this.xMin, t.max = this.xMax, t.getActualRange(this.xAxis, e.bounds), "Logarithmic" !== this.xAxis.valueType && t.updateActualRange(this.xAxis, this.xAxis.actualRange.min, this.xAxis.actualRange.max, this.xAxis.actualRange.interval), this.xAxis.actualRange.delta = this.xAxis.actualRange.max - this.xAxis.actualRange.min, this.xAxis.visibleRange = this.xAxis.actualRange, t.calculateVisibleLabels(this.xAxis, e) }, t.prototype.processYAxis = function (e) { this.yAxis = { majorGridLines: { width: 0 }, rangePadding: "None", majorTickLines: { width: 0 }, labelStyle: { size: "0" }, visible: !1, valueType: "Double", minimum: null, maximum: null, interval: null }, this.yAxis.rect = e.bounds, this.yAxis.maximumLabels = 3, this.yAxis.intervalDivs = [10, 5, 2, 1], this.yAxis.orientation = "Vertical", e.doubleModule.min = this.yMin, e.doubleModule.max = this.yMax, e.doubleModule.getActualRange(this.yAxis, e.bounds), e.doubleModule.updateActualRange(this.yAxis, this.yAxis.actualRange.min, this.yAxis.actualRange.max, this.yAxis.actualRange.interval), this.yAxis.actualRange.delta = this.yAxis.actualRange.max - this.yAxis.actualRange.min, this.yAxis.visibleRange = this.yAxis.actualRange }, t.prototype.renderSeries = function (e) { var t = this; this.chartGroup = e.renderer.createGroup({ id: e.element.id + "_chart" }); var i = Ci(e.theme); e.series.map(function (n, r) { n.xAxis = t.xAxis, n.yAxis = t.yAxis, n.chart = e, n.index = r, n.xAxis.isInversed = e.enableRtl, n.interior = n.fill || i[r % i.length], t.createSeriesElement(e, n, r), e[an(n.type) + "SeriesModule"] ? e[an(n.type) + "SeriesModule"].render(n, t.xAxis, t.yAxis, !1) : e.lineSeriesModule.render(n, t.xAxis, t.yAxis, !1), t.chartGroup.appendChild(n.seriesElement), n.animation.enable && e.animateSeries && e[an(n.type) + "SeriesModule"] && e[an(n.type) + "SeriesModule"].doAnimation(n) }) }, t.prototype.appendSeriesElements = function (e) { e.svgObject.appendChild(this.chartGroup), e.series.length && this.drawSeriesBorder(e, this.chartGroup) }, t.prototype.createSeriesElement = function (e, t, i) { var n = e.element.id; t.clipRect = new ej(this.xAxis.rect.x, this.yAxis.rect.y, this.xAxis.rect.width, this.yAxis.rect.height), t.clipRectElement = e.renderer.drawClipPath(new aI(n + "_RangeSeriesClipRect_" + i, "transparent", { width: 1, color: "Gray" }, 1, { x: 0, y: 0, width: t.clipRect.width, height: t.clipRect.height })), t.seriesElement = e.renderer.createGroup({ id: n + "SeriesGroup" + i, transform: "translate(" + t.clipRect.x + "," + t.clipRect.y + ")", "clip-path": "url(#" + n + "_RangeSeriesClipRect_" + i + ")" }), t.seriesElement.appendChild(t.clipRectElement) }, t.prototype.calculateGroupingBounds = function (e) { var t = e.margin.bottom, i = xi("string", e.labelStyle).height; this.calculateDateTimeNiceInterval(this.xAxis, new $E(e.bounds.width, e.bounds.height), this.xMin, this.xMax, !1), !e.enableGrouping || "DateTime" !== e.valueType || "Years" === this.xAxis.actualIntervalType && e.series.length || (e.bounds.height -= "Outside" === e.labelPosition || 0 === e.series.length ? t + i : i + 2 * t), e.series.length || (e.bounds.y += e.bounds.height / 4, e.bounds.height = e.bounds.height / 2) }, t.prototype.drawSeriesBorder = function (e, t) { var i = e.stockChart ? "M" : "L", n = e.stockChart ? "" : "Z", r = new rj(e.element.id + "_SeriesBorder", "transparent", e.navigatorBorder.width, e.navigatorBorder.color, 1, "", "M " + e.bounds.x + " " + e.bounds.y + " L " + (e.bounds.x + e.bounds.width) + " " + e.bounds.y + i + (e.bounds.x + e.bounds.width) + " " + (e.bounds.y + e.bounds.height) + " L " + e.bounds.x + " " + (e.bounds.y + e.bounds.height) + n), o = e.renderer.drawPath(r); e.svgObject.appendChild(o) }, t }(PR), bF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), CF = function (e) { function t(t) { var i = e.call(this) || this; return i.firstLevelLabels = [], i.secondLevelLabels = [], i.rangeNavigator = t, i } return bF(t, e), t.prototype.renderGridLines = function () { var e, t = 0, i = this.rangeNavigator, n = i.majorGridLines, r = i.majorTickLines, o = "", s = "", a = i.bounds, l = i.chartSeries.xAxis, h = (l.visibleRange, i.disableRangeSelector ? "transparent" : null); this.gridLines = i.renderer.createGroup({ id: i.element.id + "_GridLines" }); var d = "Outside" === i.tickPosition || 0 === i.series.length ? a.y + a.height + r.height : a.y + a.height - r.height; this.firstLevelLabels = [], l.labelStyle = i.labelStyle, l.skeleton = i.skeleton, l.skeletonType = i.skeletonType, l.isChart = !1, "DateTime" === i.valueType && (this.calculateDateTimeNiceInterval(l, a, l.doubleRange.start, l.doubleRange.end, l.isChart), this.actualIntervalType = l.actualIntervalType, this.findAxisLabels(l)), this.firstLevelLabels = l.visibleLabels, this.lowerValues = [], e = l.visibleLabels.length; for (var c = 0; c < e; c++)this.lowerValues.push(this.firstLevelLabels[c].value), (t = Xi(this.firstLevelLabels[c].value, l) * a.width + a.x) >= a.x && a.x + a.width >= t && (o = o.concat("M " + t + " " + (i.bounds.y + i.bounds.height) + " L " + t + " " + i.bounds.y + " "), s = s.concat("M " + t + " " + (a.y + a.height) + " L " + t + " " + d + " ")); var p = new rj(i.element.id + "_MajorGridLine", "transparent", n.width, i.series.length ? h || n.color || i.themeStyle.gridLineColor : "transparent", 1, n.dashArray, o); this.gridLines.appendChild(i.renderer.drawPath(p)), p = new rj(i.element.id + "_MajorTickLine", "transparent", r.width, h || r.color || i.themeStyle.gridLineColor, 1, n.dashArray, s), this.gridLines.appendChild(i.renderer.drawPath(p)) }, t.prototype.renderAxisLabels = function () { var e, t = this.rangeNavigator.chartSeries.xAxis, i = this.rangeNavigator, n = (i.bounds, i.renderer.createGroup({ id: i.element.id + "_AxisLabels" })), r = i.renderer.createGroup({ id: i.element.id + "_FirstLevelAxisLabels" }), o = i.renderer.createGroup({ id: i.element.id + "_SecondLevelAxisLabels" }), s = t; if (e = this.findLabelY(i, !1), this.placeAxisLabels(t, e, "_AxisLabel_", i, r), s.intervalType = s.actualIntervalType = i.groupBy || this.getSecondaryLabelType(t.actualIntervalType), i.enableGrouping && "DateTime" === i.valueType && "Years" !== this.actualIntervalType) { s.visibleRange.interval = 1, s.visibleLabels = [], this.findAxisLabels(s), this.secondLevelLabels = s.visibleLabels, e = this.findLabelY(i, !0); var a = this.placeAxisLabels(s, e, "_SecondaryLabel_", i, o), l = new rj(i.element.id + "_SecondaryMajorLines", "transparent", i.majorTickLines.width, i.majorTickLines.color || i.themeStyle.gridLineColor, 1, i.majorGridLines.dashArray, a); this.gridLines.appendChild(i.renderer.drawPath(l)) } i.chartSeries.xAxis.visibleLabels = i.chartSeries.xAxis.visibleLabels.concat(s.visibleLabels), n.appendChild(r), n.appendChild(o), i.svgObject.appendChild(this.gridLines), i.svgObject.appendChild(n) }, t.prototype.getSecondaryLabelType = function (e) { var t = ["Years", "Quarter", "Months", "Weeks", "Days", "Hours", "Minutes", "Seconds"]; return "Years" === e ? "Years" : t[t.indexOf(e) - 1] }, t.prototype.findAxisLabels = function (e) { e.visibleLabels = []; var t, i, n = new Date(e.visibleRange.min), r = this.rangeNavigator.interval ? this.rangeNavigator.interval : 1; switch (e.actualIntervalType) { case "Years": n = new Date(n.getFullYear().toString()); break; case "Quarter": n = n.getMonth() <= 2 ? new Date(n.getFullYear(), 0, 1) : n.getMonth() <= 5 ? new Date(n.getFullYear(), 3, 1) : n.getMonth() <= 8 ? new Date(n.getFullYear(), 6, 1) : new Date(n.getFullYear(), 9, 1); break; case "Months": n = new Date(n.getFullYear(), n.getMonth()); break; case "Weeks": n = new Date(n.getFullYear(), n.getMonth(), n.getDate() - n.getDay()); break; case "Days": n = new Date(n.getFullYear(), n.getMonth(), n.getDate()); break; case "Hours": n = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours()); break; case "Minutes": n = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), n.getMinutes()); break; case "Seconds": n = new Date(n.getFullYear(), n.getMonth(), n.getDate(), n.getHours(), n.getMinutes(), n.getSeconds()) }for (t = n.getTime(), this.rangeNavigator.format = this.rangeNavigator.intl.getDateFormat({ format: e.labelFormat, type: an(e.skeletonType), skeleton: this.getSkeleton(e, null, null) }); t < e.visibleRange.max;)i = this.dateFormats(this.rangeNavigator.format(new Date(t)), e, e.visibleLabels.length), e.visibleLabels.push(new tI(i, t, this.rangeNavigator.labelStyle, i)), t = this.increaseDateTimeInterval(e, t, r).getTime() }, t.prototype.dateFormats = function (e, t, i) { var n = e, r = this.rangeNavigator.enableGrouping && 0 === this.firstLevelLabels.length; switch (t.actualIntervalType) { case "Quarter": e.indexOf("Jan") > -1 ? n = r ? "Quarter1" : e.replace("Jan", "Quarter1") : e.indexOf("Apr") > -1 ? n = r ? "Quarter2" : e.replace("Apr", "Quarter2") : e.indexOf("Jul") > -1 ? n = r ? "Quarter3" : e.replace("Jul", "Quarter3") : e.indexOf("Oct") > -1 && (n = r ? "Quarter4" : e.replace("Oct", "Quarter4")); break; case "Weeks": n = "Week" + ++i; break; default: n = e }return n }, t.prototype.findLabelY = function (e, t) { var i, n = e.bounds.y + e.bounds.height, r = e.majorTickLines.height, o = xi("Quarter1 2011", e.labelStyle).height, s = 8; return i = "Outside" === e.labelPosition && "Outside" === e.tickPosition || 0 === e.series.length ? n + r + s + .75 * o : "Inside" === e.labelPosition && "Inside" === e.tickPosition ? n - r - s : "Inside" === e.labelPosition && "Outside" === e.tickPosition ? n - s : n + s + .75 * o, t && (s = 15, "Outside" === e.labelPosition || 0 === e.series.length ? i += s + .75 * o : i = "Outside" === e.tickPosition || 0 === e.series.length ? n + r + s + .75 * o : n + s + .75 * o), i }, t.prototype.placeAxisLabels = function (e, t, i, n, r) { var o, s, a, l, h = e.visibleLabels.length, d = n.bounds, c = "", p = n.disableRangeSelector ? "transparent" : null, u = n.enableRtl ? d.x + d.width : d.x, g = e.actualIntervalType, m = "DateTime" === n.valueType ? h > 1 ? e.visibleLabels[1].value - e.visibleLabels[0].value : (e.visibleRange.max - e.visibleLabels[0].value) / 2 : 0; "DateTime" !== n.valueType || "Quarter" !== g && "Weeks" !== g || this.findSuitableFormat(e, n); for (var f = 0, y = h; f < y; f++)if (o = e.visibleLabels[f], o.size = xi(o.text, e.labelStyle), "Middle" === n.secondaryLabelAlignment ? a = Xi(o.value + m / 2, e) * d.width + d.x : i.indexOf("Secondary") > -1 && (a = this.findAlignment(e, f)), l = Xi(o.value, e) * d.width + d.x, (0 === f || f === e.visibleLabels.length - 1 && n.enableRtl) && a < d.x && (a = d.x + o.size.width / 2), (f === e.visibleLabels.length - 1 || 0 === f && n.enableRtl) && a + o.size.width > d.x + d.width && (a = d.x + d.width - o.size.width / 2), i.indexOf("_SecondaryLabel_") > -1 && a >= d.x && d.x + d.width >= a && (c = c.concat("M " + l + " " + t + " L " + l + " " + (t - o.size.height))), "Hide" !== n.labelIntersectAction || 0 === f || !this.isIntersect(e, a, o.size.width, u, s.size.width)) { var v = void 0, w = n.labelStyle, b = { size: w.size, color: p || w.color || n.themeStyle.labelFontColor, fontFamily: w.fontFamily, fontStyle: w.fontStyle || n.labelStyle.fontStyle, fontWeight: w.fontWeight || n.labelStyle.fontWeight, opacity: w.opacity || n.labelStyle.opacity, textAlignment: w.textAlignment || n.labelStyle.textAlignment, textOverflow: w.textOverflow || n.labelStyle.textOverflow }; v = { cancel: !1, name: "labelRender", text: o.text, value: o.value, labelStyle: b, region: new ej(a, t, o.size.width, o.size.height) }, n.trigger("labelRender", v), v.cancel || (n.labels.push(v), $n(this.rangeNavigator.renderer, new nj(this.rangeNavigator.element.id + i + f, a, t, "middle", v.text), v.labelStyle, v.labelStyle.color || n.themeStyle.labelFontColor, r).setAttribute("style", "DateTime" === e.valueType ? "cursor: pointer" : "cursor: default"), u = a, s = o) } return c }, t.prototype.isIntersect = function (e, t, i, n, r) { return e.isInversed ? t + i / 2 > n - r / 2 : t - i / 2 < n + r / 2 }, t.prototype.findSuitableFormat = function (e, t) { for (var i, n, r = e.visibleLabels, o = r.length, s = t.bounds, a = "DateTime" === t.valueType ? o > 1 ? r[1].value - r[0].value : e.visibleRange.interval : 0, l = 0; l < o; l++)n = Xi(r[l].value + a / 2, e) * s.width + s.x, r[l].size = xi(r[l].text, e.labelStyle), 0 === l && n < s.x && (n = s.x + r[l].size.width / 2), "Quarter" === e.actualIntervalType ? 0 !== l && (r[l].text.indexOf("Quarter") > -1 && this.isIntersect(e, n, r[l].size.width, i, r[l - 1].size.width) ? (r.every(function (e) { return e.text = e.text.toString().replace("Quarter", "QTR"), !0 }), e.visibleLabels = r, this.findSuitableFormat(e, t)) : this.isIntersect(e, n, r[l].size.width, i, r[l - 1].size.width) && (r.every(function (e) { return e.text = e.text.toString().replace("QTR", "Q"), !0 }), e.visibleLabels = r)) : "Weeks" === e.actualIntervalType && 0 !== l && r[l].text.indexOf("Week") > -1 && this.isIntersect(e, n, r[l].size.width, i, r[l - 1].size.width) && (r.every(function (e) { return e.text = e.text.toString().replace("Week", "W"), !0 }), e.visibleLabels = r), i = n }, t.prototype.findAlignment = function (e, t) { var i = e.visibleLabels[t], n = e.visibleLabels[t + 1], r = this.rangeNavigator.bounds; return "Near" === this.rangeNavigator.secondaryLabelAlignment ? Xi(i.value, e) * r.width + r.x + i.size.width / 2 : Xi(n ? n.value : e.visibleRange.max, e) * r.width + r.x - i.size.width }, t }(OR); !function (e) { e.axisLabelFont = { size: "12px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, e.tooltipLabelFont = { size: "12px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" } }(nR || (nR = {})); var LF, MF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SF = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, xF = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.clipRect = new ej(0, 0, 0, 0), t } return MF(t, e), SF([Y(null)], t.prototype, "dataSource", void 0), SF([Y(null)], t.prototype, "xName", void 0), SF([Y(null)], t.prototype, "yName", void 0), SF([Y()], t.prototype, "query", void 0), SF([Y("Line")], t.prototype, "type", void 0), SF([U({ enable: !1 }, WE)], t.prototype, "animation", void 0), SF([U({ color: "transparent", width: 2 }, BE)], t.prototype, "border", void 0), SF([Y(null)], t.prototype, "fill", void 0), SF([Y(1)], t.prototype, "width", void 0), SF([Y(1)], t.prototype, "opacity", void 0), SF([Y("0")], t.prototype, "dashArray", void 0), t }(ww), TF = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return MF(t, e), SF([Y(null)], t.prototype, "width", void 0), SF([Y(null)], t.prototype, "height", void 0), SF([U({ width: 1, color: null }, BE)], t.prototype, "border", void 0), SF([Y(null)], t.prototype, "fill", void 0), SF([Y("Circle")], t.prototype, "type", void 0), t }(ww), DF = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return MF(t, e), SF([U({}, TF)], t.prototype, "thumb", void 0), SF([Y(null)], t.prototype, "selectedRegionColor", void 0), SF([Y(null)], t.prototype, "unselectedRegionColor", void 0), t }(ww), AF = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return MF(t, e), SF([Y(!1)], t.prototype, "enable", void 0), SF([Y(.85)], t.prototype, "opacity", void 0), SF([Y(null)], t.prototype, "fill", void 0), SF([Y(null)], t.prototype, "format", void 0), SF([U(nR.tooltipLabelFont, zE)], t.prototype, "textStyle", void 0), SF([Y(null)], t.prototype, "template", void 0), SF([U({ color: "#cccccc", width: .5 }, BE)], t.prototype, "border", void 0), SF([Y("OnDemand")], t.prototype, "displayMode", void 0), t }(ww), EF = function () { function e(e) { this.control = e, this.points = [], this.isIOS = uw.isIos || uw.isIos7; var t = e.navigatorStyleSettings.thumb; this.thumbVisible = 0 !== e.themeStyle.thumbWidth && 0 !== e.themeStyle.thumbHeight, this.elementId = e.element.id, this.thumpPadding = e.themeStyle.thumbWidth / 2, this.addEventListener(), this.thumbColor = e.disableRangeSelector ? "transparent" : t.fill || e.themeStyle.thumbBackground } return e.prototype.render = function (e) { var t = e.renderer, i = e.navigatorStyleSettings, n = e.disableRangeSelector ? "transparent" : null, r = t.createGroup({ id: this.elementId + "_sliders", style: e.disableRangeSelector ? "pointer-events:none;" : "" }), o = new aI(this.elementId + "_leftUnSelectedArea", n || i.unselectedRegionColor || e.themeStyle.unselectedRectColor, { width: 0 }, 1, { x: e.bounds.x, y: e.bounds.y, width: e.bounds.width / 3, height: e.bounds.height }); this.leftUnSelectedElement = t.drawRectangle(o), o.id = this.elementId + "_rightUnSelectedArea", this.rightUnSelectedElement = t.drawRectangle(o), o.id = this.elementId + "_SelectedArea", o.fill = n || i.selectedRegionColor || e.themeStyle.selectedRegionColor, this.selectedElement = t.drawRectangle(o), this.selectedElement.setAttribute("style", "cursor: -webkit-grab"), this.leftSlider = t.createGroup({ id: this.elementId + "_LeftSlider", style: "cursor: ew-resize" }), this.rightSlider = t.createGroup({ id: this.elementId + "_RightSlider", style: "cursor: ew-resize" }), this.createThump(t, e.bounds, this.leftSlider, this.elementId + "_LeftSlider", r), this.createThump(t, e.bounds, this.rightSlider, this.elementId + "_RightSlider"), r.appendChild(this.leftUnSelectedElement), r.appendChild(this.rightUnSelectedElement), r.appendChild(this.selectedElement), r.appendChild(this.leftSlider), r.appendChild(this.rightSlider), e.svgObject.appendChild(r) }, e.prototype.createThump = function (e, t, i, n, r) { var o, s = this.control, a = s.navigatorStyleSettings.thumb, l = s.themeStyle, h = t.y + t.height / 2, d = this.thumpPadding, c = s.themeStyle.thumbHeight / 2 - 5, p = s.disableRangeSelector ? "transparent" : null, u = p || a.border.color || l.thumpLineColor; i.appendChild(e.drawPath(new rj(n + "_ThumpLine", "transparent", a.border.width, s.series.length ? u : "transparent", 1, null, "M " + d + " " + t.y + " L " + d + " " + (t.y + t.height) + " "))), this.thumpY = h - s.themeStyle.thumbHeight / 2, this.sliderY = t.y > this.thumpY ? this.thumpY : t.y, r && !s.disableRangeSelector && ((o = e.createDefs()).innerHTML = '<rect xmlns="http://www.w3.org/2000/svg" id="path-1" x="0" y="' + this.thumpY + '" width="' + s.themeStyle.thumbWidth + '" height="' + s.themeStyle.thumbHeight + '" rx="' + ("Circle" === a.type ? "50%" : "0%") + '"/><filter xmlns="http://www.w3.org/2000/svg" x="-25.0%" y="-20.0%" width="150.0%" height="150.0%" filterUnits="objectBoundingBox" id="ej2-range-shadow"><feOffset dx="0" dy="1" in="SourceAlpha"result="shadowOffsetOuter1"/><feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"/><feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"/><feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.16 0" type="matrix" in="shadowBlurOuter1"/></filter>', r.appendChild(o)), i.innerHTML += '<use xmlns="http://www.w3.org/2000/svg" fill="black" fill-opacity="1" filter="url(#ej2-range-shadow)" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#path-1"/>', "Circle" === a.type ? i.appendChild(bn({ x: d, y: h }, "Circle", { width: s.themeStyle.thumbWidth, height: s.themeStyle.thumbHeight }, "", new rj(n + "_ThumpSymbol", p || this.thumbColor, a.border.width, u, 1, null))) : i.appendChild(e.drawRectangle(new aI(n + "_ThumpSymbol", p || this.thumbColor, { width: a.border.width, color: u }, 1, { x: d - s.themeStyle.thumbWidth / 2, y: h - s.themeStyle.thumbHeight / 2, width: s.themeStyle.thumbWidth, height: s.themeStyle.thumbHeight }, 2, 2))), this.thumbVisible && i.appendChild(e.drawPath(new rj(n + "_ThumpGrip", "transparent", 1, p || s.themeStyle.gripColor, 1, null, "M " + (d + 2) + " " + (h + c) + " L " + (d + 2) + " " + (h - c) + " M " + d + " " + (h + c) + " L " + d + " " + (h - c) + " M " + (d - 2) + " " + (h + c) + " L " + (d - 2) + " " + (h - c) + " "))) }, e.prototype.setSlider = function (e, t, i, n) { var r = this.control, o = r.bounds.x, s = r.chartSeries.xAxis.actualRange, a = 0 === r.series.length; t >= e || (e = [t, t = e][0]), e = t >= e ? e : [t, t = e][0], e = Math.max(e, s.min), t = Math.min(t, s.max), this.startX = o + cr(e, s, r.bounds.width, r.enableRtl), this.endX = o + cr(t, s, r.bounds.width, r.enableRtl); var l = r.enableRtl ? this.endX : this.startX, h = r.enableRtl ? this.startX : this.endX; this.sliderWidth = Math.abs(this.endX - this.startX), this.selectedElement.setAttribute("x", l + ""), this.selectedElement.setAttribute("width", this.sliderWidth + ""), this.leftUnSelectedElement.setAttribute("width", l - o + ""), this.rightUnSelectedElement.setAttribute("x", h + ""), this.rightUnSelectedElement.setAttribute("width", r.bounds.width - (h - o) + ""), this.leftSlider.setAttribute("transform", "translate(" + (this.startX - this.thumpPadding) + ", 0)"), this.rightSlider.setAttribute("transform", "translate(" + (this.endX - this.thumpPadding) + ", 0)"); var d = this.control.svgObject.getBoundingClientRect().left - this.control.element.getBoundingClientRect().left, c = this.control.enableRtl ? this.endX : this.startX, p = this.control.enableRtl ? this.startX : this.endX; this.leftRect = { x: a ? d + o : o, y: a ? 0 : r.bounds.y, width: a ? c - o : c, height: a ? this.thumpY : r.bounds.height }, this.rightRect = { x: a ? d + p : p, y: a ? 0 : r.bounds.y, width: r.bounds.width - (h - o), height: a ? this.thumpY : r.bounds.height }, this.midRect = { x: a ? c + d : 0, y: a ? 0 : r.bounds.y, width: a ? Math.abs(this.endX - this.startX) : p, height: a ? this.thumpY : r.bounds.height }, this.currentStart = e, this.currentEnd = t, n && (this.control.rangeTooltipModule.renderLeftTooltip(this), this.control.rangeTooltipModule.renderRightTooltip(this)), i && this.triggerEvent(s) }, e.prototype.triggerEvent = function (e) { var t, i = this.control.chartSeries.xAxis, n = i.valueType; t = { cancel: !1, start: "DateTime" === n ? new Date(this.currentStart) : "Logarithmic" === n ? Math.pow(i.logBase, this.currentStart) : this.currentStart, end: "DateTime" === n ? new Date(this.currentEnd) : "Logarithmic" === n ? Math.pow(i.logBase, this.currentEnd) : this.currentEnd, name: "changed", selectedData: ur(this.points, this.currentStart, this.currentEnd), zoomPosition: (this.control.enableRtl ? e.max - this.currentEnd : this.currentStart - e.min) / e.delta, zoomFactor: (this.currentEnd - this.currentStart) / e.delta }, this.control.trigger("changed", t) }, e.prototype.addEventListener = function () { this.control.isDestroyed || (this.control.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.control.on(uw.touchStartEvent, this.mouseDownHandler, this), this.control.on(uw.touchEndEvent, this.mouseUpHandler, this), this.control.on(uw.isPointer ? "pointerleave" : "mouseleave", this.mouseCancelHandler, this)) }, e.prototype.removeEventListener = function () { this.control.isDestroyed || (this.control.off(uw.touchMoveEvent, this.mouseMoveHandler), this.control.off(uw.touchStartEvent, this.mouseDownHandler), this.control.off(uw.touchEndEvent, this.mouseUpHandler), this.control.off(uw.isPointer ? "pointerleave" : "mouseleave", this.mouseCancelHandler)) }, e.prototype.mouseMoveHandler = function (e) { var t, i, n = this.control, r = n.chartSeries.xAxis.actualRange, o = n.bounds; if (this.getCurrentSlider(e.target.id), this.isDrag && n.mouseX >= o.x) { switch (this.currentSlider) { case "Left": n.startValue = this.getRangeValue(Math.abs(n.mouseX - o.x)); break; case "Right": n.endValue = this.getRangeValue(Math.abs(n.mouseX - o.x)); break; case "Middle": t = Math.max(this.getRangeValue(Math.abs(this.startX - (this.previousMoveX - n.mouseX) - o.x)), r.min), i = Math.min(this.getRangeValue(Math.abs(this.endX - (this.previousMoveX - n.mouseX) - o.x)), r.max); Math.floor(Math.abs(cr(i, r, n.bounds.width, n.enableRtl) - cr(t, r, n.bounds.width, n.enableRtl))) === Math.floor(this.sliderWidth) && (n.startValue = t, n.endValue = i) }e.preventDefault && this.isIOS && e.preventDefault(), this.setSlider(n.startValue, n.endValue, !n.enableDeferredUpdate, n.rangeTooltipModule && n.tooltip.enable), this.previousMoveX = n.mouseX } }, e.prototype.getRangeValue = function (e) { var t = this.control, i = t.chartSeries.xAxis.actualRange; return pr(e, t.bounds.width, i, t.enableRtl) }, e.prototype.mouseDownHandler = function (e) { this.currentSlider = this.getCurrentSlider(e.target.id), this.selectedElement.setAttribute("style", "cursor: -webkit-grabbing"), this.isDrag = !("UnSelectedArea" === this.currentSlider || !this.currentSlider), this.previousMoveX = this.control.mouseDownX }, e.prototype.getCurrentSlider = function (e) { var t = this.control.themeStyle.thumbHoverColor; return e.indexOf(this.elementId + "_LeftSlider") > -1 ? (this.leftSlider.childNodes[2].setAttribute("fill", t), "Left") : e.indexOf(this.elementId + "_RightSlider") > -1 ? (this.rightSlider.childNodes[2].setAttribute("fill", t), "Right") : e.indexOf(this.elementId + "_SelectedArea") > -1 ? "Middle" : e.indexOf("UnSelectedArea") > -1 ? (this.leftSlider.childNodes[2].setAttribute("fill", this.thumbColor), this.rightSlider.childNodes[2].setAttribute("fill", this.thumbColor), "UnSelectedArea") : e.indexOf(this.elementId + "_AxisLabel_") > -1 && "DateTime" === this.control.valueType ? (this.labelIndex = +e.substring(e.lastIndexOf("_") + 1, e.length), "firstLevelLabels") : e.indexOf(this.elementId + "_SecondaryLabel") > -1 && "DateTime" === this.control.valueType ? (this.labelIndex = +e.substring(e.lastIndexOf("_") + 1, e.length), "secondLevelLabels") : (this.leftSlider.childNodes[2].setAttribute("fill", this.thumbColor), this.rightSlider.childNodes[2].setAttribute("fill", this.thumbColor), this.control.periodSelectorModule && (this.control.periodSelectorModule.triggerChange = !0), null) }, e.prototype.mouseUpHandler = function (e) { var t = this.control, i = t.chartSeries.xAxis.actualRange, n = t.enableDeferredUpdate, r = t.tooltip.enable; if (t.stockChart && (t.stockChart.zoomChange = !1), "UnSelectedArea" === this.currentSlider) { var o = void 0, s = void 0, a = void 0, l = t.enableRtl, h = t.endValue - t.startValue; t.mouseDownX < this.startX ? (o = Math.max(this.getRangeValue(t.mouseDownX - this.sliderWidth / 2 - t.bounds.x), i.min), a = l ? o : o + h, s = l ? o - h : o) : (o = Math.min(this.getRangeValue(t.mouseDownX + this.sliderWidth / 2 - t.bounds.x), i.max), s = l ? o : o - h, a = l ? o + h : o), this.performAnimation(s, a, t), n = !1 } else if ("firstLevelLabels" === this.currentSlider || "secondLevelLabels" === this.currentSlider) { var d = t.rangeAxis[this.currentSlider][this.labelIndex + 1]; this.performAnimation(t.rangeAxis[this.currentSlider][this.labelIndex].value, d ? d.value : i.max, t), n = !1 } this.isDrag && t.allowSnapping && (this.setAllowSnapping(t, this.currentStart, this.currentEnd, n, r), n = !1), n && this.setSlider(this.currentStart, this.currentEnd, !0, r), null !== this.currentSlider && this.control.periodSelectorSettings.periods.length > 0 && (this.control.periodSelectorModule.triggerChange = !1, this.control.periodSelectorModule.datePicker.startDate = new Date(this.currentStart), this.control.periodSelectorModule.datePicker.endDate = new Date(this.currentEnd)), this.selectedElement.setAttribute("style", "cursor: -webkit-grab"), t.startValue = this.currentStart, t.endValue = this.currentEnd, this.isDrag = !1, this.labelIndex = null, this.currentSlider = null }, e.prototype.setAllowSnapping = function (e, t, i, n, r) { var o = e.rangeAxis.lowerValues; o.push(e.chartSeries.xAxis.actualRange.max), this.setSlider(gr(o, t), gr(o, i), n, r), e.startValue = this.currentStart, e.endValue = this.currentEnd }, e.prototype.performAnimation = function (e, t, i, n) { var r = this, o = this.currentStart, s = this.currentEnd, a = i.enableDeferredUpdate, l = i.tooltip.enable; new fw({}).animate(M("div"), { duration: d(n) ? this.control.animationDuration : n, progress: function (i) { r.setSlider(cn(i.timeStamp, 0, e - o, i.duration) + o, cn(i.timeStamp, 0, t - s, i.duration) + s, !a, l) }, end: function (n) { i.allowSnapping ? r.setAllowSnapping(i, e, t, !0, l) : r.setSlider(e, t, !0, l), r.control.startValue = r.currentStart, r.control.endValue = r.currentEnd, r.control.periodSelectorSettings.periods.length > 0 && (r.control.periodSelectorModule.triggerChange = !1, r.control.periodSelectorModule.datePicker.startDate = new Date(r.currentStart), r.control.periodSelectorModule.datePicker.endDate = new Date(r.currentEnd)) } }) }, e.prototype.mouseCancelHandler = function () { this.isDrag = !1, this.currentSlider = null, this.control.startValue = this.currentStart, this.control.endValue = this.currentEnd }, e.prototype.destroy = function () { this.removeEventListener() }, e }(), jF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), IF = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, kF = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.animateSeries = !0, n.chartid = 57725, n } return jF(t, e), t.prototype.preRender = function () { if (this.unWireEvents(), this.setCulture(), "" === this.element.id) { var e = document.getElementsByClassName("e-rangenavigator").length; this.element.id = "rangenavigator_" + this.chartid + "_" + e } this.wireEvents() }, t.prototype.initPrivateVariables = function () { this.doubleModule = new gj, this.labels = [], this.rangeSlider = new EF(this), this.chartSeries = new wF(this), this.lineSeriesModule = new UR, this.rangeAxis = new CF(this) }, t.prototype.setCulture = function () { this.intl = new Gw }, t.prototype.setSliderValue = function () { var e = "DateTime" === this.valueType, t = this.chartSeries.xAxis.actualRange; this.startValue = this.startValue ? this.startValue : this.value[0] ? e ? this.value[0].getTime() : +this.value[0] : t.min, this.endValue = this.endValue ? this.endValue : this.value[1] ? e ? this.value[1].getTime() : +this.value[1] : t.max }, t.prototype.render = function () { this.trigger("load", { rangeNavigator: this }), this.setTheme(), this.initPrivateVariables(), this.createRangeSvg(), this.calculateBounds(), this.chartSeries.renderChart(this), Oi("chartmeasuretext") }, t.prototype.setTheme = function () { this.themeStyle = mr(this.theme, this) }, t.prototype.createRangeSvg = function () { this.removeSvg(), tr(this), this.renderChartBackground() }, t.prototype.calculateBounds = function () { var e = this.enableGrouping ? 15 : 8, t = this.navigatorStyleSettings.thumb, i = xi("tempString", this.labelStyle).height, n = this.margin, r = !this.series.length, o = !this.disableRangeSelector && r && this.tooltip.enable ? 35 : 0, s = this.periodSelectorModule; this.periodSelectorModule && this.periodSelectorSettings.periods.length > 0 && (s.periodSelectorSize = { x: 0, y: 0, height: 0, width: 0 }, s.periodSelectorSize.width = this.availableSize.width, s.periodSelectorSize.height = this.periodSelectorSettings.height, s.periodSelectorSize.y = "Bottom" === this.periodSelectorSettings.position ? this.availableSize.height - s.periodSelectorSize.height : 0); var a = "Top" === this.periodSelectorSettings.position && s ? s.periodSelectorSize.y + s.periodSelectorSize.height : 0; this.bounds = new ej(this.themeStyle.thumbWidth / 2 + t.border.width + n.left, n.top + o + a, this.availableSize.width - this.themeStyle.thumbWidth - 2 * t.border.width - n.left - n.right, this.availableSize.height - n.top - n.bottom - o - (s ? s.periodSelectorSize.height : 0)); var l = ("Outside" === this.labelPosition || r ? i + e : 0) + ("Outside" === this.tickPosition || r ? this.majorTickLines.height : 0); if (this.bounds.height -= l, r) { var h = this.enableGrouping ? this.bounds.height - (i + e) : this.bounds.height; this.bounds.y += this.themeStyle.thumbHeight > h ? (this.themeStyle.thumbHeight - h) / 2 : 0 } this.disableRangeSelector && (this.bounds.y = 0, this.bounds.height = this.periodSelectorSettings.height) }, t.prototype.renderChart = function () { this.chartSeries.renderSeries(this), this.rangeAxis.renderGridLines(), this.rangeAxis.renderAxisLabels(), this.chartSeries.appendSeriesElements(this), this.createSecondaryElement(), this.setSliderValue(), this.renderPeriodSelector(), this.renderSlider(), this.stockChart || this.element.appendChild(this.svgObject); this.trigger("loaded", { rangeNavigator: window.Blazor ? {} : this }), this.rangeSlider.setSlider(this.startValue, this.endValue, !1, this.tooltip.enable && "Always" === this.tooltip.displayMode) }, t.prototype.renderPeriodSelector = function () { this.periodSelectorModule && (this.periodSelectorModule.renderSelectorElement(this), this.periodSelectorModule.renderSelector()) }, t.prototype.createSecondaryElement = function () { if (this.tooltip.enable) { var e = this.createElement("div"); e.id = this.element.id + "_Secondary_Element", e.setAttribute("style", "position: relative"), this.element.appendChild(e) } }, t.prototype.renderSlider = function () { this.rangeSlider.render(this), this.rangeSlider.setSlider(this.startValue, this.endValue, !0, this.tooltip.enable && "Always" === this.tooltip.displayMode) }, t.prototype.removeSvg = function () { Sn(this.element.id + "_Secondary_Element") && k(Sn(this.element.id + "_Secondary_Element")); if (this.svgObject) { for (; this.svgObject.childNodes.length > 0;)this.svgObject.removeChild(this.svgObject.firstChild); this.svgObject.hasChildNodes() || !this.svgObject.parentNode || this.stockChart || k(this.svgObject) } }, t.prototype.unWireEvents = function () { var e = uw.touchStartEvent, t = uw.touchMoveEvent, i = uw.touchEndEvent, n = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.remove(this.element, e, this.rangeOnMouseDown), Kv.remove(this.element, t, this.mouseMove), Kv.remove(this.element, i, this.mouseEnd), Kv.remove(this.element, "click", this.rangeOnMouseClick), Kv.remove(this.element, n, this.mouseLeave), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.rangeResize) }, t.prototype.wireEvents = function () { var e = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.add(this.element, uw.touchStartEvent, this.rangeOnMouseDown, this), Kv.add(this.element, uw.touchMoveEvent, this.mouseMove, this), Kv.add(this.element, uw.touchEndEvent, this.mouseEnd, this), Kv.add(this.element, "click", this.rangeOnMouseClick, this), Kv.add(this.element, e, this.mouseLeave, this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.rangeResize.bind(this)); var t = this.element; t.style.touchAction = "none", t.style.msTouchAction = "none", t.style.msContentZooming = "none", t.style.msUserSelect = "none", t.style.webkitUserSelect = "none", t.style.position = "relative", t.style.display = "block" }, t.prototype.rangeResize = function (e) { var t = this; if (!document.getElementById(this.element.id)) return !1; this.animateSeries = !1, this.resizeTo && clearTimeout(this.resizeTo); var i = { rangeNavigator: this, name: "resized", currentSize: new $E(0, 0), previousSize: new $E(this.availableSize.width, this.availableSize.height) }; return this.resizeTo = setTimeout(function () { t.isDestroyed ? clearTimeout(t.resizeTo) : (t.createRangeSvg(), i.currentSize = t.availableSize, t.trigger("resized", i), t.calculateBounds(), t.chartSeries.renderChart(t)) }, 500), !1 }, t.prototype.mouseMove = function (e) { return this.mouseX = this.setMouseX(e), this.notify(uw.touchMoveEvent, e), !1 }, t.prototype.mouseLeave = function (e) { var t = uw.isPointer ? "pointerleave" : "mouseleave"; return this.mouseX = this.setMouseX(e), this.notify(t, e), !1 }, t.prototype.rangeOnMouseClick = function (e) { return this.notify("click", e), !1 }, t.prototype.print = function (e) { new TR(this).print(e) }, t.prototype.export = function (e, t, i, n, r, o, s) { n = n || [this], new TR(this).export(e, t, i, n, r, o, s) }, t.prototype.renderChartBackground = function () { var e = new aI(this.element.id + "_ChartBorder", this.themeStyle.background, { width: 0, color: "transparent" }, 1, new ej(0, 0, this.availableSize.width, this.availableSize.height)); this.svgObject.appendChild(this.renderer.drawRectangle(e)) }, t.prototype.rangeOnMouseDown = function (e) { return this.mouseDownX = this.setMouseX(e), this.notify(uw.touchStartEvent, e), !1 }, t.prototype.mouseEnd = function (e) { return this.mouseX = this.setMouseX(e), this.notify(uw.touchEndEvent, e), !1 }, t.prototype.setMouseX = function (e) { var t = e.type.indexOf("touch") > -1 ? e.changedTouches[0].clientX : e.clientX, i = this.element.getBoundingClientRect(), n = this.stockChart ? Sn(this.element.id).getBoundingClientRect() : Sn(this.element.id + "_svg").getBoundingClientRect(); return t - i.left - Math.max(n.left - i.left, 0) }, t.prototype.getPersistData = function () { return this.addOnPersist(["loaded"]) }, t.prototype.onPropertyChanged = function (t, i) { var n = !1, r = !1, o = !1; this.animateSeries = !1; for (var s = 0, a = Object.keys(t); s < a.length; s++) { switch (a[s]) { case "width": case "height": case "navigatorBorder": case "enableGrouping": case "labelPosition": case "tickPosition": case "labelStyle": r = !0; break; case "series": case "enableRtl": case "dataSource": case "xName": case "yName": case "query": case "minimum": case "maximum": case "interval": case "intervalType": case "logBase": case "valueType": case "majorGridLines": case "minorGridLines": case "navigatorStyleSettings": case "labelFormat": case "skeleton": case "skeletonType": case "secondaryLabelAlignment": n = !0; break; case "theme": this.animateSeries = !0; break; case "locale": e.prototype.refresh.call(this); break; case "value": this.startValue = null, this.endValue = null, o = !0 } } !r && n && (this.removeSvg(), this.chartSeries.xMin = 1 / 0, this.chartSeries.xMax = -1 / 0, this.chartSeries.renderChart(this)), r && (this.removeSvg(), this.calculateBounds(), this.chartSeries.renderChart(this)), r || n || !o || (this.setSliderValue(), this.rangeSlider.setSlider(this.startValue, this.endValue, !0, this.tooltip.enable && "Always" === this.tooltip.displayMode)) }, t.prototype.requiredModules = function () { var e = this, t = []; return this.series.map(function (i) { t.push({ member: i.type + "Series", args: [e] }) }), this.periodSelectorSettings.periods.length > 0 && t.push({ member: "PeriodSelector", args: [this] }), "Double" !== this.valueType && t.push({ member: this.valueType, args: [this] }), this.tooltip.enable && t.push({ member: "RangeTooltip", args: [this] }), t }, t.prototype.getModuleName = function () { return "rangeNavigator" }, t.prototype.destroy = function () { this.unWireEvents(), this.rangeSlider.destroy(), e.prototype.destroy.call(this), this.element.classList.remove("e-rangenavigator") }, IF([Y(null)], t.prototype, "width", void 0), IF([Y(null)], t.prototype, "height", void 0), IF([Y(null)], t.prototype, "dataSource", void 0), IF([Y(null)], t.prototype, "xName", void 0), IF([Y(null)], t.prototype, "yName", void 0), IF([Y()], t.prototype, "query", void 0), IF([G([], xF)], t.prototype, "series", void 0), IF([U({}, AF)], t.prototype, "tooltip", void 0), IF([Y(null)], t.prototype, "minimum", void 0), IF([Y(null)], t.prototype, "maximum", void 0), IF([Y(null)], t.prototype, "interval", void 0), IF([Y("Auto")], t.prototype, "intervalType", void 0), IF([Y("Hide")], t.prototype, "labelIntersectAction", void 0), IF([Y(10)], t.prototype, "logBase", void 0), IF([Y("Double")], t.prototype, "valueType", void 0), IF([Y("Outside")], t.prototype, "labelPosition", void 0), IF([Y(500)], t.prototype, "animationDuration", void 0), IF([Y(!1)], t.prototype, "enableGrouping", void 0), IF([Y(!1)], t.prototype, "enableDeferredUpdate", void 0), IF([Y(!1)], t.prototype, "disableRangeSelector", void 0), IF([Y(!1)], t.prototype, "allowSnapping", void 0), IF([Y(!1)], t.prototype, "useGroupingSeparator", void 0), IF([Y()], t.prototype, "groupBy", void 0), IF([Y("Outside")], t.prototype, "tickPosition", void 0), IF([U(nR.axisLabelFont, zE)], t.prototype, "labelStyle", void 0), IF([U({}, Qj)], t.prototype, "majorGridLines", void 0), IF([U({}, Zj)], t.prototype, "majorTickLines", void 0), IF([U({}, DF)], t.prototype, "navigatorStyleSettings", void 0), IF([U({}, XE)], t.prototype, "periodSelectorSettings", void 0), IF([U({ color: "#DDDDDD", width: 1 }, BE)], t.prototype, "navigatorBorder", void 0), IF([Y("Material")], t.prototype, "theme", void 0), IF([Y([])], t.prototype, "value", void 0), IF([Y("")], t.prototype, "labelFormat", void 0), IF([Y("")], t.prototype, "skeleton", void 0), IF([Y("DateTime")], t.prototype, "skeletonType", void 0), IF([Y("Middle")], t.prototype, "secondaryLabelAlignment", void 0), IF([U({ top: 5, bottom: 5, right: 5, left: 5 }, VE)], t.prototype, "margin", void 0), IF([X()], t.prototype, "load", void 0), IF([X()], t.prototype, "loaded", void 0), IF([X()], t.prototype, "resized", void 0), IF([X()], t.prototype, "labelRender", void 0), IF([X()], t.prototype, "changed", void 0), IF([X()], t.prototype, "tooltipRender", void 0), IF([X()], t.prototype, "selectorRender", void 0), IF([X()], t.prototype, "beforePrint", void 0), t = IF([J], t) }(Kw), PF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), NF = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, OF = "e-overlay", RF = "e-nav-arrow", zF = "e-nav-right-arrow", BF = "e-nav-left-arrow", FF = "e-scroll-nav", VF = "e-scroll-right-nav", WF = "e-scroll-overlay", HF = "e-scroll-right-overlay", _F = "e-scroll-left-overlay", YF = function (e) { function t(t, i) { return e.call(this, t, i) || this } return PF(t, e), t.prototype.preRender = function () { this.browser = uw.info.name, this.browserCheck = "mozilla" === this.browser, this.isDevice = uw.isDevice, this.customStep = !0; var e = this.element; this.ieCheck = "edge" === this.browser || "msie" === this.browser, this.initialize(), "" === e.id && (e.id = p("hscroll"), this.uniqueId = !0), e.style.display = "block", this.enableRtl && e.classList.add("e-rtl") }, t.prototype.render = function () { this.touchModule = new yb(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) }), Kv.add(this.scrollEle, "scroll", this.scrollHandler, this), this.isDevice ? (this.element.classList.add("e-scroll-device"), this.createOverlay(this.element)) : this.createNavIcon(this.element), (d(this.scrollStep) || this.scrollStep < 0) && (this.scrollStep = this.scrollEle.offsetWidth, this.customStep = !1) }, t.prototype.initialize = function () { var e = this.createElement("div", { className: "e-hscroll-content" }), t = this.createElement("div", { className: "e-hscroll-bar" }); t.setAttribute("tabindex", "-1"); for (var i = this.element, n = 0, r = [].slice.call(i.children); n < r.length; n++) { var o = r[n]; e.appendChild(o) } t.appendChild(e), i.appendChild(t), t.style.overflowX = "hidden", this.scrollEle = t, this.scrollItems = e }, t.prototype.getPersistData = function () { return this.addOnPersist(["scrollStep"]) }, t.prototype.getModuleName = function () { return "hScroll" }, t.prototype.destroy = function () { var t = this.element; t.style.display = "", t.classList.remove("e-hscroll"), t.classList.remove("e-scroll-device"); var i = O(".e-" + t.id + "_nav." + FF, t), n = O("." + WF, t);[].slice.call(n).forEach(function (e) { I(e) }); for (var r = 0, o = [].slice.call(this.scrollItems.children); r < o.length; r++) { var s = o[r]; t.appendChild(s) } this.uniqueId && this.element.removeAttribute("id"), I(this.scrollEle), i.length > 0 && (I(i[0]), d(i[1]) || I(i[1])), Kv.remove(this.scrollEle, "scroll", this.scrollHandler), this.touchModule.destroy(), this.touchModule = null, e.prototype.destroy.call(this) }, t.prototype.disable = function (e) { var t = O(".e-scroll-nav:not(.e-overlay)", this.element); e ? this.element.classList.add(OF) : this.element.classList.remove(OF), [].slice.call(t).forEach(function (t) { t.setAttribute("tabindex", e ? "-1" : "0") }) }, t.prototype.createOverlay = function (e) { var t = e.id.concat("_nav"), i = this.createElement("div", { className: WF + " " + HF }), n = "e-" + e.id.concat("_nav " + FF + " " + VF), r = this.createElement("div", { id: t.concat("_right"), className: n }), o = this.createElement("div", { className: zF + " " + RF + " e-icons" }); r.appendChild(o); var s = this.createElement("div", { className: WF + " " + _F }); this.ieCheck && r.classList.add("e-ie-align"), e.appendChild(i), e.appendChild(r), e.insertBefore(s, e.firstChild), this.eventBinding([r]) }, t.prototype.createNavIcon = function (e) { var t = e.id.concat("_nav"), i = "e-" + e.id.concat("_nav " + FF + " " + VF), n = this.createElement("div", { id: t.concat("_right"), className: i }); n.setAttribute("aria-disabled", "false"); var r = this.createElement("div", { className: zF + " " + RF + " e-icons" }), o = "e-" + e.id.concat("_nav " + FF + " e-scroll-left-nav"), s = this.createElement("div", { id: t.concat("_left"), className: o + " " + OF }); s.setAttribute("aria-disabled", "true"); var a = this.createElement("div", { className: BF + " " + RF + " e-icons" }); s.appendChild(a), n.appendChild(r), n.setAttribute("tabindex", "0"), e.appendChild(n), e.insertBefore(s, e.firstChild), this.ieCheck && (n.classList.add("e-ie-align"), s.classList.add("e-ie-align")), this.eventBinding([n, s]) }, t.prototype.onKeyPress = function (e) { var t = this; if ("Enter" === e.key) { this.keyTimer = window.setTimeout(function () { t.keyTimeout = !0, t.eleScrolling(10, e.target, !0) }, 100) } }, t.prototype.onKeyUp = function (e) { "Enter" === e.key && (this.keyTimeout ? this.keyTimeout = !1 : e.target.click(), clearTimeout(this.keyTimer)) }, t.prototype.eventBinding = function (e) { var t = this;[].slice.call(e).forEach(function (e) { new yb(e, { tapHold: t.tabHoldHandler.bind(t), tapHoldThreshold: 500 }), e.addEventListener("keydown", t.onKeyPress.bind(t)), e.addEventListener("keyup", t.onKeyUp.bind(t)), e.addEventListener("mouseup", t.repeatScroll.bind(t)), e.addEventListener("touchend", t.repeatScroll.bind(t)), e.addEventListener("contextmenu", function (e) { e.preventDefault() }), Kv.add(e, "click", t.clickEventHandler, t) }) }, t.prototype.repeatScroll = function () { clearInterval(this.timeout) }, t.prototype.tabHoldHandler = function (e) { var t = this, i = e.originalEvent.target; i = this.contains(i, FF) ? i.firstElementChild : i; this.timeout = window.setInterval(function () { t.eleScrolling(10, i, !0) }, 50) }, t.prototype.contains = function (e, t) { return e.classList.contains(t) }, t.prototype.eleScrolling = function (e, t, i) { var n = this.scrollEle, r = this.element, o = t.classList; o.contains(FF) && (o = t.querySelector("." + RF).classList), this.contains(r, "e-rtl") && this.browserCheck && (e = -e); n.scrollLeft; !this.contains(r, "e-rtl") || this.browserCheck || this.ieCheck ? o.contains(zF) ? this.frameScrollRequest(e, "add", i) : this.frameScrollRequest(e, "", i) : o.contains(BF) ? this.frameScrollRequest(e, "add", i) : this.frameScrollRequest(e, "", i) }, t.prototype.clickEventHandler = function (e) { this.eleScrolling(this.scrollStep, e.target, !1) }, t.prototype.swipeHandler = function (e) { var t, i = this.scrollEle; t = e.velocity <= 1 ? e.distanceX / (10 * e.velocity) : e.distanceX / e.velocity; var n = .5, r = function () { var o = Math.sin(n); o <= 0 ? window.cancelAnimationFrame(o) : ("Left" === e.swipeDirection ? i.scrollLeft += t * o : "Right" === e.swipeDirection && (i.scrollLeft -= t * o), n -= .02, window.requestAnimationFrame(r)) }; r() }, t.prototype.scrollUpdating = function (e, t) { "add" === t ? this.scrollEle.scrollLeft += e : this.scrollEle.scrollLeft -= e }, t.prototype.frameScrollRequest = function (e, t, i) { var n = this; if (i) this.scrollUpdating(e, t); else { this.customStep || [].slice.call(O("." + WF, this.element)).forEach(function (t) { e -= t.offsetWidth }); var r = function () { var i, o; n.contains(n.element, "e-rtl") && n.browserCheck ? (i = -e, o = -10) : (i = e, o = 10), i < 10 ? window.cancelAnimationFrame(o) : (n.scrollUpdating(o, t), e -= o, window.requestAnimationFrame(r)) }; r() } }, t.prototype.touchHandler = function (e) { var t, i = this.scrollEle; t = e.distanceX, this.ieCheck && this.contains(this.element, "e-rtl") && (t = -t), "Left" === e.scrollDirection ? i.scrollLeft = i.scrollLeft + t : "Right" === e.scrollDirection && (i.scrollLeft = i.scrollLeft - t) }, t.prototype.arrowDisabling = function (e, t) { if (this.isDevice) { var i = (d(e) ? t : e).querySelector("." + RF); d(e) ? B(i, [zF], [BF]) : B(i, [BF], [zF]) } else e.classList.add(OF), e.setAttribute("aria-disabled", "true"), e.removeAttribute("tabindex"), t.classList.remove(OF), t.setAttribute("aria-disabled", "false"), t.setAttribute("tabindex", "0"); this.repeatScroll() }, t.prototype.scrollHandler = function (e) { var t = e.target, i = t.offsetWidth, n = this.element, r = this.element.querySelector(".e-scroll-left-nav"), o = this.element.querySelector("." + VF), s = this.element.querySelector("." + _F), a = this.element.querySelector("." + HF), l = t.scrollLeft; if (l <= 0 && (l = -l), this.isDevice && (!this.enableRtl || this.browserCheck || this.ieCheck || (s = this.element.querySelector("." + HF), a = this.element.querySelector("." + _F)), s.style.width = l < 40 ? l + "px" : "40px", t.scrollWidth - Math.ceil(i + l) < 40 ? a.style.width = t.scrollWidth - Math.ceil(i + l) + "px" : a.style.width = "40px"), 0 === l) !this.contains(n, "e-rtl") || this.browserCheck || this.ieCheck ? this.arrowDisabling(r, o) : this.arrowDisabling(o, r); else if (Math.ceil(i + l + .1) >= t.scrollWidth) !this.contains(n, "e-rtl") || this.browserCheck || this.ieCheck ? this.arrowDisabling(o, r) : this.arrowDisabling(r, o); else { var h = this.element.querySelector("." + FF + "." + OF); h && (h.classList.remove(OF), h.setAttribute("aria-disabled", "false"), h.setAttribute("tabindex", "0")) } }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "scrollStep": break; case "enableRtl": e.enableRtl ? this.element.classList.add("e-rtl") : this.element.classList.remove("e-rtl") } } }, NF([Y(null)], t.prototype, "scrollStep", void 0), t = NF([J], t) }(Kw), UF = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), qF = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, GF = "e-overlay", QF = "e-nav-arrow", XF = "e-nav-up-arrow", JF = "e-nav-down-arrow", ZF = "e-scroll-nav", KF = "e-scroll-down-nav", $F = "e-scroll-overlay", eV = "e-scroll-up-overlay", tV = "e-scroll-down-overlay", iV = function (e) { function t(t, i) { return e.call(this, t, i) || this } return UF(t, e), t.prototype.preRender = function () { this.browser = uw.info.name, this.browserCheck = "mozilla" === this.browser, this.isDevice = uw.isDevice, this.customStep = !0; var e = this.element; this.ieCheck = "edge" === this.browser || "msie" === this.browser, this.initialize(), "" === e.id && (e.id = p("vscroll"), this.uniqueId = !0), e.style.display = "block", this.enableRtl && e.classList.add("e-rtl") }, t.prototype.render = function () { this.touchModule = new yb(this.element, { scroll: this.touchHandler.bind(this), swipe: this.swipeHandler.bind(this) }), Kv.add(this.scrollEle, "scroll", this.scrollEventHandler, this), this.isDevice ? (this.element.classList.add("e-scroll-device"), this.createOverlayElement(this.element)) : this.createNavIcon(this.element), (d(this.scrollStep) || this.scrollStep < 0) && (this.scrollStep = this.scrollEle.offsetHeight, this.customStep = !1), Kv.add(this.element, "wheel", this.wheelEventHandler, this) }, t.prototype.initialize = function () { var e = M("div", { className: "e-vscroll-content" }), t = M("div", { className: "e-vscroll-bar" }); t.setAttribute("tabindex", "-1"); for (var i = this.element, n = 0, r = [].slice.call(i.children); n < r.length; n++) { var o = r[n]; e.appendChild(o) } t.appendChild(e), i.appendChild(t), t.style.overflowY = "hidden", this.scrollEle = t, this.scrollItems = e }, t.prototype.getPersistData = function () { return this.addOnPersist(["scrollStep"]) }, t.prototype.getModuleName = function () { return "vScroll" }, t.prototype.destroy = function () { var t = this.element; t.style.display = "", x([this.element], ["e-vscroll", "e-scroll-device"]); var i = O(".e-" + t.id + "_nav." + ZF, t), n = O("." + $F, t);[].slice.call(n).forEach(function (e) { I(e) }); for (var r = 0, o = [].slice.call(this.scrollItems.children); r < o.length; r++) { var s = o[r]; t.appendChild(s) } this.uniqueId && this.element.removeAttribute("id"), I(this.scrollEle), i.length > 0 && (I(i[0]), d(i[1]) || I(i[1])), Kv.remove(this.scrollEle, "scroll", this.scrollEventHandler), this.touchModule.destroy(), this.touchModule = null, e.prototype.destroy.call(this) }, t.prototype.disable = function (e) { var t = O(".e-scroll-nav:not(.e-overlay)", this.element); e ? this.element.classList.add(GF) : this.element.classList.remove(GF), [].slice.call(t).forEach(function (t) { t.setAttribute("tabindex", e ? "-1" : "0") }) }, t.prototype.createOverlayElement = function (e) { var t = e.id.concat("_nav"), i = M("div", { className: $F + " " + tV }), n = "e-" + e.id.concat("_nav " + ZF + " " + KF), r = M("div", { id: t.concat("down"), className: n }), o = M("div", { className: JF + " " + QF + " e-icons" }); r.appendChild(o); var s = M("div", { className: $F + " " + eV }); this.ieCheck && r.classList.add("e-ie-align"), e.appendChild(i), e.appendChild(r), e.insertBefore(s, e.firstChild), this.eventBinding([r]) }, t.prototype.createNavIcon = function (e) { var t = e.id.concat("_nav"), i = "e-" + e.id.concat("_nav " + ZF + " " + KF), n = M("div", { id: t.concat("_down"), className: i }); n.setAttribute("aria-disabled", "false"); var r = M("div", { className: JF + " " + QF + " e-icons" }), o = "e-" + e.id.concat("_nav " + ZF + " e-scroll-up-nav"), s = M("div", { id: t.concat("_up"), className: o + " " + GF }); s.setAttribute("aria-disabled", "true"); var a = M("div", { className: XF + " " + QF + " e-icons" }); s.appendChild(a), n.appendChild(r), n.setAttribute("tabindex", "0"), e.appendChild(n), e.insertBefore(s, e.firstChild), this.ieCheck && (n.classList.add("e-ie-align"), s.classList.add("e-ie-align")), this.eventBinding([n, s]) }, t.prototype.onKeyPress = function (e) { var t = this; if ("Enter" === e.key) { this.keyTimer = window.setTimeout(function () { t.keyTimeout = !0, t.eleScrolling(10, e.target, !0) }, 100) } }, t.prototype.onKeyUp = function (e) { "Enter" === e.key && (this.keyTimeout ? this.keyTimeout = !1 : e.target.click(), clearTimeout(this.keyTimer)) }, t.prototype.eventBinding = function (e) { var t = this;[].slice.call(e).forEach(function (e) { new yb(e, { tapHold: t.tabHoldHandler.bind(t), tapHoldThreshold: 500 }), e.addEventListener("keydown", t.onKeyPress.bind(t)), e.addEventListener("keyup", t.onKeyUp.bind(t)), e.addEventListener("mouseup", t.repeatScroll.bind(t)), e.addEventListener("touchend", t.repeatScroll.bind(t)), e.addEventListener("contextmenu", function (e) { e.preventDefault() }), Kv.add(e, "click", t.clickEventHandler, t) }) }, t.prototype.repeatScroll = function () { clearInterval(this.timeout) }, t.prototype.tabHoldHandler = function (e) { var t = this, i = e.originalEvent.target; i = this.contains(i, ZF) ? i.firstElementChild : i; this.timeout = window.setInterval(function () { t.eleScrolling(10, i, !0) }, 50) }, t.prototype.contains = function (e, t) { return e.classList.contains(t) }, t.prototype.eleScrolling = function (e, t, i) { this.element; var n = t.classList; n.contains(ZF) && (n = t.querySelector("." + QF).classList), n.contains(JF) ? this.frameScrollRequest(e, "add", i) : n.contains(XF) && this.frameScrollRequest(e, "", i) }, t.prototype.clickEventHandler = function (e) { this.eleScrolling(this.scrollStep, e.target, !1) }, t.prototype.wheelEventHandler = function (e) { e.preventDefault(), this.frameScrollRequest(this.scrollStep, e.deltaY > 0 ? "add" : "", !1) }, t.prototype.swipeHandler = function (e) { var t, i = this.scrollEle; t = e.velocity <= 1 ? e.distanceY / (10 * e.velocity) : e.distanceY / e.velocity; var n = .5, r = function () { var o = Math.sin(n); o <= 0 ? window.cancelAnimationFrame(o) : ("Up" === e.swipeDirection ? i.scrollTop += t * o : "Down" === e.swipeDirection && (i.scrollTop -= t * o), n -= .02, window.requestAnimationFrame(r)) }; r() }, t.prototype.scrollUpdating = function (e, t) { "add" === t ? this.scrollEle.scrollTop += e : this.scrollEle.scrollTop -= e }, t.prototype.frameScrollRequest = function (e, t, i) { var n = this; if (i) this.scrollUpdating(e, t); else { this.customStep || [].slice.call(O("." + $F, this.element)).forEach(function (t) { e -= t.offsetHeight }); var r = function () { e < 10 ? window.cancelAnimationFrame(10) : (n.scrollUpdating(10, t), e -= 10, window.requestAnimationFrame(r)) }; r() } }, t.prototype.touchHandler = function (e) { var t, i = this.scrollEle; t = e.distanceY, "Up" === e.scrollDirection ? i.scrollTop = i.scrollTop + t : "Down" === e.scrollDirection && (i.scrollTop = i.scrollTop - t) }, t.prototype.arrowDisabling = function (e, t) { if (this.isDevice) { var i = (d(e) ? t : e).querySelector("." + QF); d(e) ? B(i, [JF], [XF]) : B(i, [XF], [JF]) } else e.classList.add(GF), e.setAttribute("aria-disabled", "true"), e.removeAttribute("tabindex"), t.classList.remove(GF), t.setAttribute("aria-disabled", "false"), t.setAttribute("tabindex", "0"); this.repeatScroll() }, t.prototype.scrollEventHandler = function (e) { var t = e.target, i = t.offsetHeight, n = (this.element, this.element.querySelector(".e-scroll-up-nav")), r = this.element.querySelector("." + KF), o = this.element.querySelector("." + eV), s = this.element.querySelector("." + tV), a = t.scrollTop; if (a <= 0 && (a = -a), this.isDevice && (o.style.height = a < 40 ? a + "px" : "40px", t.scrollHeight - Math.ceil(i + a) < 40 ? s.style.height = t.scrollHeight - Math.ceil(i + a) + "px" : s.style.height = "40px"), 0 === a) this.arrowDisabling(n, r); else if (Math.ceil(i + a + .1) >= t.scrollHeight) this.arrowDisabling(r, n); else { var l = this.element.querySelector("." + ZF + "." + GF); l && (l.classList.remove(GF), l.setAttribute("aria-disabled", "false"), l.setAttribute("tabindex", "0")) } }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "scrollStep": break; case "enableRtl": e.enableRtl ? this.element.classList.add("e-rtl") : this.element.classList.remove("e-rtl") } } }, qF([Y(null)], t.prototype, "scrollStep", void 0), t = qF([J], t) }(Kw), nV = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), rV = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, oV = "e-focused", sV = "e-menu-header", aV = "e-selected", lV = "e-separator", hV = "downarrow", dV = "leftarrow", cV = "rightarrow", pV = "e-menu-item", uV = "e-menu-hide", gV = "e-menu-popup", mV = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return nV(t, e), rV([Y("id")], t.prototype, "itemId", void 0), rV([Y("parentId")], t.prototype, "parentId", void 0), rV([Y("text")], t.prototype, "text", void 0), rV([Y("iconCss")], t.prototype, "iconCss", void 0), rV([Y("url")], t.prototype, "url", void 0), rV([Y("separator")], t.prototype, "separator", void 0), rV([Y("items")], t.prototype, "children", void 0), t }(ww), fV = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return nV(t, e), rV([Y(null)], t.prototype, "iconCss", void 0), rV([Y("")], t.prototype, "id", void 0), rV([Y(!1)], t.prototype, "separator", void 0), rV([G([], t)], t.prototype, "items", void 0), rV([Y("")], t.prototype, "text", void 0), rV([Y("")], t.prototype, "url", void 0), t }(ww), yV = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return nV(t, e), rV([Y("SlideDown")], t.prototype, "effect", void 0), rV([Y(400)], t.prototype, "duration", void 0), rV([Y("ease")], t.prototype, "easing", void 0), t }(ww), vV = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.navIdx = [], n.animation = new fw({}), n.isTapHold = !1, n } return nV(t, e), t.prototype.preRender = function () { if (!this.isMenu) { var e = void 0; if ("EJS-CONTEXTMENU" === this.element.tagName) { e = this.createElement("ul", { id: p(this.getModuleName()), className: "e-control e-lib e-" + this.getModuleName() }); var t = n("ej2_instances", this.element); x([this.element], ["e-control", "e-lib", "e-" + this.getModuleName()]), this.clonedElement = this.element, this.element = e, r("ej2_instances", t, this.element) } else { e = this.createElement("ul", { id: p(this.getModuleName()) }), E([].slice.call(this.element.cloneNode(!0).children), e); var i = this.element.nextElementSibling; i ? this.element.parentElement.insertBefore(e, i) : this.element.parentElement.appendChild(e), this.clonedElement = e } this.clonedElement.style.display = "none" } if ("EJS-MENU" === this.element.tagName) { for (var o = this.element, s = n("ej2_instances", o), a = (e = this.createElement("ul"), this.createElement("EJS-MENU", { className: "e-" + this.getModuleName() + "-wrapper" })), l = 0, h = o.attributes.length; l < h; l++)e.setAttribute(o.attributes[l].nodeName, o.attributes[l].nodeValue); o.parentNode.insertBefore(a, o), I(o), o = e, a.appendChild(o), r("ej2_instances", s, o), this.clonedElement = a, this.element = o, this.element.id || (this.element.id = p(this.getModuleName())) } }, t.prototype.render = function () { if (this.initialize(), this.renderItems(), this.isMenu && this.template) { var e = this.element.id + "Template"; ue(e), pe(e, "Template", this) } this.wireEvents() }, t.prototype.initialize = function () { var e = this.getWrapper(); e || (e = this.createElement("div", { className: "e-" + this.getModuleName() + "-wrapper" }), this.isMenu ? this.element.parentElement.insertBefore(e, this.element) : document.body.appendChild(e)), this.cssClass && S([e], this.cssClass.split(" ")), this.enableRtl && e.classList.add("e-rtl"), e.appendChild(this.element), this.isMenu && this.hamburgerMode && (this.target || this.createHeaderContainer(e)) }, t.prototype.renderItems = function () { if (!this.items.length) { var e = hT.createJsonFromElement(this.element, { fields: { child: "items" } }); this.setProperties({ items: e }, !0), this.element.innerHTML = "" } var t = this.createItems(this.items); E(Array.prototype.slice.call(t.children), this.element), this.element.classList.add("e-menu-parent"); var i = this.getWrapper(); this.element.classList.contains("e-vertical") ? this.addScrolling(i, this.element, "vscroll", i.offsetHeight, this.element.offsetHeight) : this.addScrolling(i, this.element, "hscroll", i.offsetWidth, this.element.offsetWidth) }, t.prototype.wireEvents = function () { var e = this.getWrapper(); if (this.target) { for (var t = void 0, i = O(this.target), n = 0, r = i.length; n < r; n++)t = i[n], this.isMenu ? Kv.add(t, "click", this.menuHeaderClickHandler, this) : uw.isIos ? new yb(t, { tapHold: this.touchHandler.bind(this) }) : Kv.add(t, "contextmenu", this.cmenuHandler, this); if (this.targetElement = t, !this.isMenu) for (var o = 0, s = lt(this.targetElement); o < s.length; o++) { var a = s[o]; Kv.add(a, "scroll", this.scrollHandler, this) } } uw.isDevice || (this.delegateMoverHandler = this.moverHandler.bind(this), this.delegateMouseDownHandler = this.mouseDownHandler.bind(this), Kv.add(this.isMenu ? document : e, "mouseover", this.delegateMoverHandler, this), Kv.add(document, "mousedown", this.delegateMouseDownHandler, this)), this.delegateClickHandler = this.clickHandler.bind(this), Kv.add(document, "click", this.delegateClickHandler, this), this.wireKeyboardEvent(e), this.rippleFn = ee(e, { selector: "." + pV }) }, t.prototype.wireKeyboardEvent = function (e) { var t = { downarrow: hV, uparrow: "uparrow", enter: "enter", leftarrow: dV, rightarrow: cV, escape: "escape" }; this.isMenu && (t.home = "home", t.end = "end"), new cb(e, { keyAction: this.keyBoardHandler.bind(this), keyConfigs: t }) }, t.prototype.mouseDownHandler = function (e) { R(e.target, ".e-" + this.getModuleName() + "-wrapper") === this.getWrapper() || R(e.target, ".e-" + this.getModuleName() + "-popup") || this.closeMenu(this.isMenu ? null : this.navIdx.length, e) }, t.prototype.keyBoardHandler = function (e) { var t = "", i = e.target, n = this.isMenu && !this.hamburgerMode && !this.element.classList.contains("e-vertical") && this.navIdx.length < 1; if (e.preventDefault(), this.enableScrolling && 13 === e.keyCode && i.classList.contains("e-scroll-nav") && this.removeLIStateByClass([oV, aV], [R(i, ".e-" + this.getModuleName() + "-wrapper")]), n) switch (e.action) { case cV: t = cV, e.action = hV; break; case dV: t = dV, e.action = "uparrow"; break; case hV: t = hV, e.action = cV; break; case "uparrow": t = "uparrow", e.action = "" } else if (this.enableRtl) switch (e.action) { case dV: n = !0, t = dV, e.action = cV; break; case cV: n = !0, t = cV, e.action = dV }switch (e.action) { case hV: case "uparrow": case "end": case "home": this.upDownKeyHandler(e); break; case cV: this.rightEnterKeyHandler(e); break; case dV: this.leftEscKeyHandler(e); break; case "enter": this.hamburgerMode && "SPAN" === i.tagName && i.classList.contains("e-menu-icon") ? this.menuHeaderClickHandler(e) : this.rightEnterKeyHandler(e); break; case "escape": this.leftEscKeyHandler(e) }n && (e.action = t) }, t.prototype.upDownKeyHandler = function (e) { var t = this.getUlByNavIdx(), i = e.action === hV || "home" === e.action ? 0 : t.childElementCount - 1, n = i, r = this.getLIByClass(t, oV); r && ("end" !== e.action && "home" !== e.action && (n = this.getIdx(t, r)), r.classList.remove(oV), "end" !== e.action && "home" !== e.action && (e.action === hV ? n++ : n-- , n === (e.action === hV ? t.childElementCount : -1) && (n = i))); var o = t.children[n]; n = this.isValidLI(o, n, e.action), t.children[n].classList.add(oV), t.children[n].focus() }, t.prototype.isValidLI = function (e, t, i) { this.getWrapper(); var n = this.getUlByNavIdx(); return (e.classList.contains(lV) || e.classList.contains("e-disabled") || e.classList.contains(uV)) && (i === hV || i === cV ? t++ : t--), ((e = n.children[t]).classList.contains(lV) || e.classList.contains("e-disabled") || e.classList.contains(uV)) && (t = this.isValidLI(e, t, i)), t }, t.prototype.getUlByNavIdx = function (e) { if (void 0 === e && (e = this.navIdx.length), this.isMenu) { var t = [this.getWrapper()].concat([].slice.call(O("." + gV)))[e]; return d(t) ? null : N(".e-menu-parent", t) } return this.getWrapper().children[e] }, t.prototype.rightEnterKeyHandler = function (e) { var t, i = this.getUlByNavIdx(), n = this.getLIByClass(i, oV); if (n) { var r = this.getIdx(i, n), o = this.navIdx.concat(r), s = this.getItem(o); s.items.length ? (this.navIdx.push(r), this.keyType = "right", this.action = e.action, this.openMenu(n, s, null, null, e)) : "enter" === e.action && (this.isMenu && 0 === this.navIdx.length ? this.removeLIStateByClass([aV], [this.getWrapper()]) : n.classList.remove(oV), n.classList.add(aV), t = { element: n, item: s, event: e }, this.trigger("select", t), this.closeMenu(null, e)) } }, t.prototype.leftEscKeyHandler = function (e) { this.navIdx.length ? (this.keyType = "left", this.closeMenu(this.navIdx.length, e)) : "escape" === e.action && this.closeMenu(null, e) }, t.prototype.scrollHandler = function (e) { this.closeMenu(null, e) }, t.prototype.touchHandler = function (e) { this.isTapHold = !0, this.cmenuHandler(e.originalEvent) }, t.prototype.cmenuHandler = function (e) { e.preventDefault(), this.isCMenu = !0, this.pageX = e.changedTouches ? e.changedTouches[0].pageX + 1 : e.pageX + 1, this.pageY = e.changedTouches ? e.changedTouches[0].pageY + 1 : e.pageY + 1, this.closeMenu(null, e), this.isCMenu && (this.canOpen(e.target) && this.openMenu(null, null, this.pageY, this.pageX, e), this.isCMenu = !1) }, t.prototype.closeMenu = function (e, t) { var i = this; if (void 0 === e && (e = 0), void 0 === t && (t = null), this.isMenuVisible()) { var n, r, o, s = void 0, a = void 0, l = this.getWrapper(), h = this.getPopups(), d = !1, c = this.isMenu ? h.length + 1 : l.childElementCount; n = this.isMenu && 1 !== c ? N(".e-ul", h[c - 2]) : O(".e-menu-parent", l)[c - 1], this.isMenu && n.classList.contains("e-menu") && ((s = this.getLIByClass(n, aV)) && s.classList.remove(aV), d = !0), d || (r = this.navIdx.length ? this.getItem(this.navIdx) : null, o = r ? r.items : this.items, a = { element: n, parentItem: r, items: o, event: t, cancel: !1 }, this.trigger("beforeClose", a, function (s) { var a, l, h, d = !s.cancel; if ((d || i.isCMenu) && (i.isMenu ? (a = R(n, "." + gV), i.hamburgerMode && (a.parentElement.style.minHeight = ""), i.unWireKeyboardEvent(a), i.destroyScrollObj(C(a.children[0], iV), a.children[0]), (h = C(a, yM)).hide(), h.destroy(), I(a)) : i.toggleAnimation(n, !1), l = { element: n, parentItem: r, items: o }, i.trigger("onClose", l), i.navIdx.pop()), i.isCMenu) i.canOpen(t.target) && i.openMenu(null, null, i.pageY, i.pageX, t), i.isCMenu = !1; else if (d && i.hamburgerMode && null !== e) i.afterCloseMenu(t); else if (d && !e && i.navIdx.length) i.closeMenu(null, t); else if (!d || i.isMenu || e || 0 !== i.navIdx.length || i.isMenusClosed) if (d && i.isMenu && t && t.target && 0 !== i.navIdx.length && R(t.target, ".e-menu-parent.e-control")) i.closeMenu(0, t); else if (!d || "right" !== i.keyType && "click" !== i.keyType) { var c = i.getUlByNavIdx(), p = i.getLIByClass(c, aV); p && (p.setAttribute("aria-expanded", "false"), p.classList.remove(aV), p.classList.add(oV), p.focus()) } else i.afterCloseMenu(t); else i.isMenusClosed = !0, i.closeMenu(0, t); i.removeStateWrapper() })) } }, t.prototype.destroyScrollObj = function (e, t) { e && (e.destroy(), t.parentElement.appendChild(N(".e-menu-parent", t)), I(t)) }, t.prototype.getPopups = function () { var e = this, t = []; return [].slice.call(document.querySelectorAll("." + gV)).forEach(function (i) { e.getIndex(i.querySelector("." + pV).id, !0).length && t.push(i) }), t }, t.prototype.isMenuVisible = function () { return this.navIdx.length > 0 || this.element.classList.contains("e-contextmenu") && D(this.element).valueOf() }, t.prototype.canOpen = function (e) { var t = !0; if (this.filter) { t = !1; for (var i = this.filter.split(" "), n = 0, r = i.length; n < r; n++)if (R(e, "." + i[n])) { t = !0; break } } return t }, t.prototype.openMenu = function (e, t, i, n, r, o) { void 0 === i && (i = 0), void 0 === n && (n = 0), void 0 === r && (r = null), void 0 === o && (o = this.targetElement); var s = this.getWrapper(); this.lItem = e; var a = "" !== this.element.id ? this.element.id : "menu"; if (this.isMenusClosed = !1, e) { if (this.uList = this.createItems(t[this.getField("children", this.navIdx.length - 1)]), !this.isMenu && uw.isDevice) { s.lastChild.style.display = "none"; var l = { text: t[this.getField("text")].toString(), iconCss: "e-icons e-previous" }, h = new fV(this.items[0], "items", l, !0), d = this.createItems([h]).children[0]; d.classList.add(sV), this.uList.insertBefore(d, this.uList.children[0]) } this.isMenu ? (this.popupWrapper = this.createElement("div", { className: "e-" + this.getModuleName() + "-wrapper " + gV, id: e.id + "-ej2menu-" + a + "-popup" }), this.hamburgerMode ? (i = e.offsetHeight, e.appendChild(this.popupWrapper)) : document.body.appendChild(this.popupWrapper), this.isNestedOrVertical = this.element.classList.contains("e-vertical") || 1 !== this.navIdx.length, this.popupObj = this.generatePopup(this.popupWrapper, this.uList, e, this.isNestedOrVertical), this.hamburgerMode ? this.calculateIndentSize(this.uList, e) : (this.cssClass && S([this.popupWrapper], this.cssClass.split(" ")), this.popupObj.hide()), this.triggerBeforeOpen(e, this.uList, t, r, 0, 0, "menu")) : (this.uList.style.zIndex = this.element.style.zIndex, s.appendChild(this.uList), this.triggerBeforeOpen(e, this.uList, t, r, i, n, "none")) } else this.uList = this.element, this.uList.style.zIndex = ht(o || this.element).toString(), this.triggerBeforeOpen(e, this.uList, t, r, i, n, "none") }, t.prototype.calculateIndentSize = function (e, t) { var i = getComputedStyle(t), n = parseInt(i.textIndent, 10); this.navIdx.length < 2 && !t.classList.contains("e-blankicon") ? n *= 2 : n += n / 4, e.style.textIndent = n + "px"; var r = e.querySelectorAll(".e-blankicon"); if (r && r.length) { var o = e.querySelector(".e-menu-icon"), s = getComputedStyle(o), a = parseInt(s.marginRight, 10) + o.offsetWidth + n; r.forEach(function (e) { return e.style.textIndent = a + "px" }) } }, t.prototype.generatePopup = function (e, t, i, n) { var r = this, o = new yM(e, { actionOnScroll: this.hamburgerMode ? "none" : "reposition", relateTo: i, collision: this.hamburgerMode ? { X: "none", Y: "none" } : { X: n || this.enableRtl ? "none" : "flip", Y: "fit" }, position: n && !this.hamburgerMode ? { X: "right", Y: "top" } : { X: "left", Y: "bottom" }, targetType: "relative", enableRtl: this.enableRtl, content: t, open: function () { var e = N(".e-menu-vscroll", o.element); e && (e.style.height = "inherit", e.style.maxHeight = ""); var t = N(".e-ul", o.element); o.element.style.maxHeight = "", t.focus(), r.triggerOpen(t) } }); return o }, t.prototype.createHeaderContainer = function (e) { e = e || this.getWrapper(); var t = this.createElement("span", { className: "e-" + this.getModuleName() + "-header" }), i = this.createElement("span", { className: "e-" + this.getModuleName() + "-title", innerHTML: this.title }), n = this.createElement("span", { className: "e-icons e-" + this.getModuleName() + "-icon", attrs: { tabindex: "0" } }); t.appendChild(i), t.appendChild(n), e.insertBefore(t, this.element) }, t.prototype.openHamburgerMenu = function (e) { this.hamburgerMode && this.triggerBeforeOpen(null, this.element, null, e, 0, 0, "hamburger") }, t.prototype.closeHamburgerMenu = function (e) { var t = this; if (this.hamburgerMode) { var i = void 0; i = { element: this.element, parentItem: null, event: e, items: this.items, cancel: !1 }, this.trigger("beforeClose", i, function (i) { i.cancel || (t.closeMenu(null, e), t.element.classList.add("e-hide-menu"), t.trigger("onClose", { element: t.element, parentItem: null, items: t.items })) }) } }, t.prototype.callFit = function (e, t, i, n, r) { return He(e, null, { X: t, Y: i }, { top: n, left: r }) }, t.prototype.triggerBeforeOpen = function (e, t, i, n, r, o, s) { var a = this, l = (this.getIndex(e ? e.id : null, !0), { element: t, items: e ? i[this.getField("children", this.navIdx.length - 1)] : this.items, parentItem: i, event: n, cancel: !1, top: r, left: o }), h = s; this.trigger("beforeOpen", l, function (t) { switch (h) { case "menu": a.hamburgerMode || (a.top = t.top, a.left = t.left), a.popupWrapper.style.display = "block", a.hamburgerMode || (a.popupWrapper.style.maxHeight = a.popupWrapper.getBoundingClientRect().height + "px", a.addScrolling(a.popupWrapper, a.uList, "vscroll", a.popupWrapper.offsetHeight, a.uList.offsetHeight), a.checkScrollOffset(n)); var r = void 0; if (a.hamburgerMode || a.left || a.top) a.popupObj.collision = { X: "none", Y: "none" }; else { if (a.popupObj.refreshPosition(a.lItem, !0), a.left = parseInt(a.popupWrapper.style.left, 10), a.top = parseInt(a.popupWrapper.style.top, 10), a.enableRtl && (a.left = a.isNestedOrVertical ? a.left - a.popupWrapper.offsetWidth - a.lItem.parentElement.offsetWidth : a.left - a.popupWrapper.offsetWidth + a.lItem.offsetWidth), r = _e(a.popupWrapper, null, a.left, a.top), (a.isNestedOrVertical || a.enableRtl) && (r.indexOf("right") > -1 || r.indexOf("left") > -1)) { a.popupObj.collision.X = "none"; var o = R(a.lItem, ".e-" + a.getModuleName() + "-wrapper").offsetWidth; a.left = a.enableRtl ? Ie(a.lItem, a.isNestedOrVertical ? "right" : "left", "top").left : a.left - a.popupWrapper.offsetWidth - o } ((r = _e(a.popupWrapper, null, a.left, a.top)).indexOf("left") > -1 || r.indexOf("right") > -1) && (a.left = a.callFit(a.popupWrapper, !0, !1, a.top, a.left).left), a.popupWrapper.style.left = a.left + "px" } a.popupWrapper.style.display = ""; break; case "none": a.top = t.top, a.left = t.left; break; case "hamburger": t.cancel || (a.element.classList.remove("e-hide-menu"), a.triggerOpen(a.element)) }if ("hamburger" !== h) if (t.cancel) a.isMenu && (a.popupObj.destroy(), I(a.popupWrapper)), a.navIdx.pop(); else if (a.isMenu) if (a.hamburgerMode) a.popupWrapper.style.top = a.top + "px", a.popupWrapper.style.left = "0px", a.toggleAnimation(a.popupWrapper); else { a.wireKeyboardEvent(a.popupWrapper), ee(a.popupWrapper, { selector: "." + pV }), a.popupWrapper.style.left = a.left + "px", a.popupWrapper.style.top = a.top + "px"; var s = "None" !== a.animationSettings.effect ? { name: a.animationSettings.effect, duration: a.animationSettings.duration, timingFunction: a.animationSettings.easing } : null; a.popupObj.show(s, a.lItem) } else a.setPosition(a.lItem, a.uList, a.top, a.left), a.toggleAnimation(a.uList); if ("right" === a.keyType) { var l = a.getUlByNavIdx(); if (e.classList.remove(oV), a.isMenu && 1 === a.navIdx.length && a.removeLIStateByClass([aV], [a.getWrapper()]), e.classList.add(aV), "enter" === a.action) { var d = { element: e, item: i, event: n }; a.trigger("select", d) } e.focus(), l = a.getUlByNavIdx(); var c = a.isValidLI(l.children[0], 0, a.action); l.children[c].classList.add(oV), l.children[c].focus() } }) }, t.prototype.checkScrollOffset = function (e) { var t = this.getWrapper(); if (t.children[0].classList.contains("e-menu-hscroll") && 1 === this.navIdx.length) { var i = d(e) ? this.element : R(e.target, "." + pV), n = N(".e-hscroll-bar", t), r = void 0, o = void 0; n.scrollLeft > i.offsetLeft && (n.scrollLeft -= n.scrollLeft - i.offsetLeft), (r = n.scrollLeft + n.offsetWidth) < (o = i.offsetLeft + i.offsetWidth) && (n.scrollLeft += o - r) } }, t.prototype.addScrolling = function (e, t, i, n, r) { if (this.enableScrolling && n < r) { var o = this.createElement("div", { className: "e-menu-" + i }); e.appendChild(o), o.appendChild(t), o.style.maxHeight = e.style.maxHeight; e.style.overflow = "hidden", "vscroll" === i ? new iV({ enableRtl: this.enableRtl }, o).scrollStep = N(".e-" + i + "-bar", e).offsetHeight / 2 : new YF({ enableRtl: this.enableRtl }, o).scrollStep = N(".e-" + i + "-bar", e).offsetWidth } }, t.prototype.setPosition = function (e, t, i, n) { if (this.toggleVisiblity(t), t === this.element || !d(n) && !d(i)) { if ((o = _e(t, null, n, i)).indexOf("right") > -1 && (n -= t.offsetWidth), o.indexOf("bottom") > -1) { i = (r = this.callFit(t, !1, !0, i, n)).top - 20 } if ((o = _e(t, null, n, i)).indexOf("left") > -1) { n = (r = this.callFit(t, !0, !1, i, n)).left } } else if (uw.isDevice) i = Number(this.element.style.top.replace("px", "")), n = Number(this.element.style.left.replace("px", "")); else { var r; i = (r = Ie(e, this.enableRtl ? "left" : "right", "top")).top, n = r.left; var o, s = (o = _e(t, null, this.enableRtl ? n - t.offsetWidth : n, i)).indexOf("left") > -1 || o.indexOf("right") > -1; s && (n = (r = Ie(e, this.enableRtl ? "right" : "left", "top")).left), (this.enableRtl || s) && (n = this.enableRtl && s ? n : n - t.offsetWidth), o.indexOf("bottom") > -1 && (i = (r = this.callFit(t, !1, !0, i, n)).top) } this.toggleVisiblity(t, !1), t.style.top = i + "px", t.style.left = n + "px" }, t.prototype.toggleVisiblity = function (e, t) { void 0 === t && (t = !0), e.style.visibility = t ? "hidden" : "", e.style.display = t ? "block" : "none" }, t.prototype.createItems = function (e) { var t = this, i = this.navIdx ? this.navIdx.length : 0, n = this.hasField(e, this.getField("iconCss", i)), r = { showIcon: n, moduleName: "menu", fields: this.getFields(i), template: this.template, itemCreating: function (e) { e.curData[e.fields.id] || (e.curData[e.fields.id] = p("menuitem")), e.curData.htmlAttributes = { role: "menuitem", tabindex: "-1" }, t.isMenu && !e.curData[t.getField("separator", i)] && (e.curData.htmlAttributes["aria-label"] = e.curData[e.fields.text]), "" === e.curData[e.fields.iconCss] && (e.curData[e.fields.iconCss] = null) }, itemCreated: function (e) { if (e.curData[t.getField("separator", i)] && (e.item.classList.add(lV), e.item.removeAttribute("role")), !n || e.curData[e.fields.iconCss] || e.curData[t.getField("separator", i)] || e.item.classList.add("e-blankicon"), e.curData[e.fields.child] && e.curData[e.fields.child].length) { var r = t.createElement("span", { className: "e-icons e-caret" }); e.item.appendChild(r), e.item.setAttribute("aria-haspopup", "true"), e.item.setAttribute("aria-expanded", "false"), t.isMenu || e.item.removeAttribute("role"), e.item.classList.add("e-menu-caret-icon") } t.isMenu && t.template && (e.item.setAttribute("id", e.curData[e.fields.id].toString()), e.item.removeAttribute("data-uid")); var o = { item: e.curData, element: e.item }; t.trigger("beforeItemRender", o) } }; this.setProperties({ items: this.items }, !0), this.isMenu && (r.templateID = this.element.id + "Template"); var o = hT.createList(this.createElement, e, r, !this.template); return o.setAttribute("tabindex", "0"), this.isMenu && o.setAttribute("role", "menu"), o }, t.prototype.moverHandler = function (e) { var t = e.target; this.liTrgt = t; var i = this.getLI(t), n = i ? R(i, ".e-" + this.getModuleName() + "-wrapper") : this.getWrapper(), r = this.getWrapper(), o = new RegExp("-ej2menu-(.*)-popup"), s = !1; if (n) { if (("" !== n.id ? o.exec(n.id)[1] : n.querySelector("ul").id) !== this.element.id) { if (this.removeLIStateByClass([oV, aV], [this.getWrapper()]), !this.navIdx.length) return; s = !0 } i && R(i, ".e-" + this.getModuleName() + "-wrapper") && !s && (this.removeLIStateByClass([oV], this.isMenu ? [n].concat(this.getPopups()) : [n]), this.removeLIStateByClass([oV], this.isMenu ? [r].concat(this.getPopups()) : [r]), i.classList.add(oV), this.showItemOnClick || this.clickHandler(e)), this.isMenu && (this.showItemOnClick || t.parentElement === n || R(t, ".e-" + this.getModuleName() + "-popup") || i && (!i || this.getIndex(i.id, !0).length) ? s && this.navIdx.length && (this.isClosed = !0, this.closeMenu(null, e)) : (this.removeLIStateByClass([oV, aV], [n]), this.navIdx.length && (this.isClosed = !0, this.closeMenu(null, e))), this.isClosed || this.removeStateWrapper(), this.isClosed = !1) } }, t.prototype.removeStateWrapper = function () { if (this.liTrgt) { var e = R(this.liTrgt, ".e-menu-vscroll"); "DIV" === this.liTrgt.tagName && e && this.removeLIStateByClass([oV, aV], [e]) } }, t.prototype.removeLIStateByClass = function (e, t) { for (var i, n = function (n) { e.forEach(function (e) { (i = N("." + e, t[n])) && i.classList.remove(e) }) }, r = 0; r < t.length; r++)n(r) }, t.prototype.getField = function (e, t) { void 0 === t && (t = 0); var i = this.fields[e]; return "string" == typeof i ? i : i[t] ? i[t].toString() : i[i.length - 1].toString() }, t.prototype.getFields = function (e) { return void 0 === e && (e = 0), { id: this.getField("itemId", e), iconCss: this.getField("iconCss", e), text: this.getField("text", e), url: this.getField("url", e), child: this.getField("children", e), separator: this.getField("separator", e) } }, t.prototype.hasField = function (e, t) { for (var i = 0, n = e.length; i < n; i++)if (e[i][t]) return !0; return !1 }, t.prototype.menuHeaderClickHandler = function (e) { this.element.classList.contains("e-hide-menu") ? this.openHamburgerMenu(e) : this.closeHamburgerMenu(e) }, t.prototype.clickHandler = function (e) { if (this.isTapHold) this.isTapHold = !1; else { var t = this.getWrapper(), i = e.target, n = this.cli = this.getLI(i), r = n ? R(n, ".e-" + this.getModuleName() + "-wrapper") : null, o = n && r && (this.isMenu ? this.getIndex(n.id, !0).length > 0 : t.firstElementChild.id === r.firstElementChild.id); if (o && "click" === e.type && !n.classList.contains(sV)) { this.setLISelected(n); var s = this.getIndex(n.id, !0), a = { element: n, item: this.getItem(s), event: e }; this.trigger("select", a) } if (o && ("mouseover" === e.type || uw.isDevice || this.showItemOnClick)) { var l = void 0; if (n.classList.contains(sV)) { l = t.children[this.navIdx.length - 1], this.toggleAnimation(l); (c = this.getLIByClass(l, aV)) && c.classList.remove(aV), I(n.parentNode), this.navIdx.pop() } else if (!n.classList.contains(lV)) { this.showSubMenu = !0; var h = n.parentNode; if (this.cliIdx = this.getIdx(h, n), this.isMenu || !uw.isDevice) { var d = this.isMenu ? Array.prototype.indexOf.call([t].concat(this.getPopups()), R(h, ".e-" + this.getModuleName() + "-wrapper")) : this.getIdx(t, h); if (this.navIdx[d] === this.cliIdx && (this.showSubMenu = !1), d !== this.navIdx.length && ("mouseover" !== e.type || this.showSubMenu)) { var c; (c = this.getLIByClass(h, aV)) && c.classList.remove(aV), this.isClosed = !0, this.keyType = "click", this.closeMenu(d + 1, e) } } this.isClosed || this.afterCloseMenu(e), this.isClosed = !1 } } else if (this.isMenu && "DIV" === i.tagName && this.navIdx.length && R(i, ".e-menu-vscroll")) { var p = R(i, "." + gV), u = Array.prototype.indexOf.call(this.getPopups(), p) + 1; u < this.navIdx.length && (this.closeMenu(u + 1, e), this.removeLIStateByClass([oV, aV], [p])) } else this.isMenu && this.hamburgerMode && "SPAN" === i.tagName && i.classList.contains("e-menu-icon") ? this.menuHeaderClickHandler(e) : "UL" === i.tagName && i.parentElement === t || n && n.querySelector(".e-caret") || this.closeMenu(null, e) } }, t.prototype.afterCloseMenu = function (e) { if (this.showSubMenu) { var t = this.navIdx.concat(this.cliIdx), i = this.getItem(t); i[this.getField("children", t.length - 1)] && i[this.getField("children", t.length - 1)].length ? (("mouseover" === e.type || uw.isDevice && this.isMenu) && this.setLISelected(this.cli), this.cli.setAttribute("aria-expanded", "true"), this.navIdx.push(this.cliIdx), this.openMenu(this.cli, i, null, null, e)) : "mouseover" !== e.type && this.closeMenu(null, e) } this.keyType = "" }, t.prototype.setLISelected = function (e) { var t = this.getLIByClass(e.parentElement, aV); t && t.classList.remove(aV), this.isMenu || e.classList.remove(oV), e.classList.add(aV) }, t.prototype.getLIByClass = function (e, t) { for (var i = 0, n = e.children.length; i < n; i++)if (e.children[i].classList.contains(t)) return e.children[i]; return null }, t.prototype.getItem = function (e) { var t = (e = e.slice()).pop(); return this.getItems(e)[t] }, t.prototype.getItems = function (e) { for (var t = this.items, i = 0; i < e.length; i++)t = t[e[i]][this.getField("children", i)]; return t }, t.prototype.getIdx = function (e, t, i) { void 0 === i && (i = !0); var n = Array.prototype.indexOf.call(e.children, t); return i && e.children[0].classList.contains(sV) && n-- , n }, t.prototype.getLI = function (e) { return "LI" === e.tagName && e.classList.contains("e-menu-item") ? e : R(e, "li.e-menu-item") }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this, n = this.getWrapper(), r = function (r) { switch (r) { case "cssClass": t.cssClass && x([n], t.cssClass.split(" ")), e.cssClass && S([n], e.cssClass.split(" ")); break; case "enableRtl": n.classList.toggle("e-rtl"); break; case "showItemOnClick": o.unWireEvents(), o.showItemOnClick = e.showItemOnClick, o.wireEvents(); break; case "enableScrolling": if (e.enableScrolling) { var s; o.element.classList.contains("e-vertical") ? o.addScrolling(n, o.element, "vscroll", n.offsetHeight, o.element.offsetHeight) : o.addScrolling(n, o.element, "hscroll", n.offsetWidth, o.element.offsetWidth), o.getPopups().forEach(function (e) { s = N(".e-ul", e), i.addScrolling(e, s, "vscroll", e.offsetHeight, s.offsetHeight) }) } else { var a = n.children[0]; o.element.classList.contains("e-vertical") ? o.destroyScrollObj(C(a, iV), a) : o.destroyScrollObj(C(a, YF), a), n.style.overflow = "", n.appendChild(o.element), o.getPopups().forEach(function (e) { a = e.children[0], i.destroyScrollObj(C(a, iV), a), e.style.overflow = "" }) } break; case "items": var l = void 0, h = void 0, d = void 0; if (Object.keys(t.items).length) { var c = Object.keys(e.items); for (u = 0; u < c.length; u++)(h = o.getChangedItemIndex(e, [], Number(c[u]))).length <= o.getWrapper().children.length && (l = h.pop(), d = o.getItems(h), o.insertAfter([d[l]], d[l].text), o.removeItem(d, h, l)), h.length = 0 } else { var p = o.element; p.innerHTML = "";[].slice.call(o.createItems(o.items).children).forEach(function (e) { p.appendChild(e) }); for (var u = 1, g = n.childElementCount; u < g; u++)I(n.lastElementChild); o.navIdx = [] } } }, o = this, s = 0, a = Object.keys(e); s < a.length; s++) { r(a[s]) } }, t.prototype.getChangedItemIndex = function (e, t, i) { t.push(i); var n = Object.keys(e.items[i]).pop(); if ("items" === n) { var r = e.items[i]; this.getChangedItemIndex(r, t, Number(Object.keys(r.items).pop())) } else "isParentArray" === n && t.length > 1 && t.pop(); return t }, t.prototype.removeItem = function (e, t, i) { e.splice(i, 1); var n = this.getWrapper().children; t.length < n.length && I(n[t.length].children[i]) }, t.prototype.unWireEvents = function (e) { void 0 === e && (e = this.target); var t = this.getWrapper(); if (e) { for (var i = void 0, n = void 0, r = O(e), o = 0, s = r.length; o < s; o++)i = r[o], this.isMenu ? Kv.remove(i, "click", this.menuHeaderClickHandler) : uw.isIos ? (n = C(i, yb)) && n.destroy() : Kv.remove(i, "contextmenu", this.cmenuHandler); if (!this.isMenu) for (var a = 0, l = lt(this.targetElement); a < l.length; a++) { var h = l[a]; Kv.remove(h, "scroll", this.scrollHandler) } } uw.isDevice || (Kv.remove(this.isMenu ? document : t, "mouseover", this.delegateMoverHandler), Kv.remove(document, "mousedown", this.delegateMouseDownHandler)), Kv.remove(document, "click", this.delegateClickHandler), this.unWireKeyboardEvent(t), this.rippleFn() }, t.prototype.unWireKeyboardEvent = function (e) { var t = C(e, cb); t && t.destroy() }, t.prototype.toggleAnimation = function (e, t) { var i = this; void 0 === t && (t = !0); var n, r; "None" !== this.animationSettings.effect && t ? this.animation.animate(e, { name: this.animationSettings.effect, duration: this.animationSettings.duration, timingFunction: this.animationSettings.easing, begin: function (e) { i.hamburgerMode ? (r = e.element.parentElement, e.element.style.position = "absolute", n = r.offsetHeight, e.element.style.maxHeight = e.element.offsetHeight + "px", r.style.maxHeight = "") : (e.element.style.display = "block", e.element.style.maxHeight = e.element.getBoundingClientRect().height + "px") }, progress: function (e) { i.hamburgerMode && (r.style.minHeight = n + e.element.offsetHeight + "px") }, end: function (e) { i.hamburgerMode ? (e.element.style.position = "", e.element.style.maxHeight = "", r.style.minHeight = "", e.element.style.top = "0px", e.element.children[0].focus(), i.triggerOpen(e.element.children[0])) : i.end(e.element, t) } }) : this.end(e, t) }, t.prototype.triggerOpen = function (e) { var t = this.navIdx.length ? this.getItem(this.navIdx) : null, i = { element: e, parentItem: t, items: t ? t.items : this.items }; this.trigger("onOpen", i) }, t.prototype.end = function (e, t) { if (t) if (e.style.display = "block", e.style.maxHeight = "", this.triggerOpen(e), e.querySelector("." + oV)) e.querySelector("." + oV).focus(); else { var i = void 0; (i = this.getWrapper().children[this.getIdx(this.getWrapper(), e) - 1]) ? i.querySelector("." + aV).focus() : this.element.focus() } else if (e === this.element) { var n = this.getLIByClass(this.element, oV); n && n.classList.remove(oV); var r = this.getLIByClass(this.element, aV); r && r.classList.remove(aV), e.style.display = "none" } else I(e) }, t.prototype.getPersistData = function () { return "" }, t.prototype.getWrapper = function () { return R(this.element, ".e-" + this.getModuleName() + "-wrapper") }, t.prototype.getIndex = function (e, t, i, n, r, o) { void 0 === i && (i = this.items), void 0 === n && (n = []), void 0 === r && (r = !1), void 0 === o && (o = 0); var s; o = r ? o + 1 : 0; for (var a = 0, l = i.length; a < l; a++) { if (s = i[a], (t ? s[this.getField("itemId", o)] : s[this.getField("text", o)]) === e) { n.push(a); break } if (s[this.getField("children", o)] && s[this.getField("children", o)].length) { if (-1 !== (n = this.getIndex(e, t, s[this.getField("children", o)], n, !0, o))[n.length - 1]) { n.unshift(a); break } a !== l - 1 && n.pop() } else a === l - 1 && n.push(-1) } return r || -1 !== n[0] ? n : [] }, t.prototype.enableItems = function (e, t, i) { void 0 === t && (t = !0); for (var n, r, o, s = "e-disabled", a = 0; a < e.length; a++)r = (o = this.getIndex(e[a], i)).pop(), (n = this.getUlByNavIdx(o.length)) && (t ? this.isMenu ? (n.children[r].classList.remove(s), n.children[r].removeAttribute("aria-disabled")) : uw.isDevice && !n.classList.contains("e-contextmenu") ? n.children[r + 1].classList.remove(s) : n.children[r].classList.remove(s) : this.isMenu ? (n.children[r].classList.add(s), n.children[r].setAttribute("aria-disabled", "true")) : uw.isDevice && !n.classList.contains("e-contextmenu") ? n.children[r + 1].classList.add(s) : n.children[r].classList.add(s)) }, t.prototype.showItems = function (e, t) { this.showHideItems(e, !1, t) }, t.prototype.hideItems = function (e, t) { this.showHideItems(e, !0, t) }, t.prototype.showHideItems = function (e, t, i) { for (var n, r, o, s = 0; s < e.length; s++)r = (o = this.getIndex(e[s], i)).pop(), (n = this.getUlByNavIdx(o.length)) && (t ? uw.isDevice && !n.classList.contains("e-contextmenu") ? n.children[r + 1].classList.add(uV) : n.children[r].classList.add(uV) : uw.isDevice && !n.classList.contains("e-contextmenu") ? n.children[r + 1].classList.remove(uV) : n.children[r].classList.remove(uV)) }, t.prototype.removeItems = function (e, t) { for (var i, n, r, o = 0; o < e.length; o++)i = (n = this.getIndex(e[o], t)).pop(), r = this.getItems(n), this.removeItem(r, n, i) }, t.prototype.insertAfter = function (e, t, i) { this.insertItems(e, t, i) }, t.prototype.insertBefore = function (e, t, i) { this.insertItems(e, t, i, !1) }, t.prototype.insertItems = function (e, t, i, n) { void 0 === n && (n = !0); for (var r, o, s, a, l, h = 0; h < e.length; h++) { o = (s = this.getIndex(t, i)).pop(), a = this.getItems(s), l = new fV(a[0], "items", e[h], !0), a.splice(n ? o + 1 : o, 0, l); var d = this.isMenu ? [this.getWrapper()].concat(this.getPopups()) : [].slice.call(this.getWrapper().children); if (s.length < d.length) { o = n ? o + 1 : o, this.hasField(a, this.getField("iconCss", s.length - 1)), r = this.createItems(a).children[o]; var c = this.isMenu ? N(".e-menu-parent", d[s.length]) : d[s.length]; c.insertBefore(r, c.children[o]) } } }, t.prototype.removeAttributes = function () { var e = this;["top", "left", "display", "z-index"].forEach(function (t) { e.element.style.removeProperty(t) }), ["role", "tabindex", "class", "style"].forEach(function (t) { "class" === t && e.element.classList.contains("e-menu-parent") && e.element.classList.remove("e-menu-parent"), -1 !== ["class", "style"].indexOf(t) && e.element.getAttribute(t) || e.element.removeAttribute(t), e.isMenu && "class" === t && e.element.classList.contains("e-vertical") && e.element.classList.remove("e-vertical") }) }, t.prototype.destroy = function () { var t = this.getWrapper(); if (t) { if (this.unWireEvents(), this.isMenu) this.closeMenu(), this.element.innerHTML = "", this.removeAttributes(), t.parentNode.insertBefore(this.element, t); else { if (this.clonedElement.style.display = "", "EJS-CONTEXTMENU" === this.clonedElement.tagName) S([this.clonedElement], ["e-control", "e-lib", "e-" + this.getModuleName()]), this.element = this.clonedElement; else if (this.refreshing && this.clonedElement.childElementCount && "LI" === this.clonedElement.children[0].tagName && this.setProperties({ items: [] }, !0), document.getElementById(this.clonedElement.id)) { var i = this.clonedElement.nextElementSibling; i && i !== t ? this.clonedElement.parentElement.insertBefore(this.element, i) : this.clonedElement.parentElement.appendChild(this.element), this.element.innerHTML = "", E([].slice.call(this.clonedElement.children), this.element), I(this.clonedElement), this.removeAttributes() } this.clonedElement = null } this.isMenu && this.clonedElement ? (I(this.element), t.style.display = "", t.classList.remove("e-" + this.getModuleName() + "-wrapper"), t.removeAttribute("data-ripple")) : I(t), e.prototype.destroy.call(this) } }, rV([X()], t.prototype, "beforeItemRender", void 0), rV([X()], t.prototype, "beforeOpen", void 0), rV([X()], t.prototype, "onOpen", void 0), rV([X()], t.prototype, "beforeClose", void 0), rV([X()], t.prototype, "onClose", void 0), rV([X()], t.prototype, "select", void 0), rV([X()], t.prototype, "created", void 0), rV([Y("")], t.prototype, "cssClass", void 0), rV([Y(!1)], t.prototype, "showItemOnClick", void 0), rV([Y("")], t.prototype, "target", void 0), rV([Y("")], t.prototype, "filter", void 0), rV([Y(null)], t.prototype, "template", void 0), rV([Y(!1)], t.prototype, "enableScrolling", void 0), rV([U({}, mV)], t.prototype, "fields", void 0), rV([G([], fV)], t.prototype, "items", void 0), rV([U({}, yV)], t.prototype, "animationSettings", void 0), t = rV([J], t) }(Kw), wV = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), bV = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, CV = "e-toolbar-items", LV = "e-toolbar-item", MV = "e-separator", SV = "e-popup-up-icon", xV = "e-popup-down-icon", TV = "e-overlay", DV = "e-popup-text", AV = "e-overflow-show", EV = "e-overflow-hide", jV = "e-hor-nav", IV = "e-tbar-pos", kV = "e-toolbar-pop", PV = "e-toolbar-popup", NV = "e-nav-active", OV = "e-ignore", RV = "e-popup-alone", zV = "e-multirow-separator", BV = "e-extended-separator", FV = "e-toolbar-extended", VV = "e-tbar-extended", WV = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return wV(t, e), bV([Y("")], t.prototype, "id", void 0), bV([Y("")], t.prototype, "text", void 0), bV([Y("auto")], t.prototype, "width", void 0), bV([Y("")], t.prototype, "cssClass", void 0), bV([Y(!1)], t.prototype, "showAlwaysInPopup", void 0), bV([Y("")], t.prototype, "prefixIcon", void 0), bV([Y("")], t.prototype, "suffixIcon", void 0), bV([Y("None")], t.prototype, "overflow", void 0), bV([Y("")], t.prototype, "template", void 0), bV([Y("Button")], t.prototype, "type", void 0), bV([Y("Both")], t.prototype, "showTextOn", void 0), bV([Y(null)], t.prototype, "htmlAttributes", void 0), bV([Y("")], t.prototype, "tooltipText", void 0), bV([Y("Left")], t.prototype, "align", void 0), bV([X()], t.prototype, "click", void 0), t }(ww), HV = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.resizeContext = n.resize.bind(n), n.keyConfigs = { moveLeft: "leftarrow", moveRight: "rightarrow", moveUp: "uparrow", moveDown: "downarrow", popupOpen: "enter", popupClose: "escape", tab: "tab", home: "home", end: "end" }, n } return wV(t, e), t.prototype.destroy = function () { var t = this, i = this.element; for (e.prototype.destroy.call(this), this.unwireEvents(), this.tempId.forEach(function (e) { d(t.element.querySelector(e)) || (document.body.appendChild(t.element.querySelector(e)).style.display = "none") }); i.firstElementChild;)i.removeChild(i.firstElementChild); this.trgtEle && i.appendChild(this.ctrlTem), this.clearProperty(), this.popObj = null, this.tbarAlign = null, this.remove(this.element, "e-toolpop"), i.removeAttribute("style"), ["aria-disabled", "aria-orientation", "aria-haspopup", "role"].forEach(function (e) { t.element.removeAttribute(e) }) }, t.prototype.preRender = function () { var e = { enableCollision: !0, scrollStep: this.scrollStep }; this.trigger("beforeCreate", e), this.enableCollision = e.enableCollision, this.scrollStep = e.scrollStep, this.scrollModule = null, this.popObj = null, this.tempId = [], this.tbarItemsCol = this.items, this.isVertical = !!this.element.classList.contains("e-vertical"), this.isExtendedOpen = !1, this.popupPriCount = 0, this.enableRtl && this.add(this.element, "e-rtl") }, t.prototype.wireEvents = function () { Kv.add(this.element, "click", this.clickHandler, this), window.addEventListener("resize", this.resizeContext), this.keyModule = new cb(this.element, { keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigs }), Kv.add(this.element, "keydown", this.docKeyDown, this), this.element.setAttribute("tabIndex", "0") }, t.prototype.docKeyDown = function (e) { if ("INPUT" !== e.target.tagName) { var t = !d(this.popObj) && D(this.popObj.element) && "Extended" !== this.overflowMode; 9 === e.keyCode && !0 === e.target.classList.contains("e-hor-nav") && t && this.popObj.hide({ name: "FadeOut", duration: 100 }); (40 === e.keyCode || 38 === e.keyCode || 35 === e.keyCode || 36 === e.keyCode) && e.preventDefault() } }, t.prototype.unwireEvents = function () { Kv.remove(this.element, "click", this.clickHandler), this.destroyScroll(), this.keyModule.destroy(), window.removeEventListener("resize", this.resizeContext), Kv.remove(document, "scroll", this.docEvent), Kv.remove(this.element, "keydown", this.docKeyDown), Kv.remove(document, "click", this.docEvent) }, t.prototype.clearProperty = function () { this.tbarEle = [], this.tbarAlgEle = { lefts: [], centers: [], rights: [] } }, t.prototype.docEvent = function (e) { var t = R(e.target, ".e-popup"); this.popObj && D(this.popObj.element) && !t && "Popup" === this.overflowMode && this.popObj.hide({ name: "FadeOut", duration: 100 }) }, t.prototype.destroyScroll = function () { this.scrollModule && (this.tbarAlign && this.add(this.scrollModule.element, IV), this.scrollModule.destroy(), this.scrollModule = null) }, t.prototype.destroyItems = function () { [].slice.call(this.element.querySelectorAll("." + LV)).forEach(function (e) { I(e) }); var e = this.element.querySelector("." + CV); this.tbarAlign && ([].slice.call(e.children).forEach(function (e) { I(e) }), this.tbarAlign = !1, this.remove(e, IV)), this.clearProperty() }, t.prototype.destroyMode = function () { this.scrollModule && (this.remove(this.scrollModule.element, "e-rtl"), this.destroyScroll()), this.remove(this.element, VV), this.remove(this.element, "e-extended-toolbar"); var e = this.element.querySelector(".e-toolbar-multirow"); e && this.remove(e, "e-toolbar-multirow"), this.popObj && this.popupRefresh(this.popObj.element, !0) }, t.prototype.add = function (e, t) { e.classList.add(t) }, t.prototype.remove = function (e, t) { e.classList.remove(t) }, t.prototype.elementFocus = function (e) { var t = e.firstElementChild; t ? (t.focus(), this.activeEleSwitch(e)) : e.focus() }, t.prototype.clstElement = function (e, t) { return e && this.popObj && D(this.popObj.element) ? this.popObj.element.querySelector("." + LV) : this.element === t || e ? this.element.querySelector("." + LV + ":not(." + TV + " ):not(." + MV + " ):not(.e-hidden )") : R(t, "." + LV) }, t.prototype.keyHandling = function (e, t, i, n, r) { var o = this.popObj, s = this.element, a = { name: "FadeOut", duration: 100 }; switch (t.action) { case "moveRight": if (this.isVertical) return; s === i ? this.elementFocus(e) : n || this.eleFocus(e, "next"); break; case "moveLeft": if (this.isVertical) return; n || this.eleFocus(e, "previous"); break; case "home": case "end": var l = void 0, h = void 0; if (e) { var d = R(e, ".e-popup"); d ? D(this.popObj.element) && (h = [].slice.call(d.children), l = "home" === t.action ? h[0] : h[h.length - 1]) : (h = this.element.querySelectorAll("." + CV + " ." + LV), l = "home" === t.action ? h[0] : h[h.length - 1]), l && this.elementFocus(l) } break; case "moveUp": case "moveDown": var c = "moveUp" === t.action ? "previous" : "next"; if (this.isVertical) "moveUp" === t.action ? this.eleFocus(e, "previous") : this.eleFocus(e, "next"); else if (o && R(i, ".e-popup")) { var p = o.element, u = p.firstElementChild; if ("previous" === c && u === e || "next" === c && p.lastElementChild === e) return; this.eleFocus(e, c) } else "moveDown" === t.action && o && D(o.element) && this.elementFocus(e); break; case "tab": if (!r && !n) { var g = e.firstElementChild; s === i && (this.activeEle ? this.activeEle.focus() : (this.activeEleRemove(g), g.focus()), this.element.removeAttribute("tabindex")) } break; case "popupClose": o && "Extended" !== this.overflowMode && o.hide(a); break; case "popupOpen": if (!n) return; o && !D(o.element) ? (o.element.style.top = s.offsetHeight + "px", o.show({ name: "FadeIn", duration: 100 })) : o.hide(a) } }, t.prototype.keyActionHandler = function (e) { var t = e.target; if ("INPUT" !== t.tagName && "TEXTAREA" !== t.tagName && !this.element.classList.contains(TV)) { e.preventDefault(); var i, n = t.classList.contains(jV), r = t.classList.contains("e-scroll-nav"); ((i = this.clstElement(n, t)) || r) && this.keyHandling(i, e, t, n, r) } }, t.prototype.disable = function (e) { var t = this.element; e ? t.classList.add(TV) : t.classList.remove(TV), t.setAttribute("tabindex", e ? "-1" : "0"), this.activeEle && this.activeEle.setAttribute("tabindex", e ? "-1" : "0"), this.scrollModule && this.scrollModule.disable(e), this.popObj && (D(this.popObj.element) && "Extended" !== this.overflowMode && this.popObj.hide(), t.querySelector("#" + t.id + "_nav").setAttribute("tabindex", e ? "-1" : "0")) }, t.prototype.eleContains = function (e) { return e.classList.contains(MV) || e.classList.contains(TV) || e.getAttribute("disabled") || e.classList.contains("e-hidden") || !D(e) }, t.prototype.eleFocus = function (e, t) { var i = Object(e)[t + "ElementSibling"]; if (i) { if (this.eleContains(i)) return void this.eleFocus(i, t); this.elementFocus(i) } else if (this.tbarAlign) { var n = Object(e.parentElement)[t + "ElementSibling"]; if (d(n) || 0 !== n.children.length || (n = Object(n)[t + "ElementSibling"]), !d(n) && n.children.length > 0) if ("next" === t) { var r = n.querySelector("." + LV); this.eleContains(r) ? this.eleFocus(r, t) : (r.firstElementChild.focus(), this.activeEleSwitch(r)) } else { r = n.lastElementChild; this.eleContains(r) ? this.eleFocus(r, t) : this.elementFocus(r) } } }, t.prototype.clickHandler = function (e) { var t = this, i = e.target, n = i.classList, r = this.element, o = !d(R(i, "." + kV)), s = R(i, "." + jV); s || (s = i), r.children[0].classList.contains("e-hscroll") || r.children[0].classList.contains("e-vscroll") || !n.contains(jV) || (n = i.querySelector(".e-icons").classList), (n.contains(SV) || n.contains(xV)) && this.popupClickHandler(r, s, "e-rtl"); var a, l = R(e.target, "." + LV); if (!d(l) && !l.classList.contains(TV) || s.classList.contains(jV)) { l && (a = this.items[this.tbarEle.indexOf(l)]); var h = { originalEvent: e, item: a }; a && !d(a.click) && this.trigger("items[" + this.tbarEle.indexOf(l) + "].click", h), h.cancel || this.trigger("clicked", h, function (e) { d(t.popObj) || !o || e.cancel || "Popup" !== t.overflowMode || t.popObj.hide({ name: "FadeOut", duration: 100 }) }) } }, t.prototype.popupClickHandler = function (e, t, i) { var n = this.popObj; D(n.element) ? (t.classList.remove(NV), n.hide({ name: "FadeOut", duration: 100 })) : (e.classList.contains(i) && (n.enableRtl = !0, n.position = { X: "left", Y: "top" }), 0 !== n.offsetX || e.classList.contains(i) || (n.enableRtl = !1, n.position = { X: "right", Y: "top" }), n.dataBind(), n.refreshPosition(), n.element.style.top = this.getElementOffsetY() + "px", "Extended" === this.overflowMode && (n.element.style.minHeight = "0px"), t.classList.add(NV), n.show({ name: "FadeIn", duration: 100 })) }, t.prototype.render = function () { this.initialize(), this.renderControl(), this.separator(), this.refreshToolbarTemplate(), this.wireEvents() }, t.prototype.initialize = function () { var e = v(this.width), t = v(this.height); "msie" === uw.info.name && "auto" === this.height && "MultiRow" !== this.overflowMode || z(this.element, { height: t }), z(this.element, { width: e }); var i = { role: "toolbar", "aria-disabled": "false", "aria-haspopup": "false", "aria-orientation": this.isVertical ? "vertical" : "horizontal" }; P(this.element, i) }, t.prototype.renderControl = function () { this.trgtEle = this.element.children.length > 0 ? this.element.querySelector("div") : null, this.tbarAlgEle = { lefts: [], centers: [], rights: [] }, this.renderItems(), this.renderOverflowMode(), this.tbarAlign && this.itemPositioning(), this.popObj && this.popObj.element.childElementCount > 1 && this.checkPopupRefresh(this.element, this.popObj.element) && this.popupRefresh(this.popObj.element, !1) }, t.prototype.changeOrientation = function () { var e = this.element; this.isVertical ? (e.classList.remove("e-vertical"), this.isVertical = !1, "auto" !== this.height && "100%" !== this.height || (e.style.height = this.height), e.setAttribute("aria-orientation", "horizontal")) : (e.classList.add("e-vertical"), this.isVertical = !0, e.setAttribute("aria-orientation", "vertical"), z(this.element, { height: v(this.height), width: v(this.width) })), this.destroyMode(), this.refreshOverflow() }, t.prototype.initScroll = function (e, t) { !this.scrollModule && this.checkOverflow(e, t[0]) && (this.tbarAlign && this.element.querySelector("." + CV + " .e-toolbar-center").removeAttribute("style"), this.isVertical ? this.scrollModule = new iV({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, t[0]) : this.scrollModule = new YF({ scrollStep: this.scrollStep, enableRtl: this.enableRtl }, t[0]), this.remove(this.scrollModule.element, IV), z(this.element, { overflow: "hidden" })) }, t.prototype.itemWidthCal = function (e) { var t, i = this, n = 0; return [].slice.call(O("." + LV, e)).forEach(function (e) { D(e) && (t = window.getComputedStyle(e), n += i.isVertical ? e.offsetHeight : e.offsetWidth, n += parseFloat(i.isVertical ? t.marginTop : t.marginRight), n += parseFloat(i.isVertical ? t.marginBottom : t.marginLeft)) }), n }, t.prototype.getScrollCntEle = function (e) { var t = this.isVertical ? ".e-vscroll-content" : ".e-hscroll-content"; return e.querySelector(t) }, t.prototype.checkOverflow = function (e, t) { if (d(e) || d(t) || !D(e)) return !1; var i = this.isVertical ? e.offsetHeight : e.offsetWidth, n = this.isVertical ? t.offsetHeight : t.offsetWidth; (this.tbarAlign || this.scrollModule || i === n) && (n = this.itemWidthCal(this.scrollModule ? this.getScrollCntEle(t) : t)); var r = e.querySelector("." + jV), o = e.querySelector(".e-scroll-nav"), s = 0; return r ? s = this.isVertical ? r.offsetHeight : r.offsetWidth : o && (s = this.isVertical ? 2 * o.offsetHeight : 2 * o.offsetWidth), n > i - s }, t.prototype.refreshOverflow = function () { this.resize() }, t.prototype.toolbarAlign = function (e) { this.tbarAlign && (this.add(e, IV), this.itemPositioning()) }, t.prototype.renderOverflowMode = function () { var e = this.element, t = e.querySelector("." + CV), i = this.popupPriCount > 0; if (e && e.children.length > 0) switch (this.offsetWid = e.offsetWidth, this.remove(this.element, "e-toolpop"), "msie" === uw.info.name && "auto" === this.height && (e.style.height = ""), this.overflowMode) { case "Scrollable": d(this.scrollModule) && this.initScroll(e, e.getElementsByClassName(CV)); break; case "Popup": this.add(this.element, "e-toolpop"), this.tbarAlign && this.removePositioning(), (this.checkOverflow(e, t) || i) && (this.createPopupEle(e, [].slice.call(O("." + CV + " ." + LV, e))), this.element.querySelector("." + jV).setAttribute("tabIndex", "0")), this.toolbarAlign(t); break; case "MultiRow": this.add(t, "e-toolbar-multirow"), this.checkOverflow(e, t) && this.tbarAlign && (this.removePositioning(), this.add(t, "e-multirow-pos")), "hidden" === e.style.overflow && (e.style.overflow = ""), "msie" !== uw.info.name && "auto" === e.style.height || (e.style.height = "auto"); break; case "Extended": this.add(this.element, "e-extended-toolbar"), (this.checkOverflow(e, t) || i) && (this.tbarAlign && this.removePositioning(), this.createPopupEle(e, [].slice.call(O("." + CV + " ." + LV, e))), this.element.querySelector("." + jV).setAttribute("tabIndex", "0")), this.toolbarAlign(t) } }, t.prototype.separator = function () { var e, t = this.element, i = [].slice.call(t.querySelectorAll("." + MV)), n = t.querySelector("." + zV), r = t.querySelector("." + BV); null !== (e = "MultiRow" === this.overflowMode ? n : r) && ("MultiRow" === this.overflowMode ? e.classList.remove(zV) : "Extended" === this.overflowMode && e.classList.remove(BV)); for (var o = 0; o <= i.length - 1; o++)i[o].offsetLeft < 30 && 0 !== i[o].offsetLeft && ("MultiRow" === this.overflowMode ? i[o].classList.add(zV) : "Extended" === this.overflowMode && i[o].classList.add(BV)) }, t.prototype.createPopupEle = function (e, t) { var i = e.querySelector("." + jV), n = this.isVertical; i || this.createPopupIcon(e), i = e.querySelector("." + jV); var r = n ? i.offsetHeight : i.offsetWidth, o = (n ? e.offsetHeight : e.offsetWidth) - r; this.element.classList.remove("e-rtl"), z(this.element, { direction: "initial" }), this.checkPriority(e, t, o, !0), this.enableRtl && this.element.classList.add("e-rtl"), this.element.style.removeProperty("direction"), this.createPopup() }, t.prototype.pushingPoppedEle = function (e, t, i, n, r) { var o = e.element, s = O("." + AV, i), a = 0, l = 0;[].slice.call(O("." + PV, o.querySelector("." + CV))).forEach(function (o, h) { s = O("." + AV, i), o.classList.contains(AV) && s.length > 0 ? e.tbResize && s.length > h ? (i.insertBefore(o, s[h]), ++l) : (i.insertBefore(o, i.children[s.length]), ++l) : o.classList.contains(AV) ? (i.insertBefore(o, i.firstChild), ++l) : e.tbResize && o.classList.contains(EV) && i.children.length > 0 && 0 === s.length ? (i.insertBefore(o, i.firstChild), ++l) : o.classList.contains(EV) ? t.push(o) : e.tbResize ? (i.insertBefore(o, i.childNodes[a + l]), ++a) : i.appendChild(o), o.classList.contains(MV) ? z(o, { display: "", height: r + "px" }) : z(o, { display: "", height: n + "px" }) }), t.forEach(function (e) { i.appendChild(e) }); for (var h = O("." + LV, o.querySelector("." + CV)), d = h.length - 1; d >= 0; d--) { var c = h[d]; if (!c.classList.contains(MV) || "Extended" === this.overflowMode) break; z(c, { display: "none" }) } }, t.prototype.createPopup = function () { var e, t, i, n, r = this.element; "Extended" === this.overflowMode && (n = r.querySelector("." + MV + ":not(." + PV + ")"), i = "auto" === r.style.height || "" === r.style.height ? null : n.offsetHeight), t = r.querySelector("." + LV + ":not(." + MV + "):not(." + PV + ")"), e = "auto" === r.style.height || "" === r.style.height ? null : t && t.offsetHeight; var o; if (r.querySelector("#" + r.id + "_popup." + kV)) o = r.querySelector("#" + r.id + "_popup." + kV); else { var s = this.createElement("div", { id: r.id + "_popup", className: kV + " " + FV }), a = this.createElement("div", { id: r.id + "_popup", className: kV }); o = "Extended" === this.overflowMode ? s : a } this.pushingPoppedEle(this, [], o, e, i), this.popupInit(r, o) }, t.prototype.getElementOffsetY = function () { return "Extended" === this.overflowMode && "border-box" === window.getComputedStyle(this.element).getPropertyValue("box-sizing") ? this.element.clientHeight : this.element.offsetHeight }, t.prototype.popupInit = function (e, t) { if (this.popObj) { var i = this.popObj.element; z(i, { maxHeight: "", display: "block" }), z(i, { maxHeight: i.offsetHeight + "px", display: "" }) } else { e.appendChild(t), z(this.element, { overflow: "" }); var n = window.getComputedStyle(this.element), r = new yM(null, { relateTo: this.element, offsetY: this.isVertical ? 0 : this.getElementOffsetY(), enableRtl: this.enableRtl, open: this.popupOpen.bind(this), close: this.popupClose.bind(this), collision: { Y: this.enableCollision ? "flip" : "none" }, position: this.enableRtl ? { X: "left", Y: "top" } : { X: "right", Y: "top" } }); if (r.appendTo(t), "Extended" === this.overflowMode && (r.width = parseFloat(n.width) + 2 * parseFloat(n.borderRightWidth), r.offsetX = 0), Kv.add(document, "scroll", this.docEvent.bind(this)), Kv.add(document, "click ", this.docEvent.bind(this)), r.element.style.maxHeight = r.element.offsetHeight + "px", this.isVertical && (r.element.style.visibility = "hidden"), this.isExtendedOpen) { var o = this.element.querySelector("." + jV); o.classList.add(NV), B(o.firstElementChild, [SV], [xV]), this.element.querySelector("." + FV).classList.add("e-popup-open") } else r.hide(); this.popObj = r, this.element.setAttribute("aria-haspopup", "true") } }, t.prototype.tbarPopupHandler = function (e) { "Extended" === this.overflowMode && (e ? this.add(this.element, VV) : this.remove(this.element, VV)) }, t.prototype.popupOpen = function (e) { var t = this.popObj; this.isVertical || (t.offsetY = this.getElementOffsetY(), t.dataBind()); var i = this.popObj.element, n = this.popObj.element.parentElement, r = n.querySelector("." + jV); z(t.element, { height: "auto", maxHeight: "" }), t.element.style.maxHeight = t.element.offsetHeight + "px", "Extended" === this.overflowMode && (t.element.style.minHeight = ""); var o = i.offsetTop + i.offsetHeight + Ie(n).top, s = r.firstElementChild; r.classList.add(NV), B(s, [SV], [xV]), this.tbarPopupHandler(!0); var a = d(window.scrollY) ? 0 : window.scrollY; if (!this.isVertical && window.innerHeight + a < o && this.element.offsetTop < i.offsetHeight) { var l = i.offsetHeight - (o - window.innerHeight - a + 5); t.height = l + "px"; for (var h = 0; h <= i.childElementCount; h++) { var c = i.children[h]; if (c.offsetTop + c.offsetHeight > l) { l = c.offsetTop; break } } z(t.element, { maxHeight: l + "px" }) } else if (this.isVertical) { var p = this.element.getBoundingClientRect(); z(t.element, { maxHeight: p.top + this.element.offsetHeight + "px", bottom: 0, visibility: "" }) } }, t.prototype.popupClose = function (e) { var t = this.element.querySelector("." + jV), i = t.firstElementChild; t.classList.remove(NV), B(i, [xV], [SV]), this.tbarPopupHandler(!1) }, t.prototype.checkPriority = function (e, t, i, n) { for (var r, o = this.popupPriCount > 0, s = i, a = 0, l = 0, h = 0, d = function (e, t) { var i = !1; return t.forEach(function (t) { e.classList.contains(t) && (i = !0) }), i }, c = t.length - 1; c >= 0; c--) { var p = void 0, u = window.getComputedStyle(t[c]); this.isVertical ? (p = parseFloat(u.marginTop), p += parseFloat(u.marginBottom)) : (p = parseFloat(u.marginRight), p += parseFloat(u.marginLeft)); var g = t[c] === this.tbarEle[0]; g && (this.tbarEleMrgn = p), r = this.isVertical ? t[c].offsetHeight : t[c].offsetWidth; var m = g ? r + p : r; if (d(t[c], [RV]) && o && (t[c].classList.add(PV), this.isVertical ? z(t[c], { display: "none", minHeight: m + "px" }) : z(t[c], { display: "none", minWidth: m + "px" }), h++), this.isVertical ? t[c].offsetTop + t[c].offsetHeight + p > i : t[c].offsetLeft + t[c].offsetWidth + p > i) { if (t[c].classList.contains(MV)) { if ("Extended" === this.overflowMode) { if (l === h) { d(f = t[c], [MV, OV]) && (t[c].classList.add(PV), h++) } l++ } else if ("Popup" === this.overflowMode) { if (a > 0 && l === h) { var f; d(f = t[c + l + (a - 1)], [MV, OV]) && z(f, { display: "none" }) } a++ , l = 0, h = 0 } } else l++; t[c].classList.contains(AV) && n ? i -= (this.isVertical ? t[c].offsetHeight : t[c].offsetWidth) + p : d(t[c], [MV, OV]) ? i -= (this.isVertical ? t[c].offsetHeight : t[c].offsetWidth) + p : (t[c].classList.add(PV), this.isVertical ? z(t[c], { display: "none", minHeight: m + "px" }) : z(t[c], { display: "none", minWidth: m + "px" }), h++) } } if (n) { var y = O("." + LV + ":not(." + PV + ")", this.element); this.checkPriority(e, y, s, !1) } }, t.prototype.createPopupIcon = function (e) { var t = e.id.concat("_nav"), i = "e-" + e.id.concat("_nav e-hor-nav"); i = "Extended" === this.overflowMode ? i + " e-expended-nav" : i; var n = this.createElement("div", { id: t, className: i }); "msie" !== uw.info.name && "edge" !== uw.info.name || n.classList.add("e-ie-align"); var r = this.createElement("div", { className: xV + " e-icons" }); n.appendChild(r), n.setAttribute("tabindex", "0"), e.appendChild(n) }, t.prototype.tbarPriRef = function (e, t, i, n, r, o, s, a) { var l = a, h = this.popObj.element, c = O("." + PV + ":not(." + AV + ")", h).length, p = function (e, t) { return e.classList.contains(t) }; if (0 === O(".e-toolbar-item:not(.e-separator):not(.e-overflow-show)", e).length) { var u = e.children[t - (t - i) - 1], g = !d(u) && p(u, OV); if (!d(u) && p(u, MV) && !D(u) || g) { u.style.display = "inherit"; var m = u.offsetWidth + 2 * parseFloat(window.getComputedStyle(u).marginRight), f = u.previousElementSibling; o + m < s || r ? (e.insertBefore(n, e.children[t + l - (t - i)]), d(f) || (f.style.display = "")) : f.classList.contains(MV) && (f.style.display = "none"), u.style.display = "" } else e.insertBefore(n, e.children[t + l - (t - i)]) } else e.insertBefore(n, e.children[t + l - c]) }, t.prototype.popupRefresh = function (e, t) { var i = this, n = this.element, r = this.isVertical, o = n.querySelector("." + jV), s = n.querySelector("." + CV); if (!d(o)) { s.removeAttribute("style"), e.style.display = "block"; var a; a = r ? n.offsetHeight - (o.offsetHeight + s.offsetHeight) : n.offsetWidth - (o.offsetWidth + s.offsetWidth); var l = 0;[].slice.call(e.children).forEach(function (e) { l += i.popupEleWidth(e), z(e, { position: "" }) }), a + (r ? o.offsetHeight : o.offsetWidth) > l && 0 === this.popupPriCount && (t = !0), this.popupEleRefresh(a, e, t), e.style.display = "", 0 === e.children.length && o && this.popObj && (I(o), o = null, this.popObj.destroy(), I(this.popObj.element), this.popObj = null, n.setAttribute("aria-haspopup", "false")) } }, t.prototype.ignoreEleFetch = function (e, t) { var i = [].slice.call(t.querySelectorAll("." + OV)), n = [], r = 0; return i.length > 0 ? (i.forEach(function (e) { n.push([].slice.call(t.children).indexOf(e)) }), n.forEach(function (t) { t <= e && r++ }), r) : 0 }, t.prototype.checkPopupRefresh = function (e, t) { t.style.display = "block"; var i = this.popupEleWidth(t.firstElementChild); t.firstElementChild.style.removeProperty("Position"); var n = e.offsetWidth - e.querySelector("." + jV).offsetWidth, r = e.querySelector("." + CV).offsetWidth; return t.style.removeProperty("display"), n > i + r }, t.prototype.popupEleWidth = function (e) { e.style.position = "absolute"; var t = this.isVertical ? e.offsetHeight : e.offsetWidth, i = e.querySelector(".e-tbar-btn-text"); if (e.classList.contains("e-tbtn-align") || e.classList.contains(DV)) { var n = e.children[0]; !d(i) && e.classList.contains(DV) ? i.style.display = "none" : !d(i) && e.classList.contains("e-toolbar-text") && (i.style.display = "block"), n.style.minWidth = "0%", t = parseFloat(this.isVertical ? e.style.minHeight : e.style.minWidth), n.style.minWidth = "", n.style.minHeight = "", d(i) || (i.style.display = "") } return t }, t.prototype.popupEleRefresh = function (e, t, i) { for (var n, r, o = this.popupPriCount > 0, s = this.tbarEle, a = this.element.querySelector("." + CV), l = 0, h = function (t) { if (t.classList.contains(RV) && o && !i) return "continue"; var h = d.popupEleWidth(t); if (t === d.tbarEle[0] && (h += d.tbarEleMrgn), t.style.position = "", !(h < e || i)) return "break"; if (z(t, { minWidth: "", height: "", minHeight: "" }), t.classList.contains(EV) || t.classList.remove(PV), r = d.tbarEle.indexOf(t), d.tbarAlign) { var c = d.items[r].align; r = d.tbarAlgEle[(c + "s").toLowerCase()].indexOf(t), s = d.tbarAlgEle[(c + "s").toLowerCase()], a = d.element.querySelector("." + CV + " .e-toolbar-" + c.toLowerCase()) } var p = 0; "Extended" !== d.overflowMode && s.slice(0, r).forEach(function (t) { (t.classList.contains(AV) || t.classList.contains(MV)) && (t.classList.contains(MV) && (t.style.display = "", e -= t.offsetWidth), p++) }), l = d.ignoreEleFetch(r, a), t.classList.contains(AV) ? (d.tbarPriRef(a, r, p, t, i, h, e, l), e -= t.offsetWidth) : 0 === r ? (a.insertBefore(t, a.firstChild), e -= t.offsetWidth) : (n = O("." + AV, d.popObj.element).length, a.insertBefore(t, a.children[r + l - n]), e -= t.offsetWidth), t.style.height = "" }, d = this, c = 0, p = [].slice.call(t.children); c < p.length; c++) { if ("break" === h(p[c])) break } this.checkOverflow(this.element, this.element.getElementsByClassName(CV)[0]) && !i && this.renderOverflowMode() }, t.prototype.removePositioning = function () { var e = this.element.querySelector("." + CV); if (!d(e) && e.classList.contains(IV)) { this.remove(e, IV); var t = [].slice.call(e.childNodes); t[1].removeAttribute("style"), t[2].removeAttribute("style") } }, t.prototype.refreshPositioning = function () { var e = this.element.querySelector("." + CV); this.add(e, IV), this.itemPositioning() }, t.prototype.itemPositioning = function () { var e, t = this.element.querySelector("." + CV); if (!d(t) && t.classList.contains(IV)) { var i, n = this.element.querySelector("." + jV); if (this.scrollModule) { var r = this.isVertical ? "e-vscroll-content" : "e-hscroll-content"; i = [].slice.call(t.querySelector("." + r).children) } else i = [].slice.call(t.childNodes); e = this.isVertical ? i[0].offsetHeight + i[2].offsetHeight : i[0].offsetWidth + i[2].offsetWidth; var o = this.isVertical ? this.element.offsetHeight : this.element.offsetWidth; if (n) { o -= this.isVertical ? n.offsetHeight : n.offsetWidth; var s = (this.isVertical ? n.offsetHeight : n.offsetWidth) + "px"; i[2].removeAttribute("style"), this.isVertical ? this.enableRtl ? i[2].style.top = s : i[2].style.bottom = s : this.enableRtl ? i[2].style.left = s : i[2].style.right = s } if (!(o <= e)) { var a = (o - e - (this.isVertical ? i[1].offsetHeight : i[1].offsetWidth)) / 2; i[1].removeAttribute("style"); var l = (this.isVertical ? i[0].offsetHeight : i[0].offsetWidth) + a + "px"; this.isVertical ? this.enableRtl ? i[1].style.marginBottom = l : i[1].style.marginTop = l : this.enableRtl ? i[1].style.marginRight = l : i[1].style.marginLeft = l } } }, t.prototype.tbarItemAlign = function (e, t, i) { var n = this; if (!e.showAlwaysInPopup || "Show" === e.overflow) { var r = []; if (r.push(this.createElement("div", { className: "e-toolbar-left" })), r.push(this.createElement("div", { className: "e-toolbar-center" })), r.push(this.createElement("div", { className: "e-toolbar-right" })), 0 === i && "Left" !== e.align) r.forEach(function (e) { t.appendChild(e) }), this.tbarAlign = !0, this.add(t, IV); else if ("Left" !== e.align) { var o = t.childNodes, s = r[0];[].slice.call(o).forEach(function (e) { n.tbarAlgEle.lefts.push(e), s.appendChild(e) }), t.appendChild(s), t.appendChild(r[1]), t.appendChild(r[2]), this.tbarAlign = !0, this.add(t, IV) } } }, t.prototype.ctrlTemplate = function () { var e = this; this.ctrlTem = this.trgtEle.cloneNode(!0), this.add(this.trgtEle, CV), this.tbarEle = [];[].slice.call(this.trgtEle.children).forEach(function (t) { "DIV" === t.tagName && (e.tbarEle.push(t), t.setAttribute("aria-disabled", "false"), e.add(t, LV)) }) }, t.prototype.renderItems = function () { var e, t, i, n = this.element, r = this.items; if (n && n.children.length > 0 && (e = n.querySelector("." + CV)), null != this.trgtEle) this.ctrlTemplate(); else if (n && r.length > 0) { e || (e = this.createElement("div", { className: CV })); for (var o = 0; o < r.length; o++)t = this.renderSubComponent(r[o], o), -1 === this.tbarEle.indexOf(t) && this.tbarEle.push(t), this.tbarAlign || this.tbarItemAlign(r[o], e, o), (i = e.querySelector(".e-toolbar-" + r[o].align.toLowerCase())) ? (r[o].showAlwaysInPopup && "Show" !== r[o].overflow || this.tbarAlgEle[(r[o].align + "s").toLowerCase()].push(t), i.appendChild(t)) : e.appendChild(t); n.appendChild(e) } }, t.prototype.setAttr = function (e, t) { for (var i, n = Object.keys(e), r = 0; r < n.length; r++)"class" === (i = n[r]) ? this.add(t, e[i]) : t.setAttribute(i, e[i]) }, t.prototype.enableItems = function (e, t) { var i = e, n = i.length; d(t) && (t = !0); var r = function (e, t) { e ? (t.classList.remove(TV), t.setAttribute("aria-disabled", "false")) : (t.classList.add(TV), t.setAttribute("aria-disabled", "true")) }; if (n && n > 1) { for (var o = 0, s = [].slice.call(i); o < s.length; o++) { r(t, s[o]) } t ? x(i, TV) : S(i, TV) } else { r(t, n && 1 === n ? i[0] : e) } }, t.prototype.addItems = function (e, t) { var i; this.extendedOpen(); var n = this.element.querySelector("." + CV); if (d(n)) this.itemsRerender(e); else { var r, o = "Left"; d(t) && (t = 0), e.forEach(function (e) { d(e.align) || "Left" === e.align || "Left" !== o || (o = e.align) }); for (var s = 0, a = e; s < a.length; s++) { var l = a[s]; if (d(l.type) && (l.type = "Button"), i = O("." + LV, this.element), l.align = o, r = this.renderSubComponent(l, t), this.tbarEle.length >= t && i.length >= 0) { d(this.scrollModule) && this.destroyMode(); var h = "L" === l.align[0] ? 0 : "C" === l.align[0] ? 1 : 2, c = void 0; this.tbarAlign || "Left" === o ? this.tbarAlign ? ((c = R(i[0], "." + CV).children[h]).insertBefore(r, c.children[t]), this.tbarAlgEle[(l.align + "s").toLowerCase()].splice(t, 0, r), this.refreshPositioning()) : 0 === i.length ? (i = O("." + CV, this.element))[0].appendChild(r) : i[0].parentNode.insertBefore(r, i[t]) : (this.tbarItemAlign(l, n, 1), this.tbarAlign = !0, (c = R(i[0], "." + CV).children[h]).appendChild(r), this.tbarAlgEle[(l.align + "s").toLowerCase()].push(r), this.refreshPositioning()), this.items.splice(t, 0, l), this.tbarEle.splice(t, 0, r), t++ , this.offsetWid = n.offsetWidth } } n.style.width = "", this.renderOverflowMode() } }, t.prototype.removeItems = function (e) { var t, i = e, n = [].slice.call(O("." + LV, this.element)); if ("number" == typeof i) t = parseInt(e.toString(), 10), this.removeItemByIndex(t, n); else if (i && i.length > 1) for (var r = 0, o = [].slice.call(i); r < o.length; r++) { var s = o[r]; t = this.tbarEle.indexOf(s), this.removeItemByIndex(t, n), n = O("." + LV, this.element) } else { s = i && i.length && 1 === i.length ? i[0] : e; t = n.indexOf(s), this.removeItemByIndex(t, n) } this.resize() }, t.prototype.removeItemByIndex = function (e, t) { if (this.tbarEle[e] && t[e]) { var i = this.tbarEle.indexOf(t[e]); if (this.tbarAlign) { var n = void 0; n = this.tbarAlgEle[(this.items[i].align + "s").toLowerCase()].indexOf(this.tbarEle[i]), this.tbarAlgEle[(this.items[i].align + "s").toLowerCase()].splice(n, 1) } I(t[e]), this.items.splice(i, 1), this.tbarEle.splice(i, 1) } }, t.prototype.templateRender = function (e, t, i, n) { var r, o = i.type, s = e; if ("object" == typeof e && (r = "function" == typeof s.appendTo), "string" != typeof e && r) { if ("Input" === o) { h = this.createElement("input"); i.id ? h.id = i.id : h.id = p("tbr-ipt"), t.appendChild(h), s.appendTo(h) } } else { var a = void 0, l = e; l = "string" == typeof e ? e.trim() : e; try { if ("object" != typeof e || d(e.tagName)) { if (document.querySelectorAll(l).length) { var h, c = (h = document.querySelector(l)).outerHTML.trim(); t.appendChild(h), h.style.display = "", d(c) || this.tempId.push(l) } } else t.appendChild(e) } catch (e) { a = ce(l) } var u = void 0; if (!d(a)) { var g = this.element.id + n + "_template"; u = a({}, this, "template", g, this.isStringTemplate) } !d(u) && u.length > 0 && [].slice.call(u).forEach(function (e) { d(e.tagName) || (e.style.display = ""), t.appendChild(e) }) } this.add(t, "e-template"), this.tbarEle.push(t) }, t.prototype.buttonRendering = function (e, t) { var i = this.createElement("button", { className: "e-tbar-btn" }); i.setAttribute("type", "button"); var n, r, o = e.text; e.id ? i.id = e.id : i.id = p("e-tbr-btn"); var s = this.createElement("span", { className: "e-tbar-btn-text" }); o ? (s.innerHTML = o, i.appendChild(s), i.classList.add("e-tbtn-txt")) : this.add(t, "e-tbtn-align"), (e.prefixIcon || e.suffixIcon) && (e.prefixIcon && e.suffixIcon || e.prefixIcon ? (n = e.prefixIcon + " e-icons", r = "Left") : (n = e.suffixIcon + " e-icons", r = "Right")); var a = new yL({ iconCss: n, iconPosition: r }); return a.createElement = this.createElement, a.appendTo(i), e.width && z(i, { width: v(e.width) }), i }, t.prototype.renderSubComponent = function (e, t) { var i, n; if ((i = this.createElement("div", { className: LV })).setAttribute("aria-disabled", "false"), this.tbarEle || (this.tbarEle = []), e.htmlAttributes && this.setAttr(e.htmlAttributes, i), e.tooltipText) { var r = this.createElement("div", { innerHTML: e.tooltipText }); i.setAttribute("title", r.textContent) } if (e.cssClass && (i.className = i.className + " " + e.cssClass), e.template) this.templateRender(e.template, i, e, t); else switch (e.type) { case "Button": (n = this.buttonRendering(e, i)).setAttribute("tabindex", "-1"), i.appendChild(n), i.addEventListener("click", this.itemClick.bind(this)); break; case "Separator": this.add(i, MV) }if (e.showTextOn) { var o = e.showTextOn; "Toolbar" === o ? (this.add(i, "e-toolbar-text"), this.add(i, "e-tbtn-align")) : "Overflow" === o && this.add(i, DV) } if (e.overflow) { var s = e.overflow; "Show" === s ? this.add(i, AV) : "Hide" === s && (i.classList.contains(MV) || this.add(i, EV)) } return "Show" !== e.overflow && e.showAlwaysInPopup && !i.classList.contains(MV) && (this.add(i, RV), this.popupPriCount++), i }, t.prototype.refreshToolbarTemplate = function () { for (var e = Object.keys(window), t = 0, i = this.items.length; t < i; t++) { var n = this.items[t]; n.template && e.indexOf("Blazor") > -1 && !this.isStringTemplate && 0 === n.template.indexOf("<div>Blazor") && (ue(this.element.id + t + "_template"), pe(this.element.id + t + "_template", "Template", n)) } }, t.prototype.itemClick = function (e) { this.activeEleSwitch(e.currentTarget) }, t.prototype.activeEleSwitch = function (e) { this.activeEleRemove(e.firstElementChild), this.activeEle.focus() }, t.prototype.activeEleRemove = function (e) { d(this.activeEle) || this.activeEle.setAttribute("tabindex", "-1"), this.activeEle = e, d(this.trgtEle) && !e.parentElement.classList.contains("e-template") ? e.removeAttribute("tabindex") : this.activeEle.setAttribute("tabindex", "0") }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.getModuleName = function () { return "toolbar" }, t.prototype.itemsRerender = function (e) { this.items = this.tbarItemsCol, this.destroyMode(), this.destroyItems(), this.items = e, this.tbarItemsCol = this.items, this.renderItems(), this.renderOverflowMode() }, t.prototype.resize = function () { var e = this.element; this.tbResize = !0, this.tbarAlign && this.itemPositioning(), this.popObj && "Popup" === this.overflowMode && this.popObj.hide(); var t = this.checkOverflow(e, e.getElementsByClassName(CV)[0]); if (!t) { this.destroyScroll(); var i = e.querySelector("." + CV); d(i) || (this.remove(i, "e-multirow-pos"), this.tbarAlign && this.add(i, IV)) } if (!t || !this.scrollModule || this.offsetWid !== e.offsetWidth) { if ((this.offsetWid > e.offsetWidth || t) && this.renderOverflowMode(), this.popObj) { if ("Extended" === this.overflowMode) { var n = window.getComputedStyle(this.element); this.popObj.width = parseFloat(n.width) + 2 * parseFloat(n.borderRightWidth) } this.tbarAlign && this.removePositioning(), this.popupRefresh(this.popObj.element, !1), this.tbarAlign && this.refreshPositioning() } this.offsetWid = e.offsetWidth, this.tbResize = !1, this.separator() } }, t.prototype.extendedOpen = function () { var e = this.element.querySelector("." + FV); "Extended" === this.overflowMode && e && (this.isExtendedOpen = e.classList.contains("e-popup-open")) }, t.prototype.onPropertyChanged = function (e, t) { var i = this.element; this.extendedOpen(); for (var n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "items": if (e.items instanceof Array && t.items instanceof Array) this.itemsRerender(e.items); else for (var o = Object.keys(e.items), s = 0; s < o.length; s++) { var a = parseInt(Object.keys(e.items)[s], 10), l = Object.keys(e.items[a])[0], h = (Object(t.items[a])[l], Object(e.items[a])[l]); if (this.tbarAlign || "align" === l) { this.refresh(), this.trigger("created"); break } var c = "showAlwaysInPopup" === l && !h, p = "overflow" === l && 0 !== this.popupPriCount; (c || this.items[a].showAlwaysInPopup && p) && --this.popupPriCount, d(this.scrollModule) && this.destroyMode(); I([].slice.call(O("." + CV + " ." + LV, i))[a]), this.tbarEle.splice(a, 1), this.addItems([this.items[a]], a), this.items.splice(a, 1), this.items[a].template && this.tbarEle.splice(this.items.length, 1) } break; case "width": var u = i.offsetWidth; z(i, { width: v(e.width) }), this.renderOverflowMode(), this.popObj && u < i.offsetWidth && this.popupRefresh(this.popObj.element, !1); break; case "height": z(this.element, { height: v(e.height) }); break; case "overflowMode": this.destroyMode(), this.renderOverflowMode(), this.enableRtl && this.add(i, "e-rtl"), this.refreshOverflow(); break; case "enableRtl": e.enableRtl ? this.add(i, "e-rtl") : this.remove(i, "e-rtl"), d(this.scrollModule) || (e.enableRtl ? this.add(this.scrollModule.element, "e-rtl") : this.remove(this.scrollModule.element, "e-rtl")), d(this.popObj) || (e.enableRtl ? this.add(this.popObj.element, "e-rtl") : this.remove(this.popObj.element, "e-rtl")), this.tbarAlign && this.itemPositioning() } } }, t.prototype.hideItem = function (e, t) { var i, n, r = "object" == typeof e, o = e, s = [].slice.call(O("." + LV, this.element)); if (r) n = e; else if (this.tbarEle[o]) { n = [].slice.call(O("." + LV, this.element))[o] } if (n) { if (t ? n.classList.add("e-hidden") : n.classList.remove("e-hidden"), t && d(this.element.getAttribute("tabindex")) && !n.classList.contains(MV)) { if (d(n.firstElementChild.getAttribute("tabindex"))) { n.firstElementChild.setAttribute("tabindex", "-1"); var a = [].slice.call(O("." + LV, this.element)); r && (o = a.indexOf(n)); for (var l = a[++o]; l;) { if (!this.eleContains(l)) { l.firstElementChild.removeAttribute("tabindex"); break } l = a[++o] } } } else if (d(this.element.getAttribute("tabindex")) && !n.classList.contains(MV)) for (var h = !1, c = !1, p = s[i = 0]; p;)if (p.classList.contains(MV)) p = s[++i]; else if (d(p.firstElementChild.getAttribute("tabindex"))) p.firstElementChild.setAttribute("tabindex", "-1"), h = !0; else { if (h && c) break; this.eleContains(p) || (p.firstElementChild.removeAttribute("tabindex"), c = !0), p = s[++i] } this.refreshOverflow() } }, bV([G([], WV)], t.prototype, "items", void 0), bV([Y("auto")], t.prototype, "width", void 0), bV([Y("auto")], t.prototype, "height", void 0), bV([Y("Scrollable")], t.prototype, "overflowMode", void 0), bV([X()], t.prototype, "clicked", void 0), bV([X()], t.prototype, "created", void 0), bV([X()], t.prototype, "destroyed", void 0), bV([X()], t.prototype, "beforeCreate", void 0), t = bV([J], t) }(Kw), _V = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), YV = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, UV = "e-acrdn-root", qV = "e-accordion", GV = "e-acrdn-item", QV = "e-acrdn-header", XV = "e-acrdn-header-content", JV = "e-acrdn-panel", ZV = "e-acrdn-content", KV = "e-toggle-icon", $V = "e-content-hide", eW = "e-selected", tW = "e-active", iW = "e-overlay", nW = "e-toggle-animation", rW = "e-expand-state", oW = "e-accordion-container", sW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return _V(t, e), YV([Y("SlideDown")], t.prototype, "effect", void 0), YV([Y(400)], t.prototype, "duration", void 0), YV([Y("linear")], t.prototype, "easing", void 0), t }(ww), aW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return _V(t, e), YV([U({ effect: "SlideUp", duration: 400, easing: "linear" }, sW)], t.prototype, "collapse", void 0), YV([U({ effect: "SlideDown", duration: 400, easing: "linear" }, sW)], t.prototype, "expand", void 0), t }(ww), lW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return _V(t, e), YV([Y(null)], t.prototype, "content", void 0), YV([Y(null)], t.prototype, "header", void 0), YV([Y(null)], t.prototype, "cssClass", void 0), YV([Y(null)], t.prototype, "iconCss", void 0), YV([Y(!1)], t.prototype, "expanded", void 0), t }(ww), hW = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.keyConfigs = { moveUp: "uparrow", moveDown: "downarrow", enter: "enter", space: "space", home: "home", end: "end" }, n } return _V(t, e), t.prototype.destroy = function () { var t = this, i = this.element; for (e.prototype.destroy.call(this), this.unwireEvents(), this.isDestroy = !0, this.restoreContent(null); i.firstElementChild;)i.removeChild(i.firstElementChild); if (this.trgtEle) for (; this.ctrlTem.firstElementChild;)i.appendChild(this.ctrlTem.firstElementChild); i.classList.remove(UV), i.removeAttribute("style"), ["aria-disabled", "aria-multiselectable", "role", "data-ripple"].forEach(function (e) { t.element.removeAttribute(e) }) }, t.prototype.preRender = function () { var e = R(this.element, "." + JV); this.isNested = !1, this.templateEle = [], this.isDestroy || (this.isDestroy = !1), d(e) ? this.element.classList.add(UV) : (e.classList.add("e-nested"), this.isNested = !0), this.enableRtl && this.add(this.element, "e-rtl"), this.enablePersistence && !d(this.expandedItems) || (this.expandedItems = []) }, t.prototype.add = function (e, t) { e.classList.add(t) }, t.prototype.remove = function (e, t) { e.classList.remove(t) }, t.prototype.render = function () { this.initialize(), this.renderControl(), this.wireEvents() }, t.prototype.initialize = function () { var e = v(this.width), t = v(this.height); z(this.element, { width: e, height: t }); this.expandedItems.length > 0 && (this.initExpand = this.expandedItems), P(this.element, { "aria-disabled": "false", role: "presentation", "aria-multiselectable": "true" }), "Single" === this.expandMode && this.element.setAttribute("aria-multiselectable", "false") }, t.prototype.renderControl = function () { this.trgtEle = this.element.children.length > 0 ? N("div", this.element) : null, this.renderItems(), this.initItemExpand() }, t.prototype.unwireEvents = function () { Kv.remove(this.element, "click", this.clickHandler), d(this.keyModule) || this.keyModule.destroy() }, t.prototype.wireEvents = function () { Kv.add(this.element, "click", this.clickHandler, this), this.isNested || this.isDestroy || ee(this.element, { selector: "." + QV }), this.isNested || (this.keyModule = new cb(this.element, { keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigs, eventName: "keydown" })) }, t.prototype.focusIn = function (e) { e.target.parentElement.classList.add("e-item-focus") }, t.prototype.focusOut = function (e) { e.target.parentElement.classList.remove("e-item-focus") }, t.prototype.ctrlTemplate = function () { this.ctrlTem = this.element.cloneNode(!0); var e, t = N("." + oW, this.element); e = t ? t.children : this.element.children; var i = [];[].slice.call(e).forEach(function (e) { i.push({ header: e.childElementCount > 0 && e.children[0] ? e.children[0].innerHTML : "", content: e.childElementCount > 1 && e.children[1] ? e.children[1].innerHTML : "" }), e.parentNode.removeChild(e) }), t && this.element.removeChild(t), this.setProperties({ items: i }, !0) }, t.prototype.toggleIconGenerate = function () { var e = this.createElement("div", { className: KV }), t = this.createElement("span", { className: "e-tgl-collapse-icon e-icons" }); return e.appendChild(t), e }, t.prototype.initItemExpand = function () { var e = this.initExpand.length; if (0 !== e) if ("Single" === this.expandMode) this.expandItem(!0, this.initExpand[e - 1]); else for (var t = 0; t < e; t++)this.expandItem(!0, this.initExpand[t]) }, t.prototype.renderItems = function () { var e, t = this, i = this.element; d(this.initExpand) && (this.initExpand = []), d(this.trgtEle) || this.ctrlTemplate(); var n = this.items; i && n.length > 0 && n.forEach(function (n, r) { e = t.renderInnerItem(n, r), i.appendChild(e); var o = Object.keys(window); n.header && o.indexOf("Blazor") > -1 && !t.isStringTemplate && 0 === n.header.indexOf("<div>Blazor") && pe(t.element.id + r + "_header", "HeaderTemplate", n), e.childElementCount > 0 && (Kv.add(e.querySelector("." + QV), "focus", t.focusIn, t), Kv.add(e.querySelector("." + QV), "blur", t.focusOut, t)) }) }, t.prototype.clickHandler = function (e) { var t, i, n = this, r = e.target, o = {}; if (R(r, "." + qV) === this.element) { r.classList.add("e-target"); var s = R(r, "." + GV), a = R(r, "." + QV), l = R(r, "." + JV); s && (d(a) || d(l)) && (a = s.children[0], l = s.children[1]), a && (i = N("." + KV, a)); var h; a ? h = R(a, "." + GV) : l && (h = R(l, "." + GV)); var c = []; t = this.getIndexByItem(s), h && (o.item = this.items[this.getIndexByItem(h)]), o.originalEvent = e; if (!d(i) && s.childElementCount <= 1 && (d(l) || !d(N("." + QV + " ." + KV, h)))) { s.appendChild(this.contentRendering(t)); var p = Object.keys(window); o.item.content && p.indexOf("Blazor") > -1 && !this.isStringTemplate && 0 === o.item.content.indexOf("<div>Blazor") && pe(this.element.id + t + "_content", "ContentTemplate", o.item), this.ariaAttrUpdate(s) } this.trigger("clicked", o); var u = l && !d(N(".e-target", l)), g = l && !d(N("." + qV, l)) && d(R(r, ".e-acrdn-panel .e-accordion")), m = l && d(N("." + qV, l)) || !(R(r, "." + qV) === this.element); if (u = u && (g || m), r.classList.remove("e-target"), !(r.classList.contains(JV) || r.classList.contains(ZV) || u)) { var f = this.element.querySelector("." + oW), y = f ? f.children : this.element.children;[].slice.call(y).forEach(function (e) { e.classList.contains(tW) && c.push(e) }); var v = [].slice.call(this.element.querySelectorAll("." + GV + " [e-animate]")); if (v.length > 0) for (var w = 0, b = v; w < b.length; w++) { var C = b[w]; c.push(C.parentElement) } var L = -1 !== c.indexOf(h) && "true" === l.getAttribute("e-animate"), M = !1; if (!d(s) && !d(a)) { var S = N("." + JV, s), x = R(s, "." + UV).querySelector("." + rW); if (d(S)) return; M = x === s, !D(S) || L && !h.classList.contains(eW) ? (c.length > 0 && "Single" === this.expandMode && !L && c.forEach(function (e) { n.collapse(N("." + JV, e)), e.classList.remove(rW) }), this.expand(S)) : this.collapse(S), d(x) || M || x.classList.remove(rW) } } } }, t.prototype.eleMoveFocus = function (e, t, i) { var n, r = R(i, "." + GV); i === t ? n = ("moveUp" === e ? i.lastElementChild : i).querySelector("." + QV) : i.classList.contains(QV) && (r = "moveUp" === e ? r.previousElementSibling : r.nextElementSibling) && (n = N("." + QV, r)), n && n.focus() }, t.prototype.keyActionHandler = function (e) { var t = e.target; if (!d(R(e.target, QV)) || t.classList.contains(qV) || t.classList.contains(QV)) { var i, n = this.element; switch (e.action) { case "moveUp": case "moveDown": this.eleMoveFocus(e.action, n, t); break; case "space": case "enter": !d(i = t.nextElementSibling) && i.classList.contains(JV) ? "true" !== i.getAttribute("e-animate") && t.click() : t.click(); break; case "home": case "end": ("home" === e.action ? n.firstElementChild.children[0] : n.lastElementChild.children[0]).focus() } } }, t.prototype.headerEleGenerate = function () { var e = this.createElement("div", { className: QV, id: p("acrdn_header") }); return P(e, { tabindex: "0", role: "heading", "aria-expanded": "false", "aria-selected": "false", "aria-disabled": "false", "aria-level": this.items.length.toString() }), e }, t.prototype.renderInnerItem = function (e, t) { var i; if (i = this.createElement("div", { className: GV }), i.id = p("acrdn_item"), e.header && this.angularnativeCondiCheck(e, "header")) { var n = this.headerEleGenerate(), r = this.createElement("div", { className: XV }); n.appendChild(r), n.appendChild(this.fetchElement(r, e.header, t, !0)), i.appendChild(n) } var o = N("." + QV, i); if (!e.expanded || d(t) || this.enablePersistence || -1 === this.initExpand.indexOf(t) && this.initExpand.push(t), e.cssClass && i.classList.add(e.cssClass), e.iconCss) { var s = this.createElement("div", { className: "e-acrdn-header-icon" }), a = this.createElement("span", { className: e.iconCss + " e-icons" }); s.appendChild(a), d(o) ? ((o = this.headerEleGenerate()).appendChild(s), i.appendChild(o)) : o.insertBefore(s, o.childNodes[0]) } if (e.content && this.angularnativeCondiCheck(e, "content")) { var l = this.toggleIconGenerate(); d(o) && (o = this.headerEleGenerate(), i.appendChild(o)), o.appendChild(l), this.add(i, "e-select") } return i }, t.prototype.angularnativeCondiCheck = function (e, t) { var i = "content" === t ? e.content : e.header; if (this.isAngular && !d(i.elementRef)) { var n = i.elementRef.nativeElement.data; if (d(n) || "" === n || -1 === n.indexOf("bindings=")) return !0; var r = JSON.parse(i.elementRef.nativeElement.data.replace("bindings=", "")); return !(!d(r) && "false" === r["ng-reflect-ng-if"]) } return !0 }, t.prototype.fetchElement = function (e, t, i, n) { var r, o, s = Object.keys(window); try { if (document.querySelectorAll(t).length) { var a = document.querySelector(t); o = a.outerHTML.trim(), e.appendChild(a), a.style.display = "" } } catch (i) { "string" == typeof t && s.indexOf("Blazor") > -1 && 0 !== t.indexOf("<div>Blazor") ? e.innerHTML = t : r = ce(t) } var l; if (!d(r)) { var h = void 0; e.classList.contains(XV) ? h = this.element.id + i + "_header" : e.classList.contains(ZV) && (h = this.element.id + i + "_content"), l = r({}, null, null, h, this.isStringTemplate) } return d(l) || !(l.length > 0) || d(l[0].tagName) && 1 === l.length ? 0 === e.childElementCount && (e.innerHTML = t) : [].slice.call(l).forEach(function (t) { d(t.tagName) || (t.style.display = ""), e.appendChild(t) }), d(o) || -1 === this.templateEle.indexOf(t) && this.templateEle.push(t), e }, t.prototype.ariaAttrUpdate = function (e) { var t = N("." + QV, e), i = N("." + JV, e); t.setAttribute("aria-controls", i.id), i.setAttribute("aria-labelledby", t.id) }, t.prototype.contentRendering = function (e) { var t = this.items[e].content, i = this.createElement("div", { className: JV + " " + $V, id: p("acrdn_panel") }); P(i, { "aria-hidden": "true" }); var n = this.createElement("div", { className: ZV }); return i.appendChild(this.fetchElement(n, t, e, !1)), i }, t.prototype.expand = function (e) { var t, i = this, n = R(e, "." + GV); if (!(d(e) || D(e) && "true" !== e.getAttribute("e-animate") || n.classList.contains(iW))) { var r = R(n, "." + UV).querySelector("." + rW), o = { name: this.animation.expand.effect, duration: this.animation.expand.duration, timingFunction: this.animation.expand.easing }, s = N("." + KV, n).firstElementChild; t = { element: n, item: this.items[this.getIndexByItem(n)], index: this.getIndexByItem(n), content: n.querySelector("." + JV), isExpanded: !0 }; var a = o.name; this.trigger("expanding", t, function (t) { t.cancel || (s.classList.add(nW), i.expandedItemsPush(n), d(r) || r.classList.remove(rW), n.classList.add(rW), "None" === o.name ? (i.expandProgress("begin", s, e, n, t), i.expandProgress("end", s, e, n, t)) : i.expandAnimation(a, s, e, n, o, t)) }) } }, t.prototype.expandAnimation = function (e, t, i, n, r, o) { var s, a = this; this.lastActiveItemId = n.id, "SlideDown" === e ? (r.begin = function () { a.expandProgress("begin", t, i, n, o), i.style.position = "absolute", s = n.offsetHeight, i.offsetHeight, i.style.maxHeight = i.offsetHeight + "px", n.style.maxHeight = "" }, r.progress = function () { n.style.minHeight = s + i.offsetHeight + "px" }, r.end = function () { z(i, { position: "", maxHeight: "" }), n.style.minHeight = "", a.expandProgress("end", t, i, n, o) }) : (r.begin = function () { a.expandProgress("begin", t, i, n, o) }, r.end = function () { a.expandProgress("end", t, i, n, o) }), new fw(r).animate(i) }, t.prototype.expandProgress = function (e, t, i, n, r) { this.remove(i, $V), this.add(n, eW), this.add(t, "e-expand-icon"), "end" === e && (this.add(n, tW), i.setAttribute("aria-hidden", "false"), P(i.previousElementSibling, { "aria-selected": "true", "aria-expanded": "true" }), t.classList.remove(nW), this.trigger("expanded", r)) }, t.prototype.expandedItemsPush = function (e) { var t = this.getIndexByItem(e); -1 === this.expandedItems.indexOf(t) && this.expandedItems.push(t) }, t.prototype.getIndexByItem = function (e) { var t = this.getItemElements(); return [].slice.call(t).indexOf(e) }, t.prototype.getItemElements = function () { var e = [], t = this.element.children; return [].slice.call(t).forEach(function (t) { t.classList.contains(GV) && e.push(t) }), e }, t.prototype.expandedItemsPop = function (e) { var t = this.getIndexByItem(e); this.expandedItems.splice(this.expandedItems.indexOf(t), 1) }, t.prototype.collapse = function (e) { var t, i = this, n = R(e, "." + GV); if (!d(e) && D(e) && !n.classList.contains(iW)) { var r = { name: this.animation.collapse.effect, duration: this.animation.collapse.duration, timingFunction: this.animation.collapse.easing }, o = N("." + KV, n).firstElementChild; t = { element: n, item: this.items[this.getIndexByItem(n)], index: this.getIndexByItem(n), content: n.querySelector("." + JV), isExpanded: !1 }; var s = r.name; this.trigger("expanding", t, function (t) { t.cancel || (i.expandedItemsPop(n), n.classList.add(rW), o.classList.add(nW), "None" === r.name ? (i.collapseProgress("begin", o, e, n, t), i.collapseProgress("end", o, e, n, t)) : i.collapseAnimation(s, e, n, o, r, t)) }) } }, t.prototype.collapseAnimation = function (e, t, i, n, r, o) { var s, a, l, h, d = this; this.lastActiveItemId = i.id, "SlideUp" === e ? (r.begin = function () { l = i.offsetHeight, i.style.minHeight = l + "px", t.style.position = "absolute", s = i.offsetHeight, a = t.offsetHeight, t.style.maxHeight = a + "px", d.collapseProgress("begin", n, t, i, o) }, r.progress = function () { (h = s - (a - t.offsetHeight)) < l && (i.style.minHeight = h + "px") }, r.end = function () { t.style.display = "none", d.collapseProgress("end", n, t, i, o), i.style.minHeight = "", z(t, { position: "", maxHeight: "", display: "" }) }) : (r.begin = function () { d.collapseProgress("begin", n, t, i, o) }, r.end = function () { d.collapseProgress("end", n, t, i, o) }), new fw(r).animate(t) }, t.prototype.collapseProgress = function (e, t, i, n, r) { this.remove(t, "e-expand-icon"), this.remove(n, eW), "end" === e && (this.add(i, $V), t.classList.remove(nW), this.remove(n, tW), i.setAttribute("aria-hidden", "true"), P(i.previousElementSibling, { "aria-selected": "false", "aria-expanded": "false" }), this.trigger("expanded", r)) }, t.prototype.getModuleName = function () { return "accordion" }, t.prototype.itemAttribUpdate = function () { var e = this.getItemElements(), t = this.items.length; e.forEach(function (e) { N("." + QV, e).setAttribute("aria-level", "" + t) }) }, t.prototype.addItem = function (e, t) { var i = this.element, n = this.getItemElements(); if (d(t) && (t = this.items.length), i.childElementCount >= t) { this.items.splice(t, 0, e); var r = this.renderInnerItem(e, t); i.childElementCount === t ? i.appendChild(r) : i.insertBefore(r, n[t]), Kv.add(r.querySelector("." + QV), "focus", this.focusIn, this), Kv.add(r.querySelector("." + QV), "blur", this.focusOut, this), this.itemAttribUpdate() } this.expandedItems = [], this.expandedItemRefresh(i), e.expanded && this.expandItem(!0, t) }, t.prototype.expandedItemRefresh = function (e) { var t = this, i = this.getItemElements();[].slice.call(i).forEach(function (e) { e.classList.contains(eW) && t.expandedItemsPush(e) }) }, t.prototype.removeItem = function (e) { var t = this.getItemElements()[e]; d(t) || (this.restoreContent(e), I(t), this.items.splice(e, 1), this.itemAttribUpdate(), this.expandedItems = [], this.expandedItemRefresh(this.element)) }, t.prototype.select = function (e) { var t = this.getItemElements()[e]; d(t) || d(N("." + QV, t)) || t.children[0].focus() }, t.prototype.hideItem = function (e, t) { var i = this.getItemElements()[e]; d(i) || (d(t) && (t = !0), t ? this.add(i, "e-hide") : this.remove(i, "e-hide")) }, t.prototype.enableItem = function (e, t) { var i = this.getItemElements()[e]; if (!d(i)) { var n = i.firstElementChild; t ? (this.remove(i, iW), P(n, { tabindex: "0", "aria-disabled": "false" }), n.focus()) : (i.classList.contains(tW) && (this.expandItem(!1, e), this.eleMoveFocus("movedown", this.element, n)), this.add(i, iW), n.setAttribute("aria-disabled", "true"), n.removeAttribute("tabindex")) } }, t.prototype.expandItem = function (e, t) { var i = this, n = (this.element, this.getItemElements()); if (d(t)) if ("Single" === this.expandMode && e) { var r = n[n.length - 1]; this.itemExpand(e, r, this.getIndexByItem(r)) } else { var o = N("#" + this.lastActiveItemId, this.element);[].slice.call(n).forEach(function (t) { i.itemExpand(e, t, i.getIndexByItem(t)), t.classList.remove(rW) }); var s = N("." + rW, this.element); s && s.classList.remove(rW), o && o.classList.add(rW) } else { if (d(r = n[t]) || !r.classList.contains("e-select") || r.classList.contains(tW) && e) return; "Single" === this.expandMode && this.expandItem(!1), this.itemExpand(e, r, t) } }, t.prototype.itemExpand = function (e, t, i) { var n = t.children[1]; if (!t.classList.contains(iW)) { if (d(n) && e) { n = this.contentRendering(i), t.appendChild(n); var r = Object.keys(window), o = this.items[i]; o.content && r.indexOf("Blazor") > -1 && !this.isStringTemplate && 0 === o.content.indexOf("<div>Blazor") && pe(this.element.id + i + "_content", "ContentTemplate", o), this.ariaAttrUpdate(t) } else if (d(n)) return; e ? this.expand(n) : this.collapse(n) } }, t.prototype.destroyItems = function () { this.restoreContent(null), [].slice.call(this.element.querySelectorAll("." + GV)).forEach(function (e) { I(e) }) }, t.prototype.restoreContent = function (e) { var t; t = d(e) ? this.element : this.element.querySelectorAll("." + GV)[e], this.templateEle.forEach(function (e) { d(t.querySelector(e)) || (document.body.appendChild(t.querySelector(e)).style.display = "none") }) }, t.prototype.updateItem = function (e, t) { if (!d(e)) { var i = this.items[t]; this.items.splice(t, 1), this.restoreContent(t), I(e), this.addItem(i, t) } }, t.prototype.getPersistData = function () { return this.addOnPersist(["expandedItems"]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = this.element, n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "items": if (e.items instanceof Array && t.items instanceof Array) this.destroyItems(), this.renderItems(), this.initItemExpand(); else for (var o = Object.keys(e.items), s = 0; s < o.length; s++) { var a = parseInt(Object.keys(e.items)[s], 10), l = Object.keys(e.items[a])[0], h = O("." + GV, this.element)[a], c = Object(t.items[a])[l], p = Object(e.items[a])[l]; ("header" === l || "iconCss" === l || "expanded" === l || "content" === l && "" === c) && this.updateItem(h, a), "cssClass" !== l || d(h) || (h.classList.remove(c), h.classList.add(p)), "content" !== l || d(h) || 2 !== h.children.length || (h.classList.contains(eW) && this.expandItem(!1, a), I(h.querySelector("." + JV))) } break; case "enableRtl": e.enableRtl ? this.add(i, "e-rtl") : this.remove(i, "e-rtl"); break; case "height": z(this.element, { height: v(e.height) }); break; case "width": z(this.element, { width: v(e.width) }); break; case "expandMode": "Single" === e.expandMode ? (this.element.setAttribute("aria-multiselectable", "false"), this.expandedItems.length > 1 && this.expandItem(!1)) : this.element.setAttribute("aria-multiselectable", "true") } } }, YV([G([], lW)], t.prototype, "items", void 0), YV([Y("100%")], t.prototype, "width", void 0), YV([Y("auto")], t.prototype, "height", void 0), YV([Y("Multiple")], t.prototype, "expandMode", void 0), YV([U({}, aW)], t.prototype, "animation", void 0), YV([X()], t.prototype, "clicked", void 0), YV([X()], t.prototype, "expanding", void 0), YV([X()], t.prototype, "expanded", void 0), YV([X()], t.prototype, "created", void 0), YV([X()], t.prototype, "destroyed", void 0), t = YV([J], t) }(Kw), dW = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), cW = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, pW = function (e) { function t(t, i) { return e.call(this, t, i) || this } return dW(t, e), t.prototype.preRender = function () { this.isMenu = !1, this.element.id = this.element.id || p("ej2-contextmenu"), e.prototype.preRender.call(this) }, t.prototype.initialize = function () { e.prototype.initialize.call(this), P(this.element, { role: "menu", tabindex: "0" }), this.element.style.zIndex = ht(this.element).toString() }, t.prototype.open = function (t, i, n) { e.prototype.openMenu.call(this, null, null, t, i, null, n) }, t.prototype.close = function () { e.prototype.closeMenu.call(this) }, t.prototype.onPropertyChanged = function (t, i) { e.prototype.onPropertyChanged.call(this, t, i); for (var n = 0, r = Object.keys(t); n < r.length; n++) { switch (r[n]) { case "filter": this.close(), this.filter = t.filter; break; case "target": this.unWireEvents(i.target), this.wireEvents() } } }, t.prototype.getModuleName = function () { return "contextmenu" }, cW([Y("")], t.prototype, "target", void 0), cW([Y("")], t.prototype, "filter", void 0), cW([G([], fV)], t.prototype, "items", void 0), t = cW([J], t) }(vV), uW = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gW = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, mW = "e-vertical", fW = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.tempItems = [], n } return uW(t, e), t.prototype.getModuleName = function () { return "menu" }, t.prototype.preRender = function () { if (this.isMenu = !0, this.element.id = this.element.id || p("ej2-menu"), this.template) try { document.querySelectorAll(this.template).length && (this.template = document.querySelector(this.template).innerHTML.trim(), this.clearChanges()) } catch (e) { } else this.updateMenuItems(this.items); e.prototype.preRender.call(this) }, t.prototype.initialize = function () { e.prototype.initialize.call(this), P(this.element, { role: "menubar", tabindex: "0" }), "Vertical" === this.orientation ? (this.element.classList.add(mW), this.hamburgerMode && !this.target && this.element.previousElementSibling.classList.add(mW), this.element.setAttribute("aria-orientation", "vertical")) : uw.isDevice && !this.enableScrolling && this.element.parentElement.classList.add("e-scrollable"), this.hamburgerMode && (this.element.parentElement.classList.add("e-hamburger"), "Horizontal" === this.orientation && this.element.classList.add("e-hide-menu")) }, t.prototype.updateMenuItems = function (e) { this.tempItems = e, this.items = [], this.tempItems.map(this.createMenuItems, this), this.setProperties({ items: this.items }, !0), this.tempItems = [] }, t.prototype.onPropertyChanged = function (t, i) { for (var n = 0, r = Object.keys(t); n < r.length; n++) { switch (r[n]) { case "orientation": "Vertical" === t.orientation ? (this.element.classList.add(mW), this.hamburgerMode && (this.target || this.element.previousElementSibling.classList.add(mW), this.element.classList.remove("e-hide-menu")), this.element.setAttribute("aria-orientation", "vertical")) : (this.element.classList.remove(mW), this.hamburgerMode && (this.target || this.element.previousElementSibling.classList.remove(mW), this.element.classList.add("e-hide-menu")), this.element.removeAttribute("aria-orientation")); break; case "items": Object.keys(i.items).length || this.updateMenuItems(t.items); break; case "hamburgerMode": this.element.previousElementSibling || e.prototype.createHeaderContainer.call(this), t.hamburgerMode ? this.element.parentElement.classList.add("e-hamburger") : this.element.parentElement.classList.remove("e-hamburger"), "Vertical" === this.orientation ? (this.target || this.element.previousElementSibling.classList.add(mW), this.element.classList.remove("e-hide-menu")) : (this.target ? this.element.previousElementSibling.classList.add(mW) : this.element.previousElementSibling.classList.remove(mW), this.element.classList[t.hamburgerMode ? "add" : "remove"]("e-hide-menu")); break; case "title": this.hamburgerMode && this.element.previousElementSibling && (this.element.previousElementSibling.querySelector(".e-menu-title").innerHTML = t.title); break; case "target": this.hamburgerMode && (this.unWireEvents(i.target), this.wireEvents(), "Horizontal" === this.orientation && (t.target ? this.element.previousElementSibling.classList.add(mW) : (this.element.previousElementSibling || e.prototype.createHeaderContainer.call(this), this.element.previousElementSibling.classList.remove(mW)), this.element.classList.add("e-hide-menu"))) } } e.prototype.onPropertyChanged.call(this, t, i) }, t.prototype.createMenuItems = function (e) { var t, i, n, r = this.items; if (t = this.getField("parentId"), e[t]) { for (i = this.getIndex(e[t].toString(), !0), n = 0; n < i.length; n++)r[i[n]].items || (r[i[n]].items = []), r = r[i[n]].items; r.push(e) } else this.items.push(e) }, t.prototype.open = function () { e.prototype.openHamburgerMenu.call(this) }, t.prototype.close = function () { e.prototype.closeHamburgerMenu.call(this) }, gW([Y("Horizontal")], t.prototype, "orientation", void 0), gW([Y("")], t.prototype, "target", void 0), gW([Y(null)], t.prototype, "template", void 0), gW([Y(!1)], t.prototype, "enableScrolling", void 0), gW([Y(!1)], t.prototype, "hamburgerMode", void 0), gW([Y("Menu")], t.prototype, "title", void 0), gW([U({}, mV)], t.prototype, "fields", void 0), t = gW([J], t) }(vV), yW = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), vW = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, wW = "e-tab-header", bW = "e-content", CW = "e-item", LW = "e-active", MW = "e-disable", SW = "e-hidden", xW = "e-close-icon", TW = "e-tab-wrap", DW = "e-toolbar-items", AW = "e-toolbar-item", EW = "e-toolbar-popup", jW = "e-progress", IW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yW(t, e), vW([Y("SlideLeftIn")], t.prototype, "effect", void 0), vW([Y(600)], t.prototype, "duration", void 0), vW([Y("ease")], t.prototype, "easing", void 0), t }(ww), kW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yW(t, e), vW([U({ effect: "SlideLeftIn", duration: 600, easing: "ease" }, IW)], t.prototype, "previous", void 0), vW([U({ effect: "SlideRightIn", duration: 600, easing: "ease" }, IW)], t.prototype, "next", void 0), t }(ww), PW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yW(t, e), vW([Y("")], t.prototype, "text", void 0), vW([Y("")], t.prototype, "iconCss", void 0), vW([Y("left")], t.prototype, "iconPosition", void 0), t }(ww), NW = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yW(t, e), vW([U({}, PW)], t.prototype, "header", void 0), vW([Y("")], t.prototype, "content", void 0), vW([Y("")], t.prototype, "cssClass", void 0), vW([Y(!1)], t.prototype, "disabled", void 0), t }(ww), OW = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.show = {}, n.hide = {}, n.animateOptions = {}, n.animObj = new fw(n.animateOptions), n.maxHeight = 0, n.title = "Close", n.lastIndex = 0, n.isAdd = !1, n.isIconAlone = !1, n.resizeContext = n.refreshActElePosition.bind(n), n.keyConfigs = { tab: "tab", home: "home", end: "end", enter: "enter", space: "space", delete: "delete", moveLeft: "leftarrow", moveRight: "rightarrow", moveUp: "uparrow", moveDown: "downarrow" }, n } return yW(t, e), t.prototype.destroy = function () { var t = this; if (d(this.tbObj) || this.tbObj.destroy(), this.unWireEvents(), ["role", "aria-disabled", "aria-activedescendant", "tabindex", "aria-orientation"].forEach(function (e) { t.element.removeAttribute(e) }), this.expTemplateContent(), this.isTemplate) { var i = N(".e-tab > ." + bW, this.element); this.element.classList.remove("e-template"), d(i) || (i.innerHTML = this.cnt) } else for (; this.element.firstElementChild;)k(this.element.firstElementChild); e.prototype.destroy.call(this), this.trigger("destroyed") }, t.prototype.preRender = function () { var e = R(this.element, "." + bW); this.prevIndex = 0, this.isNested = !1, this.isPopup = !1, this.initRender = !0, this.isSwipeed = !1, this.itemIndexArray = [], this.templateEle = [], d(e) || (e.parentElement.classList.add("e-nested"), this.isNested = !0); var t = uw.info.name, i = "msie" === t ? "e-ie" : "edge" === t ? "e-edge" : "safari" === t ? "e-safari" : ""; z(this.element, { width: v(this.width), height: v(this.height) }), this.setCssClass(this.element, this.cssClass, !0), P(this.element, { role: "tablist", "aria-disabled": "false", "aria-activedescendant": "" }), this.setCssClass(this.element, i, !0), this.updatePopAnimationConfig() }, t.prototype.render = function () { this.btnCls = this.createElement("span", { className: "e-icons " + xW, attrs: { title: this.title } }), this.renderContainer(), this.wireEvents(), this.initRender = !1 }, t.prototype.renderContainer = function () { var e = this.element; if (this.items.length > 0 && 0 === e.children.length) e.appendChild(this.createElement("div", { className: bW })), this.setOrientation(this.headerPlacement, this.createElement("div", { className: wW })), this.isTemplate = !1; else if (this.element.children.length > 0) { this.isTemplate = !0, e.classList.add("e-template"); var t = e.querySelector("." + wW); t && "Bottom" === this.headerPlacement && this.setOrientation(this.headerPlacement, t) } if (!d(N("." + wW, this.element)) && !d(N("." + bW, this.element))) { if (this.renderHeader(), this.tbItems = N("." + wW + " ." + DW, this.element), d(this.tbItems) || ee(this.tbItems, { selector: ".e-tab-wrap" }), this.renderContent(), O("." + AW, this.element).length > 0) { var i = void 0; this.tbItems = N("." + wW + " ." + DW, this.element), this.bdrLine = this.createElement("div", { className: "e-indicator e-hidden e-ignore" }), d(i = N("." + this.scrCntClass, this.tbItems)) ? this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild) : i.insertBefore(this.bdrLine, i.firstChild), this.setContentHeight(!0), this.select(this.selectedItem) } this.setRTL(this.enableRtl) } }, t.prototype.renderHeader = function () { var e = this, t = this.headerPlacement, i = []; if (this.hdrEle = N("." + wW, this.element), this.addVerticalClass(), this.isTemplate) { this.element.children.length > 1 && this.element.children[1].classList.contains(wW) && this.setProperties({ headerPlacement: "Bottom" }, !0); for (var n = this.hdrEle.children.length, r = [], o = 0; o < n; o++)r.push(this.hdrEle.children.item(o).innerHTML); if (n > 0) { for (; this.hdrEle.firstElementChild;)I(this.hdrEle.firstElementChild); this.hdrEle.appendChild(this.createElement("div", { className: "e-items" })), r.forEach(function (t, i) { e.lastIndex = i; var n = { className: CW, id: "e-item_" + i, attrs: { role: "tab", "aria-controls": bW + "_" + i, "aria-selected": "false" } }, r = e.createElement("span", { className: "e-tab-text", innerHTML: t, attrs: { role: "presentation" } }).outerHTML, o = e.createElement("div", { className: "e-text-wrap", innerHTML: r + e.btnCls.outerHTML }).outerHTML, s = e.createElement("div", { className: TW, innerHTML: o, attrs: { tabIndex: "-1" } }); N(".e-items", e.element).appendChild(e.createElement("div", n)), O(".e-item", e.element)[i].appendChild(s) }) } } else i = this.parseObject(this.items, 0); this.tbObj = new HV({ width: "Left" === t || "Right" === t ? "auto" : "100%", height: "Left" === t || "Right" === t ? "100%" : "auto", overflowMode: this.overflowMode, items: 0 !== i.length ? i : [], clicked: this.clickHandler.bind(this) }), this.tbObj.isStringTemplate = !0, this.tbObj.createElement = this.createElement, this.tbObj.appendTo(this.hdrEle), this.updateOrientationAttribute(), this.setCloseButton(this.showCloseButton) }, t.prototype.renderContent = function () { this.cntEle = N("." + bW, this.element); var e = O("." + AW, this.element); if (this.isTemplate) { this.cnt = this.cntEle.children.length > 0 ? this.cntEle.innerHTML : ""; for (var t = this.cntEle.children, i = 0; i < e.length; i++)t.length - 1 >= i && (t.item(i).className += CW, P(t.item(i), { role: "tabpanel", "aria-labelledby": "e-item_" + i }), t.item(i).id = bW + "_" + i) } }, t.prototype.reRenderItems = function () { this.renderContainer(), d(this.cntEle) || (this.touchModule = new yb(this.cntEle, { swipe: this.swipeHandler.bind(this) })) }, t.prototype.parseObject = function (e, t) { var i, n = this, r = O("." + AW, this.element).length, o = [], s = []; return e.forEach(function (e, a) { var l = d(e.header.iconPosition) ? "" : e.header.iconPosition, h = d(e.header.iconCss) ? "" : e.header.iconCss; if (d(e.header) || d(e.header.text) || 0 === e.header.text.length && "" === h) s.push(a); else { var c = e.header.text; n.lastIndex = 0 === r ? a : n.isReplace ? t + a : n.lastIndex + 1; var p = e.disabled ? " e-disable e-overlay" : ""; i = n.createElement("div", { className: "e-tab-text", attrs: { role: "presentation" } }); var u = c instanceof Object ? c.outerHTML : c, g = !d(u) && "" !== u; d(c.tagName) ? n.headerTextCompile(i, c, a) : i.appendChild(c); var m = n.createElement("span", { className: "e-icons e-tab-icon e-icon-" + l + " " + h }), f = n.createElement("div", { className: "e-text-wrap" }); f.appendChild(i), "" !== c && void 0 !== c && "" !== h ? ("left" === l || "top" === l ? f.insertBefore(m, f.firstElementChild) : f.appendChild(m), i, n.isIconAlone = !1) : ("" === h ? i : m) === m && (I(i), f.appendChild(m), n.isIconAlone = !0); var y = e.disabled ? {} : { tabIndex: "-1" }; f.appendChild(n.btnCls.cloneNode(!0)); var v = n.createElement("div", { className: TW, attrs: y }); v.appendChild(f), n.itemIndexArray === [] ? n.itemIndexArray.push("e-item_" + n.lastIndex) : n.itemIndexArray.splice(t + a, 0, "e-item_" + n.lastIndex); var w = { htmlAttributes: { id: "e-item_" + n.lastIndex, role: "tab", "aria-selected": "false" }, template: v }; w.cssClass = e.cssClass + " " + p + " " + ("" !== h ? "e-i" + l : "") + " " + (g ? "" : "e-icon"), "top" !== l && "bottom" !== l || n.element.classList.add("e-vertical-icon"), o.push(w), a++ } }), this.isAdd || s.forEach(function (e) { n.items.splice(e, 1) }), this.isIconAlone ? this.element.classList.add("e-icon-tab") : this.element.classList.remove("e-icon-tab"), o }, t.prototype.removeActiveClass = function (e) { var t = O(":root ." + wW + " ." + AW + "." + LW, this.element)[0], i = N("." + wW, this.element); "Bottom" === this.headerPlacement && (t = O(":root ." + wW + " ." + AW + "." + LW, i)[0]), d(t) || t.classList.remove(LW) }, t.prototype.checkPopupOverflow = function (e) { this.tbPop = N(".e-toolbar-pop", this.element); var t = N(".e-hor-nav", this.element), i = N("." + DW, this.element), n = i.lastChild, r = !1; return !this.isVertical() && (this.enableRtl && t.offsetLeft + t.offsetWidth > i.offsetLeft || !this.enableRtl && t.offsetLeft < i.offsetWidth) ? r = !0 : this.isVertical() && t.offsetTop < n.offsetTop + n.offsetHeight && (r = !0), r && (e.classList.add(EW), this.tbPop.insertBefore(e.cloneNode(!0), O("." + EW, this.tbPop)[0]), e.outerHTML = ""), !0 }, t.prototype.popupHandler = function (e) { var t = e.querySelector(".e-ripple-element"); d(t) || (t.outerHTML = "", e.querySelector("." + TW).classList.remove("e-ripple")), this.tbItem = O("." + DW + " ." + AW, this.hdrEle); var i = this.tbItem[this.tbItem.length - 1]; if (0 !== this.tbItem.length) { if (e.classList.remove(EW), e.removeAttribute("style"), this.tbItems.appendChild(e.cloneNode(!0)), this.actEleId = e.id, e.outerHTML = "", this.checkPopupOverflow(i)) { var n = this.tbItems.lastChild.previousElementSibling; this.checkPopupOverflow(n) } this.isPopup = !0 } return O("." + AW, this.tbItems).length - 1 }, t.prototype.updateOrientationAttribute = function () { P(this.element, { "aria-orientation": this.isVertical() ? "vertical" : "horizontal" }) }, t.prototype.setCloseButton = function (e) { var t = N("." + wW, this.element); !0 === e ? t.classList.add("e-close-show") : t.classList.remove("e-close-show"), this.tbObj.refreshOverflow(), this.refreshActElePosition() }, t.prototype.prevCtnAnimation = function (e, t) { this.enableRtl || this.element.classList.contains("e-rtl"); return this.isPopup || e <= t ? "SlideLeftIn" === this.animation.previous.effect ? { name: "SlideLeftOut", duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing } : null : "SlideRightIn" === this.animation.next.effect ? { name: "SlideRightOut", duration: this.animation.next.duration, timingFunction: this.animation.next.easing } : null }, t.prototype.triggerPrevAnimation = function (e, t) { var i = this, n = this.prevCtnAnimation(t, this.selectedItem); d(n) ? e.classList.remove(LW) : (n.begin = function () { z(e, { position: "absolute" }), e.classList.add(jW), e.classList.add("e-view") }, n.end = function () { e.style.display = "none", e.classList.remove(LW), e.classList.remove(jW), e.classList.remove("e-view"), z(e, { display: "", position: "" }), 0 !== e.childNodes.length || i.isTemplate || I(e) }, new fw(n).animate(e)) }, t.prototype.triggerAnimation = function (e, t) { var i, n = this, r = this.prevIndex;[].slice.call(this.element.querySelector("." + bW).children).forEach(function (e) { e.id === n.prevActiveEle && (i = e) }); var o = this.tbItem[r], s = this.extIndex(this.tbItem[this.selectedItem].id), a = this.getTrgContent(this.cntEle, s); if (d(i) && !d(o)) { var l = this.extIndex(o.id); i = this.getTrgContent(this.cntEle, l) } if (this.prevActiveEle = a.id, this.initRender || !1 === t || this.animation === {} || d(this.animation)) i && i !== a && i.classList.remove(LW); else { var h, c = N("." + bW, this.element); if (this.prevIndex > this.selectedItem && !this.isPopup) { var p = this.animation.previous.effect; h = { name: "None" === p ? "" : "SlideLeftIn" !== p ? p : "SlideLeftIn", duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing } } else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) { var u = this.animation.next.effect; h = { name: "None" === u ? "" : "SlideRightIn" !== u ? u : "SlideRightIn", duration: this.animation.next.duration, timingFunction: this.animation.next.easing } } h.progress = function () { c.classList.add(jW), n.setActiveBorder() }, h.end = function () { c.classList.remove(jW), a.classList.add(LW) }, this.initRender || d(i) || this.triggerPrevAnimation(i, r), this.isPopup = !1, "" === h.name ? a.classList.add(LW) : new fw(h).animate(a) } }, t.prototype.keyPressed = function (e) { var t = R(e, "." + wW + " ." + AW), i = this.getEleIndex(t); !d(this.popEle) && e.classList.contains("e-hor-nav") ? this.popEle.classList.contains("e-popup-open") ? this.popObj.hide(this.hide) : this.popObj.show(this.show) : e.classList.contains("e-scroll-nav") ? e.click() : d(t) || !1 !== t.classList.contains(LW) || (this.select(i), d(this.popEle) || this.popObj.hide(this.hide)) }, t.prototype.getEleIndex = function (e) { return Array.prototype.indexOf.call(O("." + wW + " ." + AW, this.element), e) }, t.prototype.extIndex = function (e) { return e.replace("e-item_", "") }, t.prototype.expTemplateContent = function () { var e = this; this.templateEle.forEach(function (t) { d(e.element.querySelector(t)) || (document.body.appendChild(e.element.querySelector(t)).style.display = "none") }) }, t.prototype.templateCompile = function (e, t, i) { var n = this.createElement("div"); if (this.compileElement(n, t, "content", i), 0 !== n.childNodes.length) { e.appendChild(n); var r = Object.keys(window), o = this.items[i]; d(o) || o.content && r.indexOf("Blazor") > -1 && !this.isStringTemplate && 0 === o.content.indexOf("<div>Blazor") && pe(this.element.id + i + "_content", "ContentTemplate", o) } }, t.prototype.compileElement = function (e, t, i, n) { var r, o = Object.keys(window); "string" == typeof t && o.indexOf("Blazor") > -1 && 0 !== t.indexOf("<div>Blazor") ? (t = t.trim(), e.innerHTML = t) : r = ce(t); var s; if (!d(r)) if (o.indexOf("Blazor") > -1 && !this.isStringTemplate && 0 === t.indexOf("<div>Blazor")) { var a = void 0; "headerText" === i ? a = this.element.id + "text" : "content" === i && (a = this.element.id + n + "_content"), s = r({}, this, i, a, this.isStringTemplate) } else s = r({}, this, i); !d(r) && s.length > 0 && [].slice.call(s).forEach(function (t) { e.appendChild(t) }) }, t.prototype.headerTextCompile = function (e, t, i) { this.compileElement(e, t, "headerText", i) }, t.prototype.getContent = function (e, t, i, n) { var r; if ("string" == typeof t || d(t.innerHTML)) if ("." === t[0] || "#" === t[0]) if (document.querySelectorAll(t).length) { var o = document.querySelector(t); r = o.outerHTML.trim(), "clone" === i ? e.appendChild(o.cloneNode(!0)) : (e.appendChild(o), o.style.display = "") } else this.templateCompile(e, t, n); else this.templateCompile(e, t, n); else e.appendChild(t); d(r) || -1 === this.templateEle.indexOf(t.toString()) && this.templateEle.push(t.toString()) }, t.prototype.getTrgContent = function (e, t) { return this.element.classList.contains("e-nested") ? N(".e-nested> .e-content > #e-content_" + t, this.element) : this.findEle(e.children, bW + "_" + t) }, t.prototype.findEle = function (e, t) { for (var i, n = 0; n < e.length; n++)if (e[n].id === t) { i = e[n]; break } return i }, t.prototype.isVertical = function () { var e = "Left" === this.headerPlacement || "Right" === this.headerPlacement; return this.scrCntClass = e ? "e-vscroll-content" : "e-hscroll-content", e }, t.prototype.addVerticalClass = function () { if (this.isVertical()) { var e = "Left" === this.headerPlacement ? "e-vertical-left" : "e-vertical-right"; S([this.hdrEle], ["e-vertical", e]), this.element.classList.add("e-vertical-tab") } "Bottom" === this.headerPlacement && this.hdrEle.classList.add("e-horizontal-bottom") }, t.prototype.updatePopAnimationConfig = function () { this.show = { name: this.isVertical() ? "FadeIn" : "SlideDown", duration: 100 }, this.hide = { name: this.isVertical() ? "FadeOut" : "SlideUp", duration: 100 } }, t.prototype.changeOrientation = function (e) { this.setOrientation(e, this.hdrEle); var t = !!this.hdrEle.classList.contains("e-vertical"); x([this.element], ["e-vertical-tab"]), x([this.hdrEle], ["e-vertical", "e-vertical-left", "e-vertical-right"]), t !== this.isVertical() && (this.tbObj.setProperties({ height: this.isVertical() ? "100%" : "auto", width: this.isVertical() ? "auto" : "100%" }, !0), this.tbObj.changeOrientation(), this.updatePopAnimationConfig()), this.addVerticalClass(), this.updateOrientationAttribute(), this.select(this.selectedItem) }, t.prototype.setOrientation = function (e, t) { "Bottom" === e && 1 !== Array.prototype.indexOf.call(this.element.children, t) ? this.element.appendChild(t) : this.element.insertBefore(t, N("." + bW, this.element)) }, t.prototype.setCssClass = function (e, t, i) { if ("" !== t) for (var n = t.split(" "), r = 0; r < n.length; r++)i ? e.classList.add(n[r]) : e.classList.remove(n[r]) }, t.prototype.setContentHeight = function (e) { if (!d(this.cntEle)) { var t = N("." + wW, this.element); if ("None" === this.heightAdjustMode) { if ("auto" === this.height) return; this.isVertical() || z(this.cntEle, { height: this.element.offsetHeight - t.offsetHeight + "px" }) } else if ("Fill" === this.heightAdjustMode) z(this.element, { height: "100%" }), z(this.cntEle, { height: "auto" }); else if ("Auto" === this.heightAdjustMode) { var i = O(".e-content > .e-item", this.element); if (!0 === this.isTemplate) for (var n = 0; n < i.length; n++)i[n].setAttribute("style", "display:block; visibility: visible"), this.maxHeight = Math.max(this.maxHeight, this.getHeight(i[n])), i[n].style.removeProperty("display"), i[n].style.removeProperty("visibility"); else { this.cntEle = N("." + bW, this.element), !0 === e && this.cntEle.appendChild(this.createElement("div", { id: bW + "_0", className: "e-item " + LW, attrs: { role: "tabpanel", "aria-labelledby": "e-item_0" } })); var r = this.cntEle.children.item(0); for (n = 0; n < this.items.length; n++)for (this.getContent(r, this.items[n].content, "clone", n), this.maxHeight = Math.max(this.maxHeight, this.getHeight(r)); r.firstChild;)r.removeChild(r.firstChild); this.clearTemplate(["content"]), this.templateEle = [], this.getContent(r, this.items[0].content, "render", 0), r.classList.remove(LW) } z(this.cntEle, { height: this.maxHeight + "px" }) } else z(this.cntEle, { height: "auto" }) } }, t.prototype.getHeight = function (e) { var t = window.getComputedStyle(e); return e.offsetHeight + parseFloat(t.getPropertyValue("padding-top")) + parseFloat(t.getPropertyValue("padding-bottom")) + parseFloat(t.getPropertyValue("margin-top")) + parseFloat(t.getPropertyValue("margin-bottom")) }, t.prototype.setActiveBorder = function () { var e, t, i, n; if ("Bottom" === this.headerPlacement ? (n = N("." + wW, this.element), e = N("." + AW + "." + LW, n)) : (n = N("." + wW, this.element), e = N("." + AW + "." + LW, this.element)), null !== e) { var r = R(e, ".e-tab"); if (this.element === r) { if (this.tbItems = N("." + DW, n), t = N(".e-indicator", n), i = N("." + DW + " ." + this.scrCntClass, n), this.isVertical()) { z(t, { left: "", right: "" }); z(t, 0 !== (d(i) ? this.tbItems.offsetHeight : i.offsetHeight) ? { top: e.offsetTop + "px", height: e.offsetHeight + "px" } : { top: 0, height: 0 }) } else { z(t, { top: "", height: "" }); var o = d(i) ? this.tbItems.offsetWidth : i.offsetWidth; z(t, 0 !== o ? { left: e.offsetLeft + "px", right: o - (e.offsetLeft + e.offsetWidth) + "px" } : { left: "auto", right: "auto" }) } d(this.bdrLine) || this.bdrLine.classList.remove(SW) } } }, t.prototype.setActive = function (e) { this.tbItem = O("." + wW + " ." + AW, this.element); var t = this.tbItem[e]; if (e >= 0 && this.setProperties({ selectedItem: e }, !0), !(e < 0 || isNaN(e) || 0 === this.tbItem.length)) if (t.classList.contains(LW)) this.setActiveBorder(); else { if (!this.isTemplate) { var i = this.tbItem[this.prevIndex]; d(i) || i.removeAttribute("aria-controls"), P(t, { "aria-controls": bW + "_" + e }) } var n = t.id; this.removeActiveClass(n), t.classList.add(LW), t.setAttribute("aria-selected", "true"); var r = Number(this.extIndex(n)); if (d(this.prevActiveEle) && (this.prevActiveEle = bW + "_" + r), P(this.element, { "aria-activedescendant": n }), this.isTemplate) { if (N("." + bW, this.element).children.length > 0) { var o = this.findEle(N("." + bW, this.element).children, bW + "_" + r); d(o) || o.classList.add(LW), this.triggerAnimation(n, this.enableAnimation) } } else { this.cntEle = N(".e-tab > ." + bW, this.element); var s = this.getTrgContent(this.cntEle, this.extIndex(n)); if (d(s)) { this.cntEle.appendChild(this.createElement("div", { id: bW + "_" + this.extIndex(n), className: "e-item " + LW, attrs: { role: "tabpanel", "aria-labelledby": "e-item_" + this.extIndex(n) } })); var a = this.getTrgContent(this.cntEle, this.extIndex(n)), l = Array.prototype.indexOf.call(this.itemIndexArray, t.id); this.getContent(a, this.items[l].content, "render", l) } else s.classList.add(LW); this.triggerAnimation(n, this.enableAnimation) } this.setActiveBorder(); var h = N("." + wW + " #" + n, this.element); this.refreshItemVisibility(h), this.initRender || h.firstChild.focus(); var c = { previousItem: this.prevItem, previousIndex: this.prevIndex, selectedItem: t, selectedIndex: e, selectedContent: N("#e-content_" + this.selectingID, this.content), isSwiped: this.isSwipeed }; this.initRender && 0 === this.selectedItem || this.trigger("selected", c) } }, t.prototype.setItems = function (e) { this.isReplace = !0, this.tbItems = N("." + wW + " ." + DW, this.element), this.tbObj.items = this.parseObject(e, 0), this.tbObj.dataBind(), this.isReplace = !1 }, t.prototype.setRTL = function (e) { this.tbObj.enableRtl = e, this.tbObj.dataBind(), this.setCssClass(this.element, "e-rtl", e), this.refreshActiveBorder() }, t.prototype.refreshActiveBorder = function () { d(this.bdrLine) || this.bdrLine.classList.add(SW), this.setActiveBorder() }, t.prototype.showPopup = function (e) { var t = N(".e-popup.e-toolbar-pop", this.hdrEle); if (t.classList.contains("e-popup-close")) { var i = t && t.ej2_instances[0]; i.position.X = "Left" === this.headerPlacement ? "left" : "right", i.dataBind(), i.show(e) } }, t.prototype.wireEvents = function () { window.addEventListener("resize", this.resizeContext), Kv.add(this.element, "mouseover", this.hoverHandler, this), Kv.add(this.element, "keydown", this.spaceKeyDown, this), d(this.cntEle) || (this.touchModule = new yb(this.cntEle, { swipe: this.swipeHandler.bind(this) })), this.keyModule = new cb(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs }), this.tabKeyModule = new cb(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: { openPopup: "shift+f10", tab: "tab", shiftTab: "shift+tab" }, eventName: "keydown" }) }, t.prototype.unWireEvents = function () { this.keyModule.destroy(), this.tabKeyModule.destroy(), d(this.cntEle) || this.touchModule.destroy(), window.removeEventListener("resize", this.resizeContext), Kv.remove(this.element, "mouseover", this.hoverHandler), Kv.remove(this.element, "keydown", this.spaceKeyDown), this.element.classList.remove("e-rtl"), this.element.classList.remove("e-focused") }, t.prototype.clickHandler = function (e) { this.element.classList.remove("e-focused"); var t = e.originalEvent.target, i = R(t, "." + AW), n = this.getEleIndex(i); t.classList.contains(xW) ? this.removeTab(n) : this.isVertical() && R(t, ".e-hor-nav") ? this.showPopup(this.show) : (this.isPopup = !1, d(i) || n === this.selectedItem || this.select(n)) }, t.prototype.swipeHandler = function (e) { if (!(e.velocity < 3 && d(e.originalEvent.changedTouches))) { if (this.isSwipeed = !0, "Right" === e.swipeDirection && 0 !== this.selectedItem) { for (var t = this.selectedItem - 1; t >= 0; t--)if (!this.tbItem[t].classList.contains(SW)) { this.select(t); break } } else if ("Left" === e.swipeDirection && this.selectedItem !== O("." + AW, this.element).length - 1) for (var i = this.selectedItem + 1; i < this.tbItem.length; i++)if (!this.tbItem[i].classList.contains(SW)) { this.select(i); break } this.isSwipeed = !1 } }, t.prototype.spaceKeyDown = function (e) { if (32 === e.keyCode && 32 === e.which || 35 === e.keyCode && 35 === e.which) { d(R(e.target, "." + wW)) || e.preventDefault() } }, t.prototype.keyHandler = function (e) { if (!this.element.classList.contains(MW)) { this.element.classList.add("e-focused"); var t = e.target, i = N("." + wW + " ." + LW, this.element); O("." + AW + ":not(." + EW + ")", this.element); switch (this.popEle = N("." + wW + " .e-toolbar-pop", this.element), d(this.popEle) || (this.popObj = this.popEle.ej2_instances[0]), e.action) { case "space": case "enter": if (t.parentElement.classList.contains(MW)) return; if ("enter" === e.action && t.classList.contains("e-hor-nav")) { this.showPopup(this.show); break } this.keyPressed(t); break; case "tab": case "shiftTab": t.classList.contains(TW) && !1 === R(t, "." + AW).classList.contains(LW) && t.setAttribute("tabindex", "-1"), this.popObj && D(this.popObj.element) && this.popObj.hide(this.hide), i.children.item(0).setAttribute("tabindex", "0"); break; case "moveLeft": case "moveRight": var n = R(document.activeElement, "." + AW); d(n) || this.refreshItemVisibility(n); break; case "openPopup": e.preventDefault(), !d(this.popEle) && this.popEle.classList.contains("e-popup-close") && this.popObj.show(this.show); break; case "delete": var r = R(t, "." + AW); if (!0 === this.showCloseButton && !d(r)) { var o = r.nextSibling; !d(o) && o.classList.contains(AW) && o.firstChild.focus(), this.removeTab(this.getEleIndex(r)) } this.setActiveBorder() } } }, t.prototype.refreshActElePosition = function () { var e = N("." + AW + "." + EW + "." + LW, this.element); d(e) || this.select(this.getEleIndex(e)), this.refreshActiveBorder() }, t.prototype.refreshItemVisibility = function (e) { var t = N("." + this.scrCntClass, this.tbItems); if (!this.isVertical() && !d(t)) { var i = N(".e-hscroll-bar", this.tbItems), n = i.scrollLeft, r = n + i.offsetWidth, o = e.offsetLeft, s = e.offsetWidth, a = e.offsetLeft + e.offsetWidth; if (n < o && r < a) { var l = r - o; i.scrollLeft = n + (s - l) } else if (n > o && r > a) { l = a - n; i.scrollLeft = n - (s - l) } } }, t.prototype.hoverHandler = function (e) { var t = e.target; !d(t.classList) && t.classList.contains(xW) && t.setAttribute("title", new pb("tab", { closeButtonTitle: this.title }, this.locale).getConstant("closeButtonTitle")) }, t.prototype.evalOnPropertyChangeItems = function (e, t) { if (e.items instanceof Array && t.items instanceof Array) if (this.lastIndex = 0, d(this.tbObj)) this.reRenderItems(); else { this.setItems(e.items), this.templateEle.length > 0 && this.expTemplateContent(), this.templateEle = []; for (var i = N(".e-tab > ." + bW, this.element); i.firstElementChild;)I(i.firstElementChild); this.select(this.selectedItem) } else for (var n = Object.keys(e.items), r = 0; r < n.length; r++) { var o = parseInt(Object.keys(e.items)[r], 10), s = Object.keys(e.items[o])[0], a = Object(t.items[o])[s], l = Object(e.items[o])[s], h = N("." + DW + " #" + CW + "_" + o, this.element), c = N(".e-content #e-content_" + o, this.element); if ("header" === s) { var p = this.items[o].header.iconCss; if ("" === this.items[o].header.text && "" === p) this.removeTab(o); else { var u = []; u.push(this.items[o]), this.items.splice(o, 1), this.itemIndexArray.splice(o, 1), this.tbObj.items.splice(o, 1); var g = h.classList.contains(SW); I(h), this.isReplace = !0, this.addTab(u, o), g && this.hideTab(o), this.isReplace = !1 } } if ("content" === s && !d(c)) { if (("string" == typeof l || d(l.innerHTML)) && ("." === l[0] || "#" === l[0]) && l.length) { var m = document.querySelector(l); c.appendChild(m), m.style.display = "" } else "" === l && "#" === a[0] ? (document.body.appendChild(this.element.querySelector(a)).style.display = "none", c.innerHTML = l) : c.innerHTML = l } "cssClass" === s && (d(h) || (h.classList.remove(a), h.classList.add(l)), d(c) || (c.classList.remove(a), c.classList.add(l))), "disabled" === s && this.enableTab(o, !0 !== l) } }, t.prototype.enableTab = function (e, t) { var i = O("." + AW, this.element)[e]; d(i) || (!0 === t ? (i.classList.remove(MW, "e-overlay"), i.firstChild.setAttribute("tabindex", "-1")) : (i.classList.add(MW, "e-overlay"), i.firstChild.removeAttribute("tabindex"), i.classList.contains(LW) && this.select(e + 1)), d(this.items[e]) || (this.items[e].disabled = !t, this.dataBind()), i.setAttribute("aria-disabled", !0 === t ? "false" : "true")) }, t.prototype.addTab = function (e, t) { var i = this, n = { addedItems: e, cancel: !1 }; this.isReplace ? this.addingTabContent(e, t) : this.trigger("adding", n, function (n) { n.cancel || i.addingTabContent(e, t) }) }, t.prototype.addingTabContent = function (e, t) { var i = this, n = 0; if (this.hdrEle = N("." + wW, this.element), d(this.hdrEle)) this.items = e, this.reRenderItems(); else { var r = O("." + AW, this.element).length; if (0 !== r && (n = this.lastIndex + 1), d(t) && (t = r - 1), r < t || t < 0 || isNaN(t)) return; 0 !== r || d(this.hdrEle) || (this.hdrEle.style.display = ""), d(this.bdrLine) || this.bdrLine.classList.add(SW), this.tbItems = N("." + wW + " ." + DW, this.element), this.isAdd = !0; var o = this.parseObject(e, t); this.isAdd = !1; var s, a = 0; e.forEach(function (e, r) { if (s = e.header.text, d(e.header) || d(s) || 0 === s.length && d(e.header.iconCss) || (i.items.splice(t + a, 0, e), a++), i.isTemplate && !d(e.header) && !d(e.header.text)) { var o = n + r, l = i.createElement("div", { id: bW + "_" + o, className: CW, attrs: { role: "tabpanel", "aria-labelledby": "e-item_" + o } }); i.cntEle.insertBefore(l, i.cntEle.children[t + r]); var h = i.getTrgContent(i.cntEle, o.toString()); i.getContent(h, e.content, "render", t) } }), this.tbObj.addItems(o, t), this.isReplace || this.trigger("added", { addedItems: e }), this.selectedItem === t ? this.select(t) : this.setActiveBorder() } }, t.prototype.removeTab = function (e) { var t = this, i = O("." + AW, this.element)[e]; if (!d(i)) { var n = { removedItem: i, removedIndex: e, cancel: !1 }; this.trigger("removing", n, function (n) { if (!n.cancel) { t.tbObj.removeItems(e), t.items.splice(e, 1), t.itemIndexArray.splice(e, 1), t.refreshActiveBorder(); var r = N("#e-content_" + t.extIndex(i.id), N("." + bW, t.element)); d(r) || I(r), t.trigger("removed", n), i.classList.contains(LW) && (e = e > O("." + AW + ":not(." + EW + ")", t.element).length - 1 ? e - 1 : e, t.enableAnimation = !1, t.selectedItem = e, t.select(e)), 0 === O("." + AW, t.element).length && (t.hdrEle.style.display = "none"), t.enableAnimation = !0 } }) } }, t.prototype.hideTab = function (e, t) { var i, n = O("." + AW, this.element)[e]; if (!d(n)) { if (d(t) && (t = !0), this.bdrLine.classList.add(SW), !0 === t) if (n.classList.add(SW), 0 !== (i = O("." + AW + ":not(." + SW + ")", this.tbItems)).length && n.classList.contains(LW)) { if (0 !== e) for (var r = e - 1; r >= 0; r--) { if (!this.tbItem[r].classList.contains(SW)) { this.select(r); break } if (0 === r) for (var o = e + 1; o < this.tbItem.length; o++)if (!this.tbItem[o].classList.contains(SW)) { this.select(o); break } } else for (o = e + 1; o < this.tbItem.length; o++)if (!this.tbItem[o].classList.contains(SW)) { this.select(o); break } } else 0 === i.length && this.element.classList.add(SW); else this.element.classList.remove(SW), 0 === (i = O("." + AW + ":not(." + SW + ")", this.tbItems)).length && this.select(e), n.classList.remove(SW); this.setActiveBorder(), n.setAttribute("aria-hidden", "" + t) } }, t.prototype.select = function (e) { var t = this; this.tbItems = N("." + wW + " ." + DW, this.element), this.tbItem = O("." + wW + " ." + AW, this.element), this.content = N("." + bW, this.element), this.prevItem = this.tbItem[this.prevIndex], d(this.selectedItem) || this.selectedItem < 0 || this.tbItem.length <= this.selectedItem || isNaN(this.selectedItem) ? this.selectedItem = 0 : this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id); var i = this.tbItem[e]; d(i) ? this.selectedID = "0" : this.selectingID = this.extIndex(i.id), d(this.prevItem) || this.prevItem.classList.contains(MW) || this.prevItem.children.item(0).setAttribute("tabindex", "-1"); var n = { previousItem: this.prevItem, previousIndex: this.prevIndex, selectedItem: this.tbItem[this.selectedItem], selectedIndex: this.selectedItem, selectedContent: d(this.content) ? null : N("#e-content_" + this.selectedID, this.content), selectingItem: i, selectingIndex: e, selectingContent: d(this.content) ? null : N("#e-content_" + this.selectingID, this.content), isSwiped: this.isSwipeed, cancel: !1 }; this.initRender && 0 === this.selectedItem ? this.selectingContent(e) : this.trigger("selecting", n, function (i) { i.cancel || t.selectingContent(e) }) }, t.prototype.selectingContent = function (e) { if ("number" == typeof e) { if (!d(this.tbItem[e]) && this.tbItem[e].classList.contains(MW)) for (var t = e + 1; t < this.items.length; t++) { if (!1 === this.items[t].disabled) { e = t; break } e = 0 } this.tbItem.length > e && e >= 0 && !isNaN(e) ? (this.prevIndex = this.selectedItem, this.tbItem[e].classList.contains(EW) ? this.setActive(this.popupHandler(this.tbItem[e])) : this.setActive(e)) : this.setActive(0) } else e instanceof HTMLElement && this.setActive(this.getEleIndex(e)) }, t.prototype.disable = function (e) { this.setCssClass(this.element, MW, e), this.element.setAttribute("aria-disabled", "" + e) }, t.prototype.getPersistData = function () { return this.addOnPersist(["selectedItem", "actEleId"]) }, t.prototype.getModuleName = function () { return "tab" }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "width": z(this.element, { width: v(e.width) }); break; case "height": z(this.element, { height: v(e.height) }), this.setContentHeight(!1); break; case "cssClass": "" !== t.cssClass ? (this.setCssClass(this.element, t.cssClass, !1), this.setCssClass(this.element, e.cssClass, !0)) : this.setCssClass(this.element, e.cssClass, !0); break; case "items": this.evalOnPropertyChangeItems(e, t); break; case "showCloseButton": this.setCloseButton(e.showCloseButton); break; case "selectedItem": this.selectedItem = t.selectedItem, this.select(e.selectedItem); break; case "headerPlacement": this.changeOrientation(e.headerPlacement); break; case "enableRtl": this.setRTL(e.enableRtl); break; case "overflowMode": this.tbObj.overflowMode = e.overflowMode, this.tbObj.dataBind(), this.refreshActElePosition(); break; case "heightAdjustMode": this.setContentHeight(!1), this.select(this.selectedItem) } } }, vW([G([], NW)], t.prototype, "items", void 0), vW([Y("100%")], t.prototype, "width", void 0), vW([Y("auto")], t.prototype, "height", void 0), vW([Y("")], t.prototype, "cssClass", void 0), vW([Y(0)], t.prototype, "selectedItem", void 0), vW([Y("Top")], t.prototype, "headerPlacement", void 0), vW([Y("Content")], t.prototype, "heightAdjustMode", void 0), vW([Y("Scrollable")], t.prototype, "overflowMode", void 0), vW([Y(!1)], t.prototype, "enablePersistence", void 0), vW([Y(!1)], t.prototype, "showCloseButton", void 0), vW([U({}, kW)], t.prototype, "animation", void 0), vW([X()], t.prototype, "created", void 0), vW([X()], t.prototype, "adding", void 0), vW([X()], t.prototype, "added", void 0), vW([X()], t.prototype, "selecting", void 0), vW([X()], t.prototype, "selected", void 0), vW([X()], t.prototype, "removing", void 0), vW([X()], t.prototype, "removed", void 0), vW([X()], t.prototype, "destroyed", void 0), t = vW([J], t) }(Kw), RW = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), zW = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, BW = "e-treeview", FW = "e-icon-collapsible", VW = "e-icon-expandable", WW = "e-list-item", HW = "e-list-text", _W = "e-list-parent", YW = "e-hover", UW = "e-active", qW = "e-icons-spinner", GW = "e-process", QW = "e-icons", XW = "e-text-content", JW = "e-tree-input", ZW = "e-sibling", KW = "e-drop-next", $W = "e-fullrow", eH = "e-selected", tH = "e-expanded", iH = "e-check", nH = "e-stop", rH = "e-checkbox-wrapper", oH = "e-frame", sH = "e-node-focus", aH = "e-animation-active", lH = { treeRole: "tree", itemRole: "treeitem", listRole: "group", itemText: "", wrapperRole: "" }, hH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return RW(t, e), zW([Y("child")], t.prototype, "child", void 0), zW([Y([])], t.prototype, "dataSource", void 0), zW([Y("expanded")], t.prototype, "expanded", void 0), zW([Y("hasChildren")], t.prototype, "hasChildren", void 0), zW([Y("htmlAttributes")], t.prototype, "htmlAttributes", void 0), zW([Y("iconCss")], t.prototype, "iconCss", void 0), zW([Y("id")], t.prototype, "id", void 0), zW([Y("imageUrl")], t.prototype, "imageUrl", void 0), zW([Y("isChecked")], t.prototype, "isChecked", void 0), zW([Y("parentID")], t.prototype, "parentID", void 0), zW([Y(null)], t.prototype, "query", void 0), zW([Y("selected")], t.prototype, "selected", void 0), zW([Y(null)], t.prototype, "tableName", void 0), zW([Y("text")], t.prototype, "text", void 0), zW([Y("tooltip")], t.prototype, "tooltip", void 0), zW([Y("navigateUrl")], t.prototype, "navigateUrl", void 0), t }(ww), dH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return RW(t, e), zW([Y("SlideDown")], t.prototype, "effect", void 0), zW([Y(400)], t.prototype, "duration", void 0), zW([Y("linear")], t.prototype, "easing", void 0), t }(ww), cH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return RW(t, e), zW([U({ effect: "SlideUp", duration: 400, easing: "linear" }, dH)], t.prototype, "collapse", void 0), zW([U({ effect: "SlideDown", duration: 400, easing: "linear" }, dH)], t.prototype, "expand", void 0), t }(ww), pH = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.preventExpand = !1, n.checkedElement = [], n.disableNode = [], n.parentNodeCheck = [], n.expandChildren = [], n.mouseDownStatus = !1, n } RW(t, e), i = t, t.prototype.getModuleName = function () { return "treeview" }, t.prototype.preRender = function () { var e = this; this.checkActionNodes = [], this.dragStartAction = !1, this.isAnimate = !1, this.keyConfigs = { escape: "escape", end: "end", enter: "enter", f2: "f2", home: "home", moveDown: "downarrow", moveLeft: "leftarrow", moveRight: "rightarrow", moveUp: "uparrow", ctrlDown: "ctrl+downarrow", ctrlUp: "ctrl+uparrow", ctrlEnter: "ctrl+enter", ctrlHome: "ctrl+home", ctrlEnd: "ctrl+end", ctrlA: "ctrl+A", shiftDown: "shift+downarrow", shiftUp: "shift+uparrow", shiftEnter: "shift+enter", shiftHome: "shift+home", shiftEnd: "shift+end", csDown: "ctrl+shift+downarrow", csUp: "ctrl+shift+uparrow", csEnter: "ctrl+shift+enter", csHome: "ctrl+shift+home", csEnd: "ctrl+shift+end", space: "space" }, this.listBaseOption = { expandCollapse: !0, showIcon: !0, expandIconClass: VW, ariaAttributes: lH, expandIconPosition: "Left", itemCreated: function (t) { e.beforeNodeCreate(t) } }, this.updateListProp(this.fields), this.aniObj = new fw({}), this.treeList = [], this.isLoaded = !1, this.isInitalExpand = !1, this.expandChildren = [], this.index = 0, this.setTouchClass(), d(this.selectedNodes) && this.setProperties({ selectedNodes: [] }, !0), d(this.checkedNodes) && this.setProperties({ checkedNodes: [] }, !0), d(this.expandedNodes) ? this.setProperties({ expandedNodes: [] }, !0) : this.isInitalExpand = !0 }, t.prototype.getPersistData = function () { return this.addOnPersist(["selectedNodes", "checkedNodes", "expandedNodes"]) }, t.prototype.render = function () { this.initialRender = !0, this.initialize(), this.setDataBinding(), this.setExpandOnType(), this.setRipple(), this.wireEditingEvents(this.allowEditing), this.setDragAndDrop(this.allowDragAndDrop), this.wireEvents(), this.initialRender = !1 }, t.prototype.initialize = function () { this.element.setAttribute("role", "tree"), this.element.setAttribute("tabindex", "0"), this.element.setAttribute("aria-activedescendant", this.element.id + "_active"), this.isBlazorPlatform = w(), this.setCssClass(null, this.cssClass), this.setEnableRtl(), this.setFullRow(this.fullRowSelect), this.nodeTemplateFn = this.templateComplier(this.nodeTemplate) }, t.prototype.setEnableRtl = function () { this.enableRtl ? S([this.element], "e-rtl") : x([this.element], "e-rtl") }, t.prototype.setRipple = function () { var e = { selector: ".e-fullrow,.e-text-content", ignore: "." + XW + " > ." + QW + ",.e-input-group,.e-input, ." + rH }; this.rippleFn = ee(this.element, e); var t = { selector: "." + XW + " > ." + QW, isCenterRipple: !0 }; this.rippleIconFn = ee(this.element, t) }, t.prototype.setFullRow = function (e) { e ? S([this.element], "e-fullrow-wrap") : x([this.element], "e-fullrow-wrap") }, t.prototype.setMultiSelect = function (e) { var t = N("." + _W, this.element); e ? t.setAttribute("aria-multiselectable", "true") : t.removeAttribute("aria-multiselectable") }, t.prototype.templateComplier = function (e) { if (e) try { if (document.querySelectorAll(e).length) return ce(document.querySelector(e).innerHTML.trim()) } catch (t) { return ce(e) } }, t.prototype.setDataBinding = function () { var e = this; this.treeList.push("false"), this.fields.dataSource instanceof aA ? this.fields.dataSource.ready ? this.fields.dataSource.ready.then(function (t) { e.fields.dataSource instanceof aA && e.fields.dataSource.dataSource.offline && (e.treeList.pop(), e.treeData = t.result, e.isNumberTypeId = e.getType(), e.setRootData(), e.renderItems(!0), 0 !== e.treeList.length || e.isLoaded || e.finalize()) }) : this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function (t) { e.treeList.pop(), e.treeData = t.result, e.isNumberTypeId = e.getType(), e.setRootData(), e.renderItems(!0), 0 !== e.treeList.length || e.isLoaded || e.finalize() }) : (this.treeList.pop(), d(this.fields.dataSource) ? this.rootData = this.treeData = [] : (this.treeData = JSON.parse(JSON.stringify(this.fields.dataSource)), this.setRootData()), this.isNumberTypeId = this.getType(), this.renderItems(!1)), 0 !== this.treeList.length || this.isLoaded || this.finalize() }, t.prototype.getQuery = function (e, t) { void 0 === t && (t = null); var i, n = []; if (e.query) i = e.query.clone(); else { i = new GD; for (var r = this.getActualProperties(e), o = 0, s = Object.keys(r); o < s.length; o++) { var a = s[o]; "dataSource" !== a && "tableName" !== a && "child" !== a && e[a] && -1 === n.indexOf(e[a]) && n.push(e[a]) } i.select(n), r.hasOwnProperty("tableName") && i.from(e.tableName) } return hT.addSorting(this.sortOrder, e.text, i), d(t) || d(e.parentID) || i.where(e.parentID, "equal", this.isNumberTypeId ? parseFloat(t) : t), i }, t.prototype.getType = function () { return !!this.treeData[0] && "number" == typeof n(this.fields.id, this.treeData[0]) }, t.prototype.setRootData = function () { if (this.dataType = this.getDataType(this.treeData, this.fields), 1 === this.dataType) { this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID); var e = this.getChildNodes(this.treeData, void 0, !0); d(e) ? this.rootData = [] : this.rootData = e } else this.rootData = this.treeData }, t.prototype.renderItems = function (e) { if (this.listBaseOption.ariaAttributes.level = 1, this.ulElement = hT.createList(this.createElement, e ? this.rootData : this.getSortedData(this.rootData), this.listBaseOption), this.element.appendChild(this.ulElement), !1 === this.loadOnDemand) for (var t = this.ulElement.querySelectorAll(".e-list-item"), i = 0; i < t.length;)this.renderChildNodes(t[i], !0, null, !0), i++; else this.finalizeNode(this.element); this.nodeTemplate && this.isBlazorPlatform && !this.isStringTemplate && this.updateBlazorTemplate(), this.parentNodeCheck = [], this.parentCheckData = [], this.updateCheckedStateFromDS(), this.autoCheck && this.showCheckBox && !this.isLoaded && this.updateParentCheckState() }, t.prototype.updateCheckedStateFromDS = function (e) { if (this.treeData && this.showCheckBox) if (1 === this.dataType) { for (var t = this.fields, i = new aA(this.treeData).executeLocal((new GD).where(t.isChecked, "equal", !0, !1)), r = 0; r < i.length; r++) { var o = i[r][this.fields.id] ? i[r][this.fields.id].toString() : null; i[r][this.fields.parentID] && i[r][this.fields.parentID].toString(); if (-1 !== this.checkedNodes.indexOf(o) || this.isLoaded || this.checkedNodes.push(o), i[r][this.fields.hasChildren]) for (var s = i[r][this.fields.id], a = new aA(this.treeData).executeLocal((new GD).where(t.parentID, "equal", s, !1)), l = 0; l < a.length; l++) { var h = a[l][this.fields.id] ? a[l][this.fields.id].toString() : null; -1 === this.checkedNodes.indexOf(h) && this.autoCheck && this.checkedNodes.push(h) } } for (r = 0; r < this.checkedNodes.length; r++) { var d = this.fields, c = new aA(this.treeData).executeLocal((new GD).where(d.id, "equal", this.checkedNodes[r], !0)); c[0] && this.autoCheck && (this.getCheckedNodeDetails(d, c), this.checkIndeterminateState(c[0])); for (var p = new aA(this.treeData).executeLocal((new GD).where(d.parentID, "equal", this.checkedNodes[r], !0)), u = 0; u < p.length; u++) { var g = p[u][this.fields.id] ? p[u][this.fields.id].toString() : null; -1 === this.checkedNodes.indexOf(g) && this.autoCheck && this.checkedNodes.push(g) } } } else if (2 === this.dataType || this.fields.dataSource instanceof aA && this.fields.dataSource.dataSource.offline || this.fields.dataSource instanceof aA && !this.loadOnDemand) for (u = 0; u < this.treeData.length; u++) { var m = this.treeData[u][this.fields.id] ? this.treeData[u][this.fields.id].toString() : ""; this.treeData[u][this.fields.isChecked] && !this.isLoaded && -1 === this.checkedNodes.indexOf(m) && this.checkedNodes.push(m); var f = n(this.fields.child.toString(), this.treeData[u]); f && this.updateChildCheckState(f, this.treeData[u]) } }, t.prototype.getCheckedNodeDetails = function (e, t) { var i = t[0][this.fields.parentID] ? t[0][this.fields.parentID].toString() : null, n = 0, r = this.element.querySelector('[data-uid="' + t[0][this.fields.id] + '"]'), o = this.element.querySelector('[data-uid="' + t[0][this.fields.parentID] + '"]'); if (r || o) { if (o) { N(".e-check", o) || this.changeState(o, "indeterminate", null, !0, !0) } } else { this.parentNodeCheck.length; -1 === this.parentNodeCheck.indexOf(i) && this.parentNodeCheck.push(i); for (var s = this.getChildNodes(this.treeData, i), a = 0; a < s.length; a++) { var l = s[a][this.fields.id] ? s[a][this.fields.id].toString() : null; -1 !== this.checkedNodes.indexOf(l) && n++ , n === s.length && -1 === this.checkedNodes.indexOf(i) && this.checkedNodes.push(i) } var h = new aA(this.treeData).executeLocal((new GD).where(e.id, "equal", i, !0)); this.getCheckedNodeDetails(e, h) } }, t.prototype.updateParentCheckState = function () { for (var e, t = O(".e-stop", this.element), i = 0; i < t.length; i++) { var r = R(t[i], "." + WW), o = this.getTreeData(r), s = o[0][this.fields.id].toString(), a = 0; if (e = 1 === this.dataType ? this.getChildNodes(this.treeData, s) : n(this.fields.child.toString(), o[0])) { for (var l = 0; l < e.length; l++) { var h = e[l][this.fields.id].toString(); -1 !== this.checkedNodes.indexOf(h) && a++ } if (a === e.length) { var d = r.getAttribute("data-uid"); -1 === this.checkedNodes.indexOf(d) && this.checkedNodes.push(d), this.changeState(r, "check", null, !0, !0) } else 0 === a && 0 === this.checkedNodes.length && this.changeState(r, "uncheck", null, !0, !0) } } }, t.prototype.checkIndeterminateState = function (e) { var t; if (t = 1 === this.dataType ? this.element.querySelector('[data-uid="' + e[this.fields.parentID] + '"]') : this.element.querySelector('[data-uid="' + e[this.fields.id] + '"]')) { "true" !== t.querySelector("." + rH).getAttribute("aria-checked") && this.changeState(t, "indeterminate", null, !0, !0) } else if (2 === this.dataType) { this.parentNodeCheck.length; -1 === this.parentNodeCheck.indexOf(e[this.fields.id].toString()) && this.parentNodeCheck.push(e[this.fields.id].toString()) } }, t.prototype.updateChildCheckState = function (e, t) { for (var i = 0, r = t[this.fields.id] ? t[this.fields.id].toString() : "", o = 0; o < e.length; o++) { var s = e[o][this.fields.id] ? e[o][this.fields.id].toString() : ""; e[o][this.fields.isChecked] && !this.isLoaded && -1 === this.checkedNodes.indexOf(s) && this.checkedNodes.push(s), -1 !== this.checkedNodes.indexOf(r) && -1 === this.checkedNodes.indexOf(s) && this.autoCheck && this.checkedNodes.push(s), -1 !== this.checkedNodes.indexOf(s) && this.autoCheck && i++; var a = n(this.fields.child.toString(), e[o]); a && (this.parentCheckData.push(t), this.updateChildCheckState(a, e[o])), i === e.length && this.autoCheck && -1 === this.checkedNodes.indexOf(r) && this.checkedNodes.push(r) } if (0 !== i && this.autoCheck) { this.checkIndeterminateState(t); for (var l = 0; l < this.parentCheckData.length; l++)t !== this.parentCheckData[l] && this.parentCheckData[l] && this.checkIndeterminateState(this.parentCheckData[l]) } this.parentCheckData = [] }, t.prototype.beforeNodeCreate = function (e) { if (this.showCheckBox) { var t = De(this.createElement, !0, { cssClass: this.touchClass }), i = N("div.e-icons", e.item), r = e.item.getAttribute("data-uid"); e.item.childNodes[0].insertBefore(t, e.item.childNodes[0].childNodes[d(i) ? 0 : 1]); var o = n(e.fields.isChecked, e.curData); this.checkedNodes.indexOf(r) > -1 ? (N(".e-frame", t).classList.add(iH), t.setAttribute("aria-checked", "true"), this.addCheck(e.item)) : d(o) || "true" !== o.toString() ? t.setAttribute("aria-checked", "false") : (N(".e-frame", t).classList.add(iH), t.setAttribute("aria-checked", "true"), this.addCheck(e.item)); var s = N(".e-frame", t); Kv.add(s, "mousedown", this.frameMouseHandler, this), Kv.add(s, "mouseup", this.frameMouseHandler, this) } this.fullRowSelect && this.createFullRow(e.item), this.allowMultiSelection && !e.item.classList.contains(eH) && e.item.setAttribute("aria-selected", "false"); var a = e.fields; if (this.addActionClass(e, a.selected, eH), this.addActionClass(e, a.expanded, tH), !d(this.nodeTemplateFn)) { var l = e.item.querySelector("." + HW); l.innerHTML = ""; var h = this.nodeTemplateFn(e.curData, void 0, void 0, this.element.id + "nodeTemplate", this.isStringTemplate); E(h = Array.prototype.slice.call(h), l) } var c = { node: e.item, nodeData: e.curData, text: e.text }; this.trigger("drawNode", c) }, t.prototype.frameMouseHandler = function (e) { Ae(e, N(".e-ripple-container", e.target.parentElement)) }, t.prototype.addActionClass = function (e, t, i) { var r = n(t, e.curData); d(r) || "false" === r.toString() || e.item.classList.add(i) }, t.prototype.getDataType = function (e, t) { if (this.fields.dataSource instanceof aA) { for (var i = 0; i < e.length; i++)if ("string" == typeof t.child && d(n(t.child, e[i]))) return 1; return 2 } i = 0; for (var r = e.length; i < r; i++) { if ("string" == typeof t.child && !d(n(t.child, e[i]))) return 2; if (!d(n(t.parentID, e[i])) || !d(n(t.hasChildren, e[i]))) return 1 } return 1 }, t.prototype.getGroupedData = function (e, t) { for (var i = (new GD).group(t), n = hT.getDataSource(e, i), r = [], o = 0; o < n.length; o++) { var s = n[o].items; r.push(s) } return r }, t.prototype.getSortedData = function (e) { return e && "None" !== this.sortOrder && (e = hT.getDataSource(e, hT.addSorting(this.sortOrder, this.fields.text))), e }, t.prototype.finalizeNode = function (e) { for (var t = O(".e-list-img", e), i = 0; i < t.length; i++)t[i].setAttribute("alt", "e-list-img"); if (this.isLoaded) { for (var n = O("." + eH, e), r = 0; r < n.length; r++) { this.selectNode(n[r], null); break } x(n, eH) } for (var o = O("." + WW + ":not(." + tH + ")", e), s = 0; s < o.length; s++) { var a = N("div.e-icons", o[s]); a && a.classList.contains(VW) && this.disableExpandAttr(o[s]) } var l = O("." + tH, e); if (!this.isInitalExpand) for (r = 0; r < l.length; r++)this.renderChildNodes(l[r]); x(l, tH), this.updateList(), this.isLoaded && this.updateCheckedProp() }, t.prototype.updateCheckedProp = function () { if (this.showCheckBox) { var e = [].concat([], this.checkedNodes); this.setProperties({ checkedNodes: e }, !0) } }, t.prototype.ensureIndeterminate = function () { if (this.autoCheck) for (var e = O("li", this.element), t = 0; t < e.length; t++)e[t].classList.contains(WW) && (N("." + _W, e[t]) ? this.ensureParentCheckState(e[t]) : this.ensureChildCheckState(e[t])); else { var i = O(".e-stop", this.element); for (t = 0; t < i.length; t++)i[t].classList.remove(nH) } }, t.prototype.ensureParentCheckState = function (e) { if (!d(e)) { if (e.classList.contains(BW)) return; var t = e; e.classList.contains(WW) && (t = N("." + _W, e)); var i = O(".e-check", t), n = O(".e-stop", t), r = O("." + WW, t), o = e.getElementsByClassName(rH)[0]; r.length === i.length ? this.changeState(o, "check", null, !0, !0) : i.length > 0 || n.length > 0 ? this.changeState(o, "indeterminate", null, !0, !0) : 0 === i.length && this.changeState(o, "uncheck", null, !0, !0); var s = R(e, "." + _W); if (!d(s)) { var a = R(s, "." + WW); this.ensureParentCheckState(a) } } }, t.prototype.ensureChildCheckState = function (e, t) { if (!d(e)) { var i = N("." + _W, e), r = void 0; if (!d(i)) { r = O("." + rH, i); for (var o = e.getElementsByClassName(oH)[0].classList.contains(iH), s = e.getElementsByClassName(oH)[0].classList.contains(nH), a = i.querySelectorAll("li"), l = (i.parentElement.getAttribute("aria-expanded"), void 0), h = 0; h < r.length; h++) { if (d(this.currentLoadData) || d(n(this.fields.isChecked, this.currentLoadData[h]))) { var p = r[h].getElementsByClassName(oH)[0].classList.contains(iH), u = a[h].getAttribute("data-uid"); o ? l = "check" : p && !this.isLoaded ? l = "check" : -1 !== this.checkedNodes.indexOf(u) && this.isLoaded && (s || o) ? l = "check" : a[h].classList.contains("e-has-child") && !c(this.parentNodeCheck) && this.autoCheck && (o || s) && -1 !== this.parentNodeCheck.indexOf(u) ? (l = "indeterminate", this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u), 1)) : 1 === this.dataType && !c(this.parentNodeCheck) && this.autoCheck && (o || s) && -1 !== this.parentNodeCheck.indexOf(u) ? (l = "indeterminate", this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u), 1)) : l = "uncheck" } else l = n(this.fields.isChecked, this.currentLoadData[h]) ? "check" : "uncheck", -1 !== this.ele && (l = o ? "check" : "uncheck"); this.changeState(r[h], l, t, !0, !0) } } this.autoCheck && this.isLoaded && this.updateParentCheckState() } }, t.prototype.doCheckBoxAction = function (e, t) { O("." + WW, this.element); if (d(e)) { var i = O("." + rH, this.element); if (this.loadOnDemand) for (var n = 0; n < i.length; n++)this.updateFieldChecked(i[n], t), this.changeState(i[n], t ? "check" : "uncheck", null, null, null, t); else for (n = 0; n < i.length; n++)this.updateFieldChecked(i[n], t), this.changeState(i[n], t ? "check" : "uncheck") } else for (var r = e.length; r >= 0; r--) { var o = void 0; if (o = 1 === e.length ? this.getElement(e[r - 1]) : this.getElement(e[r]), d(o)) { var s = void 0; if ("" !== (s = e[r - e.length] ? e[r - e.length].toString() : e[r] ? e[r].toString() : null) && t && s) this.setValidCheckedNode(s), this.dynamicCheckState(s, t); else if (-1 !== this.checkedNodes.indexOf(s) && "" !== s && !t) { this.checkedNodes.splice(this.checkedNodes.indexOf(s), 1); var a = this.getChildNodes(this.treeData, s); if (a) { for (var l = 0; l < a.length; l++) { var h = a[l][this.fields.id] ? a[l][this.fields.id].toString() : null; -1 !== this.checkedNodes.indexOf(h) && this.checkedNodes.splice(this.checkedNodes.indexOf(h), 1) } -1 !== this.parentNodeCheck.indexOf(s) && this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(s), 1) } s && this.dynamicCheckState(s, t), this.updateField(this.treeData, this.fields, s, "isChecked", null) } } else { var c = N("." + _W + " ." + rH, o); this.validateCheckNode(c, !t, o, null) } } if (e) for (var p = 0; p < e.length; p++) { s = e[p] ? e[p].toString() : ""; t || this.updateField(this.treeData, this.fields, s, "isChecked", null) } this.autoCheck && this.updateParentCheckState() }, t.prototype.updateFieldChecked = function (e, t) { var i = R(e, "." + WW), n = i.getAttribute("data-uid"); "true" !== this.getNodeData(i).isChecked || t || this.updateField(this.treeData, this.fields, n, "isChecked", null) }, t.prototype.dynamicCheckState = function (e, t) { if (1 === this.dataType) { var i = 0, r = new aA(this.treeData).executeLocal((new GD).where(this.fields.id, "equal", e, !0)); if (r[0]) { var o = r[0][this.fields.id] ? r[0][this.fields.id].toString() : null, s = r[0][this.fields.parentID] ? r[0][this.fields.parentID].toString() : null, a = ((p = this.element.querySelector('[data-uid="' + s + '"]')) && N(".e-stop", p), p ? N(".e-check", p) : null), l = this.element.querySelector('[data-uid="' + o + '"]'), h = this.getChildNodes(this.treeData, s); if (h) for (var d = 0; d < h.length; d++) { var c = h[d][this.fields.id] ? h[d][this.fields.id].toString() : null; -1 !== this.checkedNodes.indexOf(c) && i++ } -1 !== this.checkedNodes.indexOf(e) && p && o === e && this.autoCheck ? this.changeState(p, "indeterminate", null) : -1 === this.checkedNodes.indexOf(e) && l && o === e && !t ? this.changeState(l, "uncheck", null) : -1 !== this.checkedNodes.indexOf(e) && l && o === e && t ? this.changeState(l, "check", null) : -1 === this.checkedNodes.indexOf(e) && !l && p && o === e && this.autoCheck && 0 !== i ? this.changeState(p, "indeterminate", null) : -1 === this.checkedNodes.indexOf(e) && !l && p && o === e && this.autoCheck && 0 === i ? this.changeState(p, "uncheck", null) : l || p || o !== e || !this.autoCheck || this.updateIndeterminate(e, t) } } else if (2 === this.dataType || this.fields.dataSource instanceof aA && this.fields.dataSource.dataSource.offline || this.fields.dataSource instanceof aA && !this.loadOnDemand) { o = void 0; var p = void 0; for (a = void 0, d = 0; d < this.treeData.length; d++) { o = this.treeData[d][this.fields.id] ? this.treeData[d][this.fields.id].toString() : "", a = (p = this.element.querySelector('[data-uid="' + o + '"]')) ? N(".e-check", p) : null, -1 === this.checkedNodes.indexOf(o) && p && a && !t && this.changeState(p, "uncheck", null); var u = n(this.fields.child.toString(), this.treeData[d]); u && this.updateChildIndeterminate(u, o, e, t, o) } } }, t.prototype.updateIndeterminate = function (e, t) { var i, n = this.getTreeData(e), r = 0; 1 === this.dataType && (i = n[0][this.fields.parentID] ? n[0][this.fields.parentID].toString() : null); var o = this.getChildNodes(this.treeData, i); if (o) for (var s = 0; s < o.length; s++) { var a = o[s][this.fields.id] ? o[s][this.fields.id].toString() : null; -1 !== this.checkedNodes.indexOf(a) && r++ } var l = this.element.querySelector('[data-uid="' + i + '"]'); l && t ? this.changeState(l, "indeterminate", null) : !t && l && -1 === this.parentNodeCheck.indexOf(i) && 0 !== r ? this.changeState(l, "indeterminate", null) : !t && l && -1 === this.parentNodeCheck.indexOf(i) && 0 === r ? this.changeState(l, "uncheck", null) : l || (t || -1 !== this.checkedNodes.indexOf(i) || -1 === this.parentNodeCheck.indexOf(i) ? t && -1 === this.checkedNodes.indexOf(i) && -1 === this.parentNodeCheck.indexOf(i) ? this.parentNodeCheck.push(i) : t || -1 === this.checkedNodes.indexOf(i) || -1 !== this.parentNodeCheck.indexOf(i) || 0 === r || this.parentNodeCheck.push(i) : this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(i), 1), this.updateIndeterminate(i, t), -1 === this.checkedNodes.indexOf(i) || t || this.checkedNodes.splice(this.checkedNodes.indexOf(i), 1)) }, t.prototype.updateChildIndeterminate = function (e, t, i, r, o) { for (var s = 0, a = 0; a < e.length; a++) { var l = e[a][this.fields.id] ? e[a][this.fields.id].toString() : ""; -1 !== this.checkedNodes.indexOf(l) && s++; var h = this.element.querySelector('[data-uid="' + t + '"]'), d = h ? N(".e-stop", h) : null, c = h ? N(".e-check", h) : null, p = this.element.querySelector('[data-uid="' + l + '"]'), u = p ? N(".e-check", p) : null; if (-1 !== this.checkedNodes.indexOf(i) && h && l === i && this.autoCheck) this.changeState(h, "indeterminate", null); else if (-1 !== this.checkedNodes.indexOf(i) || !h || p || l !== i || r) { if (-1 === this.checkedNodes.indexOf(i) && p && l === i && !r) this.changeState(p, "uncheck", null); else if (-1 === this.checkedNodes.indexOf(i) && d && l === i && this.autoCheck && 0 === s && !r) d.classList.remove(nH); else if (-1 === this.checkedNodes.indexOf(i) && !p && c && l === i && 0 === s) this.changeState(h, "uncheck", null); else if (-1 === this.checkedNodes.indexOf(l) && p && u && 0 === s) this.changeState(p, "uncheck", null); else if (!p && !h && l === i || -1 !== this.parentNodeCheck.indexOf(t) && this.autoCheck) { var g = this.element.querySelector('[data-uid="' + o + '"]'); r && 0 !== s ? this.changeState(g, "indeterminate", null) : r && s === e.length && -1 === this.checkedNodes.indexOf(t) ? this.checkedNodes.push(t) : r || 0 !== s || -1 === this.parentNodeCheck.indexOf(t) || this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(t)), -1 === this.parentNodeCheck.indexOf(t) && this.parentNodeCheck.push(t) } } else this.autoCheck ? this.changeState(h, "uncheck", null) : 0 !== s ? this.changeState(h, "indeterminate", null) : this.changeState(h, "uncheck", null); var m = n(this.fields.child.toString(), e[a]); m && this.updateChildIndeterminate(m, l, i, r, o) } }, t.prototype.changeState = function (e, t, i, n, r, o) { var s, a = this, l = R(e, "." + WW); n ? this.nodeCheckAction(e, t, l, s, i, n, r, o) : (this.checkActionNodes = [], s = this.getCheckEvent(l, t, i), this.trigger("nodeChecking", s, function (s) { s.cancel || a.nodeCheckAction(e, t, l, s, i, n, r, o) })) }, t.prototype.nodeCheckAction = function (e, t, i, n, r, o, s, a) { var l, h = e.getElementsByClassName(oH)[0]; if ("check" !== t || h.classList.contains(iH) ? "uncheck" === t && (h.classList.contains(iH) || h.classList.contains(nH)) ? (x([h], [iH, nH]), this.removeCheck(i), l = "false") : "indeterminate" === t && !h.classList.contains(nH) && this.autoCheck && (h.classList.remove(iH), h.classList.add(nH), this.removeCheck(i), l = "mixed") : (h.classList.remove(nH), h.classList.add(iH), this.addCheck(i), l = "true"), l = "check" === t ? "true" : "uncheck" === t ? "false" : l, d(l) || e.setAttribute("aria-checked", l), s) { var p = [].concat([], this.checkActionNodes); n = this.getCheckEvent(i, t, r), c(o) && (n.data = p) } void 0 !== a && this.ensureStateChange(i, a), o || d(l) || (e.setAttribute("aria-checked", l), n.data[0].checked = l, this.trigger("nodeChecked", n), this.checkActionNodes = []) }, t.prototype.addCheck = function (e) { var t = e.getAttribute("data-uid"); d(t) || -1 !== this.checkedNodes.indexOf(t) || this.checkedNodes.push(t) }, t.prototype.removeCheck = function (e) { var t = this.checkedNodes.indexOf(e.getAttribute("data-uid")); t > -1 && this.checkedNodes.splice(t, 1) }, t.prototype.getCheckEvent = function (e, t, i) { this.checkActionNodes.push(this.getNodeData(e)); var n = this.checkActionNodes; return { action: t, cancel: !1, isInteracted: !d(i), node: e, data: n } }, t.prototype.finalize = function () { N("." + _W, this.element).setAttribute("role", lH.treeRole), this.setMultiSelect(this.allowMultiSelection); var e = N("." + WW, this.element); e && (S([e], sH), this.updateIdAttr(null, e)), this.hasPid = !!this.rootData[0] && this.rootData[0].hasOwnProperty(this.fields.parentID), this.doExpandAction() }, t.prototype.doExpandAction = function () { var e = this.expandedNodes; if (this.isInitalExpand && e.length > 0) if (this.setProperties({ expandedNodes: [] }, !0), this.fields.dataSource instanceof aA) this.expandGivenNodes(e); else { for (var t = 0; t < e.length; t++) { var i = N('[data-uid="' + e[t] + '"]', this.element); if (d(i)) e[t] && -1 === this.expandChildren.indexOf(e[t]) && this.expandChildren.push(e[t].toString()); else { var n = N("." + VW, N("." + XW, i)); d(n) || this.expandAction(i, n, null) } } this.afterFinalized() } else this.afterFinalized() }, t.prototype.expandGivenNodes = function (e) { var t = this; this.expandCallback(e[this.index], function () { t.index++ , t.index < e.length ? t.expandGivenNodes(e) : t.afterFinalized() }) }, t.prototype.expandCallback = function (e, t) { var i = N('[data-uid="' + e + '"]', this.element); if (d(i)) t(); else { var n = N("." + VW, N("." + XW, i)); d(n) ? t() : this.expandAction(i, n, null, !1, t) } }, t.prototype.afterFinalized = function () { this.doSelectionAction(), this.updateCheckedProp(), this.isLoaded = !0, this.isAnimate = !0, this.isInitalExpand = !1; var e = { data: this.treeData }; this.trigger("dataBound", e) }, t.prototype.doSelectionAction = function () { var e = O("." + eH, this.element), t = this.selectedNodes; if (t.length > 0) { this.setProperties({ selectedNodes: [] }, !0); for (var i = 0; i < t.length; i++) { var n = N('[data-uid="' + t[i] + '"]', this.element); if (n && !n.classList.contains("e-active") ? this.selectNode(n, null, !0) : this.selectedNodes.push(t[i]), !this.allowMultiSelection) break } } else this.selectGivenNodes(e); x(e, eH) }, t.prototype.selectGivenNodes = function (e) { for (var t = 0; t < e.length && (e[t].classList.contains("e-disable") || this.selectNode(e[t], null, !0), this.allowMultiSelection); t++); }, t.prototype.clickHandler = function (e) { var t = e.originalEvent.target; if (Kv.remove(this.element, "contextmenu", this.preventContextMenu), t && !this.dragStartAction) { var i = t.classList, n = R(t, "." + WW); if (n) { if (this.removeHover(), this.setFocusElement(n), this.showCheckBox && !n.classList.contains("e-disable")) { var r = R(t, "." + rH); if (!d(r)) { var o = N(".e-frame", r); return this.validateCheckNode(r, o.classList.contains(iH), n, e.originalEvent), void this.triggerClickEvent(e.originalEvent, n) } } i.contains(VW) ? this.expandAction(n, t, e) : i.contains(FW) ? this.collapseNode(n, t, e) : i.contains(_W) || i.contains(WW) || this.toggleSelect(n, e.originalEvent, !1), this.triggerClickEvent(e.originalEvent, n) } } }, t.prototype.nodeCheckedEvent = function (e, t, i) { R(e, "." + WW); var n = this.getCheckEvent(e, t ? "uncheck" : "check", i); n.data = n.data.splice(0, n.data.length - 1), this.trigger("nodeChecked", n) }, t.prototype.triggerClickEvent = function (e, t) { var i = { event: e, node: t }; this.trigger("nodeClicked", i) }, t.prototype.expandNode = function (e, t, i) { var n = this; if (t.classList.contains(qW) && this.hideSpinner(t), this.initialRender || t.classList.add("interaction"), !0 !== i || !0 === i && e.classList.contains("e-expanded")) { if (!0 !== this.preventExpand) { x([t], VW), S([t], FW); var r = 0, o = 0, s = this, a = N("." + _W, e), l = e; this.setHeight(l, a); var h = N("." + WW + "." + UW, e); this.isAnimate ? this.aniObj.animate(a, { name: this.animation.expand.effect, duration: this.animation.expand.duration, timingFunction: this.animation.expand.easing, begin: function (t) { l.style.overflow = "hidden", !d(h) && h instanceof HTMLElement && h.classList.add(aH), r = l.offsetHeight, o = N("." + XW, e).offsetHeight }, progress: function (e) { e.element.style.display = "block", s.animateHeight(e, r, o) }, end: function (e) { e.element.style.display = "block", !d(h) && h instanceof HTMLElement && h.classList.remove(aH), n.expandedNode(l, a, t) } }) : this.expandedNode(l, a, t) } } else { N("." + _W, e).style.display = "none", this.fields.dataSource instanceof aA == !0 && (this.preventExpand = !1) } this.initialRender && t.classList.add("interaction") }, t.prototype.expandedNode = function (e, t, i) { t.style.display = "block", e.style.display = "block", e.style.overflow = "", e.style.height = "", x([i], GW), this.addExpand(e), this.isLoaded && this.expandArgs && (this.expandArgs = this.getExpandEvent(e, null), this.trigger("nodeExpanded", this.expandArgs)) }, t.prototype.addExpand = function (e) { e.setAttribute("aria-expanded", "true"), x([e], "e-node-collapsed"); var t = e.getAttribute("data-uid"); d(t) || -1 !== this.expandedNodes.indexOf(t) || this.expandedNodes.push(t) }, t.prototype.collapseNode = function (e, t, i) { var n = this; if (!t.classList.contains(GW)) { S([t], GW); var r; this.isLoaded ? (r = this.getExpandEvent(e, i), this.trigger("nodeCollapsing", r, function (i) { i.cancel ? x([t], GW) : n.nodeCollapseAction(e, t, i) })) : this.nodeCollapseAction(e, t, r) } }, t.prototype.nodeCollapseAction = function (e, t, i) { var n = this; x([t], FW), S([t], VW); var r = 0, o = 0, s = this, a = N("." + _W, e), l = e, h = N("." + WW + "." + UW, e); this.isAnimate ? this.aniObj.animate(a, { name: this.animation.collapse.effect, duration: this.animation.collapse.duration, timingFunction: this.animation.collapse.easing, begin: function (t) { l.style.overflow = "hidden", !d(h) && h instanceof HTMLElement && h.classList.add(aH), r = N("." + XW, e).offsetHeight, o = l.offsetHeight }, progress: function (e) { s.animateHeight(e, r, o) }, end: function (e) { e.element.style.display = "none", !d(h) && h instanceof HTMLElement && h.classList.remove(aH), n.collapsedNode(l, a, t, i) } }) : this.collapsedNode(l, a, t, i) }, t.prototype.collapsedNode = function (e, t, i, n) { t.style.display = "none", e.style.overflow = "", e.style.height = "", x([i], GW), this.removeExpand(e), this.isLoaded && this.trigger("nodeCollapsed", n) }, t.prototype.removeExpand = function (e, t) { t ? e.removeAttribute("aria-expanded") : this.disableExpandAttr(e); var i = this.expandedNodes.indexOf(e.getAttribute("data-uid")); i > -1 && this.expandedNodes.splice(i, 1) }, t.prototype.disableExpandAttr = function (e) { e.setAttribute("aria-expanded", "false"), S([e], "e-node-collapsed") }, t.prototype.setHeight = function (e, t) { t.style.display = "block", t.style.visibility = "hidden", e.style.height = e.offsetHeight + "px", t.style.display = "none", t.style.visibility = "" }, t.prototype.animateHeight = function (e, t, i) { var n = (i - t) * ((e.duration - e.timeStamp) / e.duration) + t; e.element.parentElement.style.height = n + "px" }, t.prototype.renderChildNodes = function (e, t, i, n) { var r = this, o = N("div.e-icons", e); if (!d(o)) { this.showSpinner(o); var s; if (this.fields.dataSource instanceof aA && "BlazorAdaptor" !== this.fields.dataSource.adaptorName) { var a = this.parents(e, "." + _W).length, l = this.getChildFields(this.fields, a, 1); if (d(l) || d(l.dataSource)) return I(o), void this.removeExpand(e, !0); this.treeList.push("false"), this.fields.dataSource instanceof aA && this.fields.dataSource.dataSource.offline || this.fields.dataSource instanceof aA && !this.loadOnDemand ? (this.treeList.pop(), s = this.getChildNodes(this.treeData, e.getAttribute("data-uid")), this.loadChild(s, l, o, e, t, i, n), this.nodeTemplate && this.isBlazorPlatform && !this.isStringTemplate && this.updateBlazorTemplate()) : this.fields.dataSource instanceof aA && this.loadOnDemand && l.dataSource.executeQuery(this.getQuery(l, e.getAttribute("data-uid"))).then(function (a) { r.treeList.pop(), s = a.result, r.loadChild(s, l, o, e, t, i, n), r.nodeTemplate && r.isBlazorPlatform && !r.isStringTemplate && r.updateBlazorTemplate() }) } else { if (s = this.getChildNodes(this.treeData, e.getAttribute("data-uid")), this.currentLoadData = s, d(s) || 0 === s.length) return I(o), void this.removeExpand(e, !0); this.listBaseOption.ariaAttributes.level = parseFloat(e.getAttribute("aria-level")) + 1, e.appendChild(hT.createList(this.createElement, this.getSortedData(s), this.listBaseOption)), this.expandNode(e, o, n), this.setSelectionForChildNodes(s), this.ensureCheckNode(e), this.finalizeNode(e), this.loadOnDemand && this.nodeTemplate && this.isBlazorPlatform && !this.isStringTemplate && this.updateBlazorTemplate(), this.disableTreeNodes(s), this.renderSubChild(e, t, n) } } }, t.prototype.loadChild = function (e, t, i, n, o, s, a) { if (this.currentLoadData = e, d(e) || 0 === e.length) I(i), this.removeExpand(n, !0); else { if (this.updateListProp(t), this.fields.dataSource instanceof aA && !this.fields.dataSource.dataSource.offline) { var l = n.getAttribute("data-uid"); r("child", e, this.getNodeObject(l)) } this.listBaseOption.ariaAttributes.level = parseFloat(n.getAttribute("aria-level")) + 1, n.appendChild(hT.createList(this.createElement, e, this.listBaseOption)), this.expandNode(n, i, a), this.setSelectionForChildNodes(e), this.ensureCheckNode(n), this.finalizeNode(n), this.disableTreeNodes(e), this.renderSubChild(n, o, a) } s && s(), 0 !== this.treeList.length || this.isLoaded || this.finalize() }, t.prototype.disableTreeNodes = function (e) { for (var t = 0; t < e.length;) { var i = e[t][this.fields.id].toString(); void 0 !== this.disableNode && -1 !== this.disableNode.indexOf(i) && this.doDisableAction([i]), t++ } }, t.prototype.setSelectionForChildNodes = function (e) { var t; for (t = 0; t < e.length; t++) { var i = e[t][this.fields.id].toString(); void 0 !== this.selectedNodes && -1 !== this.selectedNodes.indexOf(i) && this.doSelectionAction() } }, t.prototype.ensureCheckNode = function (e) { this.showCheckBox && (this.ele = this.checkedElement ? this.checkedElement.indexOf(e.getAttribute("data-uid")) : null, this.autoCheck && (this.ensureChildCheckState(e), this.ensureParentCheckState(e))), this.currentLoadData = null }, t.prototype.getFields = function (e, t, i) { return t === i ? e : this.getFields(this.getChildMapper(e), t, i + 1) }, t.prototype.getChildFields = function (e, t, i) { return t === i ? this.getChildMapper(e) : this.getChildFields(this.getChildMapper(e), t, i + 1) }, t.prototype.getChildMapper = function (e) { return "string" == typeof e.child || d(e.child) ? e : e.child }, t.prototype.getChildNodes = function (e, t, i) { void 0 === i && (i = !1); var r; if (d(e)) return r; if (1 === this.dataType) return this.getChildGroup(this.groupedData, t, i); if ("string" == typeof this.fields.child) for (var o = 0, s = e.length; o < s; o++) { var a = n(this.fields.id, e[o]); if (a && a.toString() === t) return n(this.fields.child, e[o]); if (!d(n(this.fields.child, e[o])) && void 0 !== (r = this.getChildNodes(n(this.fields.child, e[o]), t))) break } return r }, t.prototype.getChildGroup = function (e, t, i) { if (!d(e)) for (var r = 0, o = e.length; r < o; r++) { if (d(e[r][0]) || d(n(this.fields.parentID, e[r][0]))) return i ? e[r] : []; if (n(this.fields.parentID, e[r][0]).toString() === t) return e[r] } }, t.prototype.renderSubChild = function (e, t, i) { if (t) for (var n = O("." + VW, e), r = 0, o = n.length; r < o; r++) { var s = n[r]; if (e.querySelector(".e-icons") !== n[r]) { var a = R(s, "." + WW); this.expandArgs = this.getExpandEvent(a, null), !0 !== i && this.trigger("nodeExpanding", this.expandArgs), this.renderChildNodes(a, t, null, i) } } }, t.prototype.toggleSelect = function (e, t, i) { e.classList.contains("e-disable") || (this.allowMultiSelection && (t && t.ctrlKey || i) && this.isActive(e) ? this.unselectNode(e, t) : this.selectNode(e, t, i)) }, t.prototype.isActive = function (e) { return !!e.classList.contains(UW) }, t.prototype.selectNode = function (e, t, i) { var n = this; if (d(e) || !this.allowMultiSelection && this.isActive(e) && !d(t)) this.setFocusElement(e); else { var r; this.isLoaded ? (r = this.getSelectEvent(e, "select", t), this.trigger("nodeSelecting", r, function (r) { r.cancel || n.nodeSelectAction(e, t, r, i) })) : this.nodeSelectAction(e, t, r, i) } }, t.prototype.nodeSelectAction = function (e, t, i, n) { if (this.allowMultiSelection && (n || t && (!t || t.ctrlKey)) || this.removeSelectAll(), this.allowMultiSelection && t && t.shiftKey) { this.startNode || (this.startNode = e); var r = this.liList.indexOf(this.startNode), o = this.liList.indexOf(e); if (r > o) { var s = r; r = o, o = s } for (var a = r; a <= o; a++) { var l = this.liList[a]; D(l) && !l.classList.contains("e-disable") && this.addSelect(l) } } else this.startNode = e, this.addSelect(e); this.setFocusElement(e), this.isLoaded && (i.nodeData = this.getNodeData(e), this.trigger("nodeSelected", i)) }, t.prototype.unselectNode = function (e, t) { var i, n = this; this.isLoaded ? (i = this.getSelectEvent(e, "un-select", t), this.trigger("nodeSelecting", i, function (t) { t.cancel || n.nodeUnselectAction(e, t) })) : this.nodeUnselectAction(e, i) }, t.prototype.nodeUnselectAction = function (e, t) { this.removeSelect(e), this.setFocusElement(e), this.isLoaded && (t.nodeData = this.getNodeData(e), this.trigger("nodeSelected", t)) }, t.prototype.setFocusElement = function (e) { if (!d(e)) { var t = this.getFocusedNode(); t && x([t], sH), S([e], sH), this.updateIdAttr(t, e) } }, t.prototype.addSelect = function (e) { e.setAttribute("aria-selected", "true"), S([e], UW); var t = e.getAttribute("data-uid"); d(t) || -1 !== this.selectedNodes.indexOf(t) || this.selectedNodes.push(t) }, t.prototype.removeSelect = function (e) { this.allowMultiSelection ? e.setAttribute("aria-selected", "false") : e.removeAttribute("aria-selected"), x([e], UW); var t = this.selectedNodes.indexOf(e.getAttribute("data-uid")); t > -1 && this.selectedNodes.splice(t, 1) }, t.prototype.removeSelectAll = function () { for (var e = this.element.querySelectorAll("." + UW), t = 0, i = e; t < i.length; t++) { var n = i[t]; this.allowMultiSelection ? n.setAttribute("aria-selected", "false") : n.removeAttribute("aria-selected") } x(e, UW), this.setProperties({ selectedNodes: [] }, !0) }, t.prototype.getSelectEvent = function (e, t, i) { var n = this.getNodeData(e); return { action: t, cancel: !1, isInteracted: !d(i), node: e, nodeData: n } }, t.prototype.setExpandOnType = function () { this.expandOnType = "Auto" === this.expandOn ? uw.isDevice ? "Click" : "DblClick" : this.expandOn }, t.prototype.expandHandler = function (e) { var t = e.originalEvent.target; !t || t.classList.contains("e-input") || t.classList.contains(BW) || t.classList.contains(_W) || t.classList.contains(WW) || t.classList.contains(QW) || this.showCheckBox && R(t, "." + rH) || this.expandCollapseAction(R(t, "." + WW), e) }, t.prototype.expandCollapseAction = function (e, t) { var i = N("div.e-icons", e); if (i && !i.classList.contains(GW)) { var n = i.classList; n.contains(VW) ? this.expandAction(e, i, t) : n.contains(FW) && this.collapseNode(e, i, t) } }, t.prototype.expandAction = function (e, t, i, n, r) { var o = this; t.classList.contains(GW) || (S([t], GW), this.isLoaded ? (this.expandArgs = this.getExpandEvent(e, i), this.trigger("nodeExpanding", this.expandArgs, function (i) { i.cancel ? x([t], GW) : o.nodeExpandAction(e, t, n, r) })) : this.nodeExpandAction(e, t, n, r)) }, t.prototype.nodeExpandAction = function (e, t, i, n) { var r = N("." + _W, e); if (r && "UL" === r.nodeName) this.expandNode(e, t); else { this.renderChildNodes(e, i, n); for (var o = O("." + WW, e), s = 0; s < o.length; s++) { var a = this.getId(o[s]); if (-1 !== this.expandChildren.indexOf(a) && void 0 !== this.expandChildren) { var l = N("." + VW, N("." + XW, o[s])); d(l) || this.expandAction(o[s], l, null), this.expandChildren.splice(this.expandChildren.indexOf(a), 1) } } } }, t.prototype.keyActionHandler = function (e) { var t = this, i = e.target, n = this.getFocusedNode(); if (i && i.classList.contains("e-input")) { var r = i; "enter" === e.action ? (r.blur(), this.element.focus(), S([n], YW)) : "escape" === e.action && (r.value = this.oldText, r.blur(), this.element.focus(), S([n], YW)) } else { e.preventDefault(); var o = { cancel: !1, event: e, node: n }; this.trigger("keyPress", o, function (i) { if (!i.cancel) switch (e.action) { case "space": t.showCheckBox && t.checkNode(e); break; case "moveRight": t.openNode(!t.enableRtl, e); break; case "moveLeft": t.openNode(!!t.enableRtl, e); break; case "shiftDown": t.shiftKeySelect(!0, e); break; case "moveDown": case "ctrlDown": case "csDown": t.navigateNode(!0); break; case "shiftUp": t.shiftKeySelect(!1, e); break; case "moveUp": case "ctrlUp": case "csUp": t.navigateNode(!1); break; case "home": case "shiftHome": case "ctrlHome": case "csHome": t.navigateRootNode(!0); break; case "end": case "shiftEnd": case "ctrlEnd": case "csEnd": t.navigateRootNode(!1); break; case "enter": case "ctrlEnter": case "shiftEnter": case "csEnter": t.toggleSelect(n, e); break; case "f2": t.allowEditing && !n.classList.contains("e-disable") && t.createTextbox(n, e); break; case "ctrlA": if (t.allowMultiSelection) { var r = O(".e-list-item:not(.e-active)", t.element); t.selectGivenNodes(r) } } }) } }, t.prototype.navigateToFocus = function (e) { var t = this.getFocusedNode().querySelector("." + XW), i = t.getBoundingClientRect(), n = this.getScrollParent(this.element); if (!d(n)) { var r = n.getBoundingClientRect(); i.bottom > r.bottom ? n.scrollTop += i.bottom - r.bottom : i.top < r.top && (n.scrollTop -= r.top - i.top) } this.isVisibleInViewport(t) || t.scrollIntoView(e) }, t.prototype.isVisibleInViewport = function (e) { var t = e.getBoundingClientRect(); return t.top >= 0 && t.left >= 0 && t.bottom <= (window.innerHeight || document.documentElement.clientHeight) && t.right <= (window.innerWidth || document.documentElement.clientWidth) }, t.prototype.getScrollParent = function (e) { return d(e) ? null : e.scrollHeight > e.clientHeight ? e : this.getScrollParent(e.parentElement) }, t.prototype.shiftKeySelect = function (e, t) { if (this.allowMultiSelection) { var i = this.getFocusedNode(), n = e ? this.getNextNode(i) : this.getPrevNode(i); this.removeHover(), this.setFocusElement(n), this.toggleSelect(n, t, !1), this.navigateToFocus(!e) } else this.navigateNode(e) }, t.prototype.checkNode = function (e) { var t = this.getFocusedNode(), i = N("." + rH, t), n = N(" .e-frame", i).classList.contains(iH); t.classList.contains("e-disable") || 0 == t.getElementsByClassName("e-checkbox-disabled").length && this.validateCheckNode(i, n, t, e) }, t.prototype.validateCheckNode = function (e, t, i, n) { var r = this, o = R(e, "." + WW); this.checkActionNodes = []; var s = t ? "false" : "true"; d(s) || e.setAttribute("aria-checked", s); var a = this.getCheckEvent(o, t ? "uncheck" : "check", n); this.trigger("nodeChecking", a, function (o) { o.cancel || r.nodeCheckingAction(e, t, i, o, n) }) }, t.prototype.nodeCheckingAction = function (e, t, i, n, r) { if (-1 === this.checkedElement.indexOf(i.getAttribute("data-uid"))) { this.checkedElement.push(i.getAttribute("data-uid")); var o = this.getChildNodes(this.treeData, i.getAttribute("data-uid")); null !== o ? this.allCheckNode(o, this.checkedElement, null, null, !1) : o = null } if (this.changeState(e, t ? "uncheck" : "check", r, !0), this.autoCheck) { this.ensureChildCheckState(i), this.ensureParentCheckState(R(R(i, "." + _W), "." + WW)); var s = void 0; "check" === n.action ? s = !0 : "uncheck" === n.action && (s = !1), this.ensureStateChange(i, s) } this.nodeCheckedEvent(e, t, r) }, t.prototype.ensureStateChange = function (e, t) { var i = N("." + _W, e), n = e.getAttribute("data-uid"), r = this.fields; if (1 === this.dataType && this.autoCheck) for (var o = new aA(this.treeData).executeLocal((new GD).where(r.parentID, "equal", n, !0)), s = 0; s < o.length; s++) { var a = o[s][this.fields.id] ? o[s][this.fields.id].toString() : null, l = o[s][this.fields.isChecked] ? o[s][this.fields.isChecked].toString() : null; if (-1 !== this.checkedNodes.indexOf(n) && -1 === this.checkedNodes.indexOf(a)) { this.checkedNodes.push(a); var h = this.getChildNodes(this.treeData, a); this.getChildItems(h, t), -1 !== this.parentNodeCheck.indexOf(a) && this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a), 1) } else if (-1 === this.checkedNodes.indexOf(n) && null === i && -1 !== this.checkedNodes.indexOf(a)) { if (this.checkedNodes.splice(this.checkedNodes.indexOf(a), 1), "true" === l && this.updateField(this.treeData, this.fields, a, "isChecked", null), -1 === this.checkedNodes.indexOf(n) && null === i || -1 !== this.parentNodeCheck.indexOf(a)) { var d = this.getChildNodes(this.treeData, a); this.getChildItems(d, t), -1 !== this.parentNodeCheck.indexOf(a) && this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a), 1) } } else { h = this.getChildNodes(this.treeData, a); this.getChildItems(h, t) } } else if (1 !== this.dataType || this.autoCheck) { (h = this.getChildNodes(this.treeData, n)) && this.childStateChange(h, n, i, t) } else if (t) for (s = 0; s < this.treeData.length; s++) { var c = this.treeData[s][this.fields.id] ? this.treeData[s][this.fields.id].toString() : null; -1 === this.checkedNodes.indexOf(c) && this.checkedNodes.push(c) } else { for (var p = new aA(this.treeData).executeLocal((new GD).where(r.isChecked, "equal", !0, !1)), s = 0; s < p.length; s++) { var u = p[s][this.fields.id] ? p[s][this.fields.id].toString() : null; -1 !== this.checkedNodes.indexOf(u) && this.checkedNodes.splice(this.checkedNodes.indexOf(u), 1), this.updateField(this.treeData, this.fields, u, "isChecked", null) } this.checkedNodes = [] } }, t.prototype.getChildItems = function (e, t) { for (var i = 0; i < e.length; i++) { var n = e[i][this.fields.id] ? e[i][this.fields.id].toString() : null, r = e[i][this.fields.isChecked] ? e[i][this.fields.isChecked].toString() : null; -1 === this.checkedNodes.indexOf(n) || t || this.checkedNodes.splice(this.checkedNodes.indexOf(n), 1), -1 === this.checkedNodes.indexOf(n) && t && this.checkedNodes.push(n), "true" !== r || t || this.updateField(this.treeData, this.fields, n, "isChecked", null); var o = this.getChildNodes(this.treeData, n); o.length > 0 && this.getChildItems(o, t) } }, t.prototype.childStateChange = function (e, t, i, n) { for (var r = 0; r < e.length; r++) { var o = e[r][this.fields.id] ? e[r][this.fields.id].toString() : "", s = e[r][this.fields.isChecked] ? e[r][this.fields.isChecked].toString() : null; this.autoCheck ? -1 !== this.checkedNodes.indexOf(t) && -1 === this.checkedNodes.indexOf(o) ? (this.checkedNodes.push(o), -1 !== this.parentNodeCheck.indexOf(o) && this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(o), 1)) : -1 !== this.checkedNodes.indexOf(t) || null !== i || n || (this.checkedNodes.splice(this.checkedNodes.indexOf(o), 1), "true" === s && this.updateField(this.treeData, this.fields, o, "isChecked", null)) : this.autoCheck || (n ? -1 === this.checkedNodes.indexOf(o) && this.checkedNodes.push(o) : (-1 !== this.checkedNodes.indexOf(o) && this.checkedNodes.splice(this.checkedNodes.indexOf(o), 1), this.updateField(this.treeData, this.fields, o, "isChecked", null), this.checkedNodes = [])); var a = this.getChildNodes(this.treeData, o); a && this.childStateChange(a, t, i, n) } }, t.prototype.allCheckNode = function (e, t, i, r, o) { if (e) for (var s = 0; s < e.length; s++) { var a = n(this.fields.id, e[s]), l = this.element.querySelector('[data-uid="' + a + '"]'); if (!1 !== o && -1 === this.checkedElement.indexOf(a.toString()) && (null === l && !d(e[s][this.fields.isChecked]) && -1 === t.indexOf(a.toString()) || 0 === r || 2 === i) && (!1 !== e[s][this.fields.isChecked] || 2 === i ? t.push(a.toString()) : r = null, r = !1 !== e[s][this.fields.isChecked] || 2 === i ? 0 : null), -1 === t.indexOf(a.toString()) && d(i) && t.push(a.toString()), !0 === n(this.fields.hasChildren, e[s]) || n(this.fields.child.toString(), e[s])) { var h = n(this.fields.id, e[s]), c = this.getChildNodes(this.treeData, h.toString()); c && (d(o) ? this.allCheckNode(c, t, i, r) : this.allCheckNode(c, t, i, r, o), r = null) } r = null } }, t.prototype.openNode = function (e, t) { var i = this.getFocusedNode(), n = N("div.e-icons", i); if (e) { if (!n) return; n.classList.contains(VW) ? this.expandAction(i, n, t) : this.focusNextNode(i, !0) } else if (n && n.classList.contains(FW)) this.collapseNode(i, n, t); else { var r = R(R(i, "." + _W), "." + WW); if (!r) return; r.classList.contains("e-disable") || (this.setFocus(i, r), this.navigateToFocus(!0)) } }, t.prototype.navigateNode = function (e) { var t = this.getFocusedNode(); this.focusNextNode(t, e) }, t.prototype.navigateRootNode = function (e) { var t = this.getFocusedNode(), i = e ? this.getRootNode() : this.getEndNode(); i.classList.contains("e-disable") || (this.setFocus(t, i), this.navigateToFocus(e)) }, t.prototype.getFocusedNode = function () { var e, t = N("." + WW + "." + sH, this.element); return d(t) && (e = N("." + WW, this.element)), d(t) ? d(e) ? this.element.firstElementChild : e : t }, t.prototype.focusNextNode = function (e, t) { var i = t ? this.getNextNode(e) : this.getPrevNode(e); if (this.setFocus(e, i), this.navigateToFocus(!t), i.classList.contains("e-disable")) { var n = i.lastChild; null == i.previousSibling && i.classList.contains("e-level-1") ? this.focusNextNode(i, !0) : null == i.nextSibling && i.classList.contains("e-node-collapsed") ? this.focusNextNode(i, !1) : null == i.nextSibling && n.classList.contains("e-text-content") ? this.focusNextNode(i, !1) : this.focusNextNode(i, t) } }, t.prototype.getNextNode = function (e) { var t, i = this.liList.indexOf(e); do { if (i++ , t = this.liList[i], d(t)) return e } while (!D(t)); return t }, t.prototype.getPrevNode = function (e) { var t, i = this.liList.indexOf(e); do { if (i-- , t = this.liList[i], d(t)) return e } while (!D(t)); return t }, t.prototype.getRootNode = function () { var e, t = 0; do { e = this.liList[t], t++ } while (!D(e)); return e }, t.prototype.getEndNode = function () { var e, t = this.liList.length - 1; do { e = this.liList[t], t-- } while (!D(e)); return e }, t.prototype.setFocus = function (e, t) { x([e], [YW, sH]), t.classList.contains("e-disable") || (S([t], [YW, sH]), this.updateIdAttr(e, t)) }, t.prototype.updateIdAttr = function (e, t) { this.element.removeAttribute("aria-activedescendant"), e && e.removeAttribute("id"), t.setAttribute("id", this.element.id + "_active"), this.element.setAttribute("aria-activedescendant", this.element.id + "_active") }, t.prototype.focusIn = function () { this.mouseDownStatus || S([this.getFocusedNode()], YW), this.mouseDownStatus = !1 }, t.prototype.focusOut = function () { x([this.getFocusedNode()], YW) }, t.prototype.onMouseOver = function (e) { var t = e.target, i = t.classList, n = R(t, "." + WW); !n || i.contains(_W) || i.contains(WW) ? this.removeHover() : n && !n.classList.contains("e-disable") && this.setHover(n) }, t.prototype.setHover = function (e) { e.classList.contains(YW) || (this.removeHover(), S([e], YW)) }, t.prototype.onMouseLeave = function (e) { this.removeHover() }, t.prototype.removeHover = function () { var e = O(".e-hover", this.element); e && e.length && x(e, YW) }, t.prototype.getNodeData = function (e, t) { if (!d(e) && e.classList.contains(WW) && !d(R(e, ".e-control")) && R(e, ".e-control").classList.contains(BW)) { var i = e.getAttribute("data-uid"), n = this.getText(e, t), r = R(e.parentNode, "." + WW), o = r ? r.getAttribute("data-uid") : null, s = e.classList.contains(UW), a = "true" === e.getAttribute("aria-expanded"), l = null !== e.getAttribute("aria-expanded"), h = null; return this.showCheckBox && (h = N("." + rH, e).getAttribute("aria-checked")), { id: i, text: n, parentID: o, selected: s, expanded: a, isChecked: h, hasChildren: l } } return { id: "", text: "", parentID: "", selected: !1, expanded: !1, isChecked: "", hasChildren: !1 } }, t.prototype.getText = function (e, t) { if (t) { var i = this.getNodeObject(e.getAttribute("data-uid")), r = parseFloat(e.getAttribute("aria-level")); return n(this.getFields(this.fields, r, 1).text, i) } return N("." + HW, e).textContent }, t.prototype.getExpandEvent = function (e, t) { var i = this.getNodeData(e); return { cancel: !1, isInteracted: !d(t), node: e, nodeData: i, event: t } }, t.prototype.destroyTemplate = function (e) { this.clearTemplate(["nodeTemplate"]) }, t.prototype.reRenderNodes = function () { ue(this.element.id + "nodeTemplate"), this.element.innerHTML = "", d(this.nodeTemplateFn) || this.destroyTemplate(this.nodeTemplate), this.setTouchClass(), this.setProperties({ selectedNodes: [], checkedNodes: [], expandedNodes: [] }, !0), this.isLoaded = !1, this.setDataBinding() }, t.prototype.setCssClass = function (e, t) { d(e) || "" === e || x([this.element], e.split(" ")), d(t) || "" === t || S([this.element], t.split(" ")) }, t.prototype.editingHandler = function (e) { var t = e.target; if (!(!t || t.classList.contains(BW) || t.classList.contains(_W) || t.classList.contains(WW) || t.classList.contains(QW) || t.classList.contains("e-input") || t.classList.contains("e-input-group"))) { var i = R(t, "." + WW); this.createTextbox(i, e) } }, t.prototype.createTextbox = function (e, t) { var i = this, n = N("." + JW, this.element); n && n.blur(); var r = N("." + HW, e); this.updateOldText(e); var o = this.createElement("input", { className: JW, attrs: { value: this.oldText } }), s = this.getEditEvent(e, null, o.outerHTML); this.trigger("nodeEditing", s, function (t) { if (!t.cancel) { var n = "width:" + (r.offsetWidth + 5) + "px"; S([e], "e-editing"), r.innerHTML = s.innerHtml; var o = N("." + JW, r); i.inputObj = eS.createInput({ element: o, properties: { enableRtl: i.enableRtl } }, i.createElement), i.inputObj.container.setAttribute("style", n), o.focus(); var a = o; a.setSelectionRange(0, a.value.length), i.wireInputEvents(o) } }) }, t.prototype.updateOldText = function (e) { var t = e.getAttribute("data-uid"); this.editData = this.getNodeObject(t); var i = parseFloat(e.getAttribute("aria-level")); this.editFields = this.getFields(this.fields, i, 1), this.oldText = n(this.editFields.text, this.editData) }, t.prototype.inputFocusOut = function (e) { if (N("." + JW, this.element)) { var t = e.target, i = t.value, n = R(t, "." + HW), r = R(t, "." + WW); I(this.inputObj.container), this.appendNewText(r, n, i, !0) } }, t.prototype.appendNewText = function (e, t, i, n) { var o = this.getEditEvent(e, i, null); this.trigger("nodeEdited", o), i = o.cancel ? o.oldText : o.newText; var s = r(this.editFields.text, i, this.editData); if (d(this.nodeTemplateFn)) t.innerHTML = i; else { t.innerHTML = ""; var a = this.nodeTemplateFn(s, void 0, void 0, this.element.id + "nodeTemplate", this.isStringTemplate); E(a = Array.prototype.slice.call(a), t), this.updateBlazorTemplate() } n && (x([e], "e-editing"), t.focus()), o.oldText !== i && this.triggerEvent() }, t.prototype.getElement = function (e) { return d(e) ? null : "string" == typeof e ? this.element.querySelector('[data-uid="' + e + '"]') : "object" == typeof e ? e : null }, t.prototype.getId = function (e) { return d(e) ? null : "string" == typeof e ? e : "object" == typeof e ? e.getAttribute("data-uid") : null }, t.prototype.getEditEvent = function (e, t, i) { return { cancel: !1, newText: t, node: e, nodeData: this.getNodeData(e), oldText: this.oldText, innerHtml: i } }, t.prototype.getNodeObject = function (e) { if (!d(e)) { if (1 !== this.dataType) return this.getChildNodeObject(this.treeData, this.fields, e); for (var t = 0, i = this.treeData.length; t < i; t++) { var r = n(this.fields.id, this.treeData[t]); if (!d(this.treeData[t]) && !d(r) && r.toString() === e) return this.treeData[t] } } }, t.prototype.getChildNodeObject = function (e, t, i) { var r; if (d(e)) return r; for (var o = 0, s = e.length; o < s; o++) { var a = n(t.id, e[o]); if (e[o] && a && a.toString() === i) return e[o]; if ("string" != typeof t.child || d(n(t.child, e[o]))) { if (this.fields.dataSource instanceof aA && !d(n("child", e[o]))) { if (void 0 !== (r = this.getChildNodeObject(n("child", e[o]), this.getChildMapper(t), i))) break } } else { var l = n(t.child, e[o]); if (void 0 !== (r = this.getChildNodeObject(l, this.getChildMapper(t), i))) break } } return r }, t.prototype.setDragAndDrop = function (e) { e ? this.initializeDrag() : this.destroyDrag() }, t.prototype.initializeDrag = function () { var e, t = this, i = this; this.dragObj = new rb(this.element, { enableTailMode: !0, enableAutoScroll: !0, dragTarget: "." + XW, helper: function (n) { t.dragTarget = n.sender.target; var r = R(t.dragTarget, "." + BW), o = R(t.dragTarget, "." + XW); if (t.dragLi = R(t.dragTarget, "." + WW), t.fullRowSelect && !o && t.dragTarget.classList.contains($W) && (o = t.dragTarget.nextElementSibling), !t.dragTarget || !n.element.isSameNode(r) || !o || t.dragTarget.classList.contains(BW) || t.dragTarget.classList.contains(_W) || t.dragTarget.classList.contains(WW) || t.dragLi.classList.contains("e-disable")) return !1; var s = o.cloneNode(!0); if (d(N("div.e-icons", s))) { var a = i.createElement("div", { className: "e-icons " + VW }); s.insertBefore(a, s.children[0]) } var l = "e-drag-item e-treeview " + t.cssClass + " " + (t.enableRtl ? "e-rtl" : ""); (e = i.createElement("div", { className: l })).appendChild(s); var h = t.selectedNodes.length; if (h > 1 && t.allowMultiSelection && t.dragLi.classList.contains(UW)) { var c = i.createElement("span", { className: "e-drop-count", innerHTML: "" + h }); e.appendChild(c) } return document.body.appendChild(e), document.body.style.cursor = "", t.dragData = t.getNodeData(t.dragLi), e }, dragStart: function (i) { S([t.element], "e-dragging"); var n, r = R(i.target, ".e-list-item"); r && (n = parseInt(r.getAttribute("aria-level"), 10)); var o = t.getDragEvent(i.event, t, null, i.target, null, e, n); o.draggedNode.classList.contains("e-editing") ? t.dragCancelAction(e) : t.trigger("nodeDragStart", o, function (i) { i.cancel ? t.dragCancelAction(e) : t.dragStartAction = !0 }) }, drag: function (i) { (t.isBlazorPlatform && t.dragStartAction || !t.isBlazorPlatform) && (t.dragObj.setProperties({ cursorAt: { top: !d(i.event.targetTouches) || uw.isDevice ? 60 : -20 } }), t.dragAction(i, e)) }, dragStop: function (e) { x([t.element], "e-dragging"), t.removeVirtualEle(); var i = e.target, n = R(i, ".e-droppable"); i && n || (I(e.helper), document.body.style.cursor = ""); var r, o = R(i, ".e-list-item"); o && (r = parseInt(o.getAttribute("aria-level"), 10)); var s = t.getDragEvent(e.event, t, i, i, null, e.helper, r); s.preventTargetExpand = !1, (t.isBlazorPlatform && t.dragStartAction || !t.isBlazorPlatform) && t.trigger("nodeDragStop", s, function (i) { t.dragParent = i.draggedParentNode, t.preventExpand = i.preventTargetExpand, i.cancel && (e.helper.parentNode && I(e.helper), document.body.style.cursor = ""), t.dragStartAction = !1 }) } }), this.dropObj = new ab(this.element, { out: function (e) { d(e) || e.target.classList.contains(ZW) || (document.body.style.cursor = "not-allowed") }, over: function (e) { document.body.style.cursor = "" }, drop: function (e) { t.dropAction(e) } }) }, t.prototype.dragCancelAction = function (e) { I(e), x([this.element], "e-dragging"), this.dragStartAction = !1 }, t.prototype.dragAction = function (e, t) { var i = R(e.target, ".e-droppable"), n = R(e.target, "." + XW), r = N("div.e-icons", t); x([r], ["e-drop-in", KW, "e-drop-out", "e-no-drop"]), this.removeVirtualEle(), document.body.style.cursor = ""; var o = e.target.classList; if (this.fullRowSelect && !n && !d(o) && o.contains($W) && (n = e.target.nextElementSibling), i) { var s = R(e.target, "." + WW); if (!i.classList.contains(BW) || n && !s.isSameNode(this.dragLi) && !this.isDescendant(this.dragLi, s)) if (s && e && e.event.offsetY < 7) { S([r], KW); var a = this.createElement("div", { className: ZW }), l = this.fullRowSelect ? 1 : 0; s.insertBefore(a, s.children[l]) } else if (s && e && e.target.offsetHeight > 0 && e.event.offsetY > e.target.offsetHeight - 10) { S([r], KW); a = this.createElement("div", { className: ZW }), l = this.fullRowSelect ? 2 : 1; s.insertBefore(a, s.children[l]) } else S([r], "e-drop-in"); else "LI" !== e.target.nodeName || s.isSameNode(this.dragLi) || this.isDescendant(this.dragLi, s) ? e.target.classList.contains(ZW) ? S([r], KW) : S([r], "e-drop-out") : (S([r], KW), this.renderVirtualEle(e)) } else S([r], "e-no-drop"), document.body.style.cursor = "not-allowed"; var h, c = R(e.target, ".e-list-item"); c && (h = parseInt(c.getAttribute("aria-level"), 10)); var p = this.getDragEvent(e.event, this, e.target, e.target, null, t, h); p.dropIndicator && x([r], p.dropIndicator), this.trigger("nodeDragging", p), p.dropIndicator && S([r], p.dropIndicator) }, t.prototype.dropAction = function (e) { for (var t, n, r = e.event.offsetY, o = e.target, s = !1, a = e.dragData.draggable, l = 0; l < a.ej2_instances.length; l++)if (a.ej2_instances[l] instanceof i) { t = a.ej2_instances[l]; break } if (t && t.dragTarget) { var h = R(t.dragTarget, "." + WW), d = R(o, "." + WW); if (null == d && o.classList.contains(BW) && (d = o.firstElementChild), I(e.droppedElement), document.body.style.cursor = "", !d || d.isSameNode(h) || this.isDescendant(h, d)) return void (this.fields.dataSource instanceof aA == !1 && (this.preventExpand = !1)); if (t.allowMultiSelection && h.classList.contains(UW)) { var c = O("." + UW, t.element); if (e.target.offsetHeight <= 33 && r > e.target.offsetHeight - 10 && r > 6) for (l = c.length - 1; l >= 0; l--)d.isSameNode(c[l]) || this.isDescendant(c[l], d) || this.appendNode(o, c[l], d, e, t, r); else for (l = 0; l < c.length; l++)d.isSameNode(c[l]) || this.isDescendant(c[l], d) || this.appendNode(o, c[l], d, e, t, r) } else this.appendNode(o, h, d, e, t, r); n = parseInt(h.getAttribute("aria-level"), 10), s = !0 } this.fields.dataSource instanceof aA == !1 && (this.preventExpand = !1), this.trigger("nodeDropped", this.getDragEvent(e.event, t, o, e.target, e.dragData.draggedElement, null, n, s)), this.triggerEvent() }, t.prototype.appendNode = function (e, t, i, n, r, o) { t.classList.contains("e-disable") || i.classList.contains("e-disable") || ("LI" === e.nodeName ? this.dropAsSiblingNode(t, i, n, r) : e.firstElementChild && e.classList.contains(BW) ? "UL" === e.firstElementChild.nodeName && this.dropAsSiblingNode(t, i, n, r) : this.dropAsChildNode(t, i, r, null, n, o)) }, t.prototype.dropAsSiblingNode = function (e, t, i, n) { var r, o = R(t, "." + _W), s = R(e, "." + _W), a = R(s, "." + WW); i.target.offsetHeight > 0 && i.event.offsetY > i.target.offsetHeight - 2 ? r = !1 : i.event.offsetY < 2 && (r = !0), o.insertBefore(e, r ? i.target : i.target.nextElementSibling), this.moveData(e, t, o, r, n), this.updateElement(s, a), this.updateAriaLevel(e), n.element.id === this.element.id ? this.updateList() : (n.updateInstance(), this.updateInstance()) }, t.prototype.dropAsChildNode = function (e, t, i, n, r, o) { var s = R(e, "." + _W), a = R(s, "." + WW), l = R(t, "." + _W); if (r && o < 7) l.insertBefore(e, t), this.moveData(e, t, l, !0, i); else if (r && r.target.offsetHeight > 0 && o > r.target.offsetHeight - 10) l.insertBefore(e, t.nextElementSibling), this.moveData(e, t, l, !1, i); else { var h = this.expandParent(t), d = h.childNodes[n]; h.insertBefore(e, d), this.moveData(e, d, h, !0, i) } this.updateElement(s, a), this.updateAriaLevel(e), i.element.id === this.element.id ? this.updateList() : (i.updateInstance(), this.updateInstance()) }, t.prototype.moveData = function (e, t, i, n, o) { var s = R(i, "." + WW), a = this.getId(e), l = o.updateChildField(o.treeData, o.fields, a, null, null, !0), h = this.getId(t), c = this.getDataPos(this.treeData, this.fields, h), p = this.getId(s); if (1 === this.dataType) { this.updateField(this.treeData, this.fields, p, "hasChildren", !0); var u = d(c) ? this.treeData.length : n ? c : c + 1; if (d(p) && !this.hasPid) delete l[0][this.fields.parentID]; else { var g = this.isNumberTypeId ? parseFloat(p) : p; r(this.fields.parentID, g, l[0]) } if (this.treeData.splice(u, 0, l[0]), o.element.id !== this.element.id) { var m = o.removeChildNodes(a); u++; for (var f = 0, y = m.length; f < y; f++)this.treeData.splice(u, 0, m[f]), u++; o.groupedData = o.getGroupedData(o.treeData, o.fields.parentID) } this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID) } else this.addChildData(this.treeData, this.fields, p, l, n ? c : c + 1) }, t.prototype.expandParent = function (e) { var t = N("div.e-icons", e); t && t.classList.contains(VW) && !0 !== this.preventExpand && this.expandAction(e, t, null); var i = N("." + _W, e); if (!0 === this.preventExpand && !i && t && this.renderChildNodes(e), i = N("." + _W, e), d(i) || !0 !== this.preventExpand || (i.style.display = "none"), d(i) || !1 !== this.preventExpand || (i.style.display = "block"), d(i) && !0 === this.preventExpand) { d(t) && hT.generateIcon(this.createElement, e, VW, this.listBaseOption); (n = N("div.e-icons", e)) && n.classList.add("e-icon-expandable"), i = hT.generateUL(this.createElement, [], null, this.listBaseOption), e.appendChild(i), n ? x([n], FW) : hT.generateIcon(this.createElement, e, VW, this.listBaseOption), e.setAttribute("aria-expanded", "false"), i.style.display = "none" } if (d(i)) { this.trigger("nodeExpanding", this.getExpandEvent(e, null)), d(t) && hT.generateIcon(this.createElement, e, FW, this.listBaseOption); var n; (n = N("div.e-icons", e)) ? x([n], VW) : (hT.generateIcon(this.createElement, e, FW, this.listBaseOption), x([n = N("div.e-icons", e)], VW)), i = hT.generateUL(this.createElement, [], null, this.listBaseOption), e.appendChild(i), this.addExpand(e), this.trigger("nodeExpanded", this.getExpandEvent(e, null)) } return i }, t.prototype.updateElement = function (e, t) { if (t && 0 === e.childElementCount) { var i = N("div.e-icons", t); I(e), I(i); var n = this.getId(t); this.updateField(this.treeData, this.fields, n, "hasChildren", null), this.removeExpand(t, !0) } }, t.prototype.updateAriaLevel = function (e) { var t = this.parents(e, "." + _W).length; e.setAttribute("aria-level", "" + t), this.updateChildAriaLevel(N("." + _W, e), t + 1) }, t.prototype.updateChildAriaLevel = function (e, t) { if (!d(e)) for (var i = e.childNodes, n = 0, r = i.length; n < r; n++) { var o = i[n]; o.setAttribute("aria-level", "" + t), this.updateChildAriaLevel(N("." + _W, o), t + 1) } }, t.prototype.renderVirtualEle = function (e) { var t; e.event.offsetY > e.target.offsetHeight - 2 ? t = !1 : e.event.offsetY < 2 && (t = !0); var i = this.createElement("div", { className: ZW }), n = this.fullRowSelect ? t ? 1 : 2 : t ? 0 : 1; e.target.insertBefore(i, e.target.children[n]) }, t.prototype.removeVirtualEle = function () { var e = N("." + ZW); e && I(e) }, t.prototype.destroyDrag = function () { this.dragObj && this.dropObj && (this.dragObj.destroy(), this.dropObj.destroy()) }, t.prototype.getDragEvent = function (e, t, i, n, r, o, s, a) { var l = i ? R(i, "." + WW) : null, h = l ? this.getNodeData(l) : null, d = t ? t.dragLi : r, c = t ? t.dragData : null, p = i ? this.parents(i, "." + WW) : null, u = t.dragLi.parentElement, g = t.dragLi ? R(u, "." + WW) : null, m = null, f = null, y = [KW, "e-drop-in", "e-drop-out", "e-no-drop"], v = null, w = !0 === a ? d : l, b = w ? R(w, ".e-list-parent") : null, C = 0; if (g = t.dragLi && null === g ? R(u, "." + BW) : g, g = !0 === a ? this.dragParent : g, o) for (; C < 4;) { if (N(".e-icons", o).classList.contains(y[C])) { v = y[C]; break } C++ } if (b) { var L = 0; for (C = 0; C < b.childElementCount; C++) { if (L = !0 !== a && b.children[C] === d && l !== d ? ++L : L, !0 !== a && b.children[C].classList.contains("e-hover")) { f = e.offsetY >= 23 ? C + 1 : C; break } if (b.children[C] === w) { e.offsetY, f = C; break } } f = 0 !== L ? --f : f } if (i && (m = 0 === p.length ? null : i.classList.contains(WW) ? p[0] : p[1]), l === d && (m = l), i && n.offsetHeight <= 33 && e.offsetY < n.offsetHeight - 10 && e.offsetY > 6 && (m = l, !0 !== a)) { s = ++s; var M = m ? N(".e-list-parent", m) : null; if (f = M ? M.children.length : 0, !(this.fields.dataSource instanceof aA) && null === M && m) { var S = m.hasAttribute("data-uid") ? this.getChildNodes(this.fields.dataSource, m.getAttribute("data-uid").toString()) : null; f = S ? S.length : 0 } } return { cancel: !1, clonedNode: o, event: e, draggedNode: d, draggedNodeData: c, droppedNode: l, droppedNodeData: h, dropIndex: f, dropLevel: s, draggedParentNode: g, dropTarget: m, dropIndicator: v, target: n } }, t.prototype.addFullRow = function (e) { var t = this.liList.length; if (e) for (var i = 0; i < t; i++)this.createFullRow(this.liList[i]); else for (i = 0; i < t; i++) { I(N("." + $W, this.liList[i])) } }, t.prototype.createFullRow = function (e) { var t = this.createElement("div", { className: $W }); e.insertBefore(t, e.childNodes[0]) }, t.prototype.addMultiSelect = function (e) { if (e) for (var t = 0, i = O("." + WW + ':not([aria-selected="true"])', this.element); t < i.length; t++) { i[t].setAttribute("aria-selected", "false") } else for (var n = 0, r = O("." + WW + '[aria-selected="false"]', this.element); n < r.length; n++) { r[n].removeAttribute("aria-selected") } }, t.prototype.collapseByLevel = function (e, t, i) { if (t > 0 && !d(e)) for (var n = this.getVisibleNodes(i, e.childNodes), r = 0, o = n.length; r < o; r++) { var s = n[r], a = N("." + FW, N("." + XW, s)); d(a) || this.collapseNode(s, a, null), this.collapseByLevel(N("." + _W, s), t - 1, i) } }, t.prototype.collapseAllNodes = function (e) { for (var t = this.getVisibleNodes(e, O("." + FW, this.element)), i = 0, n = t.length; i < n; i++) { var r = t[i], o = R(r, "." + WW); this.collapseNode(o, r, null) } }, t.prototype.expandByLevel = function (e, t, i) { if (t > 0 && !d(e)) for (var n = this.getVisibleNodes(i, e.childNodes), r = 0, o = n.length; r < o; r++) { var s = n[r], a = N("." + VW, N("." + XW, s)); d(a) || this.expandAction(s, a, null), this.expandByLevel(N("." + _W, s), t - 1, i) } }, t.prototype.expandAllNodes = function (e) { for (var t = this.getVisibleNodes(e, O("." + VW, this.element)), i = 0, n = t.length; i < n; i++) { var r = t[i], o = R(r, "." + WW); this.expandAction(o, r, null, !0) } }, t.prototype.getVisibleNodes = function (e, t) { var i = Array.prototype.slice.call(t); if (e) for (var n = 0; n < i.length; n++)D(i[n]) || (i.splice(n, 1), n--); return i }, t.prototype.removeNode = function (e) { var t = R(e, "." + _W), i = R(t, "." + WW); I(e), this.updateElement(t, i), this.updateInstance(), this.removeData(e) }, t.prototype.updateInstance = function () { this.updateList(), this.updateSelectedNodes(), this.updateExpandedNodes() }, t.prototype.updateList = function () { this.liList = Array.prototype.slice.call(O("." + WW, this.element)) }, t.prototype.updateSelectedNodes = function () { this.setProperties({ selectedNodes: [] }, !0); var e = O("." + UW, this.element); this.selectGivenNodes(e) }, t.prototype.updateExpandedNodes = function () { this.setProperties({ expandedNodes: [] }, !0); for (var e = O('[aria-expanded="true"]', this.element), t = 0, i = e.length; t < i; t++)this.addExpand(e[t]) }, t.prototype.removeData = function (e) { if (1 === this.dataType) { var t = new aA(this.treeData), i = this.getId(e), n = {}, r = this.isNumberTypeId ? parseFloat(i) : i; n[this.fields.id] = r, t.remove(this.fields.id, n), this.removeChildNodes(i) } else { i = this.getId(e); this.updateChildField(this.treeData, this.fields, i, null, null, !0) } }, t.prototype.removeChildNodes = function (e) { var t = this.getChildGroup(this.groupedData, e, !1), i = []; if (t) for (var r = 0, o = t.length; r < o; r++) { var s = new aA(this.treeData), a = n(this.fields.id, t[r]).toString(), l = {}, h = this.isNumberTypeId ? parseFloat(a) : a; l[this.fields.id] = h; var d = s.remove(this.fields.id, l); i.push(d[0]), this.removeChildNodes(a) } return i }, t.prototype.doGivenAction = function (e, t, i) { for (var n = 0, r = e.length; n < r; n++) { var o = this.getElement(e[n]); if (!d(o)) { var s = N("." + t, N("." + XW, o)); d(s) || (i ? this.expandAction(o, s, null) : this.collapseNode(o, s, null)) } } }, t.prototype.addGivenNodes = function (e, t, i, n, o) { if (0 !== e.length) { var s = this.getSortedData(e), a = t ? parseFloat(t.getAttribute("aria-level")) + 1 : 1; n && this.updateMapper(a); for (var l, h = hT.createListItemFromJson(this.createElement, s, this.listBaseOption, a), c = (l = o || (t ? this.expandParent(t) : N("." + _W, this.element))).childNodes[i], p = 0; p < h.length; p++)l.insertBefore(h[p], c); var u = this.getId(t); if (1 === this.dataType) { this.updateField(this.treeData, this.fields, u, "hasChildren", !0); for (var g = this.getId(c), m = d(g) ? this.treeData.length : this.getDataPos(this.treeData, this.fields, g), f = 0; f < e.length; f++) { if (!d(u)) { var y = this.isNumberTypeId ? parseFloat(u) : u; r(this.fields.parentID, y, e[f]) } this.treeData.splice(m, 0, e[f]), m++ } } else this.addChildData(this.treeData, this.fields, u, e, i); this.finalizeNode(l) } }, t.prototype.updateMapper = function (e) { var t = 1 === e ? this.fields : this.getChildFields(this.fields, e - 1, 1); this.updateListProp(t) }, t.prototype.updateListProp = function (e) { var t = this.getActualProperties(e); this.listBaseOption.fields = t, this.listBaseOption.fields.url = t.hasOwnProperty("navigateUrl") ? t.navigateUrl : "navigateUrl" }, t.prototype.getDataPos = function (e, t, i) { for (var r = null, o = 0, s = e.length; o < s; o++) { var a = n(t.id, e[o]); if (e[o] && a && a.toString() === i) return o; if ("string" != typeof t.child || d(n(t.child, e[o]))) { if (this.fields.dataSource instanceof aA && !d(n("child", e[o]))) { var l = n("child", e[o]); if (null !== (r = this.getDataPos(l, this.getChildMapper(t), i))) break } } else { var h = n(t.child, e[o]); if (null !== (r = this.getDataPos(h, this.getChildMapper(t), i))) break } } return r }, t.prototype.addChildData = function (e, t, i, r, o) { var s; if (d(i)) { o = d(o) ? e.length : o; for (var a = 0, l = r.length; a < l; a++)e.splice(o, 0, r[a]), o++; return s } for (var h = 0, c = e.length; h < c; h++) { var p = n(t.id, e[h]); if (e[h] && p && p.toString() === i) { if ("string" == typeof t.child && e[h].hasOwnProperty(t.child) || this.fields.dataSource instanceof aA && e[h].hasOwnProperty("child")) { var u = n(g = "string" == typeof t.child ? t.child : "child", e[h]); o = d(o) ? u.length : o; for (a = 0, l = r.length; a < l; a++)u.splice(o, 0, r[a]), o++ } else { var g = "string" == typeof t.child ? t.child : "child"; e[h][g] = r } return !0 } if ("string" != typeof t.child || d(n(t.child, e[h]))) { if (this.fields.dataSource instanceof aA && !d(n("child", e[h]))) { u = n("child", e[h]); if (void 0 !== (s = this.addChildData(u, this.getChildMapper(t), i, r, o))) break } } else { var m = n(t.child, e[h]); if (void 0 !== (s = this.addChildData(m, this.getChildMapper(t), i, r, o))) break } } return s }, t.prototype.doDisableAction = function (e) { for (var t = 0, i = e.length; t < i; t++) { var n = this.getElement(e[t]); if (d(n)) { (e[t] ? e[t].toString() : null) && -1 === this.disableNode.indexOf(e[t].toString()) && this.disableNode.push(e[t].toString()) } else n.setAttribute("aria-disabled", "true"), S([n], "e-disable") } }, t.prototype.doEnableAction = function (e) { for (var t = 0, i = e.length; t < i; t++) { var n = this.getElement(e[t]); if (d(n)) { var r = e[t] ? e[t].toString() : null; r && -1 !== this.disableNode.indexOf(r) && this.disableNode.splice(this.disableNode.indexOf(r), 1) } else n.removeAttribute("aria-disabled"), x([n], "e-disable") } }, t.prototype.setTouchClass = function () { var e = R(this.element, ".e-bigger"); this.touchClass = d(e) ? "" : "e-small" }, t.prototype.updatePersistProp = function () { this.removeField(this.treeData, this.fields, ["selected", "expanded"]); for (var e = this.selectedNodes, t = 0, i = e.length; t < i; t++)this.updateField(this.treeData, this.fields, e[t], "selected", !0); for (var n = this.expandedNodes, r = 0, o = n.length; r < o; r++)this.updateField(this.treeData, this.fields, n[r], "expanded", !0); if (this.showCheckBox) { this.removeField(this.treeData, this.fields, ["isChecked"]); var s = this.checkedNodes, a = 0; for (o = s.length; a < o; a++)this.updateField(this.treeData, this.fields, s[a], "isChecked", !0) } }, t.prototype.removeField = function (e, t, i) { if (!d(e) && !d(t)) for (var r = 0, o = e.length; r < o; r++) { for (var s = 0; s < i.length; s++) { var a = this.getMapperProp(t, i[s]); d(e[r][a]) || delete e[r][a] } "string" != typeof t.child || d(n(t.child, e[r])) ? this.fields.dataSource instanceof aA && !d(n("child", e[r])) && this.removeField(n("child", e[r]), this.getChildMapper(t), i) : this.removeField(n(t.child, e[r]), this.getChildMapper(t), i) } }, t.prototype.getMapperProp = function (e, t) { switch (t) { case "selected": return d(e.selected) ? "selected" : e.selected; case "expanded": return d(e.expanded) ? "expanded" : e.expanded; case "isChecked": return d(e.isChecked) ? "isChecked" : e.isChecked; case "hasChildren": return d(e.hasChildren) ? "hasChildren" : e.hasChildren; default: return t } }, t.prototype.updateField = function (e, t, i, n, o) { if (!d(i)) if (1 === this.dataType) { var s = this.isNumberTypeId ? parseFloat(i) : i, a = new aA(this.treeData).executeLocal((new GD).where(t.id, "equal", s, !1)); r(this.getMapperProp(t, n), o, a[0]) } else this.updateChildField(e, t, i, n, o) }, t.prototype.updateChildField = function (e, t, i, o, s, a) { var l; if (d(e)) return l; for (var h = 0, c = e.length; h < c; h++) { var p = n(t.id, e[h]); if (e[h] && p && p.toString() === i) return a ? l = e.splice(h, 1) : (r(this.getMapperProp(t, o), s, e[h]), l = []), l; if ("string" != typeof t.child || d(n(t.child, e[h]))) { if (this.fields.dataSource instanceof aA && !d(n("child", e[h]))) { var u = n("child", e[h]); if (void 0 !== (l = this.updateChildField(u, this.getChildMapper(t), i, o, s, a))) break } } else { var g = n(t.child, e[h]); if (void 0 !== (l = this.updateChildField(g, this.getChildMapper(t), i, o, s, a))) break } } return l }, t.prototype.triggerEvent = function () { this.nodeTemplate && this.isBlazorPlatform && !this.isStringTemplate && this.updateBlazorTemplate(); var e = { data: this.treeData }; this.trigger("dataSourceChanged", e) }, t.prototype.updateBlazorTemplate = function () { pe(this.element.id + "nodeTemplate", "NodeTemplate", this, !1) }, t.prototype.wireInputEvents = function (e) { Kv.add(e, "blur", this.inputFocusOut, this) }, t.prototype.wireEditingEvents = function (e) { if (e) { var t = this; this.touchEditObj = new yb(this.element, { tap: function (e) { 2 === e.tapCount && (e.originalEvent.preventDefault(), t.editingHandler(e.originalEvent)) } }) } else this.touchEditObj && this.touchEditObj.destroy() }, t.prototype.wireClickEvent = function (e) { if (e) { var t = this; this.touchClickObj = new yb(this.element, { tap: function (e) { e.originalEvent.preventDefault(), t.clickHandler(e) } }) } else this.touchClickObj && this.touchClickObj.destroy() }, t.prototype.wireExpandOnEvent = function (e) { var t = this; if (e) { var i = this; this.touchExpandObj = new yb(this.element, { tap: function (e) { ("Click" === t.expandOnType || "DblClick" === t.expandOnType && 2 === e.tapCount) && i.expandHandler(e) } }) } else this.touchExpandObj && this.touchExpandObj.destroy() }, t.prototype.mouseDownHandler = function (e) { this.mouseDownStatus = !0, (e.shiftKey || e.ctrlKey) && e.preventDefault(), e.ctrlKey && this.allowMultiSelection && Kv.add(this.element, "contextmenu", this.preventContextMenu, this) }, t.prototype.preventContextMenu = function (e) { e.preventDefault() }, t.prototype.wireEvents = function () { Kv.add(this.element, "mousedown", this.mouseDownHandler, this), this.wireClickEvent(!0), "None" !== this.expandOnType && this.wireExpandOnEvent(!0), Kv.add(this.element, "focus", this.focusIn, this), Kv.add(this.element, "blur", this.focusOut, this), Kv.add(this.element, "mouseover", this.onMouseOver, this), Kv.add(this.element, "mouseout", this.onMouseLeave, this), this.keyboardModule = new cb(this.element, { keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigs, eventName: "keydown" }) }, t.prototype.unWireEvents = function () { Kv.remove(this.element, "mousedown", this.mouseDownHandler), this.wireClickEvent(!1), this.wireExpandOnEvent(!1), Kv.remove(this.element, "focus", this.focusIn), Kv.remove(this.element, "blur", this.focusOut), Kv.remove(this.element, "mouseover", this.onMouseOver), Kv.remove(this.element, "mouseout", this.onMouseLeave), this.keyboardModule.destroy() }, t.prototype.parents = function (e, t) { for (var i = [], n = e.parentNode; !d(n);)F(n, t) && i.push(n), n = n.parentNode; return i }, t.prototype.isDescendant = function (e, t) { for (var i = t.parentNode; !d(i);) { if (i === e) return !0; i = i.parentNode } return !1 }, t.prototype.showSpinner = function (e) { S([e], qW), St({ target: e, width: uw.isDevice ? 16 : 14 }, this.createElement), zt(e) }, t.prototype.hideSpinner = function (e) { Ft(e), e.innerHTML = "", x([e], qW) }, t.prototype.setCheckedNodes = function (e) { e = JSON.parse(JSON.stringify(e)), this.uncheckAll(this.checkedNodes), this.setIndeterminate(e), e.length > 0 && this.checkAll(e) }, t.prototype.setValidCheckedNode = function (e) { if (1 === this.dataType) { var t = this.fields, i = new aA(this.treeData).executeLocal((new GD).where(t.id, "equal", e, !0)); if (i[0] && (this.setChildCheckState(i, e, i[0]), this.autoCheck)) { for (var r = i[0][this.fields.parentID] ? i[0][this.fields.parentID].toString() : null, o = this.getChildNodes(this.treeData, r), s = 0, a = 0; a < o.length; a++) { var l = o[a][this.fields.id].toString(); -1 !== this.checkedNodes.indexOf(l) && s++ } s === o.length && -1 === this.checkedNodes.indexOf(r) && r && this.checkedNodes.push(r) } } else if (2 === this.dataType) for (var h = 0; h < this.treeData.length; h++) { if ((this.treeData[h][this.fields.id] ? this.treeData[h][this.fields.id].toString() : "") === e && -1 === this.checkedNodes.indexOf(e)) { this.checkedNodes.push(e); break } var d = n(this.fields.child.toString(), this.treeData[h]); d && this.setChildCheckState(d, e, this.treeData[h]) } }, t.prototype.setChildCheckState = function (e, t, i) { var r, o = 0; if (1 === this.dataType) { i && (r = i[this.fields.id] ? i[this.fields.id].toString() : null); for (var s = 0; s < e.length; s++) { var a = e[s][this.fields.id] ? e[s][this.fields.id].toString() : null; i && r && this.autoCheck && -1 !== this.checkedNodes.indexOf(r) && -1 === this.checkedNodes.indexOf(a) && this.checkedNodes.push(a), a === t && -1 === this.checkedNodes.indexOf(t) && this.checkedNodes.push(t); (h = this.getChildNodes(this.treeData, a)) && this.setChildCheckState(h, t, i) } } else { i && (r = i[this.fields.id] ? i[this.fields.id].toString() : ""); for (s = 0; s < e.length; s++) { var l = e[s][this.fields.id] ? e[s][this.fields.id].toString() : ""; i && r && this.autoCheck && -1 !== this.checkedNodes.indexOf(r) && -1 === this.checkedNodes.indexOf(l) && this.checkedNodes.push(l), l === t && -1 === this.checkedNodes.indexOf(t) && this.checkedNodes.push(t); var h; (h = n(this.fields.child.toString(), e[s])) && this.setChildCheckState(h, t, e[s]), -1 !== this.checkedNodes.indexOf(l) && this.autoCheck && o++ , o === e.length && -1 === this.checkedNodes.indexOf(r) && this.autoCheck && this.checkedNodes.push(r) } } }, t.prototype.setIndeterminate = function (e) { for (var t = 0; t < e.length; t++)this.setValidCheckedNode(e[t]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "allowDragAndDrop": this.setDragAndDrop(this.allowDragAndDrop); break; case "allowEditing": this.wireEditingEvents(this.allowEditing); break; case "allowMultiSelection": if (this.selectedNodes.length > 1) { var r = this.getElement(this.selectedNodes[0]); this.isLoaded = !1, this.removeSelectAll(), this.selectNode(r, null), this.isLoaded = !0 } this.setMultiSelect(this.allowMultiSelection), this.addMultiSelect(this.allowMultiSelection); break; case "checkedNodes": this.showCheckBox && (this.checkedNodes = t.checkedNodes, this.setCheckedNodes(e.checkedNodes)); break; case "autoCheck": this.showCheckBox && (this.autoCheck = e.autoCheck, this.ensureIndeterminate()); break; case "cssClass": this.setCssClass(t.cssClass, e.cssClass); break; case "enableRtl": this.setEnableRtl(); break; case "expandedNodes": this.isAnimate = !1, this.setProperties({ expandedNodes: [] }, !0), this.collapseAll(), this.isInitalExpand = !0, this.setProperties({ expandedNodes: d(e.expandedNodes) ? [] : e.expandedNodes }, !0), this.doExpandAction(), this.isInitalExpand = !1, this.isAnimate = !0; break; case "expandOn": this.wireExpandOnEvent(!1), this.setExpandOnType(), "None" !== this.expandOnType && this.wireExpandOnEvent(!0); break; case "fields": this.isAnimate = !1, this.initialRender = !0, this.updateListProp(this.fields), this.reRenderNodes(), this.initialRender = !1, this.isAnimate = !0; break; case "fullRowSelect": this.setFullRow(this.fullRowSelect), this.addFullRow(this.fullRowSelect); break; case "loadOnDemand": if (!1 === this.loadOnDemand && !this.onLoaded) { for (var o = this.element.querySelectorAll("li"), s = 0; s < o.length;)this.renderChildNodes(o[s], !0, null, !0), s++; this.onLoaded = !0 } break; case "nodeTemplate": this.nodeTemplateFn = this.templateComplier(this.nodeTemplate), this.reRenderNodes(); break; case "selectedNodes": this.removeSelectAll(), this.setProperties({ selectedNodes: e.selectedNodes }, !0), this.doSelectionAction(); break; case "showCheckBox": case "sortOrder": this.reRenderNodes() } } }, t.prototype.destroy = function () { ue(this.element.id + "nodeTemplate"), this.element.removeAttribute("aria-activedescendant"), this.element.removeAttribute("tabindex"), this.unWireEvents(), this.wireEditingEvents(!1), this.rippleFn(), this.rippleIconFn(), this.setCssClass(this.cssClass, null), this.setDragAndDrop(!1), this.setFullRow(!1), this.element.innerHTML = "", e.prototype.destroy.call(this) }, t.prototype.addNodes = function (e, t, i, r) { if (!d(e)) { e = JSON.parse(JSON.stringify(e)); var o = this.getElement(t); if (this.preventExpand = r, this.fields.dataSource instanceof aA) { var s, a = o ? o.querySelector(".e-icons") : null, l = this; o && a && a.classList.contains(VW) && null === o.querySelector("." + _W) ? l.renderChildNodes(o, null, function () { s = o.querySelector("." + _W), l.addGivenNodes(e, o, i, !0, s), l.triggerEvent() }) : (this.addGivenNodes(e, o, i, !0), this.triggerEvent()) } else if (2 === this.dataType) this.addGivenNodes(e, o, i); else { if (o) this.addGivenNodes(e, o, i); else { e = this.getSortedData(e); for (var h = 0; h < e.length; h++) { var c = n(this.fields.parentID, e[h]); o = c ? this.getElement(c.toString()) : c, this.addGivenNodes([e[h]], o, i) } } this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID) } this.showCheckBox && o && this.ensureParentCheckState(o), this.fields.dataSource instanceof aA == !1 && (this.preventExpand = !1, this.triggerEvent()) } }, t.prototype.beginEdit = function (e) { var t = this.getElement(e); d(t) || this.createTextbox(t, null) }, t.prototype.checkAll = function (e) { this.showCheckBox && this.doCheckBoxAction(e, !0) }, t.prototype.collapseAll = function (e, t, i) { d(e) ? t > 0 ? this.collapseByLevel(N("." + _W, this.element), t, i) : this.collapseAllNodes(i) : this.doGivenAction(e, FW, !1) }, t.prototype.disableNodes = function (e) { d(e) || this.doDisableAction(e) }, t.prototype.enableNodes = function (e) { d(e) || this.doEnableAction(e) }, t.prototype.ensureVisible = function (e) { var t = this.getElement(e); if (!d(t)) { var i = this.parents(t, "." + WW); this.expandAll(i), setTimeout(function () { t.scrollIntoView(!0) }, 450) } }, t.prototype.expandAll = function (e, t, i) { d(e) ? t > 0 ? this.expandByLevel(N("." + _W, this.element), t, i) : this.expandAllNodes(i) : this.doGivenAction(e, VW, !0) }, t.prototype.getAllCheckedNodes = function () { for (var e = this.checkedNodes, t = [], i = 0, n = this.fields.id; i < this.treeData.length; i++) { var r = null, o = null, s = this.element.querySelector('[data-uid="' + this.treeData[i][n].toString() + '"]'); s && null === s.querySelector(".e-list-item") && (!0 === this.getTreeData()[i][this.fields.isChecked] && -1 === this.checkedElement.indexOf(this.getTreeData()[i][n].toString()) && (t.push(this.treeData[i][n].toString()), r = 2), 2 !== r && (r = 1), null !== (o = this.getChildNodes(this.getTreeData(), this.getTreeData()[i][n].toString())) && this.autoCheck ? this.allCheckNode(o, t, r) : o = null) } for (i = 0; i < e.length;)if (-1 === t.indexOf(e[i])) { t.push(e[i]); var a = this.element.querySelector('[data-uid="' + e[i] + '"]'); if (a && null === a.querySelector(".e-list-item")) { var l = this.getChildNodes(this.treeData, e[i].toString()); l && this.autoCheck ? this.allCheckNode(l, t) : l = null } i++ } else i++; return t }, t.prototype.getNode = function (e) { var t = this.getElement(e); return this.getNodeData(t, !0) }, t.prototype.getTreeData = function (e) { var t = this.getId(e); if (this.updatePersistProp(), d(t)) return this.treeData; var i = this.getNodeObject(t); return d(i) ? [] : [i] }, t.prototype.moveNodes = function (e, t, i, n) { var r = this.getElement(t); if (!d(r)) { for (var o = 0; o < e.length; o++) { var s = this.getElement(e[o]); d(s) || r.isSameNode(s) || this.isDescendant(s, r) || (this.preventExpand = n, this.dropAsChildNode(s, r, this, i)) } this.fields.dataSource instanceof aA == !1 && (this.preventExpand = !1), this.triggerEvent() } }, t.prototype.removeNodes = function (e) { if (!d(e)) { for (var t = 0, i = e.length; t < i; t++) { var n = this.getElement(e[t]); d(n) || this.removeNode(n) } 1 === this.dataType && (this.groupedData = this.getGroupedData(this.treeData, this.fields.parentID)), this.triggerEvent() } }, t.prototype.updateNode = function (e, t) { var i = this; if (!d(e) && !d(t) && this.allowEditing) { var n = this.getElement(e); if (!d(n)) { var r = N("." + HW, n); this.updateOldText(n); var o = this.getEditEvent(n, null, null); this.trigger("nodeEditing", o, function (e) { e.cancel || i.appendNewText(n, r, t, !1) }) } } }, t.prototype.uncheckAll = function (e) { this.showCheckBox && this.doCheckBoxAction(e, !1) }; var i; return zW([Y(!1)], t.prototype, "allowDragAndDrop", void 0), zW([Y(!1)], t.prototype, "allowEditing", void 0), zW([Y(!1)], t.prototype, "allowMultiSelection", void 0), zW([U({}, cH)], t.prototype, "animation", void 0), zW([Y()], t.prototype, "checkedNodes", void 0), zW([Y("")], t.prototype, "cssClass", void 0), zW([Y(!1)], t.prototype, "enablePersistence", void 0), zW([Y()], t.prototype, "expandedNodes", void 0), zW([Y("Auto")], t.prototype, "expandOn", void 0), zW([U({}, hH)], t.prototype, "fields", void 0), zW([Y(!0)], t.prototype, "fullRowSelect", void 0), zW([Y(!0)], t.prototype, "loadOnDemand", void 0), zW([Y()], t.prototype, "nodeTemplate", void 0), zW([Y()], t.prototype, "selectedNodes", void 0), zW([Y("None")], t.prototype, "sortOrder", void 0), zW([Y(!1)], t.prototype, "showCheckBox", void 0), zW([Y(!0)], t.prototype, "autoCheck", void 0), zW([X()], t.prototype, "created", void 0), zW([X()], t.prototype, "dataBound", void 0), zW([X()], t.prototype, "dataSourceChanged", void 0), zW([X()], t.prototype, "drawNode", void 0), zW([X()], t.prototype, "destroyed", void 0), zW([X()], t.prototype, "keyPress", void 0), zW([X()], t.prototype, "nodeChecked", void 0), zW([X()], t.prototype, "nodeChecking", void 0), zW([X()], t.prototype, "nodeClicked", void 0), zW([X()], t.prototype, "nodeCollapsed", void 0), zW([X()], t.prototype, "nodeCollapsing", void 0), zW([X()], t.prototype, "nodeDragging", void 0), zW([X()], t.prototype, "nodeDragStart", void 0), zW([X()], t.prototype, "nodeDragStop", void 0), zW([X()], t.prototype, "nodeDropped", void 0), zW([X()], t.prototype, "nodeEdited", void 0), zW([X()], t.prototype, "nodeEditing", void 0), zW([X()], t.prototype, "nodeExpanded", void 0), zW([X()], t.prototype, "nodeExpanding", void 0), zW([X()], t.prototype, "nodeSelected", void 0), zW([X()], t.prototype, "nodeSelecting", void 0), t = i = zW([J], t) }(Kw), uH = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gH = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, mH = "e-close", fH = "e-open", yH = "e-transition", vH = "e-visibility", wH = "e-disable-animation", bH = "e-sidebar-context", CH = "e-sidebar-absolute", LH = function (e) { function t(t, i) { return e.call(this, t, i) || this } return uH(t, e), t.prototype.preRender = function () { this.setWidth() }, t.prototype.render = function () { this.initialize(), this.wireEvents() }, t.prototype.initialize = function () { this.setTarget(), this.addClass(), this.setZindex(), this.enableDock && this.setDock(), this.isOpen ? this.show() : this.setMediaQuery(), this.checkType(!0), this.setType(this.type), this.setCloseOnDocumentClick(), this.setEnableRTL() }, t.prototype.setEnableRTL = function () { this.enableRtl ? S([this.element], "e-rtl") : x([this.element], "e-rtl") }, t.prototype.setTarget = function () { this.sidebarEleCopy = this.element.cloneNode(!0), "string" == typeof this.target && this.setProperties({ target: document.querySelector(this.target) }, !0), this.target && (this.target.insertBefore(this.element, this.target.children[0]), S([this.element], CH), S([this.target], bH)) }, t.prototype.setCloseOnDocumentClick = function () { this.closeOnDocumentClick ? Kv.add(document, "mousedown touchstart", this.documentclickHandler, this) : Kv.remove(document, "mousedown touchstart", this.documentclickHandler) }, t.prototype.setWidth = function () { this.enableDock && "Left" === this.position ? z(this.element, { width: this.setDimension(this.dockSize) }) : this.enableDock && "Right" === this.position ? z(this.element, { width: this.setDimension(this.dockSize) }) : this.enableDock || z(this.element, { width: this.setDimension(this.width) }) }, t.prototype.setDimension = function (e) { return e = "number" == typeof e ? v(e) : "string" == typeof e ? e.match(/px|%|em/) ? e : v(e) : "100%" }, t.prototype.setZindex = function () { z(this.element, { "z-index": "" + this.zIndex }) }, t.prototype.addClass = function () { var e = document.querySelector(".e-main-content"); d(e || this.element.nextElementSibling) || S([e || this.element.nextElementSibling], ["e-content-animation"]), this.enableDock || "Auto" === this.type || S([this.element], [vH]), x([this.element], [fH, mH, "e-right", "e-left", "e-slide", "e-push", "e-over"]), this.element.classList.add("e-sidebar"), S([this.element], "Right" === this.position ? "e-right" : "e-left"), "Auto" !== this.type || uw.isDevice ? this.isOpen || S([this.element], mH) : this.show(), this.enableDock && S([this.element], "e-dock"), this.tabIndex = this.element.hasAttribute("tabindex") ? this.element.getAttribute("tabindex") : "0", this.element.setAttribute("tabindex", this.tabIndex) }, t.prototype.checkType = function (e) { "Push" !== this.type && "Over" !== this.type && "Slide" !== this.type ? this.type = "Auto" : this.element.classList.contains(mH) || e || this.hide() }, t.prototype.transitionEnd = function (e) { this.setDock(), d(e) || e.target !== this.element || this.triggerChange(), Kv.remove(this.element, "transitionend", this.transitionEnd) }, t.prototype.destroyBackDrop = function () { var e = document.querySelector(".e-main-content") || this.element.nextElementSibling; this.target && this.showBackdrop && e ? x([e], "e-backdrop") : this.showBackdrop && this.modal && (this.modal.style.display = "none", this.modal.outerHTML = "", this.modal = null) }, t.prototype.hide = function (e) { var t = this, i = { model: this, element: this.element, cancel: !1, isInteracted: !d(e), event: e || null }; w() && delete i.model, this.trigger("close", i, function (e) { if (!e.cancel) { if (t.element.classList.contains(mH)) return; t.element.classList.contains(fH) && !t.animate && t.triggerChange(), S([t.element], mH), x([t.element], fH), t.enableDock ? z(t.element, { width: v(t.dockSize) }) : z(t.element, { width: v(t.width) }), t.setType(t.type); var i = document.querySelector(".e-main-content") || t.element.nextElementSibling; !t.enableDock && i && (i.style.transform = "translateX(0px)", "Left" === t.position ? i.style.marginLeft = "0px" : i.style.marginRight = "0px"), t.destroyBackDrop(), t.setAnimation(), "Slide" === t.type && document.body.classList.remove("e-sidebar-overflow"), t.setProperties({ isOpen: !1 }, !0), t.enableDock && setTimeout(function () { return t.setTimeOut() }, 50), Kv.add(t.element, "transitionend", t.transitionEnd, t) } }) }, t.prototype.setTimeOut = function () { var e = document.querySelector(".e-main-content") || this.element.nextElementSibling; this.element.classList.contains(fH) && e ? "Left" === this.position ? "auto" === this.width ? e.style.marginLeft = this.setDimension(this.element.getBoundingClientRect().width) : e.style.marginLeft = this.setDimension(this.width) : "auto" === this.width ? e.style.marginRight = this.setDimension(this.element.getBoundingClientRect().width) : e.style.marginRight = this.setDimension(this.width) : this.element.classList.contains(mH) && e && ("Left" === this.position ? "auto" === this.dockSize ? e.style.marginLeft = this.setDimension(this.element.getBoundingClientRect().width) : e.style.marginLeft = this.setDimension(this.dockSize) : "auto" === this.dockSize ? e.style.marginRight = this.setDimension(this.element.getBoundingClientRect().width) : e.style.marginRight = this.setDimension(this.dockSize)) }, t.prototype.show = function (e) { var t = this, i = { model: this, element: this.element, cancel: !1, isInteracted: !d(e), event: e || null }; w() && delete i.model, this.trigger("open", i, function (e) { if (!e.cancel) { if (x([t.element], vH), t.element.classList.contains(fH)) return; t.element.classList.contains(mH) && !t.animate && t.triggerChange(), S([t.element], [fH, yH]), z(t.element, { transform: "" }), x([t.element], mH), z(t.element, { width: v(t.width) }), t.setType(t.type), t.createBackDrop(), t.setAnimation(), "Slide" === t.type && document.body.classList.add("e-sidebar-overflow"), t.setProperties({ isOpen: !0 }, !0), Kv.add(t.element, "transitionend", t.transitionEnd, t) } }) }, t.prototype.setAnimation = function () { this.animate ? x([this.element], wH) : S([this.element], wH) }, t.prototype.triggerChange = function () { var e = { name: "change", element: this.element }; this.trigger("change", e) }, t.prototype.setDock = function () { this.enableDock && "Left" === this.position && !this.getState() ? z(this.element, { transform: "translateX(-100%) translateX(" + this.setDimension(this.dockSize) + ")" }) : this.enableDock && "Right" === this.position && !this.getState() && z(this.element, { transform: "translateX(100%) translateX(-" + this.setDimension(this.dockSize) + ")" }), this.element.classList.contains(mH) && this.enableDock && z(this.element, { width: this.setDimension(this.dockSize) }) }, t.prototype.createBackDrop = function () { if (this.target && this.showBackdrop && this.getState()) { S([document.querySelector(".e-main-content") || this.element.nextElementSibling], "e-backdrop") } else this.showBackdrop && !this.modal && this.getState() && (this.modal = this.createElement("div"), this.modal.className = "e-sidebar-overlay", this.modal.style.display = "block", document.body.appendChild(this.modal)) }, t.prototype.getPersistData = function () { return this.addOnPersist(["type", "position", "isOpen"]) }, t.prototype.getModuleName = function () { return "sidebar" }, t.prototype.toggle = function (e) { this.element.classList.contains(fH) ? this.hide() : this.show() }, t.prototype.getState = function () { return !!this.element.classList.contains(fH) }, t.prototype.setMediaQuery = function () { if (this.mediaQuery) { ("string" == typeof this.mediaQuery ? window.matchMedia(this.mediaQuery).matches : this.mediaQuery.matches) ? this.show() : this.getState() && this.hide() } }, t.prototype.resize = function (e) { "Auto" === this.type && (uw.isDevice ? S([this.element], "e-over") : S([this.element], "e-push")), this.setMediaQuery() }, t.prototype.documentclickHandler = function (e) { R(e.target, ".e-control.e-sidebar") || this.hide(e) }, t.prototype.enableGestureHandler = function (e) { "Left" === this.position && "Right" === e.swipeDirection && e.startX <= 20 && e.distanceX >= 50 && e.velocity >= .5 ? this.show() : "Left" === this.position && "Left" === e.swipeDirection ? this.hide() : "Right" === this.position && "Right" === e.swipeDirection ? this.hide() : "Right" === this.position && "Left" === e.swipeDirection && window.innerWidth - e.startX <= 20 && e.distanceX >= 50 && e.velocity >= .5 && this.show() }, t.prototype.setEnableGestures = function () { this.enableGestures ? (this.mainContentEle = new yb(document.body, { swipe: this.enableGestureHandler.bind(this) }), this.sidebarEle = new yb(this.element, { swipe: this.enableGestureHandler.bind(this) })) : this.mainContentEle && this.sidebarEle && (this.mainContentEle.destroy(), this.sidebarEle.destroy()) }, t.prototype.wireEvents = function () { this.setEnableGestures(), window.addEventListener("resize", this.resize.bind(this)) }, t.prototype.unWireEvents = function () { window.removeEventListener("resize", this.resize.bind(this)), Kv.remove(document, "mousedown touchstart", this.documentclickHandler), this.mainContentEle && this.mainContentEle.destroy(), this.sidebarEle && this.sidebarEle.destroy() }, t.prototype.onPropertyChanged = function (t, i) { for (var n = document.querySelector(".e-main-content") || this.element.nextElementSibling, r = 0, o = Object.keys(t); r < o.length; r++) { switch (o[r]) { case "isOpen": this.isOpen ? this.show() : this.hide(); break; case "width": this.setWidth(), this.getState() || this.setDock(); break; case "animate": this.setAnimation(); break; case "type": this.checkType(!1), x([this.element], [vH]), this.addClass(), S([this.element], "Auto" === this.type ? uw.isDevice ? ["e-over"] : ["e-push"] : ["e-" + this.type.toLowerCase()]); break; case "position": this.element.style.transform = "", this.setDock(), n && ("Left" === this.position ? n.style.marginRight = "0px" : n.style.marginLeft = "0px"), "Right" === this.position ? (x([this.element], "e-left"), S([this.element], "e-right")) : (x([this.element], "e-right"), S([this.element], "e-left")), this.setType(this.type); break; case "showBackdrop": this.showBackdrop ? this.createBackDrop() : this.modal && (this.modal.style.display = "none", this.modal.outerHTML = "", this.modal = null); break; case "target": "string" == typeof this.target && this.setProperties({ target: document.querySelector(this.target) }, !0), d(this.target) ? (x([this.element], CH), x([i.target], bH), z(n, { "margin-left": 0, "margin-right": 0 }), document.body.insertAdjacentElement("afterbegin", this.element)) : e.prototype.refresh.call(this); break; case "closeOnDocumentClick": this.setCloseOnDocumentClick(); break; case "enableDock": this.getState() || this.setDock(); break; case "zIndex": this.setZindex(); break; case "mediaQuery": this.setMediaQuery(); break; case "enableGestures": this.setEnableGestures(); break; case "enableRtl": this.setEnableRTL() } } }, t.prototype.setType = function (e) { var t = this.element.getBoundingClientRect().width; this.setZindex(); var i = document.querySelector(".e-main-content") || this.element.nextElementSibling; i && (i.style.transform = "translateX(0px)", uw.isDevice || "Auto" === this.type || ("Left" === this.position ? i.style.marginLeft = "0px" : i.style.marginRight = "0px")); var n = (this.position, t + "px"), r = "Left" === this.position ? t : -t; switch (x([this.element], ["e-push", "e-over", "e-slide"]), e) { case "Push": S([this.element], ["e-push"]), i && (this.enableDock || this.element.classList.contains(fH)) && ("Left" === this.position ? i.style.marginLeft = n : i.style.marginRight = n); break; case "Slide": S([this.element], ["e-slide"]), i && (this.enableDock || this.element.classList.contains(fH)) && (i.style.transform = "translateX(" + r + "px)"); break; case "Over": S([this.element], ["e-over"]), this.enableDock && this.element.classList.contains(mH) && i && ("Left" === this.position ? i.style.marginLeft = n : i.style.marginRight = n); break; case "Auto": S([this.element], [yH]), uw.isDevice ? i && this.enableDock && !this.getState() ? ("Left" === this.position ? i.style.marginLeft = n : i.style.marginRight = n, S([this.element], "e-push")) : S([this.element], "e-over") : (S([this.element], "e-push"), i && (this.enableDock || this.element.classList.contains(fH)) && ("Left" === this.position ? i.style.marginLeft = n : i.style.marginRight = n)), this.createBackDrop() } }, t.prototype.destroy = function () { e.prototype.destroy.call(this), x([this.element], [fH, mH, "e-push", "e-slide", "e-over", "e-left", "e-right", yH]), this.target && (x([this.element], CH), x([this.target], bH)), this.destroyBackDrop(), this.element.style.width = "", this.element.style.zIndex = "", this.element.style.transform = "", d(this.sidebarEleCopy.getAttribute("tabindex")) ? this.element.removeAttribute("tabindex") : this.element.setAttribute("tabindex", this.tabIndex); var t = document.querySelector(".e-main-content") || this.element.nextElementSibling; d(t) || (t.style.margin = "", t.style.transform = ""), this.unWireEvents() }, gH([Y("auto")], t.prototype, "dockSize", void 0), gH([Y(null)], t.prototype, "mediaQuery", void 0), gH([Y(!1)], t.prototype, "enableDock", void 0), gH([Y("en-US")], t.prototype, "locale", void 0), gH([Y(!1)], t.prototype, "enablePersistence", void 0), gH([Y(!0)], t.prototype, "enableGestures", void 0), gH([Y(!1)], t.prototype, "isOpen", void 0), gH([Y(!1)], t.prototype, "enableRtl", void 0), gH([Y(!0)], t.prototype, "animate", void 0), gH([Y("auto")], t.prototype, "height", void 0), gH([Y(!1)], t.prototype, "closeOnDocumentClick", void 0), gH([Y("Left")], t.prototype, "position", void 0), gH([Y(null)], t.prototype, "target", void 0), gH([Y(!1)], t.prototype, "showBackdrop", void 0), gH([Y("Auto")], t.prototype, "type", void 0), gH([Y("auto")], t.prototype, "width", void 0), gH([Y(1e3)], t.prototype, "zIndex", void 0), gH([X()], t.prototype, "created", void 0), gH([X()], t.prototype, "close", void 0), gH([X()], t.prototype, "open", void 0), gH([X()], t.prototype, "change", void 0), gH([X()], t.prototype, "destroyed", void 0), t = gH([J], t) }(Kw), MH = function () { function e(e) { this.control = {}, this.rootControl = e } return e.prototype.setControlValues = function (e) { "rangeNavigator" === e.getModuleName() ? (this.control.periods = this.rootControl.periodSelectorSettings.periods, this.control.seriesXMax = e.chartSeries.xMax, this.control.seriesXMin = e.chartSeries.xMin, this.control.rangeSlider = e.rangeSlider, this.control.rangeNavigatorControl = e, this.control.endValue = e.endValue, this.control.startValue = e.startValue) : (this.control.periods = this.rootControl.periods, this.control.endValue = this.control.seriesXMax = e.seriesXMax, this.control.startValue = this.control.seriesXMin = e.seriesXMin, this.control.rangeNavigatorControl = this.rootControl.rangeNavigator, this.control.rangeNavigatorControl && (this.control.rangeSlider = this.rootControl.rangeNavigator.rangeSlider)), this.control.element = e.element, this.control.disableRangeSelector = e.disableRangeSelector }, e.prototype.appendSelector = function (e, t) { void 0 === t && (t = 0), this.renderSelectorElement(null, e, t), this.renderSelector() }, e.prototype.renderSelectorElement = function (e, t, i) { this.periodSelectorSize = e ? this.periodSelectorSize : new ej(i, this.rootControl.titleSize.height, t.width, t.height); var n, r; e ? (n = e.themeStyle.thumbWidth, r = e.element) : (n = t.thumbSize, r = t.element), Sn(r.id + "_Secondary_Element") && k(Sn(r.id + "_Secondary_Element")), this.periodSelectorDiv = M("div", { id: r.id + "_Secondary_Element", styles: "width: " + (this.periodSelectorSize.width - n) + "px;height: " + this.periodSelectorSize.height + "px;top:" + this.periodSelectorSize.y + "px;left:" + (this.periodSelectorSize.x + n / 2) + "px; position: absolute" }), r.appendChild(this.periodSelectorDiv) }, e.prototype.renderSelector = function () { var e = this; this.setControlValues(this.rootControl); var t = !0, i = this.control.element.id, n = M("div", { id: i + "_selector" }); this.periodSelectorDiv.appendChild(n); for (var r = this.control.periods, o = this.updateCustomElement(), s = "text-transform: none; text-overflow: unset", a = 0; a < r.length; a++)o.push({ align: "Left", text: r[a].text }); "stockChart" === this.rootControl.getModuleName() && (t = this.rootControl.enableCustomRange); var l; t && (this.calendarId = i + "_calendar", o.push({ template: "<button id=" + this.calendarId + "></button>", align: "Right" }), l = { selector: o, name: "RangeSelector", cancel: !1, enableCustomFormat: !0, content: "Date Range" }), "stockChart" === this.rootControl.getModuleName() && (o.push({ template: M("button", { id: i + "_reset", innerHTML: "Reset", styles: s, className: "e-dropdown-btn e-btn" }), align: "Right" }), this.rootControl.exportType.indexOf("Print") > -1 && o.push({ template: M("button", { id: i + "_print", innerHTML: "Print", styles: s, className: "e-dropdown-btn e-btn" }), align: "Right" }), this.rootControl.exportType.length && o.push({ template: M("button", { id: i + "_export", innerHTML: "Export", styles: s, className: "e-dropdown-btn e-btn" }), align: "Right" })), this.rootControl.trigger("selectorRender", l), this.toolbar = new HV({ items: l.selector, height: this.periodSelectorSize.height, clicked: function (t) { e.buttonClick(t, e.control) }, created: function () { e.nodes = e.toolbar.element.querySelectorAll(".e-toolbar-left")[0], d(e.selectedIndex) && r.map(function (t, i) { t.selected && (e.control.startValue = e.changedRange(t.intervalType, e.control.endValue, t.interval).getTime(), e.selectedIndex = e.nodes.childNodes.length - r.length + i) }), e.setSelectedStyle(e.selectedIndex) } }); this.toolbar.isStringTemplate = !0, this.toolbar.appendTo(n), this.triggerChange = !0, this.datePicker = new iE({ min: new Date(this.control.seriesXMin), max: new Date(this.control.seriesXMax), format: "dd'/'MM'/'yyyy", placeholder: "Select a range", showClearButton: !1, startDate: new Date(this.control.startValue), endDate: new Date(this.control.endValue), created: function (t) { if (l.enableCustomFormat) { var i = document.getElementsByClassName("e-date-range-wrapper")[0]; i.style.display = "none", i.insertAdjacentElement("afterend", M("div", { id: "customRange", innerHTML: l.content, className: "e-btn e-dropdown-btn", styles: 'font-family: "Segoe UI"; font-size: 14px; font-weight: 500; text-transform: none ' })), Sn("customRange").insertAdjacentElement("afterbegin", M("span", { id: "dateIcon", className: "e-input-group-icon e-range-icon e-btn-icon e-icons", styles: "font-size: 16px; min-height: 0px; margin: -3px 0 0 0; outline: none; min-width: 30px" })), document.getElementById("customRange").onclick = function () { e.datePicker.show(Sn("customRange")) } } }, change: function (t) { if (e.triggerChange && (e.control.rangeSlider && t.event ? e.control.rangeSlider.performAnimation(t.startDate.getTime(), t.endDate.getTime(), e.control.rangeNavigatorControl) : t.event && e.rootControl.rangeChanged(t.startDate.getTime(), t.endDate.getTime()), e.nodes = e.toolbar.element.querySelectorAll(".e-toolbar-left")[0], !e.rootControl.resizeTo && e.control.rangeSlider && e.control.rangeSlider.isDrag)) for (var i = 0, n = e.nodes.childNodes.length; i < n; i++)e.nodes.childNodes[i].childNodes[0].classList.remove("e-active"), e.nodes.childNodes[i].childNodes[0].classList.remove("e-active") } }), this.datePicker.appendTo("#" + this.calendarId) }, e.prototype.updateCustomElement = function () { var e = [], t = this.rootControl.element.id, i = "text-transform: none; text-overflow: unset"; return "stockChart" === this.rootControl.getModuleName() && (this.rootControl.seriesType.length && e.push({ template: M("button", { id: t + "_seriesType", innerHTML: "Series", styles: i }), align: "Left" }), this.rootControl.indicatorType.length && e.push({ template: M("button", { id: t + "_indicatorType", innerHTML: "Indicators", styles: i }), align: "Left" }), this.rootControl.trendlineType.length && e.push({ template: M("button", { id: t + "_trendType", innerHTML: "Trendline", styles: i }), align: "Left" })), e }, e.prototype.setSelectedStyle = function (e) { if (this.control.disableRangeSelector || "stockChart" === this.rootControl.getModuleName()) { for (var t = 0, i = this.nodes.childNodes.length; t < i; t++)this.nodes.childNodes[t].childNodes[0].classList.remove("e-active"), this.nodes.childNodes[t].childNodes[0].classList.remove("e-active"); this.nodes.childNodes[e].childNodes[0].classList.add("e-flat"), this.nodes.childNodes[e].childNodes[0].classList.add("e-active") } }, e.prototype.buttonClick = function (e, t) { var i, n, r = this, o = (this.toolbar.items, e.item), s = this.control.rangeSlider, a = this.control.periods, l = a.filter(function (e) { return e.text === o.text }); if (a.map(function (t, i) { t.text === e.item.text && (r.selectedIndex = r.nodes.childNodes.length - a.length + i) }), "" !== e.item.text && this.setSelectedStyle(this.selectedIndex), "all" === o.text.toLowerCase() ? (i = t.seriesXMin, n = t.seriesXMax, s ? s.performAnimation(i, n, this.control.rangeNavigatorControl) : this.rootControl.rangeChanged(i, n)) : "ytd" === o.text.toLowerCase() ? s ? (i = new Date(new Date(s.currentEnd).getFullYear().toString()).getTime(), n = s.currentEnd, s.performAnimation(i, n, this.control.rangeNavigatorControl)) : (i = new Date(new Date(this.rootControl.currentEnd).getFullYear().toString()).getTime(), n = this.rootControl.currentEnd, this.rootControl.rangeChanged(i, n)) : "" !== o.text.toLowerCase() && (s ? (i = this.changedRange(l[0].intervalType, s.currentEnd, l[0].interval).getTime(), n = s.currentEnd, s.performAnimation(i, n, this.control.rangeNavigatorControl)) : (i = this.changedRange(l[0].intervalType, this.rootControl.currentEnd, l[0].interval).getTime(), n = this.rootControl.currentEnd, this.rootControl.rangeChanged(i, n))), "stockChart" === this.rootControl.getModuleName() && (this.rootControl.zoomChange = !1), Sn(this.calendarId + "_popup") && !uw.isDevice) { Sn(this.calendarId + "_popup").querySelectorAll(".e-range-header")[0].style.display = "none" } }, e.prototype.changedRange = function (e, t, i) { var n = new Date(t); switch (e) { case "Quarter": n.setMonth(n.getMonth() - 3 * i); break; case "Months": n.setMonth(n.getMonth() - i); break; case "Weeks": n.setDate(n.getDate() - 7 * i); break; case "Days": n.setDate(n.getDate() - i); break; case "Hours": n.setHours(n.getHours() - i); break; case "Minutes": n.setMinutes(n.getMinutes() - i); break; case "Seconds": n.setSeconds(n.getSeconds() - i); break; default: n.setFullYear(n.getFullYear() - i) }return n }, e.prototype.getModuleName = function () { return "PeriodSelector" }, e.prototype.destroy = function () { }, e }(), SH = function () { function e(e) { this.control = e, this.elementId = e.element.id } return e.prototype.renderLeftTooltip = function (e) { this.fadeOutTooltip(); var t = this.getTooltipContent(e.currentStart), i = this.getContentSize(t), n = this.control.enableRtl ? e.rightRect : e.leftRect; i > n.width && (n = e.midRect), this.leftTooltip = this.renderTooltip(n, this.createElement("_leftTooltip"), e.startX, t) }, e.prototype.getContentSize = function (e) { var t = this.control.tooltip.textStyle; return this.control.tooltip.template ? Tn(M("div", { id: "measureElement", styles: "position: absolute;" }), 0, this.control.tooltip.template, this.control).getBoundingClientRect().width : xi(e[0], t).width + 20 }, e.prototype.renderRightTooltip = function (e) { this.fadeOutTooltip(); var t = this.getTooltipContent(e.currentEnd), i = this.getContentSize(t), n = this.control.enableRtl ? e.leftRect : e.rightRect; i > n.width && ((n = e.midRect).x = this.control.series.length ? 0 : n.x), this.rightTooltip = this.renderTooltip(n, this.createElement("_rightTooltip"), e.endX, t) }, e.prototype.createElement = function (e) { if (Sn(this.elementId + e)) return Sn(this.elementId + e); var t = document.createElement("div"); if (t.id = this.elementId + e, t.className = "ejSVGTooltip", t.setAttribute("style", "pointer-events:none; position:absolute;z-index: 1"), this.control.stockChart) { var i = this.control.stockChart; Sn(i.element.id + "_Secondary_Element").appendChild(t), t.style.transform = "translateY(" + (i.availableSize.height - i.toolbarHeight - 80 + i.toolbarHeight + i.titleSize.height) + "px)" } else Sn(this.elementId + "_Secondary_Element").appendChild(t); return t }, e.prototype.renderTooltip = function (e, t, i, n) { var r = this.control, o = r.tooltip, s = { cancel: !1, name: "tooltipRender", text: n, textStyle: o.textStyle }; this.control.trigger("tooltipRender", s); var a = r.svgObject.getBoundingClientRect().left - r.element.getBoundingClientRect().left; return s.cancel ? null : new pj({ location: { x: i, y: r.rangeSlider.sliderY }, content: s.text, marginX: 2, enableShadow: !1, marginY: 2, arrowPadding: 8, rx: 0, ry: 0, inverted: r.series.length > 0, areaBounds: e, fill: o.fill, theme: this.control.theme, clipBounds: { x: a }, border: o.border, opacity: o.opacity, template: o.template, textStyle: s.textStyle, availableSize: r.availableSize, data: { start: this.getTooltipContent(this.control.startValue)[0], end: this.getTooltipContent(this.control.endValue)[0], value: n[0] } }, t) }, e.prototype.getTooltipContent = function (e) { var t, i = this.control, n = i.tooltip, r = i.chartSeries.xAxis, o = n.format || r.labelFormat, s = null !== o.match("{value}"), a = r.valueType; return "DateTime" === a ? t = i.intl.getDateFormat({ format: o || "MM/dd/yyyy", type: an(i.skeletonType), skeleton: i.dateTimeModule.getSkeleton(r, null, null) })(new Date(e)) : (r.format = i.intl.getNumberFormat({ format: s ? "" : o, useGrouping: i.useGroupingSeparator }), t = i.doubleModule.formatValue(r, s, o, "Logarithmic" === a ? Math.pow(r.logBase, e) : e)), [t] }, e.prototype.fadeOutTooltip = function () { var e = this; "OnDemand" === this.control.tooltip.displayMode && (Rn(this.toolTipInterval), this.rightTooltip && (this.toolTipInterval = setTimeout(function () { e.leftTooltip.fadeOut(), e.rightTooltip.fadeOut() }, 1e3))) }, e.prototype.getModuleName = function () { return "RangeTooltip" }, e.prototype.destroy = function (e) { }, e }(), xH = function () { function e(e) { this.stockChart = e } return e.prototype.initializeChart = function (e) { var t = this, i = this.stockChart; if (i.chartObject) { for (var n = document.getElementById(i.chartObject.id); n.firstChild;)n.removeChild(n.firstChild); Sn(i.chartObject + "_tooltip") && k(Sn(i.chartObject + "_tooltip")) } else i.chartObject = i.renderer.createGroup({ id: i.element.id + "_stockChart_chart" }), i.mainObject.appendChild(i.chartObject); if (this.cartesianChartSize = this.calculateChartSize(), i.chart = new IR({ load: function (e) { null === i.tooltip.header && (e.chart.tooltip.header = "<b>${point.x}</b>"), null === i.tooltip.format && (e.chart.tooltip.format = "High : <b>${point.high}</b><br/>Low : <b>${point.low}</b><br/>Open : <b>${point.open}</b><br/>Close : <b>${point.close}</b>", "" !== i.series[0].volume && (e.chart.tooltip.format += "<br/>Volume : <b>${point.volume}</b>")), e.chart.animateSeries = !1 }, chartArea: i.chartArea, margin: this.findMargin(i), primaryXAxis: this.copyObject(i.primaryXAxis), primaryYAxis: this.copyObject(i.primaryYAxis), rows: i.rows, indicators: i.indicators, axes: i.axes, tooltipRender: function (e) { t.stockChart.trigger("tooltipRender", e) }, axisLabelRender: function (e) { t.stockChart.trigger("axisLabelRender", e) }, seriesRender: function (i) { i.data && t.stockChart.startValue && t.stockChart.endValue && (i.data = i.data.filter(function (e) { return new Date(Date.parse(e[i.series.xName])).getTime() >= t.stockChart.startValue && new Date(Date.parse(e[i.series.xName])).getTime() <= t.stockChart.endValue })), i.data = e || i.data, t.stockChart.trigger("seriesRender", i) }, pointClick: function (e) { t.stockChart.trigger("pointClick", e) }, pointMove: function (e) { t.stockChart.trigger("pointMove", e) }, dataSource: i.dataSource, series: this.findSeriesCollection(i.series), zoomSettings: this.copyObject(i.zoomSettings), tooltip: i.tooltip, crosshair: i.crosshair, height: this.cartesianChartSize.height.toString(), selectedDataIndexes: i.selectedDataIndexes, selectionMode: i.selectionMode, isMultiSelect: i.isMultiSelect, annotations: i.annotations, theme: i.theme, legendSettings: { visible: !1 }, zoomComplete: function (e) { if ("DateTime" === e.axis.valueType && i.rangeNavigator) { t.stockChart.zoomChange = !0; var n = t.calculateUpdatedRange(e.currentZoomFactor, e.currentZoomPosition, e.axis); i.rangeSelector.sliderChange(n.start, n.end) } } }), 0 !== i.indicators.length) { if (i.isSelect) for (var r = 0; r < i.indicators.length; r++)i.chart.indicators[r].animation.enable = !1, i.chart.indicators[r].dataSource = h([], i.chart.series[0].dataSource, null, !0); i.isSelect = !0 } i.chart.stockChart = i, i.chart.appendTo(i.chartObject) }, e.prototype.findMargin = function (e) { var t = {}; return t.top = 2 * e.margin.top, t.left = e.margin.left, t.right = e.margin.right, t.bottom = e.margin.bottom, t }, e.prototype.findSeriesCollection = function (e) { for (var t = [], i = 0, n = e.length; i < n; i++)t.push(e[i]), t[i].high = e[i].high, t[i].low = e[i].low, t[i].open = e[i].open, t[i].close = e[i].close, t[i].xName = e[i].xName, t[i].volume = e[i].volume, t[i].animation = e[i].animation, e[i].localData && (t[i].dataSource = e[i].localData), "HiloOpenClose" !== t[i].type && "Candle" !== t[i].type && "volume" === t[i].yName && (t[i].enableTooltip = !1); return t }, e.prototype.calculateChartSize = function () { var e = this.stockChart; return new $E(e.availableSize.width, e.enablePeriodSelector && e.enableSelector ? e.availableSize.height - e.toolbarHeight - 80 : e.enableSelector && !e.enablePeriodSelector ? e.availableSize.height - 80 : e.enablePeriodSelector && !e.enableSelector ? e.availableSize.height - e.toolbarHeight : e.availableSize.height) }, e.prototype.calculateUpdatedRange = function (e, t, i) { var n, r, o = i.actualRange; r = (n = o.min + t * o.delta) + e * o.delta; return { start: n, end: r } }, e.prototype.cartesianChartRefresh = function (e, t, i, n) { e.cartesianChart.initializeChart(n) }, e.prototype.copyObject = function (e) { return h({}, e, {}, !0) }, e }(), TH = function () { function e(e) { this.stockChart = e } return e.prototype.initializeRangeNavigator = function () { var e = this, t = this.stockChart; if (t.selectorObject) { for (var i = document.getElementById(t.selectorObject.id); i.firstChild;)i.removeChild(i.firstChild); Sn(t.selectorObject.id + "_leftTooltip") && k(Sn(t.selectorObject.id + "_leftTooltip")), Sn(t.selectorObject.id + "_rightTooltip") && k(Sn(t.selectorObject.id + "_rightTooltip")) } else t.selectorObject = t.renderer.createGroup({ id: t.element.id + "_stockChart_rangeSelector", transform: "translate(0," + t.cartesianChart.cartesianChartSize.height + ")" }), t.mainObject.appendChild(t.selectorObject); t.rangeNavigator = new kF({ locale: "en", valueType: t.primaryXAxis.valueType, theme: this.stockChart.theme, series: this.findSeriesCollection(t.series), height: this.calculateChartSize().height.toString(), value: [new Date(t.startValue), new Date(t.endValue)], margin: this.findMargin(t), tooltip: { enable: t.tooltip.enable, displayMode: "Always" }, dataSource: t.dataSource, changed: function (i) { var n = { name: "rangeChange", end: i.end, selectedData: i.selectedData, start: i.start, zoomFactor: i.zoomFactor, zoomPosition: i.zoomPosition, data: void 0 }; e.stockChart.trigger("rangeChange", n), e.stockChart.startValue = i.start, e.stockChart.endValue = i.end, e.stockChart.zoomChange || e.stockChart.cartesianChart.cartesianChartRefresh(e.stockChart, i.start, i.end, n.data), t.periodSelector && t.periodSelector.datePicker && (t.periodSelector.datePicker.startDate = new Date(i.start), t.periodSelector.datePicker.endDate = new Date(i.end), t.periodSelector.datePicker.dataBind()) } }), t.rangeNavigator.stockChart = t, t.rangeNavigator.appendTo(t.selectorObject) }, e.prototype.findMargin = function (e) { var t = {}; return t.top = 5, t.left = 0, t.right = 0, t.bottom = 0, t }, e.prototype.findSeriesCollection = function (e) { for (var t = [], i = 0, n = e.length; i < n; i++)t.push(e[i]), t[i].xName = e[i].xName, t[i].yName = "" === e[i].yName ? e[i].close : e[i].yName; return t }, e.prototype.calculateChartSize = function () { var e = this.stockChart; return new $E(e.availableSize.width, e.enableSelector ? 80 : 0) }, e.prototype.sliderChange = function (e, t) { this.stockChart.rangeNavigator.rangeSlider.performAnimation(e, t, this.stockChart.rangeNavigator, 0) }, e }(), DH = function () { function e(e) { this.selectedSeries = "", this.selectedIndicator = "", this.selectedTrendLine = "", this.indicators = [], this.secondayIndicators = [], this.stockChart = e, this.selectedSeries = this.stockChart.series[0].type } return e.prototype.initializePeriodSelector = function () { var e = this.stockChart.tempPeriods; this.stockChart.periods = e, this.stockChart.periodSelector.rootControl = this.stockChart; var t = this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect, i = Sn(this.stockChart.element.id + "_Secondary_Element"), n = this.stockChart.toolbarHeight; this.stockChart.periodSelector.appendSelector({ thumbSize: 0, element: i, width: t.width, height: n }, t.x), this.initializeSeriesSelector(), this.initializeIndicatorSelector(), this.initializeTrendlineSelector(), this.exportButton(), this.printButton(), this.resetButton() }, e.prototype.getDropDownItems = function (e) { var t = []; if (e === this.stockChart.seriesType) { for (var i = 0; i < e.length; i++)t.push({ text: "&nbsp;&nbsp;&nbsp;" + e[i].toString() }); for (i = 0; i < this.stockChart.series.length; i++)for (var n = 0; n < t.length; n++) { var r = t[n].text.replace("&nbsp;&nbsp;&nbsp;", ""); (r = "OHLC" === r ? "HiloOpenClose" : r) === this.stockChart.series[i].type && (t[n].text = t[n].text.replace("&nbsp;&nbsp;&nbsp;", "&#10004&nbsp;")) } } else if (e === this.stockChart.exportType) for (i = 0; i < e.length; i++)t.push({ text: e[i].toString() }); else for (i = 0; i < e.length; i++)"Print" !== e[i].toString() && t.push({ text: "&nbsp;&nbsp;&nbsp;" + e[i].toString() }); return t }, e.prototype.addedSeries = function (e) { for (var t = this.stockChart.series, i = 0; i < t.length; i++)"volume" !== t[i].yName && (t[i].type = e.indexOf("Candle") > -1 ? "Candle" : e.indexOf("OHLC") > -1 ? "HiloOpenClose" : e, t[i].enableSolidCandles = "Candle" === e, t[i].trendlines.forEach(function (e) { e.animation.enable = !1, e.enableTooltip = !1 })) }, e.prototype.initializeSeriesSelector = function () { var e = this; new KT({ items: this.getDropDownItems(this.stockChart.seriesType), select: function (t) { e.selectedSeries = t.item.text; var i = e.tickMark(t); e.addedSeries(i), e.stockChart.cartesianChart.initializeChart() } }).appendTo("#" + this.stockChart.element.id + "_seriesType") }, e.prototype.resetButton = function () { var e = this; (new yL).appendTo("#" + this.stockChart.element.id + "_reset"), document.getElementById(this.stockChart.element.id + "_reset").onclick = function () { for (var t = e.indicators.length; t;)e.stockChart.indicators.pop(), t--; e.indicators = [], e.secondayIndicators = [], e.stockChart.isSingleAxis ? e.stockChart.rows = [{}] : (e.stockChart.rows.length > 2 && e.stockChart.rows.splice(2, e.stockChart.rows.length - 1), e.stockChart.axes.length > 2 && (e.stockChart.axes.splice(1, e.stockChart.axes.length - 1), e.stockChart.axes[0].rowIndex = 1)); for (var i = 0; i < e.stockChart.series.length; i++)"volume" !== e.stockChart.series[i].yName && (e.stockChart.series[i].type = e.stockChart.tempSeriesType[i], 0 !== e.stockChart.series[i].trendlines.length && (e.stockChart.series[i].trendlines[0].width = 0)); e.stockChart.indicatorElements = null, e.stockChart.resizeTo = null, e.stockChart.zoomChange = !1, e.stockChart.refresh() } }, e.prototype.initializeTrendlineSelector = function () { var e = this; this.trendlineDropDown = new KT({ items: this.stockChart.resizeTo ? this.trendlineDropDown.items : this.getDropDownItems(this.stockChart.trendlineType), select: function (t) { var i = e.tickMark(t), n = i = (i = i.split(" ")[0].toLocaleLowerCase() + (i.split(" ")[1] ? i.split(" ")[1] : "")).substr(0, 1).toUpperCase() + i.substr(1); if (e.selectedTrendLine = "" === e.selectedTrendLine ? n : e.selectedTrendLine + "," + n, e.trendline !== n) { e.trendline = n; for (var r = 0; r < e.stockChart.series.length; r++)if ("volume" !== e.stockChart.series[r].yName) if (0 === e.stockChart.series[0].trendlines.length) { var o = void 0; e.stockChart.trendlinetriggered && (o = [{ type: n, width: 1, enableTooltip: !1 }], e.stockChart.trendlinetriggered = !1), e.stockChart.series[0].trendlines = o } else e.stockChart.series[0].trendlines[0].width = 1, e.stockChart.series[0].trendlines[0].type = n, e.stockChart.series[0].trendlines[0].animation.enable = !!e.stockChart.trendlinetriggered; e.stockChart.cartesianChart.initializeChart() } else t.item.text = "&nbsp;&nbsp;&nbsp;" + t.item.text.replace("&#10004&nbsp;", ""), e.stockChart.series[0].trendlines[0].width = 0, e.trendline = null, e.stockChart.cartesianChart.initializeChart() } }), this.trendlineDropDown.appendTo("#" + this.stockChart.element.id + "_trendType") }, e.prototype.initializeIndicatorSelector = function () { var e = this; this.indicatorDropDown = new KT({ items: this.stockChart.resizeTo ? this.indicatorDropDown.items : this.getDropDownItems(this.stockChart.indicatorType), select: function (t) { for (var i = 0; i < e.stockChart.series.length; i++)0 !== e.stockChart.series[i].trendlines.length && (e.stockChart.series[i].trendlines[0].animation.enable = !1); t.item.text = t.item.text.indexOf("&#10004&nbsp;") >= 0 ? t.item.text.substr(t.item.text.indexOf(";") + 1) : t.item.text; var n = t.item.text.replace("&nbsp;&nbsp;&nbsp;", ""), r = n = (n = n.split(" ")[0].toLocaleLowerCase() + (n.split(" ")[1] ? n.split(" ")[1] : "")).substr(0, 1).toUpperCase() + n.substr(1); if (e.selectedIndicator = -1 === e.selectedIndicator.indexOf(r) ? e.selectedIndicator + " " + r : e.selectedIndicator.replace(r, ""), "Tma" === r || "BollingerBands" === r || "Sma" === r || "Ema" === r) if (-1 === e.indicators.indexOf(r)) { t.item.text = "&#10004&nbsp;" + t.item.text.replace("&nbsp;&nbsp;&nbsp;", ""); var o = e.getIndicator(r, e.stockChart.series[0].yAxisName); e.indicators.push(r), e.stockChart.indicators = e.stockChart.indicators.concat(o), e.stockChart.cartesianChart.initializeChart() } else { t.item.text = "&nbsp;&nbsp;&nbsp;" + t.item.text; for (var s = 0; s < e.stockChart.indicators.length; s++)e.stockChart.indicators[s].type === r && e.stockChart.indicators.splice(s, 1); e.indicators.splice(e.indicators.indexOf(r), 1), e.stockChart.cartesianChart.initializeChart() } else e.createIndicatorAxes(r, t) } }), this.indicatorDropDown.appendTo("#" + this.stockChart.element.id + "_indicatorType") }, e.prototype.getIndicator = function (e, t) { var i = this.stockChart.series[0]; return [{ type: e, period: 3, yAxisName: t, dataSource: i.localData, xName: i.xName, open: i.open, close: i.close, high: i.high, low: i.low, volume: i.volume, fill: "Sma" === e ? "#32CD32" : "#6063ff", animation: { enable: !1 }, upperLine: { color: "#FFE200", width: 1 }, periodLine: { width: 2 }, lowerLine: { color: "#FAA512", width: 1 }, fastPeriod: 8, slowPeriod: 5, macdType: "Both", width: 1, macdPositiveColor: "#6EC992", macdNegativeColor: "#FF817F", bandColor: "rgba(245, 203, 35, 0.12)" }] }, e.prototype.createIndicatorAxes = function (e, t) { if (-1 === this.indicators.indexOf(e)) { t.item.text = "&#10004&nbsp;" + t.item.text.replace("&nbsp;&nbsp;&nbsp;", ""), this.indicators.push(e); var i = void 0, n = void 0, r = void 0, o = this.stockChart.rows.length; if (this.stockChart.rows[this.stockChart.rows.length - 1].height = "15%", n = [{ height: 100 - 15 * o + "px" }], 1 === this.stockChart.rows.length && (this.stockChart.isSingleAxis = !0), this.stockChart.rows = this.stockChart.rows.concat(n), this.stockChart.isSingleAxis) for (var s = 0; s < this.stockChart.axes.length; s++)this.stockChart.axes[s].rowIndex += 1; else this.stockChart.axes[0].rowIndex += 1; i = [{ plotOffset: 10, opposedPosition: !0, rowIndex: this.stockChart.isSingleAxis ? 0 : this.stockChart.axes.length, desiredIntervals: 1, labelFormat: "n2", majorGridLines: this.stockChart.primaryYAxis.majorGridLines, lineStyle: this.stockChart.primaryYAxis.lineStyle, labelPosition: this.stockChart.primaryYAxis.labelPosition, majorTickLines: this.stockChart.primaryYAxis.majorTickLines, rangePadding: "None", name: e.toString() }], this.stockChart.axes = this.stockChart.axes.concat(i), this.stockChart.primaryYAxis.rowIndex = this.stockChart.isSingleAxis ? o + 1 : 0, r = this.getIndicator(e, e.toString()), this.stockChart.indicators = this.stockChart.indicators.concat(r), this.stockChart.cartesianChart.initializeChart() } else { t.item.text = "&nbsp;&nbsp;&nbsp;" + t.item.text; for (s = 0; s < this.stockChart.indicators.length; s++)this.stockChart.indicators[s].type === e && this.stockChart.indicators.splice(s, 1); this.indicators.splice(this.indicators.indexOf(e), 1); for (var a = 0, l = 0; l < this.stockChart.axes.length; l++)this.stockChart.axes[l].name === e && (a = this.stockChart.axes[l].rowIndex, this.stockChart.rows.splice(l, 1), this.stockChart.axes.splice(l, 1)); for (l = 0; l < this.stockChart.axes.length; l++)0 !== this.stockChart.axes[l].rowIndex && this.stockChart.axes[l].rowIndex > a && (this.stockChart.axes[l].rowIndex = this.stockChart.axes[l].rowIndex - 1); this.stockChart.cartesianChart.initializeChart() } }, e.prototype.tickMark = function (e) { for (var t, i = e.item.parentObj.items, n = 0; n < i.length; n++)i[n].text = i[n].text.indexOf("&#10004&nbsp;") >= 0 ? i[n].text.substr(i[n].text.indexOf(";") + 1) : i[n].text, i[n].text.indexOf("&nbsp;&nbsp;&nbsp;") >= 0 || (i[n].text = "&nbsp;&nbsp;&nbsp;" + i[n].text); return e.item.text.indexOf("&nbsp;&nbsp;&nbsp;") >= 0 ? (t = e.item.text.replace("&nbsp;&nbsp;&nbsp;", ""), e.item.text = e.item.text.replace("&nbsp;&nbsp;&nbsp;", "&#10004&nbsp;")) : t = e.item.text.replace("&#10004&nbsp;", ""), t }, e.prototype.printButton = function () { var e = this; if (this.stockChart.exportType.indexOf("Print") > -1) { (new yL).appendTo("#" + this.stockChart.element.id + "_print"), document.getElementById(this.stockChart.element.id + "_print").onclick = function () { e.stockChart.chart.print(e.stockChart.element.id) } } }, e.prototype.exportButton = function () { var e = this; new KT({ items: this.getDropDownItems(this.stockChart.exportType), select: function (t) { var i, n = t.item.text, r = e.stockChart, o = r.element.id + "_stockChart_", s = r.svgObject.getBoundingClientRect(); r.chart.exportModule && (e.stockChart.svgObject.insertAdjacentElement("afterbegin", e.addExportSettings()), i = r.svgObject.firstElementChild.getBoundingClientRect(), e.stockChart.svgObject.setAttribute("height", (s.height + i.height).toString()), Sn(o + "chart").style.transform = "translateY(" + i.height + "px)", r.enableSelector && Sn(o + "rangeSelector").setAttribute("transform", "translate(0," + (r.cartesianChart.cartesianChartSize.height + i.height) + ")"), r.chart.exportModule.export(n, "StockChart", null, [r], null, r.svgObject.clientHeight), k(Sn(e.stockChart.element.id + "_additionalExport")), Sn(o + "chart").style.transform = "translateY(0px)", r.enableSelector && Sn(o + "rangeSelector").setAttribute("transform", "translate(0," + r.cartesianChart.cartesianChartSize.height + ")"), e.stockChart.svgObject.setAttribute("height", s.height.toString())) } }).appendTo("#" + this.stockChart.element.id + "_export") }, e.prototype.calculateAutoPeriods = function () { var e = []; return (e = this.findRange(this.stockChart.seriesXMin, this.stockChart.seriesXMax)).push({ text: "YTD", selected: !0 }, { text: "All" }), e }, e.prototype.findRange = function (e, t) { var i = []; return (t - e) / 3154e7 >= 1 ? i.push({ text: "1M", interval: 1, intervalType: "Months" }, { text: "3M", interval: 3, intervalType: "Months" }, { text: "6M", interval: 6, intervalType: "Months" }, { text: "1Y", interval: 1, intervalType: "Years" }) : (t - e) / 1577e7 >= 1 ? i.push({ text: "1M", interval: 1, intervalType: "Months" }, { text: "3M", interval: 3, intervalType: "Months" }, { text: "6M", interval: 6, intervalType: "Months" }) : (t - e) / 2628e6 >= 1 ? i.push({ text: "1D", interval: 1, intervalType: "Days" }, { text: "3W", interval: 3, intervalType: "Weeks" }, { text: "1M", interval: 1, intervalType: "Months" }) : (t - e) / 864e5 >= 1 && i.push({ text: "1H", interval: 1, intervalType: "Hours" }, { text: "12H", interval: 12, intervalType: "Hours" }, { text: "1D", interval: 1, intervalType: "Days" }), i }, e.prototype.addExportSettings = function () { var e = this.stockChart.renderer.createGroup({ id: this.stockChart.element.id + "_additionalExport", width: this.stockChart.availableSize.width }), t = xi(this.stockChart.title, this.stockChart.titleStyle).height, i = new nj(e.id + "_Title", nr(new ej(0, 0, this.stockChart.availableSize.width, 0), this.stockChart.titleStyle), 0, "middle", this.stockChart.title, "", "text-before-edge"); $n(this.stockChart.renderer, i, this.stockChart.titleStyle, this.stockChart.titleStyle.color, e); var n = { size: "15px", fontWeight: "500", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, r = xi("Series: " + this.selectedSeries, n).width / 2, o = t; return this.textElementSpan(new nj(e.id + "_Series", r, o, "start", ["Series : ", this.selectedSeries], "", "text-before-edge"), n, "black", e), r += xi("Series: " + this.selectedSeries + " Z", n).width, "" !== this.selectedIndicator && (this.textElementSpan(new nj(e.id + "_Indicator", r, o, "start", ["Indicator :", this.selectedIndicator], "", "text-before-edge"), n, "black", e), r += xi("Indicator: " + this.selectedIndicator + " Z", n).width), "" !== this.selectedTrendLine && this.textElementSpan(new nj(e.id + "_TrendLine", r, o, "start", ["Trendline :", this.selectedTrendLine], "", "text-before-edge"), n, "black", e), e }, e.prototype.textElementSpan = function (e, t, i, n, r, o, s, a, l) { void 0 === r && (r = !1), void 0 === a && (a = !1); var h, d, c, p = new JE(""), u = {}; if (u = { id: e.id, "font-style": t.fontStyle, "font-family": t.fontFamily, "font-weight": t.fontWeight, "text-anchor": e.anchor, x: e.x, y: e.y, fill: i, "font-size": t.size, transform: e.transform, opacity: t.opacity, "dominant-baseline": e.baseLine }, d = "string" == typeof e.text ? e.text : r ? e.text[e.text.length - 1] : e.text[0], h = p.createText(u, d), "string" != typeof e.text && e.text.length > 1) for (var g = 1, m = e.text.length; g < m; g++)e.text[g] = " " + e.text[g], c = p.createTSpan({ x: e.x + xi(d, t).width + 5, id: e.id, y: e.y, opacity: .5 }, e.text[g]), h.appendChild(c); return kn(!1, n, h, o, s, "x", "y", null, null, a, !1, null, l), h }, e }(), AH = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), EH = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, jH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("")], t.prototype, "color", void 0), EH([Y("16px")], t.prototype, "size", void 0), EH([Y("Segoe UI")], t.prototype, "fontFamily", void 0), EH([Y("Normal")], t.prototype, "fontStyle", void 0), EH([Y("Normal")], t.prototype, "fontWeight", void 0), EH([Y(1)], t.prototype, "opacity", void 0), EH([Y("Trim")], t.prototype, "textOverflow", void 0), EH([Y("Center")], t.prototype, "textAlignment", void 0), t }(ww), IH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("")], t.prototype, "color", void 0), EH([Y(1)], t.prototype, "width", void 0), t }(ww), kH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([U({}, IH)], t.prototype, "border", void 0), EH([Y("transparent")], t.prototype, "background", void 0), EH([Y(1)], t.prototype, "opacity", void 0), t }(ww), PH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y(10)], t.prototype, "left", void 0), EH([Y(10)], t.prototype, "right", void 0), EH([Y(10)], t.prototype, "top", void 0), EH([Y(10)], t.prototype, "bottom", void 0), t }(ww), NH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y(!1)], t.prototype, "startFromAxis", void 0), EH([Y(!0)], t.prototype, "visible", void 0), EH([Y(null)], t.prototype, "start", void 0), EH([Y("#808080")], t.prototype, "color", void 0), EH([Y(null)], t.prototype, "end", void 0), EH([Y(null)], t.prototype, "size", void 0), EH([Y("Auto")], t.prototype, "sizeType", void 0), EH([Y(null)], t.prototype, "dashArray", void 0), EH([Y(!1)], t.prototype, "isRepeat", void 0), EH([Y(null)], t.prototype, "repeatEvery", void 0), EH([Y(!1)], t.prototype, "isSegmented", void 0), EH([Y(null)], t.prototype, "repeatUntil", void 0), EH([Y(null)], t.prototype, "segmentStart", void 0), EH([Y(null)], t.prototype, "segmentAxisName", void 0), EH([Y(null)], t.prototype, "segmentEnd", void 0), EH([Y(1)], t.prototype, "opacity", void 0), EH([Y("")], t.prototype, "text", void 0), EH([U({ color: "transparent", width: 1 }, IH)], t.prototype, "border", void 0), EH([Y(null)], t.prototype, "rotation", void 0), EH([Y("Behind")], t.prototype, "zIndex", void 0), EH([Y("Middle")], t.prototype, "horizontalAlignment", void 0), EH([Y("Middle")], t.prototype, "verticalAlignment", void 0), EH([U(IE.stripLineLabelFont, jH)], t.prototype, "textStyle", void 0), t }(ww), OH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y(0)], t.prototype, "delay", void 0), EH([Y(!1)], t.prototype, "enable", void 0), EH([Y(1e3)], t.prototype, "duration", void 0), t }(ww), RH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y(null)], t.prototype, "fill", void 0), EH([Y("Gap")], t.prototype, "mode", void 0), EH([U({ color: "transparent", width: 0 }, IH)], t.prototype, "border", void 0), t }(ww), zH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("Line")], t.prototype, "type", void 0), EH([Y(null)], t.prototype, "length", void 0), EH([Y(null)], t.prototype, "color", void 0), EH([Y("")], t.prototype, "dashArray", void 0), EH([Y(1)], t.prototype, "width", void 0), t }(ww), BH = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.localData = void 0, t } return AH(t, e), EH([Y("date")], t.prototype, "xName", void 0), EH([Y("close")], t.prototype, "yName", void 0), EH([Y("open")], t.prototype, "open", void 0), EH([Y("close")], t.prototype, "close", void 0), EH([Y("high")], t.prototype, "high", void 0), EH([Y("low")], t.prototype, "low", void 0), EH([Y("volume")], t.prototype, "volume", void 0), EH([Y("")], t.prototype, "pointColorMapping", void 0), EH([U(null, OH)], t.prototype, "animation", void 0), EH([Y(null)], t.prototype, "xAxisName", void 0), EH([Y(null)], t.prototype, "yAxisName", void 0), EH([Y(null)], t.prototype, "fill", void 0), EH([Y("0")], t.prototype, "dashArray", void 0), EH([Y(1)], t.prototype, "width", void 0), EH([Y("")], t.prototype, "name", void 0), EH([Y("")], t.prototype, "dataSource", void 0), EH([Y()], t.prototype, "query", void 0), EH([Y("#e74c3d")], t.prototype, "bullFillColor", void 0), EH([Y("#2ecd71")], t.prototype, "bearFillColor", void 0), EH([Y(!1)], t.prototype, "enableSolidCandles", void 0), EH([Y(!0)], t.prototype, "visible", void 0), EH([U({ color: "transparent", width: 0 }, IH)], t.prototype, "border", void 0), EH([Y(1)], t.prototype, "opacity", void 0), EH([Y("Candle")], t.prototype, "type", void 0), EH([U(null, CI)], t.prototype, "marker", void 0), EH([G([], MI)], t.prototype, "trendlines", void 0), EH([Y(!0)], t.prototype, "enableTooltip", void 0), EH([Y("")], t.prototype, "tooltipMappingName", void 0), EH([Y(null)], t.prototype, "selectionStyle", void 0), EH([Y(.5)], t.prototype, "cardinalSplineTension", void 0), EH([U(null, _E)], t.prototype, "cornerRadius", void 0), EH([U(null, RH)], t.prototype, "emptyPointSettings", void 0), EH([Y(null)], t.prototype, "columnWidth", void 0), EH([Y(0)], t.prototype, "columnSpacing", void 0), t }(ww), FH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("Sma")], t.prototype, "type", void 0), EH([Y(14)], t.prototype, "period", void 0), EH([Y(3)], t.prototype, "dPeriod", void 0), EH([Y(14)], t.prototype, "kPeriod", void 0), EH([Y(80)], t.prototype, "overBought", void 0), EH([Y(20)], t.prototype, "overSold", void 0), EH([Y("Close")], t.prototype, "field", void 0), EH([Y(2)], t.prototype, "standardDeviation", void 0), EH([Y(12)], t.prototype, "slowPeriod", void 0), EH([Y(!0)], t.prototype, "showZones", void 0), EH([Y(26)], t.prototype, "fastPeriod", void 0), EH([U({ color: "#ff9933", width: 2 }, zH)], t.prototype, "macdLine", void 0), EH([Y("Both")], t.prototype, "macdType", void 0), EH([Y("#e74c3d")], t.prototype, "macdNegativeColor", void 0), EH([Y("#2ecd71")], t.prototype, "macdPositiveColor", void 0), EH([Y("rgba(211,211,211,0.25)")], t.prototype, "bandColor", void 0), EH([U({ color: "#ffb735", width: 1 }, zH)], t.prototype, "upperLine", void 0), EH([Y("")], t.prototype, "seriesName", void 0), EH([U({ color: "#f2ec2f", width: 1 }, zH)], t.prototype, "periodLine", void 0), EH([U({ color: "#f2ec2f", width: 1 }, zH)], t.prototype, "lowerLine", void 0), EH([Y("")], t.prototype, "high", void 0), EH([Y("")], t.prototype, "open", void 0), EH([Y("")], t.prototype, "low", void 0), EH([Y("")], t.prototype, "xName", void 0), EH([Y("")], t.prototype, "close", void 0), EH([Y("")], t.prototype, "pointColorMapping", void 0), EH([Y("")], t.prototype, "volume", void 0), EH([Y(null)], t.prototype, "xAxisName", void 0), EH([Y(null)], t.prototype, "yAxisName", void 0), EH([U(null, OH)], t.prototype, "animation", void 0), EH([Y(null)], t.prototype, "fill", void 0), EH([Y("0")], t.prototype, "dashArray", void 0), EH([Y(1)], t.prototype, "width", void 0), EH([Y()], t.prototype, "query", void 0), EH([Y("")], t.prototype, "dataSource", void 0), t }(ww), VH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([U({}, $j)], t.prototype, "crosshairTooltip", void 0), EH([U(IE.axisLabelFont, jH)], t.prototype, "labelStyle", void 0), EH([Y("")], t.prototype, "title", void 0), EH([U(IE.axisTitleFont, jH)], t.prototype, "titleStyle", void 0), EH([Y("")], t.prototype, "labelFormat", void 0), EH([Y("DateTime")], t.prototype, "skeletonType", void 0), EH([Y("")], t.prototype, "skeleton", void 0), EH([Y(0)], t.prototype, "plotOffset", void 0), EH([Y(10)], t.prototype, "logBase", void 0), EH([Y(0)], t.prototype, "rowIndex", void 0), EH([Y(1)], t.prototype, "span", void 0), EH([Y(3)], t.prototype, "maximumLabels", void 0), EH([Y(null)], t.prototype, "desiredIntervals", void 0), EH([Y(1)], t.prototype, "zoomFactor", void 0), EH([Y(0)], t.prototype, "zoomPosition", void 0), EH([Y(!1)], t.prototype, "opposedPosition", void 0), EH([Y(!0)], t.prototype, "enableAutoIntervalOnZooming", void 0), EH([Y("Double")], t.prototype, "valueType", void 0), EH([Y("Auto")], t.prototype, "rangePadding", void 0), EH([Y("None")], t.prototype, "edgeLabelPlacement", void 0), EH([Y("BetweenTicks")], t.prototype, "labelPlacement", void 0), EH([Y("Auto")], t.prototype, "intervalType", void 0), EH([Y("Outside")], t.prototype, "tickPosition", void 0), EH([Y("")], t.prototype, "name", void 0), EH([Y("Outside")], t.prototype, "labelPosition", void 0), EH([Y(!0)], t.prototype, "visible", void 0), EH([Y(0)], t.prototype, "labelRotation", void 0), EH([Y(0)], t.prototype, "minorTicksPerInterval", void 0), EH([Y(null)], t.prototype, "crossesAt", void 0), EH([Y(null)], t.prototype, "crossesInAxis", void 0), EH([Y(!0)], t.prototype, "placeNextToAxisLine", void 0), EH([Y(null)], t.prototype, "minimum", void 0), EH([Y(null)], t.prototype, "interval", void 0), EH([Y(null)], t.prototype, "maximum", void 0), EH([Y(34)], t.prototype, "maximumLabelWidth", void 0), EH([U({}, Zj)], t.prototype, "majorTickLines", void 0), EH([Y(!1)], t.prototype, "enableTrim", void 0), EH([U({}, Kj)], t.prototype, "minorTickLines", void 0), EH([U({}, Xj)], t.prototype, "minorGridLines", void 0), EH([U({}, Qj)], t.prototype, "majorGridLines", void 0), EH([U({}, Jj)], t.prototype, "lineStyle", void 0), EH([Y(!1)], t.prototype, "isInversed", void 0), EH([Y("Trim")], t.prototype, "labelIntersectAction", void 0), EH([Y(100)], t.prototype, "coefficient", void 0), EH([Y(0)], t.prototype, "startAngle", void 0), EH([Y(2)], t.prototype, "tabIndex", void 0), EH([G([], NH)], t.prototype, "stripLines", void 0), EH([Y(null)], t.prototype, "description", void 0), t }(ww), WH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("100%")], t.prototype, "height", void 0), EH([U({}, IH)], t.prototype, "border", void 0), t }(ww), HH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y(2)], t.prototype, "period", void 0), EH([Y("")], t.prototype, "name", void 0), EH([Y("Linear")], t.prototype, "type", void 0), EH([Y(2)], t.prototype, "polynomialOrder", void 0), EH([Y(0)], t.prototype, "forwardForecast", void 0), EH([Y(0)], t.prototype, "backwardForecast", void 0), EH([U({}, OH)], t.prototype, "animation", void 0), EH([Y(!0)], t.prototype, "enableTooltip", void 0), EH([U({}, CI)], t.prototype, "marker", void 0), EH([Y(null)], t.prototype, "intercept", void 0), EH([Y("")], t.prototype, "fill", void 0), EH([Y("SeriesType")], t.prototype, "legendShape", void 0), EH([Y(1)], t.prototype, "width", void 0), t }(ww), _H = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("0")], t.prototype, "y", void 0), EH([Y("0")], t.prototype, "x", void 0), EH([Y(null)], t.prototype, "content", void 0), EH([Y("Chart")], t.prototype, "region", void 0), EH([Y("Center")], t.prototype, "horizontalAlignment", void 0), EH([Y("Pixel")], t.prototype, "coordinateUnits", void 0), EH([Y("Middle")], t.prototype, "verticalAlignment", void 0), EH([Y(null)], t.prototype, "yAxisName", void 0), EH([Y(null)], t.prototype, "description", void 0), EH([Y(null)], t.prototype, "xAxisName", void 0), t }(ww), YH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y(0)], t.prototype, "point", void 0), EH([Y(0)], t.prototype, "series", void 0), t }(ww), UH = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return AH(t, e), EH([Y("Circle")], t.prototype, "type", void 0), EH([Y("")], t.prototype, "text", void 0), EH([Y("")], t.prototype, "description", void 0), EH([Y()], t.prototype, "date", void 0), EH([U({ color: "black", width: 1 }, IH)], t.prototype, "border", void 0), EH([Y("transparent")], t.prototype, "background", void 0), EH([Y(!0)], t.prototype, "showOnSeries", void 0), EH([Y("close")], t.prototype, "placeAt", void 0), EH([U(IE.stockEventFont, jH)], t.prototype, "textStyle", void 0), t }(ww), qH = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), GH = function (e) { function t(t) { var i = e.call(this, t.chart) || this; return i.symbolLocations = [], i.stockChart = t, i.chartId = i.stockChart.element.id, i } return qH(t, e), t.prototype.renderStockEvents = function () { var e, t, i, n, r = this.stockChart, o = r.renderer.createGroup({ id: this.chartId + "_StockEvents" }); this.symbolLocations = function (e, t, i) { for (var n = [], r = 0; r < e; ++r) { for (var o = [], s = 0; s < t; ++s)o[s] = i; n[r] = o } return n }(r.series.length, r.stockEvents.length, new dI(0, 0)); for (var s = 0; s < r.stockEvents.length; s++) { e = this.stockChart.stockEvents[s]; for (var a = 0, l = r.chart.series; a < l.length; a++) { var h = l[a], d = { name: Pj, stockChart: r, text: e.text, type: e.type, cancel: !1, series: h }; r.trigger(Pj, d), e.text = d.text, e.type = d.type, n = xi(e.text + "W", e.textStyle), d.cancel || (t = r.renderer.createGroup({ id: this.chartId + "_Series_" + h.index + "_StockEvents_" + s }), Fi(this.dateParse(e.date).getTime(), h.xAxis.visibleRange) && (i = this.findClosePoint(h, e), e.showOnSeries || (i.y = h.yAxis.rect.y + h.yAxis.rect.height), this.symbolLocations[h.index][s] = i, this.createStockElements(t, e, h, s, i, n), o.appendChild(t))) } } return o }, t.prototype.findClosePoint = function (e, t) { for (var i, n, r, o, s = this.getClosest(e, this.dateParse(t.date).getTime()), a = 0; a < e.points.length; a++)s === (n = e.points[a]).xValue && n.visible ? i = new uI(n, e) : 0 !== a && a !== e.points.length && s > e.points[a - 1].xValue && s < e.points[a + 1].xValue && (i = new uI(n, e)); return r = e.xAxis.rect.x + Xi(i.point.xValue, e.xAxis) * e.xAxis.rect.width, o = Xi(i.point[t.placeAt], e.yAxis) * e.yAxis.rect.height, o = -1 * o + (e.yAxis.rect.y + e.yAxis.rect.height), new dI(r, o) }, t.prototype.createStockElements = function (e, t, i, n, r, o) { var s, a, l = new $E(o.width > 20 ? o.width : 20, o.height > 20 ? o.height : 20), h = r.x, d = r.y, c = this.chartId + "_Series_" + i.index + "_StockEvents_" + n, p = t.border; switch (t.type) { case "Flag": case "Circle": case "Square": e.appendChild(bn(new dI(h, d), "Circle", new $E(2, 2), "", new rj(c + "_Circle", "transparent", p.width, p.color), this.dateParse(t.date).toISOString())), e.appendChild(bn(new dI(h, d - 5), "VerticalLine", new $E(9, 9), "", new rj(c + "_Path", p.color, p.width, p.color), this.dateParse(t.date).toISOString())), e.appendChild(bn(new dI("Flag" !== t.type ? h : h + l.width / 2, d - l.height), t.type, l, "", new rj(c + "_Shape", t.background, p.width, p.color), this.dateParse(t.date).toISOString())), $n(this.stockChart.renderer, new nj(c + "_Text", "Flag" !== t.type ? r.x : r.x + l.width / 2, r.y - l.height, "middle", t.text, "", "middle"), t.textStyle, t.textStyle.color, e); break; case "ArrowUp": case "ArrowDown": case "ArrowRight": case "ArrowLeft": s = "M " + h + " " + d + " " + this.findArrowpaths(t.type), a = new rj(c + "_Shape", t.background, p.width, p.color, 1, "", s), e.appendChild(this.stockChart.renderer.drawPath(a)); break; case "Triangle": case "InvertedTriangle": l.height = 3 * o.height, l.width = o.width + 1.5 * o.width, e.appendChild(bn(new dI(r.x, r.y), t.type, new $E(20, 20), "", new rj(c + "_Shape", t.background, p.width, p.color), this.dateParse(t.date).toISOString())), $n(this.stockChart.renderer, new nj(c + "_Text", r.x, r.y, "middle", t.text, "", "middle"), t.textStyle, t.textStyle.color, e); break; case "Text": o.height += 8, s = "M " + h + " " + d + " L " + (h - 5) + " " + (d - 5) + " L " + (h - o.width / 2) + " " + (d - 5) + " L " + (h - o.width / 2) + " " + (d - o.height) + " L " + (h + o.width / 2) + " " + (d - o.height) + " L " + (h + o.width / 2) + " " + (d - 5) + " L " + (h + 5) + " " + (d - 5) + " Z", a = new rj(c + "_Shape", t.background, p.width, p.color, 1, "", s), e.appendChild(this.stockChart.renderer.drawPath(a)), $n(this.stockChart.renderer, new nj(c + "_Text", h, d - o.height / 2, "middle", t.text, "", "middle"), t.textStyle, t.textStyle.color, e); break; default: s = "M " + h + " " + d + " L " + (h - o.width / 2) + " " + (d - o.height / 3) + " L " + (h - o.width / 2) + " " + (d - o.height) + " L " + (h + o.width / 2) + " " + (d - o.height) + " L " + (h + o.width / 2) + " " + (d - o.height / 3) + " Z", a = new rj(c + "_Shape", t.background, p.width, p.color, 1, "", s), e.appendChild(this.stockChart.renderer.drawPath(a)), $n(this.stockChart.renderer, new nj(c + "_Text", h, d - o.height / 2, "middle", t.text, "", "middle"), t.textStyle, t.textStyle.color, e) } }, t.prototype.renderStockEventTooltip = function (e) { var t = parseInt(e.split("_StockEvents_")[0].replace(/\D+/g, ""), 10), i = parseInt(e.split("_StockEvents_")[1].replace(/\D+/g, ""), 10), n = this.symbolLocations[t][i], r = new dI(n.x, n.y + this.stockChart.toolbarHeight + this.stockChart.titleSize.height); this.applyHighLights(i, t); var o = this.getElement(this.chartId + "_StockEvents_Tooltip_svg"); if (o && parseInt(o.getAttribute("opacity"), 10) > 0) this.stockEventTooltip.content = [this.stockChart.stockEvents[i].description], this.stockEventTooltip.location = r, this.stockEventTooltip.dataBind(); else { Sn(this.chartId + "_StockEvents_Tooltip_svg") && k(Sn(this.chartId + "_StockEvents_Tooltip")); var s = M("div", { id: this.chartId + "_StockEvents_Tooltip", className: "ejSVGTooltip", attrs: { style: "pointer-events:none; position:absolute;z-index: 1" } }); Sn(this.chartId + "_Secondary_Element").appendChild(s), this.stockEventTooltip = new pj({ opacity: 1, header: "", content: [this.stockChart.stockEvents[i].description], enableAnimation: !0, location: r, theme: this.stockChart.theme, inverted: !0, areaBounds: this.stockChart.chart.chartAxisLayoutPanel.seriesClipRect }), this.stockEventTooltip.areaBounds.y += this.stockChart.toolbarHeight + this.stockChart.titleSize.height, this.stockEventTooltip.appendTo("#" + s.id) } }, t.prototype.removeStockEventTooltip = function (e) { var t = this, i = this.getElement(this.chartId + "_StockEvents_Tooltip"); this.stopAnimation(), i && this.stockEventTooltip && (this.toolTipInterval = setTimeout(function () { t.stockEventTooltip.fadeOut(), t.removeHighLights() }, e)) }, t.prototype.findArrowpaths = function (e) { var t = ""; switch (e) { case "ArrowUp": t = "l -10 10 l 5 0 l 0 10 l 10 0 l 0 -10 l 5 0 z"; break; case "ArrowDown": t = "l -10 -10 l 5 0 l 0 -10 l 10 0 l 0 10 l 5 0 z"; break; case "ArrowLeft": t = "l -10 -10 l 0 5 l -10 0 l 0 10 l 10 0 l 0 5 z"; break; case "ArrowRight": t = "l 10 -10 l 0 5 l 10 0 l 0 10 l -10 0 l 0 5 z" }return t }, t.prototype.applyHighLights = function (e, t) { this.pointIndex === e && this.seriesIndex === t || this.removeHighLights(), this.pointIndex = e, this.seriesIndex = t; var i = this.chartId + "_Series_" + t + "_StockEvents_" + e; this.setOpacity(i + "_Shape", .5), this.setOpacity(i + "_Text", .5) }, t.prototype.removeHighLights = function () { var e = this.chartId + "_Series_" + this.seriesIndex + "_StockEvents_" + this.pointIndex; this.setOpacity(e + "_Shape", 1), this.setOpacity(e + "_Text", 1) }, t.prototype.setOpacity = function (e, t) { Sn(e) && Sn(e).setAttribute("opacity", t.toString()) }, t.prototype.dateParse = function (e) { var t = this.chart.intl.getDateParser({ skeleton: "full", type: "dateTime" }), i = this.chart.intl.getDateFormat({ skeleton: "full", type: "dateTime" }); return new Date(Date.parse(t(i(new Date(JD.parse.parseJson({ val: e }).val))))) }, t }(pB), QH = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), XH = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, JH = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.isSingleAxis = !1, n.chartid = 57723, n.tempSeriesType = [], n.zoomChange = !1, n.allowPan = !1, n.onPanning = !1, n.trendlinetriggered = !0, n.toolbarHeight = n.enablePeriodSelector ? uw.isDevice ? 56 : 42 : 0, n.initialRender = !0, n.rangeFound = !1, n.tempPeriods = [], n } return QH(t, e), t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "series": this.resizeTo = null, this.render() } } }, t.prototype.rangeChanged = function (e, t) { var i = document.getElementById(this.chartObject.id); if (i) for (; i.firstChild;)i.removeChild(i.firstChild); this.startValue = e, this.endValue = t, this.cartesianChart.initializeChart(), this.periodSelector.datePicker.startDate = new Date(e), this.periodSelector.datePicker.endDate = new Date(t), this.periodSelector.datePicker.dataBind() }, t.prototype.preRender = function () { this.unWireEvents(), this.initPrivateVariable(), this.setCulture(), this.stockChartTheme = Li(this.theme), this.wireEvents() }, t.prototype.unWireEvents = function () { var e = uw.touchStartEvent, t = uw.touchMoveEvent, i = uw.touchEndEvent, n = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.remove(this.element, e, this.stockChartOnMouseDown), Kv.remove(this.element, t, this.stockChartOnMouseMove), Kv.remove(this.element, i, this.stockChartMouseEnd), Kv.remove(this.element, "click", this.stockChartOnMouseClick), Kv.remove(this.element, "contextmenu", this.stockChartRightClick), Kv.remove(this.element, n, this.stockChartOnMouseLeave), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.stockChartResize) }, t.prototype.wireEvents = function () { var e = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.add(this.element, uw.touchStartEvent, this.stockChartOnMouseDown, this), Kv.add(this.element, uw.touchMoveEvent, this.stockChartOnMouseMove, this), Kv.add(this.element, uw.touchEndEvent, this.stockChartMouseEnd, this), Kv.add(this.element, "click", this.stockChartOnMouseClick, this), Kv.add(this.element, "contextmenu", this.stockChartRightClick, this), Kv.add(this.element, e, this.stockChartOnMouseLeave, this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.stockChartResize.bind(this)), this.setStyle(this.element) }, t.prototype.initPrivateVariable = function () { if ("" === this.element.id) { var e = document.getElementsByClassName("e-stockChart").length; this.element.id = "stockChart_" + this.chartid + "_" + e } this.seriesXMax = null, this.seriesXMin = null, this.startValue = null, this.endValue = null, this.currentEnd = null }, t.prototype.setCulture = function () { this.intl = new Gw }, t.prototype.storeDataSource = function () { var e = this; this.series.forEach(function (t) { e.tempSeriesType.push(t.type) }) }, t.prototype.render = function () { this.trigger("load", { stockChart: this }), this.storeDataSource(), this.drawSVG(), this.renderTitle(), this.chartModuleInjection(), this.chartRender(), this.dataSource instanceof aA && this.series[0].dataSource instanceof aA || (this.stockChartDataManagerSuccess(), this.initialRender = !1) }, t.prototype.stockChartDataManagerSuccess = function () { this.findRange(), this.renderRangeSelector(), this.renderPeriodSelector(), this.trigger("loaded", { stockChart: this }) }, t.prototype.setStyle = function (e) { var t = this.zoomSettings, i = t.enableSelectionZooming || t.enablePinchZooming || "None" !== this.selectionMode || this.crosshair.enable; e.style.msTouchAction = i ? "none" : "element", e.style.touchAction = i ? "none" : "element", e.style.msUserSelect = "none", e.style.msContentZooming = "none", e.style.position = "relative", e.style.display = "block", e.style.webkitUserSelect = "none" }, t.prototype.drawSVG = function () { this.removeSvg(), er(this), this.renderer = new JE(this.element.id), this.renderBorder(), this.createSecondaryElements(), this.mainObject = this.renderer.createSvg({ id: this.element.id + "_stockChart_svg", width: this.availableSize.width, height: this.availableSize.height - (this.enablePeriodSelector ? this.toolbarHeight : 0) - this.titleSize.height }), this.svgObject = this.mainObject, this.element.appendChild(this.mainObject) }, t.prototype.createSecondaryElements = function () { var e = Zn(!1, this.element.id + "_Secondary_Element") || this.createElement("div"); e.id = this.element.id + "_Secondary_Element", this.title ? (this.titleSize = xi(this.title, this.titleStyle), this.titleSize.height += 15) : this.titleSize = { height: null, width: null }; var t = (this.enablePeriodSelector ? this.toolbarHeight : 0) + this.titleSize.height; e.setAttribute("style", "position: relative; height:" + t + "px"), kn(!1, this.element, e, !1) }, t.prototype.findCurrentData = function (e, t) { var i, n = this; return e && this.startValue && this.endValue && (i = e.filter(function (e) { return new Date(Date.parse(e[t])).getTime() >= n.startValue && new Date(Date.parse(e[t])).getTime() <= n.endValue })), i }, t.prototype.renderPeriodSelector = function () { this.enablePeriodSelector && (this.toolbarSelector.initializePeriodSelector(), this.periodSelector.toolbar.refreshOverflow(), this.enableSelector || this.cartesianChart.cartesianChartRefresh(this, this.startValue, this.endValue)) }, t.prototype.chartRender = function () { this.cartesianChart = new xH(this), this.cartesianChart.initializeChart() }, t.prototype.renderRangeSelector = function () { this.enableSelector && (this.rangeSelector = new TH(this), this.rangeSelector.initializeRangeNavigator()) }, t.prototype.getModuleName = function () { return "stockChart" }, t.prototype.getPersistData = function () { return "" }, t.prototype.removeSvg = function () { document.getElementById(this.element.id + "_Secondary_Element") && k(document.getElementById(this.element.id + "_Secondary_Element")); if (this.mainObject) { for (; this.mainObject.childNodes.length > 0;)this.mainObject.removeChild(this.mainObject.firstChild); !this.mainObject.hasChildNodes() && this.mainObject.parentNode && (k(this.mainObject), this.mainObject = null, this.selectorObject = null, this.chartObject = null) } }, t.prototype.chartModuleInjection = function () { for (var e, t = 0, i = this.getInjectedModules(); t < i.length; t++) { var n = i[t]; -1 === (e = n.prototype.getModuleName().toLowerCase()).indexOf("rangetooltip") ? IR.Inject(n) : kF.Inject(n), "datetime" !== e && "areaseries" !== e && "steplineseries" !== e || kF.Inject(n) } }, t.prototype.findRange = function () { var e = this; this.seriesXMin = 1 / 0, this.seriesXMax = -1 / 0; for (var t = 0, i = this.chart.series; t < i.length; t++) { var n = i[t]; this.seriesXMin = Math.min(this.seriesXMin, n.xMin), this.seriesXMax = Math.max(this.seriesXMax, n.xMax) } this.endValue = this.currentEnd = this.seriesXMax, this.enablePeriodSelector ? (this.toolbarSelector = new DH(this), this.periodSelector = new MH(this), this.tempPeriods = this.periods.length ? this.periods : this.toolbarSelector.calculateAutoPeriods(), this.tempPeriods.map(function (t, i) { t.selected && "ytd" === t.text.toLowerCase() ? e.startValue = new Date(new Date(e.currentEnd).getFullYear().toString()).getTime() : t.selected && "all" === t.text.toLowerCase() ? e.startValue = e.seriesXMin : t.selected && (e.startValue = e.periodSelector.changedRange(t.intervalType, e.endValue, t.interval).getTime()) })) : this.startValue = this.seriesXMin, this.rangeFound = !0 }, t.prototype.stockChartResize = function (e) { var t = this; return !!document.getElementById(this.element.id) && (this.animateSeries = !1, this.resizeTo && clearTimeout(this.resizeTo), this.resizeTo = setTimeout(function () { er(t), t.renderBorder(), t.renderTitle(), t.cartesianChart.cartesianChartRefresh(t, t.startValue, t.endValue), t.mainObject.setAttribute("width", t.availableSize.width.toString()), t.enablePeriodSelector && t.renderPeriodSelector() }, 500), !1) }, t.prototype.stockChartOnMouseDown = function (e) { var t, i, n, r, o = this.chart.element.getBoundingClientRect(), s = e.target; if (this.trigger("stockChartMouseDown", { target: s.id, x: this.mouseX, y: this.mouseY }), "touchstart" === e.type ? (this.isTouch = !0, t = (r = e).changedTouches[0].clientX, n = r.target, i = r.changedTouches[0].clientY) : (this.isTouch = "touch" === e.pointerType, t = e.clientX, i = e.clientY, n = e.target), n.id.indexOf(this.element.id + "_stockChart_chart") > -1) { var a = Sn(this.element.id + "_stockChart_chart").getBoundingClientRect(); this.mouseDownY = this.previousMouseMoveY = i - o.top - Math.max(a.top - o.top, 0), this.mouseDownX = this.previousMouseMoveX = t - o.left - Math.max(a.left - o.left, 0), this.setMouseXY(this.mouseDownX, this.mouseDownY), this.referenceXAxis = this.chart.primaryXAxis, Sn(this.element.id + "_stockChart_chart").setAttribute("cursor", "pointer"), this.mouseDownXPoint = pr(this.mouseX - this.referenceXAxis.rect.x, this.referenceXAxis.rect.width, this.referenceXAxis.visibleRange, this.referenceXAxis.isInversed), this.allowPan = !0, this.notify(uw.touchStartEvent, e) } return !1 }, t.prototype.stockChartMouseEnd = function (e) { var t, i, n; return "touchend" === e.type ? (i = (n = e).changedTouches[0].clientX, t = n.changedTouches[0].clientY, this.isTouch = !0) : (t = e.clientY, i = e.clientX, this.isTouch = "touch" === e.pointerType || "2" === e.pointerType), Sn(this.element.id + "_stockChart_chart").setAttribute("cursor", "auto"), this.onPanning = !1, this.setMouseXY(i, t), this.stockChartOnMouseUp(e), !1 }, t.prototype.stockChartOnMouseUp = function (e) { var t = e.target; return this.trigger("stockChartMouseUp", { target: t.id, x: this.mouseX, y: this.mouseY }), this.isChartDrag = !1, this.allowPan = !1, this.isTouch && (this.threshold = (new Date).getTime() + 300), this.notify(uw.touchEndEvent, e), this.stockEvent && this.stockEvent.removeStockEventTooltip(0), !1 }, t.prototype.setMouseXY = function (e, t) { var i = Sn(this.element.id + "_stockChart_chart").getBoundingClientRect(), n = this.element.getBoundingClientRect(); this.mouseX = e - n.left - Math.max(i.left - n.left, 0), this.mouseY = t - n.top - Math.max(i.top - n.top, 0) }, t.prototype.stockChartOnMouseMove = function (e) { var t, i, n; return "touchmove" === e.type ? (this.isTouch = !0, n = (i = e).changedTouches[0].clientY, t = i.changedTouches[0].clientX) : (this.isTouch = "touch" === e.pointerType || "2" === e.pointerType || this.isTouch, t = e.clientX, n = e.clientY), this.trigger("stockChartMouseMove", { target: e.target.id, x: this.mouseX, y: this.mouseY }), this.setMouseXY(t, n), this.chartOnMouseMove(e), !1 }, t.prototype.chartOnMouseMove = function (e) { if (this.allowPan && this.mouseDownXPoint && this.mouseX !== this.previousMouseMoveX && this.zoomSettings.enablePan) { this.onPanning = !0, Sn(this.element.id + "_stockChart_chart").setAttribute("cursor", "pointer"), this.mouseUpXPoint = pr(this.mouseX - this.referenceXAxis.rect.x, this.referenceXAxis.rect.width, this.referenceXAxis.visibleRange, this.referenceXAxis.isInversed); var t = Math.abs(this.mouseUpXPoint - this.mouseDownXPoint); this.mouseDownXPoint < this.mouseUpXPoint ? this.seriesXMin <= this.referenceXAxis.visibleRange.min - t && (this.startValue = this.referenceXAxis.visibleRange.min - t, this.endValue = this.referenceXAxis.visibleRange.max - t, this.cartesianChart.cartesianChartRefresh(this, this.referenceXAxis.visibleRange.min - t, this.referenceXAxis.visibleRange.max - t), this.rangeSelector.sliderChange(this.referenceXAxis.visibleRange.min - t, this.referenceXAxis.visibleRange.max - t)) : this.seriesXMax >= this.referenceXAxis.visibleRange.max + t && (this.startValue = this.referenceXAxis.visibleRange.min + t, this.endValue = this.referenceXAxis.visibleRange.max + t, this.cartesianChart.cartesianChartRefresh(this, this.referenceXAxis.visibleRange.min + t, this.referenceXAxis.visibleRange.max + t), this.rangeSelector.sliderChange(this.referenceXAxis.visibleRange.min + t, this.referenceXAxis.visibleRange.max + t)) } if (this.notify(uw.touchMoveEvent, e), "" === e.target.id) { var i = void 0; (this.chart.tooltip.enable || this.crosshair.enable) && (i = document.getElementById(this.element.id + "_stockChart_chart_tooltip")) && k(i), Sn(this.element.id + "_StockEvents_Tooltip") && this.stockEvent.removeStockEventTooltip(0) } return -1 !== e.target.id.indexOf("StockEvents") ? (clearInterval(this.stockEvent.toolTipInterval), this.stockEvent.renderStockEventTooltip(e.target.id)) : this.stockEvent && this.stockEvent.removeStockEventTooltip(1e3), this.isTouch = !1, !1 }, t.prototype.stockChartOnMouseClick = function (e) { var t = e.target; return this.trigger("stockChartMouseClick", { target: t.id, x: this.mouseX, y: this.mouseY }), this.notify("click", e), !1 }, t.prototype.stockChartRightClick = function (e) { return !this.crosshair.enable || 2 !== e.buttons && 0 !== e.which && "touch" !== e.pointerType || (e.preventDefault(), e.stopPropagation(), !1) }, t.prototype.stockChartOnMouseLeave = function (e) { var t, i, n; return "touchleave" === e.type ? (this.isTouch = !0, i = (t = e).changedTouches[0].clientX, n = t.changedTouches[0].clientY) : (i = e.clientX, n = e.clientY, this.isTouch = "touch" === e.pointerType || "2" === e.pointerType), this.setMouseXY(i, n), this.allowPan = !1, this.stockChartOnMouseLeaveEvent(e), !1 }, t.prototype.stockChartOnMouseLeaveEvent = function (e) { e.target; var t = uw.isPointer ? "pointerleave" : "mouseleave"; return this.isChartDrag = !1, this.notify(t, e), this.stockEvent && this.stockEvent.removeStockEventTooltip(1e3), !1 }, t.prototype.destroy = function () { }, t.prototype.renderBorder = function () { if (this.border.width) { var e = this.createElement("div"); e.id = this.element.id + "_stock_border", e.style.width = this.availableSize.width + "px", e.style.height = this.availableSize.height + "px", e.style.position = "absolute", e.style.border = this.border.width + "px solid " + this.border.color, e.style.pointerEvents = "none", kn(!1, Sn(this.element.id), e) } }, t.prototype.renderTitle = function () { var e; if (this.title) { kn(!1, Sn(this.element.id + "_Secondary_Element"), this.renderer.createSvg({ id: this.element.id + "_stockChart_Title", width: this.availableSize.width, height: this.titleSize.height, fill: this.background || this.stockChartTheme.background }), !1); var t = this.titleStyle.textAlignment, i = "Near" === t ? "start" : "Far" === t ? "end" : "middle"; e = new ej(0, 0, this.availableSize.width, 0); var n = new nj(this.element.id + "_ChartTitle", nr(e, this.titleStyle), this.titleSize.height - 10, i, this.title, "", "auto"); $n(this.renderer, n, this.titleStyle, this.titleStyle.color || this.findTitleColor(), Sn(this.element.id + "_stockChart_Title"), !1, !1); this.availableSize.height -= this.titleSize.height + 5 } }, t.prototype.findTitleColor = function () { return this.theme.indexOf("Highcontrast") > -1 || this.theme.indexOf("Dark") > -1 ? "#ffffff" : "#424242" }, t.prototype.calculateStockEvents = function () { this.stockEvents.length && (this.stockEvent = new GH(this), kn(!1, this.chartObject, this.stockEvent.renderStockEvents())) }, XH([Y(null)], t.prototype, "width", void 0), XH([Y(null)], t.prototype, "height", void 0), XH([Y("")], t.prototype, "dataSource", void 0), XH([U({}, PH)], t.prototype, "margin", void 0), XH([U({ color: "#DDDDDD", width: 1 }, IH)], t.prototype, "border", void 0), XH([Y(null)], t.prototype, "background", void 0), XH([Y("Material")], t.prototype, "theme", void 0), XH([U({ name: "primaryXAxis", valueType: "DateTime" }, VH)], t.prototype, "primaryXAxis", void 0), XH([U({ border: { color: null, width: .5 }, background: "transparent" }, kH)], t.prototype, "chartArea", void 0), XH([U({ name: "primaryYAxis", opposedPosition: !0, labelPosition: "Inside" }, VH)], t.prototype, "primaryYAxis", void 0), XH([G([{}], WH)], t.prototype, "rows", void 0), XH([G([{ opposedPosition: !0 }], VH)], t.prototype, "axes", void 0), XH([G([], BH)], t.prototype, "series", void 0), XH([G([], UH)], t.prototype, "stockEvents", void 0), XH([Y(!1)], t.prototype, "isTransposed", void 0), XH([Y("")], t.prototype, "title", void 0), XH([U({ size: "15px", fontWeight: "500", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }, jH)], t.prototype, "titleStyle", void 0), XH([G([], FH)], t.prototype, "indicators", void 0), XH([U({ shared: !0, enableMarker: !1 }, GE)], t.prototype, "tooltip", void 0), XH([U({ dashArray: "5" }, ER)], t.prototype, "crosshair", void 0), XH([U({}, jR)], t.prototype, "zoomSettings", void 0), XH([Y(!0)], t.prototype, "enablePeriodSelector", void 0), XH([Y(!0)], t.prototype, "enableCustomRange", void 0), XH([Y(!1)], t.prototype, "isSelect", void 0), XH([Y(!0)], t.prototype, "enableSelector", void 0), XH([G([], QE)], t.prototype, "periods", void 0), XH([G([{}], _H)], t.prototype, "annotations", void 0), XH([X()], t.prototype, "selectorRender", void 0), XH([X()], t.prototype, "stockChartMouseMove", void 0), XH([X()], t.prototype, "stockChartMouseLeave", void 0), XH([X()], t.prototype, "stockChartMouseDown", void 0), XH([X()], t.prototype, "stockChartMouseUp", void 0), XH([X()], t.prototype, "stockChartMouseClick", void 0), XH([X()], t.prototype, "pointClick", void 0), XH([X()], t.prototype, "pointMove", void 0), XH([Y("None")], t.prototype, "selectionMode", void 0), XH([Y(!1)], t.prototype, "isMultiSelect", void 0), XH([X()], t.prototype, "load", void 0), XH([X()], t.prototype, "loaded", void 0), XH([X()], t.prototype, "rangeChange", void 0), XH([X()], t.prototype, "axisLabelRender", void 0), XH([X()], t.prototype, "tooltipRender", void 0), XH([X()], t.prototype, "seriesRender", void 0), XH([X()], t.prototype, "stockEventRender", void 0), XH([G([], YH)], t.prototype, "selectedDataIndexes", void 0), XH([Y(["Line", "Hilo", "OHLC", "Hollow Candle", "Spline", "Candle"])], t.prototype, "seriesType", void 0), XH([Y(["EMA", "TMA", "SMA", "Momentum", "ATR", "Accumulation Distribution", "Bollinger Bands", "MACD", "Stochastic", "RSI"])], t.prototype, "indicatorType", void 0), XH([Y(["PNG", "JPEG", "SVG", "PDF", "Print"])], t.prototype, "exportType", void 0), XH([Y(["Linear", "Exponential", "Polynomial", "Logarithmic", "Moving Average"])], t.prototype, "trendlineType", void 0), t }(Kw), ZH = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), KH = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, $H = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZH(t, e), KH([Y("Segoe UI")], t.prototype, "fontFamily", void 0), KH([Y("Normal")], t.prototype, "fontStyle", void 0), KH([Y("Regular")], t.prototype, "fontWeight", void 0), KH([Y("")], t.prototype, "color", void 0), KH([Y("12px")], t.prototype, "size", void 0), KH([Y(1)], t.prototype, "opacity", void 0), t }(ww), e_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZH(t, e), KH([Y(10)], t.prototype, "top", void 0), KH([Y(10)], t.prototype, "bottom", void 0), KH([Y(10)], t.prototype, "right", void 0), KH([Y(10)], t.prototype, "left", void 0), t }(ww), t_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZH(t, e), KH([Y(0)], t.prototype, "width", void 0), KH([Y(1)], t.prototype, "opacity", void 0), KH([Y("transparent")], t.prototype, "color", void 0), t }(ww), i_ = function () { return function (e, t, i, n) { this.x = e, this.y = t, this.width = i, this.height = n } }(), n_ = function () { return function () { } }(), r_ = function () { return function () { } }(), o_ = function () { return function () { } }(), s_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZH(t, e), t }(n_), a_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return ZH(t, e), t }(s_), l_ = function () { return function () { } }(), h_ = function () { return function () { } }(), d_ = function () { return function () { } }(), c_ = function () { return function () { } }(), p_ = function () { return function (e, t, i, n, r) { this.id = e, this.fill = t, this.borderColor = i, this.borderWidth = n, this.opacity = r } }(), u_ = function () { return function () { } }(), g_ = function () { return function () { this.counterclockwise = 0, this.clockwise = 1 } }(), m_ = function () { return function () { } }(), f_ = function () { return function () { } }(), y_ = function () { return function (e, t) { this.width = e, this.height = t } }(), v_ = function () { return function () { } }(), w_ = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), b_ = function () { return function (e, t, i, n, r, o, s) { this.id = e, this.opacity = r, this.fill = t, this.stroke = n, this["stroke-width"] = i, this["stroke-dasharray"] = o, this.d = s } }(), C_ = function (e) { function t(t, i, n, r, o) { var s = e.call(this, t, i, n.width, n.color, r) || this; return s.y = o.y, s.x = o.x, s.height = o.height, s.width = o.width, s } return w_(t, e), t }(b_), L_ = function (e) { function t(t, i, n, r, o, s, a, l) { var h = e.call(this, t, i, n.width, n.color, r) || this; return h.cy = s, h.cx = o, h.r = a, h["stroke-dasharray"] = l, h } return w_(t, e), t }(b_), M_ = function () { return function (e, t, i, n, r) { this.id = e, this.x = t, this.y = i, this.anchor = n, this.text = r } }(); !function (e) { e.axisLabelFont = { size: "12px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" }, e.smithchartTitleFont = { size: "15px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" }, e.smithchartSubtitleFont = { size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" }, e.dataLabelFont = { size: "12px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" }, e.legendLabelFont = { size: "13px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" } }(LF || (LF = {})); var S_ = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), x_ = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, T_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return S_(t, e), x_([Y(!0)], t.prototype, "visible", void 0), x_([Y("")], t.prototype, "text", void 0), x_([Y("")], t.prototype, "description", void 0), x_([Y("Center")], t.prototype, "textAlignment", void 0), x_([U(LF.legendLabelFont, $H)], t.prototype, "textStyle", void 0), t }(ww), D_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return S_(t, e), x_([Y(0)], t.prototype, "x", void 0), x_([Y(0)], t.prototype, "y", void 0), t }(ww), A_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return S_(t, e), x_([Y(1)], t.prototype, "width", void 0), x_([Y(null)], t.prototype, "color", void 0), t }(ww), E_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return S_(t, e), x_([Y(10)], t.prototype, "width", void 0), x_([Y(10)], t.prototype, "height", void 0), x_([U({}, A_)], t.prototype, "border", void 0), t }(ww), j_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return S_(t, e), x_([Y(1)], t.prototype, "width", void 0), x_([Y(null)], t.prototype, "color", void 0), t }(ww), I_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return S_(t, e), x_([Y(!1)], t.prototype, "visible", void 0), x_([Y("bottom")], t.prototype, "position", void 0), x_([Y("Center")], t.prototype, "alignment", void 0), x_([Y(null)], t.prototype, "width", void 0), x_([Y(null)], t.prototype, "height", void 0), x_([Y("circle")], t.prototype, "shape", void 0), x_([Y(null)], t.prototype, "rowCount", void 0), x_([Y(null)], t.prototype, "columnCount", void 0), x_([Y(8)], t.prototype, "itemPadding", void 0), x_([Y(5)], t.prototype, "shapePadding", void 0), x_([Y("")], t.prototype, "description", void 0), x_([Y(!0)], t.prototype, "toggleVisibility", void 0), x_([U({}, T_)], t.prototype, "title", void 0), x_([U({}, D_)], t.prototype, "location", void 0), x_([U({}, E_)], t.prototype, "itemStyle", void 0), x_([U({}, j_)], t.prototype, "border", void 0), x_([U(LF.legendLabelFont, $H)], t.prototype, "textStyle", void 0), t }(ww), k_ = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), P_ = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, N_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return k_(t, e), P_([Y(1)], t.prototype, "width", void 0), P_([Y("")], t.prototype, "dashArray", void 0), P_([Y(!0)], t.prototype, "visible", void 0), P_([Y(null)], t.prototype, "color", void 0), P_([Y(1)], t.prototype, "opacity", void 0), t }(ww), O_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return k_(t, e), P_([Y(1)], t.prototype, "width", void 0), P_([Y("")], t.prototype, "dashArray", void 0), P_([Y(!1)], t.prototype, "visible", void 0), P_([Y(null)], t.prototype, "color", void 0), P_([Y(8)], t.prototype, "count", void 0), t }(ww), R_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return k_(t, e), P_([Y(!0)], t.prototype, "visible", void 0), P_([Y(1)], t.prototype, "width", void 0), P_([Y(null)], t.prototype, "color", void 0), P_([Y("")], t.prototype, "dashArray", void 0), t }(ww), z_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return k_(t, e), P_([Y(!0)], t.prototype, "visible", void 0), P_([Y("Outside")], t.prototype, "labelPosition", void 0), P_([Y("Hide")], t.prototype, "labelIntersectAction", void 0), P_([U({}, N_)], t.prototype, "majorGridLines", void 0), P_([U({}, O_)], t.prototype, "minorGridLines", void 0), P_([U({}, R_)], t.prototype, "axisLine", void 0), P_([U(LF.axisLabelFont, $H)], t.prototype, "labelStyle", void 0), t }(ww), B_ = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), F_ = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, V_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return B_(t, e), F_([Y(!0)], t.prototype, "visible", void 0), F_([Y("")], t.prototype, "text", void 0), F_([Y("")], t.prototype, "description", void 0), F_([Y("Far")], t.prototype, "textAlignment", void 0), F_([Y(!0)], t.prototype, "enableTrim", void 0), F_([Y(null)], t.prototype, "maximumWidth", void 0), F_([U(LF.smithchartSubtitleFont, $H)], t.prototype, "textStyle", void 0), t }(ww), W_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return B_(t, e), F_([Y(!0)], t.prototype, "visible", void 0), F_([Y("")], t.prototype, "text", void 0), F_([Y("")], t.prototype, "description", void 0), F_([Y("Center")], t.prototype, "textAlignment", void 0), F_([Y(!0)], t.prototype, "enableTrim", void 0), F_([Y(null)], t.prototype, "maximumWidth", void 0), F_([U({}, V_)], t.prototype, "subtitle", void 0), F_([U(LF.smithchartTitleFont, $H)], t.prototype, "font", void 0), F_([U(LF.smithchartTitleFont, $H)], t.prototype, "textStyle", void 0), t }(ww), H_ = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), __ = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, Y_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(1)], t.prototype, "width", void 0), __([Y(null)], t.prototype, "color", void 0), t }(ww), U_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(!1)], t.prototype, "visible", void 0), __([Y(null)], t.prototype, "fill", void 0), __([Y(.95)], t.prototype, "opacity", void 0), __([Y("")], t.prototype, "template", void 0), __([U({}, Y_)], t.prototype, "border", void 0), t }(ww), q_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(3)], t.prototype, "width", void 0), __([Y("white")], t.prototype, "color", void 0), t }(ww), G_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(.1)], t.prototype, "width", void 0), __([Y("white")], t.prototype, "color", void 0), t }(ww), Q_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(1)], t.prototype, "width", void 0), __([Y(null)], t.prototype, "color", void 0), t }(ww), X_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(!1)], t.prototype, "visible", void 0), __([Y("")], t.prototype, "template", void 0), __([Y(null)], t.prototype, "fill", void 0), __([Y(1)], t.prototype, "opacity", void 0), __([U({}, G_)], t.prototype, "border", void 0), __([U({}, Q_)], t.prototype, "connectorLine", void 0), __([U(LF.dataLabelFont, $H)], t.prototype, "textStyle", void 0), t }(ww), J_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y(!1)], t.prototype, "visible", void 0), __([Y("circle")], t.prototype, "shape", void 0), __([Y(6)], t.prototype, "width", void 0), __([Y(6)], t.prototype, "height", void 0), __([Y("")], t.prototype, "imageUrl", void 0), __([Y("")], t.prototype, "fill", void 0), __([Y(1)], t.prototype, "opacity", void 0), __([U({}, q_)], t.prototype, "border", void 0), __([U({}, X_)], t.prototype, "dataLabel", void 0), t }(ww), Z_ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return H_(t, e), __([Y("visible")], t.prototype, "visibility", void 0), __([Y([])], t.prototype, "points", void 0), __([Y("")], t.prototype, "resistance", void 0), __([Y("")], t.prototype, "reactance", void 0), __([Y(null)], t.prototype, "dataSource", void 0), __([Y("")], t.prototype, "name", void 0), __([Y(null)], t.prototype, "fill", void 0), __([Y(!1)], t.prototype, "enableAnimation", void 0), __([Y("2000ms")], t.prototype, "animationDuration", void 0), __([Y(!1)], t.prototype, "enableSmartLabels", void 0), __([Y(1)], t.prototype, "width", void 0), __([Y(1)], t.prototype, "opacity", void 0), __([U({}, J_)], t.prototype, "marker", void 0), __([U({}, U_)], t.prototype, "tooltip", void 0), t }(ww), K_ = function () { function e() { } return e.prototype.calculateAreaBounds = function (e, t, i) { var n, r, o, s, a, l = e.margin, h = e.border, d = this.getLegendSpace(e, i); return n = d.leftLegendWidth + l.left + h.width, a = d.rightLegendWidth + l.left + l.right + 2 * h.width, o = e.availableSize.width - (n + a), r = l.top + 2 * e.elementSpacing + d.modelTitleHeight + d.modelsubTitleHeight + d.topLegendHeight + h.width, s = e.availableSize.height - (d.modelTitleHeight + 2 * e.elementSpacing + d.modelsubTitleHeight + l.top + d.topLegendHeight + d.bottomLegendHeight), { x: n, y: r, width: o, height: s } }, e.prototype.getLegendSpace = function (e, t) { var i, n = e.title, r = e.legendSettings, o = r.position.toLowerCase(), s = 0, a = 0, l = e.font, h = 0, d = r.border.width, c = 0, p = 0, u = 0, g = 0, m = 0; return r.visible && (i = t.width + 5 + e.elementSpacing + 2 * d, c = "left" === o ? i : 0, p = "right" === o ? i : 0, m = r.title.visible ? Sr(r.title.text, l).height : 0, u = "top" === o ? e.elementSpacing + t.height + m : 0, g = "bottom" === o ? e.elementSpacing + t.height + m : 0), s = Sr(n.subtitle.text, l).height, "" !== n.text && n.visible, h = 0, a = "" !== n.subtitle.text && n.subtitle.visible ? s : 0, { leftLegendWidth: c, rightLegendWidth: p, topLegendHeight: u, bottomLegendHeight: g, modelTitleHeight: h, modelsubTitleHeight: a } }, e }(), $_ = function () { function e() { this.radialLabels = [-50, -20, -10, -5, -4, -3, -2, -1.5, -1, -.8, -.6, -.4, -.2, 0, .2, .4, .6, .8, 1, 1.5, 2, 3, 4, 5, 10, 20, 50], this.radialLabelCollections = [], this.horizontalLabelCollections = [], this.labelCollections = [], this.direction = new g_ } return e.prototype.renderArea = function (e, t) { this.calculateChartArea(e, t), this.calculateCircleMargin(e, t), this.calculateXAxisRange(e), this.calculateRAxisRange(e), this.measureHorizontalAxis(e), this.measureRadialAxis(e), e.horizontalAxis.visible && this.updateHAxis(e), e.radialAxis.visible && this.updateRAxis(e), e.horizontalAxis.visible && this.drawHAxisLabels(e), e.radialAxis.visible && this.drawRAxisLabels(e) }, e.prototype.updateHAxis = function (e) { var t = e.horizontalAxis.majorGridLines, i = e.horizontalAxis.minorGridLines, n = e.horizontalAxis.axisLine; t.visible && this.updateHMajorGridLines(e), i.visible && this.updateHMinorGridLines(e), n.visible && this.updateHAxisLine(e) }, e.prototype.updateRAxis = function (e) { var t = e.radialAxis.majorGridLines, i = e.radialAxis.minorGridLines, n = e.radialAxis.axisLine; t.visible && this.updateRMajorGridLines(e), i.visible && this.updateRMinorGridLines(e), n.visible && this.updateRAxisLine(e) }, e.prototype.measureHorizontalAxis = function (e) { e.horizontalAxis.majorGridLines; var t = e.horizontalAxis.minorGridLines; this.measureHMajorGridLines(e), t.visible && this.measureHMinorGridLines(e) }, e.prototype.measureRadialAxis = function (e) { e.radialAxis.majorGridLines; var t = e.radialAxis.minorGridLines; this.measureRMajorGridLines(e), t.visible && this.measureRMinorGridLines(e) }, e.prototype.calculateChartArea = function (e, t) { var i, n, r, o, s = e.availableSize.width, a = e.availableSize.height; s = t.width, a = t.height, i = Math.min(s, a), n = Math.min(s, a), r = t.x + (t.width / 2 - i / 2), o = t.y + ((a - n) / 2 > 0 ? (a - n) / 2 : 0), e.chartArea = { x: r, y: o, width: i, height: n } }, e.prototype.calculateCircleMargin = function (e, t) { var i = 0, n = e.chartArea.width, r = e.radius; i = this.maximumLabelLength(e); var o = "Outside" === e.radialAxis.labelPosition ? i + 10 : 10, s = (n - 2 * o > 0 ? n - 2 * o : 0) / 2, a = r > 1 ? 1 : r < .1 ? .1 : r; this.areaRadius = s * a, this.circleLeftX = e.chartArea.x + o + s * (1 - a), this.circleTopY = e.chartArea.y + o + s * (1 - a), this.circleCenterX = this.circleLeftX + this.areaRadius, this.circleCenterY = t.y + t.height / 2 }, e.prototype.maximumLabelLength = function (e) { for (var t, i = 0, n = e.horizontalAxis.labelStyle, r = 0; r < this.radialLabels.length; r++)i < (t = Sr(this.radialLabels[r].toString(), n)).width && (i = t.width); return i }, e.prototype.calculateAxisLabels = function () { for (var e = 0, t = 0, i = [], n = 2 * this.areaRadius, r = 0; r < 2; r += .1) { var o = !1, s = !1, a = n * (1 / ((r = Math.round(10 * r) / 10) + 1)) / 2 * 2; 0 !== e && 1 !== r ? (r < 1 && (o = this.isOverlap(1, n, a, 30)), r > 1 && (s = this.isOverlap(2, n, a, 30)), o || s || e - a >= 30 && (i[t] = r, t++ , e = a)) : (e = a, i[t] = r, t++) } for (var l = [2, 3, 4, 5, 10, 20, 50], h = 0; h < l.length; h++)i[t] = l[h], t++; return i }, e.prototype.isOverlap = function (e, t, i, n) { var r, o; return r = 1 / (e + 1), o = t * r / 2 * 2, i - o < n }, e.prototype.calculateXAxisRange = function (e) { for (var t, i, n, r = 2 * this.areaRadius, o = this.calculateAxisLabels(), s = this.circleCenterY, a = this.circleLeftX, l = this.circleLeftX, h = 0; h < o.length; h++)i = r * (1 / ((t = o[h]) + 1)) / 2, "Impedance" === e.renderType && (l = a + r - 2 * i), n = l + i, this.horizontalLabelCollections.push({ centerX: n, centerY: s, radius: i, value: t, region: null }) }, e.prototype.calculateRAxisRange = function (e) { var t, i, n, r = 2 * this.areaRadius, o = new d_; "Impedance" === e.renderType ? (o.x = this.circleLeftX + r, o.y = this.circleTopY + this.areaRadius) : (o.x = this.circleLeftX, o.y = this.circleTopY + this.areaRadius); for (var s = 0; s < this.radialLabels.length; s++)n = this.radialLabels[s], i = Math.abs(1 / n * r / 2), t = "Impedance" === e.renderType ? n > 0 ? o.y - i : o.y + i : n < 0 ? o.y - i : o.y + i, this.radialLabelCollections.push({ centerX: o.x, centerY: t, radius: i, value: n }) }, e.prototype.measureHMajorGridLines = function (e) { var t, i, n, r, o, s = []; this.majorHGridArcPoints = []; for (var a = 0; a < this.horizontalLabelCollections.length; a++) { var l = new s_; l = this.horizontalLabelCollections[a], s = this.calculateHMajorArcStartEndPoints(l.value), "Impedance" === e.renderType ? (n = s[0], r = s[1]) : (n = s[1], r = s[0]), o = { width: l.radius, height: l.radius }, 0 !== l.value && 50 !== l.value ? (t = this.intersectingCirclePoints(n[0].centerX, n[0].centerY, n[0].radius, l.centerX, l.centerY, l.radius, e.renderType), i = this.intersectingCirclePoints(r[0].centerX, r[0].centerY, r[0].radius, l.centerX, l.centerY, l.radius, e.renderType), this.majorHGridArcPoints.push({ startPoint: t, endPoint: i, rotationAngle: 2 * Math.PI, sweepDirection: "Impedance" === e.renderType ? this.direction.counterclockwise : this.direction.clockwise, isLargeArc: !0, size: o })) : (t = { x: l.centerX + l.radius, y: l.centerY }, i = { x: l.centerX + l.radius, y: l.centerY - .05 }, this.majorHGridArcPoints.push({ startPoint: t, endPoint: i, rotationAngle: 2 * Math.PI, sweepDirection: this.direction.clockwise, isLargeArc: !0, size: o })) } }, e.prototype.measureRMajorGridLines = function (e) { var t, i, n, r, o, s, a, l, h, d, c = []; this.majorRGridArcPoints = [], this.labelCollections = [], t = Cr(); for (var p = 0; p < this.radialLabelCollections.length; p++)(i = this.radialLabelCollections[p]).radius <= t || (n = i.value, r = (c = this.calculateMajorArcStartEndPoints(i, Math.abs(n), e))[0], o = c[1], s = this.circleXYRadianValue(this.circleCenterX, this.circleCenterY, o.x, o.y) * (180 / Math.PI), 0 !== n ? (a = { x: r.x, y: r.y }, l = { x: o.x, y: o.y }, h = { width: i.radius, height: i.radius }, d = n > 0 ? this.direction.clockwise : this.direction.counterclockwise, this.majorRGridArcPoints.push({ startPoint: a, endPoint: l, size: h, rotationAngle: 2 * Math.PI, isLargeArc: !1, sweepDirection: d }), this.labelCollections.push({ centerX: o.x, centerY: o.y, angle: s, value: n, radius: this.areaRadius, region: null })) : (a = { x: this.circleLeftX, y: this.circleCenterY }, l = { x: this.circleCenterX + this.areaRadius, y: this.circleCenterY }, this.majorRGridArcPoints.push({ startPoint: a, endPoint: l, size: null, rotationAngle: null, isLargeArc: null, sweepDirection: null }), this.labelCollections.push({ centerX: "Impedance" === e.renderType ? this.circleCenterX - this.areaRadius : this.circleCenterX + this.areaRadius, centerY: this.circleCenterY, angle: "Impedance" === e.renderType ? 180 : 360, value: n, radius: this.areaRadius, region: null }))) }, e.prototype.circleXYRadianValue = function (e, t, i, n) { var r; return r = Math.atan2(n - t, i - e), r = r < 0 ? r + 360 * Math.PI / 180 : r }, e.prototype.calculateMajorArcStartEndPoints = function (e, t, i) { var n, r, o = [], s = []; return n = this.circleCenterX, r = this.circleCenterY, t >= 10 ? o[0] = "Impedance" === i.renderType ? { x: n + this.areaRadius, y: r } : { x: n - this.areaRadius, y: r } : s = t >= 3 ? this.horizontalLabelCollections.filter(function (e) { return 10 === e.value }) : t >= 1 ? this.horizontalLabelCollections.filter(function (e) { return 5 === e.value }) : this.horizontalLabelCollections.filter(function (e) { return 3 === e.value }), s.length > 0 && (o[0] = this.intersectingCirclePoints(e.centerX, e.centerY, e.radius, s[0].centerX, s[0].centerY, s[0].radius, i.renderType)), o[1] = this.intersectingCirclePoints(e.centerX, e.centerY, e.radius, n, r, this.areaRadius, i.renderType), o }, e.prototype.calculateHMajorArcStartEndPoints = function (e) { var t, i, n = []; return e <= .3 ? (t = 2, i = -2) : e <= 1 ? (t = 3, i = -3) : e <= 2 ? (t = 5, i = -5) : e <= 5 ? (t = 10, i = -10) : (t = 50, i = -50), n[0] = this.radialLabelCollections.filter(function (e) { return e.value === t }), n[1] = this.radialLabelCollections.filter(function (e) { return e.value === i }), n }, e.prototype.calculateMinorArcStartEndPoints = function (e) { var t, i, n = []; return e <= .1 ? (t = 1, i = -1) : e <= .2 ? (t = .8, i = -.8) : e <= .3 ? (t = .4, i = -.4) : e <= .6 ? (t = 1, i = -1) : e <= 1 ? (t = 1.5, i = -1.5) : e <= 1.5 ? (t = 2, i = -2) : e <= 2 ? (t = 1, i = -1) : e <= 5 ? (t = 3, i = -3) : (t = 10, i = -10), n[0] = this.radialLabelCollections.filter(function (e) { return e.value === t }), n[1] = this.radialLabelCollections.filter(function (e) { return e.value === i }), n }, e.prototype.intersectingCirclePoints = function (e, t, i, n, r, o, s) { var a, l, h, d, c, p, u, g, m, f, y, v, w, b, C, L = { x: 0, y: 0 }; return a = e - n, l = t - r, h = Math.sqrt(a * a + l * l), d = h * h, c = (i * i - o * o) / (2 * d), p = i * i - o * o, u = Math.sqrt(2 * (i * i + o * o) / d - p * p / (d * d) - 1), g = (e + n) / 2 + c * (n - e), m = u * (r - t) / 2, f = g + m, y = g - m, v = (t + r) / 2 + c * (r - t), w = u * (e - n) / 2, b = v + w, C = v - w, "Impedance" === s ? y < f ? (L.x = y, L.y = C) : (L.x = f, L.y = b) : f > y ? (L.x = f, L.y = b) : (L.x = y, L.y = C), { x: L.x, y: L.y } }, e.prototype.updateHMajorGridLines = function (e) { var t, i, n, r = e.horizontalAxis.majorGridLines; t = e.renderer.createGroup({ id: e.element.id + "_svg_horizontalAxisMajorGridLines" }), n = this.calculateGridLinesPath(this.majorHGridArcPoints); var o = new b_(e.element.id + "_horizontalAxisMajorGridLines", "none", r.width, r.color ? r.color : e.themeStyle.majorGridLine, r.opacity, r.dashArray, n); i = e.renderer.drawPath(o), t.appendChild(i), e.svgObject.appendChild(t) }, e.prototype.updateRMajorGridLines = function (e) { var t, i, n, r = e.radialAxis.majorGridLines; t = e.renderer.createGroup({ id: e.element.id + "_svg_radialAxisMajorGridLines" }), n = this.calculateGridLinesPath(this.majorRGridArcPoints); var o = new b_(e.element.id + "_radialAxisMajorGridLines", "none", r.width, r.color ? r.color : e.themeStyle.majorGridLine, r.opacity, r.dashArray, n); i = e.renderer.drawPath(o), t.appendChild(i), e.svgObject.appendChild(t) }, e.prototype.updateHAxisLine = function (e) { var t, i, n, r, o, s, a = this.areaRadius, l = e.horizontalAxis.axisLine, h = e.renderer.createGroup({ id: e.element.id + "_svg_hAxisLine" }); t = { x: this.circleCenterX + a, y: this.circleCenterY }, i = { x: this.circleCenterX + a, y: this.circleCenterY - .05 }, n = { width: a, height: a }, r = this.direction.clockwise, o = 2 * Math.PI, s = "M" + t.x + " " + t.y + " A " + n.width + " " + n.height + " " + o + " 1 " + r + " " + i.x + " " + i.y; var d = new b_(e.element.id + "_horizontalAxisLine", "none", l.width, l.color ? l.color : e.themeStyle.axisLine, 1, l.dashArray, s), c = e.renderer.drawPath(d); h.appendChild(c), e.svgObject.appendChild(h) }, e.prototype.updateRAxisLine = function (e) { var t, i, n, r, o, s = this.areaRadius, a = e.radialAxis.axisLine; t = { x: this.circleCenterX - s, y: this.circleCenterY }, i = { x: this.circleCenterX + s, y: this.circleCenterY }, n = { width: 0, height: 0 }, r = this.direction.counterclockwise, o = "M " + t.x + " " + t.y + " A " + n.width + " " + n.height + " 0 0 " + r + " " + i.x + " " + i.y; var l = new b_(e.element.id + "_radialAxisLine", "none", a.width, a.color ? a.color : e.themeStyle.axisLine, 1, a.dashArray, o), h = e.renderer.createGroup({ id: e.element.id + "_svg_rAxisLine" }), d = e.renderer.drawPath(l); h.appendChild(d), e.svgObject.appendChild(h) }, e.prototype.drawHAxisLabels = function (e) { var t = e.horizontalAxis; e.radialAxis.labelStyle.fontFamily = e.themeStyle.fontFamily || e.radialAxis.labelStyle.fontFamily; for (var i, n, r, o, s, a, l, h, d, c, p, u = e.horizontalAxis.labelStyle, g = e.renderer.createGroup({ id: e.element.id + "_HAxisLabels" }), m = 0; m < this.horizontalLabelCollections.length; m++)if (i = this.horizontalLabelCollections[m], n = this.horizontalLabelCollections[m].value.toString(), 0 !== i.value) { if (r = "Impedance" === e.renderType ? i.centerX - i.radius : i.centerX + i.radius, o = i.centerY, s = Sr(n, u), r = "Impedance" === e.renderType ? r - s.width : r, "Outside" === t.labelPosition ? o -= s.height / 4 : o += s.height, this.horizontalLabelCollections[m].region = this.calculateRegion(n, s, r, o), "Hide" === t.labelIntersectAction) { l = (a = this.horizontalLabelCollections[m].region.bounds).width, h = a.x; for (var f = 1; f < m; f++)c = (d = this.horizontalLabelCollections[f].region.bounds).width, p = d.x, "Impedance" === e.renderType && p + c > h && (n = ""), "Admittance" === e.renderType && p < h + l && (n = "") } var y = { text: n.toString(), x: r, y: o, name: "axisLabelRender", cancel: !1 }; e.trigger("axisLabelRender", y); var v = new M_(e.element.id + "_HLabel_" + m, y.x, y.y, "none", y.text), w = u.color ? u.color : e.themeStyle.axisLabel; u.fontFamily = u.fontFamily || e.themeStyle.labelFontFamily; var b = Er(v, u, w, g); g.appendChild(b) } e.svgObject.appendChild(g) }, e.prototype.drawRAxisLabels = function (e) { e.radialAxis.labelStyle.fontFamily = e.themeStyle.fontFamily || e.radialAxis.labelStyle.fontFamily; for (var t, i, n, r, o, s, a, l, h, d, c, p, u, g, m, f = e.radialAxis.labelStyle, y = new a_, v = e.radialAxis, w = e.renderer.createGroup({ id: e.element.id + "_RAxisLabels" }), b = 0; b < this.labelCollections.length; b++) { if (y = this.labelCollections[b], t = y.value.toString(), i = Sr(t, f), n = Math.round(100 * y.angle) / 100, "Outside" === v.labelPosition ? (r = this.circlePointPosition(this.circleCenterX, this.circleCenterY, y.angle, this.areaRadius + 2), o = this.setLabelsOutsidePosition(n, r.x, r.y, i)) : (r = this.circlePointPosition(this.circleCenterX, this.circleCenterY, y.angle, this.areaRadius - 2), o = this.setLabelsInsidePosition(n, r.x, r.y, i)), this.labelCollections[b].region = this.calculateRegion(t, i, o.x, o.y), "Hide" === v.labelIntersectAction) { l = (d = this.labelCollections[b].region.bounds).width, h = d.height, s = d.x, a = d.y; for (var C = 0; C < b; C++)u = (m = this.labelCollections[C].region.bounds).width, g = m.height, c = m.x, p = m.y, c <= s + l && s <= c + u && p <= a + h && a <= p + g && (t = " ") } var L = { text: t.toString(), x: o.x, y: o.y, name: "axisLabelRender", cancel: !1 }; e.trigger("axisLabelRender", L); var M = new M_(e.element.id + "_RLabel_" + b, L.x, L.y, "none", L.text), S = f.color ? f.color : e.themeStyle.axisLabel; f.fontFamily = e.themeStyle.labelFontFamily ? e.themeStyle.labelFontFamily : f.fontFamily; var x = Er(M, f, S, w); w.appendChild(x) } e.svgObject.appendChild(w) }, e.prototype.calculateRegion = function (e, t, i, n) { new o_; return { bounds: { x: i, y: n, width: t.width, height: t.height }, labelText: e } }, e.prototype.updateHMinorGridLines = function (e) { var t, i, n, r = e.horizontalAxis.minorGridLines; t = e.renderer.createGroup({ id: e.element.id + "_svg_horizontalAxisMinorGridLines" }), n = this.calculateGridLinesPath(this.minorHGridArcPoints); var o = new b_(e.element.id + "_horizontalAxisMinorGridLines", "none", r.width, r.color ? r.color : e.themeStyle.minorGridLine, r.opacity, r.dashArray, n); i = e.renderer.drawPath(o), t.appendChild(i), e.svgObject.appendChild(t) }, e.prototype.updateRMinorGridLines = function (e) { var t, i, n, r = e.radialAxis.minorGridLines; t = e.renderer.createGroup({ id: e.element.id + "_svg_radialAxisMinorGridLines" }), n = this.calculateGridLinesPath(this.minorGridArcPoints); var o = new b_(e.element.id + "_radialAxisMinorGridLines", "none", r.width, r.color ? r.color : e.themeStyle.minorGridLine, r.opacity, r.dashArray, n); i = e.renderer.drawPath(o), t.appendChild(i), e.svgObject.appendChild(t) }, e.prototype.calculateGridLinesPath = function (e) { for (var t, i, n, r, o = new v_, s = "", a = 0; a < e.length; a++)t = (o = e[a]).startPoint.x, i = o.startPoint.y, n = o.endPoint.x, r = o.endPoint.y, s = s + "M " + t + " " + i + " A " + (o.size ? o.size.width : 0) + " " + (o.size ? o.size.height : 0) + " " + (o.rotationAngle ? o.rotationAngle : 0) + " " + (o.isLargeArc ? 1 : 0) + " " + (o.sweepDirection ? o.sweepDirection : 0) + " " + n + " " + r + " "; return s.toString() }, e.prototype.measureHMinorGridLines = function (e) { var t, i, n, r, o, s, a, l, h, d, c, p, u, g, m = [], f = e.horizontalAxis.minorGridLines.count; this.minorHGridArcPoints = [], l = 2 * this.areaRadius; for (var y = 0; y < this.horizontalLabelCollections.length - 3; y++) { h = this.horizontalLabelCollections[y], d = this.horizontalLabelCollections[y + 1], u = (c = 2 * (h.radius - d.radius)) / (p = Math.floor(f / 100 * c)); for (var v = 0; v < p; v++)g = d.radius + v * u / 2, a = ("Impedance" === e.renderType ? this.circleLeftX + l - 2 * g : this.circleLeftX) + g, n = d.value > 5, m = this.calculateMinorArcStartEndPoints(d.value), "Impedance" === e.renderType ? (t = m[0], i = m[1]) : (t = m[1], i = m[0]), r = this.intersectingCirclePoints(t[0].centerX, t[0].centerY, t[0].radius, a, h.centerY, g, e.renderType), o = this.intersectingCirclePoints(i[0].centerX, i[0].centerY, i[0].radius, a, h.centerY, g, e.renderType), s = { width: g, height: g }, this.minorHGridArcPoints.push({ startPoint: r, endPoint: o, rotationAngle: 2 * Math.PI, sweepDirection: "Impedance" === e.renderType ? this.direction.counterclockwise : this.direction.clockwise, isLargeArc: n, size: s }) } }, e.prototype.measureRMinorGridLines = function (e) { var t, i, n, r, o, s, a, l, h, d, c, p, u, g, m, f = e.radialAxis.minorGridLines.count; o = Math.PI * (2 * this.areaRadius), s = t = "Impedance" === e.renderType ? this.circleCenterX + this.areaRadius : this.circleCenterX - this.areaRadius, a = this.circleCenterY, this.minorGridArcPoints = [], l = { x: s, y: a }; for (var y = 2; y < this.labelCollections.length - 3; y++) { h = this.labelCollections[y], d = this.labelCollections[y + 1], "Impedance" === e.renderType ? (i = 360 === d.angle ? 0 : d.angle, n = Math.abs(i - h.angle)) : (i = 360 === h.angle ? 0 : h.angle, n = Math.abs(i - d.angle)), p = o / 360 * n, g = n / (u = Math.floor(f / 100 * p)), m = d.value > 0 ? d.value : h.value, r = this.minorGridLineArcIntersectCircle(Math.abs(m)); for (var v = 1; v < u; v++) { var w = g * v + (360 === h.angle ? i : h.angle), b = this.circlePointPosition(this.circleCenterX, this.circleCenterY, w, this.areaRadius), C = this.arcRadius(l, b, w), L = w > 180 ? this.circleCenterY - C : this.circleCenterY + C, M = this.intersectingCirclePoints(t, L, C, r[0].centerX, r[0].centerY, r[0].radius, e.renderType), S = { x: M.x, y: M.y }, x = { x: b.x, y: b.y }; c = { width: C, height: C }; var T = h.value >= 0 ? this.direction.clockwise : this.direction.counterclockwise; this.minorGridArcPoints.push({ startPoint: S, endPoint: x, rotationAngle: 2 * Math.PI, sweepDirection: T, isLargeArc: !1, size: c }) } } }, e.prototype.minorGridLineArcIntersectCircle = function (e) { var t; return t = e >= 3 ? 20 : e >= 1.5 ? 10 : e >= .6 ? 3 : 2, this.horizontalLabelCollections.filter(function (e) { return e.value === t }) }, e.prototype.circlePointPosition = function (e, t, i, n) { var r, o, s; return s = i * (Math.PI / 180), r = e + n * Math.cos(s), o = t + n * Math.sin(s), { x: r, y: o } }, e.prototype.setLabelsInsidePosition = function (e, t, i, n) { var r = t, o = i; return 0 === e || 360 === e ? (r -= n.width, o -= n.height / 2) : 90 === e ? (r -= n.width, o += n.height / 8) : 180 === e ? o += n.height : 270 === e ? o += n.height / 2 : e > 0 && e <= 20 ? r -= n.width : e > 20 && e <= 60 ? (r -= n.width + n.width / 2, o += n.height / 2) : e > 60 && e < 90 ? (r -= n.width + n.width / 4, o += n.height / 4) : e > 90 && e <= 135 ? (r -= n.width / 2, o += n.height / 16) : e > 135 && e <= 150 ? (r += n.width / 2, o += n.height / 2) : e > 150 && e < 180 ? (r += n.width / 2, o += n.height) : e > 180 && e <= 210 ? (r += n.width / 6, o += n.height / 6) : e > 210 && e < 240 ? o += n.height / 4 : e > 225 && e < 270 ? o += n.height / 3 : e > 270 && e <= 300 ? (r -= n.width + n.width / 4, o += n.height / 4) : e > 300 && e <= 330 ? (r -= n.width + n.width / 3, o += n.height / 4) : e > 330 && e <= 340 ? (r -= n.width + n.width / 2, o += n.height / 4) : e > 340 && (r -= n.width, o += n.height / 8), { x: r, y: o } }, e.prototype.setLabelsOutsidePosition = function (e, t, i, n) { var r = t, o = i; return 90 === e ? (r -= n.width / 2, o += n.height) : 180 === e ? (r -= n.width + 5, o -= n.height / 4) : 270 === e ? (r -= n.width / 2, o -= n.height / 4) : 360 === e ? (r += 5, o -= n.height / 2) : e > 0 && e <= 30 ? (r += n.width / 4, o += n.height / 8) : e > 30 && e <= 60 ? (r += n.width / 2, o += n.height / 4) : e > 60 && e <= 90 ? (r -= n.width / 2, o += n.height) : e > 90 && e <= 135 ? (r -= n.width, o += n.height) : e > 135 && e <= 180 ? (r -= n.width + n.width / 4, o += n.height / 4) : e > 180 && e <= 210 ? (r -= n.width + n.width / 4, o -= n.height / 4) : e > 210 && e <= 270 ? (r -= n.width, o -= n.height / 4) : e > 270 && e <= 340 ? o -= n.height / 4 : e > 340 && (o += n.height / 4, r += n.width / 6), { x: r, y: o } }, e.prototype.arcRadius = function (e, t, i) { var n, r, o, s, a, l; return l = i > 180 ? 90 * Math.PI / 180 : 270 * Math.PI / 180, n = (t.x - e.x) / 2, r = (t.y - e.y) / 2, o = (Math.cos(l) * r - Math.sin(l) * n) / (Math.cos(l) * n + Math.sin(l) * r), s = (r - n * o) / Math.sin(l), a = e.y + Math.sin(l) * s, Math.abs(e.y - a) }, e }(), eY = function () { function e() { } return e.prototype.drawMarker = function (e, t, i, n) { if (e.series[t].marker.visible) { var r = e.series[t].marker, o = e.series[t].points.length - 1, s = r.width, a = r.height, l = r.shape, h = e.renderer.createGroup({ id: e.element.id + "_svg_series" + t + "_Marker" }); i.appendChild(h); for (var d = r.border.width, c = r.border.color, p = r.opacity, u = r.fill ? r.fill : e.series[t].fill || e.seriesColors[t % e.seriesColors.length], g = 0; g < o + 1; g++) { var m = n[g].point, f = g, y = new p_(e.element.id + "_Series" + t + "_Points" + f + "_Marker" + f, u, c, d, p); h.appendChild(this.drawSymbol(l, r.imageUrl, m, new y_(s, a), y, e)) } } }, e.prototype.drawSymbol = function (e, t, i, n, r, o) { var s, a, l, h, d = e.toLowerCase(), c = { color: r.borderColor, width: r.borderWidth }, p = r.opacity, u = i.x, g = i.y, m = Math.sqrt(n.height * n.height + n.width * n.width) / 2; switch (d) { case "circle": a = new L_(r.id, r.fill, c, p, i.x, i.y, m, null), s = o.renderer.drawCircle(a); break; case "rectangle": h = "M " + (u + -n.width / 2) + " " + (g + -n.height / 2) + " L " + (u + n.width / 2) + " " + (g + -n.height / 2) + " L " + (u + n.width / 2) + " " + (g + n.height / 2) + " L " + (u + -n.width / 2) + " " + (g + n.height / 2) + " L " + (u + -n.width / 2) + " " + (g + -n.height / 2) + "z", l = new b_(r.id, r.fill, c.width, c.color, p, "", h), s = o.renderer.drawPath(l); break; case "triangle": h = "M " + (u + -n.width / 2) + " " + (g + n.height / 2) + " L " + u + " " + (g + -n.height / 2) + " L " + (u + n.width / 2) + " " + (g + n.height / 2) + " L " + (u + -n.width / 2) + " " + (g + n.height / 2) + "z", l = new b_(r.id, r.fill, c.width, c.color, p, "", h), s = o.renderer.drawPath(l); break; case "diamond": h = "M " + (u + -n.width / 2) + " " + g + " L " + u + " " + (g + -n.height / 2) + " L " + (u + n.width / 2) + " " + g + " L " + u + " " + (g + n.height / 2) + " L " + (u + -n.width / 2) + " " + g + "z", l = new b_(r.id, r.fill, c.width, c.color, p, "", h), s = o.renderer.drawPath(l); break; case "pentagon": for (var f = 0; f <= 5; f++) { var y = m * Math.cos(Math.PI / 180 * (72 * f)), v = m * Math.sin(Math.PI / 180 * (72 * f)); h = 0 === f ? "M " + (u + y) + " " + (g + v) + " " : h.concat("L " + (u + y) + " " + (g + v) + " ") } h = h.concat("Z"), l = new b_(r.id, r.fill, c.width, c.color, p, "", h), s = o.renderer.drawPath(l) }return s }, e }(), tY = function () { function e() { this.textOptions = [], this.labelOptions = [], this.allPoints = [] } return e.prototype.drawDataLabel = function (e, t, i, n, r) { this.textOptions = [], this.allPoints = []; for (var o, s, a, l, h, d = e.margin, c = e.series[t].marker, p = c.dataLabel, u = p.textStyle, g = n.length, m = 0; m < g; m++) { h = Sr(l = e.series[t].points[m].reactance.toString(), u); var f = (s = n[m].point).x - h.width / 2, y = s.y - (h.height + c.height + d.top), v = h.width + d.left / 2 + d.right / 2, w = h.height + d.top / 2 + d.bottom / 2; o = m, a = new u_, a = { textX: f + d.left / 2, textY: y + w / 2 + d.top / 2, x: f, y: y }, this.textOptions[m] = { id: e.element.id + "_Series" + t + "_Points" + o + "_dataLabel_displayText" + m, x: a.textX, y: a.textY, fill: "black", text: l, font: u, xPosition: f, yPosition: y, width: v, height: w, location: s, labelOptions: a, visible: !0, connectorFlag: null } } var b = new f_; b.textOptions = this.textOptions, this.labelOptions.push(b), this.drawDatalabelSymbol(e, t, p, i, r, n) }, e.prototype.calculateSmartLabels = function (e, t) { for (var i = e.textOptions.length, n = 0; n < i; n++)this.allPoints[this.allPoints.length] = e.textOptions[n], this.connectorFlag = !1, this.compareDataLabels(n, e, 0, t), this.labelOptions[t].textOptions[n] = e.textOptions[n], this.labelOptions[t].textOptions[n].connectorFlag = this.connectorFlag }, e.prototype.compareDataLabels = function (e, t, i, n) { for (var r, o, s = this.allPoints.length, a = 0; a < s; a++)if (o = this.allPoints[a], r = this.allPoints[s - 1], this.isCollide(o, r)) switch (this.connectorFlag = !0, i) { case 0: this.resetValues(r), this.prevLabel = o, r.xPosition = this.prevLabel.xPosition + (this.prevLabel.width / 2 + r.width / 2 + 10), r.x = r.xPosition + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 1: this.resetValues(r), r.xPosition = this.prevLabel.xPosition + this.prevLabel.width / 2 + r.width / 2 + 10, r.x = r.xPosition + 5, r.yPosition = r.location.y + r.height / 2 + 5, r.y = r.yPosition + r.height / 2 + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 2: this.resetValues(r), r.yPosition = r.location.y + r.height / 2 + 5, r.y = r.yPosition + r.height / 2 + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 3: this.resetValues(r), r.xPosition = this.prevLabel.xPosition - this.prevLabel.width / 2 - r.width / 2 - 10, r.x = r.xPosition + 5, r.yPosition = r.height / 2 + r.location.y + 5, r.y = r.yPosition + r.height / 2 + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 4: this.resetValues(r), r.xPosition = this.prevLabel.xPosition - this.prevLabel.width / 2 - r.width / 2 - 10, r.x = r.xPosition + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 5: this.resetValues(r), r.xPosition = this.prevLabel.xPosition - this.prevLabel.width / 2 - r.width / 2 - 10, r.x = r.xPosition + 5, r.yPosition = this.prevLabel.yPosition - r.height - 10, r.y = r.yPosition + r.height / 2 + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 6: this.resetValues(r), r.yPosition = this.prevLabel.yPosition - (r.height + 10), r.y = r.yPosition + r.height / 2 + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 7: this.resetValues(r), r.xPosition = this.prevLabel.xPosition + this.prevLabel.width / 2 + r.width / 2 + 10, r.x = r.xPosition + 5, r.yPosition = this.prevLabel.yPosition - r.height - 10, r.y = r.yPosition + r.height / 2 + 5, i += 1, this.compareDataLabels(e, t, i, n); break; case 8: i = 0, this.compareDataLabels(e, t, i, n) } }, e.prototype.isCollide = function (e, t) { var i = !1; return e !== t && (i = !(e.y + e.height < t.y || e.y > t.y + t.height || e.x + e.width / 2 < t.x - t.width / 2 || e.x - e.width / 2 > t.x + t.width / 2)), i }, e.prototype.resetValues = function (e) { e.xPosition = e.labelOptions.x, e.yPosition = e.labelOptions.y, e.x = e.labelOptions.textX, e.y = e.labelOptions.textY }, e.prototype.drawConnectorLines = function (e, t, i, n, r) { n.xPosition, n.yPosition; var o, s = n.location; o = s.y > n.y ? n.y : n.y - n.height / 2; var a = "M " + s.x + " " + s.y + " L " + n.x + " " + o, l = e.series[t].marker.dataLabel.connectorLine, h = l.color ? l.color : e.series[t].fill || e.seriesColors[t % e.seriesColors.length], d = new b_(e.element.id + "_dataLabelConnectorLine_series" + t + "_point" + i, "none", l.width, h, 1, "none", a), c = e.renderer.drawPath(d); r.appendChild(c) }, e.prototype.drawDatalabelSymbol = function (e, t, i, n, r, o) { for (var s = 0; s < e.series[t].points.length; s++)if (i.template) { var a = M("div", { id: e.element.id + "_seriesIndex_" + t + "_Label_Template_Group", className: "template", styles: "position: absolute;" }); document.getElementById(e.element.id + "_Secondary_Element").appendChild(a); var l = void 0, h = i.template + "_seriesIndex" + t + "_pointIndex" + s + e.element.id, d = { point: e.series[t].points[s].reactance }; l = br(wr(i.template)(e), h, d), a.appendChild(l), l.style.left = o[s].point.x - l.offsetWidth / 2 + "px", l.style.top = o[s].point.y - l.offsetHeight - e.series[t].marker.height / 2 + "px"; pe("_seriesIndex" + t + "_pointIndex" + s + e.element.id + "Template", "Template"); var c = parseInt(l.style.left, 10), p = parseInt(l.style.top, 10), u = l.offsetWidth, g = l.offsetHeight, m = o[s].point, f = { textX: c, textY: p, x: c, y: p }; this.labelOptions[t].textOptions[s] = { id: h, x: c, y: p, fill: "black", text: "", font: i.textStyle, xPosition: c, yPosition: p, width: u, height: g, location: m, labelOptions: f, visible: !0, connectorFlag: null } } }, e }(), iY = function () { function e() { this.xValues = [], this.yValues = [], this.pointsRegion = [], this.lineSegments = [], this.location = [], this.dataLabel = new tY } return e.prototype.processData = function (e) { var t = e.dataSource, i = e.resistance, n = e.reactance; e.points = []; for (var r = 0; r < t.length; r++)e.points.push({ resistance: t[r][i], reactance: t[r][n] }) }, e.prototype.draw = function (e, t, i) { for (var n, r, o, s, a = e.renderer.createGroup({ id: e.element.id + "_svg_seriesCollections" }), l = e.series, h = l.length, d = t.areaRadius, c = 0; c < h; c++) { var p = c; l[c].dataSource && l[c].resistance && l[c].reactance && this.processData(l[c]), this.pointsRegion[c] = [], this.location[c] = []; for (var u = 0; u < l[c].points.length; u++)this.xValues[u] = l[c].points[u].resistance, this.yValues[u] = l[c].points[u].reactance; for (var g = t.circleCenterX, m = t.circleCenterY, f = 2 * t.areaRadius, y = m, v = { x: g + ("Impedance" === e.renderType ? d : -d), y: m }.x, w = 0; w < l[c].points.length; w++) { var b = this.xValues[w], C = f * (1 / (b + 1)) / 2, L = this.yValues[w], M = Math.abs(1 / L * f / 2); "Impedance" === e.renderType ? (r = L > 0 ? m - M : m + M, n = t.circleLeftX + f - C) : (r = L < 0 ? m - M : m + M, n = t.circleLeftX + C), o = t.intersectingCirclePoints(v, r, M, n, y, C, e.renderType); var S = Cr(); Math.abs(L) < S && (o.x = "Impedance" === e.renderType ? n - C : n + C, o.y = m), this.pointsRegion[c][w] = new h_, this.pointsRegion[c][w] = { point: o, x: b, y: L }, this.location[c][w] = { x: o.x, y: o.y } } for (var x = 0; x < l[c].points.length - 1; x++)s = x + 1, this.lineSegments[x] = new l_, this.lineSegments[x] = { x1: this.xValues[x], y1: this.yValues[x], x2: this.xValues[s], y2: this.yValues[s] }; e.svgObject.appendChild(a), this.drawSeries(e, p, a, i) } for (u = 0; u < e.series.length; u++)if (e.series[u].enableSmartLabels && e.series[u].marker.dataLabel.visible) { var T = e.renderer.createGroup({ id: e.element.id + "_svg_series" + u + "_Datalabel_connectorLines" }); (A = document.getElementById(e.element.id + "_svg_seriesCollection" + u)) && A.appendChild(T), this.dataLabel.calculateSmartLabels(this.dataLabel.labelOptions[u], u); for (w = 0; w < e.series[u].points.length; w++) { ((j = this.dataLabel.labelOptions[u].textOptions[w]).xPosition + j.width > e.chartArea.x + e.chartArea.width || j.xPosition < e.chartArea.x || j.yPosition < e.chartArea.y || j.yPosition + j.height > e.chartArea.y + e.chartArea.height) && (this.dataLabel.labelOptions[u].textOptions[w].connectorFlag = !1, this.dataLabel.labelOptions[u].textOptions[w].visible = !1), j.connectorFlag && this.dataLabel.drawConnectorLines(e, u, w, j, T) } } for (u = 0; u < e.series.length; u++) { var D = e.series[u].marker.dataLabel; if (e.series[u].marker.dataLabel.visible) { var A = document.getElementById(e.element.id + "_svg_seriesCollection" + u), E = e.renderer.createGroup({ id: e.element.id + "_svg_series" + u + "_Datalabel" }); A && A.appendChild(E); for (w = 0; w < e.series[u].points.length; w++) { var j = this.dataLabel.labelOptions[u].textOptions[w]; if (!D.template && j.visible) { var I = new m_; I = this.dataLabel.labelOptions[u].textOptions[w]; var k = D.textStyle, P = I.xPosition, N = I.yPosition, O = e.element.id + "_Series" + u + "_Points" + w + "_dataLabel_symbol" + w, R = D.fill ? D.fill : e.series[u].fill || e.seriesColors[u % e.seriesColors.length], z = e.series[u].marker.dataLabel.border, B = new C_(O, R, z, I.opacity, new i_(P, N, I.width, I.height)), F = e.renderer.drawRectangle(B); E.appendChild(F); var V = { text: I.text, x: I.x, y: I.y, seriesIndex: u, pointIndex: w, name: "textRender", cancel: !1 }; e.trigger("textRender", V); var W = Er(new M_(I.id, V.x, V.y, "start", V.text), k, k.color ? k.color : e.themeStyle.dataLabel, E); E.appendChild(W) } else if (D.template) { var H = document.getElementById(D.template + "_seriesIndex" + u + "_pointIndex" + w + e.element.id); H.style.left = this.dataLabel.labelOptions[u].textOptions[w].xPosition + "px", H.style.top = this.dataLabel.labelOptions[u].textOptions[w].yPosition + "px" } } } } for (x = 0; x < e.series.length; x++)if (e.series[x].enableAnimation && e.animateSeries) { e.series[x].marker.dataLabel.template && this.animateDataLabelTemplate(x, e); A = document.getElementById(e.element.id + "_svg_seriesCollection" + x); this.performAnimation(e, A, x) } }, e.prototype.drawSeries = function (e, t, i, n) { var r = e.renderer.createGroup({ id: e.element.id + "_svg_seriesCollection" + t, "clip-path": "url(#" + e.element.id + "_ChartSeriesClipRect_" + t + ")" }); r.setAttribute("visibility", e.series[t].visibility), i.appendChild(r); for (var o, s, a = "", l = (e.series[t].marker, e.series[t].points.length - 1), h = 0; h < l; h++) { var d = this.pointsRegion[t][h].point, c = this.pointsRegion[t][h + 1].point; a = a + "M " + d.x + " " + d.y + " L " + c.x + " " + c.y + " " } o = a.toString(); var p = e.series[t].fill || e.seriesColors[t % e.seriesColors.length], u = { text: e.series[t].name, fill: p, name: "seriesRender", cancel: !1 }; e.trigger("seriesRender", u); var g = new b_(e.element.id + "_series" + t + "_points", "none", e.series[t].width, u.fill, e.series[t].opacity, "none", o); this.clipRectElement = e.renderer.drawClipPath(new C_(e.element.id + "_ChartSeriesClipRect_" + t, "transparent", { width: 1, color: "Gray" }, 1, { x: n.x, y: n.y, width: e.availableSize.width, height: e.availableSize.height })), r.appendChild(this.clipRectElement); var m = e.renderer.createGroup({ id: e.element.id + "_svg" + t }); s = e.renderer.drawPath(g), m.appendChild(s), r.appendChild(m); (new eY).drawMarker(e, t, r, this.pointsRegion[t]), this.dataLabel.drawDataLabel(e, t, r, this.pointsRegion[t], n) }, e.prototype.animateDataLabelTemplate = function (e, t) { for (var i = t.series[e].points.length, n = parseFloat(t.series[e].animationDuration), r = 0; r < i; r++) { var o = document.getElementById(t.series[e].marker.dataLabel.template + "_seriesIndex" + e + "_pointIndex" + r + t.element.id); o.style.visibility = "hidden", Lr(t, o, 0, n, "FadeIn") } }, e.prototype.performAnimation = function (e, t, i) { var n, r = new fw({}), o = (document.getElementById("container_svg_seriesCollections"), t.childNodes[0].childNodes[0].childNodes[0]), s = Ar("Linear"), a = Ar("Reverse"), l = +o.getAttribute("width"), h = +o.getAttribute("x"); r.animate(o, { duration: parseFloat(e.series[i].animationDuration), progress: function (t) { "Impedance" === e.renderType ? (n = s(t.timeStamp - t.delay, 0, l, t.duration), o.setAttribute("width", n.toString())) : (n = a(t.timeStamp - t.delay, l, 0, t.duration), o.setAttribute("x", n.toString())) }, end: function (t) { "Impedance" === e.renderType ? o.setAttribute("width", l.toString()) : o.setAttribute("x", h.toString()); var i = { cancel: !1, name: "animationComplete", smithchart: e.isBlazor ? null : e }; e.trigger("animationComplete", i) } }) }, e.prototype.getLocation = function (e, t) { var i, n; return i = this.location[e][t].x, n = this.location[e][t].y, { x: i, y: n } }, e }(), nY = function () { function e(e) { this.control = e } return e.prototype.print = function (e) { this.smithchartPrint = window.open("", "print", "height=" + window.outerHeight + ",width=" + window.outerWidth + ",tabbar=no"), this.smithchartPrint.moveTo(0, 0), this.smithchartPrint.resizeTo(screen.availWidth, screen.availHeight); var t = { cancel: !1, htmlContent: this.getHTMLContent(e), name: "beforePrint" }; this.control.trigger("beforePrint", t), t.cancel || y(t.htmlContent, this.smithchartPrint) }, e.prototype.getHTMLContent = function (e) { var t = M("div"); return e ? e instanceof Array ? e.forEach(function (e) { t.appendChild(yr(e).cloneNode(!0)) }) : e instanceof Element ? t.appendChild(e.cloneNode(!0)) : t.appendChild(yr(e).cloneNode(!0)) : t.appendChild(this.control.element.cloneNode(!0)), t }, e.prototype.export = function (e, t, i) { var n = this, r = M("canvas", { id: "ej2-canvas", attrs: { width: this.control.availableSize.width.toString(), height: this.control.availableSize.height.toString() } }), o = !(uw.userAgent.toString().indexOf("HeadlessChrome") > -1); i = d(i) ? LP.Landscape : i; var s = '<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">' + this.control.svgObject.outerHTML + "</svg>", a = window.URL.createObjectURL(new Blob("SVG" === e ? [s] : [(new XMLSerializer).serializeToString(this.control.svgObject)], { type: "image/svg+xml" })); if ("SVG" === e) this.triggerDownload(t, e, a, o); else { var l = new Image, h = r.getContext("2d"); l.onload = function () { if (h.drawImage(l, 0, 0), window.URL.revokeObjectURL(a), "PDF" === e) { var s = new rO, d = r.toDataURL("image/jpeg").replace("image/jpeg", "image/octet-stream"); s.pageSettings.orientation = i, d = d.slice(d.indexOf(",") + 1), s.pages.add().graphics.drawImage(new tN(d), 0, 0, n.control.availableSize.width - 60, n.control.availableSize.height), o && (s.save(t + ".pdf"), s.destroy()) } else n.triggerDownload(t, e, r.toDataURL("image/png").replace("image/png", "image/octet-stream"), o) }, l.src = a } }, e.prototype.triggerDownload = function (e, t, i, n) { M("a", { attrs: { download: e + "." + t.toLocaleLowerCase(), href: i } }).dispatchEvent(new MouseEvent(n ? "click" : "move", { view: window, bubbles: !1, cancelable: !0 })) }, e }(), rY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), oY = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, sY = function (e) { function t(t, i) { return e.call(this, t, i) || this } return rY(t, e), t.prototype.getModuleName = function () { return "smithchart" }, t.prototype.getPersistData = function () { return "" }, t.prototype.createChartSvg = function () { this.removeSvg(), fr(this) }, t.prototype.renderTitle = function (e, t, i) { var n, r, o = e.font ? e.font : e.textStyle, s = Sr(e.text, o), a = e.textAlignment, l = e.text, h = d(e.maximumWidth) ? Math.abs(this.margin.left + this.margin.right - this.availableSize.width) : e.maximumWidth, c = s.width > h; n = s.width > this.availableSize.width ? this.margin.left + this.border.width : "Center" === a ? this.availableSize.width / 2 - s.width / 2 : "Near" === a ? this.margin.left + this.elementSpacing + this.border.width : this.availableSize.width - s.width - (this.margin.right + this.elementSpacing + this.border.width), r = this.margin.top + s.height / 2 + this.elementSpacing, e.enableTrim && c && (s = Sr(l = vr(h, e.text, o), o)), i = this.renderer.createGroup({ id: this.element.id + "_Title_Group" }); var p = { text: l, x: n, y: r, name: "titleRender", cancel: !1 }; this.trigger("titleRender", p); var u = new M_(this.element.id + "_Smithchart_" + t, p.x, p.y, "start", p.text); o.fontFamily = this.themeStyle.fontFamily || e.textStyle.fontFamily, o.size = this.themeStyle.fontSize || e.textStyle.size; Er(u, o, this.themeStyle.chartTitle, i).setAttribute("aria-label", e.description || e.text); var g = { x: n, y: r, textSize: s }; this.svgObject.appendChild(i), "" !== e.subtitle.text && e.subtitle.visible && this.renderSubtitle(e, t, s, this.availableSize, g, i) }, t.prototype.renderSubtitle = function (e, t, i, n, r, o) { var s, a, l, h = e.subtitle.textStyle, c = e.subtitle, p = Sr(c.text, h), u = c.text, g = d(c.maximumWidth) ? .75 * this.bounds.width : c.maximumWidth; c.enableTrim && p.width > g && (u = vr(g, c.text, h)), s = "Far" === e.subtitle.textAlignment ? r.x + r.textSize.width : "Near" === e.subtitle.textAlignment ? r.x : r.x + r.textSize.width / 2, a = r.y + 2 * this.elementSpacing, l = "Far" === e.subtitle.textAlignment ? "end" : "Near" === e.subtitle.textAlignment ? "start" : "middle"; var m = { text: u, x: s, y: a, name: "subtitleRender", cancel: !1 }; this.trigger("subtitleRender", m); var f = Er(new M_(this.element.id + "_Smithchart_" + t, m.x, m.y, l, m.text), h, this.themeStyle.chartTitle, o); f.setAttribute("aria-label", c.description || c.text), o.appendChild(f) }, t.prototype.renderBorder = function () { var e = this.border; this.theme.toLowerCase(); this.background = this.background ? this.background : this.themeStyle.background; var t = new C_(this.element.id + "_SmithchartBorder", this.background, e, 1, new i_(e.width / 2, e.width / 2, this.availableSize.width - e.width, this.availableSize.height - e.width)); this.svgObject.appendChild(this.renderer.drawRectangle(t)) }, t.prototype.onPropertyChanged = function (e, t) { this.animateSeries = !1; for (var i = !1, n = 0, r = Object.keys(e); n < r.length; n++) { switch (r[n]) { case "background": case "border": case "series": i = !0; break; case "size": this.createChartSvg(), i = !0; break; case "theme": this.animateSeries = !0, i = !0 } } i && this.render() }, t.prototype.preRender = function () { this.isBlazor = window.Blazor, this.trigger("load", { smithchart: this }), this.unWireEVents(), this.initPrivateVariable(), this.wireEVents() }, t.prototype.initPrivateVariable = function () { this.animateSeries = !0 }, t.prototype.setTheme = function () { this.themeStyle = function (e) { var t; switch (e.toLowerCase()) { case "highcontrast": t = { axisLabel: "#ffffff", axisLine: "#ffffff", majorGridLine: "#BFBFBF", minorGridLine: "#969696", chartTitle: "#ffffff", legendLabel: "#ffffff", background: "#000000", areaBorder: "#ffffff", tooltipFill: "#ffffff", dataLabel: "#ffffff", tooltipBoldLabel: "#000000", tooltipLightLabel: "#000000", tooltipHeaderLine: "#969696" }; break; case "materialdark": case "bootstrapdark": case "fabricdark": t = { axisLabel: "#DADADA", axisLine: " #6F6C6C", majorGridLine: "#414040", minorGridLine: "#514F4F", chartTitle: "#ffffff", legendLabel: "#DADADA", background: "#000000", areaBorder: " #9A9A9A", tooltipFill: "#F4F4F4", dataLabel: "#DADADA", tooltipBoldLabel: "#282727", tooltipLightLabel: "#333232", tooltipHeaderLine: "#9A9A9A" }; break; case "bootstrap4": t = { axisLabel: "#212529", axisLine: "#ADB5BD", majorGridLine: "#CED4DA", minorGridLine: "#DEE2E6", chartTitle: "#212529", legendLabel: "#212529", background: "#FFFFFF", areaBorder: "#DEE2E6", tooltipFill: "#000000", dataLabel: "#212529", tooltipBoldLabel: "#FFFFFF", tooltipLightLabel: "#FFFFFF", tooltipHeaderLine: "#FFFFFF", fontFamily: "HelveticaNeue-Medium", fontSize: "16px", labelFontFamily: "HelveticaNeue", tooltipFillOpacity: 1, tooltipTextOpacity: .9 }; break; default: t = { axisLabel: "#686868", axisLine: "#b5b5b5", majorGridLine: "#dbdbdb", minorGridLine: "#eaeaea", chartTitle: "#424242", legendLabel: "#353535", background: "#FFFFFF", areaBorder: "Gray", tooltipFill: "rgba(0, 8, 22, 0.75)", dataLabel: "#424242", tooltipBoldLabel: "#ffffff", tooltipLightLabel: "#dbdbdb", tooltipHeaderLine: "#ffffff" } }return t }(this.theme), this.seriesColors = function (e) { var t; switch (e.toLowerCase()) { case "highcontrastlight": t = ["#79ECE4", "#E98272", "#DFE6B6", "#C6E773", "#BA98FF", "#FA83C3", "#00C27A", "#43ACEF", "#D681EF", "#D8BC6E"]; break; case "fabric": t = ["#4472c4", "#ed7d31", "#ffc000", "#70ad47", "#5b9bd5", "#c1c1c1", "#6f6fe2", "#e269ae", "#9e480e", "#997300"]; break; case "bootstrap": t = ["#a16ee5", "#f7ce69", "#55a5c2", "#7ddf1e", "#ff6ea6", "#7953ac", "#b99b4f", "#407c92", "#5ea716", "#b91c52"]; break; default: t = ["#00bdae", "#404041", "#357cd2", "#e56590", "#f8b883", "#70ad47", "#dd8abd", "#7f84e8", "#7bb4eb", "#ea7a57"] }return t }(this.theme) }, t.prototype.render = function () { this.createChartSvg(), this.element.appendChild(this.svgObject), this.setTheme(), this.createSecondaryElement(), this.renderBorder(), this.smithchartLegendModule && this.legendSettings.visible && (this.legendBounds = this.smithchartLegendModule.renderLegend(this)), this.legendBounds = this.legendBounds ? this.legendBounds : { x: 0, y: 0, width: 0, height: 0 }; var e = new K_; this.bounds = e.calculateAreaBounds(this, this.title, this.legendBounds), "" !== this.title.text && this.title.visible && this.renderTitle(this.title, "title", null); var t = new $_; t.renderArea(this, this.bounds), this.seriesrender = new iY, this.seriesrender.draw(this, t, this.bounds), this.trigger("loaded", { smithchart: this.isBlazor ? null : this }) }, t.prototype.createSecondaryElement = function () { if (d(document.getElementById(this.element.id + "_Secondary_Element"))) { var e = M("div", { id: this.element.id + "_Secondary_Element", styles: "position: absolute;z-index:1;" }); this.element.appendChild(e); var t = this.element.getBoundingClientRect(), i = document.getElementById(this.element.id + "_svg"); if (i) { var n = i.getBoundingClientRect(); e.style.left = Math.max(n.left - t.left, 0) + "px", e.style.top = Math.max(n.top - t.top, 0) + "px" } } else xr(this.element.id + "_Secondary_Element") }, t.prototype.destroy = function () { this.unWireEVents(), e.prototype.destroy.call(this), this.element.classList.remove("e-smithchart") }, t.prototype.wireEVents = function () { Kv.add(this.element, "click", this.smithchartOnClick, this), Kv.add(this.element, uw.touchMoveEvent, this.mouseMove, this), Kv.add(this.element, uw.touchEndEvent, this.mouseEnd, this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.smithchartOnResize.bind(this)) }, t.prototype.mouseMove = function (e) { "touchmove" === e.type ? this.isTouch = !0 : this.isTouch = "touch" === e.pointerType || "2" === e.pointerType || this.isTouch, this.tooltipRenderModule && !this.isTouch && this.tooltipRenderModule.smithchartMouseMove(this, e) }, t.prototype.mouseEnd = function (e) { if ("touchend" === e.type ? this.isTouch = !0 : this.isTouch = "touch" === e.pointerType || "2" === e.pointerType, this.tooltipRenderModule && this.isTouch) { var t = this.tooltipRenderModule.smithchartMouseMove(this, e); t && (this.fadeoutTo = setTimeout(function () { t.fadeOut() }, 2e3)) } }, t.prototype.smithchartOnClick = function (e) { var t = e.target.id, i = document.getElementById(t).parentElement; if ("containerlegendItem_Group" === document.getElementById(i.id).parentElement.id && this.legendSettings.toggleVisibility) { for (var n = i.childNodes[1], r = i.childNodes[0], o = n.textContent, s = void 0, a = void 0, l = 0; l < this.smithchartLegendModule.legendSeries.length; l++)o === this.smithchartLegendModule.legendSeries[l].text && (s = this.smithchartLegendModule.legendSeries[l].seriesIndex, a = this.smithchartLegendModule.legendSeries[l].fill); var h = document.getElementById(this.element.id + "_svg_seriesCollection" + s); "visible" === h.getAttribute("visibility") ? (r.setAttribute("fill", "gray"), h.setAttribute("visibility", "hidden"), this.series[s].visibility = "hidden") : (r.setAttribute("fill", a), h.setAttribute("visibility", "visible"), this.series[s].visibility = "visible") } }, t.prototype.unWireEVents = function () { Kv.remove(this.element, "click", this.smithchartOnClick), Kv.remove(this.element, uw.touchMoveEvent, this.mouseMove), Kv.remove(this.element, uw.touchEndEvent, this.mouseEnd), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.smithchartOnResize) }, t.prototype.print = function (e) { new nY(this).print(e) }, t.prototype.export = function (e, t, i) { new nY(this).export(e, t, i) }, t.prototype.smithchartOnResize = function (e) { var t = this; return this.animateSeries = !1, this.resizeTo && clearTimeout(this.resizeTo), this.resizeTo = setTimeout(function () { t.render() }, 500), !1 }, t.prototype.requiredModules = function () { var e = []; this.legendSettings.visible && e.push({ member: "SmithchartLegend", args: [this] }); for (var t = 0; t < this.series.length; t++)if (this.series[t].tooltip.visible) { e.push({ member: "TooltipRender", args: [this] }); break } return e }, t.prototype.removeSvg = function () { xr(this.element.id + "_Secondary_Element"); if (this.svgObject) { for (; this.svgObject.childNodes.length > 0;)this.svgObject.removeChild(this.svgObject.firstChild); !this.svgObject.hasChildNodes() && this.svgObject.parentNode && k(this.svgObject) } }, oY([Y("Impedance")], t.prototype, "renderType", void 0), oY([Y("")], t.prototype, "width", void 0), oY([Y("")], t.prototype, "height", void 0), oY([Y("Material")], t.prototype, "theme", void 0), oY([U({}, e_)], t.prototype, "margin", void 0), oY([U({}, $H)], t.prototype, "font", void 0), oY([U({}, t_)], t.prototype, "border", void 0), oY([U({}, W_)], t.prototype, "title", void 0), oY([G([{}], Z_)], t.prototype, "series", void 0), oY([U({}, I_)], t.prototype, "legendSettings", void 0), oY([U({}, z_)], t.prototype, "horizontalAxis", void 0), oY([U({}, z_)], t.prototype, "radialAxis", void 0), oY([Y(null)], t.prototype, "background", void 0), oY([Y(10)], t.prototype, "elementSpacing", void 0), oY([Y(1)], t.prototype, "radius", void 0), oY([X()], t.prototype, "beforePrint", void 0), oY([X()], t.prototype, "animationComplete", void 0), oY([X()], t.prototype, "load", void 0), oY([X()], t.prototype, "loaded", void 0), oY([X()], t.prototype, "legendRender", void 0), oY([X()], t.prototype, "titleRender", void 0), oY([X()], t.prototype, "subtitleRender", void 0), oY([X()], t.prototype, "textRender", void 0), oY([X()], t.prototype, "axisLabelRender", void 0), oY([X()], t.prototype, "seriesRender", void 0), t = oY([J], t) }(Kw), aY = function () { function e() { } return e.prototype.smithchartMouseMove = function (e, t) { var i, n, r; "touchend" === t.type || "touchmove" === t.type ? (n = (i = t).changedTouches[0].clientX, r = i.changedTouches[0].clientY, this.tooltipElement = void 0) : (r = t.clientY, n = t.clientX), this.setMouseXY(e, n, r); for (var o = 0; o < e.series.length; o++) { var s = e.series[o], a = o, l = new c_; if ((l = this.closestPointXY(e, this.mouseX, this.mouseY, s, a)).location && s.tooltip.visible && "visible" === s.visibility) { this.createTooltip(e, t, l.index, a, s); break } this.tooltipElement && this.tooltipElement.enable && !s.tooltip.template ? (this.tooltipElement.fadeOut(), this.tooltipElement.enable = !1) : s.tooltip.template && this.tooltipElement.fadeOut() } return this.tooltipElement }, e.prototype.setMouseXY = function (e, t, i) { var n = e.element.getBoundingClientRect(), r = document.getElementById(e.element.id + "_svg").getBoundingClientRect(); this.mouseX = t - n.left - Math.max(r.left - n.left, 0), this.mouseY = i - n.top - Math.max(r.top - n.top, 0) }, e.prototype.createTooltip = function (e, t, i, n, r) { var o = r.points[i].resistance, s = r.points[i].reactance, a = [o + " : <b>" + s + "</b>"], l = e.series[n].marker.height / 2, h = document.getElementById(e.element.id + "_smithchart_tooltip_div"); d(h) && (h = M("div", { id: e.element.id + "_smithchart_tooltip_div", styles: "pointer-events: none; position: absolute;z-index:1;" }), document.getElementById(e.element.id + "_Secondary_Element").appendChild(h)), this.tooltipElement = new pj({ enable: !0, header: "<b>" + r.name + "</b>", content: a, border: r.tooltip.border, fill: e.themeStyle.tooltipFill, data: { reactance: s }, template: r.tooltip.template, location: { x: this.locationX + e.element.offsetLeft, y: this.locationY - l + e.element.offsetTop }, shared: !1, areaBounds: new i_(e.bounds.x, e.bounds.y, e.bounds.width, e.bounds.height), palette: [r.fill || e.seriesColors[n % e.seriesColors.length]], shapes: ["Circle"], availableSize: e.availableSize, theme: e.theme }), this.tooltipElement.opacity = e.themeStyle.tooltipFillOpacity || this.tooltipElement.opacity, this.tooltipElement.textStyle.fontFamily = e.themeStyle.fontFamily || "Roboto, Segoe UI, Noto, Sans-serif", this.tooltipElement.textStyle.opacity = e.themeStyle.tooltipTextOpacity || this.tooltipElement.textStyle.opacity, this.tooltipElement.appendTo(h), pe(h.id + "Template", "Template") }, e.prototype.closestPointXY = function (e, t, i, n, r) { for (var o, s, a, l = 0; l < n.points.length; l++) { s = e.seriesrender.getLocation(r, l), this.locationX = s.x, this.locationY = s.y, o = l; var h = t - s.x, d = i - s.y; if (Math.abs(Math.sqrt(h * h + d * d)) < n.marker.width) { a = s, o = l; break } } return { location: a, index: o } }, e.prototype.getModuleName = function () { return "TooltipRender" }, e.prototype.destroy = function (e) { }, e }(), lY = function () { function e() { this.legendSeries = [] } return e.prototype.renderLegend = function (e) { return this.calculateLegendBounds(e), this._drawLegend(e), this.legendActualBounds }, e.prototype.calculateLegendBounds = function (e) { this.legendSeries = []; var t, i, n = e.legendSettings, r = n.height, o = n.width, s = n.itemPadding > 0 ? n.itemPadding : 0, a = n.position.toLowerCase(), l = n.title.textStyle, h = 0, d = 0, c = 0, p = e.availableSize.width - (4 * e.elementSpacing - 2 * n.border.width + 2 * e.border.width), u = (e.availableSize.height, e.elementSpacing, n.border.width, e.border.width, n.rowCount), g = n.columnCount, m = Sr(e.legendSettings.title.text, l), f = 0, y = 0, v = 0, w = 0, b = 0, C = e.series.length; if (e.legendSettings.visible && 0 !== C) { "bottom" === a || "top" === a || "custom" === a ? (u && g && u <= g ? u = C / g : null == u && null != g ? u = C / g : null == u && null == g && (u = 1), u && (t = Math.ceil(C / u))) : (u && g && u <= g ? g = C / u : null != u && null == g ? g = C / u : null == u && null == g && (g = 1), g && (t = g)); for (var L = 0; L < C; L++) { this.legendSeries.push({ text: e.series[L].name ? e.series[L].name : "series" + L, seriesIndex: L, shape: e.legendSettings.shape, fill: e.series[L].fill || e.seriesColors[L % e.seriesColors.length], bounds: null }); var M = this._getLegendSize(e, this.legendSeries[L]); h = Math.max(M.width, h), d = Math.max(M.height, d), this.legendSeries[L].bounds = { width: h, height: d }, b += 1, v = v + h + s, w = Math.max(d, w), "top" !== a && "bottom" !== a && "custom" !== a || v > p && (v -= M.width + s, f = Math.max(f, v), v = M.width + s, y = y + w + s), b !== t && L !== C - 1 || (f = Math.max(f, v), c = y = y + w + s, b = 0, w = 0, v = 0) } i = { x: 0, y: 0, width: m.width > f - s ? m.width + 20 + s : f + 20 - 2 * e.border.width, height: c + e.elementSpacing } } this.legendActualBounds = i, null != o && (this.legendActualBounds.width = o), null != r && (this.legendActualBounds.height = r) }, e.prototype._getLegendSize = function (e, t) { var i = e.legendSettings, n = i.itemStyle.width, r = i.itemStyle.height, o = Sr(t.text, i.textStyle); return { width: n + o.width + i.shapePadding, height: Math.max(r, o.height) } }, e.prototype._drawLegend = function (e) { var t, i, n = e.legendSettings, r = n.position.toLowerCase(), o = n.alignment, s = this.legendActualBounds, a = 0, l = e.title.font ? e.title.font : e.title.textStyle, h = Sr(e.title.text, l).height, d = Sr(e.title.subtitle.text, e.title.subtitle.textStyle).height, c = e.elementSpacing, p = h + d + c + e.margin.top, u = n.itemPadding > 0 ? n.itemPadding : 0, g = e.availableSize.width, m = e.availableSize.height, f = n.border.width, y = 0, v = Sr(n.title.text, n.title.textStyle).height, w = e.border.width, b = g - 2 * w, C = m - 2 * w; if (s.height += v, "custom" !== r) { switch (r) { case "bottom": s.y = C - (s.height + f + c); break; case "top": s.y = w + p; break; case "right": s.x = b - s.width - 2 * c; break; case "left": s.x = w + 2 * c }if ("left" === r || "right" === r) switch (o) { case "Center": s.y = C / 2 - (s.height + 2 * f) / 2 + c / 2; break; case "Near": s.y = w + 2 * c + p; break; case "Far": s.y = C - (s.height + f) - 2 * c } else switch (o) { case "Center": s.x = b / 2 - (s.width + 2 * f) / 2 + c / 2; break; case "Near": s.x = w + 2 * c; break; case "Far": s.x = b - (s.width + f) - 2 * c } } else s.y = n.location.y < C ? n.location.y : 0, s.x = n.location.x < b ? n.location.x : 0; if ("bottom" === r || "top" === r) for (var L = 0; L < this.legendSeries.length; L++)if ((y += this.legendSeries[L].bounds.width + u) > b) { s.x = b / 2 - (s.width + 2 * f) / 2 + c / 2; break } var M = e.renderer.createGroup({ id: e.element.id + "_legend_group" }); e.svgObject.appendChild(M), this.legendItemGroup = e.renderer.createGroup({ id: e.element.id + "legendItem_Group" }); var S = t = c, x = i = c; "" !== n.title.text && n.title.visible && (M.appendChild(this.drawLegendTitle(e, n, s, M)), x = i = c + v); for (var T = 0; T < this.legendSeries.length; T++)!(n.rowCount < n.columnCount || n.rowCount === n.columnCount) || "top" !== r && "bottom" !== r && "custom" !== r ? (x + this.legendSeries[T].bounds.height + u + v + w > s.height + i && (x = i, S += a + u), this.legendGroup = this.drawLegendItem(e, n, this.legendSeries[T], T, S, x, s), M.appendChild(this.legendGroup), x += this.legendSeries[T].bounds.height + u, a = Math.max(a, this.legendSeries[T].bounds.width)) : (S + this.legendSeries[T].bounds.width > s.width + t && (S = c, x += this.legendSeries[T].bounds.height + u), this.legendGroup = this.drawLegendItem(e, n, this.legendSeries[T], T, S, x, s), M.appendChild(this.legendGroup), S += this.legendSeries[T].bounds.width + u); M.setAttribute("transform", "translate(" + s.x.toString() + "," + s.y.toString() + ")"), this.drawLegendBorder(M, e, n, s) }, e.prototype.drawLegendBorder = function (e, t, i, n) { var r = new C_(t.element.id + "_svg_legendRect", "none", i.border, 1, new i_(0, 0, n.width, n.height)); e.appendChild(t.renderer.drawRectangle(r)) }, e.prototype.drawLegendTitle = function (e, t, i, n) { var r = e.elementSpacing, o = Sr(t.title.text, t.title.textStyle), s = o.width, a = o.height, l = t.title.textAlignment, h = 0, d = i.width, c = r + a / 2; switch (l) { case "Far": h = d - s - h; break; case "Center": h = d / 2 - s / 2 }h < 0 && (h = 0, d = s), d < s + h && (d = s + h); var p = Er(new M_(e.element.id + "_LegendTitleText", h, c, "start", t.title.text), t.title.textStyle, e.themeStyle.legendLabel, n); return p.setAttribute("aria-label", t.title.description || t.title.text), p }, e.prototype.drawLegendItem = function (e, t, i, n, r, o, s) { var a, l, h = t.itemStyle; t.itemPadding; Math.sqrt(h.width * h.width + h.height * h.height), l = Sr(i.text, t.textStyle).height, a = { x: r + h.width / 2, y: o + (l > h.height ? l : h.height) / 2 }; var d = e.renderer.createGroup({ id: e.element.id + "_svg_Legend" + n.toString() }); d.style.cursor = t.toggleVisibility ? "pointer" : "default"; var c = { text: i.text, fill: i.fill, shape: i.shape, name: "legendRender", cancel: !1 }; e.trigger("legendRender", c); var p = this.drawLegendShape(e, i, a.x, a.y, n, t, c); d.appendChild(p); var u = new M_(e.element.id + "_LegendItemText" + n.toString(), a.x + h.width / 2 + t.shapePadding, a.y + l / 4, "start", c.text); t.textStyle.fontFamily = e.themeStyle.fontFamily || t.textStyle.fontFamily, t.textStyle.size = e.themeStyle.fontSize || t.textStyle.size; var g = Er(u, t.textStyle, e.themeStyle.legendLabel, d); return g.setAttribute("aria-label", t.description || "Click to show or hide the " + u.text + " series"), d.appendChild(g), this.legendItemGroup.appendChild(d), this.legendItemGroup }, e.prototype.drawLegendShape = function (e, t, i, n, r, o, s) { var a, l, h, d, c = o.itemStyle, p = c.width, u = c.height, g = i + -p / 2, m = { color: c.border.color, width: c.border.width }, f = "visible" === e.series[r].visibility ? s.fill : "grey", y = s.shape.toLowerCase(), v = Math.sqrt(u * u + p * p) / 2; switch (y) { case "circle": l = new L_(e.element.id + "_svg_LegendItemShape" + r.toString(), f, m, 1, i, n, v, null), a = e.renderer.drawCircle(l); break; case "rectangle": d = "M " + g + " " + (n + -u / 2) + " L " + (p / 2 + i) + " " + (n + -u / 2) + " L " + (i + p / 2) + " " + (n + u / 2) + " L " + g + " " + (n + u / 2) + " L " + g + " " + (n + -u / 2) + " z", h = new b_(e.element.id + "_svg_LegendItemShape" + r.toString(), f, m.width, m.color, 1, "", d), a = e.renderer.drawPath(h); break; case "diamond": d = "M " + g + " " + n + " L " + i + " " + (n + -u / 2) + " L " + (p / 2 + i) + " " + n + " L " + i + " " + (n + u / 2) + " L " + g + " " + n + " z", h = new b_(e.element.id + "_svg_LegendItemShape" + r.toString(), f, m.width, m.color, 1, "", d), a = e.renderer.drawPath(h); break; case "pentagon": for (var w = 0; w <= 5; w++) { var b = v * Math.cos(Math.PI / 180 * (72 * w)), C = v * Math.sin(Math.PI / 180 * (72 * w)); d = 0 === w ? "M " + (b + i) + " " + (n + C) + " " : d.concat("L " + (i + b) + " " + (n + C) + " ") } d = d.concat("Z"), h = new b_(e.element.id + "_svg_LegendItemShape" + r.toString(), f, m.width, m.color, 1, "", d), a = e.renderer.drawPath(h); break; case "triangle": d = "M " + g + " " + (u / 2 + n) + " L " + i + " " + (n + -u / 2) + " L " + (i + p / 2) + " " + (n + u / 2) + " L " + g + " " + (n + u / 2) + " Z", h = new b_(e.element.id + "_svg_LegendItemShape" + r.toString(), f, m.width, m.color, 1, "", d), a = e.renderer.drawPath(h) }return a }, e.prototype.getModuleName = function () { return "SmithchartLegend" }, e.prototype.destroy = function (e) { }, e }(), hY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dY = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, cY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y("")], t.prototype, "color", void 0), dY([Y(0)], t.prototype, "width", void 0), t }(ww), pY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(null)], t.prototype, "size", void 0), dY([Y(null)], t.prototype, "color", void 0), dY([Y("Roboto, Segoe UI, Noto, Sans-serif")], t.prototype, "fontFamily", void 0), dY([Y(null)], t.prototype, "fontWeight", void 0), dY([Y(null)], t.prototype, "fontStyle", void 0), dY([Y(1)], t.prototype, "opacity", void 0), t }(ww), uY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(!1)], t.prototype, "visible", void 0), dY([Y(null)], t.prototype, "color", void 0), dY([Y(1)], t.prototype, "width", void 0), t }(ww), gY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(!1)], t.prototype, "visible", void 0), dY([Y("")], t.prototype, "fill", void 0), dY([Y("")], t.prototype, "template", void 0), dY([Y("")], t.prototype, "format", void 0), dY([U({ color: "#cccccc", width: .5 }, cY)], t.prototype, "border", void 0), dY([U({ size: "13px", fontWeight: "Normal", fontStyle: "Normal", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" }, pY)], t.prototype, "textStyle", void 0), dY([U({}, uY)], t.prototype, "trackLineSettings", void 0), t }(ww), mY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y("transparent")], t.prototype, "background", void 0), dY([U({}, cY)], t.prototype, "border", void 0), t }(ww), fY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(!1)], t.prototype, "visible", void 0), dY([Y(null)], t.prototype, "color", void 0), dY([Y("")], t.prototype, "dashArray", void 0), dY([Y(1)], t.prototype, "width", void 0), dY([Y(1)], t.prototype, "opacity", void 0), t }(ww), yY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(null)], t.prototype, "startRange", void 0), dY([Y(null)], t.prototype, "endRange", void 0), dY([Y(null)], t.prototype, "color", void 0), dY([Y(1)], t.prototype, "opacity", void 0), t }(ww), vY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(null)], t.prototype, "minX", void 0), dY([Y(null)], t.prototype, "maxX", void 0), dY([Y(null)], t.prototype, "minY", void 0), dY([Y(null)], t.prototype, "maxY", void 0), dY([Y(0)], t.prototype, "value", void 0), dY([U({}, fY)], t.prototype, "lineSettings", void 0), t }(ww), wY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(5)], t.prototype, "left", void 0), dY([Y(5)], t.prototype, "right", void 0), dY([Y(5)], t.prototype, "bottom", void 0), dY([Y(5)], t.prototype, "top", void 0), t }(ww), bY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y([])], t.prototype, "visible", void 0), dY([Y(1)], t.prototype, "opacity", void 0), dY([Y(5)], t.prototype, "size", void 0), dY([Y("#00bdae")], t.prototype, "fill", void 0), dY([U({ width: 1 }, cY)], t.prototype, "border", void 0), t }(ww), CY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y(0)], t.prototype, "x", void 0), dY([Y(0)], t.prototype, "y", void 0), t }(ww), LY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return hY(t, e), dY([Y([])], t.prototype, "visible", void 0), dY([Y(1)], t.prototype, "opacity", void 0), dY([Y("transparent")], t.prototype, "fill", void 0), dY([Y("")], t.prototype, "format", void 0), dY([U({ color: "transparent", width: 0 }, cY)], t.prototype, "border", void 0), dY([U({ size: "14px", fontWeight: "Medium", fontStyle: "Medium", fontFamily: "Roboto, Segoe UI, Noto, Sans-serif" }, pY)], t.prototype, "textStyle", void 0), dY([U({}, CY)], t.prototype, "offset", void 0), dY([Y("None")], t.prototype, "edgeLabelMode", void 0), t }(ww), MY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SY = function () { return function (e, t) { this.width = e, this.height = t } }(), xY = function () { return function (e, t, i, n) { this.x = e, this.y = t, this.width = i, this.height = n } }(), TY = function () { return function (e, t, i, n, r, o, s) { this.id = e, this.fill = t, this.opacity = r, this["stroke-width"] = i, this.stroke = n, this.d = s, this["stroke-dasharray"] = o } }(), DY = function (e) { function t(t, i, n, r, o, s, a, l, h) { void 0 === s && (s = 0), void 0 === a && (a = 0), void 0 === l && (l = 0), void 0 === h && (h = 0); var d = e.call(this, t, i, n.width, n.color, r) || this; return d.rect = o, d.topLeft = s, d.topRight = a, d.bottomLeft = l, d.bottomRight = h, d } return MY(t, e), t }(TY), AY = function (e) { function t(t, i, n, r, o, s, a, l) { var h = e.call(this, t, i, n.width, n.color, r) || this; return h.cy = s, h.cx = o, h.r = a, h["stroke-dasharray"] = l, h } return MY(t, e), t }(TY), EY = function () { return function (e, t, i, n, r, o, s) { void 0 === s && (s = ""), this.transform = "", this.baseLine = "auto", this.id = e, this.x = t, this.y = i, this.anchor = n, this.text = r, this.transform = s, this.baseLine = o } }(), jY = function () { function e(e) { this.sparkline = e } return e.prototype.processData = function () { var e = this.sparkline.dataSource; !d(e) && e.length && (isNaN(this.sparkline.dataSource[0]) && "Numeric" !== this.sparkline.valueType ? this["process" + this.sparkline.valueType]() : (e = this.sparkline.enableRtl ? e.reverse() : e, this.sparkline.sparklineData = e), this.axisCalculation()) }, e.prototype.processDataManager = function () { var e, t, i = this; if (this.sparkline.dataSource instanceof aA) { e = this.sparkline.dataSource, t = this.sparkline.query instanceof GD ? this.sparkline.query : new GD; e.executeQuery(t).then(function (e) { i.sparkline.setProperties({ dataSource: e.result }, !0), i.sparkline.sparklineData = i.sparkline.dataSource, i.sparkline.processSparklineData() }) } else this.sparkline.processSparklineData() }, e.prototype.processCategory = function (e, t, i) { var n = this; void 0 === e && (e = this.sparkline.dataSource), void 0 === t && (t = this.sparkline.xName), void 0 === i && (i = this.sparkline.yName); var r = [], o = []; e.forEach(function (e, s) { -1 === o.indexOf(e[t]) && o.push(e[t]); var a = {}; a[n.sparkline.xName] = o.indexOf(e[t]), a[n.sparkline.yName] = e[i], r.push(a) }), this.sparkline.sparklineData = r }, e.prototype.processDateTime = function (e, t, i) { void 0 === e && (e = this.sparkline.dataSource), void 0 === t && (t = this.sparkline.xName), void 0 === i && (i = this.sparkline.yName); var n = []; e.forEach(function (e, r) { var o = {}; o[t] = e[t].getTime(), o[i] = e[i], n.push(o) }), this.sparkline.sparklineData = n }, e.prototype.renderSeries = function () { var e = this.sparkline; this.clipId = e.element.id + "_sparkline_clip_path", this.drawAxis(); var t = { name: "seriesRendering", cancel: !1, lineWidth: e.lineWidth, border: e.border, fill: e.fill, sparkline: e }; if (e.trigger(t.name, t), this.visiblePoints && !t.cancel) { if ("Pie" !== e.type && "WinLoss" !== e.type && e.rangeBandSettings.length) { for (var i = this.sparkline.renderer.createGroup({ id: this.sparkline.element.id + "_sparkline_rangeband_g" }), n = 0; n < e.rangeBandSettings.length; n++)(e.axisSettings.minY <= e.rangeBandSettings[n].startRange || e.axisSettings.maxY >= e.rangeBandSettings[n].endRange) && this.rangeBand(e.rangeBandSettings[n], i, n); this.sparkline.svgObject.appendChild(i) } this["render" + e.type](this.visiblePoints, t), this.renderMarker(this.visiblePoints), this.renderLabel(this.visiblePoints) } }, e.prototype.rangeBand = function (e, t, i) { var n = this.sparkline, r = n.availableSize.height - 2 * n.padding.top, o = n.availableSize.width - 2 * n.padding.left, s = e.startRange, a = e.endRange, l = r - r / this.unitY * (s - this.min) + n.padding.top, h = r - r / this.unitY * (a - this.min) + n.padding.top, d = e.color || this.sparkline.sparkTheme.rangeBandColor; h > r + n.padding.top ? h = r + n.padding.top : h < 0 + n.padding.top && (h = 0 + n.padding.top), l > r + n.padding.top ? l = r + n.padding.top : l < 0 + n.padding.top && (l = 0 + n.padding.top); var c = "M " + n.padding.left + " " + l + " L " + (o + n.padding.left) + " " + l + " L " + (o + n.padding.left) + " " + h + " L " + n.padding.left + " " + h + " Z ", p = { id: n.element.id + "_rangeBand_" + i, fill: d, opacity: e.opacity, stroke: "transparent", "stroke-width": n.lineWidth, d: c, "stroke-dasharray": "" }; Or(this.sparkline, p, t) }, e.prototype.renderLine = function (e, t) { var i = this.sparkline, n = this.sparkline.renderer.createGroup({ id: i.element.id + "_sparkline_g", "clip-path": "url(#" + this.clipId + ")" }), r = this.sparkline.fill; r = "#00bdae" === this.sparkline.fill && "Bootstrap4" === this.sparkline.theme ? this.sparkline.sparkTheme.axisLineColor : r; for (var o = new TY(i.element.id + "_sparkline_line", "transparent", t.lineWidth, r, i.opacity), s = "", a = 0, l = e.length; a < l; a++)0 === a && (s = "M " + e[0].x + " " + e[a].y + " "), s += "L " + e[a].x + " " + e[a].y + " "; o.d = s, Or(this.sparkline, o, n), this.sparkline.svgObject.appendChild(n) }, e.prototype.renderPie = function (e, t) { var i, n, r, o, s = this.sparkline, a = s.availableSize.height - (s.padding.top + s.padding.bottom), l = s.availableSize.width - (s.padding.left + s.padding.right), d = a <= l ? a / 2 : l / 2, c = s.availableSize.width / 2, p = s.availableSize.height / 2, u = 0, g = t.border.color, m = s.opacity, f = t.border.width, y = s.palette.length ? s.palette : ["#00bdae", "#404041", "#357cd2", "#e56590", "#f8b883", "#70ad47", "#dd8abd", "#7f84e8", "#7bb4eb", "#ea7a57"], v = this.sparkline.renderer.createGroup({ id: s.element.id + "_sparkline_g" }), w = h([], [], e); if (s.highPointColor || s.lowPointColor) { var b = w.map(function (e) { return e.yVal }); r = Math.min.apply(null, b), o = Math.max.apply(null, b) } this.negativePointIndexes = []; for (var C = 0, L = 90, M = void 0, S = void 0; C < e.length; C++) { M = (L += u) + (u = e[C].degree), i = (L - 90) * Math.PI / 180, n = (M - 90) * Math.PI / 180, e[C].stAng = i, e[C].endAng = n, S = u < 180 ? "0" : "1"; var x = e[C].coordinates = { sX: c + d * Math.cos(i), sY: p + d * Math.sin(i), eX: c + d * Math.cos(n), eY: p + d * Math.sin(n) }, T = "M " + c + " " + p + " L " + x.eX + " " + x.eY + " A " + d + " " + d + " 0 " + S + ",0 " + x.sX + " " + x.sY + " Z", D = { id: s.element.id + "_sparkline_pie_" + C, opacity: m, fill: y[C % y.length], stroke: g, "stroke-width": f, d: T, "stroke-dasharray": "" }; this.getPieSpecialPoint(e[C], s, D, C, o, r, e.length); var A = this.triggerPointRender("pointRendering", C, D.fill, { color: g, width: f }); if (D.fill = A.fill, D.stroke = A.border.color, D["stroke-width"] = A.border.width, !A.cancel) { Or(this.sparkline, D, v).setAttribute("aria-label", s.dataSource[C][s.xName] + " : " + e[C].yVal) } var E = n - i, j = { x: c + d / 2 * Math.cos(i + E / 2), y: p + d / 2 * Math.sin(i + E / 2) }; e[C].location.x = j.x, e[C].location.y = j.y } this.sparkline.svgObject.appendChild(v) }, e.prototype.getPieSpecialPoint = function (e, t, i, n, r, o, s) { e.yVal < 0 && t.negativePointColor && (i.fill = t.negativePointColor, this.negativePointIndexes.push(n)), 0 === n && t.startPointColor ? (i.fill = t.startPointColor, this.startPointIndex = n) : n === s - 1 && t.endPointColor && (i.fill = t.endPointColor, this.endPointIndex = n), e.yVal === r && t.highPointColor ? (i.fill = t.highPointColor, this.highPointIndex = n) : e.yVal === o && t.lowPointColor && (i.fill = t.lowPointColor, this.lowPointIndex = n) }, e.prototype.renderArea = function (e, t) { for (var i = this.sparkline, n = this.sparkline.renderer.createGroup({ id: i.element.id + "_sparkline_g", "clip-path": "url(#" + this.clipId + ")" }), r = new TY(i.element.id + "_sparkline_area", t.fill, 0, "transparent", i.opacity), o = "", s = "", a = 0, l = e.length; a < l; a++)0 !== a ? s += "L " + e[a].x + " " + e[a].y + " " : (o = "M " + e[a].x + " " + this.axisHeight + " ", s = "M " + e[a].x + " " + e[a].y + " "), o += "L " + e[a].x + " " + e[a].y + " ", a === l - 1 && (o += "L " + e[a].x + " " + this.axisHeight + " Z"); r.d = o, Or(this.sparkline, r, n), r = new TY(i.element.id + "_sparkline_area_str", "transparent", t.border.width, t.border.color, i.opacity, "", s), Or(this.sparkline, r, n), this.sparkline.svgObject.appendChild(n) }, e.prototype.renderColumn = function (e, t) { var i, n, r = this.sparkline, o = h([], [], e), s = this.sparkline.renderer.createGroup({ id: r.element.id + "_sparkline_g", "clip-path": "url(#" + this.clipId + ")" }); if (this.sparkline.highPointColor || this.sparkline.lowPointColor) { var a = o.map(function (e) { return e.markerPosition }); n = Math.min.apply(null, a), i = Math.max.apply(null, a) } var l, d = r.element.id + "_sparkline_column_", c = new DY(d, "", t.border, r.opacity, null), p = r.palette.length, u = e.length; this.negativePointIndexes = []; for (var g = 0; g < u; g++) { l = e[g], c.id = d + g, c.fill = p ? r.palette[g % p] : t.fill, c.rect = new xY(l.x, l.y, l.width, l.height), this.getSpecialPoint(!0, l, r, c, g, n, i, u), l.location.y = l.markerPosition <= this.axisHeight ? l.y : l.y + l.height, l.location.x = l.x + l.width / 2, c.stroke = t.border.color ? t.border.color : c.fill; var m = this.triggerPointRender("pointRendering", g, c.fill, { color: c.stroke, width: t.border.width }); if (c.fill = m.fill, c.stroke = m.border.color, c["stroke-width"] = m.border.width, !m.cancel) { Nr(r, c, s).setAttribute("aria-label", r.dataSource[g][r.xName] + " : " + e[g].yVal) } } this.sparkline.svgObject.appendChild(s) }, e.prototype.renderWinLoss = function (e, t) { for (var i, n = this.sparkline, r = this.sparkline.renderer.createGroup({ id: n.element.id + "_sparkline_g", "clip-path": "url(#" + this.clipId + ")" }), o = n.element.id + "_sparkline_winloss_", s = new DY(o, "", t.border, n.opacity, null), a = e.length, l = n.palette.length, h = 0; h < a; h++) { i = e[h], s.id = o + h, s.fill = l ? n.palette[h % l] : i.yVal === this.axisValue ? this.sparkline.tiePointColor || "#a216f3" : i.yVal > this.axisValue ? t.fill : n.negativePointColor || "#e20f07", s.stroke = t.border.color ? t.border.color : s.fill, s.rect = new xY(i.x, i.y, i.width, i.height), i.location.x = i.x + i.width / 2, i.location.y = i.yVal >= this.axisValue ? i.y : i.y + i.height; var d = this.triggerPointRender("pointRendering", h, s.fill, { color: s.stroke, width: t.border.width }); if (s.fill = d.fill, s.stroke = d.border.color, s["stroke-width"] = d.border.width, !d.cancel) { Nr(n, s, r).setAttribute("aria-label", n.dataSource[h][n.xName] + " : " + e[h].yVal) } } this.sparkline.svgObject.appendChild(r) }, e.prototype.renderMarker = function (e) { var t = this.sparkline, i = t.markerSettings; if ("Pie" !== t.type && "WinLoss" !== t.type && i.visible.length) { var n, r, o, s = h([], [], e), a = this.sparkline.renderer.createGroup({ id: t.element.id + "_sparkline_marker_g", "clip-path": "url(#" + this.clipId + ")" }), l = t.element.id + "_sparkline_marker_", d = new AY("", i.fill, i.border, i.opacity, 0, 0, i.size / 2, ""), c = i.visible.join(); if (c.toLowerCase().indexOf("high") > -1 || c.toLowerCase().indexOf("low") > -1) { var p = s.map(function (e) { return e.markerPosition }); r = Math.min.apply(null, p), o = Math.max.apply(null, p) } this.negativePointIndexes = []; for (var u = 0, g = e.length; u < g; u++) { n = e[u], d.id = l + u, d.cx = n.location.x, d.cy = n.location.y, d.fill = i.fill; var m = c.toLowerCase().indexOf("all") > -1; m = this.getSpecialPoint(m, n, t, d, u, r, o, g, c.toLowerCase()), d.stroke = i.border.color || d.fill; var f = { name: "markerRendering", cancel: !1, border: { color: d.stroke, width: i.border.width }, fill: d.fill, pointIndex: u, sparkline: this.sparkline, x: d.cx, y: d.cy, size: i.size }; if (this.sparkline.trigger(f.name, f), m && !f.cancel) { d.fill = f.fill, d.stroke = f.border.color, d["stroke-width"] = f.border.width, d.r = f.size / 2; Pr(t, d, a).setAttribute("aria-label", t.dataSource[u][t.xName] + " : " + e[u].yVal) } } this.sparkline.svgObject.appendChild(a) } }, e.prototype.getSpecialPoint = function (e, t, i, n, r, o, s, a, l) { return void 0 === l && (l = ""), t.markerPosition > this.axisHeight && (n.fill = i.negativePointColor || n.fill, this.negativePointIndexes.push(r), e = e || l.indexOf("negative") > -1), 0 === r ? (n.fill = i.startPointColor || n.fill, this.startPointIndex = r, e = e || l.indexOf("start") > -1) : r === a - 1 && (n.fill = i.endPointColor || n.fill, this.endPointIndex = r, e = e || l.indexOf("end") > -1), t.markerPosition === o ? (n.fill = i.highPointColor || n.fill, this.highPointIndex = r, e = e || l.indexOf("high") > -1) : t.markerPosition === s && (n.fill = i.lowPointColor || n.fill, this.lowPointIndex = r, e = e || l.indexOf("low") > -1), e }, e.prototype.renderLabel = function (e) { var t = this.sparkline, i = t.dataLabelSettings, n = i.textStyle.color || t.sparkTheme.dataLabelColor; if ("WinLoss" !== t.type && i.visible.length) { var r, o, s, a = h([], [], e), l = t.element.id + "_sparkline_label_", d = this.sparkline.renderer.createGroup({ id: t.element.id + "_sparkline_label_g", style: "pointer-events: none;" }), c = l + "text_", p = l + "rect_", u = new EY("", 0, 0, "middle", "", "middle"), g = i.textStyle, m = a.map(function (e) { return e.markerPosition }), f = Math.min.apply(null, m), y = Math.max.apply(null, m), v = "transparent" !== i.fill || i.border.width ? 2 : 0, w = Rr("sparkline_measure_text", g), b = new DY("", i.fill, i.border, i.opacity, null); g.fontFamily = t.sparkTheme.labelFontFamily || g.fontFamily; for (var C = 0, L = e.length; C < L; C++) { o = e[C], u.id = c + C, u.x = o.location.x + i.offset.x, u.y = ("Pie" === t.type ? o.location.y : o.markerPosition > this.axisHeight ? o.location.y + w.height / 2 + 1 + v : o.location.y - w.height / 2 - 1 - v) + i.offset.y, u.text = "" !== i.format ? this.formatter(i.format, this.sparkline.dataSource[C]) : o.yVal.toString(); var M = { name: "dataLabelRendering", cancel: !1, border: i.border, fill: i.fill, pointIndex: C, sparkline: this.sparkline, x: u.x, y: u.y, text: u.text, color: n }; this.sparkline.trigger(M.name, M), w = Rr(M.text, g), u.text = M.text; var S = i.visible.join().toLowerCase().indexOf("all") > -1; S = this.getLabelVisible(S, o, C, i, L, f, y), s = this.arrangeLabelPosition(i.edgeLabelMode, S, M.x, C, L, w, v), S && !M.cancel && s.render && (b.id = p + C, b.fill = M.fill, b.stroke = M.border.color, b["stroke-width"] = M.border.width, u.x = s.x, u.y = M.y, b.rect = new xY(u.x - (w.width / 2 + v), u.y - v - w.height / 1.75, w.width + 2 * v, w.height + 2 * v), Nr(t, b, r = this.sparkline.renderer.createGroup({ id: l + "g" + C })), zr(u, g, M.color, r), d.appendChild(r)) } this.sparkline.svgObject.appendChild(d) } }, e.prototype.arrangeLabelPosition = function (e, t, i, n, r, o, s) { return "None" === e ? { x: i, render: t } : (0 === n && i - o.width / 2 - s <= 0 ? "Hide" === e ? t = !1 : i = this.sparkline.padding.left + s + o.width / 2 : n === r - 1 && i + o.width / 2 + s >= this.sparkline.availableSize.width && ("Hide" === e ? t = !1 : i -= o.width / 2 + s), { x: i, render: t }) }, e.prototype.getLabelVisible = function (e, t, i, n, r, o, s) { var a = n.visible.join().toLowerCase(); return t.markerPosition > this.axisHeight && (e = e || a.indexOf("negative") > -1), 0 === i ? e = e || a.indexOf("start") > -1 : i === r - 1 && (e = e || a.indexOf("end") > -1), t.markerPosition === o ? e = e || a.indexOf("high") > -1 : t.markerPosition === s && (e = e || a.indexOf("low") > -1), e }, e.prototype.formatter = function (e, t) { if (d(e)) return null; for (var i = 0, n = Object.keys(t); i < n.length; i++) { var r = n[i]; e = e.split("${" + r + "}").join(t[r]) } return e }, e.prototype.axisCalculation = function () { this.findRanges(this.sparkline.sparklineData) }, e.prototype.getInterval = function (e, t, i) { var n = 1, r = e[0][t], o = d(e[1]) ? void 0 : e[1][t]; if (!d(r) && !d(o)) { var s = []; h([], e).forEach(function (e) { d(e[t]) || s.push(e) }), s.sort(function (e, i) { return d(e[t]) || d(i[t]) ? 0 : e[t] - i[t] }), n = (s = this.sparkline.enableRtl ? s.reverse() : s)[1][t] - s[0][t] } return n }, e.prototype.findRanges = function (e) { var t, i, n, r, o, s = this.sparkline, a = e.length, l = 0, c = Array.isArray(e) && "object" != typeof e[0]; if (c) if ("Pie" === s.type) for (var p = 0; p < a; p++)l += Math.abs(e[p]); else t = Math.max.apply(null, e), i = Math.min.apply(null, e), n = 0, r = a - 1; else if ("Pie" === s.type) for (p = 0; p < a; p++)l += Math.abs(e[p][s.yName]); else { if (d(e[0][s.xName])) { var u = e.map(function (e) { return e[s.yName] }); t = Math.max.apply(null, u), i = Math.min.apply(null, u) } else t = (o = (o = h([], e)).sort(function (e, t) { return e[s.yName] - t[s.yName] }))[o.length - 1][s.yName], i = o[0][s.yName]; d(e[0][s.xName]) ? (n = 0, r = a - 1) : (o = o.sort(function (e, t) { return e[s.xName] - t[s.xName] }), r = (o = this.sparkline.enableRtl ? o.reverse() : o)[o.length - 1][s.xName], n = o[0][s.xName]) } var g, m, f, y, v, w = 0, b = s.padding, C = s.axisSettings, L = C.value; s.theme.toLowerCase(); if ("Pie" !== s.type) { this.maxLength = a, m = s.availableSize.height - (b.bottom + b.top), f = s.availableSize.width - (b.left + b.right), r = d(C.maxX) ? r : C.maxX, n = d(C.minX) ? n : C.minX, t = d(C.maxY) ? t : C.maxY, i = d(C.minY) ? i : C.minY; var M = C.lineSettings.color || this.sparkline.sparkTheme.axisLineColor, S = { name: "axisRendering", cancel: !1, sparkline: s, maxX: r, minX: n, maxY: t, minY: i, value: C.value, lineColor: M, lineWidth: C.lineSettings.width }; if (s.trigger("axisRendering", S), S.cancel) return void (this.visiblePoints = []); r = S.maxX, n = S.minX, t = S.maxY, i = S.minY, L = this.axisValue = S.value, this.axisColor = S.lineColor, this.axisWidth = S.lineWidth; var x = r - n, T = t - i; x = 0 === x ? 1 : x, T = 0 === T ? 1 : T, this.unitX = x, this.unitY = T, this.min = i, w = 0, y = m - m / T * -i, y = i < 0 && t <= 0 ? 0 : i < 0 && t > 0 ? y : m, L >= i && L <= t && (y = m - Math.round(m * ((L - i) / this.unitY))), this.axisHeight = y + b.top } var D, A, E = [], j = this.getInterval(e, s.xName, s.valueType); for (p = 0; p < a; p++)if (d(e[p][s.xName]) && d(e[p][s.yName]) && 0 !== e[p][s.yName] && c ? (D = p, A = e[p]) : d(e[p][s.xName]) ? (D = p, A = e[p][s.yName]) : (D = e[p][s.xName], A = e[p][s.yName]), !d(D) && !d(A)) { if ("Line" === s.type || "Area" === s.type) g = i !== t && 1 !== a ? m - Math.round(m * ((A - i) / this.unitY)) : b.top, v = { x: n !== r ? Math.round(f * ((D - n) / this.unitX)) : f / 2, y: g, markerPosition: g }; else if ("Column" === s.type || "WinLoss" === s.type) { var I = f / ((r - n) / j + 1); if (I -= 1, w = (D - n) / j * (I + 1) + .5, "WinLoss" === s.type) { v = { x: w, y: g = A > L ? m / 4 : A < L ? .5 * m : .5 * m - m / 40, height: A !== L ? m / 4 : m / 20, width: I, markerPosition: g > y ? y + Math.abs(g - y) : g } } else { var k = m / this.unitY * (A - i), P = A === i && A > L ? 1 !== a && 1 !== this.unitY ? m / this.unitY * (i / 2) : 1 | k : A === t && A < L && 1 !== a && 1 !== this.unitY ? m / this.unitY * (-t / 2) : k; v = { x: w, y: (g = Math.abs(m - P)) > y ? y : g, height: Math.abs(g - y), width: I, markerPosition: g > y ? y + Math.abs(g - y) : g } } } else "Pie" === s.type && (v = { percent: Math.abs(A) / l * 100, degree: Math.abs(A) / l * 360 }); "Pie" !== s.type && (v.x += b.left, v.y += b.top), "WinLoss" !== s.type && (v.markerPosition += b.top), v.location = { x: v.x, y: v.y }, v.xVal = D, v.yVal = A, E.push(v) } E.sort(function (e, t) { return e.x - t.x }), this.visiblePoints = E }, e.prototype.drawAxis = function () { var e = this.sparkline, t = this.axisHeight; if ("WinLoss" !== e.type && "Pie" !== e.type && e.axisSettings.lineSettings.visible) { var i = { id: e.element.id + "_Sparkline_XAxis", x1: e.padding.left, y1: t, x2: e.availableSize.width - e.padding.right, y2: t, stroke: this.axisColor, opacity: e.axisSettings.lineSettings.opacity, "stroke-dasharray": e.axisSettings.lineSettings.dashArray, "stroke-width": this.axisWidth, "clip-path": "url(#" + this.clipId + ")" }; e.svgObject.appendChild(e.renderer.drawLine(i)) } }, e.prototype.triggerPointRender = function (e, t, i, n) { var r = { name: e, cancel: !1, border: n, fill: i, sparkline: this.sparkline.isBlazor ? null : this.sparkline, pointIndex: t }; return this.sparkline.trigger(e, r), r }, e }(), IY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), kY = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, PY = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.isDevice = uw.isDevice, n } return IY(t, e), t.prototype.preRender = function () { this.isBlazor = window.Blazor, this.unWireEvents(), this.trigger("load", { sparkline: this }), this.sparkTheme = function (e) { var t; switch (e.toLowerCase()) { case "bootstrapdark": case "fabricdark": case "materialdark": case "highcontrast": t = { axisLineColor: "#ffffff", dataLabelColor: "#ffffff", rangeBandColor: "#ffffff", tooltipFill: "#ffffff", background: "#000000", tooltipFontColor: "#363F4C", trackerLineColor: "#ffffff" }; break; case "bootstrap4": t = { axisLineColor: "#6C757D", dataLabelColor: "#212529", rangeBandColor: "#212529", tooltipFill: "#000000", background: "#FFFFFF", tooltipFontColor: "#FFFFFF", trackerLineColor: "#212529", fontFamily: "HelveticaNeue-Medium", tooltipFillOpacity: 1, tooltipTextOpacity: .9, labelFontFamily: "HelveticaNeue" }; break; default: t = { axisLineColor: "#000000", dataLabelColor: "#424242", rangeBandColor: "#000000", background: "#FFFFFF", tooltipFill: "#363F4C", tooltipFontColor: "#ffffff", trackerLineColor: "#000000" } }return t }(this.theme), this.sparklineRenderer = new jY(this), this.createSVG(), this.wireEvents(), this.setCulture() }, t.prototype.render = function () { this.sparklineRenderer.processDataManager() }, t.prototype.processSparklineData = function () { this.sparklineRenderer.processData(), this.renderSparkline(), this.element.appendChild(this.svgObject), this.setSecondaryElementPosition(), this.trigger("loaded", { sparkline: this.isBlazor ? null : this }) }, t.prototype.renderSparkline = function () { this.renderBorder(), this.createDiv(), this.sparklineRenderer.renderSeries() }, t.prototype.createDiv = function () { var e = document.createElement("div"); e.id = this.element.id + "_Secondary_Element", e.setAttribute("style", "position: relative"), this.element.appendChild(e), this.element.style.display = "block", this.element.style.position = "relative" }, t.prototype.setSecondaryElementPosition = function () { var e = Br(this.element.id + "_Secondary_Element"); if (e) { var t = this.element.getBoundingClientRect(), i = Br(this.element.id + "_svg").getBoundingClientRect(); e.style.left = Math.max(i.left - t.left, 0) + "px", e.style.top = Math.max(i.top - t.top, 0) + "px" } }, t.prototype.renderBorder = function () { var e, t = this.containerArea.border.width; (t > 0 || "transparent" !== this.containerArea.background) && (e = new DY(this.element.id + "_SparklineBorder", this.sparkTheme.background, this.containerArea.border, 1, new xY(t / 2, t / 2, this.availableSize.width - t, this.availableSize.height - t)), this.svgObject.appendChild(Nr(this, e))); var i = this.padding; e = new DY(this.element.id + "_sparkline_clip_rect", "transparent", { color: "transparent", width: 0 }, 1, new xY(i.left, i.top, this.availableSize.width - (i.left + i.right), this.availableSize.height - (i.top + i.bottom))); var n = this.renderer.createClipPath({ id: this.element.id + "_sparkline_clip_path" }); Nr(this, e, n), this.svgObject.appendChild(n) }, t.prototype.createSVG = function () { this.removeSvg(), Ir(this) }, t.prototype.removeSvg = function () { if (this.svgObject) { for (; this.svgObject.childNodes.length > 0;)this.svgObject.removeChild(this.svgObject.firstChild); !this.svgObject.hasChildNodes() && this.svgObject.parentNode && k(this.svgObject) } !function (e) { var t = document.getElementById(e); t && k(t) }(this.element.id + "_Secondary_Element"), this.sparklineTooltipModule && this.sparklineTooltipModule.removeTooltipElements() }, t.prototype.setCulture = function () { this.intl = new Gw, this.localeObject = new pb(this.getModuleName(), this.defaultLocalConstants, this.locale) }, t.prototype.requiredModules = function () { var e = []; return (this.tooltipSettings.visible || this.tooltipSettings.trackLineSettings.visible) && e.push({ member: "SparklineTooltip", args: [this] }), e }, t.prototype.unWireEvents = function () { var e = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.remove(this.element, uw.touchMoveEvent, this.sparklineMove), Kv.remove(this.element, e, this.sparklineMouseLeave), Kv.remove(this.element, uw.touchEndEvent, this.sparklineMouseEnd), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.sparklineResize) }, t.prototype.wireEvents = function () { var e = uw.isPointer ? "pointerleave" : "mouseleave"; Kv.add(this.element, uw.touchMoveEvent, this.sparklineMove, this), Kv.add(this.element, "click", this.sparklineClick, this), Kv.add(this.element, e, this.sparklineMouseLeave, this), Kv.add(this.element, uw.touchEndEvent, this.sparklineMouseEnd, this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.sparklineResize.bind(this)), new yb(this.element) }, t.prototype.sparklineResize = function (e) { var t = this, i = { name: "resize", previousSize: this.availableSize, sparkline: this.isBlazor ? null : this, currentSize: new SY(0, 0) }; return this.resizeTo && clearTimeout(this.resizeTo), this.resizeTo = setTimeout(function () { t.isDestroyed ? clearTimeout(t.resizeTo) : (t.unWireEvents(), t.createSVG(), t.refreshing = !0, t.wireEvents(), i.currentSize = t.availableSize, t.trigger("resize", i), t.render()) }, 500), !1 }, t.prototype.sparklineMove = function (e) { this.setSparklineMouseXY(e), this.notify(uw.touchMoveEvent, e); var t = { name: "sparklineMouseMove", cancel: !1, sparkline: this.isBlazor ? null : this, event: e }; this.trigger(t.name, t); var i = this.isPointRegion(e); if (i.isPointRegion) { var n = { name: "pointRegionMouseMove", cancel: !1, event: e, sparkline: this.isBlazor ? null : this, pointIndex: i.pointIndex }; this.trigger(n.name, n) } return !1 }, t.prototype.sparklineClick = function (e) { this.setSparklineMouseXY(e); var t = { name: "sparklineMouseClick", cancel: !1, sparkline: this.isBlazor ? null : this, event: e }; this.trigger(t.name, t); var i = this.isPointRegion(e); if (i.isPointRegion) { var n = { name: "pointRegionMouseClick", cancel: !1, event: e, sparkline: this.isBlazor ? null : this, pointIndex: i.pointIndex }; this.trigger(n.name, n) } return !1 }, t.prototype.isPointRegion = function (e) { var t = this, i = this.element.id + "_", n = e.target.id.replace(i, "").split("_"); if (n[1] === this.type.toLowerCase()) { var r = parseInt(n[2], 10); return !d(r) && !isNaN(r) || "Line" !== this.type && "Area" !== this.type || this.sparklineRenderer.visiblePoints.forEach(function (e, i) { Fr(t.mouseX, t.mouseY, new xY(e.x - 5, e.y - 5, 10, 10)) && (r = i) }), { isPointRegion: !0, pointIndex: r } } return { isPointRegion: !1, pointIndex: null } }, t.prototype.sparklineMouseEnd = function (e) { return this.setSparklineMouseXY(e), this.notify(uw.touchEndEvent, e), !1 }, t.prototype.sparklineMouseLeave = function (e) { return this.setSparklineMouseXY(e), this.notify(uw.isPointer ? "pointerleave" : "mouseleave", e), !1 }, t.prototype.setSparklineMouseXY = function (e) { var t, i; if (e.type.indexOf("touch") > -1) { this.isTouch = !0; var n = e; i = n.changedTouches[0].clientX, t = n.changedTouches[0].clientY } else this.isTouch = "touch" === e.pointerType || "2" === e.pointerType, t = e.clientY, i = e.clientX; var r = this.element.getBoundingClientRect(), o = Br(this.element.id + "_svg").getBoundingClientRect(); this.mouseY = t - r.top - Math.max(o.top - r.top, 0), this.mouseX = i - r.left - Math.max(o.left - r.left, 0) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = !1, n = !1, r = 0, o = Object.keys(e); r < o.length; r++) { switch (o[r]) { case "xName": case "yName": case "dataSource": case "axisSettings": case "type": case "valueType": case "enableRtl": n = !0; break; case "border": case "markerSettings": case "dataLabelSettings": case "tooltipSettings": case "startPointColor": case "highPointColor": case "lowPointColor": case "endPointColor": case "negativePointColor": case "theme": i = !0 } } n ? (this.createSVG(), this.sparklineRenderer.processData(), this.refreshSparkline()) : i && (this.createSVG(), this.refreshSparkline()) }, t.prototype.refreshSparkline = function () { this.renderSparkline(), this.element.appendChild(this.svgObject), this.setSecondaryElementPosition() }, t.prototype.getModuleName = function () { return "sparkline" }, t.prototype.destroy = function () { e.prototype.destroy.call(this) }, t.prototype.getPersistData = function () { return "" }, kY([Y(null)], t.prototype, "width", void 0), kY([Y(null)], t.prototype, "height", void 0), kY([U({}, cY)], t.prototype, "border", void 0), kY([Y("Line")], t.prototype, "type", void 0), kY([Y(null)], t.prototype, "dataSource", void 0), kY([Y(null)], t.prototype, "query", void 0), kY([Y("Numeric")], t.prototype, "valueType", void 0), kY([Y(null)], t.prototype, "xName", void 0), kY([Y(null)], t.prototype, "yName", void 0), kY([Y("#00bdae")], t.prototype, "fill", void 0), kY([Y("")], t.prototype, "highPointColor", void 0), kY([Y("")], t.prototype, "lowPointColor", void 0), kY([Y("")], t.prototype, "startPointColor", void 0), kY([Y("")], t.prototype, "endPointColor", void 0), kY([Y("")], t.prototype, "negativePointColor", void 0), kY([Y("")], t.prototype, "tiePointColor", void 0), kY([Y([])], t.prototype, "palette", void 0), kY([Y(1)], t.prototype, "lineWidth", void 0), kY([Y(1)], t.prototype, "opacity", void 0), kY([Y(null)], t.prototype, "format", void 0), kY([Y(!1)], t.prototype, "useGroupingSeparator", void 0), kY([U({}, gY)], t.prototype, "tooltipSettings", void 0), kY([U({}, mY)], t.prototype, "containerArea", void 0), kY([G([], yY)], t.prototype, "rangeBandSettings", void 0), kY([U({}, vY)], t.prototype, "axisSettings", void 0), kY([U({}, bY)], t.prototype, "markerSettings", void 0), kY([U({}, LY)], t.prototype, "dataLabelSettings", void 0), kY([U({}, wY)], t.prototype, "padding", void 0), kY([Y("Material")], t.prototype, "theme", void 0), kY([X()], t.prototype, "loaded", void 0), kY([X()], t.prototype, "load", void 0), kY([X()], t.prototype, "tooltipInitialize", void 0), kY([X()], t.prototype, "seriesRendering", void 0), kY([X()], t.prototype, "axisRendering", void 0), kY([X()], t.prototype, "pointRendering", void 0), kY([X()], t.prototype, "pointRegionMouseMove", void 0), kY([X()], t.prototype, "pointRegionMouseClick", void 0), kY([X()], t.prototype, "sparklineMouseMove", void 0), kY([X()], t.prototype, "sparklineMouseClick", void 0), kY([X()], t.prototype, "dataLabelRendering", void 0), kY([X()], t.prototype, "markerRendering", void 0), kY([X()], t.prototype, "resize", void 0), t = kY([J], t) }(Kw), NY = function () { function e(e) { this.sparkline = e, this.addEventListener() } return e.prototype.addEventListener = function () { this.sparkline.isDestroyed || (this.sparkline.on(uw.isPointer ? "pointerleave" : "mouseleave", this.mouseLeaveHandler, this), this.sparkline.on(uw.touchMoveEvent, this.mouseMoveHandler, this), this.sparkline.on(uw.touchEndEvent, this.mouseUpHandler, this)) }, e.prototype.mouseLeaveHandler = function (e) { this.removeTooltipElements() }, e.prototype.mouseUpHandler = function (e) { this.sparkline.isTouch && (this.processTooltip(e), this.fadeOut()) }, e.prototype.fadeOut = function () { clearTimeout(this.clearTooltip), this.clearTooltip = setTimeout(this.removeTooltipElements.bind(this), 5e3) }, e.prototype.removeTooltipElements = function () { this.removeTooltip(), this.removeTracker() }, e.prototype.mouseMoveHandler = function (e) { this.processTooltip(e) }, e.prototype.processTooltip = function (e) { var t, i = this.sparkline, n = i.sparklineRenderer.visiblePoints, r = i.mouseX, o = i.mouseY; if ("Pie" !== i.type) for (var s = h([], [], n).map(function (e) { return e.location.x }), a = 1 / 0, l = 0, d = void 0, c = s.length; l < c; l++)a > (d = Math.abs(r - s[l])) && (a = d, s[l], t = l); else { var p = e.target.id; t = parseInt(p.split("_pie_")[1], 10) } if (isNaN(t) || !Fr(r, o, new xY(0, 0, i.availableSize.width, i.availableSize.height))) return this.removeTracker(), void this.removeTooltip(); this.pointIndex !== t && (this.pointIndex = t, this.renderTrackerLine(n[t]), this.renderTooltip(n[t])) }, e.prototype.renderTrackerLine = function (e) { var t = this.sparkline, i = (t.theme.toLowerCase(), t.tooltipSettings.trackLineSettings), n = t.sparkTheme.trackerLineColor ? t.sparkTheme.trackerLineColor : i.color; if (i.visible && "Pie" !== t.type) { var r = Br(t.element.id + "_sparkline_tracker_g"); d(r) && (r = t.renderer.createGroup({ id: t.element.id + "_sparkline_tracker_g" }), t.svgObject.appendChild(r)); var o = Br(t.element.id + "_sparkline_tracker"), s = "M " + e.location.x + " " + t.padding.top + " L " + e.location.x + " " + (t.availableSize.height - t.padding.bottom); if (d(o)) { var a = new TY(t.element.id + "_sparkline_tracker", "transparent", i.width, n, 1); a.d = s, Or(t, a, r) } else o.setAttribute("d", s), o.setAttribute("stroke-width", i.width.toString()), o.setAttribute("stroke", n) } }, e.prototype.renderTooltip = function (e) { var t = this.sparkline, i = t.tooltipSettings; if (i.visible) { var n = Br(t.element.id + "_sparkline_tooltip_div"); d(n) && (n = M("div", { id: t.element.id + "_sparkline_tooltip_div", styles: "pointer-events: none; position: absolute;z-index:1;" }), Br(t.element.id + "_Secondary_Element").appendChild(n)); t.markerSettings.visible.length && t.markerSettings.size; var r = e.xVal.toString(); "Category" === t.valueType ? r = t.dataSource[e.xVal][t.xName] : "DateTime" === t.valueType && (r = new Date(e.xVal).toDateString()); e.yVal.toString(); var o = this.getFormat(t.tooltipSettings.format, t, r, this.formatValue(e.yVal, t).toString()), s = { x: e.location.x, y: e.location.y }; s = "Pie" === t.type ? { x: e.location.x, y: e.location.y } : s; var a = i.textStyle.color || t.sparkTheme.tooltipFontColor, l = "" === i.fill ? t.sparkTheme.tooltipFill : i.fill, h = { name: "tooltipInitialize", cancel: !1, text: o, textStyle: { size: i.textStyle.size, opacity: t.sparkTheme.tooltipTextOpacity || i.textStyle.opacity, fontWeight: i.textStyle.fontWeight, fontStyle: i.textStyle.fontStyle, fontFamily: t.sparkTheme.fontFamily || i.textStyle.fontFamily, color: a } }; if (t.trigger(h.name, h), !h.cancel) { var c = new pj({ content: h.text, border: i.border, template: i.template, data: t.dataSource[this.pointIndex], fill: l, textStyle: h.textStyle, enableAnimation: !1, location: { x: s.x, y: s.y }, shared: !1, availableSize: this.sparkline.availableSize, areaBounds: new xY(0, 0, t.availableSize.width, t.availableSize.height), theme: t.theme }); c.opacity = t.sparkTheme.tooltipFillOpacity || c.opacity, c.appendTo(n), pe(n.id + "Template", "Template") } } }, e.prototype.getFormat = function (e, t, i, n) { if (d(e) || "" === e) return [n]; var r = e; return r = r.split("${" + t.xName + "}").join(i).split("${" + t.yName + "}").join(n), [r] }, e.prototype.formatValue = function (e, t) { return t.format && !isNaN(Number(e)) ? t.intl.getNumberFormat({ format: t.format, useGrouping: t.useGroupingSeparator })(e) : e }, e.prototype.removeTracker = function () { var e = this.sparkline.element.querySelector("#" + this.sparkline.element.id + "_sparkline_tracker_g"); return e ? k(e) : null }, e.prototype.removeTooltip = function () { this.pointIndex = null; var e = this.sparkline.element.querySelector("#" + this.sparkline.element.id + "_sparkline_tooltip_div"); return e ? k(e) : null }, e.prototype.getModuleName = function () { return "SparklineTooltip" }, e.prototype.destroy = function (e) { }, e }(); IR.Inject(UR, Cz, QR, Rz, Vz, HR, KR, RB, gz, fz, pz, bz, vz, ez, lz, Mz, kz, gB, dB, zR, OR, FR, SB, fB, CB, wB, DB, Dz, Ez, xz, Iz, dz, rz, sz, Yz, Qz, qz, Jz, lB, Kz, iB, eB, rB, sB, EB, Bz, LB, hB, WR, PB, IB, NB, BB, FB, bB), eF.Inject(ZB, rF, sF, pF, lF, gF, dF, fF, FB), kF.Inject(SH, MH, KR, gz, OR, FR, FB), PY.Inject(NY), sY.Inject(lY, aY), JH.Inject(UR, QR, Rz, Vz, HR, KR, gB, dB, OR, fB, CB, wB, DB, Dz, Ez, dz, Yz, Qz, qz, Jz, lB, Kz, iB, eB, rB, sB, hB, SH, FB); var OY, RY = Object.freeze({ CrosshairSettings: ER, ZoomSettings: jR, Chart: IR, Row: qj, Column: Gj, MajorGridLines: Qj, MinorGridLines: Xj, AxisLine: Jj, MajorTickLines: Zj, MinorTickLines: Kj, CrosshairTooltip: $j, Axis: eI, VisibleLabels: tI, DateTime: OR, Category: zR, Logarithmic: FR, DateTimeCategory: WR, NiceInterval: PR, StripLine: HR, Connector: RE, Font: zE, Border: BE, ChartArea: FE, Margin: VE, Animation: WE, Indexes: HE, CornerRadius: _E, Index: YE, EmptyPointSettings: UE, DragSettings: qE, TooltipSettings: GE, Periods: QE, PeriodSelectorSettings: XE, LineSeries: UR, ColumnSeries: QR, AreaSeries: KR, BarSeries: ez, PolarSeries: rz, RadarSeries: sz, StackingBarSeries: lz, CandleSeries: dz, StackingColumnSeries: pz, StepLineSeries: gz, StepAreaSeries: fz, StackingAreaSeries: vz, StackingLineSeries: bz, ScatterSeries: Cz, RangeColumnSeries: Mz, WaterfallSeries: xz, HiloSeries: Dz, HiloOpenCloseSeries: Ez, RangeAreaSeries: Iz, BubbleSeries: kz, SplineSeries: Rz, HistogramSeries: Bz, SplineAreaSeries: Vz, TechnicalIndicator: HI, SmaIndicator: Yz, EmaIndicator: qz, TmaIndicator: Qz, AccumulationDistributionIndicator: Jz, AtrIndicator: Kz, MomentumIndicator: eB, RsiIndicator: iB, StochasticIndicator: rB, BollingerBands: sB, MacdIndicator: lB, Trendlines: hB, sort: ki, isBreakLabel: Pi, rotateTextSize: Ni, removeElement: Oi, logBase: Ri, showTooltip: zi, inside: Bi, withIn: Fi, logWithIn: Vi, withInRange: Wi, sum: Hi, subArraySum: _i, subtractThickness: Yi, subtractRect: Ui, degreeToLocation: qi, getAngle: Gi, subArray: Qi, valueToCoefficient: Xi, TransformToVisible: Ji, indexFinder: Zi, CoefficientToVector: Ki, valueToPolarCoefficient: $i, Mean: nI, PolarArc: rI, createTooltip: en, createZoomingLabels: tn, withInBounds: nn, getValueXByPoint: rn, getValueYByPoint: on, findClipRect: sn, firstToLowerCase: an, getTransform: ln, getMinPointsDelta: hn, getAnimationFunction: dn, linear: cn, markerAnimate: pn, animateRectElement: un, pathAnimation: gn, appendClipElement: mn, triggerLabelRender: fn, setRange: yn, getActualDesiredIntervalsCount: vn, templateAnimate: wn, drawSymbol: bn, calculateShapes: Cn, getRectLocation: Ln, minMax: Mn, getElement: Sn, getTemplateFunction: xn, createTemplate: Tn, getFontStyle: Dn, measureElementRect: An, findlElement: En, getPoint: jn, appendElement: In, appendChildElement: kn, getDraggedRectLocation: Pn, checkBounds: Nn, getLabelText: On, stopTimer: Rn, isCollide: zn, isOverlap: Bn, containsRect: Fn, calculateRect: Vn, convertToHexCode: Wn, componentToHex: Hn, convertHexToColor: _n, colorNameToHex: Yn, getSaturationColor: Un, getMedian: qn, calculateLegendShapes: Gn, textTrim: Qn, lineBreakLabelTrim: Xn, stringToNumber: Jn, redrawElement: Zn, animateRedrawElement: Kn, textElement: $n, calculateSize: er, createSvg: tr, getTitle: ir, titlePositionX: nr, textWrap: rr, blazorTemplatesReset: or, CustomizeOption: oI, StackValues: sI, RectOption: aI, CircleOption: lI, PolygonOption: hI, ChartLocation: dI, Thickness: cI, ColorValue: pI, PointData: uI, AccPointData: gI, ControlPoints: mI, Crosshair: dB, Tooltip: gB, Zoom: fB, Selection: wB, DataEditing: bB, DataLabel: CB, ErrorBar: LB, DataLabelSettings: bI, MarkerSettings: CI, Points: LI, Trendline: MI, ErrorBarCapSettings: SI, ChartSegment: xI, ErrorBarSettings: TI, SeriesBase: DI, Series: AI, Legend: SB, ChartAnnotation: DB, ChartAnnotationSettings: zj, LabelBorder: Bj, MultiLevelCategories: Fj, StripLineSettings: Vj, MultiLevelLabels: Wj, ScrollbarSettingsRange: Hj, ScrollbarSettings: _j, BoxAndWhiskerSeries: EB, MultiColoredAreaSeries: IB, MultiColoredLineSeries: PB, MultiColoredSeries: JR, MultiLevelLabel: NB, ScrollBar: RB, ParetoSeries: BB, Export: FB, AccumulationChart: eF, AccumulationAnnotationSettings: HB, AccumulationDataLabelSettings: _B, PieCenter: YB, AccPoints: UB, AccumulationSeries: qB, getSeriesFromIndex: lr, pointByIndex: hr, PieSeries: ZB, FunnelSeries: rF, PyramidSeries: sF, AccumulationLegend: lF, AccumulationDataLabel: dF, AccumulationTooltip: pF, AccumulationSelection: gF, AccumulationAnnotation: fF, StockChart: JH, StockChartFont: jH, StockChartBorder: IH, StockChartArea: kH, StockMargin: PH, StockChartStripLineSettings: NH, StockEmptyPointSettings: RH, StockChartConnector: zH, StockSeries: BH, StockChartIndicator: FH, StockChartAxis: VH, StockChartRow: WH, StockChartTrendline: HH, StockChartAnnotationSettings: _H, StockChartIndexes: YH, StockEventsSettings: UH, loaded: "loaded", legendClick: "legendClick", load: "load", animationComplete: "animationComplete", legendRender: mj, textRender: fj, pointRender: yj, seriesRender: vj, axisLabelRender: wj, axisRangeCalculated: bj, axisMultiLabelRender: Cj, tooltipRender: Lj, chartMouseMove: Mj, chartMouseClick: Sj, pointClick: "pointClick", pointMove: "pointMove", chartMouseLeave: xj, chartMouseDown: Tj, chartMouseUp: Dj, zoomComplete: Aj, dragComplete: Ej, resized: "resized", beforePrint: "beforePrint", annotationRender: jj, scrollStart: "scrollStart", scrollEnd: Ij, scrollChanged: kj, stockEventRender: Pj, multiLevelLabelClick: Nj, dragStart: "dragStart", drag: "drag", dragEnd: "dragEnd", get Theme() { return IE }, getSeriesColor: Ci, getThemeColor: Li, getScrollbarThemeColor: Mi, PeriodSelector: MH, RangeNavigator: kF, rangeValueToCoefficient: dr, getXLocation: cr, getRangeValueXByPoint: pr, getExactData: ur, getNearestValue: gr, DataPoint: yF, get RangeNavigatorTheme() { return nR }, getRangeThemeColor: mr, RangeNavigatorAxis: CF, RangeSeries: wF, RangeSlider: EF, RangeNavigatorSeries: xF, ThumbSettings: TF, StyleSettings: DF, RangeTooltipSettings: AF, Double: gj, RangeTooltip: SH, Smithchart: sY, SmithchartMajorGridLines: N_, SmithchartMinorGridLines: O_, SmithchartAxisLine: R_, SmithchartAxis: z_, LegendTitle: T_, LegendLocation: D_, LegendItemStyleBorder: A_, LegendItemStyle: E_, LegendBorder: j_, SmithchartLegendSettings: I_, SeriesTooltipBorder: Y_, SeriesTooltip: U_, SeriesMarkerBorder: q_, SeriesMarkerDataLabelBorder: G_, SeriesMarkerDataLabelConnectorLine: Q_, SeriesMarkerDataLabel: X_, SeriesMarker: J_, SmithchartSeries: Z_, TooltipRender: aY, Subtitle: V_, Title: W_, SmithchartFont: $H, SmithchartMargin: e_, SmithchartBorder: t_, SmithchartRect: i_, LabelCollection: n_, LegendSeries: r_, LabelRegion: o_, HorizontalLabelCollection: s_, RadialLabelCollections: a_, LineSegment: l_, PointRegion: h_, Point: d_, ClosestPoint: c_, MarkerOptions: p_, SmithchartLabelPosition: u_, Direction: g_, DataLabelTextOptions: m_, LabelOption: f_, SmithchartSize: y_, GridArcPoints: v_, smithchartBeforePrint: "beforePrint", SmithchartLegend: lY, Sparkline: PY, SparklineTooltip: NY, SparklineBorder: cY, SparklineFont: pY, TrackLineSettings: uY, SparklineTooltipSettings: gY, ContainerArea: mY, LineSettings: fY, RangeBandSettings: yY, AxisSettings: vY, Padding: wY, SparklineMarkerSettings: bY, LabelOffset: CY, SparklineDataLabelSettings: LY }), zY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BY = function () { return function (e) { this.id = e } }(), FY = function (e) { function t(t, i, n, r, o, s, a, l, h) { void 0 === l && (l = ""), void 0 === h && (h = ""); var d = e.call(this, t) || this; return d.opacity = o, d.fill = i, d.stroke = r, d["stroke-width"] = n, d["stroke-dasharray"] = s, d.d = a, d.transform = l, d.style = h, d } return zY(t, e), t }(BY), VY = function (e) { function t(t, i, n, r, o) { var s = e.call(this, t) || this; return s.y = o.y, s.x = o.x, s.height = o.height, s.width = o.width, s.opacity = r, s.fill = i, s.stroke = n.color, s["stroke-width"] = n.width, s } return zY(t, e), t }(BY), WY = function () { return function (e, t) { this.width = e, this.height = t } }(), HY = function () { return function (e, t) { this.x = e, this.y = t } }(), _Y = function () { return function (e, t, i, n) { this.x = e, this.y = t, this.width = i, this.height = n } }(), YY = function (e) { function t(t, i, n, r, o, s, a) { void 0 === s && (s = ""); var l = e.call(this, t) || this; return l.transform = "", l.baseLine = "auto", l.x = i, l.y = n, l.anchor = r, l.text = o, l.transform = s, l.baseLine = a, l } return zY(t, e), t }(BY), UY = function () { return function (e, t, i) { this.text = e, this.value = t, this.size = i } }(), qY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), GY = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, QY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qY(t, e), GY([Y("")], t.prototype, "color", void 0), GY([Y(1)], t.prototype, "width", void 0), t }(ww), XY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qY(t, e), GY([Y("16px")], t.prototype, "size", void 0), GY([Y("")], t.prototype, "color", void 0), GY([Y("segoe UI")], t.prototype, "fontFamily", void 0), GY([Y("Normal")], t.prototype, "fontWeight", void 0), GY([Y("Normal")], t.prototype, "fontStyle", void 0), GY([Y(1)], t.prototype, "opacity", void 0), t }(ww), JY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qY(t, e), GY([Y(10)], t.prototype, "left", void 0), GY([Y(10)], t.prototype, "right", void 0), GY([Y(10)], t.prototype, "top", void 0), GY([Y(10)], t.prototype, "bottom", void 0), t }(ww), ZY = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qY(t, e), GY([Y(!1)], t.prototype, "enable", void 0), GY([Y(null)], t.prototype, "fill", void 0), GY([U({ size: "13px" }, XY)], t.prototype, "textStyle", void 0), GY([Y(null)], t.prototype, "format", void 0), GY([Y(null)], t.prototype, "template", void 0), GY([Y(!0)], t.prototype, "enableAnimation", void 0), GY([U({}, QY)], t.prototype, "border", void 0), GY([Y(!1)], t.prototype, "showAtMousePosition", void 0), t }(ww); (OY || (OY = {})).axisLabelFont = { size: "12px", fontWeight: "Normal", color: null, fontStyle: "Normal", fontFamily: "Segoe UI" }; var KY = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), $Y = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, eU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(2)], t.prototype, "width", void 0), $Y([Y("")], t.prototype, "dashArray", void 0), $Y([Y(null)], t.prototype, "color", void 0), t }(ww), tU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([U(OY.axisLabelFont, XY)], t.prototype, "font", void 0), $Y([Y("")], t.prototype, "format", void 0), $Y([Y("Inside")], t.prototype, "position", void 0), $Y([Y("None")], t.prototype, "hiddenLabel", void 0), $Y([Y(!1)], t.prototype, "autoAngle", void 0), $Y([Y(!1)], t.prototype, "useRangeColor", void 0), $Y([Y(0)], t.prototype, "offset", void 0), t }(ww), iU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(0)], t.prototype, "start", void 0), $Y([Y(0)], t.prototype, "end", void 0), $Y([Y(null)], t.prototype, "radius", void 0), $Y([Y(10)], t.prototype, "startWidth", void 0), $Y([Y(10)], t.prototype, "endWidth", void 0), $Y([Y(null)], t.prototype, "color", void 0), $Y([Y(0)], t.prototype, "roundedCornerRadius", void 0), $Y([Y(1)], t.prototype, "opacity", void 0), t }(ww), nU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(2)], t.prototype, "width", void 0), $Y([Y(null)], t.prototype, "height", void 0), $Y([Y(null)], t.prototype, "interval", void 0), $Y([Y(0)], t.prototype, "offset", void 0), $Y([Y(null)], t.prototype, "color", void 0), $Y([Y("Inside")], t.prototype, "position", void 0), $Y([Y(!1)], t.prototype, "useRangeColor", void 0), t }(ww), rU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(null)], t.prototype, "color", void 0), $Y([U({ color: null, width: 8 }, QY)], t.prototype, "border", void 0), $Y([Y(8)], t.prototype, "radius", void 0), t }(ww), oU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(null)], t.prototype, "color", void 0), $Y([U({ color: null, width: 0 }, QY)], t.prototype, "border", void 0), $Y([Y("0%")], t.prototype, "length", void 0), t }(ww), sU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(!0)], t.prototype, "enable", void 0), $Y([Y(1e3)], t.prototype, "duration", void 0), t }(ww), aU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(null)], t.prototype, "content", void 0), $Y([Y(90)], t.prototype, "angle", void 0), $Y([Y("50%")], t.prototype, "radius", void 0), $Y([Y("-1")], t.prototype, "zIndex", void 0), $Y([Y(!1)], t.prototype, "autoAngle", void 0), $Y([U({ size: "12px", color: "#686868" }, XY)], t.prototype, "textStyle", void 0), $Y([Y(null)], t.prototype, "description", void 0), t }(ww), lU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return KY(t, e), $Y([Y(null)], t.prototype, "value", void 0), $Y([Y("Needle")], t.prototype, "type", void 0), $Y([Y(0)], t.prototype, "roundedCornerRadius", void 0), $Y([Y(null)], t.prototype, "imageUrl", void 0), $Y([Y(null)], t.prototype, "radius", void 0), $Y([Y(20)], t.prototype, "pointerWidth", void 0), $Y([U({}, rU)], t.prototype, "cap", void 0), $Y([U({}, oU)], t.prototype, "needleTail", void 0), $Y([Y(null)], t.prototype, "color", void 0), $Y([U({ color: "#DDDDDD", width: 0 }, QY)], t.prototype, "border", void 0), $Y([U(null, sU)], t.prototype, "animation", void 0), $Y([Y("Circle")], t.prototype, "markerShape", void 0), $Y([Y(5)], t.prototype, "markerHeight", void 0), $Y([Y(null)], t.prototype, "description", void 0), $Y([Y(5)], t.prototype, "markerWidth", void 0), t }(ww), hU = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.visibleLabels = [], t } return KY(t, e), $Y([Y(null)], t.prototype, "minimum", void 0), $Y([Y(null)], t.prototype, "maximum", void 0), $Y([Y(!1)], t.prototype, "showLastLabel", void 0), $Y([Y(null)], t.prototype, "roundingPlaces", void 0), $Y([Y(null)], t.prototype, "radius", void 0), $Y([U({}, eU)], t.prototype, "lineStyle", void 0), $Y([G([{}], iU)], t.prototype, "ranges", void 0), $Y([G([{}], lU)], t.prototype, "pointers", void 0), $Y([G([{}], aU)], t.prototype, "annotations", void 0), $Y([U({ width: 2, height: 10 }, nU)], t.prototype, "majorTicks", void 0), $Y([U({ width: 2, height: 5 }, nU)], t.prototype, "minorTicks", void 0), $Y([Y(200)], t.prototype, "startAngle", void 0), $Y([Y(160)], t.prototype, "endAngle", void 0), $Y([Y("ClockWise")], t.prototype, "direction", void 0), $Y([Y(null)], t.prototype, "background", void 0), $Y([Y(null)], t.prototype, "rangeGap", void 0), $Y([Y(!1)], t.prototype, "startAndEndRangeGap", void 0), $Y([U({}, tU)], t.prototype, "labelStyle", void 0), t }(ww), dU = function () { function e(e) { this.gauge = e, this.elementId = e.element.id } return e.prototype.renderAnnotation = function (e, t) { var i = this, n = this.gauge.availableSize.width, r = M("div", { id: this.elementId + "_Annotations_" + t }), o = ho(this.elementId + "_Secondary_Element"); if (document.getElementById(this.elementId + "_Secondary_Element").style.width = n + "px", e.annotations.map(function (e, n) { null !== e.content && i.createTemplate(r, n, t) }), o && r.childElementCount) { o.appendChild(r); for (var s = 0; s < this.gauge.axes[t].annotations.length; s++)pe(this.gauge.element.id + "_Axis" + t + "_ContentTemplate" + s, "ContentTemplate", this.gauge.axes[t].annotations[s]) } }, e.prototype.createTemplate = function (e, t, i) { var n = this, r = this.gauge.axes[i], o = r.annotations[t], s = M("div", { id: this.elementId + "_Axis_" + i + "_Annotation_" + t, styles: "position: absolute; z-index:" + o.zIndex + ";transform:" + (o.autoAngle ? "rotate(" + (o.angle - 90) + "deg)" : "rotate(0deg)") + ";" }), a = { cancel: !1, name: "annotationRender", content: o.content, axis: r, annotation: o, textStyle: o.textStyle }; this.gauge.trigger("annotationRender", a, function (l) { var h, d; if (!a.cancel) { if ((h = co(a.content)) && (window.Blazor || h(r, null, null, n.gauge.element.id + "_Axis" + i + "_ContentTemplate" + t).length)) for (var c = (d = Array.prototype.slice.call(h(window.Blazor ? {} : r, null, null, n.gauge.element.id + "_Axis" + i + "_ContentTemplate" + t))).length, p = 0; p < c; p++)s.appendChild(d[p]); else s.appendChild(M("div", { innerHTML: a.content, styles: Hr(a.textStyle) })); n.updateLocation(s, r, o), e.appendChild(s) } }) }, e.prototype.updateLocation = function (e, t, i) { var n = to(i.angle - 90, Ur(i.radius, t.currentRadius), this.gauge.midPoint), r = Yr(e); e.style.left = n.x - r.width / 2 + "px", e.style.top = n.y - r.height / 2 + "px", e.setAttribute("aria-label", i.description || "Annotation") }, e.prototype.getModuleName = function () { return "Annotations" }, e.prototype.destroy = function (e) { }, e }(), cU = function () { function e(e) { this.gauge = e, this.tooltipId = this.gauge.element.id + "_CircularGauge_Tooltip", this.tooltip = e.tooltip, this.textStyle = this.tooltip.textStyle, this.borderStyle = this.tooltip.border, this.addEventListener() } return e.prototype.renderTooltip = function (e) { var t, i, n, r, o, s = this, a = !1; if (-1 !== e.type.indexOf("touch") ? (n = (r = e).target, t = r.changedTouches[0].pageX, i = r.changedTouches[0].pageY) : (n = e.target, t = e.pageX, i = e.pageY), n.id.indexOf("_Pointer_") >= 0) { null !== this.pointerEle && (a = this.pointerEle === n); var l = this.gauge.svgObject.getBoundingClientRect(), h = this.gauge.element.getBoundingClientRect(), c = document.getElementById(this.gauge.element.id + "_AxesCollection").getBoundingClientRect(), p = new _Y(Math.abs(h.left - l.left), Math.abs(h.top - l.top), l.width, l.height), u = uo(n.id, this.gauge); this.currentAxis = this.gauge.axes[u.axisIndex], this.currentPointer = this.currentAxis.pointers[u.pointerIndex]; var g = Jr(this.currentPointer.currentValue, this.currentAxis.visibleRange.max, this.currentAxis.visibleRange.min, this.currentAxis.startAngle, this.currentAxis.endAngle, "ClockWise" === this.currentAxis.direction) % 360, m = this.gauge.tooltip.format || this.currentAxis.labelStyle.format, f = m && null !== m.match("{value}"), y = this.gauge.intl.getNumberFormat({ format: fo(m), useGrouping: this.gauge.useGroupingSeparator }); document.getElementById(this.tooltipId) ? this.tooltipEle = document.getElementById(this.tooltipId) : (this.tooltipEle = M("div", { id: this.tooltipId, className: "EJ2-CircularGauge-Tooltip", styles: "position: absolute;pointer-events:none;" }), document.getElementById(this.gauge.element.id + "_Secondary_Element").appendChild(this.tooltipEle)); var v = void 0; v = this.currentAxis.roundingPlaces ? parseFloat(this.currentPointer.currentValue.toFixed(this.currentAxis.roundingPlaces)) : this.currentPointer.currentValue; var w = f ? m.replace(new RegExp("{value}", "g"), y(v)) : y(v); (o = to(g, this.currentAxis.currentRadius, this.gauge.midPoint)).x = this.tooltip.template && (g >= 150 && g <= 250 || g >= 330 && g <= 360 || g >= 0 && g <= 45) ? o.x + 10 : o.x; var b = { name: "tooltipRender", cancel: !1, content: w, location: o, axis: this.currentAxis, tooltip: this.tooltip, pointer: this.currentPointer, event: e, gauge: this.gauge, appendInBodyTag: !1 }; this.gauge.trigger("tooltipRender", b, function (e) { var n = b.tooltip.template; if (null !== n && 1 === n.length && (n = n[n[0]]), s.tooltip.showAtMousePosition) b.location = mo(t, i, s.gauge.svgObject), s.tooltipRect = p; else if (n) { var r = go(n, s.gauge, s.tooltipEle); s.tooltipRect = Math.abs(c.left - l.left) > r.width ? s.findPosition(p, g, w, b.location) : p } else s.findPosition(p, g, w, b.location); if (!b.cancel && !a && (b.tooltip.textStyle.color = b.tooltip.textStyle.color || s.gauge.themeStyle.tooltipFontColor, b.tooltip.textStyle.fontFamily = s.gauge.themeStyle.fontFamily || b.tooltip.textStyle.fontFamily, b.tooltip.textStyle.opacity = s.gauge.themeStyle.tooltipTextOpacity || b.tooltip.textStyle.opacity, s.svgTooltip = new pj({ enable: !0, data: { value: b.content }, template: n, enableAnimation: b.tooltip.enableAnimation, content: [b.content], location: b.location, inverted: s.arrowInverted, areaBounds: s.tooltipRect, fill: b.tooltip.fill || s.gauge.themeStyle.tooltipFillColor, textStyle: b.tooltip.textStyle, availableSize: s.gauge.availableSize, border: b.tooltip.border }), s.svgTooltip.opacity = s.gauge.themeStyle.tooltipFillOpacity || s.svgTooltip.opacity, s.svgTooltip.appendTo(s.tooltipEle), s.gauge.tooltip.template && pe(s.gauge.element.id + "Template", "Template"), n && Math.abs(i - s.tooltipEle.getBoundingClientRect().top) <= 0 && (s.tooltipEle.style.top = parseFloat(s.tooltipEle.style.top) + 20 + "px"), b.appendInBodyTag)) { d(document.getElementsByClassName("EJ2-CircularGauge-Tooltip e-control e-tooltip")) || s.removeTooltip(), document.body.appendChild(s.tooltipEle), s.tooltipEle.style.zIndex = "100000000001"; var o = s.tooltipEle.getBoundingClientRect(); t + o.width <= window.innerWidth && o.x <= 0 ? (s.tooltipEle.style.left = t + 20 + "px", s.tooltipEle.style.top = o.top + 20 + "px") : (s.tooltipEle.style.left = t - o.width + 20 + "px", s.tooltipEle.style.top = o.top + 20 + "px") } }) } else this.removeTooltip(), this.gauge.tooltip.template && ue(this.gauge.element.id + "Template") }, e.prototype.findPosition = function (e, t, i, n) { var r, o, s, a; switch (!0) { case t >= 0 && t < 45: this.arrowInverted = !0, r = t >= 15 && t <= 30 ? n.y : 0, this.tooltipRect = new _Y(e.x, e.y + o, e.width, e.height), this.tooltipPosition = "RightBottom"; break; case t >= 45 && t < 90: this.arrowInverted = !1, this.tooltipRect = new _Y(e.x, e.y + n.y, e.width, e.height), this.tooltipPosition = "BottomRight"; break; case t >= 90 && t < 135: this.arrowInverted = !1, this.tooltipRect = new _Y(e.x, e.y + n.y, e.width, e.height), this.tooltipPosition = "BottomLeft"; break; case t >= 135 && t < 180: this.arrowInverted = !0, o = t >= 150 && t <= 160 ? n.y : 0, this.tooltipRect = new _Y(e.x - e.width, e.y + o, e.width, e.height), this.tooltipPosition = "LeftBottom"; break; case t >= 180 && t < 225: this.arrowInverted = !0, s = t >= 200 && t <= 225 ? Math.abs(e.y - n.y) : e.height, this.tooltipRect = new _Y(e.x - e.width, e.y, e.width, s), this.tooltipPosition = "LeftTop"; break; case t >= 225 && t < 270: this.arrowInverted = !1, a = t >= 250 && t <= 290 ? e.width : Math.abs(e.x - n.x), this.tooltipRect = new _Y(e.x, e.y, a, e.height), this.tooltipPosition = "TopLeft"; break; case t >= 270 && t < 315: this.arrowInverted = !1, r = t >= 270 && t > 290 ? n.x : 0, this.tooltipRect = new _Y(e.x + r, e.y, e.width, e.height), this.tooltipPosition = "TopRight"; break; case t >= 315 && t <= 360: this.arrowInverted = !0, s = t >= 315 && t <= 340 ? Math.abs(e.y - n.y) : e.height, this.tooltipRect = new _Y(e.x, e.y, e.width, s), this.tooltipPosition = "RightTop" }return this.tooltipRect }, e.prototype.removeTooltip = function () { if (document.getElementsByClassName("EJ2-CircularGauge-Tooltip").length > 0) { var e = document.getElementsByClassName("EJ2-CircularGauge-Tooltip")[0]; e && k(e), this.pointerEle = null } }, e.prototype.mouseUpHandler = function (e) { this.renderTooltip(e), clearTimeout(this.clearTimeout), this.clearTimeout = setTimeout(this.removeTooltip.bind(this), 2e3) }, e.prototype.addEventListener = function () { this.gauge.isDestroyed || (this.gauge.on(uw.touchMoveEvent, this.renderTooltip, this), this.gauge.on(uw.touchEndEvent, this.mouseUpHandler, this)) }, e.prototype.removeEventListener = function () { this.gauge.isDestroyed || (this.gauge.off(uw.touchMoveEvent, this.renderTooltip), this.gauge.off(uw.touchEndEvent, this.mouseUpHandler)) }, e.prototype.getModuleName = function () { return "Tooltip" }, e.prototype.destroy = function (e) { this.removeEventListener() }, e }(), pU = function () { function e(e) { this.gauge = e } return e.prototype.drawAxisOuterLine = function (e, t, i, n) { var r = e.background; this.setRangeColor(e), null !== r && Gr(new FY(n.element.id + "_AxisOuterLine_" + t, r, 0, "transparent", null, "0", io(n.midPoint, 0, 360, Math.min(e.rect.width, e.rect.height) / 2), "", "pointer-events:none;"), i, n) }, e.prototype.drawAxisLine = function (e, t, i, n) { var r = e.startAngle, o = e.endAngle, s = e.lineStyle.color || this.gauge.themeStyle.lineColor; e.lineStyle.width > 0 && (r = $r(r, o) ? [0, o = 360][0] : r, Gr(new FY(n.element.id + "_AxisLine_" + t, "transparent", e.lineStyle.width, s, null, e.lineStyle.dashArray, io(n.midPoint, r - 90, o - 90, e.currentRadius), "", "pointer-events:none;"), i, n)) }, e.prototype.drawAxisLabels = function (e, t, i, n) { var r, o, s, a, l = n.renderer.createGroup({ id: n.element.id + "_Axis_Labels_" + t }), h = e.visibleRange.min, d = e.visibleRange.max, c = e.visibleLabels, p = e.labelStyle, u = e.currentRadius, g = p.font.color || this.gauge.themeStyle.labelColor; "Outside" === p.position ? u += e.nearSize - (e.maxLabelSize.height + e.lineStyle.width / 2) + 5 : u -= e.farSize - (e.maxLabelSize.height + e.lineStyle.width / 2) + (p.autoAngle ? 10 : 0); for (var m = 0, f = c.length; m < f; m++)0 === m && "First" === p.hiddenLabel || m === f - 1 && "Last" === p.hiddenLabel || (a = c[m], r = to(s = Math.round(Jr(a.value, d, h, e.startAngle, e.endAngle, "ClockWise" === e.direction)), u, n.midPoint), o = this.findAnchor(r, p, s, a), p.font.fontFamily = this.gauge.themeStyle.labelFontFamily || p.font.fontFamily, qr(new YY(n.element.id + "_Axis_" + t + "_Label_" + m, r.x, r.y, o, a.text, p.autoAngle ? "rotate(" + (s + 90) + "," + r.x + "," + r.y + ")" : "", "auto"), p.font, p.useRangeColor ? vo(a.value, e.ranges, g) : g, l, "pointer-events:none;")); i.appendChild(l) }, e.prototype.findAnchor = function (e, t, i, n) { if (t.autoAngle) return "middle"; var r = "Inside" === t.position ? i > 120 && i < 240 ? "start" : 300 < i || i < 60 ? "end" : "middle" : i > 120 && i < 240 ? "end" : 300 < i || i < 60 ? "start" : "middle"; return e.y += "Inside" === t.position ? i >= 240 && i <= 300 ? n.size.height / 2 : i >= 60 && i <= 120 ? 0 : n.size.height / 4 : i >= 240 && i <= 300 ? 0 : i >= 60 && i <= 120 ? n.size.height / 2 : n.size.height / 4, r }, e.prototype.drawMinorTickLines = function (e, t, i, n) { var r = n.renderer.createGroup({ id: n.element.id + "_Axis_MinorTickLines_" + t }), o = e.minorTicks, s = null !== o.interval ? o.interval : e.visibleRange.interval / 2, a = o.useRangeColor, l = o.color || this.gauge.themeStyle.minorTickColor; if (o.width && o.height && s) { for (var h = e.visibleRange.min, d = e.visibleRange.max; h <= d; h += s)this.majorValues.indexOf(+h.toFixed(3)) < 0 && Gr(new FY(n.element.id + "_Axis_Minor_TickLine_" + t + "_" + h, "transparent", o.width, a ? vo(h, e.ranges, l) : l, null, "0", this.calculateTicks(h, o, e), "", "pointer-events:none;"), r, n); i.appendChild(r) } }, e.prototype.drawMajorTickLines = function (e, t, i, n) { var r = n.renderer.createGroup({ id: n.element.id + "_Axis_MajorTickLines_" + t }), o = e.majorTicks, s = o.useRangeColor; this.majorValues = []; var a = o.color || this.gauge.themeStyle.majorTickColor; if (o.width && o.height && e.visibleRange.interval) { for (var l = e.visibleRange.min, h = e.visibleRange.max, d = e.visibleRange.interval; l <= h; l += d)this.majorValues.push(+l.toFixed(3)), Gr(new FY(n.element.id + "_Axis_Major_TickLine_" + t + "_" + l, "transparent", o.width, s ? vo(l, e.ranges, a) : a, null, "0", this.calculateTicks(l, o, e), "", "pointer-events:none;"), r, n); i.appendChild(r) } }, e.prototype.calculateTicks = function (e, t, i) { var n = i.lineStyle.width / 2 + t.offset, r = "Outside" === t.position, o = Jr(e, i.visibleRange.max, i.visibleRange.min, i.startAngle, i.endAngle, "ClockWise" === i.direction), s = to(o, i.currentRadius + (r ? n : -n), this.gauge.midPoint), a = to(o, i.currentRadius + (r ? n : -n) + (r ? t.height : -t.height), this.gauge.midPoint); return "M " + s.x + " " + s.y + " L " + a.x + " " + a.y + " " }, e.prototype.drawAxisRange = function (e, t, i, n) { var r, o, s, a, l, h, d, c, p, u, g = this, m = n.renderer.createGroup({ id: n.element.id + "_Axis_Ranges_" + t }), f = this.gauge.midPoint, y = "ClockWise" === e.direction, v = e.visibleRange.min, w = e.visibleRange.max; e.ranges.map(function (i, b) { g.calculateRangeRadius(e, i), s = Math.min(Math.max(i.start, v), i.end), a = Math.min(Math.max(i.start, i.end), w), r = Jr(s, w, v, e.startAngle, e.endAngle, y), o = Jr(a, w, v, e.startAngle, e.endAngle, y); var C = r > o; if (null != e.rangeGap && e.rangeGap > 0 && (r = 0 !== b || e.startAndEndRangeGap ? r + e.rangeGap / Math.PI : r, o = b !== e.ranges.length - 1 || e.startAndEndRangeGap ? o - e.rangeGap / Math.PI : o), s !== a && (C ? r < o + 360 : r < o)) { l = i.startWidth.length > 0 ? Wr(i.startWidth, i.currentRadius) : i.startWidth, h = i.endWidth.length > 0 ? Wr(i.endWidth, i.currentRadius) : i.endWidth, o = y ? o : [r, r = o][0], h = y ? h : [l, l = h][0]; var L = i.roundedCornerRadius, M = .25 * L; p = ((i.currentRadius - l / 2) * (r * Math.PI / 180) - L / M) / (i.currentRadius - l / 2) * 180 / Math.PI, u = ((i.currentRadius - h / 2) * (o * Math.PI / 180) + L / M) / (i.currentRadius - h / 2) * 180 / Math.PI, d = (i.currentRadius * (r * Math.PI / 180) + L) / i.currentRadius * 180 / Math.PI, c = (i.currentRadius * (o * Math.PI / 180) - L) / i.currentRadius * 180 / Math.PI, i.roundedCornerRadius ? Gr(new FY(n.element.id + "_Axis_" + t + "_Range_" + b, i.rangeColor, 0, i.rangeColor, i.opacity, "0", ro(f, Math.floor(d), Math.ceil(c), p, u, i.currentRadius, l, h), "", "pointer-events:none;"), m, n) : Gr(new FY(n.element.id + "_Axis_" + t + "_Range_" + b, i.rangeColor, 0, i.rangeColor, i.opacity, "0", io(n.midPoint, Math.floor(r), Math.ceil(o), i.currentRadius, l, h), "", "pointer-events:none;"), m, n) } }), i.appendChild(m) }, e.prototype.calculateRangeRadius = function (e, t) { var i = null !== t.radius ? t.radius : "100%"; t.currentRadius = Ur(i, e.currentRadius) }, e.prototype.setRangeColor = function (e) { var t = (this.gauge.theme, ["#50c917", "#27d5ff", "#fcde0b", "#ffb133", "#ff5985"]); e.ranges.map(function (e, i) { e.rangeColor = e.color ? e.color : t[i % t.length] }) }, e }(), uU = function () { function e(e) { this.gauge = e } return e.prototype.drawPointers = function (e, t, i, n, r) { var o = this; void 0 === r && (r = !0); var s, a = n.renderer.createGroup({ id: n.element.id + "_Axis_Pointers_" + t }); e.pointers.map(function (i, l) { e.visibleRange, i.pathElement = [], o.calculatePointerRadius(e, i), s = n.renderer.createGroup({ id: n.element.id + "_Axis_" + t + "_Pointer_" + l }), o["draw" + i.type + "Pointer"](e, t, l, s, n), o.setPointerValue(e, i, i.currentValue), a.appendChild(s), r && o.doPointerAnimation(i, e) }), i.appendChild(a) }, e.prototype.calculatePointerRadius = function (e, t) { t.currentRadius = null === t.radius ? e.currentRadius - (e.farSize + 5) : Ur(t.radius, e.currentRadius) }, e.prototype.drawNeedlePointer = function (e, t, i, n, r) { var o, s, a, l, h = e.pointers[i], d = r.midPoint, c = h.pointerWidth / 2; s = to(0, h.currentRadius, d); var p = h.color || this.gauge.themeStyle.needleColor; a = "M " + d.x + " " + (d.y - c) + " L " + s.x + " " + d.y + " L " + d.x + " " + (d.y + c) + " Z", h.pathElement.push(Gr(new FY(r.element.id + "_Axis_" + t + "_Pointer_Needle_" + i, p, h.border.width, h.border.color, null, "0", a), n, r)), o = Ur(h.needleTail.length, h.currentRadius), l = "M " + d.x + " " + (d.y - c) + " L " + s.x + " " + (d.y - c) + " L " + s.x + " " + (d.y + c) + " L " + d.x + " " + (d.y + c), o && (s = to(180, o, r.midPoint), a = "M " + d.x + " " + (d.y - c) + " L " + s.x + " " + (d.y - c) + " L " + s.x + " " + (d.y + c) + " L " + d.x + " " + (d.y + c) + " Z", h.pathElement.push(Gr(new FY(r.element.id + "_Axis_" + t + "_Pointer_NeedleTail_" + i, h.needleTail.color || this.gauge.themeStyle.needleTailColor, h.needleTail.border.width, h.needleTail.border.color, null, "0", a), n, r)), l += " L " + s.x + " " + (d.y + c) + " L " + s.x + " " + (d.y - c)); var u = h.cap.color || this.gauge.themeStyle.capColor; h.cap.radius && h.pathElement.push(Gr(yo(d, "Circle", new WY(2 * h.cap.radius, 2 * h.cap.radius), "", new FY(r.element.id + "_Axis_" + t + "_Pointer_NeedleCap_" + i, u, h.cap.border.width, h.cap.border.color, null, "0", "", "")), n, r, "Ellipse")), h.pathElement.push(Gr(new FY(r.element.id + "_Axis_" + t + "_Pointer_NeedleRect_" + i, "transparent", 0, "transpanret", null, "0", l + " Z"), n, r)) }, e.prototype.setPointerValue = function (e, t, i) { var n = this.gauge.midPoint, r = "ClockWise" === e.direction, o = Jr(e.visibleRange.min, e.visibleRange.max, e.visibleRange.min, e.startAngle, e.endAngle, r), s = Jr(i, e.visibleRange.max, e.visibleRange.min, e.startAngle, e.endAngle, r); s = r ? o === s ? s + 1 : s : o === s ? [o, o = s - 1][0] : [o, o = s][0]; var a, l, h, c, p = t.roundedCornerRadius, u = .25 * p; i <= u && (p = 8, u = .25 * (p /= 2)), h = ((t.currentRadius - t.pointerWidth / 2) * (o * Math.PI / 180) - p / u) / (t.currentRadius - t.pointerWidth / 2) * 180 / Math.PI, c = ((t.currentRadius - t.pointerWidth / 2) * (s * Math.PI / 180) + p / u) / (t.currentRadius - t.pointerWidth / 2) * 180 / Math.PI, a = (t.currentRadius * (o * Math.PI / 180) + p) / t.currentRadius * 180 / Math.PI, l = (t.currentRadius * (s * Math.PI / 180) - p) / t.currentRadius * 180 / Math.PI, d(t.currentRadius) && this.calculatePointerRadius(e, t), t.pathElement.map(function (d) { "RangeBar" === t.type ? t.roundedCornerRadius && i ? (d.setAttribute("d", ro(n, Math.floor(a), Math.ceil(l), h, c, t.currentRadius, t.pointerWidth, t.pointerWidth)), p = 0) : d.setAttribute("d", so(n, o, s, t.currentRadius, t.currentRadius - t.pointerWidth)) : d.setAttribute("transform", "rotate(" + Jr(i, e.visibleRange.max, e.visibleRange.min, e.startAngle, e.endAngle, r) + "," + n.x + "," + n.y + ")"), d.setAttribute("aria-label", t.description || "Pointer:" + i.toString()) }) }, e.prototype.drawMarkerPointer = function (e, t, i, n, r) { var o = e.pointers[i], s = to(0, o.currentRadius, r.midPoint); o.pathElement.push(Gr(yo(s, o.markerShape, new WY(o.markerWidth, o.markerHeight), o.imageUrl, new FY(r.element.id + "_Axis_" + t + "_Pointer_Marker_" + i, o.color || this.gauge.themeStyle.pointerColor, o.border.width, o.border.color, null, "0", "", "")), n, r, "Circle" === o.markerShape ? "Ellipse" : "Image" === o.markerShape ? "Image" : "Path")) }, e.prototype.drawRangeBarPointer = function (e, t, i, n, r) { var o = e.pointers[i]; o.pathElement.push(Gr(new FY(r.element.id + "_Axis_" + t + "_Pointer_RangeBar_" + i, o.color || this.gauge.themeStyle.pointerColor, o.border.width, o.border.color, 1, "0", ""), n, r)) }, e.prototype.doPointerAnimation = function (e, t) { var i = this, n = t.visibleRange.min, r = e.currentValue; e.animation.enable && n !== r && this.gauge.animatePointer && e.pathElement.map(function (o) { "RangeBar" === e.type ? i.performRangeBarAnimation(o, n, r, t, e, e.currentRadius, e.currentRadius - e.pointerWidth) : i.performNeedleAnimation(o, n, r, t, e, e.currentRadius, e.currentRadius - e.pointerWidth) }) }, e.prototype.performNeedleAnimation = function (e, t, i, n, r, o, s) { var a, l = this, h = "ClockWise" === n.direction, d = Jr(t, n.visibleRange.max, n.visibleRange.min, n.startAngle, n.endAngle, h), c = Jr(i, n.visibleRange.max, n.visibleRange.min, n.startAngle, n.endAngle, h), p = d > c ? c + 360 : c; new fw({}).animate(e, { duration: r.animation.duration, progress: function (n) { a = t < i || Math.round(d) === Math.round(p) ? h ? p - d : p - d - 360 : h ? p - d - 360 : p - d, e.style.animation = "None", e.setAttribute("transform", "rotate(" + Xr(n.timeStamp, d, a, n.duration) + "," + l.gauge.midPoint.x.toString() + "," + l.gauge.midPoint.y.toString() + ")") }, end: function (t) { l.setPointerValue(n, r, i), ("Marker" === r.type || e.id.indexOf("_Pointer_NeedleCap") >= 0) && l.gauge.trigger("animationComplete", l.gauge.isBlazor ? {} : { axis: n, pointer: r }) } }) }, e.prototype.performRangeBarAnimation = function (e, t, i, n, r, o, s) { var a, l, h, d = this, c = "ClockWise" === n.direction, p = Jr(t, n.visibleRange.max, n.visibleRange.min, n.startAngle, n.endAngle, c), u = Jr(n.visibleRange.min, n.visibleRange.max, n.visibleRange.min, n.startAngle, n.endAngle, c), g = Jr(i, n.visibleRange.max, n.visibleRange.min, n.startAngle, n.endAngle, c), m = r.roundedCornerRadius, f = .25 * o; m && (u = (r.currentRadius * (u * Math.PI / 180) + m) / r.currentRadius * 180 / Math.PI, g = (r.currentRadius * (g * Math.PI / 180) - m) / r.currentRadius * 180 / Math.PI, h = ((r.currentRadius - r.pointerWidth / 2) * (p * Math.PI / 180) - o / f) / (r.currentRadius - r.pointerWidth / 2) * 180 / Math.PI), l = p > g ? g + 360 : g, new fw({}).animate(e, { duration: r.animation.duration, progress: function (n) { e.style.animation = "None", a = t < i || Math.round(p) === Math.round(l) ? c ? l - p : l - p - 360 : c ? l - p - 360 : l - p, c ? m ? e.setAttribute("d", ro(d.gauge.midPoint, Math.floor(u), Xr(n.timeStamp, Math.floor(u), a, n.duration) + 1e-4, h, Xr(n.timeStamp, Math.floor(u + m / 2), a, n.duration) + 1e-4, o, r.pointerWidth, r.pointerWidth)) : e.setAttribute("d", so(d.gauge.midPoint, u, Xr(n.timeStamp, p, a, n.duration) + 1e-4, o, s)) : m ? (a += m, e.setAttribute("d", ro(d.gauge.midPoint, Xr(n.timeStamp, Math.floor(h), a, n.duration), Math.floor(h) + 1e-4, Xr(n.timeStamp, Math.floor(u - m - m / 2), a, n.duration), Math.floor(h + m / 2) + 1e-4, o, r.pointerWidth, r.pointerWidth))) : e.setAttribute("d", so(d.gauge.midPoint, Xr(n.timeStamp, p, a, n.duration), u + 1e-4, o, s)) }, end: function (e) { d.setPointerValue(n, r, i), d.gauge.trigger("animationComplete", d.gauge.isBlazor ? {} : { axis: n, pointer: r }) } }) }, e }(), gU = function () { function e(e) { this.gauge = e, this.axisRenderer = new pU(e), this.pointerRenderer = new uU(e) } return e.prototype.measureAxis = function (e) { this.measureAxisSize(this.gauge, e), this.calculateAxesRadius() }, e.prototype.calculateAxesRadius = function () { for (var e, t, i = this, n = 0, r = this.gauge.margin.left + this.gauge.margin.right, o = this.gauge.margin.top + this.gauge.margin.bottom, s = function (s) { if (e = Math.min(s.rect.width, s.rect.height) / 2, t = null != s.radius ? Ur(s.radius, e) : e, n = Math.max.apply(Math, s.ranges.map(function (e) { return e.radius ? e.radius.indexOf("%") < 0 ? 100 : parseInt(e.radius, 10) : 0 })), t = n > 100 && null == s.radius ? 100 * t / n : t, s.currentRadius = t - s.nearSize, a.gauge.moveToCenter && 1 === a.gauge.axes.length && d(a.gauge.centerX) && d(a.gauge.centerY)) { var l = void 0, h = void 0, c = to((l = $r(l = s.startAngle, s.endAngle) ? [0, h = 360][0] : l) - 90, t, a.gauge.midPoint); h = s.endAngle; var p = to((h -= $r(l, h) ? 1e-4 : 0) - 90, t, a.gauge.midPoint), u = void 0, g = void 0, m = void 0, f = void 0, y = void 0, v = void 0, w = void 0; l > h && !(Math.abs(l - h) > 90) || (l >= 270 && l <= 360 && (h > 270 && h <= 360 || h >= 0 && h <= 180) ? (m = Math.abs(a.gauge.gaugeRect.x - Math.abs(c.x - a.gauge.gaugeRect.x)), w = h <= 360 && h >= 270 ? a.gauge.midPoint : h <= 90 ? p : to(0, t, a.gauge.midPoint), f = Math.abs(w.x - a.gauge.gaugeRect.width), c = h <= 360 && h >= 270 ? p : to(270, t, a.gauge.midPoint), y = Math.abs(c.y - a.gauge.gaugeRect.y), p = h <= 360 && h >= 270 || h >= 0 && h < 90 ? a.gauge.midPoint : h >= 90 && h <= 180 ? p : to(90, t, a.gauge.midPoint), v = Math.abs(p.y - (a.gauge.gaugeRect.y + a.gauge.gaugeRect.height))) : l >= 0 && l < 90 && h >= 0 && h <= 270 ? (y = Math.abs(c.y - a.gauge.gaugeRect.y), w = h >= 180 ? to(90, t, a.gauge.midPoint) : p, v = Math.abs(w.y - (a.gauge.gaugeRect.y + a.gauge.gaugeRect.height)), c = h >= 180 ? p : a.gauge.midPoint, m = Math.abs(a.gauge.gaugeRect.x - Math.abs(c.x - a.gauge.gaugeRect.x)), p = h >= 90 ? to(0, t, a.gauge.midPoint) : p, f = Math.abs(p.x - a.gauge.gaugeRect.width)) : l >= 90 && l < 180 && h > 90 && h <= 360 ? (w = h <= 180 ? a.gauge.midPoint : h >= 270 ? to(180, t, a.gauge.midPoint) : p, m = Math.abs(w.x - a.gauge.gaugeRect.x), f = Math.abs(c.x - a.gauge.gaugeRect.width), c = h > 270 ? to(h - 90, t, a.gauge.midPoint) : a.gauge.midPoint, y = Math.abs(a.gauge.gaugeRect.y - c.y), p = h >= 180 ? to(90, t, a.gauge.midPoint) : p, v = Math.abs(p.y - (a.gauge.gaugeRect.y + a.gauge.gaugeRect.height))) : l >= 180 && l <= 270 && (h <= 360 && h >= 270 || h <= 180 && h >= 0) && (w = h > 180 && h < 270 ? p : to(180, t, a.gauge.midPoint), m = Math.abs(a.gauge.gaugeRect.x - Math.abs(w.x - a.gauge.gaugeRect.x)), w = h >= 180 && h <= 360 ? a.gauge.midPoint : p, f = Math.abs(w.x - a.gauge.gaugeRect.width), w = h > 180 && h < 270 ? a.gauge.midPoint : h >= 270 && h <= 360 ? p : to(270, t, a.gauge.midPoint), y = Math.abs(w.y - a.gauge.gaugeRect.y), v = Math.abs(c.y - (a.gauge.gaugeRect.y + a.gauge.gaugeRect.height))), d(m) || d(f) || d(y) || d(v) || !(m > 0 || f > 0) || !(y > 0 || v > 0) || (u = Math.abs(m + f - r), g = Math.abs(y + v - o), a.gauge.midPoint.x = a.gauge.midPoint.x - m / 2 + f / 2, a.gauge.midPoint.y = a.gauge.midPoint.y - y / 2 + v / 2, e = Math.min(a.gauge.gaugeRect.width, a.gauge.gaugeRect.height) / 2 + Math.min(u, g) / 2, s.currentRadius = (null != s.radius ? Ur(s.radius, e) : e) - s.nearSize)) } s.visibleRange.interval = a.calculateNumericInterval(s, s.rect); var b; b = { cancel: !1, name: "radiusCalculate", currentRadius: s.currentRadius, gauge: a.gauge, midPoint: a.gauge.midPoint, axis: s }, a.gauge.trigger("radiusCalculate", b, function (e) { s.currentRadius = b.currentRadius, i.gauge.midPoint = b.midPoint }), a.calculateVisibleLabels(s) }, a = this, l = 0, h = this.gauge.axes; l < h.length; l++) { s(h[l]) } }, e.prototype.measureAxisSize = function (e, t) { var i, n = this; this.computeSize(e.axes, t), e.axes.map(function (e, r) { i = Qr(r, n.farSizes.length, n.farSizes), e.rect = new _Y(t.x + i, t.y + i, t.width - 2 * i, t.height - 2 * i) }) }, e.prototype.calculateAxisValues = function (e) { for (var t = 0, i = this.gauge.axes; t < i.length; t++) { var n = i[t]; this.calculateVisibleRange(n, e), this.calculateVisibleLabels(n) } }, e.prototype.calculateVisibleRange = function (e, t) { var i = e.majorTicks.interval, n = Math.min(null === e.minimum ? 0 : e.minimum, e.maximum), r = Math.max(e.minimum, null === e.maximum ? 100 : e.maximum); e.pointers.map(function (t) { t.currentValue = null !== t.value ? t.value < n ? n : t.value > r ? r : t.value : n, n = null === e.minimum ? Math.min(t.currentValue, n) : n, r = null === e.maximum ? Math.max(t.currentValue, r) : r }), n = n === r ? null !== i ? n - i : n - 1 : n, e.visibleRange = { min: n, max: r, interval: i }, e.visibleRange.interval = this.calculateNumericInterval(e, t) }, e.prototype.calculateNumericInterval = function (e, t) { if (null !== e.majorTicks.interval) return e.majorTicks.interval; var i = e.endAngle - e.startAngle; return i = i <= 0 ? i + 360 : i, this.calculateNiceInterval(e.visibleRange.max, e.visibleRange.min, e.currentRadius ? e.currentRadius : t.width / 2, i) }, e.prototype.calculateNiceInterval = function (e, t, i, n) { for (var r = e - t, o = 2 * Math.PI * i * (n / 360), s = Math.max(.01599 * o, 1), a = r / s, l = Math.pow(10, Math.floor(Math.log(a) / Math.log(10))), h = 0, d = [10, 5, 2, 1]; h < d.length; h++) { var c = l * d[h]; if (s < r / c) break; a = c } return a }, e.prototype.calculateVisibleLabels = function (e) { var t, i = e.labelStyle, n = i.format && null !== i.format.match("{value}"), r = this.gauge.intl.getNumberFormat({ format: fo(i.format), useGrouping: this.gauge.useGroupingSeparator }); e.visibleLabels = []; for (var o, s = function (s, l, h) { o = e.roundingPlaces ? parseFloat(s.toFixed(e.roundingPlaces)) : s, t = { cancel: !1, name: "axisLabelRender", axis: e, text: n ? i.format.replace(new RegExp("{value}", "g"), r(o)) : r(o), value: o }, a.gauge.trigger("axisLabelRender", t, function (i) { t.cancel || e.visibleLabels.push(new UY(t.text, s)) }) }, a = this, l = e.visibleRange.min, h = e.visibleRange.interval, d = e.visibleRange.max; l <= d && h; l += h)s(l); var c = e.visibleLabels.length ? e.visibleLabels[e.visibleLabels.length - 1].value : null, p = e.visibleRange.max; c !== p && !0 === e.showLastLabel && (t = { cancel: !1, name: "axisLabelRender", axis: e, text: n ? i.format.replace(new RegExp("{value}", "g"), r(p)) : r(p), value: p }, this.gauge.trigger("axisLabelRender", t, function (i) { t.cancel || e.visibleLabels.push(new UY(t.text, p)) })), this.getMaxLabelWidth(this.gauge, e) }, e.prototype.computeSize = function (e, t) { var i, n, r, o, s, a, l = 0, h = 0, d = 0; this.farSizes = [], this.calculateAxisValues(t); for (var c = 0, p = e; c < p.length; c++) { var u = p[c]; i = u.lineStyle.width / 2, n = 0, r = 0, o = "Outside" === u.majorTicks.position, l = u.majorTicks.offset, s = "Outside" === u.minorTicks.position, h = u.minorTicks.offset, a = "Outside" === u.labelStyle.position, d = u.labelStyle.offset, n += o && s && a ? 0 : 5, n += (o ? u.majorTicks.height + i : 0) + (a ? u.maxLabelSize.height + 10 + d : 0) + (s && !o ? u.minorTicks.height + i : 0) + i, n += o && s ? Math.max(l, h) : o ? l : s ? h : 0, r += (o ? 0 : u.majorTicks.height + i) + (a ? 0 : u.maxLabelSize.height + 10 + d) + (!s && o ? u.minorTicks.height + i : 0) + i, r += o || s ? o ? s ? 0 : h : l : Math.max(l, h), this.farSizes[this.farSizes.length - 1] && (this.farSizes[this.farSizes.length - 1] += r + n), u.nearSize = n - 5, u.farSize = r, n = this.gauge.axes.length === this.farSizes.length + 1 ? 0 : n, this.farSizes.push(n) } }, e.prototype.renderAxes = function (e) { var t = this; void 0 === e && (e = !0); var i, n = this.gauge, r = this.axisRenderer, o = n.renderer.createGroup({ id: n.element.id + "_AxesCollection", "clip-path": "url(#" + n.element.id + "_GaugeAreaClipRect_)" }); n.element.appendChild(M("div", { id: n.element.id + "_Secondary_Element", styles: "position: relative" })), n.axes.map(function (s, a) { i = n.renderer.createGroup({ id: n.element.id + "_Axis_Group_" + a }), r.drawAxisOuterLine(s, a, i, n), r.drawAxisRange(s, a, i, n), r.drawAxisLine(s, a, i, n), r.drawMajorTickLines(s, a, i, n), r.drawMinorTickLines(s, a, i, n), r.drawAxisLabels(s, a, i, n), t.pointerRenderer.drawPointers(s, a, i, n, e), n.annotationsModule && n.annotationsModule.renderAnnotation(s, a), o.appendChild(i) }), n.svgObject.appendChild(n.renderer.drawClipPath({ id: n.element.id + "_GaugeAreaClipRect_", x: 0, y: 0, width: n.availableSize.width, height: n.availableSize.height, fill: "transparent", stroke: "transparent" })), n.svgObject.appendChild(o) }, e.prototype.getMaxLabelWidth = function (e, t) { t.maxLabelSize = new WY(0, 0); for (var i = 0, n = t.visibleLabels; i < n.length; i++) { var r = n[i]; r.size = Vr(r.text, t.labelStyle.font), t.maxLabelSize.width = r.size.width > t.maxLabelSize.width ? r.size.width : t.maxLabelSize.width, t.maxLabelSize.height = r.size.height > t.maxLabelSize.height ? r.size.height : t.maxLabelSize.height } }, e }(), mU = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), fU = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, yU = function (e) { function t(t, i) { return e.call(this, t, i) || this } return mU(t, e), t.prototype.preRender = function () { this.isBlazor = window.Blazor, this.unWireEvents(), this.trigger("load", { gauge: this }), this.initPrivateVariable(), this.setCulture(), this.createSvg(), this.wireEvents() }, t.prototype.render = function () { this.setTheme(), this.calculateBounds(), this.renderElements() }, t.prototype.setTheme = function () { this.themeStyle = function (e) { var t; switch (e.toLowerCase()) { case "materialdark": case "fabricdark": case "bootstrapdark": t = { backgroundColor: "#333232", titleFontColor: "#ffffff", tooltipFillColor: "#FFFFFF", tooltipFontColor: "#000000", labelColor: "#DADADA", lineColor: "#C8C8C8", majorTickColor: "#C8C8C8", minorTickColor: "#9A9A9A", pointerColor: "#9A9A9A", capColor: "#9A9A9A", needleColor: "#9A9A9A", needleTailColor: "#9A9A9A" }; break; case "highcontrast": t = { backgroundColor: "#000000", titleFontColor: "#FFFFFF", tooltipFillColor: "#ffffff", tooltipFontColor: "#000000", labelColor: "#FFFFFF", lineColor: "#FFFFFF", majorTickColor: "#FFFFFF", minorTickColor: "#FFFFFF", pointerColor: "#FFFFFF", capColor: "#FFFFFF", needleColor: "#FFFFFF", needleTailColor: "#FFFFFF" }; break; case "bootstrap4": t = { backgroundColor: "#FFFFFF", titleFontColor: "#212529", tooltipFillColor: "#000000", tooltipFontColor: "#FFFFFF", labelColor: "#212529", lineColor: "#DEE2E6", majorTickColor: "#ADB5BD", minorTickColor: "#CED4DA", pointerColor: "#6C757D", capColor: "#6C757D", needleColor: "#6C757D", needleTailColor: "#6C757D", fontFamily: "HelveticaNeue-Medium", fontSize: "16px", labelFontFamily: "HelveticaNeue", tooltipFillOpacity: 1, tooltipTextOpacity: .9 }; break; default: t = { backgroundColor: "#FFFFFF", titleFontColor: "#424242", tooltipFillColor: "#363F4C", tooltipFontColor: "#ffffff", labelColor: "#212121", lineColor: "#E0E0E0", majorTickColor: "#9E9E9E", minorTickColor: "#9E9E9E", pointerColor: "#757575", capColor: "#757575", needleColor: "#757575", needleTailColor: "#757575" } }return t }(this.theme) }, t.prototype.unWireEvents = function () { Kv.remove(this.element, uw.touchStartEvent, this.gaugeOnMouseDown), Kv.remove(this.element, uw.touchMoveEvent, this.mouseMove), Kv.remove(this.element, uw.touchEndEvent, this.mouseEnd), Kv.remove(this.element, "contextmenu", this.gaugeRightClick), Kv.remove(this.element, uw.isPointer ? "pointerleave" : "mouseleave", this.mouseLeave), window.removeEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.gaugeResize) }, t.prototype.wireEvents = function () { Kv.add(this.element, uw.touchStartEvent, this.gaugeOnMouseDown, this), Kv.add(this.element, uw.touchMoveEvent, this.mouseMove, this), Kv.add(this.element, uw.touchEndEvent, this.mouseEnd, this), Kv.add(this.element, "contextmenu", this.gaugeRightClick, this), Kv.add(this.element, uw.isPointer ? "pointerleave" : "mouseleave", this.mouseLeave, this), window.addEventListener(uw.isTouch && "orientation" in window && "onorientationchange" in window ? "orientationchange" : "resize", this.gaugeResize.bind(this)), this.setGaugeStyle(this.element) }, t.prototype.mouseMove = function (e) { var t = this, i = this.getMouseArgs(e, "touchmove", "gaugeMouseMove"); return this.trigger("gaugeMouseMove", i, function (e) { var n, r; t.tooltipModule; if (!i.cancel && t.enablePointerDrag && t.activePointer) { var o = parseInt(t.activePointer.pathElement[0].id.slice(-1), 10), s = parseInt(t.activePointer.pathElement[0].id.match(/\d/g)[0], 10); n = { axis: t.activeAxis, pointer: t.activePointer, previousValue: t.activePointer.currentValue, name: "dragMove", currentValue: null, axisIndex: s, pointerIndex: o }, r = { previousValue: t.activePointer.currentValue, name: "dragMove", currentValue: null, pointerIndex: o, axisIndex: s }, t.pointerDrag(new HY(i.x, i.y)), n.currentValue = r.currentValue = t.activePointer.currentValue, t.trigger("dragMove", t.isBlazor ? r : n) } }), this.notify(uw.touchMoveEvent, e), !1 }, t.prototype.mouseLeave = function (e) { this.activeAxis = null, this.activePointer = null, this.svgObject.setAttribute("cursor", "auto"); var t = this.getMouseArgs(e, "touchmove", "gaugeMouseLeave"); return this.trigger("gaugeMouseLeave", t), !1 }, t.prototype.gaugeRightClick = function (e) { return 2 !== e.buttons && "touch" !== e.pointerType || (e.preventDefault(), e.stopPropagation(), !1) }, t.prototype.pointerDrag = function (e) { var t = this.activeAxis, i = t.visibleRange, n = Kr(eo(this.midPoint, e), i.max, i.min, t.startAngle, t.endAngle, "ClockWise" === t.direction); n >= i.min && n <= i.max && (this.activePointer.currentValue = n, this.gaugeAxisLayoutPanel.pointerRenderer.setPointerValue(t, this.activePointer, n)) }, t.prototype.gaugeOnMouseDown = function (e) { var t, i = this, n = this.getMouseArgs(e, "touchstart", "gaugeMouseDown"); return this.trigger("gaugeMouseDown", n, function (r) { if (!n.cancel && n.target.id.indexOf("_Pointer_") >= 0 && n.target.id.indexOf(i.element.id + "_Axis_") >= 0) { t = uo(n.target.id, i), i.activeAxis = i.axes[t.axisIndex], i.activePointer = i.activeAxis.pointers[t.pointerIndex], d(i.activePointer.pathElement) && (i.activePointer.pathElement = [e.target]); var o = parseInt(i.activePointer.pathElement[0].id.slice(-1), 10), s = parseInt(i.activePointer.pathElement[0].id.match(/\d/g)[0], 10); i.trigger("dragStart", i.isBlazor ? { name: "dragStart", currentValue: i.activePointer.currentValue, pointerIndex: o, axisIndex: s } : { axis: i.activeAxis, name: "dragStart", pointer: i.activePointer, currentValue: i.activePointer.currentValue, pointerIndex: o, axisIndex: s }), i.svgObject.setAttribute("cursor", "pointer") } }), !1 }, t.prototype.mouseEnd = function (e) { var t = this.getMouseArgs(e, "touchend", "gaugeMouseUp"), i = { cancel: t.cancel, target: t.target, name: t.name, x: t.x, y: t.y }; "touch" === e.pointerType || "2" === e.pointerType || e.type, this.tooltipModule; if (this.trigger("gaugeMouseUp", this.isBlazor ? i : t), this.activeAxis && this.activePointer) { var n = parseInt(this.activePointer.pathElement[0].id.slice(-1), 10), r = parseInt(this.activePointer.pathElement[0].id.match(/\d/g)[0], 10); this.trigger("dragEnd", this.isBlazor ? { name: "dragEnd", currentValue: this.activePointer.currentValue, pointerIndex: n, axisIndex: r } : { name: "dragEnd", axis: this.activeAxis, pointer: this.activePointer, currentValue: this.activePointer.currentValue, axisIndex: r, pointerIndex: n }), this.activeAxis = null, this.activePointer = null } return this.svgObject.setAttribute("cursor", "auto"), this.notify(uw.touchEndEvent, e), !1 }, t.prototype.getMouseArgs = function (e, t, i) { var n = this.element.getBoundingClientRect(), r = new HY(-n.left, -n.top), o = e.type === t; return r.x += o ? e.changedTouches[0].clientX : e.clientX, r.y += o ? e.changedTouches[0].clientY : e.clientY, { cancel: !1, name: i, x: r.x, y: r.y, target: e.target } }, t.prototype.gaugeResize = function (e) { var t = this, i = { gauge: this.isBlazor ? null : this, previousSize: new WY(this.availableSize.width, this.availableSize.height), name: "resized", currentSize: new WY(0, 0) }; return this.animatePointer = !1, this.resizeTo && clearTimeout(this.resizeTo), this.element.classList.contains("e-circulargauge") && (this.resizeTo = window.setTimeout(function () { t.createSvg(), t.calculateBounds(), t.renderElements(), i.currentSize = t.availableSize, t.trigger("resized", i) }, 500)), !1 }, t.prototype.setGaugeStyle = function (e) { e.style.touchAction = this.enablePointerDrag ? "none" : "element", e.style.msTouchAction = this.enablePointerDrag ? "none" : "element", e.style.msContentZooming = "none", e.style.msUserSelect = "none", e.style.webkitUserSelect = "none", e.style.position = "relative" }, t.prototype.setCulture = function () { this.intl = new Gw }, t.prototype.createSvg = function () { this.removeSvg(), this.calculateSvgSize(), this.svgObject = this.renderer.createSvg({ id: this.element.id + "_svg", width: this.availableSize.width, height: this.availableSize.height }) }, t.prototype.removeSvg = function () { for (var e = 0; e < this.axes.length; e++)for (var t = 0; t < this.axes[e].annotations.length; t++)ue(this.element.id + "_Axis" + e + "_ContentTemplate" + t); if (po(this.element.id + "_Secondary_Element"), this.svgObject) { for (; this.svgObject.childNodes.length > 0;)this.svgObject.removeChild(this.svgObject.firstChild); !this.svgObject.hasChildNodes() && this.svgObject.parentNode && k(this.svgObject) } }, t.prototype.initPrivateVariable = function () { if ("" === this.element.id) { var e = document.getElementsByClassName("e-circulargauge").length; this.element.id = "circulargauge_control_" + e } this.renderer = new JE(this.element.id), this.gaugeAxisLayoutPanel = new gU(this), this.animatePointer = !0 }, t.prototype.calculateSvgSize = function () { var e = this.element.offsetWidth, t = this.element.offsetHeight, i = 2 * parseInt(this.element.style.borderWidth.split("px").join(""), 10), n = Ur(this.width, e) || e || 600, r = Ur(this.height, t) || t || 450; n = isNaN(i) ? n : n - i, r = isNaN(i) ? r : r - i, this.availableSize = new WY(n, r) }, t.prototype.calculateBounds = function () { var e, t = this.margin, i = 0; this.title && (i = Vr(this.title, this.titleStyle).height + 5); var n = t.top + i + this.border.width, r = t.left + this.border.width, o = this.availableSize.width - r - t.right - this.border.width, s = this.availableSize.height - n - this.border.width - t.bottom, a = Math.min(o, s) / 2; e = this.moveToCenter && 1 === this.axes.length && d(this.centerX) && d(this.centerY) ? new _Y(r, n, o, s) : new _Y(r + o / 2 - a, n + s / 2 - a, 2 * a, 2 * a), this.gaugeRect = e; var l = null !== this.centerX ? Ur(this.centerX, this.availableSize.width) : e.x + e.width / 2, h = null !== this.centerY ? Ur(this.centerY, this.availableSize.height) : e.y + e.height / 2; this.midPoint = new HY(l, h), this.gaugeAxisLayoutPanel.measureAxis(e) }, t.prototype.renderElements = function (e) { void 0 === e && (e = !0), this.renderBorder(), this.renderTitle(), this.gaugeAxisLayoutPanel.renderAxes(e), this.element.appendChild(this.svgObject), this.trigger("loaded", this.isBlazor ? {} : { gauge: this }) }, t.prototype.renderTitle = function () { if (this.title) { this.titleStyle.fontFamily = this.themeStyle.fontFamily || this.titleStyle.fontFamily, this.titleStyle.size = this.themeStyle.fontSize || this.titleStyle.size; var e = Vr(this.title, this.titleStyle), t = qr(new YY(this.element.id + "_CircularGaugeTitle", this.availableSize.width / 2, this.margin.top + e.height / 4 * 3, "middle", this.title), this.titleStyle, this.titleStyle.color || this.themeStyle.titleFontColor, this.svgObject, ""); t.setAttribute("aria-label", this.description || this.title), t.setAttribute("tabindex", this.tabIndex.toString()) } }, t.prototype.renderBorder = function () { var e = this.border.width; (e > 0 || this.background || this.themeStyle.backgroundColor) && this.svgObject.appendChild(this.renderer.drawRectangle(new VY(this.element.id + "_CircularGaugeBorder", this.background || this.themeStyle.backgroundColor, this.border, null, new _Y(e / 2, e / 2, this.availableSize.width - e, this.availableSize.height - e)))) }, t.prototype.setPointerValue = function (e, t, i) { var n = this, r = this.axes[e], o = r.pointers[t], s = o.currentRadius, a = o.animation.enable; i = (i = i < r.visibleRange.min ? r.visibleRange.min : i) > r.visibleRange.max ? r.visibleRange.max : i, o.pathElement.map(function (e) { "RangeBar" === o.type ? (_r(e, o.color, o.border), a ? n.gaugeAxisLayoutPanel.pointerRenderer.performRangeBarAnimation(e, o.currentValue, i, r, o, s, s - o.pointerWidth) : n.gaugeAxisLayoutPanel.pointerRenderer.setPointerValue(r, o, i)) : (e.id.indexOf("_Pointer_NeedleCap_") >= 0 ? _r(e, o.cap.color, o.cap.border) : e.id.indexOf("_Pointer_NeedleTail_") >= 0 ? _r(e, o.needleTail.color, o.needleTail.border) : e.id.indexOf("_Pointer_NeedleRect_") >= 0 ? _r(e, "transparent", { color: "transparent", width: 0 }) : _r(e, o.color, o.border), a ? n.gaugeAxisLayoutPanel.pointerRenderer.performNeedleAnimation(e, o.currentValue, i, r, o, s, s - o.pointerWidth) : n.gaugeAxisLayoutPanel.pointerRenderer.setPointerValue(r, o, i)) }), this.isProtectedOnChange = !0, o.currentValue = i, o.value = i, this.isProtectedOnChange = !1 }, t.prototype.setAnnotationValue = function (e, t, i) { var n = null !== ho(this.element.id + "_Annotations_" + e), r = ho(this.element.id + "_Annotations_" + e) || M("div", { id: this.element.id + "_Annotations_" + e }), o = this.axes[e].annotations[t]; null !== i && (po(this.element.id + "_Axis_" + e + "_Annotation_" + t), o.content = i, this.annotationsModule.createTemplate(r, t, e), n || ho(this.element.id + "_Secondary_Element").appendChild(r)) }, t.prototype.setRangeValue = function (e, t, i, n) { var r, o = ho(this.element.id + "_Axis_" + e + "_Range_" + t), s = this.axes[e], a = s.ranges[t], l = s.visibleRange, h = "ClockWise" === s.direction, d = Math.min(Math.max(i, l.min), n), c = Math.min(Math.max(i, n), l.max), p = Jr(d, l.max, l.min, s.startAngle, s.endAngle, h), u = Jr(c, l.max, l.min, s.startAngle, s.endAngle, h); r = a.startWidth.length > 0 ? Wr(a.startWidth, a.currentRadius) : a.startWidth; var g; g = a.endWidth.length > 0 ? Wr(a.endWidth, a.currentRadius) : a.endWidth, u = h ? u : [p, p = u][0], g = h ? g : [r, r = g][0], o.setAttribute("d", io(this.midPoint, Math.round(p), Math.round(u), a.currentRadius, r, g)), _r(o, a.color ? a.color : a.rangeColor, { color: a.color ? a.color : a.rangeColor, width: 0 }) }, t.prototype.destroy = function () { this.unWireEvents(), this.removeSvg(), e.prototype.destroy.call(this) }, t.prototype.requiredModules = function () { var e = [], t = !1; return this.axes.map(function (e) { e.annotations.map(function (e) { t = t || null !== e.content }) }), t && e.push({ member: "Annotations", args: [this, dU] }), this.tooltip.enable && e.push({ member: "Tooltip", args: [this, cU] }), e }, t.prototype.getPersistData = function () { return this.addOnPersist([]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = !1, n = !1, r = !1, o = 1 === Object.keys(e).length && e instanceof Object && !d(this.activePointer), s = 0, a = Object.keys(e); s < a.length; s++) { switch (a[s]) { case "height": case "width": case "centerX": case "centerY": case "margin": this.createSvg(), n = !0; break; case "title": n = "" === e.title || "" === t.title, i = !("" === e.title || "" === t.title); break; case "titleStyle": e.titleStyle && e.titleStyle.size ? n = !0 : i = !0; break; case "border": case "background": i = !0; break; case "axes": r = !0 } } o || (!n && i && (this.removeSvg(), this.renderElements()), n && (this.removeSvg(), this.calculateBounds(), this.renderElements()), !r || i || n || (this.removeSvg(), this.calculateBounds(), this.renderElements(!1))) }, t.prototype.getModuleName = function () { return "circulargauge" }, fU([Y(null)], t.prototype, "width", void 0), fU([Y(null)], t.prototype, "height", void 0), fU([U({ color: "transparent", width: 0 }, QY)], t.prototype, "border", void 0), fU([Y(null)], t.prototype, "background", void 0), fU([Y("")], t.prototype, "title", void 0), fU([U({ size: "15px", color: null }, XY)], t.prototype, "titleStyle", void 0), fU([U({}, JY)], t.prototype, "margin", void 0), fU([G([{}], hU)], t.prototype, "axes", void 0), fU([U({}, ZY)], t.prototype, "tooltip", void 0), fU([Y(!1)], t.prototype, "enablePointerDrag", void 0), fU([Y(null)], t.prototype, "centerX", void 0), fU([Y(null)], t.prototype, "centerY", void 0), fU([Y(!1)], t.prototype, "moveToCenter", void 0), fU([Y("Material")], t.prototype, "theme", void 0), fU([Y(!1)], t.prototype, "useGroupingSeparator", void 0), fU([Y(null)], t.prototype, "description", void 0), fU([Y(1)], t.prototype, "tabIndex", void 0), fU([X()], t.prototype, "loaded", void 0), fU([X()], t.prototype, "load", void 0), fU([X()], t.prototype, "animationComplete", void 0), fU([X()], t.prototype, "axisLabelRender", void 0), fU([X()], t.prototype, "radiusCalculate", void 0), fU([X()], t.prototype, "annotationRender", void 0), fU([X()], t.prototype, "tooltipRender", void 0), fU([X()], t.prototype, "dragStart", void 0), fU([X()], t.prototype, "dragMove", void 0), fU([X()], t.prototype, "dragEnd", void 0), fU([X()], t.prototype, "gaugeMouseMove", void 0), fU([X()], t.prototype, "gaugeMouseLeave", void 0), fU([X()], t.prototype, "gaugeMouseDown", void 0), fU([X()], t.prototype, "gaugeMouseUp", void 0), fU([X()], t.prototype, "resized", void 0), t = fU([J], t) }(Kw); yU.Inject(cU, dU); var vU, wU = Object.freeze({ CircularGauge: yU, Annotations: dU, Line: eU, Label: tU, Range: iU, Tick: nU, Cap: rU, NeedleTail: oU, Animation: sU, Annotation: aU, Pointer: lU, Axis: hU, Border: QY, Font: XY, Margin: JY, TooltipSettings: ZY, GaugeTooltip: cU, measureText: Vr, toPixel: Wr, getFontStyle: Hr, setStyles: _r, measureElementRect: Yr, stringToNumber: Ur, textElement: qr, appendPath: Gr, calculateSum: Qr, linear: Xr, getAngleFromValue: Jr, getDegree: Zr, getValueFromAngle: Kr, isCompleteAngle: $r, getAngleFromLocation: eo, getLocationFromAngle: to, getPathArc: io, getRangePath: no, getRoundedPathArc: ro, getRoundedPath: oo, getCompleteArc: so, getCirclePath: ao, getCompletePath: lo, getElement: ho, getTemplateFunction: co, removeElement: po, getPointer: uo, getElementSize: go, getMousePosition: mo, getLabelFormat: fo, calculateShapes: yo, getRangeColor: vo, CustomizeOption: BY, PathOption: FY, RectOption: VY, Size: WY, GaugeLocation: HY, Rect: _Y, TextOption: YY, VisibleLabels: UY }), bU = Object.freeze({ ZipArchive: yk, ZipArchiveItem: vk, CompressedStreamWriter: uk, CompressorHuffmanTree: gk, ChecksumCalculator: mk }), CU = Object.freeze({ DataManager: aA, Deferred: lA, Query: GD, Predicate: QD, Adaptor: KD, JsonAdaptor: $D, UrlAdaptor: eA, ODataAdaptor: tA, ODataV4Adaptor: iA, WebApiAdaptor: nA, WebMethodAdaptor: rA, RemoteSaveAdaptor: oA, CacheAdaptor: sA, DataUtil: JD }), LU = function () { function e(e, t) { this.width = e, this.height = t } return e.prototype.isEmpty = function () { return 0 === this.height && 0 === this.width }, e.prototype.clone = function () { return new e(this.width, this.height) }, e }(), MU = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SU = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, xU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return MU(t, e), t.equals = function (e, t) { return e === t || !(!e || !t) && (!e || !t || e.x === t.x && e.y === t.y) }, t.isEmptyPoint = function (e) { return !e.x || !e.y }, t.transform = function (e, t, i) { var n = { x: 0, y: 0 }; return n.x = Math.round(100 * (e.x + i * Math.cos(t * Math.PI / 180))) / 100, n.y = Math.round(100 * (e.y + i * Math.sin(t * Math.PI / 180))) / 100, n }, t.findLength = function (e, t) { return Math.sqrt(Math.pow(e.x - t.x, 2) + Math.pow(e.y - t.y, 2)) }, t.findAngle = function (e, t) { var i = Math.atan2(t.y - e.y, t.x - e.x); return i = 180 * i / Math.PI, (i %= 360) < 0 && (i += 360), i }, t.distancePoints = function (e, t) { return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2)) }, t.getLengthFromListOfPoints = function (e) { for (var t = 0, i = 0; i < e.length - 1; i++)t += this.distancePoints(e[i], e[i + 1]); return t }, t.adjustPoint = function (e, t, i, n) { var r, o = i ? { x: e.x, y: e.y } : { x: t.x, y: t.y }; return e.x === t.x ? e.y < t.y && i || e.y > t.y && !i ? o.y += n : o.y -= n : e.y === t.y ? e.x < t.x && i || e.x > t.x && !i ? o.x += n : o.x -= n : i ? (r = this.findAngle(e, t), o = this.transform(e, r, n)) : (r = this.findAngle(t, e), o = this.transform(t, r, n)), o }, t.direction = function (e, t) { return Math.abs(t.x - e.x) > Math.abs(t.y - e.y) ? e.x < t.x ? "Right" : "Left" : e.y < t.y ? "Bottom" : "Top" }, t.prototype.getClassName = function () { return "Point" }, SU([Y(0)], t.prototype, "x", void 0), SU([Y(0)], t.prototype, "y", void 0), t }(ww), TU = function () { function e(e, t, i, n) { this.x = Number.MAX_VALUE, this.y = Number.MAX_VALUE, this.width = 0, this.height = 0, void 0 === e || void 0 === t ? (e = t = Number.MAX_VALUE, i = n = 0) : (void 0 === i && (i = 0), void 0 === n && (n = 0)), this.x = e, this.y = t, this.width = i, this.height = n } return Object.defineProperty(e.prototype, "left", { get: function () { return this.x }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "right", { get: function () { return this.x + this.width }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "top", { get: function () { return this.y }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottom", { get: function () { return this.y + this.height }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "topLeft", { get: function () { return { x: this.left, y: this.top } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "topRight", { get: function () { return { x: this.right, y: this.top } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottomLeft", { get: function () { return { x: this.left, y: this.bottom } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottomRight", { get: function () { return { x: this.right, y: this.bottom } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "middleLeft", { get: function () { return { x: this.left, y: this.y + this.height / 2 } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "middleRight", { get: function () { return { x: this.right, y: this.y + this.height / 2 } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "topCenter", { get: function () { return { x: this.x + this.width / 2, y: this.top } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "bottomCenter", { get: function () { return { x: this.x + this.width / 2, y: this.bottom } }, enumerable: !0, configurable: !0 }), Object.defineProperty(e.prototype, "center", { get: function () { return { x: this.x + this.width / 2, y: this.y + this.height / 2 } }, enumerable: !0, configurable: !0 }), e.prototype.equals = function (e, t) { return e.x === t.x && e.y === t.y && e.width === t.width && e.height === t.height }, e.prototype.uniteRect = function (e) { var t = Math.max(Number.NaN === this.right || this.x === Number.MAX_VALUE ? e.right : this.right, e.right), i = Math.max(Number.NaN === this.bottom || this.y === Number.MAX_VALUE ? e.bottom : this.bottom, e.bottom); return this.x = Math.min(this.left, e.left), this.y = Math.min(this.top, e.top), this.width = t - this.x, this.height = i - this.y, this }, e.prototype.unitePoint = function (e) { if (this.x === Number.MAX_VALUE) return this.x = e.x, void (this.y = e.y); var t = Math.min(this.left, e.x), i = Math.min(this.top, e.y), n = Math.max(this.right, e.x), r = Math.max(this.bottom, e.y); this.x = t, this.y = i, this.width = n - this.x, this.height = r - this.y }, e.prototype.Inflate = function (e) { return this.x -= e, this.y -= e, this.width += 2 * e, this.height += 2 * e, this }, e.prototype.intersects = function (e) { return !(this.right < e.left || this.left > e.right || this.top > e.bottom || this.bottom < e.top) }, e.prototype.containsRect = function (e) { return this.left <= e.left && this.right >= e.right && this.top <= e.top && this.bottom >= e.bottom }, e.prototype.containsPoint = function (e, t) { return void 0 === t && (t = 0), this.left - t <= e.x && this.right + t >= e.x && this.top - t <= e.y && this.bottom + t >= e.y }, e.toBounds = function (t) { for (var i = new e, n = 0, r = t; n < r.length; n++) { var o = r[n]; i.unitePoint(o) } return i }, e.empty = new e(Number.MAX_VALUE, Number.MIN_VALUE, 0, 0), e }(); !function (e) { e[e.Identity = 0] = "Identity", e[e.Translation = 1] = "Translation", e[e.Scaling = 2] = "Scaling", e[e.Unknown = 4] = "Unknown" }(vU || (vU = {})); var DU, AU = function () { return function (e, t, i, n, r, o, s) { this.m11 = e, this.m12 = t, this.m21 = i, this.m22 = n, this.offsetX = r, this.offsetY = o, this.type = s } }(), EU = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), jU = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, IU = function (e) { switch (e.type) { case "Linear": return zU; case "Radial": return BU; default: return zU } }, kU = function () { return function (e, t, i, n) { this.left = e, this.right = t, this.top = i, this.bottom = n } }(), PU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y(0)], t.prototype, "left", void 0), jU([Y(0)], t.prototype, "right", void 0), jU([Y(0)], t.prototype, "top", void 0), jU([Y(0)], t.prototype, "bottom", void 0), t }(ww), NU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y(45)], t.prototype, "angle", void 0), jU([Y(5)], t.prototype, "distance", void 0), jU([Y(.7)], t.prototype, "opacity", void 0), jU([Y("lightgrey")], t.prototype, "color", void 0), t }(ww), OU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), t.prototype.getClassName = function () { return "Stop" }, jU([Y("")], t.prototype, "color", void 0), jU([Y(0)], t.prototype, "offset", void 0), jU([Y(1)], t.prototype, "opacity", void 0), t }(ww), RU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([G([], OU)], t.prototype, "stops", void 0), jU([Y("None")], t.prototype, "type", void 0), jU([Y("")], t.prototype, "id", void 0), t }(ww), zU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y(0)], t.prototype, "x1", void 0), jU([Y(0)], t.prototype, "x2", void 0), jU([Y(0)], t.prototype, "y1", void 0), jU([Y(0)], t.prototype, "y2", void 0), t }(RU), BU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y(0)], t.prototype, "cx", void 0), jU([Y(0)], t.prototype, "cy", void 0), jU([Y(0)], t.prototype, "fx", void 0), jU([Y(0)], t.prototype, "fy", void 0), jU([Y(50)], t.prototype, "r", void 0), t }(RU), FU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y("white")], t.prototype, "fill", void 0), jU([Y("black")], t.prototype, "strokeColor", void 0), jU([Y("")], t.prototype, "strokeDashArray", void 0), jU([Y(1)], t.prototype, "strokeWidth", void 0), jU([Y(1)], t.prototype, "opacity", void 0), jU([q(IU)], t.prototype, "gradient", void 0), t }(ww), VU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y("transparent")], t.prototype, "fill", void 0), t }(FU), WU = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return EU(t, e), jU([Y("black")], t.prototype, "color", void 0), jU([Y("Arial")], t.prototype, "fontFamily", void 0), jU([Y(12)], t.prototype, "fontSize", void 0), jU([Y(!1)], t.prototype, "italic", void 0), jU([Y(!1)], t.prototype, "bold", void 0), jU([Y("CollapseSpace")], t.prototype, "whiteSpace", void 0), jU([Y("WrapWithOverflow")], t.prototype, "textWrapping", void 0), jU([Y("Center")], t.prototype, "textAlign", void 0), jU([Y("None")], t.prototype, "textDecoration", void 0), jU([Y("Wrap")], t.prototype, "textOverflow", void 0), jU([Y("transparent")], t.prototype, "fill", void 0), t }(FU); !function (e) { e[e.Visible = 1] = "Visible", e[e.Hidden = 2] = "Hidden", e[e.Hover = 4] = "Hover", e[e.Connect = 8] = "Connect" }(DU || (DU = {})); var HU; !function (e) { e[e.None = 0] = "None", e[e.ShowHorizontalLines = 1] = "ShowHorizontalLines", e[e.ShowVerticalLines = 2] = "ShowVerticalLines", e[e.ShowLines = 3] = "ShowLines", e[e.SnapToHorizontalLines = 4] = "SnapToHorizontalLines", e[e.SnapToVerticalLines = 8] = "SnapToVerticalLines", e[e.SnapToLines = 12] = "SnapToLines", e[e.SnapToObject = 16] = "SnapToObject", e[e.All = 31] = "All" }(HU || (HU = {})); var _U; !function (e) { e[e.None = 1] = "None", e[e.ConnectorSourceThumb = 2] = "ConnectorSourceThumb", e[e.ConnectorTargetThumb = 4] = "ConnectorTargetThumb", e[e.ResizeSouthEast = 8] = "ResizeSouthEast", e[e.ResizeSouthWest = 16] = "ResizeSouthWest", e[e.ResizeNorthEast = 32] = "ResizeNorthEast", e[e.ResizeNorthWest = 64] = "ResizeNorthWest", e[e.ResizeEast = 128] = "ResizeEast", e[e.ResizeWest = 256] = "ResizeWest", e[e.ResizeSouth = 512] = "ResizeSouth", e[e.ResizeNorth = 1024] = "ResizeNorth", e[e.Rotate = 2048] = "Rotate", e[e.UserHandle = 4096] = "UserHandle", e[e.ToolTip = 8192] = "ToolTip", e[e.ResizeAll = 2046] = "ResizeAll", e[e.All = 16382] = "All" }(_U || (_U = {})); var YU; !function (e) { e[e.None = 1] = "None", e[e.Select = 2] = "Select", e[e.Delete = 4] = "Delete", e[e.Drag = 8] = "Drag", e[e.DragSourceEnd = 16] = "DragSourceEnd", e[e.DragTargetEnd = 32] = "DragTargetEnd", e[e.DragSegmentThumb = 64] = "DragSegmentThumb", e[e.AllowDrop = 128] = "AllowDrop", e[e.Bridging = 256] = "Bridging", e[e.BridgeObstacle = 512] = "BridgeObstacle", e[e.InheritBridging = 1024] = "InheritBridging", e[e.PointerEvents = 2048] = "PointerEvents", e[e.Tooltip = 4096] = "Tooltip", e[e.InheritTooltip = 8192] = "InheritTooltip", e[e.Interaction = 4218] = "Interaction", e[e.ReadOnly = 16384] = "ReadOnly", e[e.LineRouting = 32768] = "LineRouting", e[e.InheritLineRouting = 65536] = "InheritLineRouting", e[e.Default = 77374] = "Default" }(YU || (YU = {})); var UU; !function (e) { e[e.ReadOnly = 2] = "ReadOnly", e[e.InheritReadOnly = 4] = "InheritReadOnly", e[e.Select = 8] = "Select", e[e.Drag = 16] = "Drag", e[e.Resize = 32] = "Resize", e[e.Rotate = 64] = "Rotate", e[e.Interaction = 120] = "Interaction", e[e.None = 0] = "None" }(UU || (UU = {})); var qU; !function (e) { e[e.None = 0] = "None", e[e.Select = 2] = "Select", e[e.Drag = 4] = "Drag", e[e.Rotate = 8] = "Rotate", e[e.Shadow = 16] = "Shadow", e[e.PointerEvents = 32] = "PointerEvents", e[e.Delete = 64] = "Delete", e[e.InConnect = 128] = "InConnect", e[e.OutConnect = 256] = "OutConnect", e[e.Individual = 512] = "Individual", e[e.Expandable = 1024] = "Expandable", e[e.AllowDrop = 2048] = "AllowDrop", e[e.Inherit = 78] = "Inherit", e[e.ResizeNorthEast = 4096] = "ResizeNorthEast", e[e.ResizeEast = 8192] = "ResizeEast", e[e.ResizeSouthEast = 16384] = "ResizeSouthEast", e[e.ResizeSouth = 32768] = "ResizeSouth", e[e.ResizeSouthWest = 65536] = "ResizeSouthWest", e[e.ResizeWest = 131072] = "ResizeWest", e[e.ResizeNorthWest = 262144] = "ResizeNorthWest", e[e.ResizeNorth = 524288] = "ResizeNorth", e[e.Resize = 1044480] = "Resize", e[e.AspectRatio = 1048576] = "AspectRatio", e[e.HideThumbs = 16777216] = "HideThumbs", e[e.Tooltip = 2097152] = "Tooltip", e[e.InheritTooltip = 4194304] = "InheritTooltip", e[e.ReadOnly = 8388608] = "ReadOnly", e[e.Default = 5240814] = "Default" }(qU || (qU = {})); var GU; !function (e) { e[e.None = 0] = "None", e[e.ElementIsPort = 2] = "ElementIsPort", e[e.ElementIsGroup = 4] = "ElementIsGroup" }(GU || (GU = {})); var QU; !function (e) { e[e.Rotate = 2] = "Rotate", e[e.ConnectorSource = 4] = "ConnectorSource", e[e.ConnectorTarget = 8] = "ConnectorTarget", e[e.ResizeNorthEast = 16] = "ResizeNorthEast", e[e.ResizeEast = 32] = "ResizeEast", e[e.ResizeSouthEast = 64] = "ResizeSouthEast", e[e.ResizeSouth = 128] = "ResizeSouth", e[e.ResizeSouthWest = 256] = "ResizeSouthWest", e[e.ResizeWest = 512] = "ResizeWest", e[e.ResizeNorthWest = 1024] = "ResizeNorthWest", e[e.ResizeNorth = 2048] = "ResizeNorth", e[e.Default = 4094] = "Default" }(QU || (QU = {})); var XU; !function (e) { e[e.None = 1] = "None", e[e.Bridging = 2] = "Bridging", e[e.UndoRedo = 4] = "UndoRedo", e[e.Tooltip = 8] = "Tooltip", e[e.UserInteraction = 16] = "UserInteraction", e[e.ApiUpdate = 32] = "ApiUpdate", e[e.PageEditable = 48] = "PageEditable", e[e.Zoom = 64] = "Zoom", e[e.PanX = 128] = "PanX", e[e.PanY = 256] = "PanY", e[e.Pan = 384] = "Pan", e[e.ZoomTextEdit = 512] = "ZoomTextEdit", e[e.Virtualization = 1024] = "Virtualization", e[e.LineRouting = 2048] = "LineRouting", e[e.Default = 500] = "Default" }(XU || (XU = {})); var JU; !function (e) { e[e.None = 0] = "None", e[e.SingleSelect = 1] = "SingleSelect", e[e.MultipleSelect = 2] = "MultipleSelect", e[e.ZoomPan = 4] = "ZoomPan", e[e.DrawOnce = 8] = "DrawOnce", e[e.ContinuousDraw = 16] = "ContinuousDraw", e[e.Default = 3] = "Default" }(JU || (JU = {})); var ZU; !function (e) { e[e.Self = 1] = "Self", e[e.Parent = 2] = "Parent" }(ZU || (ZU = {})); var KU; !function (e) { e[e.Canvas = 0] = "Canvas", e[e.Svg = 1] = "Svg" }(KU || (KU = {})); var $U; !function (e) { e[e.None = 0] = "None", e[e.Control = 1] = "Control", e[e.Meta = 1] = "Meta", e[e.Alt = 2] = "Alt", e[e.Shift = 4] = "Shift" }($U || ($U = {})); var eq; !function (e) { e[e.None = null] = "None", e[e.Number0 = 0] = "Number0", e[e.Number1 = 1] = "Number1", e[e.Number2 = 2] = "Number2", e[e.Number3 = 3] = "Number3", e[e.Number4 = 4] = "Number4", e[e.Number5 = 5] = "Number5", e[e.Number6 = 6] = "Number6", e[e.Number7 = 7] = "Number7", e[e.Number8 = 8] = "Number8", e[e.Number9 = 9] = "Number9", e[e.A = 65] = "A", e[e.B = 66] = "B", e[e.C = 67] = "C", e[e.D = 68] = "D", e[e.E = 69] = "E", e[e.F = 70] = "F", e[e.G = 71] = "G", e[e.H = 72] = "H", e[e.I = 73] = "I", e[e.J = 74] = "J", e[e.K = 75] = "K", e[e.L = 76] = "L", e[e.M = 77] = "M", e[e.N = 78] = "N", e[e.O = 79] = "O", e[e.P = 80] = "P", e[e.Q = 81] = "Q", e[e.R = 82] = "R", e[e.S = 83] = "S", e[e.T = 84] = "T", e[e.U = 85] = "U", e[e.V = 86] = "V", e[e.W = 87] = "W", e[e.X = 88] = "X", e[e.Y = 89] = "Y", e[e.Z = 90] = "Z", e[e.Left = 37] = "Left", e[e.Up = 38] = "Up", e[e.Right = 39] = "Right", e[e.Down = 40] = "Down", e[e.Escape = 27] = "Escape", e[e.Space = 32] = "Space", e[e.PageUp = 33] = "PageUp", e[e.PageDown = 34] = "PageDown", e[e.End = 35] = "End", e[e.Home = 36] = "Home", e[e.Delete = 46] = "Delete", e[e.Tab = 9] = "Tab", e[e.Enter = 13] = "Enter", e[e.BackSpace = 8] = "BackSpace", e[e.F1 = 112] = "F1", e[e.F2 = 113] = "F2", e[e.F3 = 114] = "F3", e[e.F4 = 115] = "F4", e[e.F5 = 116] = "F5", e[e.F6 = 117] = "F6", e[e.F7 = 118] = "F7", e[e.F8 = 119] = "F8", e[e.F9 = 120] = "F9", e[e.F10 = 121] = "F10", e[e.F11 = 122] = "F11", e[e.F12 = 123] = "F12", e[e.Star = 56] = "Star", e[e.Plus = 187] = "Plus", e[e.Minus = 189] = "Minus" }(eq || (eq = {})); var tq; !function (e) { e[e.Render = 2] = "Render", e[e.PublicMethod = 4] = "PublicMethod", e[e.ToolAction = 8] = "ToolAction", e[e.UndoRedo = 16] = "UndoRedo", e[e.TextEdit = 32] = "TextEdit", e[e.Group = 64] = "Group", e[e.Clear = 128] = "Clear", e[e.PreventClearSelection = 256] = "PreventClearSelection", e[e.Interactions = 512] = "Interactions", e[e.PreventHistory = 1024] = "PreventHistory", e[e.PreventIconsUpdate = 2048] = "PreventIconsUpdate" }(tq || (tq = {})); var iq; !function (e) { e[e.None = 2] = "None", e[e.DrawSelectorBorder = 4] = "DrawSelectorBorder", e[e.PreventRenderSelector = 8] = "PreventRenderSelector" }(iq || (iq = {})); var nq; !function (e) { e[e.None = 0] = "None", e[e.PreventDrag = 2] = "PreventDrag", e[e.PreventScale = 4] = "PreventScale", e[e.PreventDataInit = 8] = "PreventDataInit", e[e.hScrollbarMoved = 16] = "hScrollbarMoved", e[e.vScrollbarMoved = 32] = "vScrollbarMoved" }(nq || (nq = {})); var rq; !function (e) { e[e.Zero = 0] = "Zero", e[e.One = 1] = "One", e[e.Two = 2] = "Two", e[e.Three = 3] = "Three", e[e.Four = 4] = "Four", e[e.Five = 5] = "Five" }(rq || (rq = {})); var oq; !function (e) { e[e.collectionChange = 0] = "collectionChange", e[e.rotateChange = 1] = "rotateChange", e[e.positionChange = 2] = "positionChange", e[e.propertyChange = 3] = "propertyChange", e[e.selectionChange = 4] = "selectionChange", e[e.sizeChange = 5] = "sizeChange", e[e.drop = 6] = "drop", e[e.sourcePointChange = 7] = "sourcePointChange", e[e.targetPointChange = 8] = "targetPointChange", e[e.connectionChange = 9] = "connectionChange", e[e.animationComplete = 10] = "animationComplete", e[e.click = 11] = "click", e[e.doubleClick = 12] = "doubleClick", e[e.scrollChange = 13] = "scrollChange", e[e.dragEnter = 14] = "dragEnter", e[e.dragLeave = 15] = "dragLeave", e[e.dragOver = 16] = "dragOver", e[e.textEdit = 17] = "textEdit", e[e.paletteSelectionChange = 18] = "paletteSelectionChange", e[e.historyChange = 19] = "historyChange", e[e.mouseEnter = 20] = "mouseEnter", e[e.mouseLeave = 21] = "mouseLeave", e[e.mouseOver = 22] = "mouseOver", e[e.expandStateChange = 23] = "expandStateChange", e[e.segmentCollectionChange = 24] = "segmentCollectionChange" }(oq || (oq = {})); var sq; !function (e) { e[e.None = 1] = "None", e[e.Drag = 2] = "Drag", e[e.Draw = 4] = "Draw", e[e.InConnect = 8] = "InConnect", e[e.OutConnect = 16] = "OutConnect", e[e.Default = 24] = "Default" }(sq || (sq = {})); var aq = "contextMenuBeforeItemRender", lq = function () { function e() { this.pivot = { x: .5, y: .5 }, this.isDirt = !0, this.isExport = !1, this.exportScaleValue = { x: 0, y: 0 }, this.exportScaleOffset = { x: 0, y: 0 }, this.canApplyStyle = !0, this.visible = !0, this.offsetX = 0, this.offsetY = 0, this.cornerRadius = 0, this.minHeight = void 0, this.minWidth = void 0, this.maxWidth = void 0, this.maxHeight = void 0, this.width = void 0, this.height = void 0, this.rotateAngle = 0, this.margin = { left: 0, right: 0, top: 0, bottom: 0 }, this.horizontalAlignment = "Auto", this.verticalAlignment = "Auto", this.flip = "None", this.relativeMode = "Point", this.transform = ZU.Self | ZU.Parent, this.style = { fill: "white", strokeColor: "black", opacity: 1, strokeWidth: 1 }, this.desiredSize = new LU, this.actualSize = new LU, this.parentTransform = 0, this.preventContainer = !1, this.isSvgRender = !1, this.bounds = new TU(0, 0, 0, 0), this.shadow = null, this.description = "", this.staticSize = !1, this.isRectElement = !1, this.isCalculateDesiredSize = !0, this.flipOffset = { x: 0, y: 0 }, this.elementActions = GU.None, this.position = void 0, this.unitMode = void 0, this.float = !1, this.floatingBounds = void 0 } return e.prototype.setOffsetWithRespectToBounds = function (e, t, i) { this.unitMode = i, this.position = { x: e, y: t } }, e.prototype.getAbsolutePosition = function (e) { if (void 0 !== this.position) return "Absolute" === this.unitMode ? this.position : { x: this.position.x * e.width, y: this.position.y * e.height } }, Object.defineProperty(e.prototype, "outerBounds", { get: function () { return this.floatingBounds || this.bounds }, set: function (e) { this.floatingBounds = e }, enumerable: !0, configurable: !0 }), e.prototype.measure = function (e) { var t = void 0 !== this.width ? this.width : (e.width || 0) - this.margin.left - this.margin.right, i = void 0 !== this.height ? this.height : (e.height || 0) - this.margin.top - this.margin.bottom; return this.desiredSize = new LU(t, i), this.isCalculateDesiredSize && (this.desiredSize = this.validateDesiredSize(this.desiredSize, e)), this.desiredSize }, e.prototype.arrange = function (e) { return this.actualSize = e, this.updateBounds(), this.actualSize }, e.prototype.updateBounds = function () { this.bounds = Vh(this) }, e.prototype.validateDesiredSize = function (e, t) { return !this.isRectElement || this.width || this.minWidth || this.maxWidth || (e.width = 50), !this.isRectElement || this.height || this.minHeight || this.maxHeight || (e.height = 50), (void 0 === e || void 0 !== this.width && void 0 !== this.height) && ((e = e || new LU).width = void 0 === this.width ? (t.width || 0) - this.margin.left - this.margin.right : this.width, e.height = void 0 === this.height ? (t.height || 0) - this.margin.top - this.margin.bottom : this.height), void 0 !== this.minWidth && (e.width = Math.max(e.width, this.minWidth)), void 0 !== this.minHeight && (e.height = Math.max(e.height, this.minHeight)), void 0 !== this.maxWidth && (e.width = Math.min(e.width, this.maxWidth)), void 0 !== this.maxHeight && (e.height = Math.min(e.height, this.maxHeight)), e }, e }(), hq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dq = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.padding = new kU(0, 0, 0, 0), t.desiredBounds = void 0, t.measureChildren = !0, t.prevRotateAngle = 0, t } return hq(t, e), t.prototype.hasChildren = function () { return void 0 !== this.children && this.children.length > 0 }, t.prototype.measure = function (e) { this.desiredBounds = void 0; var i, n, r = void 0; if (this.hasChildren()) { for (var o = 0; o < this.children.length; o++) { "Stretch" !== (i = this.children[o]).horizontalAlignment || e.width || (e.width = i.bounds.width), "Stretch" !== i.verticalAlignment || e.height || (e.height = i.bounds.height); var s = "Stretch" === i.horizontalAlignment || "Stretch" === i.verticalAlignment; (this.measureChildren || s || i instanceof t && void 0 !== i.measureChildren) && i.measure(e), n = this.GetChildrenBounds(i), "Stretch" !== i.horizontalAlignment && "Stretch" !== i.verticalAlignment ? void 0 === this.desiredBounds ? this.desiredBounds = n : this.desiredBounds.uniteRect(n) : !this.actualSize || this.actualSize.width || this.actualSize.height || i.preventContainer || "Stretch" !== i.horizontalAlignment || "Stretch" !== i.verticalAlignment || (void 0 === this.desiredBounds ? this.desiredBounds = i.bounds : this.desiredBounds.uniteRect(i.bounds)) } if (void 0 !== this.desiredBounds && 0 !== this.rotateAngle) { var a = { x: this.desiredBounds.x + this.desiredBounds.width * this.pivot.x, y: this.desiredBounds.y + this.desiredBounds.height * this.pivot.y }, l = $h(this.rotateAngle, void 0, void 0, a); this.desiredBounds.x = l.x - this.desiredBounds.width * this.pivot.x, this.desiredBounds.y = l.y - this.desiredBounds.height * this.pivot.y } this.desiredBounds && (r = new LU(this.desiredBounds.width, this.desiredBounds.height)) } return r = this.validateDesiredSize(r, e), this.stretchChildren(r), this.desiredSize = r, r }, t.prototype.arrange = function (e) { var i, n = this.desiredBounds; if (n) { this.offsetX, this.offsetY; if (this.offsetX = n.x + n.width * this.pivot.x, this.offsetY = n.y + n.height * this.pivot.y, this.hasChildren()) for (var r = 0; r < this.children.length; r++) { var o = !1; "Stretch" === (i = this.children[r]).horizontalAlignment && (i.offsetX = this.offsetX, i.parentTransform = this.parentTransform + this.rotateAngle, this.flip && this.elementActions & GU.ElementIsGroup && (i.parentTransform = "Horizontal" === this.flip || "Vertical" === this.flip ? -i.parentTransform : i.parentTransform), o = !0), "Stretch" === i.verticalAlignment && (i.offsetY = this.offsetY, i.parentTransform = this.parentTransform + this.rotateAngle, o = !0), (o || this.measureChildren || i instanceof t && void 0 !== i.measureChildren) && i.arrange(i.desiredSize) } } return this.actualSize = e, this.updateBounds(), this.prevRotateAngle = this.rotateAngle, e }, t.prototype.stretchChildren = function (e) { if (this.hasChildren()) for (var i = 0, n = this.children; i < n.length; i++) { var r = n[i]; "Stretch" !== r.horizontalAlignment && void 0 !== r.desiredSize.width || (r.desiredSize.width = e.width - r.margin.left - r.margin.right), "Stretch" !== r.verticalAlignment && void 0 !== r.desiredSize.height || (r.desiredSize.height = e.height - r.margin.top - r.margin.bottom), r instanceof t && r.stretchChildren(r.desiredSize) } }, t.prototype.applyPadding = function (e) { e.width += this.padding.left + this.padding.right, e.height += this.padding.top + this.padding.bottom }, t.prototype.findChildOffsetFromCenter = function (e, t) { var i = ed({ x: t.x - e.desiredSize.width / 2, y: t.y - e.desiredSize.height / 2 }, e); i = $h(e.rotateAngle, t.x, t.y, i), i = $h(this.rotateAngle + this.parentTransform, this.offsetX, this.offsetY, i), e.offsetX = i.x, e.offsetY = i.y }, t.prototype.GetChildrenBounds = function (e) { var t; t = e.desiredSize.clone(); e.rotateAngle, this.rotateAngle; var i = e.offsetX, n = e.offsetY, r = i - t.width * e.pivot.x, o = n - t.height * e.pivot.y, s = r + t.width, a = o + t.height, l = { x: r, y: o }, h = { x: s, y: o }, d = { x: r, y: a }, c = { x: s, y: a }; return l = $h(e.rotateAngle, e.offsetX, e.offsetY, l), h = $h(e.rotateAngle, e.offsetX, e.offsetY, h), d = $h(e.rotateAngle, e.offsetX, e.offsetY, d), c = $h(e.rotateAngle, e.offsetX, e.offsetY, c), 0 !== this.rotateAngle && (l = $h(-this.rotateAngle, void 0, void 0, l), h = $h(-this.rotateAngle, void 0, void 0, h), d = $h(-this.rotateAngle, void 0, void 0, d), c = $h(-this.rotateAngle, void 0, void 0, c)), TU.toBounds([l, h, d, c]) }, t }(lq), cq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), pq = function (e) { function t() { var t = e.call(this) || this; return t.textContent = "", t.canMeasure = !0, t.isLaneOrientation = !1, t.canConsiderBounds = !0, t.hyperlink = { color: "blue" }, t.doWrap = !0, t.textNodes = [], t.style = { color: "black", fill: "transparent", strokeColor: "black", strokeWidth: 1, fontFamily: "Arial", fontSize: 12, whiteSpace: "CollapseSpace", textWrapping: "WrapWithOverflow", textAlign: "Center", italic: !1, bold: !1, textDecoration: "None", strokeDashArray: "", opacity: 5, gradient: null, textOverflow: "Wrap" }, t.style.fill = "transparent", t.style.strokeColor = "transparent", t } return cq(t, e), Object.defineProperty(t.prototype, "content", { get: function () { return this.textContent }, set: function (e) { this.textContent !== e && (this.textContent = e, this.isDirt = !0, this.doWrap = !0) }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "childNodes", { get: function () { return this.textNodes }, set: function (e) { this.textNodes = e }, enumerable: !0, configurable: !0 }), Object.defineProperty(t.prototype, "wrapBounds", { get: function () { return this.textWrapBounds }, set: function (e) { this.textWrapBounds = e }, enumerable: !0, configurable: !0 }), t.prototype.refreshTextElement = function () { this.isDirt = !0 }, t.prototype.measure = function (e) { var t; return t = this.isDirt && this.canMeasure ? uh(this, this.style, this.content, this.isLaneOrientation ? e.height : this.width || e.width) : this.desiredSize, void 0 === this.width || void 0 === this.height ? this.desiredSize = new LU(t.width, t.height) : this.desiredSize = new LU(this.width, this.height), this.desiredSize = this.validateDesiredSize(this.desiredSize, e), this.desiredSize }, t.prototype.arrange = function (e) { return (e.width !== this.actualSize.width || e.height !== this.actualSize.height || this.isDirt) && (this.doWrap = !0), this.actualSize = e, this.updateBounds(), this.isDirt = !1, this.actualSize }, t }(lq), uq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), gq = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.measureChildren = void 0, t } return uq(t, e), t.prototype.measure = function (t) { var i = void 0, n = void 0; if (this.hasChildren()) { for (var r = 0, o = this.children; r < o.length; r++) { var s = o[r]; s instanceof pq ? s.canMeasure && (t.width = t.width || this.maxWidth || this.minWidth, s.measure(t)) : s instanceof pq || s.measure(t); var a = s.desiredSize.clone(); 0 !== s.rotateAngle && (a = Kh(a, s.rotateAngle)); var l = a.width + s.margin.right, h = a.height + s.margin.bottom, d = new TU(s.margin.left, s.margin.top, l, h); if (s.float) { if (void 0 !== s.getAbsolutePosition(a)) continue } s instanceof pq && !(s instanceof pq && s.canConsiderBounds) || (void 0 === n ? n = d : n.uniteRect(d)) } if (n) { var c = 0, p = 0; c = Math.max(n.left, 0), p = Math.max(n.top, 0), i = new LU(n.width + c, n.height + p) } } return i = e.prototype.validateDesiredSize.call(this, i, t), e.prototype.stretchChildren.call(this, i), i.width += this.padding.left + this.padding.right, i.height += this.padding.top + this.padding.bottom, this.desiredSize = i, i }, t.prototype.arrange = function (t, i) { if (this.outerBounds = new TU, this.hasChildren()) { var n = void 0, r = void 0; n = this.offsetY - t.height * this.pivot.y + this.padding.top, r = this.offsetX - t.width * this.pivot.x + this.padding.left; for (var o = 0, s = this.children; o < s.length; o++) { var a = s[o]; if (0 != (a.transform & ZU.Parent)) { a.parentTransform = this.parentTransform + this.rotateAngle, ("None" !== this.flip || this.elementActions & GU.ElementIsGroup) && (a.parentTransform = "Horizontal" === this.flip || "Vertical" === this.flip ? -a.parentTransform : a.parentTransform); var l = a.desiredSize.clone(), h = void 0, d = { x: 0, y: 0 }, c = r, p = n; if ("Point" === a.relativeMode) { var u = a.getAbsolutePosition(t); void 0 !== u && (c += u.x, p += u.y) } d = { x: (h = "Object" === a.relativeMode ? this.alignChildBasedOnParent(a, l, t, c, p) : this.alignChildBasedOnaPoint(a, c, p)).x + l.width / 2, y: h.y + l.height / 2 }, e.prototype.findChildOffsetFromCenter.call(this, a, d) } !i || "Stretch" !== a.horizontalAlignment && "Stretch" !== a.verticalAlignment ? a instanceof pq && a.canMeasure ? (a.arrange(a.desiredSize), this.outerBounds.uniteRect(a.outerBounds)) : a instanceof pq || (a.arrange(a.desiredSize), this.outerBounds.uniteRect(a.outerBounds)) : a.arrange(t) } } return this.actualSize = t, this.updateBounds(), this.outerBounds.uniteRect(this.bounds), t }, t.prototype.alignChildBasedOnParent = function (e, t, i, n, r) { switch (e.horizontalAlignment) { case "Auto": case "Left": n += e.margin.left; break; case "Right": n += i.width - t.width - e.margin.right; break; case "Stretch": case "Center": n += i.width / 2 - t.width / 2 }switch (e.verticalAlignment) { case "Auto": case "Top": r += e.margin.top; break; case "Bottom": r += i.height - t.height - e.margin.bottom; break; case "Stretch": case "Center": r += i.height / 2 - t.height / 2 }return { x: n, y: r } }, t.prototype.alignChildBasedOnaPoint = function (e, t, i) { switch (t += e.margin.left - e.margin.right, i += e.margin.top - e.margin.bottom, e.horizontalAlignment) { case "Auto": case "Left": t = t; break; case "Stretch": case "Center": t -= e.desiredSize.width * e.pivot.x; break; case "Right": t -= e.desiredSize.width }switch (e.verticalAlignment) { case "Auto": case "Top": i = i; break; case "Stretch": case "Center": i -= e.desiredSize.height * e.pivot.y; break; case "Bottom": i -= e.desiredSize.height }return { x: t, y: i } }, t }(dq), mq = { Rectangle: "M0,0 L50,0 L50,50 L0,50 z", Ellipse: "M80.5,12.5 C80.5,19.127417 62.59139,24.5 40.5,24.5 C18.40861,24.5 0.5,19.127417 0.5,12.5C0.5,5.872583 18.40861,0.5 40.5,0.5 C62.59139,0.5 80.5,5.872583 80.5,12.5 z", Hexagon: "M30,0 L60,0 L90,30 L60,60 L30,60 L0,30 L30,0 z", Parallelogram: "M30,0 L60,0 L45,30 L15,30 z", Triangle: "M45,0 L90,45 L0,45 L45,0 z", Plus: "M696.6084,158.2656 L674.8074,158.2656 L674.8074,136.4656 L658.4084,136.4656 L658.4084,158.2656 L636.6084,158.2656L636.6084,174.6646 L658.4084,174.6646 L658.4084,196.4656 L674.8074,196.4656 L674.8074,174.6646 L696.6084,174.6646L696.6084,158.2656 z", Star: "M540.3643,137.9336 L546.7973,159.7016 L570.3633,159.7296 L550.7723,171.9366 L558.9053,194.9966 L540.3643,179.4996L521.8223,194.9966 L529.9553,171.9366 L510.3633,159.7296 L533.9313,159.7016 L540.3643,137.9336 z", Pentagon: "M30,0 L60,30 L50,70 L10,70 L0,30 L30,0 z", Heptagon: "M223.7783,195.7134 L207.1303,174.8364 L213.0713,148.8034 L237.1303,137.2174 L261.1883,148.8034 L267.1303,174.8364L250.4813,195.7134 L223.7783,195.7134 z", Octagon: "M98.7319,196.4653 L81.1579,178.8923 L81.1579,154.0393 L98.7319,136.4653 L123.5849,136.4653L141.1579,154.0393 L141.1579,178.8923 L123.5849,196.4653 L98.7319,196.4653 z", Trapezoid: "M127.2842,291.4492 L95.0322,291.4492 L81.1582,256.3152 L141.1582,256.3152 L127.2842,291.4492 z", Decagon: "M657.3379,302.4141 L642.3369,291.5161 L636.6089,273.8821 L642.3369,256.2481 L657.3379,245.3511 L675.8789,245.3511L690.8789,256.2481 L696.6089,273.8821L690.8789,291.5161 L675.8789,302.4141 L657.3379,302.4141 z", RightTriangle: "M836.293,292.9238 L776.293,292.9238 L776.293,254.8408 L836.293,292.9238 z", Cylinder: "M 542.802,362.009C 542.802,368.452 525.341,373.676 503.802,373.676C 482.263,373.676 464.802,368.452 464.802,362.009L 464.802,466.484C 464.802,472.928 482.263,478.151 503.802,478.151C 525.341,478.151 542.802,472.928 542.802,466.484L 542.802,362.016C 542.802,368.459 525.341,373.534 503.802,373.534C 482.263,373.534 464.802,368.31 464.802,361.867L 464.802,362.016C 464.802,355.572 482.263,350.349 503.802,350.349C 525.341,350.349 542.802,355.572 542.802,362.016", Diamond: "M397.784,287.875 L369.5,316.159 L341.216,287.875 L369.5,259.591 L397.784,287.875 z" }, fq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), yq = function (e) { function t() { var t = e.call(this) || this; return t.pathData = "", t.transformPath = !0, t.absolutePath = "", t.canMeasurePath = !1, t.absoluteBounds = new TU, t } return fq(t, e), Object.defineProperty(t.prototype, "data", { get: function () { return this.pathData }, set: function (e) { this.pathData !== e && (this.pathData = e, this.isDirt = !0) }, enumerable: !0, configurable: !0 }), t.prototype.getPoints = function () { var e = this; return this.pointTimer || (this.pointTimer = setTimeout(function () { e.points = null, e.pointTimer = null }, 200)), this.points = this.points || function (e) { var t, i, n = [], r = "measureElement"; window[r].style.visibility = "visible"; var o = hh(window[r].children[2])[0]; o.setAttributeNS(null, "d", e.data); var s = gh(e, e.absoluteBounds); o.setAttributeNS(null, "d", s); var a = o.getTotalLength(); for (i = 0; i <= a; i += 10)t = o.getPointAtLength(i), n.push({ x: t.x, y: t.y }); return window[r].style.visibility = "hidden", n }(this), function (e, t) { for (var i = [], n = 0, r = t; n < r.length; n++) { var o = r[n], s = { x: e.offsetX - e.actualSize.width * e.pivot.x + o.x, y: e.offsetY - e.actualSize.height * e.pivot.y + o.y }, a = void 0, l = e.rotateAngle + e.parentTransform; l && Po(a = jo(), l, e.offsetX, e.offsetY), a && (s = Io(a, s)), i.push(s) } return i }(this, this.points) }, t.prototype.measure = function (e) { return this.staticSize && void 0 !== this.width && void 0 !== this.height ? this.absoluteBounds = new TU(this.offsetX - this.width * this.pivot.x, this.offsetY - this.height * this.pivot.y, this.width, this.height) : (!this.isDirt || !this.transformPath && void 0 !== this.width && void 0 !== this.height || this.absoluteBounds && 0 !== this.absoluteBounds.height) && !this.canMeasurePath || (this.absoluteBounds = dh(this.data ? this.data : "")), void 0 === this.width ? this.desiredSize = new LU(this.absoluteBounds.width, this.height || this.absoluteBounds.height) : void 0 === this.height ? this.desiredSize = new LU(this.width || this.absoluteBounds.width, this.absoluteBounds.height) : this.desiredSize = new LU(this.width, this.height), this.desiredSize = this.validateDesiredSize(this.desiredSize, e), this.canMeasurePath = !1, this.desiredSize }, t.prototype.arrange = function (e) { return (this.isDirt || this.actualSize.width !== e.width || this.actualSize.height !== e.height) && (this.isDirt = !0, this.absolutePath = this.updatePath(this.data, this.absoluteBounds, e), this.staticSize || (this.points = null)), this.actualSize = this.desiredSize, this.updateBounds(), this.isDirt = !1, this.actualSize }, t.prototype.updatePath = function (e, t, i) { var n = !1, r = "", o = -t.x, s = -t.y, a = []; return i.width === t.width && i.height === t.height || (o = i.width / Number(t.width ? t.width : 1), s = i.height / Number(t.height ? t.height : 1), n = !0), a = wo(e), a = Do(a), r = (n || this.isDirt) && this.transformPath ? So(a, o, s, n, t.x, t.y, 0, 0) : Ao(a), n = !1, r }, t }(lq), vq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), wq = function (e) { function t() { var t = e.call(this) || this; return t.imageSource = "", t.imageScale = "None", t.imageAlign = "None", t.stretch = "Stretch", t } return vq(t, e), Object.defineProperty(t.prototype, "source", { get: function () { return this.imageSource }, set: function (e) { this.imageSource = e, this.isDirt = !0 }, enumerable: !0, configurable: !0 }), t.prototype.measure = function (e) { return this.isDirt && ("Stretch" !== this.stretch || void 0 === this.width && void 0 === this.height) && (this.contentSize = function (e, t) { var i = "measureElement"; window[i].style.visibility = "visible"; var n = window[i].children[1]; n.setAttribute("src", e); var r = n.getBoundingClientRect(), o = r.width, s = r.height; return t = new LU(o, s), window[i].style.visibility = "hidden", t }(this.source, this.contentSize), this.isDirt = !1), void 0 !== this.width && void 0 !== this.height ? (this.desiredSize = new LU(this.width, this.height), this.contentSize = this.desiredSize) : this.desiredSize = this.contentSize, this.desiredSize = this.validateDesiredSize(this.desiredSize, e), this.desiredSize }, t.prototype.arrange = function (e) { return this.actualSize = new LU(this.desiredSize.width, this.desiredSize.height), this.updateBounds(), this.actualSize }, t }(lq), bq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Cq = function (e) { function t(t, i) { var n = e.call(this) || this; return n.data = "", n.nodeId = "", n.diagramId = "", n.scale = "Stretch", n.diagramId = i, n.nodeId = t, n } return bq(t, e), Object.defineProperty(t.prototype, "content", { get: function () { return this.data }, set: function (e) { this.data = e, this.template = Ph(this, !1), this.isDirt = !0 }, enumerable: !0, configurable: !0 }), t.prototype.measure = function (e) { if (this.isDirt) { var t = function (e) { var t = "measureElement"; window[t].style.visibility = "visible"; var i = window[t].children[2]; i.appendChild(e); var n = e.getBoundingClientRect(), r = i.getBoundingClientRect(), o = n; return o.x = n.left - r.left, o.y = n.top - r.top, i.removeChild(e), window[t].style.visibility = "hidden", o }(this.template); this.contentSize = new LU, this.contentSize.width = t.width, this.contentSize.height = t.height; var i = t.x, n = t.y; this.templatePosition = { x: i, y: n }, this.isDirt = !1 } if (void 0 === this.width || void 0 === this.height) { var r = function (e) { var t = "measureElement"; window[t].style.visibility = "visible"; var i = window[t].children[2]; i.appendChild(e); var n = i.getBoundingClientRect(); return i.removeChild(e), window[t].style.visibility = "hidden", n }(this.template); this.desiredSize = new LU(r.width, r.height) } else this.desiredSize = new LU(this.width, this.height); return this.desiredSize = this.validateDesiredSize(this.desiredSize, e), this.desiredSize }, t.prototype.arrange = function (e) { return this.actualSize = new LU(this.desiredSize.width, this.desiredSize.height), this.updateBounds(), this.actualSize }, t }(lq), Lq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Mq = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, Sq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Lq(t, e), Mq([Y("")], t.prototype, "id", void 0), Mq([Y("Center")], t.prototype, "horizontalAlignment", void 0), Mq([Y("Center")], t.prototype, "verticalAlignment", void 0), Mq([U({}, PU)], t.prototype, "margin", void 0), Mq([Y(12)], t.prototype, "width", void 0), Mq([Y(12)], t.prototype, "height", void 0), Mq([U({}, FU)], t.prototype, "style", void 0), Mq([Y("Square")], t.prototype, "shape", void 0), Mq([Y(DU.Connect)], t.prototype, "visibility", void 0), Mq([Y("")], t.prototype, "pathData", void 0), Mq([Y(sq.Default)], t.prototype, "constraints", void 0), Mq([Y()], t.prototype, "addInfo", void 0), t }(ww), xq = function (e) { function t(t, i, n, r) { return e.call(this, t, i, n, r) || this } return Lq(t, e), t.prototype.getClassName = function () { return "PointPort" }, Mq([U({ x: .5, y: .5 }, xU)], t.prototype, "offset", void 0), t }(Sq), Tq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Dq = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, Aq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Tq(t, e), Dq([Y("blue")], t.prototype, "color", void 0), Dq([Y("")], t.prototype, "content", void 0), Dq([Y("")], t.prototype, "link", void 0), Dq([Y("None")], t.prototype, "textDecoration", void 0), t }(ww), Eq = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i, n, r) || this; return n.id || (t.parentObj && t.parentObj.propName && "phases" === t.parentObj.propName ? o.id = t.parentObj.id : o.id = Bh()), o } return Tq(t, e), Dq([Y("")], t.prototype, "content", void 0), Dq([Y(void 0)], t.prototype, "template", void 0), Dq([Y(!0)], t.prototype, "visibility", void 0), Dq([Y(UU.InheritReadOnly)], t.prototype, "constraints", void 0), Dq([U(void 0, Aq)], t.prototype, "hyperlink", void 0), Dq([Y("")], t.prototype, "id", void 0), Dq([Y()], t.prototype, "width", void 0), Dq([Y()], t.prototype, "height", void 0), Dq([Y(0)], t.prototype, "rotateAngle", void 0), Dq([U({ strokeWidth: 0, strokeColor: "transparent", fill: "transparent" }, WU)], t.prototype, "style", void 0), Dq([Y("Center")], t.prototype, "horizontalAlignment", void 0), Dq([Y("Center")], t.prototype, "verticalAlignment", void 0), Dq([U({}, PU)], t.prototype, "margin", void 0), Dq([U({ top: void 0, bottom: void 0, left: void 0, right: void 0 }, PU)], t.prototype, "dragLimit", void 0), Dq([Y("Shape")], t.prototype, "type", void 0), Dq([Y()], t.prototype, "addInfo", void 0), t }(ww), jq = function (e) { function t(t, i, n, r) { return e.call(this, t, i, n, r) || this } return Tq(t, e), t.prototype.getClassName = function () { return "ShapeAnnotation" }, Dq([U({ x: .5, y: .5 }, xU)], t.prototype, "offset", void 0), t }(Eq), Iq = function (e) { function t(t, i, n, r) { return e.call(this, t, i, n, r) || this } return Tq(t, e), t.prototype.getClassName = function () { return "PathAnnotation" }, Dq([Y(.5)], t.prototype, "offset", void 0), Dq([U({ x: 0, y: 0 }, xU)], t.prototype, "displacement", void 0), Dq([Y("Center")], t.prototype, "alignment", void 0), Dq([Y(!1)], t.prototype, "segmentAngle", void 0), t }(Eq), kq = { X: "M14,14 L106,106 M106,14 L14,106", Circle: "M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z", Square: "M0,0 L10,0 L10,10 L0,10 z" }, Pq = { OpenArrow: "M15.9,23 L5,16 L15.9,9 L17,10.7 L8.7,16 L17,21.3Z", Square: "M0,0 L10,0 L10,10 L0,10 z", Fletch: "M14.8,10c0,0-3.5,6,0.2,12c0,0-2.5-6-10.9-6C4.1,16,11.3,16,14.8,10z", OpenFetch: "M6,17c-0.6,0-1-0.4-1-1s0.4-1,1-1c10.9,0,11-5,11-5c0-0.6,0.4-1,1-1s1,0.4,1,1C19,10.3,18.9,17,6,17C6,17,6,17,6,17z M18,23c-0.5,0-1-0.4-1-1c0-0.2-0.3-5-11-5c-0.6,0-1-0.5-1-1s0.4-1,1-1c0,0,0,0,0,0c12.9,0,13,6.7,13,7    C19,22.6,18.6,23,18,23z", IndentedArrow: "M17,10c0,0-4.5,5.5,0,12L5,16L17,10z", OutdentedArrow: "M14.6,10c0,0,5.4,6,0,12L5,16L14.6,10z", DoubleArrow: "M19,10 L19,22 L13,16Z M12,10 L12,22 L6,16Z", Arrow: "M15,10 L15,22 L5,16Z", Diamond: "M12,23l-7-7l7-7l6.9,7L12,23z", Circle: "M0,50 A50,50,0 1 1 100,50 A50,50,0 1 1 0,50 Z" }, Nq = { Process: "M419.511,76.687L359.511,76.687L359.511,43.086L419.511,43.086z", Decision: "M 253.005,115.687L 200.567,146.071L 148.097,115.687L 200.534,85.304L 253.005,115.687 Z", Document: "M 60 31.9 c 0 0 -11 -7.7 -30 0 s -30 0 -30 0 V 0 h 60 V 31.9 Z", PreDefinedProcess: "M 0,0 L 50,0 L 50,50 L 0,50 Z  M 8.334,0 L 8.334,50 M 41.667,0 L 41.667,50", Terminator: "M 269.711,29.33C 269.71,44.061 257.77,56 243.04,56L 158.058,56C 143.33,56 131.39,44.061 131.39,29.33L 131.39,29.33C 131.391,14.6057 143.33,2.669 158.058,2.669L 243.044,2.669C 257.772,2.669 269.711,14.6057 269.711,29.333 Z", PaperTap: "M0.0009,17.2042 L0.0009,47.165 C0.001,47.165 14.403,53.5455 25.00,47.165 C35.599,40.7852 44.403,43.5087 50.00,47.165L50.001,17.2042 M50.001,32.7987 L50.001,2.8405 C50.001,2.8405 35.599,-3.5427 25.001,2.8405C14.403,9.2237 5.599,6.494 0.0009,2.8405 L0.0009,32.7987", DirectData: "M 132.62 0 L 17.38 0 C 7.78 0 0 13.43 0 30 C 0 46.57 7.78 60 17.38 60 L 132.62 60 M 132.62 0C 123.02 0 115.24 13.43 115.24 30 C 115.24 46.57 123.02 60 132.62 60 C 142.22 60 150 46.57 150 30 C 150 13.43 142.22 0 132.62 0 z ", SequentialData: "M0.0029,24.999 C0.0029,11.1922 10.433,0.0021 23.295,0.0021 C36.159,0.00216 46.585,11.1922 46.585,24.999C46.585,38.8057 36.159,49.9979 23.295,49.9979 C10.433,49.9979 0.0029,38.8057 0.0029,24.999 z M23.294,49.999 L50.002,49.999", Sort: "M50.001,24.9971 L25.001,49.9971 L0.00097,24.9971 L25.001,-0.00286865 L50.001,24.9971 z M0.000976562,24.9971 L50.001,24.9971", MultiDocument: "M43.6826,40 C44.8746,40.6183 45.8586,41.3502 46.8366,42.1122 L46.8366,4.74487 L3.09857,4.74487 L3.09857,10.9544 M46.837,35.143 C48.027,35.765 49.025,36.604 50.003,37.369 L50.003,0.002 L6.264,0.002 L6.264,4.744 M43.682,47.113 L43.682,10.765 L0.0025,10.7652 L0.0025,47.1132 C0.0025,47.1132 12.5846,53.6101 21.8426,47.1132 C31.1006,40.6163 38.792,43.393 43.6826,47.1132 z", Collate: "M50.001,0.0028 L25.001,25.0029 L0.00097,0.0028 L50.001,0.002 z M0.0009,50.002 L25.001,25.002L50.001,50.002 L0.0009,50.0029 z", SummingJunction: "M7.3252,42.6768 L42.6772,7.3247 M42.6768,42.6768 L7.3248,7.3247 M0.0009,25.001 C0.0009,11.193 11.197,0.0009 25.001,0.0009 C38.809,0.0009 50.001,11.193 50.001,25.001 C50.001,38.809 38.809,50.001 25.001,50.001 C11.197,50.00 0.0009,38.809 0.0009,25.00 z", Or: "M 0 50 L 100 50 M 50 100 L 50 0.0 M 0 50 C 0 22.384 22.392 0 50 0 C 77.616 0 100 22.384 100 50 C 100 77.616 77.616 100 50 100 C 22.392 100 0 77.616 0 50 Z", InternalStorage: "M 0 3.81946A 2.5,3.81946 0 0,1 2.5,0L 47.5 0A 2.5,3.81946 0 0,1 50,3.81946L 50 45.836A 2.5,3.819446 0 0,1 47.5,49.652778L 2.5 49.652778A 2.5,3.819446 0 0,1 0,45.8336L 0 3.819446ZM 0 11.45834L 50 11.4583334M 12.5 0L 12.5 49.652778", Extract: "M0,35 L30,0 L60,35 Z", ManualOperation: "M46.4,28.8 L14.8,28.8 L0,0 L60,0 Z", Merge: "M60,0 L30,35 L0,0 Z", OffPageReference: "M60,33.3 L30.1,39 L0,33.3 L0,0 L60,0 Z", SequentialAccessStorage: "M 60 30 C 60 13.4 46.6 0 30 0 S 0 13.4 0 30 s 13.4 30 30 30 h 28.6 v -6.5 h -9.9C 55.5 48 60 39.5 60 30 Z", Annotation: "M49.9984,50.0029 L-0.00271199,50.0029 L-0.00271199,0.00286865 L49.9984,0.00286865", Annotation2: "M49.9977,50.0029 L25.416,50.0029 L25.416,0.00286865 L49.9977,0.00286865 M25.4166,25.0029 L-0.00227869,25.0029", Data: "M 10 0 L 40 0 L 30 40 L 0 40 Z", Card: "M275,60 L400,60 L400,110 L260,110 L260,75 Z", Delay: "M0,0 L12.029,0 C14.212999,0 16,1.7869979 16,3.9709952 C16,6.1549926 14.212999,7.9409904 12.029,7.9409904 L0,7.9409904 z", Preparation: "M 1048.17 572 C 1051.06 568.86 1055.17 567.05 1059.5 567 L 1094.51 567 C 1098.84 567.05 1102.95 568.86 1105.84 572 L 1126.43 595 C 1127.01 596.28 1127.01 597.72 1126.43 599 L 1105.84 622 C 1102.95 625.14 1098.84 626.95 1094.51 627 L 1059.5 627 C 1055.17 626.95 1051.06 625.14 1048.17 622 L 1027.58 599 C 1027 597.72 1027 596.28 1027.58 595 L 1048.17 572 Z", Display: "M47.8809,19.2914 L32.7968,-0.00594145 L11.3902,-0.00594145 C7.93166,-0.00594145 0.00124586,11.187 0.00124586,24.9968C0.00124586,38.8032 7.93166,49.9962 11.3902,49.9962 L32.7968,49.99 L47.615,31.038 C47.615,31.0388 52.798,24.9968 47.880,19.2914 z", ManualInput: "M 912 732 L 1006.85 707 C 1008.2 707 1009.5 707.53 1010.46 708.46 C 1011.41 709.4 1011.95 710.67 1011.95 712 L 1011.95 762C 1012 764.41 1010.28 766.52 1007.87 767 L 917.1 767 C 915.75 767 914.45 766.47 913.49 765.54 C 912.54 764.6 912 763.33 912 762 L 912 732 Z", LoopLimit: "M 8 9 L 27 9 L 33 15 L 33 26 C 33 27 33 27 32 27 L 4 27 C 3 27 2 27 2 26 L 2 15 L 8 9 Z", StoredData: "M 5.55 0L 50 0A 1.5,30 0 0,1 50,0A 5.555,25 0 0,0 50,50A 1.5,30 0 0,1 50,50L 5.555 50A 5.55,25 0 0,1 5.555,0Z" }, Oq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Rq = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, zq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Oq(t, e), Rq([Y("None")], t.prototype, "shape", void 0), Rq([Y("white")], t.prototype, "fill", void 0), Rq([Y("Auto")], t.prototype, "horizontalAlignment", void 0), Rq([Y("Auto")], t.prototype, "verticalAlignment", void 0), Rq([Y(10)], t.prototype, "width", void 0), Rq([Y(10)], t.prototype, "height", void 0), Rq([U({ x: .5, y: 1 }, xU)], t.prototype, "offset", void 0), Rq([Y("#1a1a1a")], t.prototype, "borderColor", void 0), Rq([Y(1)], t.prototype, "borderWidth", void 0), Rq([U({}, PU)], t.prototype, "margin", void 0), Rq([Y("")], t.prototype, "pathData", void 0), Rq([Y("")], t.prototype, "content", void 0), Rq([Y(0)], t.prototype, "cornerRadius", void 0), Rq([U({ left: 2, right: 2, top: 2, bottom: 2 }, PU)], t.prototype, "padding", void 0), t }(ww), Bq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Fq = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, Vq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Bq(t, e), Fq([Y("")], t.prototype, "content", void 0), Fq([Y("TopLeft")], t.prototype, "position", void 0), Fq([Y("Mouse")], t.prototype, "relativeMode", void 0), Fq([Y(!0)], t.prototype, "showTipPointer", void 0), Fq([Y("auto")], t.prototype, "width", void 0), Fq([Y("auto")], t.prototype, "height", void 0), Fq([Y("Auto")], t.prototype, "openOn", void 0), Fq([Y()], t.prototype, "animation", void 0), t }(ww), Wq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Hq = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, _q = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return Wq(t, e), Hq([Y("")], t.prototype, "id", void 0), Hq([Y(-1)], t.prototype, "zIndex", void 0), Hq([U({}, PU)], t.prototype, "margin", void 0), Hq([Y(!0)], t.prototype, "visible", void 0), Hq([G([], xq)], t.prototype, "ports", void 0), Hq([Y(!0)], t.prototype, "isExpanded", void 0), Hq([U({}, Vq)], t.prototype, "tooltip", void 0), Hq([U({}, zq)], t.prototype, "expandIcon", void 0), Hq([U({}, zq)], t.prototype, "collapseIcon", void 0), Hq([Y(!1)], t.prototype, "excludeFromLayout", void 0), Hq([Y()], t.prototype, "addInfo", void 0), Hq([Y("None")], t.prototype, "flip", void 0), t }(ww), Yq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Uq = function (e) { function t(t, i, n) { var r = e.call(this) || this; return r.data = "", r.nodeId = "", r.annotationId = "", r.diagramId = "", r.diagramId = i, r.nodeId = t, r.annotationId = n, r } return Yq(t, e), Object.defineProperty(t.prototype, "content", { get: function () { return this.data }, set: function (e) { this.data = e, this.template = Ph(this, !0), this.isDirt = !0 }, enumerable: !0, configurable: !0 }), t }(lq), qq = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), Gq = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, Qq = function (e) { switch (e.type) { case "Bpmn": return eG; case "UmlActivity": return $q; case "UmlClassifier": return aG; default: return Kq } }, Xq = function (e) { switch (e.type) { case "Straight": return iG; case "Bezier": return nG; case "Orthogonal": return rG; default: return iG } }, Jq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y(10)], t.prototype, "width", void 0), Gq([Y(10)], t.prototype, "height", void 0), Gq([Y("Arrow")], t.prototype, "shape", void 0), Gq([U({ fill: "black", strokeColor: "black", strokeWidth: 1 }, FU)], t.prototype, "style", void 0), Gq([U({ x: 0, y: .5 }, xU)], t.prototype, "pivot", void 0), Gq([Y("")], t.prototype, "pathData", void 0), t }(ww), Zq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y(0)], t.prototype, "angle", void 0), Gq([Y(0)], t.prototype, "distance", void 0), t }(ww), Kq = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y("None")], t.prototype, "type", void 0), t }(ww), $q = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y("Object")], t.prototype, "flow", void 0), Gq([Y(30)], t.prototype, "exceptionFlowHeight", void 0), t }(Kq), eG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y("Sequence")], t.prototype, "flow", void 0), Gq([Y("Normal")], t.prototype, "sequence", void 0), Gq([Y("Default")], t.prototype, "message", void 0), Gq([Y("Default")], t.prototype, "association", void 0), t }(Kq), tG = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i, n, r) || this; return o.points = [], o } return qq(t, e), Gq([Y("Straight")], t.prototype, "type", void 0), Gq([Y(!0)], t.prototype, "allowDrag", void 0), t }(ww), iG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), t.prototype.getClassName = function () { return "StraightSegment" }, Gq([U({ x: 0, y: 0 }, xU)], t.prototype, "point", void 0), t }(tG), nG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), t.prototype.getClassName = function () { return "BezierSegment" }, Gq([U({ x: 0, y: 0 }, xU)], t.prototype, "point1", void 0), Gq([U({ x: 0, y: 0 }, xU)], t.prototype, "point2", void 0), Gq([U({ angle: 0, distance: 0 }, Zq)], t.prototype, "vector1", void 0), Gq([U({ angle: 0, distance: 0 }, Zq)], t.prototype, "vector2", void 0), t }(iG), rG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), t.prototype.getClassName = function () { return "OrthogonalSegment" }, Gq([Y(null)], t.prototype, "length", void 0), Gq([Y(null)], t.prototype, "direction", void 0), t }(tG), oG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y(!0)], t.prototype, "optional", void 0), Gq([Y(void 0)], t.prototype, "lowerBounds", void 0), Gq([Y(void 0)], t.prototype, "upperBounds", void 0), t }(ww), sG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y("OneToOne")], t.prototype, "type", void 0), Gq([U({}, oG)], t.prototype, "target", void 0), Gq([U({}, oG)], t.prototype, "source", void 0), t }(ww), aG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return qq(t, e), Gq([Y("UmlClassifier")], t.prototype, "type", void 0), Gq([Y("Aggregation")], t.prototype, "relationship", void 0), Gq([Y("Directional")], t.prototype, "associationType", void 0), Gq([U({}, sG)], t.prototype, "multiplicity", void 0), t }(Kq), lG = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i, n, r) || this; return o.parentId = "", o.bridges = [], o.status = "None", o.shape && "UmlActivity" === o.shape.type && cl(n, o), o } return qq(t, e), t.prototype.init = function (e) { this.id || (this.id = Bh()); var t, i = new gq, n = new yq; n.id = this.id + "_path"; var r = new yq, o = new yq; n = this.getSegmentElement(this, n); var s, a = []; switch (a = this.getConnectorPoints(this.type), a = this.clipDecorators(this, a), s = TU.toBounds(a), i.width = s.width, i.height = s.height, i.offsetX = s.x + i.pivot.x * s.width, i.offsetY = s.y + i.pivot.y * s.height, this.shape.type) { case "Bpmn": switch (this.shape.flow) { case "Sequence": t = this.getBpmnSequenceFlow(); break; case "Association": (t = new yq).visible = !1, this.getBpmnAssociationFlow(); break; case "Message": t = this.getBpmnMessageFlow(), n = this.getSegmentElement(this, n), this.updateShapePosition(this, t) }break; case "UmlActivity": switch (this.shape.flow) { case "Object": this.getUMLObjectFlow(); break; case "Exception": this.getUMLExceptionFlow(n) }break; case "UmlClassifier": this.getConnectorRelation() }var l = this.intermediatePoints; if ("Bezier" === this.type) { var h = this.segments[0], d = this.segments[this.segments.length - 1]; l = [xU.isEmptyPoint(d.point2) ? d.bezierPoint2 : d.point2, xU.isEmptyPoint(h.point1) ? h.bezierPoint1 : h.point1] } var c = e.getDescription; this.sourceWrapper && this.sourceWrapper.style.strokeWidth; if (r = this.getDecoratorElement(a[0], l[1], this.sourceDecorator, !0, c), o = this.getDecoratorElement(a[a.length - 1], l[l.length - 2], this.targetDecorator, !1, c), r.id = this.id + "_srcDec", o.id = this.id + "_tarDec", n.style = this.style, n.style.fill = "transparent", void 0 !== c) { var p = c(this, e); n.description = p || this.id } i.style.strokeColor = "transparent", i.style.fill = "transparent", i.style.strokeWidth = 0, i.children = [n, r, o], i.id = this.id, void 0 !== t && i.children.push(t), i.offsetX = n.offsetX, i.offsetY = n.offsetY, i.width = n.width, i.height = n.height; for (var u = 0; this.annotations, u < this.annotations.length; u++)i.children.push(this.getAnnotationElement(this.annotations[u], this.intermediatePoints, s, c, e.element.id)); return this.wrapper = i, i }, t.prototype.getConnectorRelation = function () { var e = this.shape; "Association" === e.relationship ? (this.segments[0].type = "Straight", this.sourceDecorator.shape = "None", this.targetDecorator.shape = "Arrow", this.style.strokeWidth = 2) : "Inheritance" === e.relationship ? (this.segments[0].type = "Orthogonal", this.sourceDecorator.shape = "None", this.targetDecorator.shape = "Arrow", this.targetDecorator.style.fill = "white", this.style.strokeWidth = 2, this.style.strokeDashArray = "4 4") : "Composition" === e.relationship ? (this.segments[0].type = "Orthogonal", this.sourceDecorator.shape = "Diamond", this.targetDecorator.shape = "None", this.sourceDecorator.style.fill = "black", this.style.strokeWidth = 2) : "Aggregation" === e.relationship ? (this.segments[0].type = "Orthogonal", this.sourceDecorator.shape = "Diamond", this.targetDecorator.shape = "None", this.sourceDecorator.style.fill = "white", this.style.strokeWidth = 2) : "Dependency" === e.relationship ? (this.segments[0].type = "Orthogonal", this.sourceDecorator.shape = "None", this.targetDecorator.shape = "OpenArrow", this.sourceDecorator.style.fill = "white", this.style.strokeWidth = 2, this.style.strokeDashArray = "4 4") : "Realization" === e.relationship && (this.segments[0].type = "Orthogonal", this.sourceDecorator.shape = "None", this.targetDecorator.shape = "Arrow", this.sourceDecorator.style.fill = "white", this.style.strokeWidth = 2), "BiDirectional" === e.associationType && (this.sourceDecorator.shape = "None", this.targetDecorator.shape = "None"); var t, i, n = "", r = "", o = "", s = ""; e.multiplicity.source && (e.multiplicity.source.lowerBounds = e.multiplicity.source.lowerBounds, e.multiplicity.source.upperBounds = e.multiplicity.source.upperBounds), e.multiplicity.target && (e.multiplicity.target.lowerBounds = e.multiplicity.target.lowerBounds, e.multiplicity.target.upperBounds = e.multiplicity.target.upperBounds), t = e.multiplicity.source, i = e.multiplicity.target, s = t.upperBounds ? t.lowerBounds + "..." + t.upperBounds : t.lowerBounds, n = i.upperBounds ? i.lowerBounds + "..." + i.upperBounds : i.lowerBounds, "ManyToOne" === e.multiplicity.type && (e.multiplicity.target.optional = !1, r = s || "*", o = "1"), "OneToMany" === e.multiplicity.type && (e.multiplicity.source.optional = !1, o = n || "*", r = "1"), "ManyToOne" === e.multiplicity.type && (r = s || "*", o = n || "*"), "OneToOne" === e.multiplicity.type && (e.multiplicity.target.optional = !1, e.multiplicity.source.optional = !1, r = "1", o = "1"), this.annotations = [{ id: this.id + "sourcelabel", content: r, offset: 0, alignment: "Before", margin: { right: 5, bottom: 5 } }, { id: this.id + "targetlabel", content: o, offset: 1, alignment: "Before", margin: { right: 5, bottom: 5 } }] }, t.prototype.getBpmnSequenceFlow = function () { var e = new yq, t = new yq; if ("Normal" === this.shape.sequence && "Bezier" !== this.type && (this.targetDecorator.shape = "Arrow", this.targetDecorator.style.fill = "black"), "Default" === this.shape.sequence) { e = this.getSegmentElement(this, e); var i = this.intermediatePoints; t = NG(i, this), this.targetDecorator.shape = "Arrow", this.targetDecorator.style.fill = "black" } return "Conditional" === this.shape.sequence && (this.targetDecorator.shape = "Arrow", this.sourceDecorator.shape = "Diamond", t.id = this.id + this.shape.type, this.sourceDecorator.style.fill = "white", this.targetDecorator.style.fill = "black", this.sourceDecorator.width = 20, this.sourceDecorator.height = 10), t }, t.prototype.getUMLObjectFlow = function () { if (this.annotations) for (var e = 0; e < this.annotations.length; e++)this.annotations[e].content = "[" + this.annotations[e].content + "]" }, t.prototype.getUMLExceptionFlow = function (e) { this.type = "Straight"; var t = this.shape.exceptionFlowHeight / 2, i = { x: (this.targetPoint.x + this.sourcePoint.x) / 2, y: (this.targetPoint.y + this.sourcePoint.y) / 2 }, n = i.x - this.sourcePoint.x, r = i.y - this.sourcePoint.y, o = t / Math.sqrt(n * n + r * r), s = { x: i.x - n * o, y: i.y - r * o }, a = { x: i.x + n * o, y: i.y + r * o }, l = jo(); Po(l, 315, i.x, i.y), this.segments = []; var h = new iG(this, "segments", { type: "Straight", point: Io(l, a) }, !0); this.segments.push(h), h = new iG(this, "segments", { type: "Straight", point: Io(l, s) }, !0), this.segments.push(h), e = this.getSegmentElement(this, e) }, t.prototype.getBpmnAssociationFlow = function () { "Default" === this.shape.association && (this.targetDecorator.shape = "Arrow", this.targetDecorator.style.fill = "black"), "Directional" === this.shape.association && (this.style.strokeDashArray = "2 2", this.targetDecorator.style.fill = "black", this.targetDecorator.shape = "Arrow"), "BiDirectional" === this.shape.association && (this.style.strokeDashArray = "2 2", this.targetDecorator.shape = "Arrow", this.targetDecorator.style.fill = "black", this.sourceDecorator.shape = "Arrow", this.sourceDecorator.style.fill = "white", this.sourceDecorator.width = 5, this.sourceDecorator.height = 10) }, t.prototype.getBpmnMessageFlow = function () { var e = new yq; return this.style.strokeDashArray = "4 4", this.targetDecorator.shape = "Arrow", this.targetDecorator.width = 5, this.targetDecorator.height = 10, this.sourceDecorator.shape = "Circle", "InitiatingMessage" !== this.shape.message && "NonInitiatingMessage" !== this.shape.message || (e.id = this.id + "_" + this.shape.message, e.width = 25, e.height = 15, e.data = "M0,0 L19.8,12.8 L40,0 L0, 0 L0, 25.5 L40, 25.5 L 40, 0", e.horizontalAlignment = "Center", e.verticalAlignment = "Center", e.transform = ZU.Self, e.style.fill = "NonInitiatingMessage" === this.shape.message ? "lightgrey" : "white"), e }, t.prototype.distance = function (e, t) { return RG(e, t) }, t.prototype.findPath = function (e, t) { return OG(e, t) }, t.prototype.getAnnotationElement = function (e, t, i, n, r) { e.id = e.id || Bh(); var o; r && e.template ? (o = new Uq(this.id, r, e.id)).content = e.template : ((o = new pq).content = e.content, o.style.textOverflow = "Wrap"), o.constraints = e.constraints, o.visible = e.visibility, o.rotateAngle = e.rotateAngle, o.horizontalAlignment = e.horizontalAlignment, o.verticalAlignment = e.verticalAlignment, o.width = e.width, o.height = e.height, void 0 === i.width || e.template || (o.width = (e.width || i.width) - e.margin.left - e.margin.right), o.margin = e.margin, o.id = this.id + "_" + e.id, 0 === i.width && (i.width = this.style.strokeWidth), 0 === i.height && (i.height = this.style.strokeWidth), o.style = e.style; var s, a = td(n); return a && (s = a(e, this)), o.description = s || o.id, this.updateAnnotation(e, t, i, o), o }, t.prototype.updateAnnotation = function (e, t, i, n, r) { var o, s, a, l, h, d, c = { x: 0, y: 0 }; n instanceof Uq || r || n.refreshTextElement(), n.width = e.width || i.width, s = (o = Ml(t, e, i)).point, e.segmentAngle && (n.rotateAngle = e.rotateAngle + o.angle, n.rotateAngle = (n.rotateAngle + 360) % 360), 0 === i.width && (i.width = this.style.strokeWidth), 0 === i.height && (i.height = this.style.strokeWidth), d = { x: (s.x - i.x) / i.width, y: (s.y - i.y) / i.height }, c.x = i.width * d.x, c.y = i.height * d.y, l = (a = Tl(e, o.angle, t)).hAlign, h = a.vAlign; var p, u; "left" === l ? (p = "Left", c.x += e.displacement.x) : "right" === l ? (p = "Right", c.x -= e.displacement.x) : "center" === l && (p = "Center"), "top" === h ? (u = "Top", c.y += e.displacement.y) : "bottom" === h ? (u = "Bottom", c.y -= e.displacement.y) : "center" === h && (u = "Center"), n.horizontalAlignment = p, n.verticalAlignment = u, n.setOffsetWithRespectToBounds(c.x, c.y, "Absolute"), n.relativeMode = "Point" }, t.prototype.getConnectorPoints = function (e, t, i) { Math.abs(this.sourcePoint.x - this.targetPoint.x), Math.abs(this.sourcePoint.y - this.targetPoint.y); var n = Yo(this, i).slice(0); return n && n.length > 0 && (this.sourcePoint = n[0], this.targetPoint = n[n.length - 1]), n }, t.prototype.clipDecorator = function (e, t, i) { var n = { x: 0, y: 0 }, r = { x: 0, y: 0 }, o = { x: 0, y: 0 }, s = t.length; r = i ? t[0] : t[s - 1], o = i ? t[1] : t[s - 2]; var a = xU.distancePoints(r, o); a = 0 === a ? 1 : a; var l = 1, h = i ? e.sourceWrapper : e.targetWrapper; h && (l = h.style.strokeWidth); var d = l - 1; return n.x = Math.round(r.x + d * (o.x - r.x) / a), n.y = Math.round(r.y + d * (o.y - r.y) / a), (i && "None" !== e.sourceDecorator.shape || !i && "None" !== e.targetDecorator.shape) && (n = xU.adjustPoint(n, o, !0, l / 2)), n }, t.prototype.clipDecorators = function (e, t) { return "None" !== e.sourceDecorator.shape && (t[0] = this.clipDecorator(e, t, !0)), "None" !== e.targetDecorator.shape && (t[t.length - 1] = this.clipDecorator(e, t, !1)), t }, t.prototype.updateSegmentElement = function (e, t, i) { var n, r = new TU; if (n = this.getSegmentPath(e, t), "Bezier" === e.type) { if (this.segments.length > 0) for (var o = 0; o < this.segments.length; o++) { var s = this.segments[o], a = e.segments[o], l = xU.isEmptyPoint(s.point1) ? a.bezierPoint1 : a.point1, h = xU.isEmptyPoint(s.point2) ? a.bezierPoint2 : a.point2; r.uniteRect(Ns(s.points[0], l, h, s.points[1], e)) } } else r = TU.toBounds(t); return i.width = r.width, i.height = r.height, i.offsetX = r.x + i.width / 2, i.offsetY = r.y + i.height / 2, i.data = n, e.wrapper && (e.wrapper.offsetX = i.offsetX, e.wrapper.offsetY = i.offsetY, e.wrapper.width = r.width, e.wrapper.height = r.height), i }, t.prototype.getSegmentElement = function (e, t, i) { var n = []; return IG(e), n = this.getConnectorPoints(e.type, void 0, i), this.intermediatePoints = n, t.staticSize = !0, t = this.updateSegmentElement(e, n, t) }, t.prototype.getDecoratorElement = function (e, t, i, n, r) { var o = new yq; if (o.transform = ZU.Self, this.updateDecoratorElement(o, e, t, i), void 0 !== r) { var s = r(i, this); o.description = s || "source" } return o }, t.prototype.bridgePath = function (e, t, i) { var n = t; if (e.bridges.length > 0) if ("Straight" === e.type && e.segments.length < 2) for (var r = 0; r < e.bridges.length; r++) { (o = e.bridges[r]).rendered || (n += " L" + o.startPoint.x + " " + o.startPoint.y, n += o.path, o.rendered = !0) } else if ("Orthogonal" === e.type || "Straight" === e.type && e.segments.length > 1) for (r = 0; r < e.bridges.length; r++) { var o; (o = e.bridges[r]).segmentPointIndex === i && (o.rendered || o.segmentPointIndex === i && (n += " L" + o.startPoint.x + " " + o.startPoint.y, n += o.path, o.rendered = !0)) } return n }, t.prototype.updateDecoratorElement = function (e, t, i, n) { var r, o; e.offsetX = t.x, e.offsetY = t.y, o = xU.findAngle(t, i), r = Wo(n.shape, n); var s = new LU(n.width, n.height); e.pivot.x = n.pivot.x, e.pivot.y = n.pivot.y, e.style = n.style, e.rotateAngle = o, e.data = r, e.canMeasurePath = !0, e.width = s.width, e.height = s.height }, t.prototype.getSegmentPath = function (e, t) { for (var i, n, r, o = "", s = [], a = 0; a < t.length;)s.push({ x: t[a].x, y: t[a].y }), a++; for (var l = 0; l < e.bridges.length; l++) { e.bridges[l].rendered = !1 } if (s = this.clipDecorators(e, s), this.cornerRadius > 0 && "Bezier" !== this.type) for (var h = 0; h < s.length - 1; h++) { i = s[h], 0 === h && (o = "M" + i.x + " " + i.y); var d = xU.distancePoints(s[h], s[h + 1]); d > 0 && (n = h < s.length - 2 ? d < 2 * this.cornerRadius ? xU.adjustPoint(s[h], s[h + 1], !1, d / 2) : xU.adjustPoint(s[h], s[h + 1], !1, this.cornerRadius) : s[h + 1], h > 0 && (d < 2 * this.cornerRadius ? (r = xU.adjustPoint(s[h], s[h + 1], !0, d / 2), h < s.length - 2 && (n = null)) : r = xU.adjustPoint(s[h], s[h + 1], !0, this.cornerRadius)), r && (o += "Q" + i.x + " " + i.y + " " + r.x + " " + r.y), n && (e.bridges.length > 0 && (o = this.bridgePath(e, o, h), "Orthogonal" === e.type && (o = this.bridgePath(e, o, h + 1))), o += " L" + n.x + " " + n.y)) } else if ("Bezier" === this.type) { for (var c = void 0, p = this.segments, u = 0; u < p.length; u++)s.length > 2 && (p[u].bezierPoint1 = { x: 0, y: 0 }, p[u].bezierPoint2 = { x: 0, y: 0 }), !xU.isEmptyPoint(p[u].point1) || p[u].vector1.angle || p[u].vector1.distance ? p[u].vector1.angle || p[u].vector1.distance ? p[u].bezierPoint1 = xU.transform(s[u], p[u].vector1.angle, p[u].vector1.distance) : p[u].bezierPoint1 = { x: p[u].point1.x || p[u].bezierPoint1.x, y: p[u].point1.y || p[u].bezierPoint1.y } : ((e.sourceID || this.sourcePortID) && this.sourceWrapper && (c = Is(this.sourceWrapper.bounds, s[u], !0)), p[u].bezierPoint1 = Ps(s[u], s[u + 1], c)), !xU.isEmptyPoint(p[u].point2) || p[u].vector2.angle || p[u].vector2.distance ? p[u].vector2.angle || p[u].vector2.distance ? p[u].bezierPoint2 = xU.transform(s[u + 1], p[u].vector2.angle, p[u].vector2.distance) : p[u].bezierPoint2 = { x: p[u].point2.x || p[u].bezierPoint2.x, y: p[u].point2.y || p[u].bezierPoint2.y } : ((e.targetID || this.targetPortID) && this.targetWrapper && (c = Is(this.targetWrapper.bounds, s[u + 1], !0)), p[u].bezierPoint2 = Ps(s[u + 1], s[u], c)); s.splice(1, 0, { x: p[0].bezierPoint1.x, y: p[0].bezierPoint1.y }), s.splice(s.length - 1, 0, { x: p[p.length - 1].bezierPoint2.x, y: p[p.length - 1].bezierPoint2.y }), s = this.clipDecorators(e, s); for (var g = 0; g < p.length; g++) { 0 === g && (o = "M" + s[0].x + " " + s[0].y); var m = g === p.length - 1 ? s[s.length - 1].x + " " + s[s.length - 1].y : p[g].points[p[g].points.length - 1].x + " " + p[g].points[p[g].points.length - 1].y; o += "C" + p[g].bezierPoint1.x + " " + p[g].bezierPoint1.y + " " + p[g].bezierPoint2.x + " " + p[g].bezierPoint2.y + " " + m } } else for (var f = 0; f < s.length; f++)i = s[f], 0 === f && (o = "M" + i.x + " " + i.y), f > 0 && (o = this.bridgePath(e, o, f), o += " L" + i.x + " " + i.y); return o }, t.prototype.updateShapeElement = function (e) { var t; switch (e.shape.type) { case "Bpmn": e.wrapper.children[3] instanceof yq && (t = e.wrapper.children[3]), "Message" === e.shape.flow && this.updateShapePosition(e, t); break; case "UmlActivity": "Exception" === e.shape.flow && this.getUMLExceptionFlow(e.wrapper.children[0]) } }, t.prototype.updateShapePosition = function (e, t) { for (var i, n, r = 0, o = this.intermediatePoints, s = 0; s < o.length - 1; s++) { var a = .5 * (r += this.distance(o[s], o[s + 1])); r >= a && (i = hs(o[s], o[s + 1]), n = xU.transform(o[s], i, a)) } t.offsetX = n.x, t.offsetY = n.y }, t.prototype.scale = function (e, t, i, n, r) { var o = 0, s = 0; if (this.wrapper && this.wrapper.outerBounds) { var a = Ss(this), l = (this.wrapper.bounds.width || this.style.strokeWidth || 1) - 2, h = (this.wrapper.bounds.height || this.style.strokeWidth || 1) - 2; o = a.width - l, s = a.height - h, e = (i - Math.max(o, s)) / l, t = (n - Math.max(o, s)) / h, o = s = Math.min(o, s) } e = t = Math.min(e, t); var d = jo(); Po(d, -(r = r || this.wrapper).rotateAngle, r.offsetX, r.offsetY), No(d, e, t, r.offsetX, r.offsetY), Po(d, r.rotateAngle, r.offsetX, r.offsetY); var c = ko(d, this.intermediatePoints); return this.sourcePoint = c[0], this.targetPoint = c[c.length - 1], c = this.intermediatePoints = Yo(this), Yl(this, c), { x: o, y: s } }, t.prototype.getClassName = function () { return "Connector" }, Gq([q(Qq)], t.prototype, "shape", void 0), Gq([Y(YU.Default)], t.prototype, "constraints", void 0), Gq([Y(10)], t.prototype, "bridgeSpace", void 0), Gq([G([], Iq)], t.prototype, "annotations", void 0), Gq([U({}, xU)], t.prototype, "sourcePoint", void 0), Gq([U({}, xU)], t.prototype, "targetPoint", void 0), Gq([Q(Xq)], t.prototype, "segments", void 0), Gq([Y("")], t.prototype, "sourceID", void 0), Gq([Y("")], t.prototype, "targetID", void 0), Gq([Y(10)], t.prototype, "hitPadding", void 0), Gq([Y("Straight")], t.prototype, "type", void 0), Gq([Y(0)], t.prototype, "cornerRadius", void 0), Gq([U({ shape: "None" }, Jq)], t.prototype, "sourceDecorator", void 0), Gq([U({ shape: "Arrow" }, Jq)], t.prototype, "targetDecorator", void 0), Gq([U({}, Vq)], t.prototype, "tooltip", void 0), Gq([Y("")], t.prototype, "sourcePortID", void 0), Gq([Y("")], t.prototype, "targetPortID", void 0), Gq([Y(0)], t.prototype, "sourcePadding", void 0), Gq([Y(0)], t.prototype, "targetPadding", void 0), Gq([U({ strokeWidth: 1, strokeColor: "black" }, VU)], t.prototype, "style", void 0), Gq([Y(null)], t.prototype, "wrapper", void 0), t }(_q), hG = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), dG = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, cG = function (e) { function t(t, i) { var n = e.call(this, t, i) || this; return n.offset = 0, n.scale = 1, n } return hG(t, e), t.prototype.preRender = function () { this.unWireEvents(), this.wireEvents() }, t.prototype.render = function () { this.updateRulerGeometry() }, t.prototype.getModuleName = function () { return "Ruler" }, t.prototype.destroy = function () { this.unWireEvents(), this.notify("destroy", {}), e.prototype.destroy.call(this), this.element.classList.remove("e-ruler") }, t.prototype.getPersistData = function () { return this.addOnPersist(["loaded"]) }, t.prototype.onPropertyChanged = function (e, t) { for (var i = 0, n = Object.keys(e); i < n.length; i++) { switch (n[i]) { case "length": case "interval": case "segmentWidth": case "tickAlignment": case "markerColor": case "thickness": this.updateRuler() } } }, t.prototype.updateRulerGeometry = function () { this.element.style.textAlign = "left", this.renderRulerSpace(), this.updateRuler() }, t.prototype.renderRulerSpace = function () { var e = this.getRulerGeometry(), t = document.getElementById(this.element.id + "_ruler_space"); return t || (t = Dh("div", { id: this.element.id + "_ruler_space", style: "height:" + e.height + "px;width:" + e.width + "px;cssFloat:left;" }), this.element.appendChild(t)), t }, t.prototype.updateRuler = function () { var e = this.getRulerSize(), t = this.getRulerGeometry(), i = 0, n = 0, r = new LU, o = this.getRulerSVG(t); if (o && (i = this.length, r.height = e, n = this.offset, i && i !== 1 / 0)) { var s = i + this.segmentWidth, a = n; this.updateSegments(a, s + Math.abs(a), o, e) } }, t.prototype.updateSegments = function (e, t, i, n) { for (var r = e, o = { trans: 0 }; r < t;) { var s = this.getNewSegment(r, i); s && (i.appendChild(s.segment), r = this.updateSegment(e, t, s, r, o, n)) } }, t.prototype.updateSegment = function (e, t, i, n, r, o) { var s = this.updateSegmentWidth(this.scale); n === e ? (this.startValue = Math.floor(e / s) * s / this.scale, this.startValue = this.startValue % 1 != 0 ? Number(this.startValue.toFixed(1)) : this.startValue, i.label.textContent = this.startValue.toString(), this.defStartValue = n = this.startValue * this.scale, "Horizontal" === this.orientation ? this.hRulerOffset = e - n : this.vRulerOffset = e - n) : (this.startValue = n / this.scale, this.startValue = this.startValue % 1 != 0 ? Number(this.startValue.toFixed(1)) : this.startValue, i.label.textContent = this.startValue.toString()), this.updateTickLabel(i, o); var a = "Horizontal" === this.orientation ? r.trans + .5 + ",0.5" : "0.5," + (r.trans + .5); return i.segment.setAttribute("transform", "translate(" + a + ")"), r.trans += s, n += s }, t.prototype.updateTickLabel = function (e, t) { var i = e.segment.lastChild.getBBox(), n = "Horizontal" === this.orientation, r = "RightOrBottom" === this.tickAlignment, o = n ? 2 : 0, s = n ? r ? t / 2 + 5.5 - 5.5 : t / 2 + 5.5 : i.height, a = r ? -(i.width + 2) + "," + (t / 2 - i.height) : -(i.width + 2) + "," + (t / 2 - i.height / 2), l = n ? { x: o, y: s } : { x: o, y: s, transform: "rotate(270)translate(" + a + ")" }; Nh(e.segment.lastChild, l) }, t.prototype.getNewSegment = function (e, t) { var i = this.createNewTicks(e, t); return { segment: i, label: this.createTickLabel(t, i) } }, t.prototype.createNewTicks = function (e, t) { var i, n, r, o = this.updateSegmentWidth(this.scale); r = Ah("g", { class: "e-ruler-segment" }); for (var s = 0; s < this.interval; s++)n = o / this.interval, i = this.createTick(t, n, s + 1, e), r.appendChild(i); return r }, t.prototype.getLinePoint = function (e, t, i) { var n = this.updateSegmentWidth(this.scale), r = this.getRulerSize(); return t *= i - 1, i = t % n == 0 ? r : .3 * r }, t.prototype.createTick = function (e, t, i, n) { var r, o, s, a = this.getLinePoint(e, t, i), l = this.getRulerSize(), h = "Horizontal" === this.orientation, d = "RightOrBottom" === this.tickAlignment, c = td(this.arrangeTick); o = { ruler: void 0, tickLength: a, tickInterval: this.segmentWidth / this.interval * (i - 1) }, c && c(o), a = o.tickLength; var p = t * (i - 1); return s = { x1: h ? p : d ? l : 0, y1: h ? d ? l : l - (l - a) : p, x2: h ? p : d ? l - a : l - (l - a), y2: h ? d ? l - a : 0 : p, "stroke-width": "1", stroke: "black" }, (r = Ah("line", s)).setAttribute("class", "e-ruler-tick"), r }, t.prototype.createTickLabel = function (e, t) { var i; if (t) { i = Ah("text", { class: "e-ruler-tick-label" }), t.appendChild(i) } return i }, t.prototype.updateSegmentWidth = function (e) { if (100 !== this.segmentWidth) return this.segmentWidth; var t, i = 1; for (t = 100, t = 100 / Math.pow(2, Math.round(Math.log(e) / Math.log(2))); t > 100;)i /= 10, t /= 10; for (; t < 25;)i *= 10, t *= 10; return t >= 25 && t % 25 != 0 && (t = 25 * Math.round(t / 25)), t * e / i }, t.prototype.createMarkerLine = function (e, t, i) { var n; return t && ((n = e.getElementById(t.id + "_marker")) && n.parentNode.removeChild(n), n = Ah("line", i)), n }, t.prototype.drawRulerMarker = function (e, t, i) { var n, r, o, s, a, l, h, d = "Horizontal" === this.orientation, c = e.getElementsByTagName("svg"); for (a = 0; a < c.length; a++) { c[a] && (n = c[a]); break } if (n) { r = this.getRulerSize(), l = { id: e.id + "_marker", x1: 0, y1: 0, x2: d ? 0 : r, y2: d ? r : 0, stroke: this.markerColor, "stroke-width": 1.5, class: "e-d-ruler-marker" }, h = this.createMarkerLine(n, e, l), o = this.scale, s = this.offset - this.defStartValue; var p = (d ? t.x : t.y) * o + i + s; h.setAttribute("transform", "translate(" + (d ? p + .5 + " 0.5" : "0.5 " + (p + .5)) + ")"), n.appendChild(h) } }, t.prototype.getRulerGeometry = function () { return new LU(this.element ? this.element.getBoundingClientRect().width : 0, this.element ? this.element.getBoundingClientRect().height : 0) }, t.prototype.getRulerSize = function () { return this.thickness }, t.prototype.getRulerSVG = function (e) { var t, i, n = this.getRulerSize(); if (this.element && (t = document.getElementById(this.element.id + "_ruler_space"))) { if (i = Ah("svg", { id: this.element.id + "_Ruler_svg", width: "Horizontal" === this.orientation ? e.width + 200 : n + "px", height: "Horizontal" === this.orientation ? n : e.height + 200 + "px", style: "position:inherit;" }), t.childNodes.length > 0) for (var r = t.childNodes.length - 1; r >= 0; r--)t.childNodes[r].parentNode.removeChild(t.childNodes[r]); t.appendChild(i) } return i }, t.prototype.wireEvents = function () { }, t.prototype.unWireEvents = function () { }, dG([Y(5)], t.prototype, "interval", void 0), dG([Y(100)], t.prototype, "segmentWidth", void 0), dG([Y("Horizontal")], t.prototype, "orientation", void 0), dG([Y("RightOrBottom")], t.prototype, "tickAlignment", void 0), dG([Y("red")], t.prototype, "markerColor", void 0), dG([Y(25)], t.prototype, "thickness", void 0), dG([Y(null)], t.prototype, "arrangeTick", void 0), dG([Y(400)], t.prototype, "length", void 0), t }(Kw), pG = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), uG = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, gG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return pG(t, e), t.prototype.getClassName = function () { return "UserHandle" }, uG([Y("")], t.prototype, "name", void 0), uG([Y("")], t.prototype, "pathData", void 0), uG([Y("")], t.prototype, "content", void 0), uG([Y("")], t.prototype, "source", void 0), uG([Y("#000000")], t.prototype, "backgroundColor", void 0), uG([Y("top")], t.prototype, "side", void 0), uG([Y("")], t.prototype, "borderColor", void 0), uG([Y(.5)], t.prototype, "borderWidth", void 0), uG([Y(25)], t.prototype, "size", void 0), uG([Y("white")], t.prototype, "pathColor", void 0), uG([Y(10)], t.prototype, "displacement", void 0), uG([Y(!0)], t.prototype, "visible", void 0), uG([Y(0)], t.prototype, "offset", void 0), uG([U({}, PU)], t.prototype, "margin", void 0), uG([Y("Center")], t.prototype, "horizontalAlignment", void 0), uG([Y("Center")], t.prototype, "verticalAlignment", void 0), t }(ww), mG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return pG(t, e), t.prototype.init = function (e) { var t = new dq; if (t.measureChildren = !1, t.children = [], this.annotation) { var i = this.nodes.length > 0 ? e.nameTable[this.nodes[0].id].wrapper : e.nameTable[this.connectors[0].id].wrapper, n = e.getWrapper(i, this.annotation.id); t.children.push(n) } else if (this.nodes || this.connectors) { for (var r = 0; r < this.nodes.length; r++) { n = e.nameTable[this.nodes[r].id].wrapper; t.children.push(n) } for (var o = 0; o < this.connectors.length; o++) { n = e.nameTable[this.connectors[o].id].wrapper; t.children.push(n) } } return this.wrapper = t, t }, uG([Y(null)], t.prototype, "wrapper", void 0), uG([G([], mQ)], t.prototype, "nodes", void 0), uG([G([], lG)], t.prototype, "connectors", void 0), uG([Y()], t.prototype, "width", void 0), uG([Y()], t.prototype, "height", void 0), uG([Y(0)], t.prototype, "rotateAngle", void 0), uG([Y(0)], t.prototype, "offsetX", void 0), uG([Y(0)], t.prototype, "offsetY", void 0), uG([U({ x: .5, y: .5 }, xU)], t.prototype, "pivot", void 0), uG([Y("CompleteIntersect")], t.prototype, "rubberBandSelectionMode", void 0), uG([G([], gG)], t.prototype, "userHandles", void 0), uG([Y(_U.All)], t.prototype, "constraints", void 0), uG([Y()], t.prototype, "setTooltipTemplate", void 0), t }(ww), fG = { Action: "M 90 82.895 C 90 86.819 86.776 90 82.8 90 H 7.2 C 3.224 90 0 86.819 0 82.895 V 7.105 C 0 3.181 3.224 0 7.2 0 h 75.6 C 86.776 0 90 3.181 90 7.105 V 82.895 Z", Decision: "M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z", MergeNode: "M10,19.707L0.293,10L10,0.293L19.707,10L10,19.707z", InitialNode: "M10,19.5c-5.238,0-9.5-4.262-9.5-9.5S4.762,0.5,10,0.5s9.5,4.262,9.5,9.5S15.238,19.5,10,19.5z", ForkNode: "m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z", JoinNode: "m0.75,0.75l636.00002,0l0,290l-636.00002,0l0,-290z", TimeEvent: "M50.001,0.00286865 L25.001,25.0029 L0.000976562,0.00286865 L50.001,0.00286865 z M0.000976562,50.0029 L25.001,25.0029 L50.001,50.0029 L0.000976562,50.0029 z", AcceptingEvent: "M17.8336 32.164 L29.64 24 L17.32 16 L48.1664 16 L48.5 32 Z", SendSignal: "M48.164 31.8336 L56 23.832 L47.836 16 L16.168 16 L16.1668 31.8336 Z", ReceiveSignal: "M48.1664 31.8336 L39.836 24 L47.836 16 L16.168 16 L16.168 31.836 Z", StructuredNode: "M0,0 L50,0 L50,50 L0,50 z", Note: "M20 12 L4 12 L4 22 L22 22 L22 14 L20 14 L20 12 L22 14 Z" }, yG = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), vG = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, wG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yG(t, e), vG([Y()], t.prototype, "key", void 0), vG([Y()], t.prototype, "keyModifiers", void 0), t }(ww), bG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yG(t, e), t.prototype.getClassName = function () { return "Command" }, vG([Y("")], t.prototype, "name", void 0), vG([Y()], t.prototype, "canExecute", void 0), vG([Y()], t.prototype, "execute", void 0), vG([U({}, wG)], t.prototype, "gesture", void 0), vG([Y("")], t.prototype, "parameter", void 0), t }(ww), CG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yG(t, e), vG([G([], bG)], t.prototype, "commands", void 0), t }(ww), LG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return yG(t, e), vG([Y()], t.prototype, "show", void 0), vG([Y()], t.prototype, "showCustomMenuOnly", void 0), vG([Y()], t.prototype, "items", void 0), t }(ww), MG = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), SG = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.childTable = [], t.cellStyle = {}, t.desiredRowHeight = [], t.desiredCellWidth = [], t } return MG(t, e), t.prototype.rowDefinitions = function () { return this.rowDefns }, t.prototype.columnDefinitions = function () { return this.colDefns }, t.prototype.addObject = function (e, t, i, n, r) { if (this.rows.length >= t) { var o = this.rows[t]; if (o.cells.length > i) { r = r || 1, n = n || 1; var s = o.cells[i]; s.columnSpan = Math.max(r, s.columnSpan), s.rowSpan = Math.max(n, s.rowSpan); var a = new EG; (a = e).rowId = t, a.columnId = i, a.columnSpan = r, this.childTable[a.id] = a, this.addObjectToCell(a, s) } } }, t.prototype.addObjectToCell = function (e, t) { t.children || (t.children = []), e.style.strokeColor = "black", e.style.strokeWidth = 1, e.style.fill = "white", t.children.push(e) }, t.prototype.updateProperties = function (e, t, i, n) { this.offsetX = e, this.offsetY = t, this.width = i, this.height = n }, t.prototype.setDefinitions = function (e, t) { this.rowDefns = e, this.colDefns = t, this.children = [], this.rows = this.rows || []; for (var i = 0; i < e.length; i++) { var n = e[i], r = new DG; r.cells = []; var o = new TG; o.width = this.width; var s = this.colDefns; (void 0 === s || s.length < 1) && (s = [o]), this.addCellInRow(s, n, r), this.rows.push(r) } }, t.prototype.addCellInRow = function (e, t, i) { for (var n = 0; n < e.length; n++) { var r = e[n], o = new AG; o.children = [], this.cellStyle.fill = "none", this.cellStyle.strokeColor = "none", o.id = Bh(), o.style = this.cellStyle, o.desiredCellWidth = o.minWidth = r.width, o.desiredCellHeight = o.minHeight = t.height, i.cells.push(o), this.children.push(o) } }, t.prototype.calculateSize = function () { for (var e = this.rows || [], t = 0, i = 0, n = 0; n < e.length; n++) { var r = this.rows[n]; i = 0; for (var o = 0; o < r.cells.length; o++)if (i += r.cells[o].desiredCellWidth, o === r.cells.length - 1 && (this.width && this.width !== i && (r.cells[o].desiredCellWidth += this.width - i, r.cells[o].minWidth = r.cells[o].desiredCellWidth, r.cells[o].children && r.cells[o].children.length && (r.cells[o].children[0].width = r.cells[o].desiredCellWidth), this.colDefns[o].width = r.cells[o].desiredCellWidth), t += r.cells[o].desiredCellHeight, n === e.length - 1 && this.height && this.height !== t)) { var s = this.height - t; if (s > 0) { for (var a = 0; a < r.cells.length; a++)r.cells[a].desiredCellHeight += s, r.cells[a].minHeight = r.cells[a].desiredCellHeight = r.cells[a].desiredCellHeight, r.cells[a].children && r.cells[a].children.length && (r.cells[a].children[0].height = r.cells[a].desiredCellHeight); this.rowDefns[n].height += s } } } }, t.prototype.updateRowHeight = function (e, t, i, n) { var r = this.rows[e]; this.rowDefns[e].height = t, void 0 !== this.height && (this.height += t - r.cells[0].desiredCellHeight); for (var o = 0; o < r.cells.length; o++)r.cells[o].desiredCellHeight = r.cells[o].minHeight = t, r.cells[o].children && r.cells[o].children.length && (r.cells[o].children[0].height = t, this.setTextRefresh(r.cells[o].children[0])); if (this.desiredRowHeight[e] = t, this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize), i) { var s = void 0 !== n ? this.calculateCellHeightBasedOnChildren(e, n) : this.calculateCellHeight(e); s > t && this.updateRowHeight(e, s, !1) } }, t.prototype.setTextRefresh = function (e) { if (e.children && e.children.length) for (var t = e.children, i = 0; i < t.length; i++)t[i] instanceof pq && t[i].refreshTextElement(), t[i] instanceof gq && this.setTextRefresh(t[i]) }, t.prototype.updateColumnWidth = function (e, t, i, n) { this.colDefns[e].width = t, void 0 !== this.width && (this.width += t - this.rows[this.rows.length - 1].cells[e].desiredCellWidth); for (var r = 0; r < this.rows.length; r++)this.setTextRefresh(this.rows[r].cells[0]), this.rows[r].cells[e].desiredCellWidth = this.rows[r].cells[e].minWidth = t, this.rows[r].cells[e].children && this.rows[r].cells[e].children.length && (this.rows[r].cells[e].children[0].width = t); if (this.desiredCellWidth[e] = t, this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize), i) { var o = void 0 !== n ? this.calculateCellWidthBasedOnChildren(e, n) : this.calculateCellWidth(e); o > t && this.updateColumnWidth(e, o, !1) } }, t.prototype.calculateCellWidth = function (e) { for (var t, i, n, r = 0; r < this.rows.length; r++)1 === (n = this.rows[r].cells[e]).columnSpan && (i = n.outerBounds.width > n.bounds.width && (0 === n.children.length || void 0 === n.children[0].maxWidth) ? n.outerBounds.width : n.bounds.width, t = t ? t < i ? i : t : i); return t }, t.prototype.calculateCellHeight = function (e) { for (var t, i, n, r = this.rows[e], o = 0; o < r.cells.length; o++)i = (n = r.cells[o]).outerBounds.height > n.bounds.height ? n.outerBounds.height : n.bounds.height, t = t ? t < i ? i : t : i; return t }, t.prototype.calculateCellSizeBasedOnChildren = function (e, t, i, n) { var r, o; if ((o = e && e.children.length > 0 ? e.children[0] : void 0) && 1 === e.columnSpan) { r = "Width" === t ? o.bounds.right : o.bounds.bottom, n || (n = "Width" === t ? o.bounds.width : o.bounds.height); for (var s = 0; s < o.children.length; s++) { var a = o.children[s]; if (a instanceof gq && -1 === a.id.indexOf("header")) { var l = ("Width" === t ? a.bounds.right : a.bounds.bottom) + i; if (l > r) { var h = l - r + ("Width" === t ? o.bounds.width : o.bounds.height); n && (n = n < h ? h : n) } } } } return n }, t.prototype.calculateCellWidthBasedOnChildren = function (e, t) { for (var i, n, r = 0; r < this.rows.length; r++)n = this.rows[r].cells[e], i = this.calculateCellSizeBasedOnChildren(n, "Width", t, i); return i }, t.prototype.calculateCellHeightBasedOnChildren = function (e, t) { for (var i, n, r = this.rows[e], o = 0; o < r.cells.length; o++)n = r.cells[o], i = this.calculateCellSizeBasedOnChildren(n, "Height", t, i); return i }, t.prototype.addRow = function (e, t, i) { this.rowDefns.length > 0 ? this.rowDefns.splice(e, 0, t) : this.rowDefns.push(t); var n = new DG; n.cells = []; (new TG).width = this.width; var r = this.colDefns; this.addCellInRow(r, t, n), e > this.rows.length - 1 ? this.rows.push(n) : this.rows.splice(e, 0, n), i && (this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize)) }, t.prototype.addColumn = function (e, t, i) { var n, r, o, s, a = this.rows; this.colDefns.length > 0 ? this.colDefns.splice(e, 0, t) : this.colDefns.push(t), void 0 !== this.width && (this.width += t.width); for (var l = 0; l < a.length; l++)n = a[l], r = this.rowDefns[l], o = t, (s = new AG).style = this.cellStyle, s.desiredCellWidth = s.minWidth = o.width, s.desiredCellHeight = s.minHeight = r.height, s.children = [], e > n.cells.length - 1 ? n.cells.push(s) : n.cells.splice(e, 0, s), this.children.push(s); i && (this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize)) }, t.prototype.removeRow = function (e) { var t, i, n = this.rows[e]; this.height -= this.rowDefns[e].height; for (var r = 0; r < n.cells.length; r++)t = n.cells[r], this.children.splice(this.children.indexOf(t), 1), (i = document.getElementById(t.id + "_groupElement")) && i.parentElement && i.parentElement.removeChild(i); this.rows.splice(e, 1), this.rowDefns.splice(e, 1), this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize) }, t.prototype.removeColumn = function (e) { var t, i, n = this.rows; this.width -= this.colDefns[e].width; for (var r = 0; r < n.length; r++)t = n[r].cells[e], this.children.splice(this.children.indexOf(t), 1), (i = document.getElementById(t.id + "_groupElement")) && i.parentElement && i.parentElement.removeChild(i), n[r].cells.splice(e, 1); this.colDefns.splice(e, 1), this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize) }, t.prototype.updateRowIndex = function (e, t) { this.rows; var i = this.rows[e]; this.rows.splice(e, 1), this.rows.splice(t, 0, i); var n = this.rowDefns[e]; this.rowDefns.splice(e, 1), this.rowDefns.splice(t, 0, n), this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize) }, t.prototype.updateColumnIndex = function (e, t, i) { for (var n, r, o, s = e; s < this.rows.length; s++)n = this.rows[s], r = this.rows[s].cells[t], n.cells.splice(t, 1), n.cells.splice(i, 0, r); var a = this.colDefns[t]; this.colDefns.splice(t, 1), this.colDefns.splice(i, 0, a), o = this.desiredCellWidth[t], this.desiredCellWidth.splice(t, 1), this.desiredCellWidth.splice(i, 0, o), this.measure(new LU(this.width, this.height)), this.arrange(this.desiredSize) }, t.prototype.measure = function (t) { var i = void 0; if (void 0 !== this.rows && this.rows.length > 0) { var n = 0, r = 0; i = new LU(0, 0), this.calculateSize(); for (var o = 0, s = this.rows; o < s.length; o++) { r = 0; for (var a = 0, l = (u = s[o]).cells; a < l.length; a++) { var h = (y = l[a]).measure(new LU(y.desiredCellWidth, y.desiredCellHeight)); 1 === y.rowSpan && (0 === r || void 0 === this.desiredRowHeight[n] ? this.desiredRowHeight[n] = h.height : this.desiredRowHeight[n] = Math.max(h.height, this.desiredRowHeight[n])), 1 === y.columnSpan && (0 === n || void 0 === this.desiredCellWidth[r] ? this.desiredCellWidth[r] = h.width : this.desiredCellWidth[r] = Math.max(h.width, this.desiredCellWidth[r]), n === this.rows.length - 1 && (i.width += this.desiredCellWidth[r])), r++ } i.height += this.desiredRowHeight[n], n++ } n = r = 0; for (var d = 0, c = 0, p = this.rows; c < p.length; c++) { var u; r = 0; for (var g = 0, m = 0, f = (u = p[c]).cells; m < f.length; m++) { var y; if (1 !== (y = f[m]).columnSpan) { y.desiredSize.width = 0; for (var v = 0; v < y.columnSpan; v++)v + r < u.cells.length && (y.desiredSize.width += this.desiredCellWidth[v + r], y.minWidth = y.desiredSize.width, y.measure(y.desiredSize)); r++ } else y.desiredSize.width = this.desiredCellWidth[g], y.measure(y.desiredSize); if (1 !== y.rowSpan) { y.desiredSize.height = 0; for (v = 0; v < y.rowSpan; v++)v + d < this.rows.length && (y.desiredSize.height += this.desiredRowHeight[v + d], y.minHeight = y.desiredSize.height, y.measure(y.desiredSize)) } else y.desiredSize.height = this.desiredRowHeight[d], y.measure(y.desiredSize); n++ , g++ } d++ } } return void 0 === i && (i = e.prototype.validateDesiredSize.call(this, i, t)), e.prototype.stretchChildren.call(this, i), this.desiredSize = i, i }, t.prototype.arrange = function (e, t) { var i = 0, n = 0; if (void 0 !== this.rows && this.rows.length > 0) { for (var r = this.offsetX - e.width * this.pivot.x, o = this.offsetY - e.height * this.pivot.y, s = r, a = 0, l = this.rows; a < l.length; a++) { s = r, i = 0; for (var h = 0, d = (g = l[a]).cells; h < d.length; h++) { var c = d[h], p = Math.max(this.desiredCellWidth[i], c.desiredSize.width), u = Math.max(this.desiredRowHeight[n], c.desiredSize.height); c.offsetX = s + p * c.pivot.x, c.offsetY = o + u * c.pivot.y, s += this.desiredCellWidth[i], c.arrange(new LU(p, u)), i++ } o += this.desiredRowHeight[n], n++ } if (t) { c = void 0; var g = void 0, m = void 0, f = void 0, y = void 0; for (n = 0; n < this.rows.length; n++)for (g = this.rows[n], i = 0; i < g.cells.length; i++)if ((c = g.cells[i]).columnSpan > 1 && this.children.splice(this.children.indexOf(c) + 1, c.columnSpan - 1), c.rowSpan > 1) for (m = n, f = 0; m + c.rowSpan - 1 < this.rows.length && f < c.rowSpan - 1; m++ , f++)y = this.rows[m + 1].cells[i], this.children.splice(this.children.indexOf(y), 1) } } return this.actualSize = e, this.updateBounds(), e }, t }(dq), xG = function () { return function () { this.height = void 0 } }(), TG = function () { return function () { this.width = void 0 } }(), DG = function () { return function () { this.cells = null } }(), AG = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.columnSpan = 1, t.rowSpan = 1, t } return MG(t, e), t }(gq), EG = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.rowId = 0, t.columnId = 0, t.rowSpan = 1, t.columnSpan = 1, t } return MG(t, e), t }(lq), jG = function (e) { return e && (e = void 0 !== e.sourceID || void 0 !== e.sourcePoint || void 0 !== e.targetID || void 0 !== e.targetPoint || void 0 !== e.type ? lG : mQ), e }, IG = function (e) { if (!e.sourceID && !e.targetID) { var t = { x: e.sourcePoint.x, y: e.sourcePoint.y }, i = { x: e.targetPoint.x, y: e.targetPoint.y }; "Horizontal" === e.flip ? (e.sourcePoint.x = i.x, e.targetPoint.x = t.x) : "Vertical" === e.flip ? (e.sourcePoint.y = i.y, e.targetPoint.y = t.y) : "Both" === e.flip && (e.sourcePoint = i, e.targetPoint = t) } }, kG = function (e, t, i) { var n = i.offset.x, r = i.offset.y; return "Horizontal" === t ? (n = 1 - i.offset.x, r = i.offset.y) : "Vertical" === t ? (n = i.offset.x, r = 1 - i.offset.y) : "Both" === t && (n = 1 - i.offset.x, r = 1 - i.offset.y), e.setOffsetWithRespectToBounds(n, r, "Fraction"), e }, PG = function (e, t, i, n, r) { if (e.hasChildren()) for (var o = 0, s = e.children; o < s.length; o++) { var a = s[o], l = t - a.offsetX + t, h = i - a.offsetY + i; "Horizontal" !== r && "Both" !== r || (a.offsetX = l, a.flipOffset.x = l - a.desiredSize.width / 2), "Vertical" !== r && "Both" !== r || (a.offsetY = h, a.flipOffset.y = h - a.desiredSize.height / 2), (a instanceof gq || a instanceof dq) && PG(a, t, i, n, r), a.measure(new LU(a.bounds.width, a.bounds.height)), a.arrange(a.desiredSize); var d = n.nameTable[a.id]; d && n.updateConnectorEdges(d) } }, NG = function (e, t) { for (var i, n = new yq, r = 0; r < e.length - 1; r++)i = OG(e[r], e[r + 1]), n.data = i[0], n.id = t.id + "_" + t.shape.sequence, n.offsetX = i[1].x, n.offsetY = i[1].y, n.rotateAngle = 45, n.transform = ZU.Self; return n }, OG = function (e, t) { var i = { x: e.x, y: e.y }, n = RG(e, t); n = Math.min(30, n / 2); var r = hs(e, t), o = xU.transform({ x: i.x, y: i.y }, r, n), s = xU.transform({ x: o.x, y: o.y }, r, -12), a = xU.transform({ x: s.x, y: s.y }, r, 24); return ["M" + s.x + " " + s.y + " L" + a.x + " " + a.y, o] }, RG = function (e, t) { return Math.sqrt(Math.pow(t.x - e.x, 2) + Math.pow(t.y - e.y, 2)) }, zG = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), BG = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.orientation = "Vertical", t.measureChildren = void 0, t } return zG(t, e), t.prototype.measure = function (e) { var t = "Horizontal" === this.orientation ? this.updateHorizontalStack : this.updateVerticalStack; return this.desiredSize = this.measureStackPanel(e, t), this.desiredSize }, t.prototype.arrange = function (e) { var t = "Horizontal" === this.orientation ? this.arrangeHorizontalStack : this.arrangeVerticalStack; return this.actualSize = this.arrangeStackPanel(e, t), this.updateBounds(), this.actualSize }, t.prototype.measureStackPanel = function (t, i) { var n = void 0; if (void 0 !== this.children && this.children.length > 0) for (var r = 0, o = this.children; r < o.length; r++) { var s = o[r]; s.parentTransform = this.rotateAngle + this.parentTransform, this.measureChildren ? s.measure(s.desiredSize) : s.measure(t); var a = s.desiredSize.clone(); this.applyChildMargin(s, a), 0 !== s.rotateAngle && (a = Kh(a, s.rotateAngle)), void 0 === n ? n = a : s.preventContainer || i(a, n) } return n = e.prototype.validateDesiredSize.call(this, n, t), this.stretchChildren(n), this.applyPadding(n), n }, t.prototype.arrangeStackPanel = function (t, i) { if (void 0 !== this.children && this.children.length > 0) { var n = void 0, r = void 0; n = this.offsetX - t.width * this.pivot.x + this.padding.left, r = this.offsetY - t.height * this.pivot.y + this.padding.top; for (var o = 0, s = this.children; o < s.length; o++) { var a = s[o], l = a.desiredSize.clone(), h = l; "Vertical" === this.orientation ? r += a.margin.top : n += a.margin.left, 0 !== a.rotateAngle && (h = Kh(l, a.rotateAngle)); var d = i(n, r, a, this, t, h); e.prototype.findChildOffsetFromCenter.call(this, a, d), a.arrange(l, !0), "Vertical" === this.orientation ? r += h.height + a.margin.bottom : n += h.width + a.margin.right } } return t }, t.prototype.updateHorizontalStack = function (e, t) { t.height = Math.max(e.height, t.height), t.width += e.width }, t.prototype.updateVerticalStack = function (e, t) { t.width = Math.max(e.width, t.width), t.height += e.height }, t.prototype.arrangeHorizontalStack = function (e, t, i, n, r, o) { var s = 0; if ("Top" === i.verticalAlignment) s = t + i.margin.top + o.height / 2; else if ("Bottom" === i.verticalAlignment) { s = n.offsetY + r.height * (1 - n.pivot.y) - n.padding.bottom - i.margin.bottom - o.height / 2 } else s = n.offsetY - r.height * n.pivot.y + r.height / 2, i.margin.top && (s = t + i.margin.top + o.height / 2); return { x: e + o.width / 2, y: s } }, t.prototype.arrangeVerticalStack = function (e, t, i, n, r, o) { var s = 0; if ("Left" === i.horizontalAlignment) s = e + i.margin.left + o.width / 2; else if ("Right" === i.horizontalAlignment) { s = n.offsetX + r.width * (1 - n.pivot.x) - n.padding.right - i.margin.right - o.width / 2 } else s = n.offsetX - r.width * n.pivot.x + r.width / 2, i.margin.left && (s = e + i.margin.left + o.width / 2); return { x: s, y: t + o.height / 2 } }, t.prototype.stretchChildren = function (e) { if (void 0 !== this.children && this.children.length > 0) for (var t = 0, i = this.children; t < i.length; t++) { var n = i[t]; "Vertical" === this.orientation ? "Stretch" === n.horizontalAlignment && (n.desiredSize.width = e.width - (n.margin.left + n.margin.right)) : "Stretch" === n.verticalAlignment && (n.desiredSize.height = e.height - (n.margin.top + n.margin.bottom)) } }, t.prototype.applyChildMargin = function (e, t) { t.height += e.margin.top + e.margin.bottom, t.width += e.margin.left + e.margin.right }, t }(dq), FG = function () { var e = function (t, i) { return (e = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (e, t) { e.__proto__ = t } || function (e, t) { for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]) })(t, i) }; return function (t, i) { function n() { this.constructor = t } e(t, i), t.prototype = null === i ? Object.create(i) : (n.prototype = i.prototype, new n) } }(), VG = function (e, t, i, n) { var r, o = arguments.length, s = o < 3 ? t : null === n ? n = Object.getOwnPropertyDescriptor(t, i) : n; if ("object" == typeof Reflect && "function" == typeof Reflect.decorate) s = Reflect.decorate(e, t, i, n); else for (var a = e.length - 1; a >= 0; a--)(r = e[a]) && (s = (o < 3 ? r(s) : o > 3 ? r(t, i, s) : r(t, i)) || s); return o > 3 && s && Object.defineProperty(t, i, s), s }, WG = function (e) { switch (e.type) { case "Basic": return QG; case "Flow": return XG; case "Path": return _G; case "Image": return qG; case "Text": return GG; case "Bpmn": return oQ; case "Native": return YG; case "HTML": return UG; case "UmlActivity": return sQ; case "UmlClassifier": return gQ; case "SwimLane": return wQ; default: return QG } }, HG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), VG([Y("Basic")], t.prototype, "type", void 0), t }(ww), _G = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Path" }, VG([Y("Path")], t.prototype, "type", void 0), VG([Y("")], t.prototype, "data", void 0), t }(HG), YG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Native" }, VG([Y("Native")], t.prototype, "type", void 0), VG([Y("")], t.prototype, "content", void 0), VG([Y("Stretch")], t.prototype, "scale", void 0), t }(HG), UG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Html" }, VG([Y("HTML")], t.prototype, "type", void 0), VG([Y("")], t.prototype, "content", void 0), t }(HG), qG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Image" }, VG([Y("Image")], t.prototype, "type", void 0), VG([Y("")], t.prototype, "source", void 0), VG([Y("None")], t.prototype, "scale", void 0), VG([Y("None")], t.prototype, "align", void 0), t }(HG), GG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Text" }, VG([Y("Text")], t.prototype, "type", void 0), VG([Y("")], t.prototype, "content", void 0), VG([U({}, PU)], t.prototype, "margin", void 0), t }(HG), QG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BasicShape" }, VG([Y("Basic")], t.prototype, "type", void 0), VG([Y("Rectangle")], t.prototype, "shape", void 0), VG([Y(0)], t.prototype, "cornerRadius", void 0), VG([G([], xU)], t.prototype, "points", void 0), t }(HG), XG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "FlowShape" }, VG([Y("Flow")], t.prototype, "type", void 0), VG([Y("Terminator")], t.prototype, "shape", void 0), t }(HG), JG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnGateway" }, VG([Y("None")], t.prototype, "type", void 0), t }(ww), ZG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnDataObject" }, VG([Y("None")], t.prototype, "type", void 0), VG([Y(!1)], t.prototype, "collection", void 0), t }(ww), KG = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), VG([Y("None")], t.prototype, "type", void 0), VG([Y("None")], t.prototype, "loop", void 0), VG([Y(!1)], t.prototype, "call", void 0), VG([Y(!1)], t.prototype, "compensation", void 0), t }(ww), $G = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnEvent" }, VG([Y("Start")], t.prototype, "event", void 0), VG([Y("None")], t.prototype, "trigger", void 0), t }(ww), eQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnSubEvent" }, VG([Y("None")], t.prototype, "trigger", void 0), VG([Y("Start")], t.prototype, "event", void 0), VG([Y("")], t.prototype, "id", void 0), VG([U({}, xU)], t.prototype, "offset", void 0), VG([G([], jq)], t.prototype, "annotations", void 0), VG([G([], xq)], t.prototype, "ports", void 0), VG([Y()], t.prototype, "width", void 0), VG([Y()], t.prototype, "height", void 0), VG([U({}, PU)], t.prototype, "margin", void 0), VG([Y("Center")], t.prototype, "horizontalAlignment", void 0), VG([Y("Center")], t.prototype, "verticalAlignment", void 0), VG([Y(!0)], t.prototype, "visible", void 0), t }(ww), tQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), VG([U({ id: "success", event: "End", offset: { x: 1, y: .5 } }, eQ)], t.prototype, "success", void 0), VG([U({ id: "failure", event: "Intermediate", trigger: "Error", offset: { x: .25, y: 1 } }, eQ)], t.prototype, "failure", void 0), VG([U({ id: "cancel", event: "Intermediate", trigger: "Cancel", offset: { x: .75, y: 1 } }, eQ)], t.prototype, "cancel", void 0), t }(ww), iQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), VG([Y("None")], t.prototype, "type", void 0), VG([Y(!1)], t.prototype, "adhoc", void 0), VG([Y("Default")], t.prototype, "boundary", void 0), VG([Y(!1)], t.prototype, "compensation", void 0), VG([Y("None")], t.prototype, "loop", void 0), VG([Y(!0)], t.prototype, "collapsed", void 0), VG([G([], eQ)], t.prototype, "events", void 0), VG([U({}, tQ)], t.prototype, "transaction", void 0), VG([Y(void 0)], t.prototype, "processes", void 0), t }(ww), nQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnActivity" }, VG([Y("Task")], t.prototype, "activity", void 0), VG([U({}, KG)], t.prototype, "task", void 0), VG([U({}, iQ)], t.prototype, "subProcess", void 0), t }(ww), rQ = function (e) { function t(t, i, n, r) { return e.call(this, t, i, n, r) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnAnnotation" }, VG([Y("")], t.prototype, "text", void 0), VG([Y("")], t.prototype, "id", void 0), VG([Y(0)], t.prototype, "angle", void 0), VG([Y()], t.prototype, "height", void 0), VG([Y()], t.prototype, "width", void 0), VG([Y(0)], t.prototype, "length", void 0), t }(ww), oQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "BpmnShape" }, VG([Y("Bpmn")], t.prototype, "type", void 0), VG([Y("Event")], t.prototype, "shape", void 0), VG([U({}, $G)], t.prototype, "event", void 0), VG([U({}, JG)], t.prototype, "gateway", void 0), VG([U({}, ZG)], t.prototype, "dataObject", void 0), VG([U({}, nQ)], t.prototype, "activity", void 0), VG([U({}, rQ)], t.prototype, "annotation", void 0), VG([G([], rQ)], t.prototype, "annotations", void 0), t }(HG), sQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlActivityShape" }, VG([Y("UmlActivity")], t.prototype, "type", void 0), VG([Y("Action")], t.prototype, "shape", void 0), t }(HG), aQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "MethodArguments" }, VG([Y("")], t.prototype, "name", void 0), VG([Y("")], t.prototype, "type", void 0), VG([U({}, WU)], t.prototype, "style", void 0), t }(ww), lQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlClassAttribute" }, VG([Y("Public")], t.prototype, "scope", void 0), VG([Y(!1)], t.prototype, "isSeparator", void 0), t }(aQ), hQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlClassMethod" }, VG([G([], aQ)], t.prototype, "parameters", void 0), t }(lQ), dQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlClass" }, VG([Y("")], t.prototype, "name", void 0), VG([G([], lQ)], t.prototype, "attributes", void 0), VG([G([], hQ)], t.prototype, "methods", void 0), VG([U({}, WU)], t.prototype, "style", void 0), t }(ww), cQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlInterface" }, VG([Y(!1)], t.prototype, "isSeparator", void 0), t }(dQ), pQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlEnumerationMember" }, VG([Y("")], t.prototype, "name", void 0), VG([Y("")], t.prototype, "value", void 0), VG([Y(!1)], t.prototype, "isSeparator", void 0), VG([U({}, WU)], t.prototype, "style", void 0), t }(ww), uQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlEnumeration" }, VG([Y("")], t.prototype, "name", void 0), VG([G([], pQ)], t.prototype, "members", void 0), VG([U({}, WU)], t.prototype, "style", void 0), t }(ww), gQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "UmlClassifierShape" }, VG([Y("UmlClassifier")], t.prototype, "type", void 0), VG([U({}, dQ)], t.prototype, "classShape", void 0), VG([U({}, cQ)], t.prototype, "interfaceShape", void 0), VG([U({}, uQ)], t.prototype, "enumerationShape", void 0), VG([Y("Class")], t.prototype, "classifier", void 0), t }(HG), mQ = function (e) { function t(t, i, n, r) { var o = e.call(this, t, i, n, r) || this; o.isCanvasUpdate = !1, o.status = "None", o.parentId = "", o.processId = "", o.umlIndex = -1, o.outEdges = [], o.inEdges = [], o.isHeader = !1, o.isLane = !1, o.isPhase = !1; var s; return o.children && o.children.length > 0 && ((s = n).style && s.style.fill || (o.style.fill = "transparent"), s.style && s.style.strokeColor || (o.style.strokeColor = "transparent")), o.shape && "UmlActivity" === o.shape.type && cl(n, o), o.shape && "SwimLane" === o.shape.type && dl(n, o), o } return FG(t, e), Object.defineProperty(t.prototype, "actualSize", { get: function () { return null !== this.wrapper ? this.wrapper.actualSize : new LU(this.width || 0, this.height || 0) }, enumerable: !0, configurable: !0 }), t.prototype.init = function (e) { var t; t = "SwimLane" != this.shape.type ? new lq : new SG; var i; switch (this.shape.changedProperties = {}, this.shape.oldProperties = {}, this.shape.type) { case "Path": var n = new yq; n.data = this.shape.data, t = n; break; case "Image": var r = new wq; r.source = this.shape.source, r.imageAlign = this.shape.align, r.imageScale = this.shape.scale, t = r; break; case "Text": var o = new pq; o.content = this.shape.content, t = o, i = this.style, t.style = i; break; case "Basic": if ("Rectangle" === this.shape.shape) { (t = a = new lq).cornerRadius = this.shape.cornerRadius } else if ("Polygon" === this.shape.shape) { var s = new yq; s.data = Lo(this.shape.points), t = s } else { var a = new yq, l = Fo(this.shape.shape); a.data = l, t = a } break; case "Flow": var h = new yq, d = _o(this.shape.shape); h.data = d, t = h; break; case "UmlActivity": t = Wl(new yq, t, this); break; case "Bpmn": if (e.bpmnModule) { t = e.bpmnModule.initBPMNContent(t, this, e), this.wrapper.elementActions = this.wrapper.elementActions | GU.ElementIsGroup; var c = this.shape.activity.subProcess; if (c.processes && c.processes.length) for (var p = 0, u = this.shape.activity.subProcess.processes; p < u.length; p++) { var g = u[p]; !e.nameTable[g] || e.nameTable[g].processId && e.nameTable[g].processId !== this.id || (e.nameTable[g].processId = this.id, c.collapsed && e.updateElementVisibility(e.nameTable[g].wrapper, e.nameTable[g], !c.collapsed), t.children.push(e.nameTable[g].wrapper)) } } break; case "Native": var m = new Cq(this.id, e.element.id); m.content = this.shape.content, m.scale = this.shape.scale, t = m; break; case "HTML": var f = new Uq(this.id, e.element.id); f.content = this.shape.content, t = f; break; case "UmlClassifier": t = sh(t, this, e); break; case "SwimLane": this.annotations = [], this.ports = [], t.cellStyle.fill = "none", t.cellStyle.strokeColor = "none", this.container = { type: "Grid", orientation: this.shape.orientation }, t.id = this.id, this.container.orientation = this.shape.orientation, this.constraints |= qU.HideThumbs, Aa(t, e, this) }return t.id = this.id + "_content", t.relativeMode = "Object", void 0 !== this.width && (t.width = this.width), t.horizontalAlignment = "Stretch", void 0 !== this.height && (t.height = this.height), void 0 !== this.minHeight && (t.minHeight = this.minHeight), void 0 !== this.maxHeight && (t.maxHeight = this.maxHeight), void 0 !== this.minWidth && (t.minWidth = this.minWidth), void 0 !== this.maxWidth && (t.maxWidth = this.maxWidth), "Rectangle" !== this.shape.shape || this.shape.cornerRadius || (t.isRectElement = !0), t.verticalAlignment = "Stretch", this.shape instanceof GG && (t.margin = this.shape.margin), Xs(this) && 0 != (this.constraints & qU.Shadow) && (t.shadow = this.shadow), "Bpmn" === this.shape.type && "Message" !== this.shape.shape && "DataSource" !== this.shape.shape || "UmlActivity" === this.shape.type && "FinalNode" === this.shape.shape || "Text" !== this.shape.type && (t.style = this.style), (this.wrapper.elementActions & GU.ElementIsGroup || "Horizontal" !== this.flip) && "Vertical" !== this.flip || (t.flip = this.flip), t }, t.prototype.initContainer = function () { this.id || (this.id = Bh()); var e; if (!this.container || this.shape instanceof wQ) e = this.children ? new dq : new gq; else switch (this.container.type) { case "Canvas": e = new gq; break; case "Stack": e = new BG; break; case "Grid": (e = new SG).setDefinitions(this.rows, this.columns) }return e.id = this.id, e.offsetX = this.offsetX, e.offsetY = this.offsetY, e.visible = this.visible, e.horizontalAlignment = this.horizontalAlignment, e.verticalAlignment = this.verticalAlignment, this.container && (e.width = this.width, e.height = this.height, "Stack" === this.container.type && (e.orientation = this.container.orientation)), e.style.fill = this.backgroundColor, e.style.strokeColor = this.borderColor, e.style.strokeWidth = this.borderWidth, e.rotateAngle = this.rotateAngle, e.minHeight = this.minHeight, e.minWidth = this.minWidth, e.maxHeight = this.maxHeight, e.maxWidth = this.maxWidth, e.pivot = this.pivot, e.margin = this.margin, e.flip = this.flip, this.wrapper = e, e }, t.prototype.initPorts = function (e, t) { this.wrapper; for (var i, n = 0; this.ports, n < this.ports.length; n++) { (i = this.initPortWrapper(this.ports[n])).elementActions = i.elementActions | GU.ElementIsPort; var r = void 0, o = td(e); o && (r = o(i, this)), i.description = r || i.id, t.children.push(i) } }, t.prototype.getIconOffet = function (e, t) { var i, n; return "BottomToTop" === e.orientation ? (i = t.offset.x, n = 1 - t.offset.y) : "LeftToRight" === e.orientation ? (i = t.offset.y, n = t.offset.x) : "RightToLeft" === e.orientation ? (i = 1 - t.offset.y, n = t.offset.x) : (i = t.offset.x, n = t.offset.y), { x: i, y: n } }, t.prototype.initIcons = function (e, t, i, n) { this.wrapper; var r, o = this.isExpanded ? this.expandIcon : this.collapseIcon; if ("None" !== o.shape) { var s = new gq; s.float = !0; s.id = this.id + "_icon_content", s.children = [], s.height = o.height, s.width = o.width, s.style.strokeColor = "transparent", s.margin = o.margin, s.horizontalAlignment = "Center", s.verticalAlignment = "Center", s.visible = this.visible, r = this.getIconOffet(t, o), s.setOffsetWithRespectToBounds(r.x, r.y, "Fraction"), s.relativeMode = "Point", this.initIconSymbol(o, s, e, n); var a = void 0, l = td(e); l && (a = l(o, this)), s.description = a || s.id, i.children.push(s) } }, t.prototype.initAnnotations = function (e, t, i, n) { for (var r, o = 0; this.annotations, o < this.annotations.length; o++) { r = this.initAnnotationWrapper(this.annotations[o], i, n, o); var s = void 0, a = td(e); a && (s = a(r, this)), r.description = s || r.id, t.children.push(r) } }, t.prototype.initPortWrapper = function (e) { e.id = e.id || Bh(); var t = new yq; t.height = e.height, t.width = e.width; var i = "Custom" === e.shape ? e.pathData : Vo(e.shape); t.id = this.id + "_" + e.id, t.margin = e.margin, t.data = i; var n = e.style; return t.style = { fill: n.fill, strokeColor: n.strokeColor, gradient: null, opacity: n.opacity, strokeDashArray: n.strokeDashArray, strokeWidth: n.strokeWidth }, t.horizontalAlignment = e.horizontalAlignment, t.verticalAlignment = e.verticalAlignment, t = kG(t, this.flip, e), void 0 === this.width && void 0 === this.height || (t.float = !0), t.relativeMode = "Point", t.visible = !(!Ql(e, DU.Visible) || Ql(e, DU.Hover) || Ql(e, DU.Connect)), t }, t.prototype.initAnnotationWrapper = function (e, t, i, n) { e.id = e.id || n + "annotation" || Bh(); var r, o = e; if (t && e.template) (r = new Uq(this.id, t, e.id)).content = e.template; else { (r = new pq).canMeasure = !i; var s = e.style, a = e.hyperlink.link ? e.hyperlink : void 0; r.style = { fill: s.fill, strokeColor: s.strokeColor, strokeWidth: s.strokeWidth, bold: s.bold, textWrapping: s.textWrapping, color: a ? a.color || r.hyperlink.color : s.color, whiteSpace: s.whiteSpace, fontFamily: s.fontFamily, fontSize: s.fontSize, italic: s.italic, gradient: null, opacity: s.opacity, strokeDashArray: s.strokeDashArray, textAlign: s.textAlign, textOverflow: e.style.textOverflow, textDecoration: a ? a.textDecoration || r.hyperlink.textDecoration : s.textDecoration }, r.hyperlink.link = e.hyperlink.link || void 0, r.hyperlink.content = e.hyperlink.content || void 0, r.hyperlink.textDecoration = e.hyperlink.textDecoration || void 0, r.content = a ? a.content || r.hyperlink.link : e.content } return r.constraints = e.constraints, r.height = e.height, r.width = e.width, r.visible = e.visibility, r.rotateAngle = e.rotateAngle, r.id = this.id + "_" + e.id, void 0 === this.width || e.template || (void 0 === e.width || e.width > this.width && ("Wrap" === e.style.textWrapping || "WrapWithOverflow" === e.style.textWrapping)) && (r.width = this.width), r.margin = e.margin, r.horizontalAlignment = e.horizontalAlignment, r.verticalAlignment = e.verticalAlignment, r.setOffsetWithRespectToBounds(o.offset.x, o.offset.y, "Fraction"), void 0 === this.width && void 0 === this.height || (r.float = !0), r.relativeMode = "Point", r }, t.prototype.initIconContainer = function (e, t) { var i = new lq; return i.id = t.id + "_rect", i.height = e.height, i.width = e.width, i.visible = t.visible, i.margin = e.margin, i.cornerRadius = e.cornerRadius, i.style = { fill: e.fill, strokeColor: e.borderColor, strokeWidth: e.borderWidth }, i.setOffsetWithRespectToBounds(.5, .5, "Fraction"), i.horizontalAlignment = "Center", i.verticalAlignment = "Center", i.relativeMode = "Object", i.description = i.description || "Click here to expand or collapse", i }, t.prototype.initIconSymbol = function (e, t, i, n) { var r; if (t.children.push(this.initIconContainer(e, t)), "Template" === e.shape) (r = new Cq(this.id, n)).content = e.content, r.height = 10, r.width = 10; else { (r = new yq).data = Ho(e); var o = dh(r.data); r.height = o.height < 10 ? o.height : 10 - (e.padding.bottom + e.padding.top), r.width = o.width < 10 ? o.width : 10 - (e.padding.left + e.padding.right) } r.id = t.id + "_shape", r.horizontalAlignment = "Center", r.verticalAlignment = "Center", r.visible = t.visible, r.visible = t.visible, r.style = { fill: "black", strokeColor: e.borderColor, strokeWidth: e.borderWidth }, r.setOffsetWithRespectToBounds(.5, .5, "Fraction"), r.relativeMode = "Object", r.description = t.description || "Click here to expand or collapse", t.children.push(r) }, t.prototype.getClassName = function () { return "Node" }, VG([G([], jq)], t.prototype, "annotations", void 0), VG([Y(0)], t.prototype, "offsetX", void 0), VG([Y(0)], t.prototype, "offsetY", void 0), VG([U({ x: .5, y: .5 }, xU)], t.prototype, "pivot", void 0), VG([Y()], t.prototype, "width", void 0), VG([Y()], t.prototype, "height", void 0), VG([Y()], t.prototype, "minWidth", void 0), VG([Y()], t.prototype, "minHeight", void 0), VG([Y()], t.prototype, "maxWidth", void 0), VG([Y()], t.prototype, "maxHeight", void 0), VG([Y(0)], t.prototype, "rotateAngle", void 0), VG([U({ fill: "white" }, WU)], t.prototype, "style", void 0), VG([Y("transparent")], t.prototype, "backgroundColor", void 0), VG([Y("none")], t.prototype, "borderColor", void 0), VG([Y(0)], t.prototype, "borderWidth", void 0), VG([Y()], t.prototype, "data", void 0), VG([q(WG)], t.prototype, "shape", void 0), VG([Y(null)], t.prototype, "wrapper", void 0), VG([Y(qU.Default)], t.prototype, "constraints", void 0), VG([U({}, NU)], t.prototype, "shadow", void 0), VG([Y()], t.prototype, "children", void 0), VG([Y(null)], t.prototype, "container", void 0), VG([Y("Left")], t.prototype, "horizontalAlignment", void 0), VG([Y("Top")], t.prototype, "verticalAlignment", void 0), VG([Y()], t.prototype, "rows", void 0), VG([Y()], t.prototype, "columns", void 0), VG([Y()], t.prototype, "rowIndex", void 0), VG([Y()], t.prototype, "columnIndex", void 0), VG([Y()], t.prototype, "rowSpan", void 0), VG([Y()], t.prototype, "columnSpan", void 0), t }(_q), fQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), VG([Y("")], t.prototype, "id", void 0), VG([U({ style: { fill: "#111111" } }, Eq)], t.prototype, "annotation", void 0), VG([U({ fill: "#E7F4FF", strokeColor: "#CCCCCC" }, FU)], t.prototype, "style", void 0), VG([Y(50)], t.prototype, "height", void 0), VG([Y(50)], t.prototype, "width", void 0), t }(ww), yQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Lane" }, VG([Y("")], t.prototype, "id", void 0), VG([U({ fill: "#F9F9F9", strokeColor: "#CCCCCC" }, FU)], t.prototype, "style", void 0), VG([G([], mQ)], t.prototype, "children", void 0), VG([Y(100)], t.prototype, "height", void 0), VG([Y(100)], t.prototype, "width", void 0), VG([U({ style: { fill: "#E7F4FF", strokeColor: "#CCCCCC" }, annotation: { content: "Function" } }, fQ)], t.prototype, "header", void 0), t }(ww), vQ = function (e) { function t() { return null !== e && e.apply(this, arguments) || this } return FG(t, e), t.prototype.getClassName = function () { return "Phase" }, VG([Y("")], t.prototype, "id", void 0), VG([U({ strokeColor: "#CCCCCC" }, FU)], t.prototype, "style", void 0), VG([U({ annotation: { content: "Phase" } }, fQ)], t.prototype, "header", void 0), VG([Y(100)], t.prototype, "offset", void 0), t }(ww), wQ = function (e) { function t() { var t = null !== e && e.apply(this, arguments) || this; return t.padding = 20, t.hasHeader = !0, t } return FG(t, e), t.prototype.getClassName = function () { return "SwimLane" }, VG([Y("SwimLane")], t.prototype, "type", void 0), VG([Y(20)], t.prototype, "phaseSize", void 0), VG([G([], vQ)], t.prototype, "phases", void 0), VG([Y("Horizontal")], t.prototype, "orientation", void 0), VG([G([], yQ)], t.prototype, "lanes", void 0), VG([U({ style: { fill: "#E7F4FF", strokeColor: "#CCCCCC" }, annotation: { content: "Function" } }, fQ)], t.prototype, "header", void 0), VG([Y(!1)], t.prototype, "isLane", void 0), VG([Y(!1)], t.prototype, "isPhase", void 0), t }(HG), bQ = function () { function e() { } return e.prototype.getClassName = function () { return "ChildContainer" }, VG([Y("Canvas")], e.prototype, "type", void 0), VG([Y("Vertical")], e.prototype, "orientation", void 0), e }(), CQ = function () { function e() { } return e.getContext = function (e) { return e.getContext("2d") }, e.setCanvasSize = function (e, t, i) { e && (e.setAttribute("width", t.toString()), e.setAttribute("height", i.toString())) }, e.prototype.renderGradient = function (e, t, i, n) { var r, o, s; if ("None" !== e.gradient.type) { for (var a = 0; a < e.gradient.stops.length; a++)r = void 0 !== r ? e.gradient.stops[a].offset : Math.max(r, e.gradient.stops[a].offset), o = void 0 !== o ? e.gradient.stops[a].offset : Math.min(o, e.gradient.stops[a].offset); if ("Linear" === e.gradient.type) { var l = e.gradient; s = t.createLinearGradient(i + l.x1, n + l.y1, i + l.x2, n + l.y2) } else { var h = e.gradient; s = t.createRadialGradient(i + h.fx, n + h.fy, 0, i + h.cx, n + h.cy, h.r) } for (a = 0; a < e.gradient.stops.length; a++) { var d = e.gradient.stops[a], c = o < 0 ? (r + d.offset) / (2 * r) : d.offset / r; s.addColorStop(c, d.color) } t.fillStyle = s } return t }, e.prototype.renderShadow = function (t, i, n) { void 0 === n && (n = null); var r = e.getContext(i); r.save(), r.beginPath(), r.strokeStyle = r.fillStyle = t.shadow.color, r.globalAlpha = t.shadow.opacity; var o = xU.transform({ x: 0, y: 0 }, t.shadow.angle, t.shadow.distance), s = t.x + o.x, a = t.y + o.y, l = s + t.width * t.pivotX, h = a + t.height * t.pivotY; this.rotateContext(i, t.angle, l, h), n ? (r.translate(s, a), this.renderPath(i, t, n), r.translate(-s, -a)) : (r.rect(s, a, t.width, t.height), r.fillRect(s, a, t.width, t.height)), r.fill(), r.stroke(), r.closePath(), r.restore() }, e.createCanvas = function (e, t, i) { var n = Dh("canvas", { id: e }); return this.setCanvasSize(n, t, i), n }, e.prototype.setStyle = function (t, i) { var n = e.getContext(t); "none" === i.fill && (i.fill = "transparent"), "none" === i.stroke && (i.stroke = "transparent"), n.strokeStyle = i.stroke, n.lineWidth = i.strokeWidth, 0 === i.strokeWidth && (n.strokeStyle = "transparent"), n.globalAlpha = i.opacity; var r = []; i.dashArray && (r = this.parseDashArray(i.dashArray)), n.setLineDash(r), i.gradient && "None" !== i.gradient.type ? this.renderGradient(i, n, 0, 0) : n.fillStyle = i.fill }, e.prototype.rotateContext = function (t, i, n, r) { var o = e.getContext(t); o.translate(n, r), o.rotate(i * Math.PI / 180), o.translate(-n, -r) }, e.prototype.setFontStyle = function (t, i) { var n = e.getContext(t), r = ""; i.italic && (r += "italic "), i.bold && (r += "bold "), r += i.fontSize + "px ", r += i.fontFamily, n.font = r }, e.prototype.parseDashArray = function (e) { for (var t = [], i = -1 !== e.indexOf(" ") ? " " : ",", n = 0, r = e.split(i); n < r.length; n++) { var o = r[n]; t.push(Number(o)) } return t }, e.prototype.drawRectangle = function (t, i) { if (!0 === i.visible) if (i.cornerRadius) i.data = Co(i.cornerRadius, i.height, i.width), this.drawPath(t, i); else { var n = e.getContext(t); i.shadow && this.renderShadow(i, t), n.save(), n.beginPath(); i.cornerRadius; var r = i.x + i.width * i.pivotX, o = i.y + i.height * i.pivotY; this.rotateContext(t, i.angle, r, o), this.setStyle(t, i), n.rect(i.x, i.y, i.width, i.height), n.fillRect(i.x, i.y, i.width, i.height), n.fill(), n.stroke(), n.closePath(), n.restore() } }, e.prototype.drawPath = function (t, i) { var n = []; n = Mo(n = wo(i.data)), i.shadow && this.renderShadow(i, t, n); var r = e.getContext(t); r.save(), r.beginPath(); var o = i.y + i.height * i.pivotY, s = i.x + i.width * i.pivotX; "Horizontal" === i.flip || "Vertical" === i.flip ? (r.translate(i.x + i.width / 2, i.y + i.height / 2), r.rotate(-i.angle * Math.PI / 180), r.translate(-i.x - i.width / 2, -i.y - i.height / 2)) : this.rotateContext(t, i.angle, s, o), this.setStyle(t, i), r.translate(i.x, i.y), "Horizontal" === i.flip ? (r.scale(-1, 1), r.translate(-1 * i.width, 0)) : "Vertical" === i.flip ? (r.scale(1, -1), r.translate(0, -1 * i.height)) : "Both" === i.flip && (r.scale(-1, -1), r.translate(-1 * i.width, -1 * i.height)), this.renderPath(t, i, n), r.fill(), r.translate(-i.x, -i.y), r.stroke(), r.restore() }, e.prototype.renderPath = function (t, i, n) { if (!0 === i.visible) { var r, o = e.getContext(t), s = void 0, a = void 0, l = void 0, h = void 0, d = void 0, c = void 0, p = void 0, u = void 0, g = void 0, m = n; for (p = 0, u = 0, g = 0, r = m.length; g < r; ++g) { var f = m[g], y = f.command; switch ("x1" in f && (l = f.x1), "x2" in f && (d = f.x2), "y1" in f && (h = f.y1), "y2" in f && (c = f.y2), "x" in f && (p = f.x), "y" in f && (u = f.y), y) { case "M": o.moveTo(p, u), f.x = p, f.y = u; break; case "L": o.lineTo(p, u), f.x = p, f.y = u; break; case "C": o.bezierCurveTo(l, h, d, c, p, u), f.x = p, f.y = u, f.x1 = l, f.y1 = h, f.x2 = d, f.y2 = c; break; case "Q": o.quadraticCurveTo(l, h, p, u), f.x = p, f.y = u, f.x1 = l, f.y1 = h; break; case "A": var v = s, w = a, b = f.r1, C = f.r2, L = f.angle * (Math.PI / 180), M = f.largeArc, S = f.sweep, x = p, T = u, D = { x: Math.cos(L) * (v - x) / 2 + Math.sin(L) * (w - T) / 2, y: -Math.sin(L) * (v - x) / 2 + Math.cos(L) * (w - T) / 2 }, A = Math.pow(D.x, 2) / Math.pow(b, 2) + Math.pow(D.y, 2) / Math.pow(C, 2); A > 1 && (b *= Math.sqrt(A), C *= Math.sqrt(A)); var E = Math.pow(C, 2) * Math.pow(D.x, 2), j = (M === S ? -1 : 1) * Math.sqrt((Math.pow(b, 2) * Math.pow(C, 2) - Math.pow(b, 2) * Math.pow(D.y, 2) - E) / (Math.pow(b, 2) * Math.pow(D.y, 2) + Math.pow(C, 2) * Math.pow(D.x, 2))); isNaN(j) && (j = 0); var I = j * b * D.y / C, k = j * -C * D.x / b, P = { x: (v + x) / 2 + Math.cos(L) * I - Math.sin(L) * k, y: (w + T) / 2 + Math.sin(L) * I + Math.cos(L) * k }, N = this.a([1, 0], [(D.x - I) / b, (D.y - k) / C]), O = [(D.x - I) / b, (D.y - k) / C], R = [(-D.x - I) / b, (-D.y - k) / C], z = this.a(O, R); if (this.r(O, R) <= -1 && (z = Math.PI), this.r(O, R) >= 1 && (z = 0), f.centp = P, f.xAxisRotation = L, f.rx = b, f.ry = C, f.a1 = N, f.ad = z, f.sweep = S, null != o) { var B = b > C ? b : C, F = b > C ? 1 : b / C, V = b > C ? C / b : 1; o.save(), o.translate(P.x, P.y), o.rotate(L), o.scale(F, V), o.arc(0, 0, B, N, N + z, !S), o.scale(1 / F, 1 / V), o.rotate(-L), o.translate(-P.x, -P.y), o.restore() } break; case "Z": case "z": o.closePath(), p = s, u = a }s = p, a = u } } }, e.prototype.drawText = function (t, i, n, r, o, s, a) { if (i.content && !0 === i.visible) { var l = e.getContext(t); l.save(), this.setStyle(t, i), s && (i.fontSize *= s); var h = i.x + i.width * i.pivotX, d = i.y + i.height * i.pivotY; this.rotateContext(t, i.angle, h, d), this.setFontStyle(t, i); var c = 0, p = []; p = i.childNodes; var u = i.wrapBounds; if (l.fillStyle = i.color, u) { var g = this.labelAlign(i, u, p); for (c = 0; c < p.length; c++) { var m = p[c]; m.x = zh(m, p, c, i); var f = g.x + (s ? m.x * s : m.x) - u.x, y = g.y + (s ? m.dy * s : m.dy) * c + .8 * i.fontSize; if (u.width > i.width && "Wrap" !== i.textOverflow && "NoWrap" === i.textWrapping && (m.text = Jh(m.text, i)), "Clip" !== i.textOverflow && "Ellipsis" !== i.textOverflow || "Wrap" !== i.textWrapping) l.fillText(m.text, f, y); else if (y < a.actualSize.height + a.bounds.y) { if ("Ellipsis" === i.textOverflow && p[c + 1]) { var v = p[c + 1]; g.y + v.dy * (c + 1) + .8 * i.fontSize > a.actualSize.height + a.bounds.y && (m.text = m.text.slice(0, m.text.length - 3), m.text = m.text.concat("...")) } l.fillText(m.text, f, y) } if ("Underline" === i.textDecoration || "Overline" === i.textDecoration || "LineThrough" === i.textDecoration) { var w = f, b = void 0, C = f + l.measureText(m.text).width, L = void 0; switch (i.textDecoration) { case "Underline": b = y + 2, L = y + 2; break; case "Overline": b = g.y + m.dy * c, L = g.y + m.dy * c; break; case "LineThrough": b = (y + g.y + m.dy * c) / 2 + 2, L = (y + g.y + m.dy * c) / 2 + 2 }l.beginPath(), l.moveTo(w, b), l.lineTo(C, L), l.strokeStyle = i.color, l.lineWidth = .08 * i.fontSize, l.globalAlpha = i.opacity, l.stroke() } } } l.restore() } }, e.prototype.loadImage = function (e, t, i, n, r) { this.rotateContext(i, t.angle, n, r); var o = new Image; o.src = t.source, this.image(e, o, t.x, t.y, t.width, t.height, t) }, e.prototype.drawImage = function (t, i, n, r) { var o = this; if (i.visible) { var s = e.getContext(t); s.save(); var a = i.x + i.width * i.pivotX, l = i.y + i.height * i.pivotY, h = new Image; h.src = i.source; var d = s.canvas.id.split("_"); d[d.length - 1]; r ? h.onload = function () { o.loadImage(s, i, t, a, l) } : this.loadImage(s, i, t, a, l), s.restore() } }, e.prototype.image = function (e, t, i, n, r, o, s) { e.beginPath(); var a = t.width, l = t.height, h = r, d = o, c = 0, p = 0; if (s && "None" !== s.alignment) { var u = s.alignment.toLowerCase().substr(1, 3), g = s.alignment.toLowerCase().substr(5, 3); if ("Slice" === s.scale) { var m = function () { c = h, p = l * h / a }, f = function () { c = a * d / l, p = d }; h > d ? (m(), d > p && f()) : h === d ? a > l ? f() : m() : (f(), h > c && m()); var y = this.getSliceOffset(u, c, h, a), v = this.getSliceOffset(g, p, d, l), w = a - y, b = l - v, C = c - y * (c / a), L = p - v * (p / l), M = Dh("canvas", { width: r.toString(), height: o.toString() }); M.getContext("2d").drawImage(t, y, v, w, b, 0, 0, C, L), e.drawImage(M, i, n, r, o) } else if ("Meet" === s.scale) { var S = l / a, x = d / h; c = x > S ? h : d / S, p = x > S ? h * S : d, i += this.getMeetOffset(u, c, h), n += this.getMeetOffset(g, p, d), e.drawImage(t, 0, 0, a, l, i, n, c, p) } else e.drawImage(t, i, n, r, o) } else if ("None" !== s.flip) { var T = 1, D = 1; "Horizontal" !== s.flip && "Both" !== s.flip || (i = -i, r = -r, T = -1), "Vertical" !== s.flip && "Both" !== s.flip || (n = -n, o = -o, D = -1), e.scale(T, D), e.drawImage(t, i, n, r, o) } else e.drawImage(t, i, n, r, o); e.closePath() }, e.prototype.getSliceOffset = function (e, t, i, n) { switch (e) { case "min": return 0; case "mid": return (t - i) / 2 * n / t; case "max": return (t - i) * n / t; default: return 0 } }, e.prototype.getMeetOffset = function (e, t, i) { var n = Math.max(t, i), r = Math.min(t, i); switch (e) { case "min": return 0; case "mid": return (n - r) / 2; case "max": return n - r; default: return 0 } }, e.prototype.m = function (e) { return Math.sqrt(Math.pow(e[0], 2) + Math.pow(e[1], 2)) }, e.prototype.r = function (e, t) { return (e[0] * t[0] + e[1] * t[1]) / (this.m(e) * this.m(t)) }, e.prototype.a = function (e, t) { return (e[0] * t[1] < e[1] * t[0] ? -1 : 1) * Math.acos(this.r(e, t)) }, e.prototype.labelAlign = function (e, t, i) { var n = new LU(t.width, i.length * (1.2 * e.fontSize)), r = { x: 0, y: 0 }, o = e.x, s = e.y, a = .5 * e.width, l = .5 * e.height; return "left" === e.textAlign ? a = 0 : "center" === e.textAlign ? a = t.width > e.width && ("Ellipsis" === e.textOverflow || "Clip" === e.textOverflow) && "NoWrap" === e.textWrapping ? 0 : .5 * e.width : "right" === e.textAlign && (a = 1 * e.width), r.x = o + a + (t ? t.x : 0), r.y = s + l - n.height / 2, r }, e }(), LQ = function () { function e() { } return e.prototype.renderShadow = function (e, t, i, n) { void 0 === i && (i = null); var r, o, s = xU.transform({ x: 0, y: 0 }, e.shadow.angle, e.shadow.distance), a = e.x + s.x, l = e.y + s.y; e.width, e.pivotX, e.height, e.pivotY; n && (o = n.getElementById(t.id + "_shadow")), o || (r = i ? "path" : "rect", o = document.createElementNS("http://www.w3.org/2000/svg", r), t.appendChild(o)); var h = { id: t.id + "_shadow", fill: e.shadow.color, stroke: e.shadow.color, opacity: e.shadow.opacity.toString(), transform: "rotate(" + e.angle + "," + (e.x + e.width * e.pivotX) + "," + (e.y + e.height * e.pivotY) + ")translate(" + (e.x + s.x) + "," + (e.y + s.y) + ")" }; if (n) { var d = n.getElementById(t.id); d && d.insertBefore(o, d.firstChild) } Nh(o, h), i ? i && this.renderPath(o, e, i) : Nh(o, { width: e.width, height: e.height }) }, e.prototype.parseDashArray = function (e) { return [] }, e.prototype.drawRectangle = function (e, t, i, n, r, o, s) { t.shadow && !n && this.renderShadow(t, e, void 0, o); var a; a = t.id === e.id ? t.id + "_container" : t.id; var l; o && (l = o.getElementById(a)), l && !r || (l = document.createElementNS("http://www.w3.org/2000/svg", "rect"), e.appendChild(l)); var h; o && !t.shadow && (h = o.getElementById(t.id + "_groupElement_shadow")) && h.parentNode.removeChild(h); var d = { id: a, x: t.x.toString(), y: t.y.toString(), width: t.width.toString(), height: t.height.toString(), visibility: t.visible ? "visible" : "hidden", transform: "rotate(" + t.angle + "," + (t.x + t.width * t.pivotX) + "," + (t.y + t.height * t.pivotY) + ")", rx: t.cornerRadius || 0, ry: t.cornerRadius || 0, opacity: t.opacity, "aria-label": s || "" }; t.class && (d.class = t.class); s || (d["pointer-events"] = "none"), Nh(l, d), this.setSvgStyle(l, t, i) }, e.prototype.updateSelectionRegion = function (e, t) { var i; i = e.parentNode.getElementById(t.id); var n; n = { id: t.id, x: t.x.toString(), y: t.y.toString(), width: t.width.toString(), height: t.height.toString(), transform: "rotate(" + t.angle + "," + (t.x + t.width * t.pivotX) + "," + (t.y + t.height * t.pivotY) + ")", class: "e-diagram-selected-region" }, i || (i = document.createElementNS("http://www.w3.org/2000/svg", "rect"), e.appendChild(i)), this.setSvgStyle(i, t), Nh(i, n) }, e.prototype.createGElement = function (e, t) { return Ah(e, t) }, e.prototype.drawLine = function (e, t) { var i = document.createElementNS("http://www.w3.org/2000/svg", "line"); this.setSvgStyle(i, t); var n = t.x + t.width * t.pivotX, r = t.y + t.height * t.pivotY, o = { id: t.id, x1: t.startPoint.x + t.x, y1: t.startPoint.y + t.y, x2: t.endPoint.x + t.x, y2: t.endPoint.y + t.y, stroke: t.stroke, "stroke-width": t.strokeWidth.toString(), opacity: t.opacity.toString(), transform: "rotate(" + t.angle + " " + n + " " + r + ")", visibility: t.visible ? "visible" : "hidden" }; t.class && (o.class = t.class), Nh(i, o), e.appendChild(i) }, e.prototype.drawCircle = function (e, t, i, n) { var r = document.createElementNS("http://www.w3.org/2000/svg", "circle"); this.setSvgStyle(r, t); var o = t.class || ""; i || (o += " e-disabled"); var s = { id: t.id, cx: t.centerX, cy: t.centerY, r: t.radius, visibility: t.visible ? "visible" : "hidden", class: o, "aria-label": n ? n["aria-label"] : "" }; r.style.display = t.visible ? "block" : "none", Nh(r, s), e.appendChild(r) }, e.prototype.drawPath = function (e, t, i, n, r, o) { var s = Math.floor(10 * Math.random() + 1); e.id, s.toString(); var a = []; a = Mo(a = wo(t.data)), t.shadow && this.renderShadow(t, e, a, r); var l; r && !t.shadow && (l = r.getElementById(t.id + "_groupElement_shadow")) && l.parentNode.removeChild(l); var h; r && (h = r.getElementById(t.id)), h && !n || (h = document.createElementNS("http://www.w3.org/2000/svg", "path"), e.appendChild(h)), this.renderPath(h, t, a); var d = { id: t.id, transform: "rotate(" + t.angle + "," + (t.x + t.width * t.pivotX) + "," + (t.y + t.height * t.pivotY) + ")translate(" + t.x + "," + t.y + ")", visibility: t.visible ? "visible" : "hidden", opacity: t.opacity, "aria-label": o || "" }; t.class && (d.class = t.class), Nh(h, d), this.setSvgStyle(h, t, i) }, e.prototype.renderPath = function (e, t, i) { var n, r, o, s, a, l, h, d, c = i, p = ""; for (a = 0, l = 0, d = 0, h = c.length; d < h; ++d) { var u = c[d], g = u.command; switch ("x1" in u && (n = u.x1), "x2" in u && (o = u.x2), "y1" in u && (r = u.y1), "y2" in u && (s = u.y2), "x" in u && (a = u.x), "y" in u && (l = u.y), g) { case "M": p = p + "M" + a.toString() + "," + l.toString() + " "; break; case "L": p = p + "L" + a.toString() + "," + l.toString() + " "; break; case "C": p = p + "C" + n.toString() + "," + r.toString() + "," + o.toString() + "," + s.toString() + ",", p += a.toString() + "," + l.toString() + " "; break; case "Q": p = p + "Q" + n.toString() + "," + r.toString() + "," + a.toString() + "," + l.toString() + " "; break; case "A": p = p + "A" + u.r1.toString() + "," + u.r2.toString() + "," + u.angle.toString() + ",", p += u.largeArc.toString() + "," + u.sweep + "," + a.toString() + "," + l.toString() + " "; break; case "Z": case "z": p += "Z " } } e.setAttribute("d", p) }, e.prototype.setSvgFontStyle = function (e, t) { e.style.fontStyle = t.italic ? "italic" : "normal", e.style.fontWeight = t.bold ? "bold" : "normal", e.style.fontSize = t.fontSize.toString() + "px", e.style.fontFamily = t.fontFamily }, e.prototype.drawText = function (e,